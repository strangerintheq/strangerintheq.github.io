var e,t,r,f,n,a,l,c,p,d,i,u,s,h,y,x,o=(x,y)=>({x,y}),m=Math,{abs:b,sin:g,cos:F,max:w,min:v,atan2:D,sign:H,hypot:A}=m,B=m.PI,C=B/2,M=2*B,N=(e,t)=>[...Array(0|e)].map((e,r)=>t(r)),T=(e,t,r=1)=>N(e,f=>t(f/(e-1)*r)),L=(e,t,r,f)=>(t=new Uint32Array([0,1,r=f=2,3].map(t=>((e,t,r)=>parseInt(e.substr(t,8),16))(e,8*t))),e=>(f=t[3],t[3]=t[2],t[2]=t[1],t[1]=r=t[0],t[0]^=(f^=f<<11)^f>>>8^r>>>19,t[0]/2**32)),$=(t=1,r=0)=>e()*t+r,k=(e=2,t=0)=>t+$(0|e)|0,E=(e=.5)=>$()>e,I=(e=1)=>$(e)-e/2,P=e=>k(4)*B/2,S=e=>k(8)*B/4,j=e=>e[k(e.length)],R="F2F1DFF2BD1DD94711591812181212#e8d5b9c07a38df3146f5b3490e2430#f3efeff7b32b0c6291b80c09091e05#f1faeee63946a8ccdc457b9d1d3557#dff3e4bca2cd7d73c6684da2171738#dccfa39f8f6544443bc6110f12130b#fff7f4ffc6c6ff2f4ec60a5f820a5f#faf1dcff871fb8000041764b29293d#ccc9a1f0ffcea53f2b60290e280004#ecf39e90a9554f772d31572c132a13#fdf0d5669bbcc1121f780000003049#e0fbfc98c1d9ee6c4d3d5a80293241#fbfffe96031a1b1b1e6d676efaa916#fffcf2ccc5b9503d39252422eb5e28#8ecae6219ebc023047ffb703fb8500#000000FFFFFFdddddd444444888888#25232370798cf5f1eddad2bca99985#ffffff375ba9000000d6d6d6fca311#f4ca55284862d6644a3a8acafffeef#C20F00FFDD22ffffff2374C6000000#e4e1dbD96B0BBF13048C13084465A6#f4ebc5F29F05233479569cc7F20505#001427708d81f4d58dbf06038d0801#8c1c13bf4342e7d7c1a78a7f735751".split("#").map(e=>e.match(/.{6}/g).map(e=>"#"+e)),U=.5/.618,W=n=>{(t=>{e=t})(((e,t=0,r=L(e.substr(2)),f=L(e.substr(34)))=>e=>++t%2?r():f())(n)),N(419,$),t=k(24),r=$(),f=k(10),a=0,l=!0,c=E(.2),p=E(.7),r<.4&&(p=!1)},Y=(e,t,r)=>e+(t-e)*r,Z=(e,t)=>{let r=F(t),f=g(t);return o(e.x*r+e.y*f,-e.x*f+e.y*r)},q=(e,t,r)=>z(Z(z({...e},t,-1),r),t),z=(e,t,r=1)=>(e.x+=t.x*r,e.y+=t.y*r,e),G=(e,t)=>o(F(e)*t,g(e)*t),J=(e,t)=>A(e.x-t.x,e.y-t.y),K=(e,t)=>D(t.y-e.y,t.x-e.x),O=(e,t,r)=>o(Y(e.x,t.x,r),Y(e.y,t.y,r)),Q=e=>e.reduce((t,r,f)=>t+r.x*(f=e[f+1]||e[0]).y-r.y*f.x,0)/2,V=(e,t)=>({p:e,i:t,a:Q(e)}),X=(e,t)=>e[(t+1)%e.length],_=e=>e.map((t,r)=>[t,X(e,r)]),ee=(e,t,r)=>O(e,t,v(.5,r/J(e,t))),te=(e,t,r)=>!(e-1e-7<=t&&t<=r+1e-7),re=(e,t,r,f)=>{f&&e.push({...r},{...f}),t.push({...f||r})},fe=(e,t)=>{let r=[],f=[],n=0;return((e,t)=>{_(e).map(t)})(e,e=>{let a=(([e,t],[r,f])=>((e,t,r,f,n,a,l,c)=>{let p=e*f-t*r,d=n*c-a*l,i=e-r,u=t-f,s=n-l,h=a-c,y=i*h-u*s,x=(p*s-i*d)/y,o=(p*h-u*d)/y;if(isNaN(x+o))return!1;if(e>=r){if(te(r,x,e))return!1}else if(te(e,x,r))return!1;if(t>=f){if(te(f,o,t))return!1}else if(te(t,o,f))return!1;if(n>=l){if(te(l,x,n))return!1}else if(te(n,x,l))return!1;if(a>=c){if(te(c,o,a))return!1}else if(te(a,o,c))return!1;return{x:x,y:o}})(e.x,e.y,t.x,t.y,r.x,r.y,f.x,f.y))(t,e);a&&n++,n%2?re(r,f,e[0],a):re(f,r,e[0],a)}),n<2?[e]:[r,f]},ne=e=>{e[1]&&e.sort((e,t)=>Q(t)-Q(e)).pop()},ae=(e,t,r,f,n)=>{for(let a=0;a<t.length;a++){let l=[],c=K(...t[a]),p=G(c+P(),j([$(.02,.01),$(.03,.03),0]));e.map(r=>{if(E(1-f)&&e.length>1||e.length>9)return l.push(r);let c=fe(r,t[a]);E(1-n)&&c[0].map(e=>z(e,p)),l.push(...c)}),E(1-r)&&ne(l),e=l}return e},le=(e,t,r,f,n)=>{let a={x:r,y:f},l=((e,t,r=!1)=>{let[f,n]=e,a=n.x-f.x,l=n.y-f.y,c=((t.x-f.x)*a+(t.y-f.y)*l)/(a*a+l*l);return r&&(c=v(1,w(c,0))),o(f.x+c*a,f.y+c*l)})([e,t],a,!0);return J(l,a)<n},ce=(e,t,r,f,n,a)=>{for(let l=0;l<t;l++){let t=n(),l=I(.9-t),c=I(1.5-t),p=!0;for(let e=0;e<i.length&&p;e++){let f=i[e].p||i[e];for(let e=0;e<f.length&&p;e++)le(f[e],f[(e+1)%f.length],l,c,t*r)&&(p=!1)}if((e&&!p||!e&&p)&&(!a||a(l,c,t)))return f(l,c,t,a&&a(l,c,t))}},pe=(e,t,r)=>Z(o(e,t),r),de=(e,t,r,f,n=0)=>((e,t,r)=>e.map(e=>z(e,{x:t,y:r})))([pe(-r,-f,n),pe(r,-f,n),pe(r,f,n),pe(-r,f,n)],e,t),ie=(e,t,r)=>{let f=[],a=E(),l=j([2,3,4,6]),p=$(.5,.5),d=$(1.5,.2),i=j([0,0,$(.1)]);for(let e=0;e<l;e++){let t=e/l*r-r/2,n=I(p)*r,c=r/l/2*d*(a?$(.7,.3):1),u=$(p/3*2,p/3)*r,s=de(t,n,c,u*(E(.2)?1:4),I(i));f.push(s)}let u=o(e,t),s=n,h=k(2,1);return f.map(e=>{let t=h&&k(2)*C,r=s+t;return t&&h--,e.map(e=>Z(e,r)).map(e=>z(e,u)).map(e=>c?o(e.x+I(.01),e.y+I(.01)):e)})},ue=(e,t,r)=>{let f=N(c?k(3,1):0,e=>{let t=j([2,3,5]),f=$(.01,.001),n=$(99);return e=>r*g(e*t+n)*f});return((e,t,r,f)=>r.map(r=>z(G(r,f(r)),{x:e,y:t})))(e,t,((e,t,r,f)=>{let n=[];for(let e=0;e<t;e+=$(.05,.03))n.push(e);return n.push(t),n})(0,M),e=>f.reduce((t,r)=>r(e)+t,r))},se=(e,t,r)=>[...ue(e,t,r),...ue(e,t,r*$(.22,.55)).reverse()],he=(e,t,r)=>[o(e-r,t-r*$(.5,1)),o(e+r,t-r*$(.5,1)),o(e+r,t+r*$(.5,1)),o(e-r,t+r*$(.5,1))],ye=e=>!e.some(e=>(e=>b(e.x)>.5-a||b(e.y)>U-a)(e)),xe=e=>{d=N(j(r<.05?[1,2]:[2,3,4,5]),e=>{let t=I(.7),r=P()+n+I(j([0,0,$(.1)]));return[Z(o(-9,t),r),Z(o(9,t),r)]});let t=$(.23,.25),f=E(),c=f?I(.7):0,u=!f&&E(.7)?I(.5-t):0;i=((e,t,r=0)=>N(t.length/2,e=>[r+=t[2*e],t[2*e+1]]).find(t=>e<t[0])[1])(r,[.05,se,.35,ue,.3,ie,.2,(e,t,r,f,n)=>de(e,t,r,f,(e=>E()?e+P():E()?e+S():S())(n)),.1,he])(u,c,t,t,n),isNaN(i[0].x)||(i=[i]),(i=ae((e=>{let t=j([7,13,21]);return e.map(e=>p&&E()&&e.length<6?((e,t)=>_(_(e)).map(([[e],[r,f]])=>{let n=t();return((e,t,r)=>T(33,f=>O(O(e,t,f),O(t,r,f),f)))(ee(r,e,n),r,ee(r,f,n))}).flat())(e,()=>.618/t):e)})(i),d,0,.1,r<.05?0:j([.05,.1,.5]))).length>2&&(i=i.sort((e,t)=>Q(e)-Q(t)),E(.2)&&i.splice(i.length/2|0,1),i.length>3&&E()&&i.splice(1,1),i.length>3&&E()&&i.splice(1,1)),ce(l,999,1,(e,t,r)=>{let f=ae(ie(e,t,r),d,j([0,.1]),.1,.5);return i.push(...f)},e=>$(.3,.3)),i=(i=ae(i,[[o(-.5+a,-9),o(-.5+a,9)],[o(.5-a,-9),o(.5-a,9)],[o(-9,-U+a),o(9,-U+a)],[o(-9,U-a),o(9,U-a)]],0,0,0)).filter(ye).sort((e,t)=>Q(t)-Q(e)).map(V)},oe=(e,t,r)=>i.reduce((f,n)=>e(f,n.p.reduce((t,f)=>e(t,r?f.x:f.y),t)),t),me=e=>i.filter(t=>t.a>e).length,be=e=>{if(me(.1)<2||me(.1)>4||me(.2))return!0;let t=oe(v,9),r=oe(w,-9),f=oe(v,9,!0),n=oe(w,-9,!0);return r<.5||t>-.5||n<.3||f>-.3||i.reduce((e,t)=>e+Q(t.p),0)<.3||i.length<5},ge=(e,t,r)=>N(j([1,1,2,2,3]),f=>{let n=[e+f*I(r/(2*f+2)),t+f*I(r/(2*f+2)),r/(f+1)];return ue(...n)}),Fe=(e,t,r)=>N(j([1,1,2,2,3,4]),f=>{let a=r/(f+1),l=[e+f*I(r/(2*f+2)),t+f*I(r/(2*f+2)),a,a,n+I(.1)];return de(...l)}),we=(e,t)=>e.fillStyle=t,ve=e=>e.canvas,De=e=>ve(e).width,He=e=>e.reduce((t,r)=>z(t,r,1/e.length),o(0,0)),Ae=e=>{let t=o(1e9,1e9),r=o(-1e9,-1e9);return e.map(e=>{t.x=v(t.x,e.x),t.y=v(t.y,e.y),r.x=w(r.x,e.x),r.y=w(r.y,e.y)}),[t,r]},Be=([{x:e,y:t},{x:r,y:f}])=>v(b(e-r),b(t-f)),Ce=e=>{let t=i.map((e,t)=>[e.a,t]).sort((e,t)=>t[0]-e[0]);if(!t.length)return;let r=t[t.length/2|0][1],f=i[r];i.splice(r,1);let n=-K(...d[0])+e,a=E()?k(33,44):k(11,22),l=T(2*a,e=>[Z(o(2,2*e-1),n),Z(o(-2,2*e-1),n)]),c=j([0,0,.1,.2]),p=j([0,0,.1]),u=j([0,0,.1]),s=ae([f.p],l,u,c,p);i.push(...s.map(t=>{let r=Q(t)<.05&&(0===e||e===B/2)&&E(.93)?B/2:0,f=He(t);return t.map(e=>z(Z(z(e,f,-1),r),f,1))}).map(e=>{let t=(e=>{let t=He(e),r=T(180,r=>{let f=r*B,n=e.map(e=>q(e,t,f));return[Ae(n),f]}).sort((e,t)=>Be(e[0])-Be(t[0]));return(([{x:e,y:t},{x:r,y:f}])=>[o(e,t),o(r,t),o(r,f),o(e,f)])(r[0][0]).map(e=>q(e,t,-r[0][1]))})(e);return Q(t)/Q(e)<1.2?t:e}).map((e,t)=>V(e,t+f.i)))},Me=(e,t=k(8))=>{(e=>{n=[0,0,0,0,B/2,B/2,B/2,B/2,$(M),$(.1,.1)*H(I())][e]})(t);let r=9e3;do{xe()}while(be()&&--r>0);Ce(C),ce(!1,1e4,1,(e,t,r,f)=>i.push(...[ge,ge,ge,Fe,Fe,ie,ie][k(7)](e,t,r).map((e,t)=>V(e,f.i+t+1))),e=>j([.075,.1,.1]),(e,t)=>i.find(r=>(({x:e,y:t},r)=>{let f=!1;for(let n=0,a=r.length-1;n<r.length;a=n++){let l=r[n].x,c=r[n].y,p=r[a].x,d=r[a].y;c>t!=d>t&&e<(p-l)*(t-c)/(d-c)+l&&(f=!f)}return f})({x:e,y:t},r.p))),Ce(0),E()&&Ce(j([B/4+I(.1),0,C]));let f=x.pop();we(e,f),e.fillRect(-4,-4,8,8),i.sort((e,t)=>t.a-e.a).filter(e=>e.a>1e-4).map(t=>((e,t,r)=>{we(e,r),e.fill(((e,t=!0)=>new Path2D(((e,t=!0)=>"M"+e.map(e=>[e.x,e.y]).join("L")+(t?"Z":""))(e,t)))(t))})(e,t.p,x[t.i%x.length])),x.push(f)},Ne=clearTimeout,Te=setTimeout;newHash=(e,r)=>{W(e),x=(e=>e.map(e=>[e,$()]).sort((e,t)=>e[1]-t[1]).map(e=>e[0]))(R[t]),Me(r,f)};var Le,$e=e=>s=Te(e=>$e(Me(Ee)),1e3*u),ke=e=>{if(!h){let e=(h=document.createElement("div")).style;e.textAlign="center",e.position="fixed",e.width="100%",e.top="10px",document.body.append(h)}h.innerHTML=`<span style="padding:0 5px;user-select:none;font:25px Arial;background:#fff">Slideshow ${u?u+" sec":"off"}</span>`,Ne(y),y=Te(()=>h.innerHTML="",2e3)},Ee=((e=1,t=1)=>((e=1,t=1)=>{let r=document.createElement("canvas"),f=innerWidth,n=innerHeight,a=e<f/n,l=r.style;return l.width=a?`calc(100vh*${e})`:"100vw",l.height=a?"100vh":`calc(100vw/${e})`,r.width=(0|(a?n*e:f))*t,r.height=(0|(a?n:f/e))*t,r})(e,t).getContext("2d"))(.618,2);(e=>{e.translate(De(e)/2,(e=>ve(e).height)(e)/2)})(Le=Ee),(e=>{e.scale(De(e),De(e))})(Le),newHash(tokenData.hash,Ee),window.onload=()=>document.body.append(ve(Ee)),Ee.canvas.onpointerdown=e=>{e.button||(e.clientY>innerHeight/2?u?(Ne(s),ke(u=0)):Me(Ee):(u?u=(u+1)%10:$e(u=1),ke(!u&&Ne(s))))}