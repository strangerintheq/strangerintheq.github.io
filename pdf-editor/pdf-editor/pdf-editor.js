(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
/*!
 * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */


(function(t){t["ru"]=Object.assign(t["ru"]||{},require('../../ru'))})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}));(function t(e,i){if(typeof exports==="object"&&typeof module==="object")module.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else if(typeof exports==="object")exports["BalloonEditor"]=i();else e["BalloonEditor"]=i()})(window,(function(){return function(t){var e={};function i(n){if(e[n]){return e[n].exports}var o=e[n]={i:n,l:false,exports:{}};t[n].call(o.exports,o,o.exports,i);o.l=true;return o.exports}i.m=t;i.c=e;i.d=function(t,e,n){if(!i.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:n})}};i.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};i.t=function(t,e){if(e&1)t=i(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n};i.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};i.d(e,"a",e);return e};i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};i.p="";return i(i.s=114)}([function(t,e,i){"use strict";i.d(e,"b",(function(){return o}));i.d(e,"a",(function(){return r}));const n="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";class o extends Error{constructor(t,e,i){t=r(t);if(i){t+=" "+JSON.stringify(i)}super(t);this.name="CKEditorError";this.context=e;this.data=i}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError")){throw t}const i=new o(t.message,e);i.stack=t.stack;throw i}}function r(t){const e=t.match(/^([^:]+):/);if(!e){return t}return t+` Read more: ${n}#error-${e[1]}\n`}},function(t,e,i){"use strict";var n=function t(){var e;return function t(){if(typeof e==="undefined"){e=Boolean(window&&document&&document.all&&!window.atob)}return e}}();var o=function t(){var e={};return function t(i){if(typeof e[i]==="undefined"){var n=document.querySelector(i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement){try{n=n.contentDocument.head}catch(t){n=null}}e[i]=n}return e[i]}}();var r=[];function s(t){var e=-1;for(var i=0;i<r.length;i++){if(r[i].identifier===t){e=i;break}}return e}function a(t,e){var i={};var n=[];for(var o=0;o<t.length;o++){var a=t[o];var c=e.base?a[0]+e.base:a[0];var l=i[c]||0;var d="".concat(c," ").concat(l);i[c]=l+1;var u=s(d);var h={css:a[1],media:a[2],sourceMap:a[3]};if(u!==-1){r[u].references++;r[u].updater(h)}else{r.push({identifier:d,updater:m(h,e),references:1})}n.push(d)}return n}function c(t){var e=document.createElement("style");var n=t.attributes||{};if(typeof n.nonce==="undefined"){var r=true?i.nc:undefined;if(r){n.nonce=r}}Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])}));if(typeof t.insert==="function"){t.insert(e)}else{var s=o(t.insert||"head");if(!s){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}s.appendChild(e)}return e}function l(t){if(t.parentNode===null){return false}t.parentNode.removeChild(t)}var d=function t(){var e=[];return function t(i,n){e[i]=n;return e.filter(Boolean).join("\n")}}();function u(t,e,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet){t.styleSheet.cssText=d(e,o)}else{var r=document.createTextNode(o);var s=t.childNodes;if(s[e]){t.removeChild(s[e])}if(s.length){t.insertBefore(r,s[e])}else{t.appendChild(r)}}}function h(t,e,i){var n=i.css;var o=i.media;var r=i.sourceMap;if(o){t.setAttribute("media",o)}else{t.removeAttribute("media")}if(r&&btoa){n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")}if(t.styleSheet){t.styleSheet.cssText=n}else{while(t.firstChild){t.removeChild(t.firstChild)}t.appendChild(document.createTextNode(n))}}var f=null;var g=0;function m(t,e){var i;var n;var o;if(e.singleton){var r=g++;i=f||(f=c(e));n=u.bind(null,i,r,false);o=u.bind(null,i,r,true)}else{i=c(e);n=h.bind(null,i,e);o=function t(){l(i)}}n(t);return function e(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap){return}n(t=i)}else{o()}}}t.exports=function(t,e){e=e||{};if(!e.singleton&&typeof e.singleton!=="boolean"){e.singleton=n()}t=t||[];var i=a(t,e);return function t(n){n=n||[];if(Object.prototype.toString.call(n)!=="[object Array]"){return}for(var o=0;o<i.length;o++){var c=i[o];var l=s(c);r[l].references--}var d=a(n,e);for(var u=0;u<i.length;u++){var h=i[u];var f=s(h);if(r[f].references===0){r[f].updater();r.splice(f,1)}}i=d}}},,function(t,e,i){"use strict";var n=i(7);var o=typeof self=="object"&&self&&self.Object===Object&&self;var r=n["a"]||o||Function("return this")();e["a"]=r},function(t,e,i){"use strict";(function(t){var n=i(3);var o=i(14);var r=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var s=r&&typeof t=="object"&&t&&!t.nodeType&&t;var a=s&&s.exports===r;var c=a?n["a"].Buffer:undefined;var l=c?c.isBuffer:undefined;var d=l||o["a"];e["a"]=d}).call(this,i(9)(t))},function(t,e,i){"use strict";(function(t){var n=i(7);var o=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var r=o&&typeof t=="object"&&t&&!t.nodeType&&t;var s=r&&r.exports===o;var a=s&&n["a"].process;var c=function(){try{var t=r&&r.require&&r.require("util").types;if(t){return t}return a&&a.binding&&a.binding("util")}catch(t){}}();e["a"]=c}).call(this,i(9)(t))},function(t,e,i){"use strict";(function(t){var e=i(0);const n="18.0.0";const o=typeof window==="object"?window:t;if(o.CKEDITOR_VERSION){throw new e["b"]("ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.",null)}else{o.CKEDITOR_VERSION=n}}).call(this,i(10))},function(t,e,i){"use strict";(function(t){var i=typeof t=="object"&&t&&t.Object===Object&&t;e["a"]=i}).call(this,i(10))},function(t,e,i){"use strict";(function(t){var n=i(3);var o=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var r=o&&typeof t=="object"&&t&&!t.nodeType&&t;var s=r&&r.exports===o;var a=s?n["a"].Buffer:undefined,c=a?a.allocUnsafe:undefined;function l(t,e){if(e){return t.slice()}var i=t.length,n=c?c(i):new t.constructor(i);t.copy(n);return n}e["a"]=l}).call(this,i(9)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);if(!e.children)e.children=[];Object.defineProperty(e,"loaded",{enumerable:true,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:true,get:function(){return e.i}});Object.defineProperty(e,"exports",{enumerable:true});e.webpackPolyfill=1}return e}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){if(typeof window==="object")i=window}t.exports=i},function(t,e,i){var n=i(1);var o=i(55);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e,i){var n=i(1);var o=i(108);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e,i){var n=i(1);var o=i(109);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e,i){"use strict";function n(){return false}e["a"]=n},function(t,e,i){var n=i(1);var o=i(16);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border:#1f89e5;--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(t,e,i){var n=i(1);var o=i(18);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}'},function(t,e,i){var n=i(1);var o=i(20);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(t,e,i){var n=i(1);var o=i(22);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}'},function(t,e,i){var n=i(1);var o=i(24);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(t,e,i){var n=i(1);var o=i(26);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(t,e,i){var n=i(1);var o=i(28);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(t,e,i){var n=i(1);var o=i(30);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}"},function(t,e,i){var n=i(1);var o=i(32);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(t,e,i){var n=i(1);var o=i(34);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:1.3846153847em}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}"},function(t,e,i){var n=i(1);var o=i(36);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(t,e,i){var n=i(1);var o=i(38);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(t,e,i){var n=i(1);var o=i(40);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}"},function(t,e,i){var n=i(1);var o=i(42);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(t,e,i){var n=i(1);var o=i(44);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(t,e,i){var n=i(1);var o=i(46);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(t,e,i){var n=i(1);var o=i(48);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}"},function(t,e,i){var n=i(1);var o=i(50);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(t,e,i){var n=i(1);var o=i(52);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}"},function(t,e,i){var n=i(1);var o=i(54);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".text-tiny{font-size:.7em}.text-small{font-size:.85em}.text-big{font-size:1.4em}.text-huge{font-size:1.8em}"},function(t,e){t.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(t,e,i){var n=i(1);var o=i(57);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck-editor__editable .ck-horizontal-line{overflow:hidden}.ck-content hr{border:solid #5e5e5e;border-width:1px 0 0;margin:0}.ck-editor__editable .ck-horizontal-line{padding:5px 0}"},function(t,e,i){var n=i(1);var o=i(59);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-read-only .ck-widget{--ck-widget-outline-thickness:0}"},function(t,e,i){var n=i(1);var o=i(61);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}"},function(t,e,i){var n=i(1);var o=i(63);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .2s ease-in-out,border .2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(t,e,i){var n=i(1);var o=i(65);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-input{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(t,e,i){var n=i(1);var o=i(67);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}"},function(t,e,i){var n=i(1);var o=i(69);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center,.ck-content .image-style-align-left,.ck-content .image-style-align-right,.ck-content .image-style-side{max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}"},function(t,e,i){var n=i(1);var o=i(71);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0;outline:1px solid var(--ck-color-resizer)}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all;width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nesw-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nesw-resize}"},function(t,e,i){var n=i(1);var o=i(73);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}"},function(t,e,i){var n=i(1);var o=i(75);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(t,e,i){var n=i(1);var o=i(77);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(t,e,i){var n=i(1);var o=i(79);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(t,e,i){var n=i(1);var o=i(81);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}"},function(t,e,i){var n=i(1);var o=i(83);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-input{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}"},function(t,e,i){var n=i(1);var o=i(85);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(t,e,i){var n=i(1);var o=i(87);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-character-grid .ck-character-grid__tiles{display:grid;grid-template-columns:repeat(10,1fr)}:root{--ck-character-grid-tile-size:24px}.ck.ck-character-grid{overflow-y:auto;overflow-x:hidden;width:350px;max-height:200px}.ck.ck-character-grid .ck-character-grid__tiles{margin:var(--ck-spacing-standard);grid-gap:var(--ck-spacing-standard)}.ck.ck-character-grid .ck-character-grid__tile{width:var(--ck-character-grid-tile-size);height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);font-size:1.2em;padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);width:100%;text-align:center}"},function(t,e,i){var n=i(1);var o=i(89);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-character-info{display:flex;justify-content:space-between;padding:var(--ck-spacing-small) var(--ck-spacing-standard);border-top:1px solid var(--ck-color-base-border)}.ck.ck-character-info>*{text-transform:uppercase;font-size:var(--ck-font-size-small)}.ck.ck-character-info .ck-character-info__name{max-width:280px;text-overflow:ellipsis;overflow:hidden}.ck.ck-character-info .ck-character-info__code{opacity:.6}"},function(t,e,i){var n=i(1);var o=i(91);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-special-characters-navigation{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-bottom:1px solid var(--ck-color-base-border);padding:var(--ck-spacing-standard)}[dir=ltr] .ck.ck-special-characters-navigation{padding-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-special-characters-navigation{padding-right:var(--ck-spacing-large)}.ck.ck-special-characters-navigation>.ck-label{max-width:160px;text-overflow:ellipsis;overflow:hidden}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}"},function(t,e,i){var n=i(1);var o=i(93);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(t,e,i){var n=i(1);var o=i(95);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}"},function(t,e,i){var n=i(1);var o=i(97);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=":root{--ck-table-selected-cell-background:#cee5fd}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{background-color:var(--ck-table-selected-cell-background)!important;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}"},function(t,e,i){var n=i(1);var o=i(99);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border-color:#bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}"},function(t,e,i){var n=i(1);var o=i(101);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-labeled-view .ck-labeled-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-view .ck-labeled-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-view>.ck.ck-label{width:100%;text-overflow:ellipsis;overflow:hidden}"},function(t,e,i){var n=i(1);var o=i(103);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-input-color{width:100%;display:flex}.ck.ck-input-color>input.ck.ck-input-text{min-width:auto;flex-grow:1}.ck.ck-input-color>input.ck.ck-input-text:active,.ck.ck-input-color>input.ck.ck-input-text:focus{z-index:var(--ck-z-default)}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{position:relative;overflow:hidden}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{position:absolute;display:block}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button{border-top-left-radius:0;border-bottom-left-radius:0;margin-left:-1px}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button{border-top-right-radius:0;border-bottom-right-radius:0;margin-right:-1px}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview{width:20px;height:20px;border:1px solid var(--ck-color-input-border)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{top:-30%;left:50%;height:150%;width:8%;background:red;border-radius:2px;transform:rotate(45deg);transform-origin:50%}.ck.ck-input-color .ck.ck-input-color__remove-color{width:100%;border-bottom:1px solid var(--ck-color-input-border);padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:0;margin-left:var(--ck-spacing-standard)}"},function(t,e,i){var n=i(1);var o=i(105);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{width:100%;min-width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}"},function(t,e,i){var n=i(1);var o=i(107);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=":root{--ck-table-form-header-height:38px}.ck.ck-form__header{padding:0 var(--ck-spacing-large);height:var(--ck-table-form-header-height);line-height:var(--ck-table-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}"},function(t,e){t.exports=".ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}"},function(t,e){t.exports='.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-view{display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{flex-grow:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{flex-wrap:wrap;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-view{display:flex;flex-direction:column-reverse;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-view{position:relative}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{position:absolute;left:50%;bottom:calc(-1*var(--ck-table-properties-error-arrow-size));transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status:after{content:"";position:absolute;top:calc(-1*var(--ck-table-properties-error-arrow-size));left:50%;transform:translateX(-50%)}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style{width:80px;min-width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{width:50px;min-width:50px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-view>.ck-label{font-size:10px;text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:start;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{border-radius:0}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status,.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-width:var(--ck-table-properties-min-error-width);text-align:center}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status:after{border-left:var(--ck-table-properties-error-arrow-size) solid transparent;border-bottom:var(--ck-table-properties-error-arrow-size) solid var(--ck-color-base-error);border-right:var(--ck-table-properties-error-arrow-size) solid transparent;border-top:0 solid transparent}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-table-form .ck.ck-labeled-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}'},function(t,e,i){var n=i(1);var o=i(111);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{flex-grow:0}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{padding:0;width:35%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none}"},function(t,e,i){var n=i(1);var o=i(113);o=o.__esModule?o.default:o;if(typeof o==="string"){o=[[t.i,o,""]]}var r={injectType:"singletonStyleTag"};r.insert="head";r.singleton=true;var s=n(o,r);var a=o.locals?o.locals:{};t.exports=a},function(t,e){t.exports=".ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{flex-wrap:wrap;flex-basis:0;align-content:baseline}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}"},function(t,e,i){"use strict";i.r(e);i.d(e,"default",(function(){return _I}));var n=i(3);var o=n["a"].Symbol;var r=o;var s=Object.prototype;var a=s.hasOwnProperty;var c=s.toString;var l=r?r.toStringTag:undefined;function d(t){var e=a.call(t,l),i=t[l];try{t[l]=undefined;var n=true}catch(t){}var o=c.call(t);if(n){if(e){t[l]=i}else{delete t[l]}}return o}var u=d;var h=Object.prototype;var f=h.toString;function g(t){return f.call(t)}var m=g;var p="[object Null]",b="[object Undefined]";var w=r?r.toStringTag:undefined;function k(t){if(t==null){return t===undefined?b:p}return w&&w in Object(t)?u(t):m(t)}var _=k;function v(t,e){return function(i){return t(e(i))}}var y=v;var x=y(Object.getPrototypeOf,Object);var C=x;function A(t){return t!=null&&typeof t=="object"}var T=A;var P="[object Object]";var S=Function.prototype,E=Object.prototype;var R=S.toString;var O=E.hasOwnProperty;var I=R.call(Object);function V(t){if(!T(t)||_(t)!=P){return false}var e=C(t);if(e===null){return true}var i=O.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&R.call(i)==I}var N=V;function M(){this.__data__=[];this.size=0}var B=M;function z(t,e){return t===e||t!==t&&e!==e}var L=z;function F(t,e){var i=t.length;while(i--){if(L(t[i][0],e)){return i}}return-1}var D=F;var j=Array.prototype;var H=j.splice;function W(t){var e=this.__data__,i=D(e,t);if(i<0){return false}var n=e.length-1;if(i==n){e.pop()}else{H.call(e,i,1)}--this.size;return true}var q=W;function U(t){var e=this.__data__,i=D(e,t);return i<0?undefined:e[i][1]}var $=U;function G(t){return D(this.__data__,t)>-1}var K=G;function J(t,e){var i=this.__data__,n=D(i,t);if(n<0){++this.size;i.push([t,e])}else{i[n][1]=e}return this}var Y=J;function Q(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}Q.prototype.clear=B;Q.prototype["delete"]=q;Q.prototype.get=$;Q.prototype.has=K;Q.prototype.set=Y;var X=Q;function Z(){this.__data__=new X;this.size=0}var tt=Z;function et(t){var e=this.__data__,i=e["delete"](t);this.size=e.size;return i}var it=et;function nt(t){return this.__data__.get(t)}var ot=nt;function rt(t){return this.__data__.has(t)}var st=rt;function at(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ct=at;var lt="[object AsyncFunction]",dt="[object Function]",ut="[object GeneratorFunction]",ht="[object Proxy]";function ft(t){if(!ct(t)){return false}var e=_(t);return e==dt||e==ut||e==lt||e==ht}var gt=ft;var mt=n["a"]["__core-js_shared__"];var pt=mt;var bt=function(){var t=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function wt(t){return!!bt&&bt in t}var kt=wt;var _t=Function.prototype;var vt=_t.toString;function yt(t){if(t!=null){try{return vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var xt=yt;var Ct=/[\\^$.*+?()[\]{}|]/g;var At=/^\[object .+?Constructor\]$/;var Tt=Function.prototype,Pt=Object.prototype;var St=Tt.toString;var Et=Pt.hasOwnProperty;var Rt=RegExp("^"+St.call(Et).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ot(t){if(!ct(t)||kt(t)){return false}var e=gt(t)?Rt:At;return e.test(xt(t))}var It=Ot;function Vt(t,e){return t==null?undefined:t[e]}var Nt=Vt;function Mt(t,e){var i=Nt(t,e);return It(i)?i:undefined}var Bt=Mt;var zt=Bt(n["a"],"Map");var Lt=zt;var Ft=Bt(Object,"create");var Dt=Ft;function jt(){this.__data__=Dt?Dt(null):{};this.size=0}var Ht=jt;function Wt(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}var qt=Wt;var Ut="__lodash_hash_undefined__";var $t=Object.prototype;var Gt=$t.hasOwnProperty;function Kt(t){var e=this.__data__;if(Dt){var i=e[t];return i===Ut?undefined:i}return Gt.call(e,t)?e[t]:undefined}var Jt=Kt;var Yt=Object.prototype;var Qt=Yt.hasOwnProperty;function Xt(t){var e=this.__data__;return Dt?e[t]!==undefined:Qt.call(e,t)}var Zt=Xt;var te="__lodash_hash_undefined__";function ee(t,e){var i=this.__data__;this.size+=this.has(t)?0:1;i[t]=Dt&&e===undefined?te:e;return this}var ie=ee;function ne(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}ne.prototype.clear=Ht;ne.prototype["delete"]=qt;ne.prototype.get=Jt;ne.prototype.has=Zt;ne.prototype.set=ie;var oe=ne;function re(){this.size=0;this.__data__={hash:new oe,map:new(Lt||X),string:new oe}}var se=re;function ae(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ce=ae;function le(t,e){var i=t.__data__;return ce(e)?i[typeof e=="string"?"string":"hash"]:i.map}var de=le;function ue(t){var e=de(this,t)["delete"](t);this.size-=e?1:0;return e}var he=ue;function fe(t){return de(this,t).get(t)}var ge=fe;function me(t){return de(this,t).has(t)}var pe=me;function be(t,e){var i=de(this,t),n=i.size;i.set(t,e);this.size+=i.size==n?0:1;return this}var we=be;function ke(t){var e=-1,i=t==null?0:t.length;this.clear();while(++e<i){var n=t[e];this.set(n[0],n[1])}}ke.prototype.clear=se;ke.prototype["delete"]=he;ke.prototype.get=ge;ke.prototype.has=pe;ke.prototype.set=we;var _e=ke;var ve=200;function ye(t,e){var i=this.__data__;if(i instanceof X){var n=i.__data__;if(!Lt||n.length<ve-1){n.push([t,e]);this.size=++i.size;return this}i=this.__data__=new _e(n)}i.set(t,e);this.size=i.size;return this}var xe=ye;function Ce(t){var e=this.__data__=new X(t);this.size=e.size}Ce.prototype.clear=tt;Ce.prototype["delete"]=it;Ce.prototype.get=ot;Ce.prototype.has=st;Ce.prototype.set=xe;var Ae=Ce;function Te(t,e){var i=-1,n=t==null?0:t.length;while(++i<n){if(e(t[i],i,t)===false){break}}return t}var Pe=Te;var Se=function(){try{var t=Bt(Object,"defineProperty");t({},"",{});return t}catch(t){}}();var Ee=Se;function Re(t,e,i){if(e=="__proto__"&&Ee){Ee(t,e,{configurable:true,enumerable:true,value:i,writable:true})}else{t[e]=i}}var Oe=Re;var Ie=Object.prototype;var Ve=Ie.hasOwnProperty;function Ne(t,e,i){var n=t[e];if(!(Ve.call(t,e)&&L(n,i))||i===undefined&&!(e in t)){Oe(t,e,i)}}var Me=Ne;function Be(t,e,i,n){var o=!i;i||(i={});var r=-1,s=e.length;while(++r<s){var a=e[r];var c=n?n(i[a],t[a],a,i,t):undefined;if(c===undefined){c=t[a]}if(o){Oe(i,a,c)}else{Me(i,a,c)}}return i}var ze=Be;function Le(t,e){var i=-1,n=Array(t);while(++i<t){n[i]=e(i)}return n}var Fe=Le;var De="[object Arguments]";function je(t){return T(t)&&_(t)==De}var He=je;var We=Object.prototype;var qe=We.hasOwnProperty;var Ue=We.propertyIsEnumerable;var $e=He(function(){return arguments}())?He:function(t){return T(t)&&qe.call(t,"callee")&&!Ue.call(t,"callee")};var Ge=$e;var Ke=Array.isArray;var Je=Ke;var Ye=i(4);var Qe=9007199254740991;var Xe=/^(?:0|[1-9]\d*)$/;function Ze(t,e){var i=typeof t;e=e==null?Qe:e;return!!e&&(i=="number"||i!="symbol"&&Xe.test(t))&&(t>-1&&t%1==0&&t<e)}var ti=Ze;var ei=9007199254740991;function ii(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ei}var ni=ii;var oi="[object Arguments]",ri="[object Array]",si="[object Boolean]",ai="[object Date]",ci="[object Error]",li="[object Function]",di="[object Map]",ui="[object Number]",hi="[object Object]",fi="[object RegExp]",gi="[object Set]",mi="[object String]",pi="[object WeakMap]";var bi="[object ArrayBuffer]",wi="[object DataView]",ki="[object Float32Array]",_i="[object Float64Array]",vi="[object Int8Array]",yi="[object Int16Array]",xi="[object Int32Array]",Ci="[object Uint8Array]",Ai="[object Uint8ClampedArray]",Ti="[object Uint16Array]",Pi="[object Uint32Array]";var Si={};Si[ki]=Si[_i]=Si[vi]=Si[yi]=Si[xi]=Si[Ci]=Si[Ai]=Si[Ti]=Si[Pi]=true;Si[oi]=Si[ri]=Si[bi]=Si[si]=Si[wi]=Si[ai]=Si[ci]=Si[li]=Si[di]=Si[ui]=Si[hi]=Si[fi]=Si[gi]=Si[mi]=Si[pi]=false;function Ei(t){return T(t)&&ni(t.length)&&!!Si[_(t)]}var Ri=Ei;function Oi(t){return function(e){return t(e)}}var Ii=Oi;var Vi=i(5);var Ni=Vi["a"]&&Vi["a"].isTypedArray;var Mi=Ni?Ii(Ni):Ri;var Bi=Mi;var zi=Object.prototype;var Li=zi.hasOwnProperty;function Fi(t,e){var i=Je(t),n=!i&&Ge(t),o=!i&&!n&&Object(Ye["a"])(t),r=!i&&!n&&!o&&Bi(t),s=i||n||o||r,a=s?Fe(t.length,String):[],c=a.length;for(var l in t){if((e||Li.call(t,l))&&!(s&&(l=="length"||o&&(l=="offset"||l=="parent")||r&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ti(l,c)))){a.push(l)}}return a}var Di=Fi;var ji=Object.prototype;function Hi(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||ji;return t===i}var Wi=Hi;var qi=y(Object.keys,Object);var Ui=qi;var $i=Object.prototype;var Gi=$i.hasOwnProperty;function Ki(t){if(!Wi(t)){return Ui(t)}var e=[];for(var i in Object(t)){if(Gi.call(t,i)&&i!="constructor"){e.push(i)}}return e}var Ji=Ki;function Yi(t){return t!=null&&ni(t.length)&&!gt(t)}var Qi=Yi;function Xi(t){return Qi(t)?Di(t):Ji(t)}var Zi=Xi;function tn(t,e){return t&&ze(e,Zi(e),t)}var en=tn;function nn(t){var e=[];if(t!=null){for(var i in Object(t)){e.push(i)}}return e}var on=nn;var rn=Object.prototype;var sn=rn.hasOwnProperty;function an(t){if(!ct(t)){return on(t)}var e=Wi(t),i=[];for(var n in t){if(!(n=="constructor"&&(e||!sn.call(t,n)))){i.push(n)}}return i}var cn=an;function ln(t){return Qi(t)?Di(t,true):cn(t)}var dn=ln;function un(t,e){return t&&ze(e,dn(e),t)}var hn=un;var fn=i(8);function gn(t,e){var i=-1,n=t.length;e||(e=Array(n));while(++i<n){e[i]=t[i]}return e}var mn=gn;function pn(t,e){var i=-1,n=t==null?0:t.length,o=0,r=[];while(++i<n){var s=t[i];if(e(s,i,t)){r[o++]=s}}return r}var bn=pn;function wn(){return[]}var kn=wn;var _n=Object.prototype;var vn=_n.propertyIsEnumerable;var yn=Object.getOwnPropertySymbols;var xn=!yn?kn:function(t){if(t==null){return[]}t=Object(t);return bn(yn(t),(function(e){return vn.call(t,e)}))};var Cn=xn;function An(t,e){return ze(t,Cn(t),e)}var Tn=An;function Pn(t,e){var i=-1,n=e.length,o=t.length;while(++i<n){t[o+i]=e[i]}return t}var Sn=Pn;var En=Object.getOwnPropertySymbols;var Rn=!En?kn:function(t){var e=[];while(t){Sn(e,Cn(t));t=C(t)}return e};var On=Rn;function In(t,e){return ze(t,On(t),e)}var Vn=In;function Nn(t,e,i){var n=e(t);return Je(t)?n:Sn(n,i(t))}var Mn=Nn;function Bn(t){return Mn(t,Zi,Cn)}var zn=Bn;function Ln(t){return Mn(t,dn,On)}var Fn=Ln;var Dn=Bt(n["a"],"DataView");var jn=Dn;var Hn=Bt(n["a"],"Promise");var Wn=Hn;var qn=Bt(n["a"],"Set");var Un=qn;var $n=Bt(n["a"],"WeakMap");var Gn=$n;var Kn="[object Map]",Jn="[object Object]",Yn="[object Promise]",Qn="[object Set]",Xn="[object WeakMap]";var Zn="[object DataView]";var to=xt(jn),eo=xt(Lt),io=xt(Wn),no=xt(Un),oo=xt(Gn);var ro=_;if(jn&&ro(new jn(new ArrayBuffer(1)))!=Zn||Lt&&ro(new Lt)!=Kn||Wn&&ro(Wn.resolve())!=Yn||Un&&ro(new Un)!=Qn||Gn&&ro(new Gn)!=Xn){ro=function(t){var e=_(t),i=e==Jn?t.constructor:undefined,n=i?xt(i):"";if(n){switch(n){case to:return Zn;case eo:return Kn;case io:return Yn;case no:return Qn;case oo:return Xn}}return e}}var so=ro;var ao=Object.prototype;var co=ao.hasOwnProperty;function lo(t){var e=t.length,i=new t.constructor(e);if(e&&typeof t[0]=="string"&&co.call(t,"index")){i.index=t.index;i.input=t.input}return i}var uo=lo;var ho=n["a"].Uint8Array;var fo=ho;function go(t){var e=new t.constructor(t.byteLength);new fo(e).set(new fo(t));return e}var mo=go;function po(t,e){var i=e?mo(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var bo=po;var wo=/\w*$/;function ko(t){var e=new t.constructor(t.source,wo.exec(t));e.lastIndex=t.lastIndex;return e}var _o=ko;var vo=r?r.prototype:undefined,yo=vo?vo.valueOf:undefined;function xo(t){return yo?Object(yo.call(t)):{}}var Co=xo;function Ao(t,e){var i=e?mo(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var To=Ao;var Po="[object Boolean]",So="[object Date]",Eo="[object Map]",Ro="[object Number]",Oo="[object RegExp]",Io="[object Set]",Vo="[object String]",No="[object Symbol]";var Mo="[object ArrayBuffer]",Bo="[object DataView]",zo="[object Float32Array]",Lo="[object Float64Array]",Fo="[object Int8Array]",Do="[object Int16Array]",jo="[object Int32Array]",Ho="[object Uint8Array]",Wo="[object Uint8ClampedArray]",qo="[object Uint16Array]",Uo="[object Uint32Array]";function $o(t,e,i){var n=t.constructor;switch(e){case Mo:return mo(t);case Po:case So:return new n(+t);case Bo:return bo(t,i);case zo:case Lo:case Fo:case Do:case jo:case Ho:case Wo:case qo:case Uo:return To(t,i);case Eo:return new n;case Ro:case Vo:return new n(t);case Oo:return _o(t);case Io:return new n;case No:return Co(t)}}var Go=$o;var Ko=Object.create;var Jo=function(){function t(){}return function(e){if(!ct(e)){return{}}if(Ko){return Ko(e)}t.prototype=e;var i=new t;t.prototype=undefined;return i}}();var Yo=Jo;function Qo(t){return typeof t.constructor=="function"&&!Wi(t)?Yo(C(t)):{}}var Xo=Qo;var Zo="[object Map]";function tr(t){return T(t)&&so(t)==Zo}var er=tr;var ir=Vi["a"]&&Vi["a"].isMap;var nr=ir?Ii(ir):er;var or=nr;var rr="[object Set]";function sr(t){return T(t)&&so(t)==rr}var ar=sr;var cr=Vi["a"]&&Vi["a"].isSet;var lr=cr?Ii(cr):ar;var dr=lr;var ur=1,hr=2,fr=4;var gr="[object Arguments]",mr="[object Array]",pr="[object Boolean]",br="[object Date]",wr="[object Error]",kr="[object Function]",_r="[object GeneratorFunction]",vr="[object Map]",yr="[object Number]",xr="[object Object]",Cr="[object RegExp]",Ar="[object Set]",Tr="[object String]",Pr="[object Symbol]",Sr="[object WeakMap]";var Er="[object ArrayBuffer]",Rr="[object DataView]",Or="[object Float32Array]",Ir="[object Float64Array]",Vr="[object Int8Array]",Nr="[object Int16Array]",Mr="[object Int32Array]",Br="[object Uint8Array]",zr="[object Uint8ClampedArray]",Lr="[object Uint16Array]",Fr="[object Uint32Array]";var Dr={};Dr[gr]=Dr[mr]=Dr[Er]=Dr[Rr]=Dr[pr]=Dr[br]=Dr[Or]=Dr[Ir]=Dr[Vr]=Dr[Nr]=Dr[Mr]=Dr[vr]=Dr[yr]=Dr[xr]=Dr[Cr]=Dr[Ar]=Dr[Tr]=Dr[Pr]=Dr[Br]=Dr[zr]=Dr[Lr]=Dr[Fr]=true;Dr[wr]=Dr[kr]=Dr[Sr]=false;function jr(t,e,i,n,o,r){var s,a=e&ur,c=e&hr,l=e&fr;if(i){s=o?i(t,n,o,r):i(t)}if(s!==undefined){return s}if(!ct(t)){return t}var d=Je(t);if(d){s=uo(t);if(!a){return mn(t,s)}}else{var u=so(t),h=u==kr||u==_r;if(Object(Ye["a"])(t)){return Object(fn["a"])(t,a)}if(u==xr||u==gr||h&&!o){s=c||h?{}:Xo(t);if(!a){return c?Vn(t,hn(s,t)):Tn(t,en(s,t))}}else{if(!Dr[u]){return o?t:{}}s=Go(t,u,a)}}r||(r=new Ae);var f=r.get(t);if(f){return f}r.set(t,s);if(dr(t)){t.forEach((function(n){s.add(jr(n,e,i,n,t,r))}))}else if(or(t)){t.forEach((function(n,o){s.set(o,jr(n,e,i,o,t,r))}))}var g=l?c?Fn:zn:c?keysIn:Zi;var m=d?undefined:g(t);Pe(m||t,(function(n,o){if(m){o=n;n=t[o]}Me(s,o,jr(n,e,i,o,t,r))}));return s}var Hr=jr;var Wr=1,qr=4;function Ur(t,e){e=typeof e=="function"?e:undefined;return Hr(t,Wr|qr,e)}var $r=Ur;function Gr(t){return T(t)&&t.nodeType===1&&!N(t)}var Kr=Gr;class Jr{constructor(t,e){this._config={};if(e){this.define(Yr(e))}if(t){this._setObjectToTarget(this._config,t)}}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){const i=true;this._setToTarget(this._config,t,e,i)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config)){yield t}}_setToTarget(t,e,i,n=false){if(N(e)){this._setObjectToTarget(t,e,n);return}const o=e.split(".");e=o.pop();for(const e of o){if(!N(t[e])){t[e]={}}t=t[e]}if(N(i)){if(!N(t[e])){t[e]={}}t=t[e];this._setObjectToTarget(t,i,n);return}if(n&&typeof t[e]!="undefined"){return}t[e]=i}_getFromSource(t,e){const i=e.split(".");e=i.pop();for(const e of i){if(!N(t[e])){t=null;break}t=t[e]}return t?Yr(t[e]):undefined}_setObjectToTarget(t,e,i){Object.keys(e).forEach(n=>{this._setToTarget(t,n,e[n],i)})}}function Yr(t){return $r(t,Qr)}function Qr(t){return Kr(t)?t:undefined}function Xr(){return function t(){t.called=true}}var Zr=Xr;class ts{constructor(t,e){this.source=t;this.name=e;this.path=[];this.stop=Zr();this.off=Zr()}}const es=new Array(256).fill().map((t,e)=>("0"+e.toString(16)).slice(-2));function is(){const t=Math.random()*4294967296>>>0;const e=Math.random()*4294967296>>>0;const i=Math.random()*4294967296>>>0;const n=Math.random()*4294967296>>>0;return"e"+es[t>>0&255]+es[t>>8&255]+es[t>>16&255]+es[t>>24&255]+es[e>>0&255]+es[e>>8&255]+es[e>>16&255]+es[e>>24&255]+es[i>>0&255]+es[i>>8&255]+es[i>>16&255]+es[i>>24&255]+es[n>>0&255]+es[n>>8&255]+es[n>>16&255]+es[n>>24&255]}const ns={get(t){if(typeof t!="number"){return this[t]||this.normal}else{return t}},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};var os=ns;var rs=i(6);var ss=i(0);const as=Symbol("listeningTo");const cs=Symbol("emitterId");const ls={on(t,e,i={}){this.listenTo(this,t,e,i)},once(t,e,i){let n=false;const o=function(t,...i){if(!n){n=true;t.off();e.call(this,t,...i)}};this.listenTo(this,t,o,i)},off(t,e){this.stopListening(this,t,e)},listenTo(t,e,i,n={}){let o,r;if(!this[as]){this[as]={}}const s=this[as];if(!fs(t)){hs(t)}const a=fs(t);if(!(o=s[a])){o=s[a]={emitter:t,callbacks:{}}}if(!(r=o.callbacks[e])){r=o.callbacks[e]=[]}r.push(i);ps(t,e);const c=bs(t,e);const l=os.get(n.priority);const d={callback:i,priority:l};for(const t of c){let e=false;for(let i=0;i<t.length;i++){if(t[i].priority<l){t.splice(i,0,d);e=true;break}}if(!e){t.push(d)}}},stopListening(t,e,i){const n=this[as];let o=t&&fs(t);const r=n&&o&&n[o];const s=r&&e&&r.callbacks[e];if(!n||t&&!r||e&&!s){return}if(i){_s(t,e,i)}else if(s){while(i=s.pop()){_s(t,e,i)}delete r.callbacks[e]}else if(r){for(e in r.callbacks){this.stopListening(t,e)}delete n[o]}else{for(o in n){this.stopListening(n[o].emitter)}delete this[as]}},fire(t,...e){try{const i=t instanceof ts?t:new ts(this,t);const n=i.name;let o=ws(this,n);i.path.push(this);if(o){const t=[i,...e];o=Array.from(o);for(let e=0;e<o.length;e++){o[e].callback.apply(this,t);if(i.off.called){delete i.off.called;_s(this,n,o[e].callback)}if(i.stop.called){break}}}if(this._delegations){const t=this._delegations.get(n);const o=this._delegations.get("*");if(t){ks(t,i,e)}if(o){ks(o,i,e)}}return i.return}catch(t){ss["b"].rethrowUnexpectedError(t,this)}},delegate(...t){return{to:(e,i)=>{if(!this._delegations){this._delegations=new Map}t.forEach(t=>{const n=this._delegations.get(t);if(!n){this._delegations.set(t,new Map([[e,i]]))}else{n.set(e,i)}})}}},stopDelegating(t,e){if(!this._delegations){return}if(!t){this._delegations.clear()}else if(!e){this._delegations.delete(t)}else{const i=this._delegations.get(t);if(i){i.delete(e)}}}};var ds=ls;function us(t,e){if(t[as]&&t[as][e]){return t[as][e].emitter}return null}function hs(t,e){if(!t[cs]){t[cs]=e||is()}}function fs(t){return t[cs]}function gs(t){if(!t._events){Object.defineProperty(t,"_events",{value:{}})}return t._events}function ms(){return{callbacks:[],childEvents:[]}}function ps(t,e){const i=gs(t);if(i[e]){return}let n=e;let o=null;const r=[];while(n!==""){if(i[n]){break}i[n]=ms();r.push(i[n]);if(o){i[n].childEvents.push(o)}o=n;n=n.substr(0,n.lastIndexOf(":"))}if(n!==""){for(const t of r){t.callbacks=i[n].callbacks.slice()}i[n].childEvents.push(o)}}function bs(t,e){const i=gs(t)[e];if(!i){return[]}let n=[i.callbacks];for(let e=0;e<i.childEvents.length;e++){const o=bs(t,i.childEvents[e]);n=n.concat(o)}return n}function ws(t,e){let i;if(!t._events||!(i=t._events[e])||!i.callbacks.length){if(e.indexOf(":")>-1){return ws(t,e.substr(0,e.lastIndexOf(":")))}else{return null}}return i.callbacks}function ks(t,e,i){for(let[n,o]of t){if(!o){o=e.name}else if(typeof o=="function"){o=o(e.name)}const t=new ts(e.source,o);t.path=[...e.path];n.fire(t,...i)}}function _s(t,e,i){const n=bs(t,e);for(const t of n){for(let e=0;e<t.length;e++){if(t[e].callback==i){t.splice(e,1);e--}}}}function vs(t,...e){e.forEach(e=>{Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(i=>{if(i in t.prototype){return}const n=Object.getOwnPropertyDescriptor(e,i);n.enumerable=false;Object.defineProperty(t.prototype,i,n)})})}class ys{constructor(t={}){this._items=[];this._itemMap=new Map;this._idProperty=t.idProperty||"id";this._bindToExternalToInternalMap=new WeakMap;this._bindToInternalToExternalMap=new WeakMap;this._skippedIndexesFromExternal=[]}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){let i;const n=this._idProperty;if(n in t){i=t[n];if(typeof i!="string"){throw new ss["b"]("collection-add-invalid-id",this)}if(this.get(i)){throw new ss["b"]("collection-add-item-already-exists",this)}}else{t[n]=i=is()}if(e===undefined){e=this._items.length}else if(e>this._items.length||e<0){throw new ss["b"]("collection-add-item-invalid-index",this)}this._items.splice(e,0,t);this._itemMap.set(i,t);this.fire("add",t,e);return this}get(t){let e;if(typeof t=="string"){e=this._itemMap.get(t)}else if(typeof t=="number"){e=this._items[t]}else{throw new ss["b"]("collection-get-invalid-arg: Index or id must be given.",this)}return e||null}has(t){if(typeof t=="string"){return this._itemMap.has(t)}else{const e=this._idProperty;const i=t[e];return this._itemMap.has(i)}}getIndex(t){let e;if(typeof t=="string"){e=this._itemMap.get(t)}else{e=t}return this._items.indexOf(e)}remove(t){let e,i,n;let o=false;const r=this._idProperty;if(typeof t=="string"){i=t;n=this._itemMap.get(i);o=!n;if(n){e=this._items.indexOf(n)}}else if(typeof t=="number"){e=t;n=this._items[e];o=!n;if(n){i=n[r]}}else{n=t;i=n[r];e=this._items.indexOf(n);o=e==-1||!this._itemMap.get(i)}if(o){throw new ss["b"]("collection-remove-404: Item not found.",this)}this._items.splice(e,1);this._itemMap.delete(i);const s=this._bindToInternalToExternalMap.get(n);this._bindToInternalToExternalMap.delete(n);this._bindToExternalToInternalMap.delete(s);this.fire("remove",n,e);return n}map(t,e){return this._items.map(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){if(this._bindToCollection){this.stopListening(this._bindToCollection);this._bindToCollection=null}while(this.length){this.remove(0)}}bindTo(t){if(this._bindToCollection){throw new ss["b"]("collection-bind-to-rebind: The collection cannot be bound more than once.",this)}this._bindToCollection=t;return{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{if(typeof t=="function"){this._setUpBindToBinding(e=>t(e))}else{this._setUpBindToBinding(e=>e[t])}}}}_setUpBindToBinding(t){const e=this._bindToCollection;const i=(i,n,o)=>{const r=e._bindToCollection==this;const s=e._bindToInternalToExternalMap.get(n);if(r&&s){this._bindToExternalToInternalMap.set(n,s);this._bindToInternalToExternalMap.set(s,n)}else{const i=t(n);if(!i){this._skippedIndexesFromExternal.push(o);return}let r=o;for(const t of this._skippedIndexesFromExternal){if(o>t){r--}}for(const t of e._skippedIndexesFromExternal){if(r>=t){r++}}this._bindToExternalToInternalMap.set(n,i);this._bindToInternalToExternalMap.set(i,n);this.add(i,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++){if(r<=e._skippedIndexesFromExternal[t]){e._skippedIndexesFromExternal[t]++}}}};for(const t of e){i(null,t,e.getIndex(t))}this.listenTo(e,"add",i);this.listenTo(e,"remove",(t,e,i)=>{const n=this._bindToExternalToInternalMap.get(e);if(n){this.remove(n)}this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>{if(i<e){t.push(e-1)}if(i>e){t.push(e)}return t},[])})}[Symbol.iterator](){return this._items[Symbol.iterator]()}}vs(ys,ds);class xs{constructor(t,e=[],i=[]){this._context=t;this._plugins=new Map;this._availablePlugins=new Map;for(const t of e){if(t.pluginName){this._availablePlugins.set(t.pluginName,t)}}this._contextPlugins=new Map;for(const[t,e]of i){this._contextPlugins.set(t,e);this._contextPlugins.set(e,t);if(t.pluginName){this._availablePlugins.set(t.pluginName,t)}}}*[Symbol.iterator](){for(const t of this._plugins){if(typeof t[0]=="function"){yield t}}}get(t){const e=this._plugins.get(t);if(!e){const e="plugincollection-plugin-not-loaded: The requested plugin is not loaded.";let i=t;if(typeof t=="function"){i=t.pluginName||t.name}throw new ss["b"](e,this._context,{plugin:i})}return e}has(t){return this._plugins.has(t)}init(t,e=[]){const i=this;const n=this._context;const o=new Set;const r=[];const s=g(t);const a=g(e);const c=f(t);if(c){const t="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";console.error(Object(ss["a"])(t),{plugins:c});return Promise.reject(new ss["b"](t,n,{plugins:c}))}return Promise.all(s.map(l)).then(()=>d(r,"init")).then(()=>d(r,"afterInit")).then(()=>r);function l(t){if(a.includes(t)){return}if(i._plugins.has(t)||o.has(t)){return}return u(t).catch(e=>{console.error(Object(ss["a"])("plugincollection-load: It was not possible to load the plugin."),{plugin:t});throw e})}function d(t,e){return t.reduce((t,n)=>{if(!n[e]){return t}if(i._contextPlugins.has(n)){return t}return t.then(n[e].bind(n))},Promise.resolve())}function u(t){return new Promise(s=>{o.add(t);if(t.requires){t.requires.forEach(i=>{const o=h(i);if(t.isContextPlugin&&!o.isContextPlugin){throw new ss["b"]("plugincollection-context-required: Context plugin can not require plugin which is not a context plugin",null,{plugin:o.name,requiredBy:t.name})}if(e.includes(o)){throw new ss["b"]("plugincollection-required: Cannot load a plugin because one of its dependencies is listed in"+"the `removePlugins` option.",n,{plugin:o.name,requiredBy:t.name})}l(o)})}const a=i._contextPlugins.get(t)||new t(n);i._add(t,a);r.push(a);s()})}function h(t){if(typeof t=="function"){return t}return i._availablePlugins.get(t)}function f(t){const e=[];for(const i of t){if(!h(i)){e.push(i)}}return e.length?e:null}function g(t){return t.map(t=>h(t)).filter(t=>!!t)}}destroy(){const t=[];for(const[,e]of this){if(typeof e.destroy=="function"&&!this._contextPlugins.has(e)){t.push(e.destroy())}}return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const i=t.pluginName;if(!i){return}if(this._plugins.has(i)){throw new ss["b"]("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:t})}this._plugins.set(i,e)}}vs(xs,ds);if(!window.CKEDITOR_TRANSLATIONS){window.CKEDITOR_TRANSLATIONS={}}function Cs(t,e){const i=window.CKEDITOR_TRANSLATIONS[t]||(window.CKEDITOR_TRANSLATIONS[t]={});Object.assign(i,e)}function As(t,e){const i=Ss();if(i===1){t=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]}if(i===0||!Ps(t,e)){return e.replace(/ \[context: [^\]]+\]$/,"")}const n=window.CKEDITOR_TRANSLATIONS[t];return n[e].replace(/ \[context: [^\]]+\]$/,"")}function Ts(){window.CKEDITOR_TRANSLATIONS={}}function Ps(t,e){return t in window.CKEDITOR_TRANSLATIONS&&e in window.CKEDITOR_TRANSLATIONS[t]}function Ss(){return Object.keys(window.CKEDITOR_TRANSLATIONS).length}const Es=["ar","fa","he","ku","ug"];class Rs{constructor(t={}){this.uiLanguage=t.uiLanguage||"en";this.contentLanguage=t.contentLanguage||this.uiLanguage;this.uiLanguageDirection=Os(this.uiLanguage);this.contentLanguageDirection=Os(this.contentLanguage);this.t=(...t)=>this._t(...t)}get language(){console.warn("locale-deprecated-language-property: "+"The Locale#language property has been deprecated and will be removed in the near future. "+"Please use #uiLanguage and #contentLanguage properties instead.");return this.uiLanguage}_t(t,e){let i=As(this.uiLanguage,t);if(e){i=i.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}return i}}function Os(t){return Es.includes(t)?"rtl":"ltr"}class Is{constructor(t){this.config=new Jr(t,this.constructor.defaultConfig);const e=this.constructor.builtinPlugins;this.config.define("plugins",e);this.plugins=new xs(this,e);const i=this.config.get("language")||{};this.locale=new Rs({uiLanguage:typeof i==="string"?i:i.ui,contentLanguage:this.config.get("language.content")});this.t=this.locale.t;this.editors=new ys;this._contextOwner=null}initPlugins(){const t=this.config.get("plugins")||[];for(const e of t){if(typeof e!="function"){throw new ss["b"]("context-initplugins-constructor-only: Only a constructor function is allowed as a context plugin.",null,{Plugin:e})}if(e.isContextPlugin!==true){throw new ss["b"]("context-initplugins-invalid-plugin: Only a plugin marked as a context plugin is allowed to be used with a context.",null,{Plugin:e})}}return this.plugins.init(t)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner){throw new ss["b"]("context-addEditor-private-context: Cannot add multiple editors to the context which is created by the editor.")}this.editors.add(t);if(e){this._contextOwner=t}}_removeEditor(t){if(this.editors.has(t)){this.editors.remove(t)}if(this._contextOwner===t){return this.destroy()}return Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names()){if(!["plugins","removePlugins","extraPlugins"].includes(e)){t[e]=this.config.get(e)}}return t}static create(t){return new Promise(e=>{const i=new this(t);e(i.initPlugins().then(()=>i))})}}function Vs(t,e){const i=Math.min(t.length,e.length);for(let n=0;n<i;n++){if(t[n]!=e[n]){return n}}if(t.length==e.length){return"same"}else if(t.length<e.length){return"prefix"}else{return"extension"}}var Ns=4;function Ms(t){return Hr(t,Ns)}var Bs=Ms;class zs{constructor(t){this.document=t;this.parent=null}get index(){let t;if(!this.parent){return null}if((t=this.parent.getChildIndex(this))==-1){throw new ss["b"]("view-node-not-found-in-parent: The node's parent does not contain this node.",this)}return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;while(t.parent){t=t.parent}return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;while(e.parent){t.unshift(e.index);e=e.parent}return t}getAncestors(t={includeSelf:false,parentFirst:false}){const e=[];let i=t.includeSelf?this:this.parent;while(i){e[t.parentFirst?"push":"unshift"](i);i=i.parent}return e}getCommonAncestor(t,e={}){const i=this.getAncestors(e);const n=t.getAncestors(e);let o=0;while(i[o]==n[o]&&i[o]){o++}return o===0?null:i[o-1]}isBefore(t){if(this==t){return false}if(this.root!==t.root){return false}const e=this.getPath();const i=t.getPath();const n=Vs(e,i);switch(n){case"prefix":return true;case"extension":return false;default:return e[n]<i[n]}}isAfter(t){if(this==t){return false}if(this.root!==t.root){return false}return!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e){this.fire("change:"+t,e);if(this.parent){this.parent._fireChange(t,e)}}toJSON(){const t=Bs(this);delete t.parent;return t}is(t){return t=="node"||t=="view:node"}}vs(zs,ds);class Ls extends zs{constructor(t,e){super(t);this._textData=e}is(t){return t=="text"||t=="view:text"||super.is(t)}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this);this._textData=t}isSimilar(t){if(!(t instanceof Ls)){return false}return this===t||this.data===t.data}_clone(){return new Ls(this.document,this.data)}}class Fs{constructor(t,e,i){this.textNode=t;if(e<0||e>t.data.length){throw new ss["b"]("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this)}if(i<0||e+i>t.data.length){throw new ss["b"]("view-textproxy-wrong-length: Given length value is incorrect.",this)}this.data=t.data.substring(e,e+i);this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(t){return t=="textProxy"||t=="view:textProxy"}getAncestors(t={includeSelf:false,parentFirst:false}){const e=[];let i=t.includeSelf?this.textNode:this.parent;while(i!==null){e[t.parentFirst?"push":"unshift"](i);i=i.parent}return e}}function Ds(t){const e=new Map;for(const i in t){e.set(i,t[i])}return e}function js(t){return!!(t&&t[Symbol.iterator])}function Hs(t){if(js(t)){return new Map(t)}else{return Ds(t)}}class Ws{constructor(...t){this._patterns=[];this.add(...t)}add(...t){for(let e of t){if(typeof e=="string"||e instanceof RegExp){e={name:e}}if(e.classes&&(typeof e.classes=="string"||e.classes instanceof RegExp)){e.classes=[e.classes]}this._patterns.push(e)}}match(...t){for(const e of t){for(const t of this._patterns){const i=qs(e,t);if(i){return{element:e,pattern:t,match:i}}}}return null}matchAll(...t){const e=[];for(const i of t){for(const t of this._patterns){const n=qs(i,t);if(n){e.push({element:i,pattern:t,match:n})}}}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1){return null}const t=this._patterns[0];const e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}}function qs(t,e){if(typeof e=="function"){return e(t)}const i={};if(e.name){i.name=Us(e.name,t.name);if(!i.name){return null}}if(e.attributes){i.attributes=$s(e.attributes,t);if(!i.attributes){return null}}if(e.classes){i.classes=Gs(e.classes,t);if(!i.classes){return false}}if(e.styles){i.styles=Ks(e.styles,t);if(!i.styles){return false}}return i}function Us(t,e){if(t instanceof RegExp){return t.test(e)}return t===e}function $s(t,e){const i=[];for(const n in t){const o=t[n];if(e.hasAttribute(n)){const t=e.getAttribute(n);if(o===true){i.push(n)}else if(o instanceof RegExp){if(o.test(t)){i.push(n)}else{return null}}else if(t===o){i.push(n)}else{return null}}else{return null}}return i}function Gs(t,e){const i=[];for(const n of t){if(n instanceof RegExp){const t=e.getClassNames();for(const e of t){if(n.test(e)){i.push(e)}}if(i.length===0){return null}}else if(e.hasClass(n)){i.push(n)}else{return null}}return i}function Ks(t,e){const i=[];for(const n in t){const o=t[n];if(e.hasStyle(n)){const t=e.getStyle(n);if(o instanceof RegExp){if(o.test(t)){i.push(n)}else{return null}}else if(t===o){i.push(n)}else{return null}}else{return null}}return i}var Js="[object Symbol]";function Ys(t){return typeof t=="symbol"||T(t)&&_(t)==Js}var Qs=Ys;var Xs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zs=/^\w*$/;function ta(t,e){if(Je(t)){return false}var i=typeof t;if(i=="number"||i=="symbol"||i=="boolean"||t==null||Qs(t)){return true}return Zs.test(t)||!Xs.test(t)||e!=null&&t in Object(e)}var ea=ta;var ia="Expected a function";function na(t,e){if(typeof t!="function"||e!=null&&typeof e!="function"){throw new TypeError(ia)}var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],r=i.cache;if(r.has(o)){return r.get(o)}var s=t.apply(this,n);i.cache=r.set(o,s)||r;return s};i.cache=new(na.Cache||_e);return i}na.Cache=_e;var oa=na;var ra=500;function sa(t){var e=oa(t,(function(t){if(i.size===ra){i.clear()}return t}));var i=e.cache;return e}var aa=sa;var ca=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var la=/\\(\\)?/g;var da=aa((function(t){var e=[];if(t.charCodeAt(0)===46){e.push("")}t.replace(ca,(function(t,i,n,o){e.push(n?o.replace(la,"$1"):i||t)}));return e}));var ua=da;function ha(t,e){var i=-1,n=t==null?0:t.length,o=Array(n);while(++i<n){o[i]=e(t[i],i,t)}return o}var fa=ha;var ga=1/0;var ma=r?r.prototype:undefined,pa=ma?ma.toString:undefined;function ba(t){if(typeof t=="string"){return t}if(Je(t)){return fa(t,ba)+""}if(Qs(t)){return pa?pa.call(t):""}var e=t+"";return e=="0"&&1/t==-ga?"-0":e}var wa=ba;function ka(t){return t==null?"":wa(t)}var _a=ka;function va(t,e){if(Je(t)){return t}return ea(t,e)?[t]:ua(_a(t))}var ya=va;function xa(t){var e=t==null?0:t.length;return e?t[e-1]:undefined}var Ca=xa;var Aa=1/0;function Ta(t){if(typeof t=="string"||Qs(t)){return t}var e=t+"";return e=="0"&&1/t==-Aa?"-0":e}var Pa=Ta;function Sa(t,e){e=ya(e,t);var i=0,n=e.length;while(t!=null&&i<n){t=t[Pa(e[i++])]}return i&&i==n?t:undefined}var Ea=Sa;function Ra(t,e,i){var n=-1,o=t.length;if(e<0){e=-e>o?0:o+e}i=i>o?o:i;if(i<0){i+=o}o=e>i?0:i-e>>>0;e>>>=0;var r=Array(o);while(++n<o){r[n]=t[n+e]}return r}var Oa=Ra;function Ia(t,e){return e.length<2?t:Ea(t,Oa(e,0,-1))}var Va=Ia;function Na(t,e){e=ya(e,t);t=Va(t,e);return t==null||delete t[Pa(Ca(e))]}var Ma=Na;function Ba(t,e){return t==null?true:Ma(t,e)}var za=Ba;function La(t,e,i){var n=t==null?undefined:Ea(t,e);return n===undefined?i:n}var Fa=La;function Da(t,e,i){if(i!==undefined&&!L(t[e],i)||i===undefined&&!(e in t)){Oe(t,e,i)}}var ja=Da;function Ha(t){return function(e,i,n){var o=-1,r=Object(e),s=n(e),a=s.length;while(a--){var c=s[t?a:++o];if(i(r[c],c,r)===false){break}}return e}}var Wa=Ha;var qa=Wa();var Ua=qa;function $a(t){return T(t)&&Qi(t)}var Ga=$a;function Ka(t,e){if(e==="constructor"&&typeof t[e]==="function"){return}if(e=="__proto__"){return}return t[e]}var Ja=Ka;function Ya(t){return ze(t,dn(t))}var Qa=Ya;function Xa(t,e,i,n,o,r,s){var a=Ja(t,i),c=Ja(e,i),l=s.get(c);if(l){ja(t,i,l);return}var d=r?r(a,c,i+"",t,e,s):undefined;var u=d===undefined;if(u){var h=Je(c),f=!h&&Object(Ye["a"])(c),g=!h&&!f&&Bi(c);d=c;if(h||f||g){if(Je(a)){d=a}else if(Ga(a)){d=mn(a)}else if(f){u=false;d=Object(fn["a"])(c,true)}else if(g){u=false;d=To(c,true)}else{d=[]}}else if(N(c)||Ge(c)){d=a;if(Ge(a)){d=Qa(a)}else if(!ct(a)||gt(a)){d=Xo(c)}}else{u=false}}if(u){s.set(c,d);o(d,c,n,r,s);s["delete"](c)}ja(t,i,d)}var Za=Xa;function tc(t,e,i,n,o){if(t===e){return}Ua(e,(function(r,s){o||(o=new Ae);if(ct(r)){Za(t,e,s,i,tc,n,o)}else{var a=n?n(Ja(t,s),r,s+"",t,e,o):undefined;if(a===undefined){a=r}ja(t,s,a)}}),dn)}var ec=tc;function ic(t){return t}var nc=ic;function oc(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var rc=oc;var sc=Math.max;function ac(t,e,i){e=sc(e===undefined?t.length-1:e,0);return function(){var n=arguments,o=-1,r=sc(n.length-e,0),s=Array(r);while(++o<r){s[o]=n[e+o]}o=-1;var a=Array(e+1);while(++o<e){a[o]=n[o]}a[e]=i(s);return rc(t,this,a)}}var cc=ac;function lc(t){return function(){return t}}var dc=lc;var uc=!Ee?nc:function(t,e){return Ee(t,"toString",{configurable:true,enumerable:false,value:dc(e),writable:true})};var hc=uc;var fc=800,gc=16;var mc=Date.now;function pc(t){var e=0,i=0;return function(){var n=mc(),o=gc-(n-i);i=n;if(o>0){if(++e>=fc){return arguments[0]}}else{e=0}return t.apply(undefined,arguments)}}var bc=pc;var wc=bc(hc);var kc=wc;function _c(t,e){return kc(cc(t,e,nc),t+"")}var vc=_c;function yc(t,e,i){if(!ct(i)){return false}var n=typeof e;if(n=="number"?Qi(i)&&ti(e,i.length):n=="string"&&e in i){return L(i[e],t)}return false}var xc=yc;function Cc(t){return vc((function(e,i){var n=-1,o=i.length,r=o>1?i[o-1]:undefined,s=o>2?i[2]:undefined;r=t.length>3&&typeof r=="function"?(o--,r):undefined;if(s&&xc(i[0],i[1],s)){r=o<3?undefined:r;o=1}e=Object(e);while(++n<o){var a=i[n];if(a){t(e,a,n,r)}}return e}))}var Ac=Cc;var Tc=Ac((function(t,e,i){ec(t,e,i)}));var Pc=Tc;function Sc(t,e,i,n){if(!ct(t)){return t}e=ya(e,t);var o=-1,r=e.length,s=r-1,a=t;while(a!=null&&++o<r){var c=Pa(e[o]),l=i;if(o!=s){var d=a[c];l=n?n(d,c,a):undefined;if(l===undefined){l=ct(d)?d:ti(e[o+1])?[]:{}}}Me(a,c,l);a=a[c]}return t}var Ec=Sc;function Rc(t,e,i){return t==null?t:Ec(t,e,i)}var Oc=Rc;class Ic{constructor(t){this._styles={};this._styleProcessor=t}get isEmpty(){const t=Object.entries(this._styles);const e=Array.from(t);return!e.length}get size(){if(this.isEmpty){return 0}return this.getStyleNames().length}setTo(t){this.clear();const e=Array.from(Nc(t).entries());for(const[t,i]of e){this._styleProcessor.toNormalizedForm(t,i,this._styles)}}has(t){if(this.isEmpty){return false}const e=this._styleProcessor.getReducedForm(t,this._styles);const i=e.find(([e])=>e===t);return Array.isArray(i)}set(t,e){if(ct(t)){for(const[e,i]of Object.entries(t)){this._styleProcessor.toNormalizedForm(e,i,this._styles)}}else{this._styleProcessor.toNormalizedForm(t,e,this._styles)}}remove(t){const e=Mc(t);za(this._styles,e);delete this._styles[t];this._cleanEmptyObjectsOnPath(e)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){if(this.isEmpty){return""}return this._getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty){return}if(this._styles[t]&&!ct(this._styles[t])){return this._styles[t]}const e=this._styleProcessor.getReducedForm(t,this._styles);const i=e.find(([e])=>e===t);if(Array.isArray(i)){return i[1]}}getStyleNames(){if(this.isEmpty){return[]}const t=this._getStylesEntries();return t.map(([t])=>t)}clear(){this._styles={}}_getStylesEntries(){const t=[];const e=Object.keys(this._styles);for(const i of e){t.push(...this._styleProcessor.getReducedForm(i,this._styles))}return t}_cleanEmptyObjectsOnPath(t){const e=t.split(".");const i=e.length>1;if(!i){return}const n=e.splice(0,e.length-1).join(".");const o=Fa(this._styles,n);if(!o){return}const r=!Array.from(Object.keys(o)).length;if(r){this.remove(n)}}}class Vc{constructor(){this._normalizers=new Map;this._extractors=new Map;this._reducers=new Map;this._consumables=new Map}toNormalizedForm(t,e,i){if(ct(e)){Bc(i,Mc(t),e);return}if(this._normalizers.has(t)){const n=this._normalizers.get(t);const{path:o,value:r}=n(e);Bc(i,o,r)}else{Bc(i,t,e)}}getNormalized(t,e){if(!t){return Pc({},e)}if(e[t]!==undefined){return e[t]}if(this._extractors.has(t)){const i=this._extractors.get(t);if(typeof i==="string"){return Fa(e,i)}const n=i(t,e);if(n){return n}}return Fa(e,Mc(t))}getReducedForm(t,e){const i=this.getNormalized(t,e);if(i===undefined){return[]}if(this._reducers.has(t)){const e=this._reducers.get(t);return e(i)}return[[t,i]]}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const i of e){this._mapStyleNames(i,[t])}}_mapStyleNames(t,e){if(!this._consumables.has(t)){this._consumables.set(t,[])}this._consumables.get(t).push(...e)}}function Nc(t){let e=null;let i=0;let n=0;let o=null;const r=new Map;if(t===""){return r}if(t.charAt(t.length-1)!=";"){t=t+";"}for(let s=0;s<t.length;s++){const a=t.charAt(s);if(e===null){switch(a){case":":if(!o){o=t.substr(i,s-i);n=s+1}break;case'"':case"'":e=a;break;case";":{const e=t.substr(n,s-n);if(o){r.set(o.trim(),e.trim())}o=null;i=s+1;break}}}else if(a===e){e=null}}return r}function Mc(t){return t.replace("-",".")}function Bc(t,e,i){let n=i;if(ct(i)){n=Pc({},Fa(t,e),i)}Oc(t,e,n)}class zc extends zs{constructor(t,e,i,n){super(t);this.name=e;this._attrs=Lc(i);this._children=[];if(n){this._insertChild(0,n)}this._classes=new Set;if(this._attrs.has("class")){const t=this._attrs.get("class");Fc(this._classes,t);this._attrs.delete("class")}this._styles=new Ic(this.document.stylesProcessor);if(this._attrs.has("style")){this._styles.setTo(this._attrs.get("style"));this._attrs.delete("style")}this._customProperties=new Map}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}is(t,e=null){const i=t.replace(/^view:/,"");if(!e){return i=="element"||i==this.name||super.is(t)}else{return i=="element"&&e==this.name}}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){if(this._classes.size>0){yield"class"}if(!this._styles.isEmpty){yield"style"}yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries();if(this._classes.size>0){yield["class",this.getAttribute("class")]}if(!this._styles.isEmpty){yield["style",this.getAttribute("style")]}}getAttribute(t){if(t=="class"){if(this._classes.size>0){return[...this._classes].join(" ")}return undefined}if(t=="style"){const t=this._styles.toString();return t==""?undefined:t}return this._attrs.get(t)}hasAttribute(t){if(t=="class"){return this._classes.size>0}if(t=="style"){return!this._styles.isEmpty}return this._attrs.has(t)}isSimilar(t){if(!(t instanceof zc)){return false}if(this===t){return true}if(this.name!=t.name){return false}if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size){return false}for(const[e,i]of this._attrs){if(!t._attrs.has(e)||t._attrs.get(e)!==i){return false}}for(const e of this._classes){if(!t._classes.has(e)){return false}}for(const e of this._styles.getStyleNames()){if(!t._styles.has(e)||t._styles.getAsString(e)!==this._styles.getAsString(e)){return false}}return true}hasClass(...t){for(const e of t){if(!this._classes.has(e)){return false}}return true}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(){return this._styles.getStyleNames()}hasStyle(...t){for(const e of t){if(!this._styles.has(e)){return false}}return true}findAncestor(...t){const e=new Ws(...t);let i=this.parent;while(i){if(e.match(i)){return i}i=i.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(",");const e=this._styles.toString();const i=Array.from(this._attrs).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(!e?"":` style="${e}"`)+(i==""?"":` ${i}`)}_clone(t=false){const e=[];if(t){for(const i of this.getChildren()){e.push(i._clone(t))}}const i=new this.constructor(this.document,this.name,this._attrs,e);i._classes=new Set(this._classes);i._styles.set(this._styles.getNormalized());i._customProperties=new Map(this._customProperties);i.getFillerOffset=this.getFillerOffset;return i}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this);let i=0;const n=Dc(this.document,e);for(const e of n){if(e.parent!==null){e._remove()}e.parent=this;e.document=this.document;this._children.splice(t,0,e);t++;i++}return i}_removeChildren(t,e=1){this._fireChange("children",this);for(let i=t;i<t+e;i++){this._children[i].parent=null}return this._children.splice(t,e)}_setAttribute(t,e){e=String(e);this._fireChange("attributes",this);if(t=="class"){Fc(this._classes,e)}else if(t=="style"){this._styles.setTo(e)}else{this._attrs.set(t,e)}}_removeAttribute(t){this._fireChange("attributes",this);if(t=="class"){if(this._classes.size>0){this._classes.clear();return true}return false}if(t=="style"){if(!this._styles.isEmpty){this._styles.clear();return true}return false}return this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);t=Array.isArray(t)?t:[t];t.forEach(t=>this._classes.add(t))}_removeClass(t){this._fireChange("attributes",this);t=Array.isArray(t)?t:[t];t.forEach(t=>this._classes.delete(t))}_setStyle(t,e){this._fireChange("attributes",this);this._styles.set(t,e)}_removeStyle(t){this._fireChange("attributes",this);t=Array.isArray(t)?t:[t];t.forEach(t=>this._styles.remove(t))}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}function Lc(t){t=Hs(t);for(const[e,i]of t){if(i===null){t.delete(e)}else if(typeof i!="string"){t.set(e,String(i))}}return t}function Fc(t,e){const i=e.split(/\s+/);t.clear();i.forEach(e=>t.add(e))}function Dc(t,e){if(typeof e=="string"){return[new Ls(t,e)]}if(!js(e)){e=[e]}return Array.from(e).map(e=>{if(typeof e=="string"){return new Ls(t,e)}if(e instanceof Fs){return new Ls(t,e.data)}return e})}class jc extends zc{constructor(t,e,i,n){super(t,e,i,n);this.getFillerOffset=Hc}is(t,e=null){const i=t&&t.replace(/^view:/,"");if(!e){return i=="containerElement"||super.is(t)}else{return i=="containerElement"&&e==this.name||super.is(t,e)}}}function Hc(){const t=[...this.getChildren()];const e=t[this.childCount-1];if(e&&e.is("element","br")){return this.childCount}for(const e of t){if(!e.is("uiElement")){return null}}return this.childCount}var Wc=Ac((function(t,e){ze(e,dn(e),t)}));var qc=Wc;const Uc=Symbol("observableProperties");const $c=Symbol("boundObservables");const Gc=Symbol("boundProperties");const Kc={set(t,e){if(ct(t)){Object.keys(t).forEach(e=>{this.set(e,t[e])},this);return}Yc(this);const i=this[Uc];if(t in this&&!i.has(t)){throw new ss["b"]("observable-set-cannot-override: Cannot override an existing property.",this)}Object.defineProperty(this,t,{enumerable:true,configurable:true,get(){return i.get(t)},set(e){const n=i.get(t);let o=this.fire("set:"+t,t,e,n);if(o===undefined){o=e}if(n!==o||!i.has(t)){i.set(t,o);this.fire("change:"+t,t,o,n)}}});this[t]=e},bind(...t){if(!t.length||!tl(t)){throw new ss["b"]("observable-bind-wrong-properties: All properties must be strings.",this)}if(new Set(t).size!==t.length){throw new ss["b"]("observable-bind-duplicate-properties: Properties must be unique.",this)}Yc(this);const e=this[Gc];t.forEach(t=>{if(e.has(t)){throw new ss["b"]("observable-bind-rebind: Cannot bind the same property more than once.",this)}});const i=new Map;t.forEach(t=>{const n={property:t,to:[]};e.set(t,n);i.set(t,n)});return{to:Qc,toMany:Xc,_observable:this,_bindProperties:t,_to:[],_bindings:i}},unbind(...t){if(!(Uc in this)){return}const e=this[Gc];const i=this[$c];if(t.length){if(!tl(t)){throw new ss["b"]("observable-unbind-wrong-properties: Properties must be strings.",this)}t.forEach(t=>{const n=e.get(t);if(!n){return}let o,r,s,a;n.to.forEach(t=>{o=t[0];r=t[1];s=i.get(o);a=s[r];a.delete(n);if(!a.size){delete s[r]}if(!Object.keys(s).length){i.delete(o);this.stopListening(o,"change")}});e.delete(t)})}else{i.forEach((t,e)=>{this.stopListening(e,"change")});i.clear();e.clear()}},decorate(t){const e=this[t];if(!e){throw new ss["b"]("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",this,{object:this,methodName:t})}this.on(t,(t,i)=>{t.return=e.apply(this,i)});this[t]=function(...e){return this.fire(t,e)}}};qc(Kc,ds);var Jc=Kc;function Yc(t){if(Uc in t){return}Object.defineProperty(t,Uc,{value:new Map});Object.defineProperty(t,$c,{value:new Map});Object.defineProperty(t,Gc,{value:new Map})}function Qc(...t){const e=el(...t);const i=Array.from(this._bindings.keys());const n=i.length;if(!e.callback&&e.to.length>1){throw new ss["b"]("observable-bind-to-no-callback: Binding multiple observables only possible with callback.",this)}if(n>1&&e.callback){throw new ss["b"]("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.",this)}e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==n){throw new ss["b"]("observable-bind-to-properties-length: The number of properties must match.",this)}if(!t.properties.length){t.properties=this._bindProperties}});this._to=e.to;if(e.callback){this._bindings.get(i[0]).callback=e.callback}rl(this._observable,this._to);nl(this);this._bindProperties.forEach(t=>{ol(this._observable,t)})}function Xc(t,e,i){if(this._bindings.size>1){throw new ss["b"]("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().",this)}this.to(...Zc(t,e),i)}function Zc(t,e){const i=t.map(t=>[t,e]);return Array.prototype.concat.apply([],i)}function tl(t){return t.every(t=>typeof t=="string")}function el(...t){if(!t.length){throw new ss["b"]("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null)}const e={to:[]};let i;if(typeof t[t.length-1]=="function"){e.callback=t.pop()}t.forEach(t=>{if(typeof t=="string"){i.properties.push(t)}else if(typeof t=="object"){i={observable:t,properties:[]};e.to.push(i)}else{throw new ss["b"]("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null)}});return e}function il(t,e,i,n){const o=t[$c];const r=o.get(i);const s=r||{};if(!s[n]){s[n]=new Set}s[n].add(e);if(!r){o.set(i,s)}}function nl(t){let e;t._bindings.forEach((i,n)=>{t._to.forEach(o=>{e=o.properties[i.callback?0:t._bindProperties.indexOf(n)];i.to.push([o.observable,e]);il(t._observable,i,o.observable,e)})})}function ol(t,e){const i=t[Gc];const n=i.get(e);let o;if(n.callback){o=n.callback.apply(t,n.to.map(t=>t[0][t[1]]))}else{o=n.to[0];o=o[0][o[1]]}if(t.hasOwnProperty(e)){t[e]=o}else{t.set(e,o)}}function rl(t,e){e.forEach(e=>{const i=t[$c];let n;if(!i.get(e.observable)){t.listenTo(e.observable,"change",(o,r)=>{n=i.get(e.observable)[r];if(n){n.forEach(e=>{ol(t,e.property)})}})}})}class sl extends jc{constructor(t,e,i,n){super(t,e,i,n);this.set("isReadOnly",false);this.set("isFocused",false);this.bind("isReadOnly").to(t);this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this);this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}is(t,e=null){const i=t&&t.replace(/^view:/,"");if(!e){return i=="editableElement"||super.is(t)}else{return i=="editableElement"&&e==this.name||super.is(t,e)}}destroy(){this.stopListening()}}vs(sl,Jc);const al=Symbol("rootName");class cl extends sl{constructor(t,e){super(t,e);this.rootName="main"}is(t,e=null){const i=t.replace(/^view:/,"");if(!e){return i=="rootElement"||super.is(t)}else{return i=="rootElement"&&e==this.name||super.is(t,e)}}get rootName(){return this.getCustomProperty(al)}set rootName(t){this._setCustomProperty(al,t)}set _name(t){this.name=t}}class ll{constructor(t={}){if(!t.boundaries&&!t.startPosition){throw new ss["b"]("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null)}if(t.direction&&t.direction!="forward"&&t.direction!="backward"){throw new ss["b"]("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",t.startPosition,{direction:t.direction})}this.boundaries=t.boundaries||null;if(t.startPosition){this.position=dl._createAt(t.startPosition)}else{this.position=dl._createAt(t.boundaries[t.direction=="backward"?"end":"start"])}this.direction=t.direction||"forward";this.singleCharacters=!!t.singleCharacters;this.shallow=!!t.shallow;this.ignoreElementEnd=!!t.ignoreElementEnd;this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null;this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(t){let e,i,n;do{n=this.position;({done:e,value:i}=this.next())}while(!e&&t(i));if(!e){this.position=n}}next(){if(this.direction=="forward"){return this._next()}else{return this._previous()}}_next(){let t=this.position.clone();const e=this.position;const i=t.parent;if(i.parent===null&&t.offset===i.childCount){return{done:true}}if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset){return{done:true}}let n;if(i instanceof Ls){if(t.isAtEnd){this.position=dl._createAfter(i);return this._next()}n=i.data[t.offset]}else{n=i.getChild(t.offset)}if(n instanceof zc){if(!this.shallow){t=new dl(n,0)}else{t.offset++}this.position=t;return this._formatReturnValue("elementStart",n,e,t,1)}else if(n instanceof Ls){if(this.singleCharacters){t=new dl(n,0);this.position=t;return this._next()}else{let i=n.data.length;let o;if(n==this._boundaryEndParent){i=this.boundaries.end.offset;o=new Fs(n,0,i);t=dl._createAfter(o)}else{o=new Fs(n,0,n.data.length);t.offset++}this.position=t;return this._formatReturnValue("text",o,e,t,i)}}else if(typeof n=="string"){let n;if(this.singleCharacters){n=1}else{const e=i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length;n=e-t.offset}const o=new Fs(i,t.offset,n);t.offset+=n;this.position=t;return this._formatReturnValue("text",o,e,t,n)}else{t=dl._createAfter(i);this.position=t;if(this.ignoreElementEnd){return this._next()}else{return this._formatReturnValue("elementEnd",i,e,t)}}}_previous(){let t=this.position.clone();const e=this.position;const i=t.parent;if(i.parent===null&&t.offset===0){return{done:true}}if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset){return{done:true}}let n;if(i instanceof Ls){if(t.isAtStart){this.position=dl._createBefore(i);return this._previous()}n=i.data[t.offset-1]}else{n=i.getChild(t.offset-1)}if(n instanceof zc){if(!this.shallow){t=new dl(n,n.childCount);this.position=t;if(this.ignoreElementEnd){return this._previous()}else{return this._formatReturnValue("elementEnd",n,e,t)}}else{t.offset--;this.position=t;return this._formatReturnValue("elementStart",n,e,t,1)}}else if(n instanceof Ls){if(this.singleCharacters){t=new dl(n,n.data.length);this.position=t;return this._previous()}else{let i=n.data.length;let o;if(n==this._boundaryStartParent){const e=this.boundaries.start.offset;o=new Fs(n,e,n.data.length-e);i=o.data.length;t=dl._createBefore(o)}else{o=new Fs(n,0,n.data.length);t.offset--}this.position=t;return this._formatReturnValue("text",o,e,t,i)}}else if(typeof n=="string"){let n;if(!this.singleCharacters){const e=i===this._boundaryStartParent?this.boundaries.start.offset:0;n=t.offset-e}else{n=1}t.offset-=n;const o=new Fs(i,t.offset,n);this.position=t;return this._formatReturnValue("text",o,e,t,n)}else{t=dl._createBefore(i);this.position=t;return this._formatReturnValue("elementStart",i,e,t,1)}}_formatReturnValue(t,e,i,n,o){if(e instanceof Fs){if(e.offsetInText+e.data.length==e.textNode.data.length){if(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))){n=dl._createAfter(e.textNode);this.position=n}else{i=dl._createAfter(e.textNode)}}if(e.offsetInText===0){if(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))){n=dl._createBefore(e.textNode);this.position=n}else{i=dl._createBefore(e.textNode)}}}return{done:false,value:{type:t,item:e,previousPosition:i,nextPosition:n,length:o}}}}class dl{constructor(t,e){this.parent=t;this.offset=e}get nodeAfter(){if(this.parent.is("text")){return null}return this.parent.getChild(this.offset)||null}get nodeBefore(){if(this.parent.is("text")){return null}return this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;while(!(t instanceof sl)){if(t.parent){t=t.parent}else{return null}}return t}getShiftedBy(t){const e=dl._createAt(this);const i=e.offset+t;e.offset=i<0?0:i;return e}getLastMatchingPosition(t,e={}){e.startPosition=this;const i=new ll(e);i.skip(t);return i.position}getAncestors(){if(this.parent.is("documentFragment")){return[this.parent]}else{return this.parent.getAncestors({includeSelf:true})}}getCommonAncestor(t){const e=this.getAncestors();const i=t.getAncestors();let n=0;while(e[n]==i[n]&&e[n]){n++}return n===0?null:e[n-1]}is(t){return t=="position"||t=="view:position"}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root){return"different"}if(this.isEqual(t)){return"same"}const e=this.parent.is("node")?this.parent.getPath():[];const i=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset);i.push(t.offset);const n=Vs(e,i);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<i[n]?"before":"after"}}getWalker(t={}){t.startPosition=this;return new ll(t)}clone(){return new dl(this.parent,this.offset)}static _createAt(t,e){if(t instanceof dl){return new this(t.parent,t.offset)}else{const i=t;if(e=="end"){e=i.is("text")?i.data.length:i.childCount}else if(e=="before"){return this._createBefore(i)}else if(e=="after"){return this._createAfter(i)}else if(e!==0&&!e){throw new ss["b"]("view-createPositionAt-offset-required: "+"View#createPositionAt() requires the offset when the first parameter is a view item.",i)}return new dl(i,e)}}static _createAfter(t){if(t.is("textProxy")){return new dl(t.textNode,t.offsetInText+t.data.length)}if(!t.parent){throw new ss["b"]("view-position-after-root: You can not make position after root.",t,{root:t})}return new dl(t.parent,t.index+1)}static _createBefore(t){if(t.is("textProxy")){return new dl(t.textNode,t.offsetInText)}if(!t.parent){throw new ss["b"]("view-position-before-root: You can not make position before root.",t,{root:t})}return new dl(t.parent,t.index)}}class ul{constructor(t,e=null){this.start=t.clone();this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new ll({boundaries:this,ignoreElementEnd:true})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(hl,{direction:"backward"});let e=this.end.getLastMatchingPosition(hl);if(t.parent.is("text")&&t.isAtStart){t=dl._createBefore(t.parent)}if(e.parent.is("text")&&e.isAtEnd){e=dl._createAfter(e.parent)}return new ul(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(hl);if(t.isAfter(this.end)||t.isEqual(this.end)){return new ul(t,t)}let e=this.end.getLastMatchingPosition(hl,{direction:"backward"});const i=t.nodeAfter;const n=e.nodeBefore;if(i&&i.is("text")){t=new dl(i,0)}if(n&&n.is("text")){e=new dl(n,n.data.length)}return new ul(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=false){if(t.isCollapsed){e=false}const i=this.containsPosition(t.start)||e&&this.start.isEqual(t.start);const n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return i&&n}getDifference(t){const e=[];if(this.isIntersecting(t)){if(this.containsPosition(t.start)){e.push(new ul(this.start,t.start))}if(this.containsPosition(t.end)){e.push(new ul(t.end,this.end))}}else{e.push(this.clone())}return e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start;let i=this.end;if(this.containsPosition(t.start)){e=t.start}if(this.containsPosition(t.end)){i=t.end}return new ul(e,i)}return null}getWalker(t={}){t.boundaries=this;return new ll(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed){return null}let t=this.start.nodeAfter;let e=this.end.nodeBefore;if(this.start.parent.is("text")&&this.start.isAtEnd&&this.start.parent.nextSibling){t=this.start.parent.nextSibling}if(this.end.parent.is("text")&&this.end.isAtStart&&this.end.parent.previousSibling){e=this.end.parent.previousSibling}if(t&&t.is("element")&&t===e){return t}return null}clone(){return new ul(this.start,this.end)}*getItems(t={}){t.boundaries=this;t.ignoreElementEnd=true;const e=new ll(t);for(const t of e){yield t.item}}*getPositions(t={}){t.boundaries=this;const e=new ll(t);yield e.position;for(const t of e){yield t.nextPosition}}is(t){return t=="range"||t=="view:range"}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,e,i,n){return new this(new dl(t,e),new dl(i,n))}static _createFromPositionAndShift(t,e){const i=t;const n=t.getShiftedBy(e);return e>0?new this(i,n):new this(n,i)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(dl._createBefore(t),e)}}function hl(t){if(t.item.is("attributeElement")||t.item.is("uiElement")){return true}return false}function fl(t){let e=0;for(const i of t){e++}return e}class gl{constructor(t=null,e,i){this._ranges=[];this._lastRangeBackward=false;this._isFake=false;this._fakeSelectionLabel="";this.setTo(t,e,i)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length){return null}const t=this._ranges[this._ranges.length-1];const e=this._lastRangeBackward?t.end:t.start;return e.clone()}get focus(){if(!this._ranges.length){return null}const t=this._ranges[this._ranges.length-1];const e=this._lastRangeBackward?t.start:t.end;return e.clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){if(this.anchor){return this.anchor.editableElement}return null}*getRanges(){for(const t of this._ranges){yield t.clone()}}getFirstRange(){let t=null;for(const e of this._ranges){if(!t||e.start.isBefore(t.start)){t=e}}return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges){if(!t||e.end.isAfter(t.end)){t=e}}return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake){return false}if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel){return false}if(this.rangeCount!=t.rangeCount){return false}else if(this.rangeCount===0){return true}if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus)){return false}for(const e of this._ranges){let i=false;for(const n of t._ranges){if(e.isEqual(n)){i=true;break}}if(!i){return false}}return true}isSimilar(t){if(this.isBackward!=t.isBackward){return false}const e=fl(this.getRanges());const i=fl(t.getRanges());if(e!=i){return false}if(e==0){return true}for(let e of this.getRanges()){e=e.getTrimmed();let i=false;for(let n of t.getRanges()){n=n.getTrimmed();if(e.start.isEqual(n.start)&&e.end.isEqual(n.end)){i=true;break}}if(!i){return false}}return true}getSelectedElement(){if(this.rangeCount!==1){return null}return this.getFirstRange().getContainedElement()}setTo(t,e,i){if(t===null){this._setRanges([]);this._setFakeOptions(e)}else if(t instanceof gl||t instanceof ml){this._setRanges(t.getRanges(),t.isBackward);this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel})}else if(t instanceof ul){this._setRanges([t],e&&e.backward);this._setFakeOptions(e)}else if(t instanceof dl){this._setRanges([new ul(t)]);this._setFakeOptions(e)}else if(t instanceof zs){const n=!!i&&!!i.backward;let o;if(e===undefined){throw new ss["b"]("view-selection-setTo-required-second-parameter: "+"selection.setTo requires the second parameter when the first parameter is a node.",this)}else if(e=="in"){o=ul._createIn(t)}else if(e=="on"){o=ul._createOn(t)}else{o=new ul(dl._createAt(t,e))}this._setRanges([o],n);this._setFakeOptions(i)}else if(js(t)){this._setRanges(t,e&&e.backward);this._setFakeOptions(e)}else{throw new ss["b"]("view-selection-setTo-not-selectable: Cannot set selection to given place.",this)}this.fire("change")}setFocus(t,e){if(this.anchor===null){throw new ss["b"]("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",this)}const i=dl._createAt(t,e);if(i.compareWith(this.focus)=="same"){return}const n=this.anchor;this._ranges.pop();if(i.compareWith(n)=="before"){this._addRange(new ul(i,n),true)}else{this._addRange(new ul(n,i))}this.fire("change")}is(t){return t=="selection"||t=="view:selection"}_setRanges(t,e=false){t=Array.from(t);this._ranges=[];for(const e of t){this._addRange(e)}this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake;this._fakeSelectionLabel=t.fake?t.label||"":""}_addRange(t,e=false){if(!(t instanceof ul)){throw new ss["b"]("view-selection-add-range-not-range: "+"Selection range set to an object that is not an instance of view.Range",this)}this._pushRange(t);this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges){if(t.isIntersecting(e)){throw new ss["b"]("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",this,{addedRange:t,intersectingRange:e})}}this._ranges.push(new ul(t.start,t.end))}}vs(gl,ds);class ml{constructor(t=null,e,i){this._selection=new gl;this._selection.delegate("change").to(this);this._selection.setTo(t,e,i)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}is(t){return t=="selection"||t=="documentSelection"||t=="view:selection"||t=="view:documentSelection"}_setTo(t,e,i){this._selection.setTo(t,e,i)}_setFocus(t,e){this._selection.setFocus(t,e)}}vs(ml,ds);class pl{constructor(t){this.selection=new ml;this.roots=new ys({idProperty:"rootName"});this.stylesProcessor=t;this.set("isReadOnly",false);this.set("isFocused",false);this.set("isComposing",false);this._postFixers=new Set}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.map(t=>t.destroy());this.stopListening()}_callPostFixers(t){let e=false;do{for(const i of this._postFixers){e=i(t);if(e){break}}}while(e)}}vs(pl,Jc);const bl=10;class wl extends zc{constructor(t,e,i,n){super(t,e,i,n);this.getFillerOffset=kl;this._priority=bl;this._id=null;this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null){throw new ss["b"]("attribute-element-get-elements-with-same-id-no-id: "+"Cannot get elements with the same id for an attribute element without id.",this)}return new Set(this._clonesGroup)}is(t,e=null){const i=t&&t.replace(/^view:/,"");if(!e){return i=="attributeElement"||super.is(t)}else{return i=="attributeElement"&&e==this.name||super.is(t,e)}}isSimilar(t){if(this.id!==null||t.id!==null){return this.id===t.id}return super.isSimilar(t)&&this.priority==t.priority}_clone(t){const e=super._clone(t);e._priority=this._priority;e._id=this._id;return e}}wl.DEFAULT_PRIORITY=bl;function kl(){if(_l(this)){return null}let t=this.parent;while(t&&t.is("attributeElement")){if(_l(t)>1){return null}t=t.parent}if(!t||_l(t)>1){return null}return this.childCount}function _l(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}class vl extends zc{constructor(t,e,i,n){super(t,e,i,n);this.getFillerOffset=yl}is(t,e=null){const i=t.replace(/^view:/,"");if(!e){return i=="emptyElement"||super.is(t)}else{return i=="emptyElement"&&e==this.name||super.is(t,e)}}_insertChild(t,e){if(e&&(e instanceof zs||Array.from(e).length>0)){throw new ss["b"]("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.",[this,e])}}}function yl(){return null}const xl=navigator.userAgent.toLowerCase();const Cl={isMac:Tl(xl),isEdge:Pl(xl),isGecko:Sl(xl),isSafari:El(xl),isAndroid:Rl(xl),features:{isRegExpUnicodePropertySupported:Ol()}};var Al=Cl;function Tl(t){return t.indexOf("macintosh")>-1}function Pl(t){return!!t.match(/edge\/(\d+.?\d*)/)}function Sl(t){return!!t.match(/gecko\/\d+/)}function El(t){return t.indexOf(" applewebkit/")>-1&&t.indexOf("chrome")===-1}function Rl(t){return t.indexOf("android")>-1}function Ol(){let t=false;try{t="".search(new RegExp("[\\p{L}]","u"))===0}catch(t){}return t}const Il={"":"ctrl","":"shift","":"alt"};const Vl={ctrl:"",shift:"",alt:""};const Nl=Ll();function Ml(t){let e;if(typeof t=="string"){e=Nl[t.toLowerCase()];if(!e){throw new ss["b"]("keyboard-unknown-key: Unknown key name.",null,{key:t})}}else{e=t.keyCode+(t.altKey?Nl.alt:0)+(t.ctrlKey?Nl.ctrl:0)+(t.shiftKey?Nl.shift:0)}return e}function Bl(t){if(typeof t=="string"){t=Fl(t)}return t.map(t=>typeof t=="string"?Ml(t):t).reduce((t,e)=>e+t,0)}function zl(t){if(!Al.isMac){return t}return Fl(t).map(t=>Vl[t.toLowerCase()]||t).reduce((t,e)=>{if(t.slice(-1)in Il){return t+e}else{return t+"+"+e}})}function Ll(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let e=65;e<=90;e++){const i=String.fromCharCode(e);t[i.toLowerCase()]=e}for(let e=48;e<=57;e++){t[e-48]=e}for(let e=112;e<=123;e++){t["f"+(e-111)]=e}return t}function Fl(t){return t.split(/\s*\+\s*/)}class Dl extends zc{constructor(t,e,i,n){super(t,e,i,n);this.getFillerOffset=Hl}is(t,e=null){const i=t.replace(/^view:/,"");if(!e){return i=="uiElement"||super.is(t)}else{return i=="uiElement"&&e==this.name||super.is(t,e)}}_insertChild(t,e){if(e&&(e instanceof zs||Array.from(e).length>0)){throw new ss["b"]("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.",this)}}render(t){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys()){e.setAttribute(t,this.getAttribute(t))}return e}}function jl(t){t.document.on("keydown",(e,i)=>Wl(e,i,t.domConverter))}function Hl(){return null}function Wl(t,e,i){if(e.keyCode==Nl.arrowright){const t=e.domTarget.ownerDocument.defaultView.getSelection();const n=t.rangeCount==1&&t.getRangeAt(0).collapsed;if(n||e.shiftKey){const e=t.focusNode;const o=t.focusOffset;const r=i.domPositionToView(e,o);if(r===null){return}let s=false;const a=r.getLastMatchingPosition(t=>{if(t.item.is("uiElement")){s=true}if(t.item.is("uiElement")||t.item.is("attributeElement")){return true}return false});if(s){const e=i.viewPositionToDom(a);if(n){t.collapse(e.parent,e.offset)}else{t.extend(e.parent,e.offset)}}}}}class ql{constructor(t,e){this.document=t;this._children=[];if(e){this._insertChild(0,e)}}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}is(t){return t=="documentFragment"||t=="view:documentFragment"}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this);let i=0;const n=Ul(this.document,e);for(const e of n){if(e.parent!==null){e._remove()}e.parent=this;this._children.splice(t,0,e);t++;i++}return i}_removeChildren(t,e=1){this._fireChange("children",this);for(let i=t;i<t+e;i++){this._children[i].parent=null}return this._children.splice(t,e)}_fireChange(t,e){this.fire("change:"+t,e)}}vs(ql,ds);function Ul(t,e){if(typeof e=="string"){return[new Ls(t,e)]}if(!js(e)){e=[e]}return Array.from(e).map(e=>{if(typeof e=="string"){return new Ls(t,e)}if(e instanceof Fs){return new Ls(t,e.data)}return e})}class $l{constructor(t){this.document=t;this._cloneGroups=new Map}setSelection(t,e,i){this.document.selection._setTo(t,e,i)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createText(t){return new Ls(this.document,t)}createAttributeElement(t,e,i={}){const n=new wl(this.document,t,e);if(i.priority){n._priority=i.priority}if(i.id){n._id=i.id}return n}createContainerElement(t,e){return new jc(this.document,t,e)}createEditableElement(t,e){const i=new sl(this.document,t,e);i._document=this.document;return i}createEmptyElement(t,e){return new vl(this.document,t,e)}createUIElement(t,e,i){const n=new Dl(this.document,t,e);if(i){n.render=i}return n}setAttribute(t,e,i){i._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,i){if(N(t)&&i===undefined){i=e}i._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,i){i._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){if(t instanceof dl){return this._breakAttributes(t)}else{return this._breakAttributesRange(t)}}breakContainer(t){const e=t.parent;if(!e.is("containerElement")){throw new ss["b"]("view-writer-break-non-container-element: Trying to break an element which is not a container element.",this.document)}if(!e.parent){throw new ss["b"]("view-writer-break-root: Trying to break root element.",this.document)}if(t.isAtStart){return dl._createBefore(e)}else if(!t.isAtEnd){const i=e._clone(false);this.insert(dl._createAfter(e),i);const n=new ul(t,dl._createAt(e,"end"));const o=new dl(i,0);this.move(n,o)}return dl._createAfter(e)}mergeAttributes(t){const e=t.offset;const i=t.parent;if(i.is("text")){return t}if(i.is("attributeElement")&&i.childCount===0){const t=i.parent;const e=i.index;i._remove();this._removeFromClonedElementsGroup(i);return this.mergeAttributes(new dl(t,e))}const n=i.getChild(e-1);const o=i.getChild(e);if(!n||!o){return t}if(n.is("text")&&o.is("text")){return Xl(n,o)}else if(n.is("attributeElement")&&o.is("attributeElement")&&n.isSimilar(o)){const t=n.childCount;n._appendChild(o.getChildren());o._remove();this._removeFromClonedElementsGroup(o);return this.mergeAttributes(new dl(n,t))}return t}mergeContainers(t){const e=t.nodeBefore;const i=t.nodeAfter;if(!e||!i||!e.is("containerElement")||!i.is("containerElement")){throw new ss["b"]("view-writer-merge-containers-invalid-position: "+"Element before and after given position cannot be merged.",this.document)}const n=e.getChild(e.childCount-1);const o=n instanceof Ls?dl._createAt(n,"end"):dl._createAt(e,"end");this.move(ul._createIn(i),dl._createAt(e,"end"));this.remove(ul._createOn(i));return o}insert(t,e){e=js(e)?[...e]:[e];Zl(e,this.document);const i=Kl(t);if(!i){throw new ss["b"]("view-writer-invalid-position-container",this.document)}const n=this._breakAttributes(t,true);const o=i._insertChild(n.offset,e);for(const t of e){this._addToClonedElementsGroup(t)}const r=n.getShiftedBy(o);const s=this.mergeAttributes(n);if(o===0){return new ul(s,s)}else{if(!s.isEqual(n)){r.offset--}const t=this.mergeAttributes(r);return new ul(s,t)}}remove(t){const e=t instanceof ul?t:ul._createOn(t);id(e,this.document);if(e.isCollapsed){return new ql(this.document)}const{start:i,end:n}=this._breakAttributesRange(e,true);const o=i.parent;const r=n.offset-i.offset;const s=o._removeChildren(i.offset,r);for(const t of s){this._removeFromClonedElementsGroup(t)}const a=this.mergeAttributes(i);e.start=a;e.end=a.clone();return new ql(this.document,s)}clear(t,e){id(t,this.document);const i=t.getWalker({direction:"backward",ignoreElementEnd:true});for(const n of i){const i=n.item;let o;if(i.is("element")&&e.isSimilar(i)){o=ul._createOn(i)}else if(!n.nextPosition.isAfter(t.start)&&i.is("textProxy")){const t=i.getAncestors().find(t=>t.is("element")&&e.isSimilar(t));if(t){o=ul._createIn(t)}}if(o){if(o.end.isAfter(t.end)){o.end=t.end}if(o.start.isBefore(t.start)){o.start=t.start}this.remove(o)}}}move(t,e){let i;if(e.isAfter(t.end)){e=this._breakAttributes(e,true);const n=e.parent;const o=n.childCount;t=this._breakAttributesRange(t,true);i=this.remove(t);e.offset+=n.childCount-o}else{i=this.remove(t)}return this.insert(e,i)}wrap(t,e){if(!(e instanceof wl)){throw new ss["b"]("view-writer-wrap-invalid-attribute",this.document)}id(t,this.document);if(!t.isCollapsed){return this._wrapRange(t,e)}else{let i=t.start;if(i.parent.is("element")&&!Gl(i.parent)){i=i.getLastMatchingPosition(t=>t.item.is("uiElement"))}i=this._wrapPosition(i,e);const n=this.document.selection;if(n.isCollapsed&&n.getFirstPosition().isEqual(t.start)){this.setSelection(i)}return new ul(i)}}unwrap(t,e){if(!(e instanceof wl)){throw new ss["b"]("view-writer-unwrap-invalid-attribute",this.document)}id(t,this.document);if(t.isCollapsed){return t}const{start:i,end:n}=this._breakAttributesRange(t,true);const o=i.parent;const r=this._unwrapChildren(o,i.offset,n.offset,e);const s=this.mergeAttributes(r.start);if(!s.isEqual(r.start)){r.end.offset--}const a=this.mergeAttributes(r.end);return new ul(s,a)}rename(t,e){const i=new jc(this.document,t,e.getAttributes());this.insert(dl._createAfter(e),i);this.move(ul._createIn(e),dl._createAt(i,0));this.remove(ul._createOn(e));return i}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return dl._createAt(t,e)}createPositionAfter(t){return dl._createAfter(t)}createPositionBefore(t){return dl._createBefore(t)}createRange(t,e){return new ul(t,e)}createRangeOn(t){return ul._createOn(t)}createRangeIn(t){return ul._createIn(t)}createSelection(t,e,i){return new gl(t,e,i)}_wrapChildren(t,e,i,n){let o=e;const r=[];while(o<i){const e=t.getChild(o);const i=e.is("text");const s=e.is("attributeElement");const a=e.is("emptyElement");const c=e.is("uiElement");if(s&&this._wrapAttributeElement(n,e)){r.push(new dl(t,o))}else if(i||a||c||s&&Jl(n,e)){const i=n._clone();e._remove();i._appendChild(e);t._insertChild(o,i);this._addToClonedElementsGroup(i);r.push(new dl(t,o))}else if(s){this._wrapChildren(e,0,e.childCount,n)}o++}let s=0;for(const t of r){t.offset-=s;if(t.offset==e){continue}const n=this.mergeAttributes(t);if(!n.isEqual(t)){s++;i--}}return ul._createFromParentsAndOffsets(t,e,t,i)}_unwrapChildren(t,e,i,n){let o=e;const r=[];while(o<i){const e=t.getChild(o);if(!e.is("attributeElement")){o++;continue}if(e.isSimilar(n)){const n=e.getChildren();const s=e.childCount;e._remove();t._insertChild(o,n);this._removeFromClonedElementsGroup(e);r.push(new dl(t,o),new dl(t,o+s));o+=s;i+=s-1;continue}if(this._unwrapAttributeElement(n,e)){r.push(new dl(t,o),new dl(t,o+1));o++;continue}this._unwrapChildren(e,0,e.childCount,n);o++}let s=0;for(const t of r){t.offset-=s;if(t.offset==e||t.offset==i){continue}const n=this.mergeAttributes(t);if(!n.isEqual(t)){s++;i--}}return ul._createFromParentsAndOffsets(t,e,t,i)}_wrapRange(t,e){const{start:i,end:n}=this._breakAttributesRange(t,true);const o=i.parent;const r=this._wrapChildren(o,i.offset,n.offset,e);const s=this.mergeAttributes(r.start);if(!s.isEqual(r.start)){r.end.offset--}const a=this.mergeAttributes(r.end);return new ul(s,a)}_wrapPosition(t,e){if(e.isSimilar(t.parent)){return Yl(t.clone())}if(t.parent.is("text")){t=Ql(t)}const i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY;i.isSimilar=()=>false;t.parent._insertChild(t.offset,i);const n=new ul(t,t.getShiftedBy(1));this.wrap(n,e);const o=new dl(i.parent,i.index);i._remove();const r=o.nodeBefore;const s=o.nodeAfter;if(r instanceof Ls&&s instanceof Ls){return Xl(r,s)}return Yl(o)}_wrapAttributeElement(t,e){if(!nd(t,e)){return false}if(t.name!==e.name||t.priority!==e.priority){return false}for(const i of t.getAttributeKeys()){if(i==="class"||i==="style"){continue}if(e.hasAttribute(i)&&e.getAttribute(i)!==t.getAttribute(i)){return false}}for(const i of t.getStyleNames()){if(e.hasStyle(i)&&e.getStyle(i)!==t.getStyle(i)){return false}}for(const i of t.getAttributeKeys()){if(i==="class"||i==="style"){continue}if(!e.hasAttribute(i)){this.setAttribute(i,t.getAttribute(i),e)}}for(const i of t.getStyleNames()){if(!e.hasStyle(i)){this.setStyle(i,t.getStyle(i),e)}}for(const i of t.getClassNames()){if(!e.hasClass(i)){this.addClass(i,e)}}return true}_unwrapAttributeElement(t,e){if(!nd(t,e)){return false}if(t.name!==e.name||t.priority!==e.priority){return false}for(const i of t.getAttributeKeys()){if(i==="class"||i==="style"){continue}if(!e.hasAttribute(i)||e.getAttribute(i)!==t.getAttribute(i)){return false}}if(!e.hasClass(...t.getClassNames())){return false}for(const i of t.getStyleNames()){if(!e.hasStyle(i)||e.getStyle(i)!==t.getStyle(i)){return false}}for(const i of t.getAttributeKeys()){if(i==="class"||i==="style"){continue}this.removeAttribute(i,e)}this.removeClass(Array.from(t.getClassNames()),e);this.removeStyle(Array.from(t.getStyleNames()),e);return true}_breakAttributesRange(t,e=false){const i=t.start;const n=t.end;id(t,this.document);if(t.isCollapsed){const i=this._breakAttributes(t.start,e);return new ul(i,i)}const o=this._breakAttributes(n,e);const r=o.parent.childCount;const s=this._breakAttributes(i,e);o.offset+=o.parent.childCount-r;return new ul(s,o)}_breakAttributes(t,e=false){const i=t.offset;const n=t.parent;if(t.parent.is("emptyElement")){throw new ss["b"]("view-writer-cannot-break-empty-element",this.document)}if(t.parent.is("uiElement")){throw new ss["b"]("view-writer-cannot-break-ui-element",this.document)}if(!e&&n.is("text")&&ed(n.parent)){return t.clone()}if(ed(n)){return t.clone()}if(n.is("text")){return this._breakAttributes(Ql(t),e)}const o=n.childCount;if(i==o){const t=new dl(n.parent,n.index+1);return this._breakAttributes(t,e)}else{if(i===0){const t=new dl(n.parent,n.index);return this._breakAttributes(t,e)}else{const t=n.index+1;const o=n._clone();n.parent._insertChild(t,o);this._addToClonedElementsGroup(o);const r=n.childCount-i;const s=n._removeChildren(i,r);o._appendChild(s);const a=new dl(n.parent,t);return this._breakAttributes(a,e)}}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement")){return}if(t.is("element")){for(const e of t.getChildren()){this._addToClonedElementsGroup(e)}}const e=t.id;if(!e){return}let i=this._cloneGroups.get(e);if(!i){i=new Set;this._cloneGroups.set(e,i)}i.add(t);t._clonesGroup=i}_removeFromClonedElementsGroup(t){if(t.is("element")){for(const e of t.getChildren()){this._removeFromClonedElementsGroup(e)}}const e=t.id;if(!e){return}const i=this._cloneGroups.get(e);if(!i){return}i.delete(t)}}function Gl(t){return Array.from(t.getChildren()).some(t=>!t.is("uiElement"))}function Kl(t){let e=t.parent;while(!ed(e)){if(!e){return undefined}e=e.parent}return e}function Jl(t,e){if(t.priority<e.priority){return true}else if(t.priority>e.priority){return false}return t.getIdentity()<e.getIdentity()}function Yl(t){const e=t.nodeBefore;if(e&&e.is("text")){return new dl(e,e.data.length)}const i=t.nodeAfter;if(i&&i.is("text")){return new dl(i,0)}return t}function Ql(t){if(t.offset==t.parent.data.length){return new dl(t.parent.parent,t.parent.index+1)}if(t.offset===0){return new dl(t.parent.parent,t.parent.index)}const e=t.parent.data.slice(t.offset);t.parent._data=t.parent.data.slice(0,t.offset);t.parent.parent._insertChild(t.parent.index+1,new Ls(t.root.document,e));return new dl(t.parent.parent,t.parent.index+1)}function Xl(t,e){const i=t.data.length;t._data+=e.data;e._remove();return new dl(t,i)}function Zl(t,e){for(const i of t){if(!td.some(t=>i instanceof t)){throw new ss["b"]("view-writer-insert-invalid-node",e)}if(!i.is("text")){Zl(i.getChildren(),e)}}}const td=[Ls,wl,jc,vl,Dl];function ed(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function id(t,e){const i=Kl(t.start);const n=Kl(t.end);if(!i||!n||i!==n){throw new ss["b"]("view-writer-invalid-range-container",e)}}function nd(t,e){return t.id===null&&e.id===null}function od(t){return Object.prototype.toString.call(t)=="[object Text]"}const rd=t=>t.createTextNode("");const sd=t=>{const e=t.createElement("br");e.dataset.ckeFiller=true;return e};const ad=7;const cd=(()=>{let t="";for(let e=0;e<ad;e++){t+=""}return t})();function ld(t){return od(t)&&t.data.substr(0,ad)===cd}function dd(t){return t.data.length==ad&&ld(t)}function ud(t){if(ld(t)){return t.data.slice(ad)}else{return t.data}}function hd(t){t.document.on("keydown",fd)}function fd(t,e){if(e.keyCode==Nl.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer;const i=t.getRangeAt(0).startOffset;if(ld(e)&&i<=ad){t.collapse(e,0)}}}}function gd(t,e,i,n=false){i=i||function(t,e){return t===e};if(!Array.isArray(t)){t=Array.from(t)}if(!Array.isArray(e)){e=Array.from(e)}const o=md(t,e,i);return n?kd(o,e.length):wd(e,o)}function md(t,e,i){const n=pd(t,e,i);if(n===-1){return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1}}const o=bd(t,n);const r=bd(e,n);const s=pd(o,r,i);const a=t.length-s;const c=e.length-s;return{firstIndex:n,lastIndexOld:a,lastIndexNew:c}}function pd(t,e,i){for(let n=0;n<Math.max(t.length,e.length);n++){if(t[n]===undefined||e[n]===undefined||!i(t[n],e[n])){return n}}return-1}function bd(t,e){return t.slice(e).reverse()}function wd(t,e){const i=[];const{firstIndex:n,lastIndexOld:o,lastIndexNew:r}=e;if(r-n>0){i.push({index:n,type:"insert",values:t.slice(n,r)})}if(o-n>0){i.push({index:n+(r-n),type:"delete",howMany:o-n})}return i}function kd(t,e){const{firstIndex:i,lastIndexOld:n,lastIndexNew:o}=t;if(i===-1){return Array(e).fill("equal")}let r=[];if(i>0){r=r.concat(Array(i).fill("equal"))}if(o-i>0){r=r.concat(Array(o-i).fill("insert"))}if(n-i>0){r=r.concat(Array(n-i).fill("delete"))}if(o<e){r=r.concat(Array(e-o).fill("equal"))}return r}function _d(t,e,i){i=i||function(t,e){return t===e};const n=t.length;const o=e.length;if(n>200||o>200||n+o>300){return _d.fastDiff(t,e,i,true)}let r,s;if(o<n){const i=t;t=e;e=i;r="delete";s="insert"}else{r="insert";s="delete"}const a=t.length;const c=e.length;const l=c-a;const d={};const u={};function h(n){const o=(u[n-1]!==undefined?u[n-1]:-1)+1;const l=u[n+1]!==undefined?u[n+1]:-1;const h=o>l?-1:1;if(d[n+h]){d[n]=d[n+h].slice(0)}if(!d[n]){d[n]=[]}d[n].push(o>l?r:s);let f=Math.max(o,l);let g=f-n;while(g<a&&f<c&&i(t[g],e[f])){g++;f++;d[n].push("equal")}return f}let f=0;let g;do{for(g=-f;g<l;g++){u[g]=h(g)}for(g=l+f;g>l;g--){u[g]=h(g)}u[l]=h(l);f++}while(u[l]!==c);return d[l].slice(1)}_d.fastDiff=gd;function vd(t,e,i){t.insertBefore(i,t.childNodes[e]||null)}function yd(t){const e=t.parentNode;if(e){e.removeChild(t)}}function xd(t){if(t){if(t.defaultView){return t instanceof t.defaultView.Document}else if(t.ownerDocument&&t.ownerDocument.defaultView){return t instanceof t.ownerDocument.defaultView.Node}}return false}class Cd{constructor(t,e){this.domDocuments=new Set;this.domConverter=t;this.markedAttributes=new Set;this.markedChildren=new Set;this.markedTexts=new Set;this.selection=e;this.isFocused=false;this._inlineFiller=null;this._fakeSelectionContainer=null}markToSync(t,e){if(t==="text"){if(this.domConverter.mapViewToDom(e.parent)){this.markedTexts.add(e)}}else{if(!this.domConverter.mapViewToDom(e)){return}if(t==="attributes"){this.markedAttributes.add(e)}else if(t==="children"){this.markedChildren.add(e)}else{throw new ss["b"]("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.",this)}}}render(){let t;for(const t of this.markedChildren){this._updateChildrenMappings(t)}if(this._inlineFiller&&!this._isSelectionInInlineFiller()){this._removeInlineFiller()}if(this._inlineFiller){t=this._getInlineFillerPosition()}else if(this._needsInlineFillerAtSelection()){t=this.selection.getFirstPosition();this.markedChildren.add(t.parent)}for(const t of this.markedAttributes){this._updateAttrs(t)}for(const e of this.markedChildren){this._updateChildren(e,{inlineFillerPosition:t})}for(const e of this.markedTexts){if(!this.markedChildren.has(e.parent)&&this.domConverter.mapViewToDom(e.parent)){this._updateText(e,{inlineFillerPosition:t})}}if(t){const e=this.domConverter.viewPositionToDom(t);const i=e.parent.ownerDocument;if(!ld(e.parent)){this._inlineFiller=Td(i,e.parent,e.offset)}else{this._inlineFiller=e.parent}}else{this._inlineFiller=null}this._updateSelection();this._updateFocus();this.markedTexts.clear();this.markedAttributes.clear();this.markedChildren.clear()}_updateChildrenMappings(t){const e=this.domConverter.mapViewToDom(t);if(!e){return}const i=this.domConverter.mapViewToDom(t).childNodes;const n=Array.from(this.domConverter.viewChildrenToDom(t,e.ownerDocument,{withChildren:false}));const o=this._diffNodeLists(i,n);const r=this._findReplaceActions(o,i,n);if(r.indexOf("replace")!==-1){const e={equal:0,insert:0,delete:0};for(const o of r){if(o==="replace"){const o=e.equal+e.insert;const r=e.equal+e.delete;const s=t.getChild(o);if(s&&!s.is("uiElement")){this._updateElementMappings(s,i[r])}yd(n[o]);e.equal++}else{e[o]++}}}}_updateElementMappings(t,e){this.domConverter.unbindDomElement(e);this.domConverter.bindElements(e,t);this.markedChildren.add(t);this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();if(t.parent.is("text")){return dl._createBefore(this.selection.getFirstPosition().parent)}else{return t}}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed){return false}const t=this.selection.getFirstPosition();const e=this.domConverter.viewPositionToDom(t);if(e&&od(e.parent)&&ld(e.parent)){return true}return false}_removeInlineFiller(){const t=this._inlineFiller;if(!ld(t)){throw new ss["b"]("view-renderer-filler-was-lost: The inline filler node was lost.",this)}if(dd(t)){t.parentNode.removeChild(t)}else{t.data=t.data.substr(ad)}this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed){return false}const t=this.selection.getFirstPosition();const e=t.parent;const i=t.offset;if(!this.domConverter.mapViewToDom(e.root)){return false}if(!e.is("element")){return false}if(!Ad(e)){return false}if(i===e.getFillerOffset()){return false}const n=t.nodeBefore;const o=t.nodeAfter;if(n instanceof Ls||o instanceof Ls){return false}return true}_updateText(t,e){const i=this.domConverter.findCorrespondingDomText(t);const n=this.domConverter.viewToDom(t,i.ownerDocument);const o=i.data;let r=n.data;const s=e.inlineFillerPosition;if(s&&s.parent==t.parent&&s.offset==t.index){r=cd+r}if(o!=r){const t=gd(o,r);for(const e of t){if(e.type==="insert"){i.insertData(e.index,e.values.join(""))}else{i.deleteData(e.index,e.howMany)}}}}_updateAttrs(t){const e=this.domConverter.mapViewToDom(t);if(!e){return}const i=Array.from(e.attributes).map(t=>t.name);const n=t.getAttributeKeys();for(const i of n){e.setAttribute(i,t.getAttribute(i))}for(const n of i){if(!t.hasAttribute(n)){e.removeAttribute(n)}}}_updateChildren(t,e){const i=this.domConverter.mapViewToDom(t);if(!i){return}const n=e.inlineFillerPosition;const o=this.domConverter.mapViewToDom(t).childNodes;const r=Array.from(this.domConverter.viewChildrenToDom(t,i.ownerDocument,{bind:true,inlineFillerPosition:n}));if(n&&n.parent===t){Td(i.ownerDocument,r,n.offset)}const s=this._diffNodeLists(o,r);let a=0;const c=new Set;for(const t of s){if(t==="delete"){c.add(o[a]);yd(o[a])}else if(t==="equal"){a++}}a=0;for(const t of s){if(t==="insert"){vd(i,a,r[a]);a++}else if(t==="equal"){this._markDescendantTextToSync(this.domConverter.domToView(r[a]));a++}}for(const t of c){if(!t.parentNode){this.domConverter.unbindDomElement(t)}}}_diffNodeLists(t,e){t=Rd(t,this._fakeSelectionContainer);return _d(t,e,Sd.bind(null,this.domConverter))}_findReplaceActions(t,e,i){if(t.indexOf("insert")===-1||t.indexOf("delete")===-1){return t}let n=[];let o=[];let r=[];const s={equal:0,insert:0,delete:0};for(const a of t){if(a==="insert"){r.push(i[s.equal+s.insert])}else if(a==="delete"){o.push(e[s.equal+s.delete])}else{n=n.concat(_d(o,r,Pd).map(t=>t==="equal"?"replace":t));n.push("equal");o=[];r=[]}s[a]++}return n.concat(_d(o,r,Pd).map(t=>t==="equal"?"replace":t))}_markDescendantTextToSync(t){if(!t){return}if(t.is("text")){this.markedTexts.add(t)}else if(t.is("element")){for(const e of t.getChildren()){this._markDescendantTextToSync(e)}}}_updateSelection(){if(this.selection.rangeCount===0){this._removeDomSelection();this._removeFakeSelection();return}const t=this.domConverter.mapViewToDom(this.selection.editableElement);if(!this.isFocused||!t){return}if(this.selection.isFake){this._updateFakeSelection(t)}else{this._removeFakeSelection();this._updateDomSelection(t)}}_updateFakeSelection(t){const e=t.ownerDocument;if(!this._fakeSelectionContainer){this._fakeSelectionContainer=Od(e)}const i=this._fakeSelectionContainer;this.domConverter.bindFakeSelection(i,this.selection);if(!this._fakeSelectionNeedsUpdate(t)){return}if(!i.parentElement||i.parentElement!=t){t.appendChild(i)}i.textContent=this.selection.fakeSelectionLabel||"";const n=e.getSelection();const o=e.createRange();n.removeAllRanges();o.selectNodeContents(i);n.addRange(o)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e)){return}const i=this.domConverter.viewPositionToDom(this.selection.anchor);const n=this.domConverter.viewPositionToDom(this.selection.focus);t.focus();e.collapse(i.parent,i.offset);e.extend(n.parent,n.offset);if(Al.isGecko){Ed(n,e)}}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t)){return true}const e=t&&this.domConverter.domSelectionToView(t);if(e&&this.selection.isEqual(e)){return false}if(!this.selection.isCollapsed&&this.selection.isSimilar(e)){return false}return true}_fakeSelectionNeedsUpdate(t){const e=this._fakeSelectionContainer;const i=t.ownerDocument.getSelection();if(!e||e.parentElement!==t){return true}if(i.anchorNode!==e&&!e.contains(i.anchorNode)){return true}return e.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments){const e=t.getSelection();if(e.rangeCount){const e=t.activeElement;const i=this.domConverter.mapDomToView(e);if(e&&i){t.getSelection().removeAllRanges()}}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;if(t){t.remove()}}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;if(t){this.domConverter.focus(t)}}}}vs(Cd,Jc);function Ad(t){if(t.getAttribute("contenteditable")=="false"){return false}const e=t.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function Td(t,e,i){const n=e instanceof Array?e:e.childNodes;const o=n[i];if(od(o)){o.data=cd+o.data;return o}else{const o=t.createTextNode(cd);if(Array.isArray(e)){n.splice(i,0,o)}else{vd(e,i,o)}return o}}function Pd(t,e){return xd(t)&&xd(e)&&!od(t)&&!od(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function Sd(t,e,i){if(e===i){return true}else if(od(e)&&od(i)){return e.data===i.data}else if(t.isBlockFiller(e)&&t.isBlockFiller(i)){return true}return false}function Ed(t,e){const i=t.parent;if(i.nodeType!=Node.ELEMENT_NODE||t.offset!=i.childNodes.length-1){return}const n=i.childNodes[t.offset];if(n&&n.tagName=="BR"){e.addRange(e.getRangeAt(0))}}function Rd(t,e){const i=Array.from(t);if(i.length==0||!e){return i}const n=i[i.length-1];if(n==e){i.pop()}return i}function Od(t){const e=t.createElement("div");Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"});e.textContent="";return e}var Id={window:window,document:document};function Vd(t){let e=0;while(t.previousSibling){t=t.previousSibling;e++}return e}function Nd(t){const e=[];while(t&&t.nodeType!=Node.DOCUMENT_NODE){e.unshift(t);t=t.parentNode}return e}function Md(t,e){const i=Nd(t);const n=Nd(e);let o=0;while(i[o]==n[o]&&i[o]){o++}return o===0?null:i[o-1]}const Bd=sd(document);class zd{constructor(t,e={}){this.document=t;this.blockFillerMode=e.blockFillerMode||"br";this.preElements=["pre"];this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption"];this._blockFiller=this.blockFillerMode=="br"?sd:rd;this._domToViewMapping=new WeakMap;this._viewToDomMapping=new WeakMap;this._fakeSelectionMapping=new WeakMap}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new gl(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e);this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t);this._viewToDomMapping.delete(e);for(const e of Array.from(t.childNodes)){this.unbindDomElement(e)}}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e);this._viewToDomMapping.set(e,t)}viewToDom(t,e,i={}){if(t.is("text")){const i=this._processDataFromViewText(t);return e.createTextNode(i)}else{if(this.mapViewToDom(t)){return this.mapViewToDom(t)}let n;if(t.is("documentFragment")){n=e.createDocumentFragment();if(i.bind){this.bindDocumentFragments(n,t)}}else if(t.is("uiElement")){n=t.render(e);if(i.bind){this.bindElements(n,t)}return n}else{if(t.hasAttribute("xmlns")){n=e.createElementNS(t.getAttribute("xmlns"),t.name)}else{n=e.createElement(t.name)}if(i.bind){this.bindElements(n,t)}for(const e of t.getAttributeKeys()){n.setAttribute(e,t.getAttribute(e))}}if(i.withChildren||i.withChildren===undefined){for(const o of this.viewChildrenToDom(t,e,i)){n.appendChild(o)}}return n}}*viewChildrenToDom(t,e,i={}){const n=t.getFillerOffset&&t.getFillerOffset();let o=0;for(const r of t.getChildren()){if(n===o){yield this._blockFiller(e)}yield this.viewToDom(r,e,i);o++}if(n===o){yield this._blockFiller(e)}}viewRangeToDom(t){const e=this.viewPositionToDom(t.start);const i=this.viewPositionToDom(t.end);const n=document.createRange();n.setStart(e.parent,e.offset);n.setEnd(i.parent,i.offset);return n}viewPositionToDom(t){const e=t.parent;if(e.is("text")){const i=this.findCorrespondingDomText(e);if(!i){return null}let n=t.offset;if(ld(i)){n+=ad}return{parent:i,offset:n}}else{let i,n,o;if(t.offset===0){i=this.mapViewToDom(e);if(!i){return null}o=i.childNodes[0]}else{const e=t.nodeBefore;n=e.is("text")?this.findCorrespondingDomText(e):this.mapViewToDom(t.nodeBefore);if(!n){return null}i=n.parentNode;o=n.nextSibling}if(od(o)&&ld(o)){return{parent:o,offset:ad}}const r=n?Vd(n)+1:0;return{parent:i,offset:r}}}domToView(t,e={}){if(this.isBlockFiller(t,this.blockFillerMode)){return null}const i=this.getParentUIElement(t,this._domToViewMapping);if(i){return i}if(od(t)){if(dd(t)){return null}else{const e=this._processDataFromDomText(t);return e===""?null:new Ls(this.document,e)}}else if(this.isComment(t)){return null}else{if(this.mapDomToView(t)){return this.mapDomToView(t)}let i;if(this.isDocumentFragment(t)){i=new ql(this.document);if(e.bind){this.bindDocumentFragments(t,i)}}else{const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();i=new zc(this.document,n);if(e.bind){this.bindElements(t,i)}const o=t.attributes;for(let t=o.length-1;t>=0;t--){i._setAttribute(o[t].name,o[t].value)}}if(e.withChildren||e.withChildren===undefined){for(const n of this.domChildrenToView(t,e)){i._appendChild(n)}}return i}}*domChildrenToView(t,e={}){for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];const o=this.domToView(n,e);if(o!==null){yield o}}}domSelectionToView(t){if(t.rangeCount===1){let e=t.getRangeAt(0).startContainer;if(od(e)){e=e.parentNode}const i=this.fakeSelectionToView(e);if(i){return i}}const e=this.isDomSelectionBackward(t);const i=[];for(let e=0;e<t.rangeCount;e++){const n=t.getRangeAt(e);const o=this.domRangeToView(n);if(o){i.push(o)}}return new gl(i,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset);const i=this.domPositionToView(t.endContainer,t.endOffset);if(e&&i){return new ul(e,i)}return null}domPositionToView(t,e){if(this.isBlockFiller(t,this.blockFillerMode)){return this.domPositionToView(t.parentNode,Vd(t))}const i=this.mapDomToView(t);if(i&&i.is("uiElement")){return dl._createBefore(i)}if(od(t)){if(dd(t)){return this.domPositionToView(t.parentNode,Vd(t))}const i=this.findCorrespondingViewText(t);let n=e;if(!i){return null}if(ld(t)){n-=ad;n=n<0?0:n}return new dl(i,n)}else{if(e===0){const e=this.mapDomToView(t);if(e){return new dl(e,0)}}else{const i=t.childNodes[e-1];const n=od(i)?this.findCorrespondingViewText(i):this.mapDomToView(i);if(n&&n.parent){return new dl(n.parent,n.index+1)}}return null}}mapDomToView(t){return this.getParentUIElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(dd(t)){return null}const e=this.getParentUIElement(t);if(e){return e}const i=t.previousSibling;if(i){if(!this.isElement(i)){return null}const t=this.mapDomToView(i);if(t){const e=t.nextSibling;if(e instanceof Ls){return t.nextSibling}else{return null}}}else{const e=this.mapDomToView(t.parentNode);if(e){const t=e.getChild(0);if(t instanceof Ls){return t}else{return null}}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;if(e&&this.mapViewToDom(e)){return this.mapViewToDom(e).nextSibling}if(!e&&t.parent&&this.mapViewToDom(t.parent)){return this.mapViewToDom(t.parent).childNodes[0]}return null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:t,scrollY:i}=Id.window;const n=[];Fd(e,t=>{const{scrollLeft:e,scrollTop:i}=t;n.push([e,i])});e.focus();Fd(e,t=>{const[e,i]=n.shift();t.scrollLeft=e;t.scrollTop=i});Id.window.scrollTo(t,i)}}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(t){return t&&t.nodeType==Node.COMMENT_NODE}isBlockFiller(t){if(this.blockFillerMode=="br"){return t.isEqualNode(Bd)}if(t.tagName==="BR"&&jd(t,this.blockElements)&&t.parentNode.childNodes.length===1){return true}return Dd(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed){return false}const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset);e.setEnd(t.focusNode,t.focusOffset);const i=e.collapsed;e.detach();return i}getParentUIElement(t){const e=Nd(t);e.pop();while(e.length){const t=e.pop();const i=this._domToViewMapping.get(t);if(i&&i.is("uiElement")){return i}}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}_isDomSelectionPositionCorrect(t,e){if(od(t)&&ld(t)&&e<ad){return false}if(this.isElement(t)&&ld(t.childNodes[e])){return false}const i=this.mapDomToView(t);if(i&&i.is("uiElement")){return false}return true}_processDataFromViewText(t){let e=t.data;if(t.getAncestors().some(t=>this.preElements.includes(t.name))){return e}if(e.charAt(0)==" "){const i=this._getTouchingViewTextNode(t,false);const n=i&&this._nodeEndsWithSpace(i);if(n||!i){e=""+e.substr(1)}}if(e.charAt(e.length-1)==" "){const i=this._getTouchingViewTextNode(t,true);if(e.charAt(e.length-2)==" "||!i||i.data.charAt(0)==" "){e=e.substr(0,e.length-1)+""}}return e.replace(/ {2}/g," ")}_nodeEndsWithSpace(t){if(t.getAncestors().some(t=>this.preElements.includes(t.name))){return false}const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_processDataFromDomText(t){let e=t.data;if(Ld(t,this.preElements)){return ud(t)}e=e.replace(/[ \n\t\r]{1,}/g," ");const i=this._getTouchingInlineDomNode(t,false);const n=this._getTouchingInlineDomNode(t,true);const o=this._checkShouldLeftTrimDomText(i);const r=this._checkShouldRightTrimDomText(t,n);if(o){e=e.replace(/^ /,"")}if(r){e=e.replace(/ $/,"")}e=ud(new Text(e));e=e.replace(/ \u00A0/g,"  ");if(/( |\u00A0)\u00A0$/.test(e)||!n||n.data&&n.data.charAt(0)==" "){e=e.replace(/\u00A0$/," ")}if(o){e=e.replace(/^\u00A0/," ")}return e}_checkShouldLeftTrimDomText(t){if(!t){return true}if(Kr(t)){return true}return/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1))}_checkShouldRightTrimDomText(t,e){if(e){return false}return!ld(t)}_getTouchingViewTextNode(t,e){const i=new ll({startPosition:e?dl._createAfter(t):dl._createBefore(t),direction:e?"forward":"backward"});for(const t of i){if(t.item.is("containerElement")){return null}else if(t.item.is("br")){return null}else if(t.item.is("textProxy")){return t.item}}return null}_getTouchingInlineDomNode(t,e){if(!t.parentNode){return null}const i=e?"nextNode":"previousNode";const n=t.ownerDocument;const o=Nd(t)[0];const r=n.createTreeWalker(o,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(t){if(od(t)){return NodeFilter.FILTER_ACCEPT}if(t.tagName=="BR"){return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}});r.currentNode=t;const s=r[i]();if(s!==null){const e=Md(t,s);if(e&&!Ld(t,this.blockElements,e)&&!Ld(s,this.blockElements,e)){return s}}return null}}function Ld(t,e,i){let n=Nd(t);if(i){n=n.slice(n.indexOf(i)+1)}return n.some(t=>t.tagName&&e.includes(t.tagName.toLowerCase()))}function Fd(t,e){while(t&&t!=Id.document){e(t);t=t.parentNode}}function Dd(t,e){const i=od(t)&&t.data=="";return i&&jd(t,e)&&t.parentNode.childNodes.length===1}function jd(t,e){const i=t.parentNode;return i&&i.tagName&&e.includes(i.tagName.toLowerCase())}function Hd(t){const e=Object.prototype.toString.apply(t);if(e=="[object Window]"){return true}if(e=="[object global]"){return true}return false}const Wd=qc({},ds,{listenTo(t,...e){if(xd(t)||Hd(t)){const i=this._getProxyEmitter(t)||new Ud(t);i.attach(...e);t=i}ds.listenTo.call(this,t,...e)},stopListening(t,e,i){if(xd(t)||Hd(t)){const e=this._getProxyEmitter(t);if(!e){return}t=e}ds.stopListening.call(this,t,e,i);if(t instanceof Ud){t.detach(e)}},_getProxyEmitter(t){return us(this,$d(t))}});var qd=Wd;class Ud{constructor(t){hs(this,$d(t));this._domNode=t}}qc(Ud.prototype,ds,{attach(t,e,i={}){if(this._domListeners&&this._domListeners[t]){return}const n=this._createDomListener(t,!!i.useCapture);this._domNode.addEventListener(t,n,!!i.useCapture);if(!this._domListeners){this._domListeners={}}this._domListeners[t]=n},detach(t){let e;if(this._domListeners[t]&&(!(e=this._events[t])||!e.callbacks.length)){this._domListeners[t].removeListener()}},_createDomListener(t,e){const i=e=>{this.fire(t,e)};i.removeListener=()=>{this._domNode.removeEventListener(t,i,e);delete this._domListeners[t]};return i}});function $d(t){return t["data-ck-expando"]||(t["data-ck-expando"]=is())}class Gd{constructor(t){this.view=t;this.document=t.document;this.isEnabled=false}enable(){this.isEnabled=true}disable(){this.isEnabled=false}destroy(){this.disable();this.stopListening()}}vs(Gd,qd);var Kd="__lodash_hash_undefined__";function Jd(t){this.__data__.set(t,Kd);return this}var Yd=Jd;function Qd(t){return this.__data__.has(t)}var Xd=Qd;function Zd(t){var e=-1,i=t==null?0:t.length;this.__data__=new _e;while(++e<i){this.add(t[e])}}Zd.prototype.add=Zd.prototype.push=Yd;Zd.prototype.has=Xd;var tu=Zd;function eu(t,e){var i=-1,n=t==null?0:t.length;while(++i<n){if(e(t[i],i,t)){return true}}return false}var iu=eu;function nu(t,e){return t.has(e)}var ou=nu;var ru=1,su=2;function au(t,e,i,n,o,r){var s=i&ru,a=t.length,c=e.length;if(a!=c&&!(s&&c>a)){return false}var l=r.get(t);if(l&&r.get(e)){return l==e}var d=-1,u=true,h=i&su?new tu:undefined;r.set(t,e);r.set(e,t);while(++d<a){var f=t[d],g=e[d];if(n){var m=s?n(g,f,d,e,t,r):n(f,g,d,t,e,r)}if(m!==undefined){if(m){continue}u=false;break}if(h){if(!iu(e,(function(t,e){if(!ou(h,e)&&(f===t||o(f,t,i,n,r))){return h.push(e)}}))){u=false;break}}else if(!(f===g||o(f,g,i,n,r))){u=false;break}}r["delete"](t);r["delete"](e);return u}var cu=au;function lu(t){var e=-1,i=Array(t.size);t.forEach((function(t,n){i[++e]=[n,t]}));return i}var du=lu;function uu(t){var e=-1,i=Array(t.size);t.forEach((function(t){i[++e]=t}));return i}var hu=uu;var fu=1,gu=2;var mu="[object Boolean]",pu="[object Date]",bu="[object Error]",wu="[object Map]",ku="[object Number]",_u="[object RegExp]",vu="[object Set]",yu="[object String]",xu="[object Symbol]";var Cu="[object ArrayBuffer]",Au="[object DataView]";var Tu=r?r.prototype:undefined,Pu=Tu?Tu.valueOf:undefined;function Su(t,e,i,n,o,r,s){switch(i){case Au:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset){return false}t=t.buffer;e=e.buffer;case Cu:if(t.byteLength!=e.byteLength||!r(new fo(t),new fo(e))){return false}return true;case mu:case pu:case ku:return L(+t,+e);case bu:return t.name==e.name&&t.message==e.message;case _u:case yu:return t==e+"";case wu:var a=du;case vu:var c=n&fu;a||(a=hu);if(t.size!=e.size&&!c){return false}var l=s.get(t);if(l){return l==e}n|=gu;s.set(t,e);var d=cu(a(t),a(e),n,o,r,s);s["delete"](t);return d;case xu:if(Pu){return Pu.call(t)==Pu.call(e)}}return false}var Eu=Su;var Ru=1;var Ou=Object.prototype;var Iu=Ou.hasOwnProperty;function Vu(t,e,i,n,o,r){var s=i&Ru,a=zn(t),c=a.length,l=zn(e),d=l.length;if(c!=d&&!s){return false}var u=c;while(u--){var h=a[u];if(!(s?h in e:Iu.call(e,h))){return false}}var f=r.get(t);if(f&&r.get(e)){return f==e}var g=true;r.set(t,e);r.set(e,t);var m=s;while(++u<c){h=a[u];var p=t[h],b=e[h];if(n){var w=s?n(b,p,h,e,t,r):n(p,b,h,t,e,r)}if(!(w===undefined?p===b||o(p,b,i,n,r):w)){g=false;break}m||(m=h=="constructor")}if(g&&!m){var k=t.constructor,_=e.constructor;if(k!=_&&("constructor"in t&&"constructor"in e)&&!(typeof k=="function"&&k instanceof k&&typeof _=="function"&&_ instanceof _)){g=false}}r["delete"](t);r["delete"](e);return g}var Nu=Vu;var Mu=1;var Bu="[object Arguments]",zu="[object Array]",Lu="[object Object]";var Fu=Object.prototype;var Du=Fu.hasOwnProperty;function ju(t,e,i,n,o,r){var s=Je(t),a=Je(e),c=s?zu:so(t),l=a?zu:so(e);c=c==Bu?Lu:c;l=l==Bu?Lu:l;var d=c==Lu,u=l==Lu,h=c==l;if(h&&Object(Ye["a"])(t)){if(!Object(Ye["a"])(e)){return false}s=true;d=false}if(h&&!d){r||(r=new Ae);return s||Bi(t)?cu(t,e,i,n,o,r):Eu(t,e,c,i,n,o,r)}if(!(i&Mu)){var f=d&&Du.call(t,"__wrapped__"),g=u&&Du.call(e,"__wrapped__");if(f||g){var m=f?t.value():t,p=g?e.value():e;r||(r=new Ae);return o(m,p,i,n,r)}}if(!h){return false}r||(r=new Ae);return Nu(t,e,i,n,o,r)}var Hu=ju;function Wu(t,e,i,n,o){if(t===e){return true}if(t==null||e==null||!T(t)&&!T(e)){return t!==t&&e!==e}return Hu(t,e,i,n,Wu,o)}var qu=Wu;function Uu(t,e,i){i=typeof i=="function"?i:undefined;var n=i?i(t,e):undefined;return n===undefined?qu(t,e,undefined,i):!!n}var $u=Uu;class Gu extends Gd{constructor(t){super(t);this._config={childList:true,characterData:true,characterDataOldValue:true,subtree:true};this.domConverter=t.domConverter;this.renderer=t._renderer;this._domElements=[];this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.push(t);if(this.isEnabled){this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const t of this._domElements){this._mutationObserver.observe(t,this._config)}}disable(){super.disable();this._mutationObserver.disconnect()}destroy(){super.destroy();this._mutationObserver.disconnect()}_onMutations(t){if(t.length===0){return}const e=this.domConverter;const i=new Map;const n=new Set;for(const i of t){if(i.type==="childList"){const t=e.mapDomToView(i.target);if(t&&t.is("uiElement")){continue}if(t&&!this._isBogusBrMutation(i)){n.add(t)}}}for(const o of t){const t=e.mapDomToView(o.target);if(t&&t.is("uiElement")){continue}if(o.type==="characterData"){const t=e.findCorrespondingViewText(o.target);if(t&&!n.has(t.parent)){i.set(t,{type:"text",oldText:t.data,newText:ud(o.target),node:t})}else if(!t&&ld(o.target)){n.add(e.mapDomToView(o.target.parentNode))}}}const o=[];for(const t of i.values()){this.renderer.markToSync("text",t.node);o.push(t)}for(const t of n){const i=e.mapViewToDom(t);const n=Array.from(t.getChildren());const r=Array.from(e.domChildrenToView(i,{withChildren:false}));if(!$u(n,r,a)){this.renderer.markToSync("children",t);o.push({type:"children",oldChildren:n,newChildren:r,node:t})}}const r=t[0].target.ownerDocument.getSelection();let s=null;if(r&&r.anchorNode){const t=e.domPositionToView(r.anchorNode,r.anchorOffset);const i=e.domPositionToView(r.focusNode,r.focusOffset);if(t&&i){s=new gl(t);s.setFocus(i)}}if(o.length){this.document.fire("mutations",o,s);this.view.forceRender()}function a(t,e){if(Array.isArray(t)){return}if(t===e){return true}else if(t.is("text")&&e.is("text")){return t.data===e.data}return false}}_isBogusBrMutation(t){let e=null;if(t.nextSibling===null&&t.removedNodes.length===0&&t.addedNodes.length==1){e=this.domConverter.domToView(t.addedNodes[0],{withChildren:false})}return e&&e.is("element","br")}}class Ku{constructor(t,e,i){this.view=t;this.document=t.document;this.domEvent=e;this.domTarget=e.target;qc(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Ju extends Gd{constructor(t){super(t);this.useCapture=false}observe(t){const e=typeof this.domEventType=="string"?[this.domEventType]:this.domEventType;e.forEach(e=>{this.listenTo(t,e,(t,e)=>{if(this.isEnabled){this.onDomEvent(e)}},{useCapture:this.useCapture})})}fire(t,e,i){if(this.isEnabled){this.document.fire(t,new Ku(this.view,e,i))}}}class Yu extends Ju{constructor(t){super(t);this.domEventType=["keydown","keyup"]}onDomEvent(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,get keystroke(){return Ml(this)}})}}var Qu=function(){return n["a"].Date.now()};var Xu=Qu;var Zu=0/0;var th=/^\s+|\s+$/g;var eh=/^[-+]0x[0-9a-f]+$/i;var ih=/^0b[01]+$/i;var nh=/^0o[0-7]+$/i;var oh=parseInt;function rh(t){if(typeof t=="number"){return t}if(Qs(t)){return Zu}if(ct(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ct(e)?e+"":e}if(typeof t!="string"){return t===0?t:+t}t=t.replace(th,"");var i=ih.test(t);return i||nh.test(t)?oh(t.slice(2),i?2:8):eh.test(t)?Zu:+t}var sh=rh;var ah="Expected a function";var ch=Math.max,lh=Math.min;function dh(t,e,i){var n,o,r,s,a,c,l=0,d=false,u=false,h=true;if(typeof t!="function"){throw new TypeError(ah)}e=sh(e)||0;if(ct(i)){d=!!i.leading;u="maxWait"in i;r=u?ch(sh(i.maxWait)||0,e):r;h="trailing"in i?!!i.trailing:h}function f(e){var i=n,r=o;n=o=undefined;l=e;s=t.apply(r,i);return s}function g(t){l=t;a=setTimeout(b,e);return d?f(t):s}function m(t){var i=t-c,n=t-l,o=e-i;return u?lh(o,r-n):o}function p(t){var i=t-c,n=t-l;return c===undefined||i>=e||i<0||u&&n>=r}function b(){var t=Xu();if(p(t)){return w(t)}a=setTimeout(b,m(t))}function w(t){a=undefined;if(h&&n){return f(t)}n=o=undefined;return s}function k(){if(a!==undefined){clearTimeout(a)}l=0;n=c=o=a=undefined}function _(){return a===undefined?s:w(Xu())}function v(){var t=Xu(),i=p(t);n=arguments;o=this;c=t;if(i){if(a===undefined){return g(c)}if(u){clearTimeout(a);a=setTimeout(b,e);return f(c)}}if(a===undefined){a=setTimeout(b,e)}return s}v.cancel=k;v.flush=_;return v}var uh=dh;class hh extends Gd{constructor(t){super(t);this._fireSelectionChangeDoneDebounced=uh(t=>this.document.fire("selectionChangeDone",t),200)}observe(){const t=this.document;t.on("keydown",(e,i)=>{const n=t.selection;if(n.isFake&&fh(i.keyCode)&&this.isEnabled){i.preventDefault();this._handleSelectionMove(i.keyCode)}},{priority:"lowest"})}destroy(){super.destroy();this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection;const i=new gl(e.getRanges(),{backward:e.isBackward,fake:false});if(t==Nl.arrowleft||t==Nl.arrowup){i.setTo(i.getFirstPosition())}if(t==Nl.arrowright||t==Nl.arrowdown){i.setTo(i.getLastPosition())}const n={oldSelection:e,newSelection:i,domSelection:null};this.document.fire("selectionChange",n);this._fireSelectionChangeDoneDebounced(n)}}function fh(t){return t==Nl.arrowright||t==Nl.arrowleft||t==Nl.arrowup||t==Nl.arrowdown}class gh extends Gd{constructor(t){super(t);this.mutationObserver=t.getObserver(Gu);this.selection=this.document.selection;this.domConverter=t.domConverter;this._documents=new WeakSet;this._fireSelectionChangeDoneDebounced=uh(t=>this.document.fire("selectionChangeDone",t),200);this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3);this._loopbackCounter=0}observe(t){const e=t.ownerDocument;if(this._documents.has(e)){return}this.listenTo(e,"selectionchange",()=>{this._handleSelectionChange(e)});this._documents.add(e)}destroy(){super.destroy();clearInterval(this._clearInfiniteLoopInterval);this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(t){if(!this.isEnabled){return}this.mutationObserver.flush();const e=t.defaultView.getSelection();const i=this.domConverter.domSelectionToView(e);if(i.rangeCount==0){return}if(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(e)){return}if(++this._loopbackCounter>60){return}if(this.selection.isSimilar(i)){this.view.forceRender()}else{const t={oldSelection:this.selection,newSelection:i,domSelection:e};this.document.fire("selectionChange",t);this._fireSelectionChangeDoneDebounced(t)}}_clearInfiniteLoop(){this._loopbackCounter=0}}class mh extends Ju{constructor(t){super(t);this.domEventType=["focus","blur"];this.useCapture=true;const e=this.document;e.on("focus",()=>{e.isFocused=true;this._renderTimeoutId=setTimeout(()=>t.forceRender(),50)});e.on("blur",(i,n)=>{const o=e.selection.editableElement;if(o===null||o===n.target){e.isFocused=false;t.forceRender()}})}onDomEvent(t){this.fire(t.type,t)}destroy(){if(this._renderTimeoutId){clearTimeout(this._renderTimeoutId)}super.destroy()}}class ph extends Ju{constructor(t){super(t);this.domEventType=["compositionstart","compositionupdate","compositionend"];const e=this.document;e.on("compositionstart",()=>{e.isComposing=true});e.on("compositionend",()=>{e.isComposing=false})}onDomEvent(t){this.fire(t.type,t)}}class bh extends Ju{constructor(t){super(t);this.domEventType=["beforeinput"]}onDomEvent(t){this.fire(t.type,t)}}function wh(t){return Object.prototype.toString.apply(t)=="[object Range]"}function kh(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}const _h=["top","right","bottom","left","width","height"];class vh{constructor(t){const e=wh(t);Object.defineProperty(this,"_source",{value:t._source||t,writable:true,enumerable:false});if(Kr(t)||e){if(e){yh(this,vh.getDomRangeRects(t)[0])}else{yh(this,t.getBoundingClientRect())}}else if(Hd(t)){const{innerWidth:e,innerHeight:i}=t;yh(this,{top:0,right:e,bottom:i,left:0,width:e,height:i})}else{yh(this,t)}}clone(){return new vh(this)}moveTo(t,e){this.top=e;this.right=t+this.width;this.bottom=e+this.height;this.left=t;return this}moveBy(t,e){this.top+=e;this.right+=t;this.left+=t;this.bottom+=e;return this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};e.width=e.right-e.left;e.height=e.bottom-e.top;if(e.width<0||e.height<0){return null}else{return new vh(e)}}getIntersectionArea(t){const e=this.getIntersection(t);if(e){return e.getArea()}else{return 0}}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(!xh(t)){let i=t.parentNode||t.commonAncestorContainer;while(i&&!xh(i)){const t=new vh(i);const n=e.getIntersection(t);if(n){if(n.getArea()<e.getArea()){e=n}}else{return null}i=i.parentNode}}return e}isEqual(t){for(const e of _h){if(this[e]!==t[e]){return false}}return true}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}excludeScrollbarsAndBorders(){const t=this._source;let e,i,n;if(Hd(t)){e=t.innerWidth-t.document.documentElement.clientWidth;i=t.innerHeight-t.document.documentElement.clientHeight;n=t.getComputedStyle(t.document.documentElement).direction}else{const o=kh(this._source);e=t.offsetWidth-t.clientWidth-o.left-o.right;i=t.offsetHeight-t.clientHeight-o.top-o.bottom;n=t.ownerDocument.defaultView.getComputedStyle(t).direction;this.left+=o.left;this.top+=o.top;this.right-=o.right;this.bottom-=o.bottom;this.width=this.right-this.left;this.height=this.bottom-this.top}this.width-=e;if(n==="ltr"){this.right-=e}else{this.left+=e}this.height-=i;this.bottom-=i;return this}static getDomRangeRects(t){const e=[];const i=Array.from(t.getClientRects());if(i.length){for(const t of i){e.push(new vh(t))}}else{let i=t.startContainer;if(od(i)){i=i.parentNode}const n=new vh(i.getBoundingClientRect());n.right=n.left;n.width=0;e.push(n)}return e}}function yh(t,e){for(const i of _h){t[i]=e[i]}}function xh(t){if(!Kr(t)){return false}return t===t.ownerDocument.body}const Ch={};function Ah({target:t,viewportOffset:e=0}){const i=Vh(t);let n=i;let o=null;while(n){let r;if(n==i){r=Nh(t)}else{r=Nh(o)}Sh(r,()=>Mh(t,n));const s=Mh(t,n);Ph(n,s,e);if(n.parent!=n){o=n.frameElement;n=n.parent;if(!o){return}}else{n=null}}}function Th(t){const e=Nh(t);Sh(e,()=>new vh(t))}Object.assign(Ch,{scrollViewportToShowTarget:Ah,scrollAncestorsToShowTarget:Th});function Ph(t,e,i){const n=e.clone().moveBy(0,i);const o=e.clone().moveBy(0,-i);const r=new vh(t).excludeScrollbarsAndBorders();const s=[o,n];if(!s.every(t=>r.contains(t))){let{scrollX:s,scrollY:a}=t;if(Rh(o,r)){a-=r.top-e.top+i}else if(Eh(n,r)){a+=e.bottom-r.bottom+i}if(Oh(e,r)){s-=r.left-e.left+i}else if(Ih(e,r)){s+=e.right-r.right+i}t.scrollTo(s,a)}}function Sh(t,e){const i=Vh(t);let n,o;while(t!=i.document.body){o=e();n=new vh(t).excludeScrollbarsAndBorders();if(!n.contains(o)){if(Rh(o,n)){t.scrollTop-=n.top-o.top}else if(Eh(o,n)){t.scrollTop+=o.bottom-n.bottom}if(Oh(o,n)){t.scrollLeft-=n.left-o.left}else if(Ih(o,n)){t.scrollLeft+=o.right-n.right}}t=t.parentNode}}function Eh(t,e){return t.bottom>e.bottom}function Rh(t,e){return t.top<e.top}function Oh(t,e){return t.left<e.left}function Ih(t,e){return t.right>e.right}function Vh(t){if(wh(t)){return t.startContainer.ownerDocument.defaultView}else{return t.ownerDocument.defaultView}}function Nh(t){if(wh(t)){let e=t.commonAncestorContainer;if(od(e)){e=e.parentNode}return e}else{return t.parentNode}}function Mh(t,e){const i=Vh(t);const n=new vh(t);if(i===e){return n}else{let t=i;while(t!=e){const e=t.frameElement;const i=new vh(e).excludeScrollbarsAndBorders();n.moveBy(i.left,i.top);t=t.parent}}return n}class Bh{constructor(t){this.document=new pl(t);this.domConverter=new zd(this.document);this.domRoots=new Map;this.set("isRenderingInProgress",false);this._renderer=new Cd(this.domConverter,this.document.selection);this._renderer.bind("isFocused").to(this.document);this._initialDomRootAttributes=new WeakMap;this._observers=new Map;this._ongoingChange=false;this._postFixersInProgress=false;this._renderingDisabled=false;this._hasChangedSinceTheLastRendering=false;this._writer=new $l(this.document);this.addObserver(Gu);this.addObserver(gh);this.addObserver(mh);this.addObserver(Yu);this.addObserver(hh);this.addObserver(ph);if(Al.isAndroid){this.addObserver(bh)}hd(this);jl(this);this.on("render",()=>{this._render();this.document.fire("layoutChanged");this._hasChangedSinceTheLastRendering=false});this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=true})}attachDomRoot(t,e="main"){const i=this.document.getRoot(e);i._name=t.tagName.toLowerCase();const n={};for(const{name:e,value:o}of Array.from(t.attributes)){n[e]=o;if(e==="class"){this._writer.addClass(o.split(" "),i)}else{this._writer.setAttribute(e,o,i)}}this._initialDomRootAttributes.set(t,n);const o=()=>{this._writer.setAttribute("contenteditable",!i.isReadOnly,i);if(i.isReadOnly){this._writer.addClass("ck-read-only",i)}else{this._writer.removeClass("ck-read-only",i)}};o();this.domRoots.set(e,t);this.domConverter.bindElements(t,i);this._renderer.markToSync("children",i);this._renderer.markToSync("attributes",i);this._renderer.domDocuments.add(t.ownerDocument);i.on("change:children",(t,e)=>this._renderer.markToSync("children",e));i.on("change:attributes",(t,e)=>this._renderer.markToSync("attributes",e));i.on("change:text",(t,e)=>this._renderer.markToSync("text",e));i.on("change:isReadOnly",()=>this.change(o));i.on("change",()=>{this._hasChangedSinceTheLastRendering=true});for(const i of this._observers.values()){i.observe(t,e)}}detachDomRoot(t){const e=this.domRoots.get(t);Array.from(e.attributes).forEach(({name:t})=>e.removeAttribute(t));const i=this._initialDomRootAttributes.get(e);for(const t in i){e.setAttribute(t,i[t])}this.domRoots.delete(t);this.domConverter.unbindDomElement(e)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let e=this._observers.get(t);if(e){return e}e=new t(this);this._observers.set(t,e);for(const[t,i]of this.domRoots){e.observe(i,t)}e.enable();return e}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values()){t.disable()}}enableObservers(){for(const t of this._observers.values()){t.enable()}}scrollToTheSelection(){const t=this.document.selection.getFirstRange();if(t){Ah({target:this.domConverter.viewRangeToDom(t),viewportOffset:20})}}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;if(t){this.domConverter.focus(t);this.forceRender()}else{}}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress){throw new ss["b"]("cannot-change-view-tree: "+"Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. "+"This may cause some unexpected behavior and inconsistency between the DOM and the view.",this)}try{if(this._ongoingChange){return t(this._writer)}this._ongoingChange=true;const e=t(this._writer);this._ongoingChange=false;if(!this._renderingDisabled&&this._hasChangedSinceTheLastRendering){this._postFixersInProgress=true;this.document._callPostFixers(this._writer);this._postFixersInProgress=false;this.fire("render")}return e}catch(t){ss["b"].rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=true;this.change(()=>{})}destroy(){for(const t of this._observers.values()){t.destroy()}this.document.destroy();this.stopListening()}createPositionAt(t,e){return dl._createAt(t,e)}createPositionAfter(t){return dl._createAfter(t)}createPositionBefore(t){return dl._createBefore(t)}createRange(t,e){return new ul(t,e)}createRangeOn(t){return ul._createOn(t)}createRangeIn(t){return ul._createIn(t)}createSelection(t,e,i){return new gl(t,e,i)}_disableRendering(t){this._renderingDisabled=t;if(t==false){this.change(()=>{})}}_render(){this.isRenderingInProgress=true;this.disableObservers();this._renderer.render();this.enableObservers();this.isRenderingInProgress=false}}vs(Bh,Jc);class zh{constructor(t){this.parent=null;this._attrs=Hs(t)}get index(){let t;if(!this.parent){return null}if((t=this.parent.getChildIndex(this))===null){throw new ss["b"]("model-node-not-found-in-parent: The node's parent does not contain this node.",this)}return t}get startOffset(){let t;if(!this.parent){return null}if((t=this.parent.getChildStartOffset(this))===null){throw new ss["b"]("model-node-not-found-in-parent: The node's parent does not contain this node.",this)}return t}get offsetSize(){return 1}get endOffset(){if(!this.parent){return null}return this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;while(t.parent){t=t.parent}return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;while(e.parent){t.unshift(e.startOffset);e=e.parent}return t}getAncestors(t={includeSelf:false,parentFirst:false}){const e=[];let i=t.includeSelf?this:this.parent;while(i){e[t.parentFirst?"push":"unshift"](i);i=i.parent}return e}getCommonAncestor(t,e={}){const i=this.getAncestors(e);const n=t.getAncestors(e);let o=0;while(i[o]==n[o]&&i[o]){o++}return o===0?null:i[o-1]}isBefore(t){if(this==t){return false}if(this.root!==t.root){return false}const e=this.getPath();const i=t.getPath();const n=Vs(e,i);switch(n){case"prefix":return true;case"extension":return false;default:return e[n]<i[n]}}isAfter(t){if(this==t){return false}if(this.root!==t.root){return false}return!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};if(this._attrs.size){t.attributes=Array.from(this._attrs).reduce((t,e)=>{t[e[0]]=e[1];return t},{})}return t}is(t){return t=="node"||t=="model:node"}_clone(){return new zh(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Hs(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}class Lh extends zh{constructor(t,e){super(e);this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}is(t){return t=="text"||t=="model:text"||super.is(t)}toJSON(){const t=super.toJSON();t.data=this.data;return t}_clone(){return new Lh(this.data,this.getAttributes())}static fromJSON(t){return new Lh(t.data,t.attributes)}}class Fh{constructor(t,e,i){this.textNode=t;if(e<0||e>t.offsetSize){throw new ss["b"]("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this)}if(i<0||e+i>t.offsetSize){throw new ss["b"]("model-textproxy-wrong-length: Given length value is incorrect.",this)}this.data=t.data.substring(e,e+i);this.offsetInText=e}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}is(t){return t=="textProxy"||t=="model:textProxy"}getPath(){const t=this.textNode.getPath();if(t.length>0){t[t.length-1]+=this.offsetInText}return t}getAncestors(t={includeSelf:false,parentFirst:false}){const e=[];let i=t.includeSelf?this:this.parent;while(i){e[t.parentFirst?"push":"unshift"](i);i=i.parent}return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class Dh{constructor(t){this._nodes=[];if(t){this._insertNodes(0,t)}}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((t,e)=>t+e.offsetSize,0)}getNode(t){return this._nodes[t]||null}getNodeIndex(t){const e=this._nodes.indexOf(t);return e==-1?null:e}getNodeStartOffset(t){const e=this.getNodeIndex(t);return e===null?null:this._nodes.slice(0,e).reduce((t,e)=>t+e.offsetSize,0)}indexToOffset(t){if(t==this._nodes.length){return this.maxOffset}const e=this._nodes[t];if(!e){throw new ss["b"]("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this)}return this.getNodeStartOffset(e)}offsetToIndex(t){let e=0;for(const i of this._nodes){if(t>=e&&t<e+i.offsetSize){return this.getNodeIndex(i)}e+=i.offsetSize}if(e!=t){throw new ss["b"]("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:t,nodeList:this})}return this.length}_insertNodes(t,e){for(const t of e){if(!(t instanceof zh)){throw new ss["b"]("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this)}}this._nodes.splice(t,0,...e)}_removeNodes(t,e=1){return this._nodes.splice(t,e)}toJSON(){return this._nodes.map(t=>t.toJSON())}}class jh extends zh{constructor(t,e,i){super(e);this.name=t;this._children=new Dh;if(i){this._insertChild(0,i)}}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}is(t,e=null){const i=t.replace(/^model:/,"");if(!e){return i=="element"||i==this.name||super.is(t)}else{return i=="element"&&e==this.name}}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const i of t){e=e.getChild(e.offsetToIndex(i))}return e}toJSON(){const t=super.toJSON();t.name=this.name;if(this._children.length>0){t.children=[];for(const e of this._children){t.children.push(e.toJSON())}}return t}_clone(t=false){const e=t?Array.from(this._children).map(t=>t._clone(true)):null;return new jh(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const i=Hh(e);for(const t of i){if(t.parent!==null){t._remove()}t.parent=this}this._children._insertNodes(t,i)}_removeChildren(t,e=1){const i=this._children._removeNodes(t,e);for(const t of i){t.parent=null}return i}static fromJSON(t){let e=null;if(t.children){e=[];for(const i of t.children){if(i.name){e.push(jh.fromJSON(i))}else{e.push(Lh.fromJSON(i))}}}return new jh(t.name,t.attributes,e)}}function Hh(t){if(typeof t=="string"){return[new Lh(t)]}if(!js(t)){t=[t]}return Array.from(t).map(t=>{if(typeof t=="string"){return new Lh(t)}if(t instanceof Fh){return new Lh(t.data,t.getAttributes())}return t})}class Wh{constructor(t={}){if(!t.boundaries&&!t.startPosition){throw new ss["b"]("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null)}const e=t.direction||"forward";if(e!="forward"&&e!="backward"){throw new ss["b"]("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",t,{direction:e})}this.direction=e;this.boundaries=t.boundaries||null;if(t.startPosition){this.position=t.startPosition.clone()}else{this.position=Uh._createAt(this.boundaries[this.direction=="backward"?"end":"start"])}this.position.stickiness="toNone";this.singleCharacters=!!t.singleCharacters;this.shallow=!!t.shallow;this.ignoreElementEnd=!!t.ignoreElementEnd;this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null;this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(t){let e,i,n,o;do{n=this.position;o=this._visitedParent;({done:e,value:i}=this.next())}while(!e&&t(i));if(!e){this.position=n;this._visitedParent=o}}next(){if(this.direction=="forward"){return this._next()}else{return this._previous()}}_next(){const t=this.position;const e=this.position.clone();const i=this._visitedParent;if(i.parent===null&&e.offset===i.maxOffset){return{done:true}}if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset){return{done:true}}const n=e.textNode?e.textNode:e.nodeAfter;if(n instanceof jh){if(!this.shallow){e.path.push(0);this._visitedParent=n}else{e.offset++}this.position=e;return qh("elementStart",n,t,e,1)}else if(n instanceof Lh){let o;if(this.singleCharacters){o=1}else{let t=n.endOffset;if(this._boundaryEndParent==i&&this.boundaries.end.offset<t){t=this.boundaries.end.offset}o=t-e.offset}const r=e.offset-n.startOffset;const s=new Fh(n,r,o);e.offset+=o;this.position=e;return qh("text",s,t,e,o)}else{e.path.pop();e.offset++;this.position=e;this._visitedParent=i.parent;if(this.ignoreElementEnd){return this._next()}else{return qh("elementEnd",i,t,e)}}}_previous(){const t=this.position;const e=this.position.clone();const i=this._visitedParent;if(i.parent===null&&e.offset===0){return{done:true}}if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset){return{done:true}}const n=e.textNode?e.textNode:e.nodeBefore;if(n instanceof jh){e.offset--;if(!this.shallow){e.path.push(n.maxOffset);this.position=e;this._visitedParent=n;if(this.ignoreElementEnd){return this._previous()}else{return qh("elementEnd",n,t,e)}}else{this.position=e;return qh("elementStart",n,t,e,1)}}else if(n instanceof Lh){let o;if(this.singleCharacters){o=1}else{let t=n.startOffset;if(this._boundaryStartParent==i&&this.boundaries.start.offset>t){t=this.boundaries.start.offset}o=e.offset-t}const r=e.offset-n.startOffset;const s=new Fh(n,r-o,o);e.offset-=o;this.position=e;return qh("text",s,t,e,o)}else{e.path.pop();this.position=e;this._visitedParent=i.parent;return qh("elementStart",i,t,e,1)}}}function qh(t,e,i,n,o){return{done:false,value:{type:t,item:e,previousPosition:i,nextPosition:n,length:o}}}class Uh{constructor(t,e,i="toNone"){if(!t.is("element")&&!t.is("documentFragment")){throw new ss["b"]("model-position-root-invalid: Position root invalid.",t)}if(!(e instanceof Array)||e.length===0){throw new ss["b"]("model-position-path-incorrect-format: Position path must be an array with at least one item.",t,{path:e})}e=t.getPath().concat(e);t=t.root;this.root=t;this.path=e;this.stickiness=i}get offset(){return Ca(this.path)}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++){t=t.getChild(t.offsetToIndex(this.path[e]));if(!t){throw new ss["b"]("model-position-path-incorrect: The position's path is incorrect.",this,{position:this})}}if(t.is("text")){throw new ss["b"]("model-position-path-incorrect: The position's path is incorrect.",this,{position:this})}return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){const t=this.parent.getChild(this.index);return t instanceof Lh&&t.startOffset<this.offset?t:null}get nodeAfter(){return this.textNode===null?this.parent.getChild(this.index):null}get nodeBefore(){return this.textNode===null?this.parent.getChild(this.index-1):null}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root){return"different"}const e=Vs(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const i=new Wh(e);i.skip(t);return i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){if(this.parent.is("documentFragment")){return[this.parent]}else{return this.parent.getAncestors({includeSelf:true})}}getCommonPath(t){if(this.root!=t.root){return[]}const e=Vs(this.path,t.path);const i=typeof e=="string"?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,i)}getCommonAncestor(t){const e=this.getAncestors();const i=t.getAncestors();let n=0;while(e[n]==i[n]&&e[n]){n++}return n===0?null:e[n-1]}getShiftedBy(t){const e=this.clone();const i=e.offset+t;e.offset=i<0?0:i;return e}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){let e=null;let i=null;const n=this.compareWith(t);switch(n){case"same":return true;case"before":e=Uh._createAt(this);i=Uh._createAt(t);break;case"after":e=Uh._createAt(t);i=Uh._createAt(this);break;default:return false}let o=e.parent;while(e.path.length+i.path.length){if(e.isEqual(i)){return true}if(e.path.length>i.path.length){if(e.offset!==o.maxOffset){return false}e.path=e.path.slice(0,-1);o=o.parent;e.offset++}else{if(i.offset!==0){return false}i.path=i.path.slice(0,-1)}}}is(t){return t=="position"||t=="model:position"}hasSameParentAs(t){if(this.root!==t.root){return false}const e=this.getParentPath();const i=t.getParentPath();return Vs(e,i)=="same"}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Uh._createAt(this);break}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;const i=e.containsPosition(this)||e.start.isEqual(this)&&this.stickiness=="toNext";if(i){return this._getCombined(t.splitPosition,t.moveTargetPosition)}else{if(t.graveyardPosition){return this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1)}else{return this._getTransformedByInsertion(t.insertionPosition,1)}}}_getTransformedByMergeOperation(t){const e=t.movedRange;const i=e.containsPosition(this)||e.start.isEqual(this);let n;if(i){n=this._getCombined(t.sourcePosition,t.targetPosition);if(t.sourcePosition.isBefore(t.targetPosition)){n=n._getTransformedByDeletion(t.deletionPosition,1)}}else if(this.isEqual(t.deletionPosition)){n=Uh._createAt(t.deletionPosition)}else{n=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1)}return n}_getTransformedByDeletion(t,e){const i=Uh._createAt(this);if(this.root!=t.root){return i}if(Vs(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+e>this.offset){return null}else{i.offset-=e}}}else if(Vs(t.getParentPath(),this.getParentPath())=="prefix"){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n]){return null}else{i.path[n]-=e}}}return i}_getTransformedByInsertion(t,e){const i=Uh._createAt(this);if(this.root!=t.root){return i}if(Vs(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious"){i.offset+=e}}else if(Vs(t.getParentPath(),this.getParentPath())=="prefix"){const n=t.path.length-1;if(t.offset<=this.path[n]){i.path[n]+=e}}return i}_getTransformedByMove(t,e,i){e=e._getTransformedByDeletion(t,i);if(t.isEqual(e)){return Uh._createAt(this)}const n=this._getTransformedByDeletion(t,i);const o=n===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious";if(o){return this._getCombined(t,e)}else{return n._getTransformedByInsertion(e,i)}}_getCombined(t,e){const i=t.path.length-1;const n=Uh._createAt(e);n.stickiness=this.stickiness;n.offset=n.offset+this.path[i]-t.offset;n.path=n.path.concat(this.path.slice(i+1));return n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,i="toNone"){if(t instanceof Uh){return new Uh(t.root,t.path,t.stickiness)}else{const n=t;if(e=="end"){e=n.maxOffset}else if(e=="before"){return this._createBefore(n,i)}else if(e=="after"){return this._createAfter(n,i)}else if(e!==0&&!e){throw new ss["b"]("model-createPositionAt-offset-required: "+"Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,t])}if(!n.is("element")&&!n.is("documentFragment")){throw new ss["b"]("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,t])}const o=n.getPath();o.push(e);return new this(n.root,o,i)}}static _createAfter(t,e){if(!t.parent){throw new ss["b"]("model-position-after-root: You cannot make a position after root.",[this,t],{root:t})}return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent){throw new ss["b"]("model-position-before-root: You cannot make a position before root.",t,{root:t})}return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if(t.root==="$graveyard"){const i=new Uh(e.graveyard,t.path);i.stickiness=t.stickiness;return i}if(!e.getRoot(t.root)){throw new ss["b"]("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",e,{rootName:t.root})}return new Uh(e.getRoot(t.root),t.path,t.stickiness)}}class $h{constructor(t,e=null){this.start=Uh._createAt(t);this.end=e?Uh._createAt(e):Uh._createAt(t);this.start.stickiness=this.isCollapsed?"toNone":"toNext";this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Wh({boundaries:this,ignoreElementEnd:true})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath();const e=this.end.getParentPath();return Vs(t,e)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=false){if(t.isCollapsed){e=false}const i=this.containsPosition(t.start)||e&&this.start.isEqual(t.start);const n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return i&&n}containsItem(t){const e=Uh._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}is(t){return t=="range"||t=="model:range"}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];if(this.isIntersecting(t)){if(this.containsPosition(t.start)){e.push(new $h(this.start,t.start))}if(this.containsPosition(t.end)){e.push(new $h(t.end,this.end))}}else{e.push(new $h(this.start,this.end))}return e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start;let i=this.end;if(this.containsPosition(t.start)){e=t.start}if(this.containsPosition(t.end)){i=t.end}return new $h(e,i)}return null}getMinimalFlatRanges(){const t=[];const e=this.start.getCommonPath(this.end).length;const i=Uh._createAt(this.start);let n=i.parent;while(i.path.length>e+1){const e=n.maxOffset-i.offset;if(e!==0){t.push(new $h(i,i.getShiftedBy(e)))}i.path=i.path.slice(0,-1);i.offset++;n=n.parent}while(i.path.length<=this.end.path.length){const e=this.end.path[i.path.length-1];const n=e-i.offset;if(n!==0){t.push(new $h(i,i.getShiftedBy(n)))}i.offset=e;i.path.push(0)}return t}getWalker(t={}){t.boundaries=this;return new Wh(t)}*getItems(t={}){t.boundaries=this;t.ignoreElementEnd=true;const e=new Wh(t);for(const t of e){yield t.item}}*getPositions(t={}){t.boundaries=this;const e=new Wh(t);yield e.position;for(const t of e){yield t.nextPosition}}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new $h(this.start,this.end)]}getTransformedByOperations(t){const e=[new $h(this.start,this.end)];for(const i of t){for(let t=0;t<e.length;t++){const n=e[t].getTransformedByOperation(i);e.splice(t,1,...n);t+=n.length-1}}for(let t=0;t<e.length;t++){const i=e[t];for(let n=t+1;n<e.length;n++){const t=e[n];if(i.containsRange(t)||t.containsRange(i)||i.isEqual(t)){e.splice(n,1)}}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed){return null}const t=this.start.nodeAfter;const e=this.end.nodeBefore;if(t&&t.is("element")&&t===e){return t}return null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=false){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=false){const i=t.sourcePosition;const n=t.howMany;const o=t.targetPosition;return this._getTransformedByMove(i,o,n,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let i=this.end._getTransformedBySplitOperation(t);if(this.end.isEqual(t.insertionPosition)){i=this.end.getShiftedBy(1)}if(e.root!=i.root){i=this.end.getShiftedBy(-1)}return new $h(e,i)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition)){return new $h(this.start)}let e=this.start._getTransformedByMergeOperation(t);let i=this.end._getTransformedByMergeOperation(t);if(e.root!=i.root){i=this.end.getShiftedBy(-1)}if(e.isAfter(i)){if(t.sourcePosition.isBefore(t.targetPosition)){e=Uh._createAt(i);e.offset=0}else{if(!t.deletionPosition.isEqual(e)){i=t.deletionPosition}e=t.targetPosition}return new $h(e,i)}return new $h(e,i)}_getTransformedByInsertion(t,e,i=false){if(i&&this.containsPosition(t)){return[new $h(this.start,t),new $h(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))]}else{const i=new $h(this.start,this.end);i.start=i.start._getTransformedByInsertion(t,e);i.end=i.end._getTransformedByInsertion(t,e);return[i]}}_getTransformedByMove(t,e,i,n=false){if(this.isCollapsed){const n=this.start._getTransformedByMove(t,e,i);return[new $h(n)]}const o=$h._createFromPositionAndShift(t,i);const r=e._getTransformedByDeletion(t,i);if(this.containsPosition(e)&&!n){if(o.containsPosition(this.start)||o.containsPosition(this.end)){const n=this.start._getTransformedByMove(t,e,i);const o=this.end._getTransformedByMove(t,e,i);return[new $h(n,o)]}}let s;const a=this.getDifference(o);let c=null;const l=this.getIntersection(o);if(a.length==1){c=new $h(a[0].start._getTransformedByDeletion(t,i),a[0].end._getTransformedByDeletion(t,i))}else if(a.length==2){c=new $h(this.start,this.end._getTransformedByDeletion(t,i))}if(c){s=c._getTransformedByInsertion(r,i,l!==null||n)}else{s=[]}if(l){const t=new $h(l.start._getCombined(o.start,r),l.end._getCombined(o.start,r));if(s.length==2){s.splice(1,0,t)}else{s.push(t)}}return s}_getTransformedByDeletion(t,e){let i=this.start._getTransformedByDeletion(t,e);let n=this.end._getTransformedByDeletion(t,e);if(i==null&&n==null){return null}if(i==null){i=t}if(n==null){n=t}return new $h(i,n)}static _createFromPositionAndShift(t,e){const i=t;const n=t.getShiftedBy(e);return e>0?new this(i,n):new this(n,i)}static _createIn(t){return new this(Uh._createAt(t,0),Uh._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Uh._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0){throw new ss["b"]("range-create-from-ranges-empty-array: At least one range has to be passed.",null)}else if(t.length==1){return t[0].clone()}const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const i=t.indexOf(e);const n=new this(e.start,e.end);if(i>0){for(let e=i-1;true;e++){if(t[e].end.isEqual(n.start)){n.start=Uh._createAt(t[e].start)}else{break}}}for(let e=i+1;e<t.length;e++){if(t[e].start.isEqual(n.end)){n.end=Uh._createAt(t[e].end)}else{break}}return n}static fromJSON(t,e){return new this(Uh.fromJSON(t.start,e),Uh.fromJSON(t.end,e))}}class Gh{constructor(){this._modelToViewMapping=new WeakMap;this._viewToModelMapping=new WeakMap;this._viewToModelLengthCallbacks=new Map;this._markerNameToElements=new Map;this._elementToMarkerNames=new Map;this._unboundMarkerNames=new Set;this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition){return}const i=this._modelToViewMapping.get(e.modelPosition.parent);e.viewPosition=this._findPositionIn(i,e.modelPosition.offset)},{priority:"low"});this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition){return}const i=this.findMappedViewAncestor(e.viewPosition);const n=this._viewToModelMapping.get(i);const o=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,i);e.modelPosition=Uh._createAt(n,o)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e);this._viewToModelMapping.set(e,t)}unbindViewElement(t){const e=this.toModelElement(t);this._viewToModelMapping.delete(t);if(this._elementToMarkerNames.has(t)){for(const e of this._elementToMarkerNames.get(t)){this._unboundMarkerNames.add(e)}}if(this._modelToViewMapping.get(e)==t){this._modelToViewMapping.delete(e)}}unbindModelElement(t){const e=this.toViewElement(t);this._modelToViewMapping.delete(t);if(this._viewToModelMapping.get(e)==t){this._viewToModelMapping.delete(e)}}bindElementToMarker(t,e){const i=this._markerNameToElements.get(e)||new Set;i.add(t);const n=this._elementToMarkerNames.get(t)||new Set;n.add(e);this._markerNameToElements.set(e,i);this._elementToMarkerNames.set(t,n)}unbindElementFromMarkerName(t,e){const i=this._markerNameToElements.get(e);if(i){i.delete(t);if(i.size==0){this._markerNameToElements.delete(e)}}const n=this._elementToMarkerNames.get(t);if(n){n.delete(e);if(n.size==0){this._elementToMarkerNames.delete(t)}}}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);this._unboundMarkerNames.clear();return t}clearBindings(){this._modelToViewMapping=new WeakMap;this._viewToModelMapping=new WeakMap;this._markerNameToElements=new Map;this._elementToMarkerNames=new Map;this._unboundMarkerNames=new Set}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new $h(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new ul(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};this.fire("viewToModelPosition",e);return e.modelPosition}toViewPosition(t,e={isPhantom:false}){const i={modelPosition:t,mapper:this,isPhantom:e.isPhantom};this.fire("modelToViewPosition",i);return i.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e){return null}const i=new Set;for(const t of e){if(t.is("attributeElement")){for(const e of t.getElementsWithSameId()){i.add(e)}}else{i.add(t)}}return i}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;while(!this._viewToModelMapping.has(e)){e=e.parent}return e}_toModelOffset(t,e,i){if(i!=t){const n=this._toModelOffset(t.parent,t.index,i);const o=this._toModelOffset(t,e,t);return n+o}if(t.is("text")){return e}let n=0;for(let i=0;i<e;i++){n+=this.getModelLength(t.getChild(i))}return n}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name)){const e=this._viewToModelLengthCallbacks.get(t.name);return e(t)}else if(this._viewToModelMapping.has(t)){return 1}else if(t.is("text")){return t.data.length}else if(t.is("uiElement")){return 0}else{let e=0;for(const i of t.getChildren()){e+=this.getModelLength(i)}return e}}_findPositionIn(t,e){let i;let n=0;let o=0;let r=0;if(t.is("text")){return new dl(t,e)}while(o<e){i=t.getChild(r);n=this.getModelLength(i);o+=n;r++}if(o==e){return this._moveViewPositionToTextNode(new dl(t,r))}else{return this._findPositionIn(i,e-(o-n))}}_moveViewPositionToTextNode(t){const e=t.nodeBefore;const i=t.nodeAfter;if(e instanceof Ls){return new dl(e,e.data.length)}else if(i instanceof Ls){return new dl(i,0)}return t}}vs(Gh,ds);class Kh{constructor(){this._consumable=new Map;this._textProxyRegistry=new Map}add(t,e){e=Jh(e);if(t instanceof Fh){t=this._getSymbolForTextProxy(t)}if(!this._consumable.has(t)){this._consumable.set(t,new Map)}this._consumable.get(t).set(e,true)}consume(t,e){e=Jh(e);if(t instanceof Fh){t=this._getSymbolForTextProxy(t)}if(this.test(t,e)){this._consumable.get(t).set(e,false);return true}else{return false}}test(t,e){e=Jh(e);if(t instanceof Fh){t=this._getSymbolForTextProxy(t)}const i=this._consumable.get(t);if(i===undefined){return null}const n=i.get(e);if(n===undefined){return null}return n}revert(t,e){e=Jh(e);if(t instanceof Fh){t=this._getSymbolForTextProxy(t)}const i=this.test(t,e);if(i===false){this._consumable.get(t).set(e,true);return true}else if(i===true){return false}return null}_getSymbolForTextProxy(t){let e=null;const i=this._textProxyRegistry.get(t.startOffset);if(i){const n=i.get(t.endOffset);if(n){e=n.get(t.parent)}}if(!e){e=this._addSymbolForTextProxy(t.startOffset,t.endOffset,t.parent)}return e}_addSymbolForTextProxy(t,e,i){const n=Symbol("textProxySymbol");let o,r;o=this._textProxyRegistry.get(t);if(!o){o=new Map;this._textProxyRegistry.set(t,o)}r=o.get(e);if(!r){r=new Map;o.set(e,r)}r.set(i,n);return n}}function Jh(t){const e=t.split(":");return e.length>1?e[0]+":"+e[1]:e[0]}class Yh{constructor(t){this.conversionApi=qc({dispatcher:this},t)}convertChanges(t,e,i){for(const e of t.getMarkersToRemove()){this.convertMarkerRemove(e.name,e.range,i)}for(const e of t.getChanges()){if(e.type=="insert"){this.convertInsert($h._createFromPositionAndShift(e.position,e.length),i)}else if(e.type=="remove"){this.convertRemove(e.position,e.length,e.name,i)}else{this.convertAttribute(e.range,e.attributeKey,e.attributeOldValue,e.attributeNewValue,i)}}for(const t of this.conversionApi.mapper.flushUnboundMarkerNames()){const n=e.get(t).getRange();this.convertMarkerRemove(t,n,i);this.convertMarkerAdd(t,n,i)}for(const e of t.getMarkersToAdd()){this.convertMarkerAdd(e.name,e.range,i)}}convertInsert(t,e){this.conversionApi.writer=e;this.conversionApi.consumable=this._createInsertConsumable(t);for(const e of t){const t=e.item;const i=$h._createFromPositionAndShift(e.previousPosition,e.length);const n={item:t,range:i};this._testAndFire("insert",n);for(const e of t.getAttributeKeys()){n.attributeKey=e;n.attributeOldValue=null;n.attributeNewValue=t.getAttribute(e);this._testAndFire(`attribute:${e}`,n)}}this._clearConversionApi()}convertRemove(t,e,i,n){this.conversionApi.writer=n;this.fire("remove:"+i,{position:t,length:e},this.conversionApi);this._clearConversionApi()}convertAttribute(t,e,i,n,o){this.conversionApi.writer=o;this.conversionApi.consumable=this._createConsumableForRange(t,`attribute:${e}`);for(const o of t){const t=o.item;const r=$h._createFromPositionAndShift(o.previousPosition,o.length);const s={item:t,range:r,attributeKey:e,attributeOldValue:i,attributeNewValue:n};this._testAndFire(`attribute:${e}`,s)}this._clearConversionApi()}convertSelection(t,e,i){const n=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));this.conversionApi.writer=i;this.conversionApi.consumable=this._createSelectionConsumable(t,n);this.fire("selection",{selection:t},this.conversionApi);if(!t.isCollapsed){return}for(const e of n){const i=e.getRange();if(!Qh(t.getFirstPosition(),e,this.conversionApi.mapper)){continue}const n={item:t,markerName:e.name,markerRange:i};if(this.conversionApi.consumable.test(t,"addMarker:"+e.name)){this.fire("addMarker:"+e.name,n,this.conversionApi)}}for(const e of t.getAttributeKeys()){const i={item:t,range:t.getFirstRange(),attributeKey:e,attributeOldValue:null,attributeNewValue:t.getAttribute(e)};if(this.conversionApi.consumable.test(t,"attribute:"+i.attributeKey)){this.fire("attribute:"+i.attributeKey+":$text",i,this.conversionApi)}}this._clearConversionApi()}convertMarkerAdd(t,e,i){if(!e.root.document||e.root.rootName=="$graveyard"){return}this.conversionApi.writer=i;const n="addMarker:"+t;const o=new Kh;o.add(e,n);this.conversionApi.consumable=o;this.fire(n,{markerName:t,markerRange:e},this.conversionApi);if(!o.test(e,n)){return}this.conversionApi.consumable=this._createConsumableForRange(e,n);for(const i of e.getItems()){if(!this.conversionApi.consumable.test(i,n)){continue}const o={item:i,range:$h._createOn(i),markerName:t,markerRange:e};this.fire(n,o,this.conversionApi)}this._clearConversionApi()}convertMarkerRemove(t,e,i){if(!e.root.document||e.root.rootName=="$graveyard"){return}this.conversionApi.writer=i;this.fire("removeMarker:"+t,{markerName:t,markerRange:e},this.conversionApi);this._clearConversionApi()}_createInsertConsumable(t){const e=new Kh;for(const i of t){const t=i.item;e.add(t,"insert");for(const i of t.getAttributeKeys()){e.add(t,"attribute:"+i)}}return e}_createConsumableForRange(t,e){const i=new Kh;for(const n of t.getItems()){i.add(n,e)}return i}_createSelectionConsumable(t,e){const i=new Kh;i.add(t,"selection");for(const n of e){i.add(t,"addMarker:"+n.name)}for(const e of t.getAttributeKeys()){i.add(t,"attribute:"+e)}return i}_testAndFire(t,e){if(!this.conversionApi.consumable.test(e.item,t)){return}const i=e.item.name||"$text";this.fire(t+":"+i,e,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer;delete this.conversionApi.consumable}}vs(Yh,ds);function Qh(t,e,i){const n=e.getRange();const o=Array.from(t.getAncestors());o.shift();o.reverse();const r=o.some(t=>{if(n.containsItem(t)){const e=i.toViewElement(t);return!!e.getCustomProperty("addHighlight")}});return!r}class Xh{constructor(t,e,i){this._lastRangeBackward=false;this._ranges=[];this._attrs=new Map;if(t){this.setTo(t,e,i)}}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){const t=this._ranges.length;if(t===1){return this._ranges[0].isCollapsed}else{return false}}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount){return false}else if(this.rangeCount===0){return true}if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus)){return false}for(const e of this._ranges){let i=false;for(const n of t._ranges){if(e.isEqual(n)){i=true;break}}if(!i){return false}}return true}*getRanges(){for(const t of this._ranges){yield new $h(t.start,t.end)}}getFirstRange(){let t=null;for(const e of this._ranges){if(!t||e.start.isBefore(t.start)){t=e}}return t?new $h(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges){if(!t||e.end.isAfter(t.end)){t=e}}return t?new $h(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(t,e,i){if(t===null){this._setRanges([])}else if(t instanceof Xh){this._setRanges(t.getRanges(),t.isBackward)}else if(t&&typeof t.getRanges=="function"){this._setRanges(t.getRanges(),t.isBackward)}else if(t instanceof $h){this._setRanges([t],!!e&&!!e.backward)}else if(t instanceof Uh){this._setRanges([new $h(t)])}else if(t instanceof zh){const n=!!i&&!!i.backward;let o;if(e=="in"){o=$h._createIn(t)}else if(e=="on"){o=$h._createOn(t)}else if(e!==undefined){o=new $h(Uh._createAt(t,e))}else{throw new ss["b"]("model-selection-setTo-required-second-parameter: "+"selection.setTo requires the second parameter when the first parameter is a node.",[this,t])}this._setRanges([o],n)}else if(js(t)){this._setRanges(t,e&&!!e.backward)}else{throw new ss["b"]("model-selection-setTo-not-selectable: Cannot set the selection to the given place.",[this,t])}}_setRanges(t,e=false){t=Array.from(t);const i=t.some(e=>{if(!(e instanceof $h)){throw new ss["b"]("model-selection-set-ranges-not-range: "+"Selection range set to an object that is not an instance of model.Range.",[this,t])}return this._ranges.every(t=>!t.isEqual(e))});if(t.length===this._ranges.length&&!i){return}this._removeAllRanges();for(const e of t){this._pushRange(e)}this._lastRangeBackward=!!e;this.fire("change:range",{directChange:true})}setFocus(t,e){if(this.anchor===null){throw new ss["b"]("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",[this,t])}const i=Uh._createAt(t,e);if(i.compareWith(this.focus)=="same"){return}const n=this.anchor;if(this._ranges.length){this._popRange()}if(i.compareWith(n)=="before"){this._pushRange(new $h(i,n));this._lastRangeBackward=true}else{this._pushRange(new $h(n,i));this._lastRangeBackward=false}this.fire("change:range",{directChange:true})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){if(this.hasAttribute(t)){this._attrs.delete(t);this.fire("change:attribute",{attributeKeys:[t],directChange:true})}}setAttribute(t,e){if(this.getAttribute(t)!==e){this._attrs.set(t,e);this.fire("change:attribute",{attributeKeys:[t],directChange:true})}}getSelectedElement(){if(this.rangeCount!==1){return null}return this.getFirstRange().getContainedElement()}is(t){return t=="selection"||t=="model:selection"}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const i=ef(e.start,t);if(i&&nf(i,e)){yield i}for(const i of e.getWalker()){const n=i.item;if(i.type=="elementEnd"&&tf(n,t,e)){yield n}}const n=ef(e.end,t);if(n&&!e.end.isTouching(Uh._createAt(n,0))&&nf(n,e)){yield n}}}containsEntireContent(t=this.anchor.root){const e=Uh._createAt(t,0);const i=Uh._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t);this._ranges.push(new $h(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++){if(t.isIntersecting(this._ranges[e])){throw new ss["b"]("model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}}}_removeAllRanges(){while(this._ranges.length>0){this._popRange()}}_popRange(){this._ranges.pop()}}vs(Xh,ds);function Zh(t,e){if(e.has(t)){return false}e.add(t);return t.root.document.model.schema.isBlock(t)&&t.parent}function tf(t,e,i){return Zh(t,e)&&nf(t,i)}function ef(t,e){const i=t.parent;const n=i.root.document.model.schema;const o=t.parent.getAncestors({parentFirst:true,includeSelf:true});let r=false;const s=o.find(t=>{if(r){return false}r=n.isLimit(t);return!r&&Zh(t,e)});o.forEach(t=>e.add(t));return s}function nf(t,e){const i=of(t);if(!i){return true}const n=e.containsRange($h._createOn(i),true);return!n}function of(t){const e=t.root.document.model.schema;let i=t.parent;while(i){if(e.isBlock(i)){return i}i=i.parent}}class rf extends $h{constructor(t,e){super(t,e);sf.call(this)}detach(){this.stopListening()}is(t){return t=="liveRange"||t=="model:liveRange"||super.is(t)}toRange(){return new $h(this.start,this.end)}static fromRange(t){return new rf(t.start,t.end)}}function sf(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const i=e[0];if(!i.isDocumentOperation){return}af.call(this,i)},{priority:"low"})}function af(t){const e=this.getTransformedByOperation(t);const i=$h._createFromRanges(e);const n=!i.isEqual(this);const o=cf(this,t);let r=null;if(n){if(i.root.rootName=="$graveyard"){if(t.type=="remove"){r=t.sourcePosition}else{r=t.deletionPosition}}const e=this.toRange();this.start=i.start;this.end=i.end;this.fire("change:range",e,{deletionPosition:r})}else if(o){this.fire("change:content",this.toRange(),{deletionPosition:r})}}function cf(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return false}vs(rf,ds);const lf="selection:";class df{constructor(t){this._selection=new uf(t);this._selection.delegate("change:range").to(this);this._selection.delegate("change:attribute").to(this);this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection._updateMarkers();this._selection._updateAttributes(false)}is(t){return t=="selection"||t=="model:selection"||t=="documentSelection"||t=="model:documentSelection"}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(t,e,i){this._selection.setTo(t,e,i)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return lf+t}static _isStoreAttributeKey(t){return t.startsWith(lf)}}vs(df,ds);class uf extends Xh{constructor(t){super();this.markers=new ys({idProperty:"name"});this._model=t.model;this._document=t;this._attributePriority=new Map;this._fixGraveyardRangesData=[];this._hasChangedRange=false;this._overriddenGravityRegister=new Set;this.listenTo(this._model,"applyOperation",(t,e)=>{const i=e[0];if(!i.isDocumentOperation||i.type=="marker"||i.type=="rename"||i.type=="noop"){return}while(this._fixGraveyardRangesData.length){const{liveRange:t,sourcePosition:e}=this._fixGraveyardRangesData.shift();this._fixGraveyardSelection(t,e)}if(this._hasChangedRange){this._hasChangedRange=false;this.fire("change:range",{directChange:false})}},{priority:"lowest"});this.on("change:range",()=>{for(const t of this.getRanges()){if(!this._document._validateSelectionRange(t)){throw new ss["b"]("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",this,{range:t})}}});this.listenTo(this._model.markers,"update",()=>this._updateMarkers());this.listenTo(this._document,"change",(t,e)=>{ff(this._model,e)})}get isCollapsed(){const t=this._ranges.length;return t===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++){this._ranges[t].detach()}this.stopListening()}*getRanges(){if(this._ranges.length){yield*super.getRanges()}else{yield this._document._getDefaultRange()}}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(t,e,i){super.setTo(t,e,i);this._updateAttributes(true);this._updateMarkers()}setFocus(t,e){super.setFocus(t,e);this._updateAttributes(true);this._updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:true})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:true})}}overrideGravity(){const t=is();this._overriddenGravityRegister.add(t);if(this._overriddenGravityRegister.size===1){this._updateAttributes(true)}return t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t)){throw new ss["b"]("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",this,{uid:t})}this._overriddenGravityRegister.delete(t);if(!this.isGravityOverridden){this._updateAttributes(true)}}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);if(e){this._ranges.push(e)}}_prepareRange(t){this._checkRange(t);if(t.root==this._document.graveyard){return}const e=rf.fromRange(t);e.on("change:range",(t,i,n)=>{this._hasChangedRange=true;if(e.root==this._document.graveyard){this._fixGraveyardRangesData.push({liveRange:e,sourcePosition:n.deletionPosition})}});return e}_updateMarkers(){const t=[];let e=false;for(const e of this._model.markers){const i=e.getRange();for(const n of this.getRanges()){if(i.containsRange(n,!n.isCollapsed)){t.push(e)}}}const i=Array.from(this.markers);for(const i of t){if(!this.markers.has(i)){this.markers.add(i);e=true}}for(const i of Array.from(this.markers)){if(!t.includes(i)){this.markers.remove(i);e=true}}if(e){this.fire("change:marker",{oldMarkers:i,directChange:false})}}_updateAttributes(t){const e=Hs(this._getSurroundingAttributes());const i=Hs(this.getAttributes());if(t){this._attributePriority=new Map;this._attrs=new Map}else{for(const[t,e]of this._attributePriority){if(e=="low"){this._attrs.delete(t);this._attributePriority.delete(t)}}}this._setAttributesTo(e);const n=[];for(const[t,e]of this.getAttributes()){if(!i.has(t)||i.get(t)!==e){n.push(t)}}for(const[t]of i){if(!this.hasAttribute(t)){n.push(t)}}if(n.length>0){this.fire("change:attribute",{attributeKeys:n,directChange:false})}}_setAttribute(t,e,i=true){const n=i?"normal":"low";if(n=="low"&&this._attributePriority.get(t)=="normal"){return false}const o=super.getAttribute(t);if(o===e){return false}this._attrs.set(t,e);this._attributePriority.set(t,n);return true}_removeAttribute(t,e=true){const i=e?"normal":"low";if(i=="low"&&this._attributePriority.get(t)=="normal"){return false}this._attributePriority.set(t,i);if(!super.hasAttribute(t)){return false}this._attrs.delete(t);return true}_setAttributesTo(t){const e=new Set;for(const[e,i]of this.getAttributes()){if(t.get(e)===i){continue}this._removeAttribute(e,false)}for(const[i,n]of t){const t=this._setAttribute(i,n,false);if(t){e.add(i)}}return e}*_getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty){for(const e of t.getAttributeKeys()){if(e.startsWith(lf)){const i=e.substr(lf.length);yield[i,t.getAttribute(e)]}}}}_getSurroundingAttributes(){const t=this.getFirstPosition();const e=this._model.schema;let i=null;if(!this.isCollapsed){const t=this.getFirstRange();for(const n of t){if(n.item.is("element")&&e.isObject(n.item)){break}if(n.type=="text"){i=n.item.getAttributes();break}}}else{const e=t.textNode?t.textNode:t.nodeBefore;const n=t.textNode?t.textNode:t.nodeAfter;if(!this.isGravityOverridden){i=hf(e)}if(!i){i=hf(n)}if(!this.isGravityOverridden&&!i){let t=e;while(t&&!i){t=t.previousSibling;i=hf(t)}}if(!i){let t=n;while(t&&!i){t=t.nextSibling;i=hf(t)}}if(!i){i=this._getStoredAttributes()}}return i}_fixGraveyardSelection(t,e){const i=e.clone();const n=this._model.schema.getNearestSelectionRange(i);const o=this._ranges.indexOf(t);this._ranges.splice(o,1);t.detach();if(n){const t=this._prepareRange(n);this._ranges.splice(o,0,t)}}}function hf(t){if(t instanceof Fh||t instanceof Lh){return t.getAttributes()}return null}function ff(t,e){const i=t.document.differ;for(const n of i.getChanges()){if(n.type!="insert"){continue}const i=n.position.parent;const o=n.length===i.maxOffset;if(o){t.enqueueChange(e,t=>{const e=Array.from(i.getAttributeKeys()).filter(t=>t.startsWith(lf));for(const n of e){t.removeAttribute(n,i)}})}}}class gf{constructor(t){this._dispatchers=t}add(t){for(const e of this._dispatchers){t(e)}return this}}var mf=1,pf=4;function bf(t){return Hr(t,mf|pf)}var wf=bf;class kf extends gf{elementToElement(t){return this.add(Nf(t))}attributeToElement(t){return this.add(Mf(t))}attributeToAttribute(t){return this.add(Bf(t))}markerToElement(t){return this.add(zf(t))}markerToHighlight(t){return this.add(Lf(t))}}function _f(){return(t,e,i)=>{if(!i.consumable.consume(e.item,"insert")){return}const n=i.writer;const o=i.mapper.toViewPosition(e.range.start);const r=n.createText(e.item.data);n.insert(o,r)}}function vf(){return(t,e,i)=>{const n=i.mapper.toViewPosition(e.position);const o=e.position.getShiftedBy(e.length);const r=i.mapper.toViewPosition(o,{isPhantom:true});const s=i.writer.createRange(n,r);const a=i.writer.remove(s.getTrimmed());for(const t of i.writer.createRangeIn(a).getItems()){i.mapper.unbindViewElement(t)}}}function yf(t,e){const i=t.createAttributeElement("span",e.attributes);if(e.classes){i._addClass(e.classes)}if(e.priority){i._priority=e.priority}i._id=e.id;return i}function xf(){return(t,e,i)=>{const n=e.selection;if(n.isCollapsed){return}if(!i.consumable.consume(n,"selection")){return}const o=[];for(const t of n.getRanges()){const e=i.mapper.toViewRange(t);o.push(e)}i.writer.setSelection(o,{backward:n.isBackward})}}function Cf(){return(t,e,i)=>{const n=e.selection;if(!n.isCollapsed){return}if(!i.consumable.consume(n,"selection")){return}const o=i.writer;const r=n.getFirstPosition();const s=i.mapper.toViewPosition(r);const a=o.breakAttributes(s);o.setSelection(a)}}function Af(){return(t,e,i)=>{const n=i.writer;const o=n.document.selection;for(const t of o.getRanges()){if(t.isCollapsed){if(t.end.parent.isAttached()){i.writer.mergeAttributes(t.start)}}}n.setSelection(null)}}function Tf(t){return(e,i,n)=>{const o=t(i.attributeOldValue,n.writer);const r=t(i.attributeNewValue,n.writer);if(!o&&!r){return}if(!n.consumable.consume(i.item,e.name)){return}const s=n.writer;const a=s.document.selection;if(i.item instanceof Xh||i.item instanceof df){s.wrap(a.getFirstRange(),r)}else{let t=n.mapper.toViewRange(i.range);if(i.attributeOldValue!==null&&o){t=s.unwrap(t,o)}if(i.attributeNewValue!==null&&r){s.wrap(t,r)}}}}function Pf(t){return(e,i,n)=>{const o=t(i.item,n.writer);if(!o){return}if(!n.consumable.consume(i.item,"insert")){return}const r=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(i.item,o);n.writer.insert(r,o)}}function Sf(t){return(e,i,n)=>{i.isOpening=true;const o=t(i,n.writer);i.isOpening=false;const r=t(i,n.writer);if(!o||!r){return}const s=i.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,e.name)){return}for(const t of s){if(!n.consumable.consume(t.item,e.name)){return}}const a=n.mapper;const c=n.writer;c.insert(a.toViewPosition(s.start),o);n.mapper.bindElementToMarker(o,i.markerName);if(!s.isCollapsed){c.insert(a.toViewPosition(s.end),r);n.mapper.bindElementToMarker(r,i.markerName)}e.stop()}}function Ef(){return(t,e,i)=>{const n=i.mapper.markerNameToElements(e.markerName);if(!n){return}for(const t of n){i.mapper.unbindElementFromMarkerName(t,e.markerName);i.writer.clear(i.writer.createRangeOn(t),t)}i.writer.clearClonedElementsGroup(e.markerName);t.stop()}}function Rf(t){return(e,i,n)=>{const o=t(i.attributeOldValue,i);const r=t(i.attributeNewValue,i);if(!o&&!r){return}if(!n.consumable.consume(i.item,e.name)){return}const s=n.mapper.toViewElement(i.item);const a=n.writer;if(!s){throw new ss["b"]("conversion-attribute-to-attribute-on-text: "+"Trying to convert text node's attribute with attribute-to-attribute converter.",[i,n])}if(i.attributeOldValue!==null&&o){if(o.key=="class"){const t=Array.isArray(o.value)?o.value:[o.value];for(const e of t){a.removeClass(e,s)}}else if(o.key=="style"){const t=Object.keys(o.value);for(const e of t){a.removeStyle(e,s)}}else{a.removeAttribute(o.key,s)}}if(i.attributeNewValue!==null&&r){if(r.key=="class"){const t=Array.isArray(r.value)?r.value:[r.value];for(const e of t){a.addClass(e,s)}}else if(r.key=="style"){const t=Object.keys(r.value);for(const e of t){a.setStyle(e,r.value[e],s)}}else{a.setAttribute(r.key,r.value,s)}}}}function Of(t){return(e,i,n)=>{if(!i.item){return}if(!(i.item instanceof Xh||i.item instanceof df)&&!i.item.is("textProxy")){return}const o=Wf(t,i,n);if(!o){return}if(!n.consumable.consume(i.item,e.name)){return}const r=n.writer;const s=yf(r,o);const a=r.document.selection;if(i.item instanceof Xh||i.item instanceof df){r.wrap(a.getFirstRange(),s,a)}else{const t=n.mapper.toViewRange(i.range);const e=r.wrap(t,s);for(const t of e.getItems()){if(t.is("attributeElement")&&t.isSimilar(s)){n.mapper.bindElementToMarker(t,i.markerName);break}}}}}function If(t){return(e,i,n)=>{if(!i.item){return}if(!(i.item instanceof jh)){return}const o=Wf(t,i,n);if(!o){return}if(!n.consumable.test(i.item,e.name)){return}const r=n.mapper.toViewElement(i.item);if(r&&r.getCustomProperty("addHighlight")){n.consumable.consume(i.item,e.name);for(const t of $h._createIn(i.item)){n.consumable.consume(t.item,e.name)}r.getCustomProperty("addHighlight")(r,o,n.writer);n.mapper.bindElementToMarker(r,i.markerName)}}}function Vf(t){return(e,i,n)=>{if(i.markerRange.isCollapsed){return}const o=Wf(t,i,n);if(!o){return}const r=yf(n.writer,o);const s=n.mapper.markerNameToElements(i.markerName);if(!s){return}for(const t of s){n.mapper.unbindElementFromMarkerName(t,i.markerName);if(t.is("attributeElement")){n.writer.unwrap(n.writer.createRangeOn(t),r)}else{t.getCustomProperty("removeHighlight")(t,o.id,n.writer)}}n.writer.clearClonedElementsGroup(i.markerName);e.stop()}}function Nf(t){t=wf(t);t.view=Ff(t.view,"container");return e=>{e.on("insert:"+t.model,Pf(t.view),{priority:t.converterPriority||"normal"})}}function Mf(t){t=wf(t);const e=t.model.key?t.model.key:t.model;let i="attribute:"+e;if(t.model.name){i+=":"+t.model.name}if(t.model.values){for(const e of t.model.values){t.view[e]=Ff(t.view[e],"attribute")}}else{t.view=Ff(t.view,"attribute")}const n=jf(t);return e=>{e.on(i,Tf(n),{priority:t.converterPriority||"normal"})}}function Bf(t){t=wf(t);const e=t.model.key?t.model.key:t.model;let i="attribute:"+e;if(t.model.name){i+=":"+t.model.name}if(t.model.values){for(const e of t.model.values){t.view[e]=Hf(t.view[e])}}else{t.view=Hf(t.view)}const n=jf(t);return e=>{e.on(i,Rf(n),{priority:t.converterPriority||"normal"})}}function zf(t){t=wf(t);t.view=Ff(t.view,"ui");return e=>{e.on("addMarker:"+t.model,Sf(t.view),{priority:t.converterPriority||"normal"});e.on("removeMarker:"+t.model,Ef(t.view),{priority:t.converterPriority||"normal"})}}function Lf(t){return e=>{e.on("addMarker:"+t.model,Of(t.view),{priority:t.converterPriority||"normal"});e.on("addMarker:"+t.model,If(t.view),{priority:t.converterPriority||"normal"});e.on("removeMarker:"+t.model,Vf(t.view),{priority:t.converterPriority||"normal"})}}function Ff(t,e){if(typeof t=="function"){return t}return(i,n)=>Df(t,n,e)}function Df(t,e,i){if(typeof t=="string"){t={name:t}}let n;const o=Object.assign({},t.attributes);if(i=="container"){n=e.createContainerElement(t.name,o)}else if(i=="attribute"){const i={priority:t.priority||wl.DEFAULT_PRIORITY};n=e.createAttributeElement(t.name,o,i)}else{n=e.createUIElement(t.name,o)}if(t.styles){const i=Object.keys(t.styles);for(const o of i){e.setStyle(o,t.styles[o],n)}}if(t.classes){const i=t.classes;if(typeof i=="string"){e.addClass(i,n)}else{for(const t of i){e.addClass(t,n)}}}return n}function jf(t){if(t.model.values){return(e,i)=>{const n=t.view[e];if(n){return n(e,i)}return null}}else{return t.view}}function Hf(t){if(typeof t=="string"){return e=>({key:t,value:e})}else if(typeof t=="object"){if(t.value){return()=>t}else{return e=>({key:t.key,value:e})}}else{return t}}function Wf(t,e,i){const n=typeof t=="function"?t(e,i):t;if(!n){return null}if(!n.priority){n.priority=10}if(!n.id){n.id=e.markerName}return n}class qf extends gf{elementToElement(t){return this.add(Kf(t))}elementToAttribute(t){return this.add(Jf(t))}attributeToAttribute(t){return this.add(Yf(t))}elementToMarker(t){return this.add(Qf(t))}}function Uf(){return(t,e,i)=>{if(!e.modelRange&&i.consumable.consume(e.viewItem,{name:true})){const{modelRange:t,modelCursor:n}=i.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t;e.modelCursor=n}}}function $f(){return(t,e,i)=>{if(i.schema.checkChild(e.modelCursor,"$text")){if(i.consumable.consume(e.viewItem)){const t=i.writer.createText(e.viewItem.data);i.writer.insert(t,e.modelCursor);e.modelRange=$h._createFromPositionAndShift(e.modelCursor,t.offsetSize);e.modelCursor=e.modelRange.end}}}}function Gf(t,e){return(i,n)=>{const o=n.newSelection;const r=new Xh;const s=[];for(const t of o.getRanges()){s.push(e.toModelRange(t))}r.setTo(s,{backward:o.isBackward});if(!r.isEqual(t.document.selection)){t.change(t=>{t.setSelection(r)})}}}function Kf(t){t=wf(t);const e=Zf(t);const i=Xf(t.view);const n=i?"element:"+i:"element";return i=>{i.on(n,e,{priority:t.converterPriority||"normal"})}}function Jf(t){t=wf(t);ig(t);const e=ng(t,false);const i=Xf(t.view);const n=i?"element:"+i:"element";return i=>{i.on(n,e,{priority:t.converterPriority||"low"})}}function Yf(t){t=wf(t);let e=null;if(typeof t.view=="string"||t.view.key){e=eg(t)}ig(t,e);const i=ng(t,true);return e=>{e.on("element",i,{priority:t.converterPriority||"low"})}}function Qf(t){t=wf(t);sg(t);return Kf(t)}function Xf(t){if(typeof t=="string"){return t}if(typeof t=="object"&&typeof t.name=="string"){return t.name}return null}function Zf(t){const e=t.view?new Ws(t.view):null;return(i,n,o)=>{let r={};if(e){const t=e.match(n.viewItem);if(!t){return}r=t.match}r.name=true;const s=tg(t.model,n.viewItem,o.writer);if(!s){return}if(!o.consumable.test(n.viewItem,r)){return}const a=o.splitToAllowedParent(s,n.modelCursor);if(!a){return}o.writer.insert(s,a.position);o.convertChildren(n.viewItem,o.writer.createPositionAt(s,0));o.consumable.consume(n.viewItem,r);const c=o.getSplitParts(s);n.modelRange=new $h(o.writer.createPositionBefore(s),o.writer.createPositionAfter(c[c.length-1]));if(a.cursorParent){n.modelCursor=o.writer.createPositionAt(a.cursorParent,0)}else{n.modelCursor=n.modelRange.end}}}function tg(t,e,i){if(t instanceof Function){return t(e,i)}else{return i.createElement(t)}}function eg(t){if(typeof t.view=="string"){t.view={key:t.view}}const e=t.view.key;let i;if(e=="class"||e=="style"){const n=e=="class"?"classes":"styles";i={[n]:t.view.value}}else{const n=typeof t.view.value=="undefined"?/[\s\S]*/:t.view.value;i={attributes:{[e]:n}}}if(t.view.name){i.name=t.view.name}t.view=i;return e}function ig(t,e=null){const i=e===null?true:t=>t.getAttribute(e);const n=typeof t.model!="object"?t.model:t.model.key;const o=typeof t.model!="object"||typeof t.model.value=="undefined"?i:t.model.value;t.model={key:n,value:o}}function ng(t,e){const i=new Ws(t.view);return(n,o,r)=>{const s=i.match(o.viewItem);if(!s){return}const a=t.model.key;const c=typeof t.model.value=="function"?t.model.value(o.viewItem):t.model.value;if(c===null){return}if(og(t.view,o.viewItem)){s.match.name=true}else{delete s.match.name}if(!r.consumable.test(o.viewItem,s.match)){return}if(!o.modelRange){o=Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor))}const l=rg(o.modelRange,{key:a,value:c},e,r);if(l){r.consumable.consume(o.viewItem,s.match)}}}function og(t,e){const i=typeof t=="function"?t(e):t;if(typeof i=="object"&&!Xf(i)){return false}return!i.classes&&!i.attributes&&!i.styles}function rg(t,e,i,n){let o=false;for(const r of Array.from(t.getItems({shallow:i}))){if(n.schema.checkAttribute(r,e.key)){n.writer.setAttribute(e.key,e.value,r);o=true}}return o}function sg(t){const e=t.model;t.model=(t,i)=>{const n=typeof e=="string"?e:e(t);return i.createElement("$marker",{"data-name":n})}}class ag{constructor(t,e){this.model=t;this.view=new Bh(e);this.mapper=new Gh;this.downcastDispatcher=new Yh({mapper:this.mapper});const i=this.model.document;const n=i.selection;const o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(true)},{priority:"highest"});this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(false)},{priority:"lowest"});this.listenTo(i,"change",()=>{this.view.change(t=>{this.downcastDispatcher.convertChanges(i.differ,o,t);this.downcastDispatcher.convertSelection(n,o,t)})},{priority:"low"});this.listenTo(this.view.document,"selectionChange",Gf(this.model,this.mapper));this.downcastDispatcher.on("insert:$text",_f(),{priority:"lowest"});this.downcastDispatcher.on("remove",vf(),{priority:"low"});this.downcastDispatcher.on("selection",Af(),{priority:"low"});this.downcastDispatcher.on("selection",xf(),{priority:"low"});this.downcastDispatcher.on("selection",Cf(),{priority:"low"});this.view.document.roots.bindTo(this.model.document.roots).using(t=>{if(t.rootName=="$graveyard"){return null}const e=new cl(this.view.document,t.name);e.rootName=t.rootName;this.mapper.bindElements(t,e);return e})}destroy(){this.view.destroy();this.stopListening()}}vs(ag,Jc);class cg{constructor(){this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const i=this.get(t);if(!i){throw new ss["b"]("commandcollection-command-not-found: Command does not exist.",this,{commandName:t})}i.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands()){t.destroy()}}}class lg{constructor(){this._consumables=new Map}add(t,e){let i;if(t.is("text")||t.is("documentFragment")){this._consumables.set(t,true);return}if(!this._consumables.has(t)){i=new dg(t);this._consumables.set(t,i)}else{i=this._consumables.get(t)}i.add(e)}test(t,e){const i=this._consumables.get(t);if(i===undefined){return null}if(t.is("text")||t.is("documentFragment")){return i}return i.test(e)}consume(t,e){if(this.test(t,e)){if(t.is("text")||t.is("documentFragment")){this._consumables.set(t,false)}else{this._consumables.get(t).consume(e)}return true}return false}revert(t,e){const i=this._consumables.get(t);if(i!==undefined){if(t.is("text")||t.is("documentFragment")){this._consumables.set(t,true)}else{i.revert(e)}}}static consumablesFromElement(t){const e={element:t,name:true,attributes:[],classes:[],styles:[]};const i=t.getAttributeKeys();for(const t of i){if(t=="style"||t=="class"){continue}e.attributes.push(t)}const n=t.getClassNames();for(const t of n){e.classes.push(t)}const o=t.getStyleNames();for(const t of o){e.styles.push(t)}return e}static createFrom(t,e){if(!e){e=new lg(t)}if(t.is("text")){e.add(t);return e}if(t.is("element")){e.add(t,lg.consumablesFromElement(t))}if(t.is("documentFragment")){e.add(t)}for(const i of t.getChildren()){e=lg.createFrom(i,e)}return e}}class dg{constructor(t){this.element=t;this._canConsumeName=null;this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(t){if(t.name){this._canConsumeName=true}for(const e in this._consumables){if(e in t){this._add(e,t[e])}}}test(t){if(t.name&&!this._canConsumeName){return this._canConsumeName}for(const e in this._consumables){if(e in t){const i=this._test(e,t[e]);if(i!==true){return i}}}return true}consume(t){if(t.name){this._canConsumeName=false}for(const e in this._consumables){if(e in t){this._consume(e,t[e])}}}revert(t){if(t.name){this._canConsumeName=true}for(const e in this._consumables){if(e in t){this._revert(e,t[e])}}}_add(t,e){const i=Je(e)?e:[e];const n=this._consumables[t];for(const e of i){if(t==="attributes"&&(e==="class"||e==="style")){throw new ss["b"]("viewconsumable-invalid-attribute: Classes and styles should be handled separately.",this)}n.set(e,true);if(t==="styles"){for(const t of this.element.document.stylesProcessor.getRelatedStyles(e)){n.set(t,true)}}}}_test(t,e){const i=Je(e)?e:[e];const n=this._consumables[t];for(const e of i){if(t==="attributes"&&(e==="class"||e==="style")){const t=e=="class"?"classes":"styles";const i=this._test(t,[...this._consumables[t].keys()]);if(i!==true){return i}}else{const t=n.get(e);if(t===undefined){return null}if(!t){return false}}}return true}_consume(t,e){const i=Je(e)?e:[e];const n=this._consumables[t];for(const e of i){if(t==="attributes"&&(e==="class"||e==="style")){const t=e=="class"?"classes":"styles";this._consume(t,[...this._consumables[t].keys()])}else{n.set(e,false);if(t=="styles"){for(const t of this.element.document.stylesProcessor.getRelatedStyles(e)){n.set(t,false)}}}}}_revert(t,e){const i=Je(e)?e:[e];const n=this._consumables[t];for(const e of i){if(t==="attributes"&&(e==="class"||e==="style")){const t=e=="class"?"classes":"styles";this._revert(t,[...this._consumables[t].keys()])}else{const t=n.get(e);if(t===false){n.set(e,true)}}}}}class ug{constructor(){this._sourceDefinitions={};this._attributeProperties={};this.decorate("checkChild");this.decorate("checkAttribute");this.on("checkAttribute",(t,e)=>{e[0]=new hg(e[0])},{priority:"highest"});this.on("checkChild",(t,e)=>{e[0]=new hg(e[0]);e[1]=this.getDefinition(e[1])},{priority:"highest"})}register(t,e){if(this._sourceDefinitions[t]){throw new ss["b"]("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",this,{itemName:t})}this._sourceDefinitions[t]=[Object.assign({},e)];this._clearCache()}extend(t,e){if(!this._sourceDefinitions[t]){throw new ss["b"]("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",this,{itemName:t})}this._sourceDefinitions[t].push(Object.assign({},e));this._clearCache()}getDefinitions(){if(!this._compiledDefinitions){this._compile()}return this._compiledDefinitions}getDefinition(t){let e;if(typeof t=="string"){e=t}else if(t.is&&(t.is("text")||t.is("textProxy"))){e="$text"}else{e=t.name}return this.getDefinitions()[e]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const e=this.getDefinition(t);return!!(e&&e.isBlock)}isLimit(t){const e=this.getDefinition(t);if(!e){return false}return!!(e.isLimit||e.isObject)}isObject(t){const e=this.getDefinition(t);return!!(e&&e.isObject)}isInline(t){const e=this.getDefinition(t);return!!(e&&e.isInline)}checkChild(t,e){if(!e){return false}return this._checkContextMatch(e,t)}checkAttribute(t,e){const i=this.getDefinition(t.last);if(!i){return false}return i.allowAttributes.includes(e)}checkMerge(t,e=null){if(t instanceof Uh){const e=t.nodeBefore;const i=t.nodeAfter;if(!(e instanceof jh)){throw new ss["b"]("schema-check-merge-no-element-before: The node before the merge position must be an element.",this)}if(!(i instanceof jh)){throw new ss["b"]("schema-check-merge-no-element-after: The node after the merge position must be an element.",this)}return this.checkMerge(e,i)}for(const i of e.getChildren()){if(!this.checkChild(t,i)){return false}}return true}addChildCheck(t){this.on("checkChild",(e,[i,n])=>{if(!n){return}const o=t(i,n);if(typeof o=="boolean"){e.stop();e.return=o}},{priority:"high"})}addAttributeCheck(t){this.on("checkAttribute",(e,[i,n])=>{const o=t(i,n);if(typeof o=="boolean"){e.stop();e.return=o}},{priority:"high"})}setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}getAttributeProperties(t){return this._attributeProperties[t]||{}}getLimitElement(t){let e;if(t instanceof Uh){e=t.parent}else{const i=t instanceof $h?[t]:Array.from(t.getRanges());e=i.reduce((t,e)=>{const i=e.getCommonAncestor();if(!t){return i}return t.getCommonAncestor(i,{includeSelf:true})},null)}while(!this.isLimit(e)){if(e.parent){e=e.parent}else{break}}return e}checkAttributeInSelection(t,e){if(t.isCollapsed){const i=t.getFirstPosition();const n=[...i.getAncestors(),new Lh("",t.getAttributes())];return this.checkAttribute(n,e)}else{const i=t.getRanges();for(const t of i){for(const i of t){if(this.checkAttribute(i.item,e)){return true}}}}return false}*getValidRanges(t,e){t=Pg(t);for(const i of t){yield*this._getValidRangesForRange(i,e)}}getNearestSelectionRange(t,e="both"){if(this.checkChild(t,"$text")){return new $h(t)}let i,n;const o=t.getAncestors().reverse().find(t=>this.isLimit(t))||t.root;if(e=="both"||e=="backward"){i=new Wh({boundaries:$h._createIn(o),startPosition:t,direction:"backward"})}if(e=="both"||e=="forward"){n=new Wh({boundaries:$h._createIn(o),startPosition:t})}for(const t of Tg(i,n)){const e=t.walker==i?"elementEnd":"elementStart";const n=t.value;if(n.type==e&&this.isObject(n.item)){return $h._createOn(n.item)}if(this.checkChild(n.nextPosition,"$text")){return new $h(n.nextPosition)}}return null}findAllowedParent(t,e){let i=t.parent;while(i){if(this.checkChild(i,e)){return i}if(this.isLimit(i)){return null}i=i.parent}return null}removeDisallowedAttributes(t,e){for(const i of t){if(i.is("text")){Sg(this,i,e)}else{const t=$h._createIn(i);const n=t.getPositions();for(const t of n){const i=t.nodeBefore||t.parent;Sg(this,i,e)}}}}createContext(t){return new hg(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={};const e=this._sourceDefinitions;const i=Object.keys(e);for(const n of i){t[n]=fg(e[n],n)}for(const e of i){gg(t,e)}for(const e of i){mg(t,e)}for(const e of i){pg(t,e);bg(t,e)}for(const e of i){wg(t,e);kg(t,e)}this._compiledDefinitions=t}_checkContextMatch(t,e,i=e.length-1){const n=e.getItem(i);if(t.allowIn.includes(n.name)){if(i==0){return true}else{const t=this.getDefinition(n);return this._checkContextMatch(t,e,i-1)}}else{return false}}*_getValidRangesForRange(t,e){let i=t.start;let n=t.start;for(const o of t.getItems({shallow:true})){if(o.is("element")){yield*this._getValidRangesForRange($h._createIn(o),e)}if(!this.checkAttribute(o,e)){if(!i.isEqual(n)){yield new $h(i,n)}i=Uh._createAfter(o)}n=Uh._createAfter(o)}if(!i.isEqual(n)){yield new $h(i,n)}}}vs(ug,Jc);class hg{constructor(t){if(t instanceof hg){return t}if(typeof t=="string"){t=[t]}else if(!Array.isArray(t)){t=t.getAncestors({includeSelf:true})}if(t[0]&&typeof t[0]!="string"&&t[0].is("documentFragment")){t.shift()}this._items=t.map(Ag)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new hg([t]);e._items=[...this._items,...e._items];return e}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function fg(t,e){const i={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};_g(t,i);vg(t,i,"allowIn");vg(t,i,"allowContentOf");vg(t,i,"allowWhere");vg(t,i,"allowAttributes");vg(t,i,"allowAttributesOf");vg(t,i,"inheritTypesFrom");yg(t,i);return i}function gg(t,e){for(const i of t[e].allowContentOf){if(t[i]){const n=xg(t,i);n.forEach(t=>{t.allowIn.push(e)})}}delete t[e].allowContentOf}function mg(t,e){for(const i of t[e].allowWhere){const n=t[i];if(n){const i=n.allowIn;t[e].allowIn.push(...i)}}delete t[e].allowWhere}function pg(t,e){for(const i of t[e].allowAttributesOf){const n=t[i];if(n){const i=n.allowAttributes;t[e].allowAttributes.push(...i)}}delete t[e].allowAttributesOf}function bg(t,e){const i=t[e];for(const e of i.inheritTypesFrom){const n=t[e];if(n){const t=Object.keys(n).filter(t=>t.startsWith("is"));for(const e of t){if(!(e in i)){i[e]=n[e]}}}}delete i.inheritTypesFrom}function wg(t,e){const i=t[e];const n=i.allowIn.filter(e=>t[e]);i.allowIn=Array.from(new Set(n))}function kg(t,e){const i=t[e];i.allowAttributes=Array.from(new Set(i.allowAttributes))}function _g(t,e){for(const i of t){const t=Object.keys(i).filter(t=>t.startsWith("is"));for(const n of t){e[n]=i[n]}}}function vg(t,e,i){for(const n of t){if(typeof n[i]=="string"){e[i].push(n[i])}else if(Array.isArray(n[i])){e[i].push(...n[i])}}}function yg(t,e){for(const i of t){const t=i.inheritAllFrom;if(t){e.allowContentOf.push(t);e.allowWhere.push(t);e.allowAttributesOf.push(t);e.inheritTypesFrom.push(t)}}}function xg(t,e){const i=t[e];return Cg(t).filter(t=>t.allowIn.includes(i.name))}function Cg(t){return Object.keys(t).map(e=>t[e])}function Ag(t){if(typeof t=="string"){return{name:t,*getAttributeKeys(){},getAttribute(){}}}else{return{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute(e){return t.getAttribute(e)}}}}function*Tg(t,e){let i=false;while(!i){i=true;if(t){const e=t.next();if(!e.done){i=false;yield{walker:t,value:e.value}}}if(e){const t=e.next();if(!t.done){i=false;yield{walker:e,value:t.value}}}}}function*Pg(t){for(const e of t){yield*e.getMinimalFlatRanges()}}function Sg(t,e,i){for(const n of e.getAttributeKeys()){if(!t.checkAttribute(e,n)){i.removeAttribute(n,e)}}}class Eg{constructor(t={}){this._splitParts=new Map;this._modelCursor=null;this.conversionApi=Object.assign({},t);this.conversionApi.convertItem=this._convertItem.bind(this);this.conversionApi.convertChildren=this._convertChildren.bind(this);this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this);this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(t,e,i=["$root"]){this.fire("viewCleanup",t);this._modelCursor=Og(i,e);this.conversionApi.writer=e;this.conversionApi.consumable=lg.createFrom(t);this.conversionApi.store={};const{modelRange:n}=this._convertItem(t,this._modelCursor);const o=e.createDocumentFragment();if(n){this._removeEmptyElements();for(const t of Array.from(this._modelCursor.parent.getChildren())){e.append(t,o)}o.markers=Rg(o,e)}this._modelCursor=null;this._splitParts.clear();this.conversionApi.writer=null;this.conversionApi.store=null;return o}_convertItem(t,e){const i=Object.assign({viewItem:t,modelCursor:e,modelRange:null});if(t.is("element")){this.fire("element:"+t.name,i,this.conversionApi)}else if(t.is("text")){this.fire("text",i,this.conversionApi)}else{this.fire("documentFragment",i,this.conversionApi)}if(i.modelRange&&!(i.modelRange instanceof $h)){throw new ss["b"]("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.",this)}return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(t,e){const i=new $h(e);let n=e;for(const e of Array.from(t.getChildren())){const t=this._convertItem(e,n);if(t.modelRange instanceof $h){i.end=t.modelRange.end;n=t.modelCursor}}return{modelRange:i,modelCursor:n}}_splitToAllowedParent(t,e){const i=this.conversionApi.schema.findAllowedParent(e,t);if(!i){return null}if(i===e.parent){return{position:e}}if(this._modelCursor.parent.getAncestors().includes(i)){return null}const n=this.conversionApi.writer.split(e,i);const o=[];for(const t of n.range.getWalker()){if(t.type=="elementEnd"){o.push(t.item)}else{const e=o.pop();const i=t.item;this._registerSplitPair(e,i)}}return{position:n.position,cursorParent:n.range.end.parent}}_registerSplitPair(t,e){if(!this._splitParts.has(t)){this._splitParts.set(t,[t])}const i=this._splitParts.get(t);this._splitParts.set(e,i);i.push(e)}_getSplitParts(t){let e;if(!this._splitParts.has(t)){e=[t]}else{e=this._splitParts.get(t)}return e}_removeEmptyElements(){let t=false;for(const e of this._splitParts.keys()){if(e.isEmpty){this.conversionApi.writer.remove(e);this._splitParts.delete(e);t=true}}if(t){this._removeEmptyElements()}}}vs(Eg,ds);function Rg(t,e){const i=new Set;const n=new Map;const o=$h._createIn(t).getItems();for(const t of o){if(t.name=="$marker"){i.add(t)}}for(const t of i){const i=t.getAttribute("data-name");const o=e.createPositionBefore(t);if(!n.has(i)){n.set(i,new $h(o.clone()))}else{n.get(i).end=o.clone()}e.remove(t)}return n}function Og(t,e){let i;for(const n of new hg(t)){const t={};for(const e of n.getAttributeKeys()){t[e]=n.getAttribute(e)}const o=e.createElement(n.name,t);if(i){e.append(o,i)}i=Uh._createAt(o,0)}return i}class Ig{constructor(t,e){this.model=t;this.stylesProcessor=e;this.processor;this.mapper=new Gh;this.downcastDispatcher=new Yh({mapper:this.mapper});this.downcastDispatcher.on("insert:$text",_f(),{priority:"lowest"});this.upcastDispatcher=new Eg({schema:t.schema});this.viewDocument=new pl(e);this._viewWriter=new $l(this.viewDocument);this.upcastDispatcher.on("text",$f(),{priority:"lowest"});this.upcastDispatcher.on("element",Uf(),{priority:"lowest"});this.upcastDispatcher.on("documentFragment",Uf(),{priority:"lowest"});this.decorate("init");this.on("init",()=>{this.fire("ready")},{priority:"lowest"})}get(t){const{rootName:e="main",trim:i="empty"}=t||{};if(!this._checkIfRootsExists([e])){throw new ss["b"]("datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.",this)}const n=this.model.document.getRoot(e);if(i==="empty"&&!this.model.hasContent(n,{ignoreWhitespaces:true})){return""}return this.stringify(n)}stringify(t){const e=this.toView(t);return this.processor.toData(e)}toView(t){const e=this.viewDocument;const i=this._viewWriter;this.mapper.clearBindings();const n=$h._createIn(t);const o=new ql(e);this.mapper.bindElements(t,o);this.downcastDispatcher.convertInsert(n,i);if(!t.is("documentFragment")){const e=Vg(t);for(const[t,n]of e){this.downcastDispatcher.convertMarkerAdd(t,n,i)}}return o}init(t){if(this.model.document.version){throw new ss["b"]("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.",this)}let e={};if(typeof t==="string"){e.main=t}else{e=t}if(!this._checkIfRootsExists(Object.keys(e))){throw new ss["b"]("datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.",this)}this.model.enqueueChange("transparent",t=>{for(const i of Object.keys(e)){const n=this.model.document.getRoot(i);t.insert(this.parse(e[i],n),n,0)}});return Promise.resolve()}set(t){let e={};if(typeof t==="string"){e.main=t}else{e=t}if(!this._checkIfRootsExists(Object.keys(e))){throw new ss["b"]("datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.",this)}this.model.enqueueChange("transparent",t=>{t.setSelection(null);t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const i of Object.keys(e)){const n=this.model.document.getRoot(i);t.remove(t.createRangeIn(n));t.insert(this.parse(e[i],n),n,0)}})}parse(t,e="$root"){const i=this.processor.toView(t);return this.toModel(i,e)}toModel(t,e="$root"){return this.model.change(i=>this.upcastDispatcher.convert(t,i,e))}addStyleProcessorRules(t){t(this.stylesProcessor)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t){if(!this.model.document.getRootNames().includes(e)){return false}}return true}}vs(Ig,Jc);function Vg(t){const e=[];const i=t.root.document;if(!i){return[]}const n=$h._createIn(t);for(const t of i.model.markers){const i=n.getIntersection(t.getRange());if(i){e.push([t.name,i])}}return e}class Ng{constructor(t,e){this._helpers=new Map;this._downcast=Array.isArray(t)?t:[t];this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:true});this._upcast=Array.isArray(e)?e:[e];this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:false})}addAlias(t,e){const i=this._downcast.includes(e);const n=this._upcast.includes(e);if(!n&&!i){throw new ss["b"]("conversion-add-alias-dispatcher-not-registered: "+"Trying to register and alias for a dispatcher that nas not been registered.",this)}this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:i})}for(t){if(!this._helpers.has(t)){throw new ss["b"]("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.",this)}return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:i}of Mg(t)){this.for("upcast").elementToElement({model:e,view:i,converterPriority:t.converterPriority})}}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:i}of Mg(t)){this.for("upcast").elementToAttribute({view:i,model:e,converterPriority:t.converterPriority})}}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:i}of Mg(t)){this.for("upcast").attributeToAttribute({view:i,model:e})}}_createConversionHelpers({name:t,dispatchers:e,isDowncast:i}){if(this._helpers.has(t)){throw new ss["b"]("conversion-group-exists: Trying to register a group name that has already been registered.",this)}const n=i?new kf(e):new qf(e);this._helpers.set(t,n)}}function*Mg(t){if(t.model.values){for(const e of t.model.values){const i={key:t.model.key,value:e};const n=t.view[e];const o=t.upcastAlso?t.upcastAlso[e]:undefined;yield*Bg(i,n,o)}}else{yield*Bg(t.model,t.view,t.upcastAlso)}}function*Bg(t,e,i){yield{model:t,view:e};if(i){i=Array.isArray(i)?i:[i];for(const e of i){yield{model:t,view:e}}}}class zg{constructor(t="default"){this.operations=[];this.type=t}get baseVersion(){for(const t of this.operations){if(t.baseVersion!==null){return t.baseVersion}}return null}addOperation(t){t.batch=this;this.operations.push(t);return t}}class Lg{constructor(t){this.baseVersion=t;this.isDocumentOperation=this.baseVersion!==null;this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);t.__className=this.constructor.className;delete t.batch;delete t.isDocumentOperation;return t}static get className(){return"Operation"}static fromJSON(t){return new this(t.baseVersion)}}class Fg{constructor(t){this.markers=new Map;this._children=new Dh;if(t){this._insertChild(0,t)}}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}is(t){return t=="documentFragment"||t=="model:documentFragment"}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const i of t){e=e.getChild(e.offsetToIndex(i))}return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children){t.push(e.toJSON())}return t}static fromJSON(t){const e=[];for(const i of t){if(i.name){e.push(jh.fromJSON(i))}else{e.push(Lh.fromJSON(i))}}return new Fg(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const i=Dg(e);for(const t of i){if(t.parent!==null){t._remove()}t.parent=this}this._children._insertNodes(t,i)}_removeChildren(t,e=1){const i=this._children._removeNodes(t,e);for(const t of i){t.parent=null}return i}}function Dg(t){if(typeof t=="string"){return[new Lh(t)]}if(!js(t)){t=[t]}return Array.from(t).map(t=>{if(typeof t=="string"){return new Lh(t)}if(t instanceof Fh){return new Lh(t.data,t.getAttributes())}return t})}function jg(t,e){e=Ug(e);const i=e.reduce((t,e)=>t+e.offsetSize,0);const n=t.parent;Gg(t);const o=t.index;n._insertChild(o,e);$g(n,o+e.length);$g(n,o);return new $h(t,t.getShiftedBy(i))}function Hg(t){if(!t.isFlat){throw new ss["b"]("operation-utils-remove-range-not-flat: "+"Trying to remove a range which starts and ends in different element.",this)}const e=t.start.parent;Gg(t.start);Gg(t.end);const i=e._removeChildren(t.start.index,t.end.index-t.start.index);$g(e,t.start.index);return i}function Wg(t,e){if(!t.isFlat){throw new ss["b"]("operation-utils-move-range-not-flat: "+"Trying to move a range which starts and ends in different element.",this)}const i=Hg(t);e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset);return jg(e,i)}function qg(t,e,i){Gg(t.start);Gg(t.end);for(const n of t.getItems({shallow:true})){const t=n.is("textProxy")?n.textNode:n;if(i!==null){t._setAttribute(e,i)}else{t._removeAttribute(e)}$g(t.parent,t.index)}$g(t.end.parent,t.end.index)}function Ug(t){const e=[];if(!(t instanceof Array)){t=[t]}for(let i=0;i<t.length;i++){if(typeof t[i]=="string"){e.push(new Lh(t[i]))}else if(t[i]instanceof Fh){e.push(new Lh(t[i].data,t[i].getAttributes()))}else if(t[i]instanceof Fg||t[i]instanceof Dh){for(const n of t[i]){e.push(n)}}else if(t[i]instanceof zh){e.push(t[i])}}for(let t=1;t<e.length;t++){const i=e[t];const n=e[t-1];if(i instanceof Lh&&n instanceof Lh&&Kg(i,n)){e.splice(t-1,2,new Lh(n.data+i.data,n.getAttributes()));t--}}return e}function $g(t,e){const i=t.getChild(e-1);const n=t.getChild(e);if(i&&n&&i.is("text")&&n.is("text")&&Kg(i,n)){const o=new Lh(i.data+n.data,i.getAttributes());t._removeChildren(e-1,2);t._insertChild(e-1,o)}}function Gg(t){const e=t.textNode;const i=t.parent;if(e){const n=t.offset-e.startOffset;const o=e.index;i._removeChildren(o,1);const r=new Lh(e.data.substr(0,n),e.getAttributes());const s=new Lh(e.data.substr(n),e.getAttributes());i._insertChild(o,[r,s])}}function Kg(t,e){const i=t.getAttributes();const n=e.getAttributes();for(const t of i){if(t[1]!==e.getAttribute(t[0])){return false}n.next()}return n.next().done}function Jg(t,e){return qu(t,e)}var Yg=Jg;class Qg extends Lg{constructor(t,e,i,n,o){super(o);this.range=t.clone();this.key=e;this.oldValue=i===undefined?null:i;this.newValue=n===undefined?null:n}get type(){if(this.oldValue===null){return"addAttribute"}else if(this.newValue===null){return"removeAttribute"}else{return"changeAttribute"}}clone(){return new Qg(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Qg(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();t.range=this.range.toJSON();return t}_validate(){if(!this.range.isFlat){throw new ss["b"]("attribute-operation-range-not-flat: The range to change is not flat.",this)}for(const t of this.range.getItems({shallow:true})){if(this.oldValue!==null&&!Yg(t.getAttribute(this.key),this.oldValue)){throw new ss["b"]("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's "+"old attribute value.",this,{item:t,key:this.key,value:this.oldValue})}if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key)){throw new ss["b"]("attribute-operation-attribute-exists: The attribute with given key already exists.",this,{node:t,key:this.key})}}}_execute(){if(!Yg(this.oldValue,this.newValue)){qg(this.range,this.key,this.newValue)}}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Qg($h.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Xg extends Lg{constructor(t,e){super(null);this.sourcePosition=t.clone();this.howMany=e}get type(){return"detach"}toJSON(){const t=super.toJSON();t.sourcePosition=this.sourcePosition.toJSON();return t}_validate(){if(this.sourcePosition.root.document){throw new ss["b"]("detach-operation-on-document-node: Cannot detach document node.",this)}}_execute(){Hg($h._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Zg extends Lg{constructor(t,e,i,n){super(n);this.sourcePosition=t.clone();this.sourcePosition.stickiness="toNext";this.howMany=e;this.targetPosition=i.clone();this.targetPosition.stickiness="toNone"}get type(){if(this.targetPosition.root.rootName=="$graveyard"){return"remove"}else if(this.sourcePosition.root.rootName=="$graveyard"){return"reinsert"}return"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent;const e=this.targetPosition.parent;const i=this.sourcePosition.offset;const n=this.targetPosition.offset;if(i+this.howMany>t.maxOffset){throw new ss["b"]("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.",this)}else if(t===e&&i<n&&n<i+this.howMany){throw new ss["b"]("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.",this)}else if(this.sourcePosition.root==this.targetPosition.root){if(Vs(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=i&&this.targetPosition.path[t]<i+this.howMany){throw new ss["b"]("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.",this)}}}}_execute(){Wg($h._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();t.sourcePosition=this.sourcePosition.toJSON();t.targetPosition=this.targetPosition.toJSON();return t}static get className(){return"MoveOperation"}static fromJSON(t,e){const i=Uh.fromJSON(t.sourcePosition,e);const n=Uh.fromJSON(t.targetPosition,e);return new this(i,t.howMany,n,t.baseVersion)}}class tm extends Lg{constructor(t,e,i){super(i);this.position=t.clone();this.position.stickiness="toNone";this.nodes=new Dh(Ug(e));this.shouldReceiveAttributes=false}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const t=new Dh([...this.nodes].map(t=>t._clone(true)));const e=new tm(this.position,t,this.baseVersion);e.shouldReceiveAttributes=this.shouldReceiveAttributes;return e}getReversed(){const t=this.position.root.document.graveyard;const e=new Uh(t,[0]);return new Zg(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset){throw new ss["b"]("insert-operation-position-invalid: Insertion position is invalid.",this)}}_execute(){const t=this.nodes;this.nodes=new Dh([...t].map(t=>t._clone(true)));jg(this.position,t)}toJSON(){const t=super.toJSON();t.position=this.position.toJSON();t.nodes=this.nodes.toJSON();return t}static get className(){return"InsertOperation"}static fromJSON(t,e){const i=[];for(const e of t.nodes){if(e.name){i.push(jh.fromJSON(e))}else{i.push(Lh.fromJSON(e))}}const n=new tm(Uh.fromJSON(t.position,e),i,t.baseVersion);n.shouldReceiveAttributes=t.shouldReceiveAttributes;return n}}class em extends Lg{constructor(t,e,i,n,o,r){super(r);this.name=t;this.oldRange=e?e.clone():null;this.newRange=i?i.clone():null;this.affectsData=o;this._markers=n}get type(){return"marker"}clone(){return new em(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new em(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){const t=this.newRange?"_set":"_remove";this._markers[t](this.name,this.newRange,true,this.affectsData)}toJSON(){const t=super.toJSON();if(this.oldRange){t.oldRange=this.oldRange.toJSON()}if(this.newRange){t.newRange=this.newRange.toJSON()}delete t._markers;return t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new em(t.name,t.oldRange?$h.fromJSON(t.oldRange,e):null,t.newRange?$h.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class im extends Lg{constructor(t,e,i,n){super(n);this.position=t;this.position.stickiness="toNext";this.oldName=e;this.newName=i}get type(){return"rename"}clone(){return new im(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new im(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof jh)){throw new ss["b"]("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.",this)}else if(t.name!==this.oldName){throw new ss["b"]("rename-operation-wrong-name: Element to change has different name than operation's old name.",this)}}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();t.position=this.position.toJSON();return t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new im(Uh.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class nm extends Lg{constructor(t,e,i,n,o){super(o);this.root=t;this.key=e;this.oldValue=i;this.newValue=n}get type(){if(this.oldValue===null){return"addRootAttribute"}else if(this.newValue===null){return"removeRootAttribute"}else{return"changeRootAttribute"}}clone(){return new nm(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new nm(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment")){throw new ss["b"]("rootattribute-operation-not-a-root: The element to change is not a root element.",this,{root:this.root,key:this.key})}if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue){throw new ss["b"]("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's "+"old attribute value.",this,{root:this.root,key:this.key})}if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key)){throw new ss["b"]("rootattribute-operation-attribute-exists: The attribute with given key already exists.",this,{root:this.root,key:this.key})}}_execute(){if(this.newValue!==null){this.root._setAttribute(this.key,this.newValue)}else{this.root._removeAttribute(this.key)}}toJSON(){const t=super.toJSON();t.root=this.root.toJSON();return t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root)){throw new ss["b"]("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",this,{rootName:t.root})}return new nm(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class om extends Lg{constructor(t,e,i,n,o){super(o);this.sourcePosition=t.clone();this.sourcePosition.stickiness="toPrevious";this.howMany=e;this.targetPosition=i.clone();this.targetPosition.stickiness="toNext";this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new Uh(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new $h(this.sourcePosition,t)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this);const e=this.sourcePosition.path.slice(0,-1);const i=new Uh(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);const n=new rm(t,this.howMany,this.graveyardPosition,this.baseVersion+1);n.insertionPosition=i;return n}_validate(){const t=this.sourcePosition.parent;const e=this.targetPosition.parent;if(!t.parent){throw new ss["b"]("merge-operation-source-position-invalid: Merge source position is invalid.",this)}else if(!e.parent){throw new ss["b"]("merge-operation-target-position-invalid: Merge target position is invalid.",this)}else if(this.howMany!=t.maxOffset){throw new ss["b"]("merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.",this)}}_execute(){const t=this.sourcePosition.parent;const e=$h._createIn(t);Wg(e,this.targetPosition);Wg($h._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();t.sourcePosition=t.sourcePosition.toJSON();t.targetPosition=t.targetPosition.toJSON();t.graveyardPosition=t.graveyardPosition.toJSON();return t}static get className(){return"MergeOperation"}static fromJSON(t,e){const i=Uh.fromJSON(t.sourcePosition,e);const n=Uh.fromJSON(t.targetPosition,e);const o=Uh.fromJSON(t.graveyardPosition,e);return new this(i,t.howMany,n,o,t.baseVersion)}}class rm extends Lg{constructor(t,e,i,n){super(n);this.splitPosition=t.clone();this.splitPosition.stickiness="toNext";this.howMany=e;this.insertionPosition=rm.getInsertionPosition(t);this.insertionPosition.stickiness="toNone";this.graveyardPosition=i?i.clone():null;if(this.graveyardPosition){this.graveyardPosition.stickiness="toNext"}}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();t.push(0);return new Uh(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new $h(this.splitPosition,t)}clone(){const t=new this.constructor(this.splitPosition,this.howMany,this.graveyardPosition,this.baseVersion);t.insertionPosition=this.insertionPosition;return t}getReversed(){const t=this.splitPosition.root.document.graveyard;const e=new Uh(t,[0]);return new om(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent;const e=this.splitPosition.offset;if(!t||t.maxOffset<e){throw new ss["b"]("split-operation-position-invalid: Split position is invalid.",this)}else if(!t.parent){throw new ss["b"]("split-operation-split-in-root: Cannot split root element.",this)}else if(this.howMany!=t.maxOffset-this.splitPosition.offset){throw new ss["b"]("split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.",this)}else if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter){throw new ss["b"]("split-operation-graveyard-position-invalid: Graveyard position invalid.",this)}}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition){Wg($h._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition)}else{const e=t._clone();jg(this.insertionPosition,e)}const e=new $h(Uh._createAt(t,this.splitPosition.offset),Uh._createAt(t,t.maxOffset));Wg(e,this.moveTargetPosition)}toJSON(){const t=super.toJSON();t.splitPosition=this.splitPosition.toJSON();t.insertionPosition=this.insertionPosition.toJSON();if(this.graveyardPosition){t.graveyardPosition=this.graveyardPosition.toJSON()}return t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);e[e.length-1]++;return new Uh(t.root,e)}static fromJSON(t,e){const i=Uh.fromJSON(t.splitPosition,e);const n=Uh.fromJSON(t.insertionPosition,e);const o=t.graveyardPosition?Uh.fromJSON(t.graveyardPosition,e):null;const r=new this(i,t.howMany,o,t.baseVersion);r.insertionPosition=n;return r}}class sm extends jh{constructor(t,e,i="main"){super(e);this._document=t;this.rootName=i}get document(){return this._document}is(t,e){const i=t.replace("model:","");if(!e){return i=="rootElement"||super.is(t)}else{return i=="rootElement"&&e==this.name||super.is(t,e)}}toJSON(){return this.rootName}}class am{constructor(t,e){this.model=t;this.batch=e}createText(t,e){return new Lh(t,e)}createElement(t,e){return new jh(t,e)}createDocumentFragment(){return new Fg}insert(t,e,i=0){this._assertWriterUsedCorrectly();if(t instanceof Lh&&t.data==""){return}const n=Uh._createAt(e,i);if(t.parent){if(hm(t.root,n.root)){this.move($h._createOn(t),n);return}else{if(t.root.document){throw new ss["b"]("model-writer-insert-forbidden-move: "+"Cannot move a node from a document to a different tree. "+"It is forbidden to move a node that was already in a document outside of it.",this)}else{this.remove(t)}}}const o=n.root.document?n.root.document.version:null;const r=new tm(n,t,o);if(t instanceof Lh){r.shouldReceiveAttributes=true}this.batch.addOperation(r);this.model.applyOperation(r);if(t instanceof Fg){for(const[e,i]of t.markers){const t=Uh._createAt(i.root,0);const o=new $h(i.start._getCombined(t,n),i.end._getCombined(t,n));const r={range:o,usingOperation:true,affectsData:true};if(this.model.markers.has(e)){this.updateMarker(e,r)}else{this.addMarker(e,r)}}}}insertText(t,e,i,n){if(e instanceof Fg||e instanceof jh||e instanceof Uh){this.insert(this.createText(t),e,i)}else{this.insert(this.createText(t,e),i,n)}}insertElement(t,e,i,n){if(e instanceof Fg||e instanceof jh||e instanceof Uh){this.insert(this.createElement(t),e,i)}else{this.insert(this.createElement(t,e),i,n)}}append(t,e){this.insert(t,e,"end")}appendText(t,e,i){if(e instanceof Fg||e instanceof jh){this.insert(this.createText(t),e,"end")}else{this.insert(this.createText(t,e),i,"end")}}appendElement(t,e,i){if(e instanceof Fg||e instanceof jh){this.insert(this.createElement(t),e,"end")}else{this.insert(this.createElement(t,e),i,"end")}}setAttribute(t,e,i){this._assertWriterUsedCorrectly();if(i instanceof $h){const n=i.getMinimalFlatRanges();for(const i of n){cm(this,t,e,i)}}else{lm(this,t,e,i)}}setAttributes(t,e){for(const[i,n]of Hs(t)){this.setAttribute(i,n,e)}}removeAttribute(t,e){this._assertWriterUsedCorrectly();if(e instanceof $h){const i=e.getMinimalFlatRanges();for(const e of i){cm(this,t,null,e)}}else{lm(this,t,null,e)}}clearAttributes(t){this._assertWriterUsedCorrectly();const e=t=>{for(const e of t.getAttributeKeys()){this.removeAttribute(e,t)}};if(!(t instanceof $h)){e(t)}else{for(const i of t.getItems()){e(i)}}}move(t,e,i){this._assertWriterUsedCorrectly();if(!(t instanceof $h)){throw new ss["b"]("writer-move-invalid-range: Invalid range to move.",this)}if(!t.isFlat){throw new ss["b"]("writer-move-range-not-flat: Range to move is not flat.",this)}const n=Uh._createAt(e,i);if(n.isEqual(t.start)){return}this._addOperationForAffectedMarkers("move",t);if(!hm(t.root,n.root)){throw new ss["b"]("writer-move-different-document: Range is going to be moved between different documents.",this)}const o=t.root.document?t.root.document.version:null;const r=new Zg(t.start,t.end.offset-t.start.offset,n,o);this.batch.addOperation(r);this.model.applyOperation(r)}remove(t){this._assertWriterUsedCorrectly();const e=t instanceof $h?t:$h._createOn(t);const i=e.getMinimalFlatRanges().reverse();for(const t of i){this._addOperationForAffectedMarkers("move",t);um(t.start,t.end.offset-t.start.offset,this.batch,this.model)}}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore;const i=t.nodeAfter;this._addOperationForAffectedMarkers("merge",t);if(!(e instanceof jh)){throw new ss["b"]("writer-merge-no-element-before: Node before merge position must be an element.",this)}if(!(i instanceof jh)){throw new ss["b"]("writer-merge-no-element-after: Node after merge position must be an element.",this)}if(!t.root.document){this._mergeDetached(t)}else{this._merge(t)}}createPositionFromPath(t,e,i){return this.model.createPositionFromPath(t,e,i)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(t,e,i){return this.model.createSelection(t,e,i)}_mergeDetached(t){const e=t.nodeBefore;const i=t.nodeAfter;this.move($h._createIn(i),Uh._createAt(e,"end"));this.remove(i)}_merge(t){const e=Uh._createAt(t.nodeBefore,"end");const i=Uh._createAt(t.nodeAfter,0);const n=t.root.document.graveyard;const o=new Uh(n,[0]);const r=t.root.document.version;const s=new om(i,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(s);this.model.applyOperation(s)}rename(t,e){this._assertWriterUsedCorrectly();if(!(t instanceof jh)){throw new ss["b"]("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.",this)}const i=t.root.document?t.root.document.version:null;const n=new im(Uh._createBefore(t),t.name,e,i);this.batch.addOperation(n);this.model.applyOperation(n)}split(t,e){this._assertWriterUsedCorrectly();let i=t.parent;if(!i.parent){throw new ss["b"]("writer-split-element-no-parent: Element with no parent can not be split.",this)}if(!e){e=i.parent}if(!t.parent.getAncestors({includeSelf:true}).includes(e)){throw new ss["b"]("writer-split-invalid-limit-element: Limit element is not a position ancestor.",this)}let n,o;do{const e=i.root.document?i.root.document.version:null;const r=i.maxOffset-t.offset;const s=new rm(t,r,null,e);this.batch.addOperation(s);this.model.applyOperation(s);if(!n&&!o){n=i;o=t.parent.nextSibling}t=this.createPositionAfter(t.parent);i=t.parent}while(i!==e);return{position:t,range:new $h(Uh._createAt(n,"end"),Uh._createAt(o,0))}}wrap(t,e){this._assertWriterUsedCorrectly();if(!t.isFlat){throw new ss["b"]("writer-wrap-range-not-flat: Range to wrap is not flat.",this)}const i=e instanceof jh?e:new jh(e);if(i.childCount>0){throw new ss["b"]("writer-wrap-element-not-empty: Element to wrap with is not empty.",this)}if(i.parent!==null){throw new ss["b"]("writer-wrap-element-attached: Element to wrap with is already attached to tree model.",this)}this.insert(i,t.start);const n=new $h(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(n,Uh._createAt(i,0))}unwrap(t){this._assertWriterUsedCorrectly();if(t.parent===null){throw new ss["b"]("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.",this)}this.move($h._createIn(t),this.createPositionAfter(t));this.remove(t)}addMarker(t,e){this._assertWriterUsedCorrectly();if(!e||typeof e.usingOperation!="boolean"){throw new ss["b"]("writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.",this)}const i=e.usingOperation;const n=e.range;const o=e.affectsData===undefined?false:e.affectsData;if(this.model.markers.has(t)){throw new ss["b"]("writer-addMarker-marker-exists: Marker with provided name already exists.",this)}if(!n){throw new ss["b"]("writer-addMarker-no-range: Range parameter is required when adding a new marker.",this)}if(!i){return this.model.markers._set(t,n,i,o)}dm(this,t,null,n,o);return this.model.markers.get(t)}updateMarker(t,e){this._assertWriterUsedCorrectly();const i=typeof t=="string"?t:t.name;const n=this.model.markers.get(i);if(!n){throw new ss["b"]("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.",this)}if(!e){this.model.markers._refresh(n);return}const o=typeof e.usingOperation=="boolean";const r=typeof e.affectsData=="boolean";const s=r?e.affectsData:n.affectsData;if(!o&&!e.range&&!r){throw new ss["b"]("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.",this)}const a=n.getRange();const c=e.range?e.range:a;if(o&&e.usingOperation!==n.managedUsingOperations){if(e.usingOperation){dm(this,i,null,c,s)}else{dm(this,i,a,null,s);this.model.markers._set(i,c,undefined,s)}return}if(n.managedUsingOperations){dm(this,i,a,c,s)}else{this.model.markers._set(i,c,undefined,s)}}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e)){throw new ss["b"]("writer-removeMarker-no-marker: Trying to remove marker which does not exist.",this)}const i=this.model.markers.get(e);if(!i.managedUsingOperations){this.model.markers._remove(e);return}const n=i.getRange();dm(this,e,n,null,i.affectsData)}setSelection(t,e,i){this._assertWriterUsedCorrectly();this.model.document.selection._setTo(t,e,i)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly();this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){this._assertWriterUsedCorrectly();if(typeof t==="string"){this._setSelectionAttribute(t,e)}else{for(const[e,i]of Hs(t)){this._setSelectionAttribute(e,i)}}}removeSelectionAttribute(t){this._assertWriterUsedCorrectly();if(typeof t==="string"){this._removeSelectionAttribute(t)}else{for(const e of t){this._removeSelectionAttribute(e)}}}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const n=df._getStoreAttributeKey(t);this.setAttribute(n,e,i.anchor.parent)}i._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const i=df._getStoreAttributeKey(t);this.removeAttribute(i,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this){throw new ss["b"]("writer-incorrect-use: Trying to use a writer outside the change() block.",this)}}_addOperationForAffectedMarkers(t,e){for(const i of this.model.markers){if(!i.managedUsingOperations){continue}const n=i.getRange();let o=false;if(t=="move"){o=e.containsPosition(n.start)||e.start.isEqual(n.start)||e.containsPosition(n.end)||e.end.isEqual(n.end)}else{const t=e.nodeBefore;const i=e.nodeAfter;const r=n.start.parent==t&&n.start.isAtEnd;const s=n.end.parent==i&&n.end.offset==0;const a=n.end.nodeAfter==i;const c=n.start.nodeAfter==i;o=r||s||a||c}if(o){this.updateMarker(i.name,{range:n})}}}}function cm(t,e,i,n){const o=t.model;const r=o.document;let s=n.start;let a;let c;let l;for(const t of n.getWalker({shallow:true})){l=t.item.getAttribute(e);if(a&&c!=l){if(c!=i){d()}s=a}a=t.nextPosition;c=l}if(a instanceof Uh&&a!=s&&c!=i){d()}function d(){const n=new $h(s,a);const l=n.root.document?r.version:null;const d=new Qg(n,e,c,i,l);t.batch.addOperation(d);o.applyOperation(d)}}function lm(t,e,i,n){const o=t.model;const r=o.document;const s=n.getAttribute(e);let a,c;if(s!=i){const l=n.root===n;if(l){const t=n.document?r.version:null;c=new nm(n,e,s,i,t)}else{a=new $h(Uh._createBefore(n),t.createPositionAfter(n));const o=a.root.document?r.version:null;c=new Qg(a,e,s,i,o)}t.batch.addOperation(c);o.applyOperation(c)}}function dm(t,e,i,n,o){const r=t.model;const s=r.document;const a=new em(e,i,n,r.markers,o,s.version);t.batch.addOperation(a);r.applyOperation(a)}function um(t,e,i,n){let o;if(t.root.document){const i=n.document;const r=new Uh(i.graveyard,[0]);o=new Zg(t,e,r,i.version)}else{o=new Xg(t,e)}i.addOperation(o);n.applyOperation(o)}function hm(t,e){if(t===e){return true}if(t instanceof sm&&e instanceof sm){return true}return false}class fm{constructor(t){this._markerCollection=t;this._changesInElement=new Map;this._elementSnapshots=new Map;this._changedMarkers=new Map;this._changeCount=0;this._cachedChanges=null;this._cachedChangesWithGraveyard=null}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0}refreshItem(t){if(this._isInInsertedElement(t.parent)){return}this._markRemove(t.parent,t.startOffset,t.offsetSize);this._markInsert(t.parent,t.startOffset,t.offsetSize);const e=$h._createOn(t);for(const t of this._markerCollection.getMarkersIntersectingRange(e)){const e=t.getRange();this.bufferMarkerChange(t.name,e,e,t.affectsData)}this._cachedChanges=null}bufferOperation(t){switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent)){return}this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const e of t.range.getItems({shallow:true})){if(this._isInInsertedElement(e.parent)){continue}this._markAttribute(e)}break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition)){return}const e=this._isInInsertedElement(t.sourcePosition.parent);const i=this._isInInsertedElement(t.targetPosition.parent);if(!e){this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany)}if(!i){this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany)}break}case"rename":{if(this._isInInsertedElement(t.position.parent)){return}this._markRemove(t.position.parent,t.position.offset,1);this._markInsert(t.position.parent,t.position.offset,1);const e=$h._createFromPositionAndShift(t.position,1);for(const t of this._markerCollection.getMarkersIntersectingRange(e)){const e=t.getRange();this.bufferMarkerChange(t.name,e,e,t.affectsData)}break}case"split":{const e=t.splitPosition.parent;if(!this._isInInsertedElement(e)){this._markRemove(e,t.splitPosition.offset,t.howMany)}if(!this._isInInsertedElement(t.insertionPosition.parent)){this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1)}if(t.graveyardPosition){this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1)}break}case"merge":{const e=t.sourcePosition.parent;if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,1)}const i=t.graveyardPosition.parent;this._markInsert(i,t.graveyardPosition.offset,1);const n=t.targetPosition.parent;if(!this._isInInsertedElement(n)){this._markInsert(n,t.targetPosition.offset,e.maxOffset)}break}}this._cachedChanges=null}bufferMarkerChange(t,e,i,n){const o=this._changedMarkers.get(t);if(!o){this._changedMarkers.set(t,{oldRange:e,newRange:i,affectsData:n})}else{o.newRange=i;o.affectsData=n;if(o.oldRange==null&&o.newRange==null){this._changedMarkers.delete(t)}}}getMarkersToRemove(){const t=[];for(const[e,i]of this._changedMarkers){if(i.oldRange!=null){t.push({name:e,range:i.oldRange})}}return t}getMarkersToAdd(){const t=[];for(const[e,i]of this._changedMarkers){if(i.newRange!=null){t.push({name:e,range:i.newRange})}}return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(t=>({name:t[0],data:{oldRange:t[1].oldRange,newRange:t[1].newRange}}))}hasDataChanges(){for(const[,t]of this._changedMarkers){if(t.affectsData){return true}}return this._changesInElement.size>0}getChanges(t={includeChangesInGraveyard:false}){if(this._cachedChanges){if(t.includeChangesInGraveyard){return this._cachedChangesWithGraveyard.slice()}else{return this._cachedChanges.slice()}}const e=[];for(const t of this._changesInElement.keys()){const i=this._changesInElement.get(t).sort((t,e)=>{if(t.offset===e.offset){if(t.type!=e.type){return t.type=="remove"?-1:1}return 0}return t.offset<e.offset?-1:1});const n=this._elementSnapshots.get(t);const o=gm(t.getChildren());const r=mm(n.length,i);let s=0;let a=0;for(const i of r){if(i==="i"){e.push(this._getInsertDiff(t,s,o[s].name));s++}else if(i==="r"){e.push(this._getRemoveDiff(t,s,n[a].name));a++}else if(i==="a"){const i=o[s].attributes;const r=n[a].attributes;let c;if(o[s].name=="$text"){c=new $h(Uh._createAt(t,s),Uh._createAt(t,s+1))}else{const e=t.offsetToIndex(s);c=new $h(Uh._createAt(t,s),Uh._createAt(t.getChild(e),0))}e.push(...this._getAttributesDiff(c,r,i));s++;a++}else{s++;a++}}}e.sort((t,e)=>{if(t.position.root!=e.position.root){return t.position.root.rootName<e.position.root.rootName?-1:1}if(t.position.isEqual(e.position)){return t.changeCount-e.changeCount}return t.position.isBefore(e.position)?-1:1});for(let t=1;t<e.length;t++){const i=e[t-1];const n=e[t];const o=i.type=="remove"&&n.type=="remove"&&i.name=="$text"&&n.name=="$text"&&i.position.isEqual(n.position);const r=i.type=="insert"&&n.type=="insert"&&i.name=="$text"&&n.name=="$text"&&i.position.parent==n.position.parent&&i.position.offset+i.length==n.position.offset;const s=i.type=="attribute"&&n.type=="attribute"&&i.position.parent==n.position.parent&&i.range.isFlat&&n.range.isFlat&&i.position.offset+i.length==n.position.offset&&i.attributeKey==n.attributeKey&&i.attributeOldValue==n.attributeOldValue&&i.attributeNewValue==n.attributeNewValue;if(o||r||s){e[t-1].length++;if(s){e[t-1].range.end=e[t-1].range.end.getShiftedBy(1)}e.splice(t,1);t--}}for(const t of e){delete t.changeCount;if(t.type=="attribute"){delete t.position;delete t.length}}this._changeCount=0;this._cachedChangesWithGraveyard=e.slice();this._cachedChanges=e.slice().filter(pm);if(t.includeChangesInGraveyard){return this._cachedChangesWithGraveyard}else{return this._cachedChanges}}reset(){this._changesInElement.clear();this._elementSnapshots.clear();this._changedMarkers.clear();this._cachedChanges=null}_markInsert(t,e,i){const n={type:"insert",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,n)}_markRemove(t,e,i){const n={type:"remove",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,n);this._removeAllNestedChanges(t,e,i)}_markAttribute(t){const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshot(t);const i=this._getChangesForElement(t);this._handleChange(e,i);i.push(e);for(let t=0;t<i.length;t++){if(i[t].howMany<1){i.splice(t,1);t--}}}_getChangesForElement(t){let e;if(this._changesInElement.has(t)){e=this._changesInElement.get(t)}else{e=[];this._changesInElement.set(t,e)}return e}_makeSnapshot(t){if(!this._elementSnapshots.has(t)){this._elementSnapshots.set(t,gm(t.getChildren()))}}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const i of e){const n=t.offset+t.howMany;const o=i.offset+i.howMany;if(t.type=="insert"){if(i.type=="insert"){if(t.offset<=i.offset){i.offset+=t.howMany}else if(t.offset<o){i.howMany+=t.nodesToHandle;t.nodesToHandle=0}}if(i.type=="remove"){if(t.offset<i.offset){i.offset+=t.howMany}}if(i.type=="attribute"){if(t.offset<=i.offset){i.offset+=t.howMany}else if(t.offset<o){const o=i.howMany;i.howMany=t.offset-i.offset;e.unshift({type:"attribute",offset:n,howMany:o-i.howMany,count:this._changeCount++})}}}if(t.type=="remove"){if(i.type=="insert"){if(n<=i.offset){i.offset-=t.howMany}else if(n<=o){if(t.offset<i.offset){const e=n-i.offset;i.offset=t.offset;i.howMany-=e;t.nodesToHandle-=e}else{i.howMany-=t.nodesToHandle;t.nodesToHandle=0}}else{if(t.offset<=i.offset){t.nodesToHandle-=i.howMany;i.howMany=0}else if(t.offset<o){const e=o-t.offset;i.howMany-=e;t.nodesToHandle-=e}}}if(i.type=="remove"){if(n<=i.offset){i.offset-=t.howMany}else if(t.offset<i.offset){t.nodesToHandle+=i.howMany;i.howMany=0}}if(i.type=="attribute"){if(n<=i.offset){i.offset-=t.howMany}else if(t.offset<i.offset){const e=n-i.offset;i.offset=t.offset;i.howMany-=e}else if(t.offset<o){if(n<=o){const n=i.howMany;i.howMany=t.offset-i.offset;const o=n-i.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:o,count:this._changeCount++})}else{i.howMany-=o-t.offset}}}}if(t.type=="attribute"){if(i.type=="insert"){if(t.offset<i.offset&&n>i.offset){if(n>o){const t={type:"attribute",offset:o,howMany:n-o,count:this._changeCount++};this._handleChange(t,e);e.push(t)}t.nodesToHandle=i.offset-t.offset;t.howMany=t.nodesToHandle}else if(t.offset>=i.offset&&t.offset<o){if(n>o){t.nodesToHandle=n-o;t.offset=o}else{t.nodesToHandle=0}}}if(i.type=="remove"){if(t.offset<i.offset&&n>i.offset){const o={type:"attribute",offset:i.offset,howMany:n-i.offset,count:this._changeCount++};this._handleChange(o,e);e.push(o);t.nodesToHandle=i.offset-t.offset;t.howMany=t.nodesToHandle}}if(i.type=="attribute"){if(t.offset>=i.offset&&n<=o){t.nodesToHandle=0;t.howMany=0;t.offset=0}else if(t.offset<=i.offset&&n>=o){i.howMany=0}}}}t.howMany=t.nodesToHandle;delete t.nodesToHandle}_getInsertDiff(t,e,i){return{type:"insert",position:Uh._createAt(t,e),name:i,length:1,changeCount:this._changeCount++}}_getRemoveDiff(t,e,i){return{type:"remove",position:Uh._createAt(t,e),name:i,length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,i){const n=[];i=new Map(i);for(const[o,r]of e){const e=i.has(o)?i.get(o):null;if(e!==r){n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:e,changeCount:this._changeCount++})}i.delete(o)}for(const[e,o]of i){n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:e,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++})}return n}_isInInsertedElement(t){const e=t.parent;if(!e){return false}const i=this._changesInElement.get(e);const n=t.startOffset;if(i){for(const t of i){if(t.type=="insert"&&n>=t.offset&&n<t.offset+t.howMany){return true}}}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,i){const n=new $h(Uh._createAt(t,e),Uh._createAt(t,e+i));for(const t of n.getItems({shallow:true})){if(t.is("element")){this._elementSnapshots.delete(t);this._changesInElement.delete(t);this._removeAllNestedChanges(t,0,t.maxOffset)}}}}function gm(t){const e=[];for(const i of t){if(i.is("text")){for(let t=0;t<i.data.length;t++){e.push({name:"$text",attributes:new Map(i.getAttributes())})}}else{e.push({name:i.name,attributes:new Map(i.getAttributes())})}}return e}function mm(t,e){const i=[];let n=0;let o=0;for(const t of e){if(t.offset>n){for(let e=0;e<t.offset-n;e++){i.push("e")}o+=t.offset-n}if(t.type=="insert"){for(let e=0;e<t.howMany;e++){i.push("i")}n=t.offset+t.howMany}else if(t.type=="remove"){for(let e=0;e<t.howMany;e++){i.push("r")}n=t.offset;o+=t.howMany}else{i.push(..."a".repeat(t.howMany).split(""));n=t.offset+t.howMany;o+=t.howMany}}if(o<t){for(let e=0;e<t-o-n;e++){i.push("e")}}return i}function pm(t){const e=t.position&&t.position.root.rootName=="$graveyard";const i=t.range&&t.range.root.rootName=="$graveyard";return!e&&!i}class bm{constructor(){this._operations=[];this._undoPairs=new Map;this._undoneOperations=new Set}addOperation(t){if(this._operations.includes(t)){return}this._operations.push(t)}getOperations(t=0,e=Number.POSITIVE_INFINITY){if(t<0){return[]}return this._operations.slice(t,e)}getOperation(t){return this._operations[t]}setOperationAsUndone(t,e){this._undoPairs.set(e,t);this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}}function wm(t){return!!t&&t.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}function km(t){return!!t&&t.length==1&&/[\ud800-\udbff]/.test(t)}function _m(t){return!!t&&t.length==1&&/[\udc00-\udfff]/.test(t)}function vm(t,e){return km(t.charAt(e-1))&&_m(t.charAt(e))}function ym(t,e){return wm(t.charAt(e))}const xm="$graveyard";class Cm{constructor(t){this.model=t;this.version=0;this.history=new bm(this);this.selection=new df(this);this.roots=new ys({idProperty:"rootName"});this.differ=new fm(t.markers);this._postFixers=new Set;this._hasSelectionChangedFromTheLastChangeBlock=false;this.createRoot("$root",xm);this.listenTo(t,"applyOperation",(t,e)=>{const i=e[0];if(i.isDocumentOperation&&i.baseVersion!==this.version){throw new ss["b"]("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",this,{operation:i})}},{priority:"highest"});this.listenTo(t,"applyOperation",(t,e)=>{const i=e[0];if(i.isDocumentOperation){this.differ.bufferOperation(i)}},{priority:"high"});this.listenTo(t,"applyOperation",(t,e)=>{const i=e[0];if(i.isDocumentOperation){this.version++;this.history.addOperation(i)}},{priority:"low"});this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=true});this.listenTo(t.markers,"update",(t,e,i,n)=>{this.differ.bufferMarkerChange(e.name,i,n,e.affectsData);if(i===null){e.on("change",(t,i)=>{this.differ.bufferMarkerChange(e.name,i,e.getRange(),e.affectsData)})}})}get graveyard(){return this.getRoot(xm)}createRoot(t="$root",e="main"){if(this.roots.get(e)){throw new ss["b"]("model-document-createRoot-name-exists: Root with specified name already exists.",this,{name:e})}const i=new sm(this,t,e);this.roots.add(i);return i}destroy(){this.selection.destroy();this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(){return Array.from(this.roots,t=>t.rootName).filter(t=>t!=xm)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=Bs(this);t.selection="[engine.model.DocumentSelection]";t.model="[engine.model.Model]";return t}_handleChangeBlock(t){if(this._hasDocumentChangedFromTheLastChangeBlock()){this._callPostFixers(t);this.selection.refresh();if(this.differ.hasDataChanges()){this.fire("change:data",t.batch)}else{this.fire("change",t.batch)}this.selection.refresh();this.differ.reset()}this._hasSelectionChangedFromTheLastChangeBlock=false}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const t of this.roots){if(t!==this.graveyard){return t}}return this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot();const e=this.model;const i=e.schema;const n=e.createPositionFromPath(t,[0]);const o=i.getNearestSelectionRange(n);return o||e.createRange(n)}_validateSelectionRange(t){return Am(t.start)&&Am(t.end)}_callPostFixers(t){let e=false;do{for(const i of this._postFixers){this.selection.refresh();e=i(t);if(e){break}}}while(e)}}vs(Cm,ds);function Am(t){const e=t.textNode;if(e){const i=e.data;const n=t.offset-e.startOffset;return!vm(i,n)&&!ym(i,n)}return true}class Tm{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){return this._markers.has(t)}get(t){return this._markers.get(t)||null}_set(t,e,i=false,n=false){const o=t instanceof Pm?t.name:t;const r=this._markers.get(o);if(r){const t=r.getRange();let s=false;if(!t.isEqual(e)){r._attachLiveRange(rf.fromRange(e));s=true}if(i!=r.managedUsingOperations){r._managedUsingOperations=i;s=true}if(typeof n==="boolean"&&n!=r.affectsData){r._affectsData=n;s=true}if(s){this.fire("update:"+o,r,t,e)}return r}const s=rf.fromRange(e);const a=new Pm(o,s,i,n);this._markers.set(o,a);this.fire("update:"+o,a,null,e);return a}_remove(t){const e=t instanceof Pm?t.name:t;const i=this._markers.get(e);if(i){this._markers.delete(e);this.fire("update:"+e,i,i.getRange(),null);this._destroyMarker(i);return true}return false}_refresh(t){const e=t instanceof Pm?t.name:t;const i=this._markers.get(e);if(!i){throw new ss["b"]("markercollection-refresh-marker-not-exists: Marker with provided name does not exists.",this)}const n=i.getRange();this.fire("update:"+e,i,n,n,i.managedUsingOperations,i.affectsData)}*getMarkersAtPosition(t){for(const e of this){if(e.getRange().containsPosition(t)){yield e}}}*getMarkersIntersectingRange(t){for(const e of this){if(e.getRange().getIntersection(t)!==null){yield e}}}destroy(){for(const t of this._markers.values()){this._destroyMarker(t)}this._markers=null;this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values()){if(e.name.startsWith(t+":")){yield e}}}_destroyMarker(t){t.stopListening();t._detachLiveRange()}}vs(Tm,ds);class Pm{constructor(t,e,i,n){this.name=t;this._liveRange=this._attachLiveRange(e);this._managedUsingOperations=i;this._affectsData=n}get managedUsingOperations(){if(!this._liveRange){throw new ss["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this)}return this._managedUsingOperations}get affectsData(){if(!this._liveRange){throw new ss["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this)}return this._affectsData}getStart(){if(!this._liveRange){throw new ss["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this)}return this._liveRange.start.clone()}getEnd(){if(!this._liveRange){throw new ss["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this)}return this._liveRange.end.clone()}getRange(){if(!this._liveRange){throw new ss["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this)}return this._liveRange.toRange()}is(t){return t=="marker"||t=="model:marker"}_attachLiveRange(t){if(this._liveRange){this._detachLiveRange()}t.delegate("change:range").to(this);t.delegate("change:content").to(this);this._liveRange=t;return t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this);this._liveRange.stopDelegating("change:content",this);this._liveRange.detach();this._liveRange=null}}vs(Pm,ds);class Sm extends Lg{get type(){return"noop"}clone(){return new Sm(this.baseVersion)}getReversed(){return new Sm(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const Em={};Em[Qg.className]=Qg;Em[tm.className]=tm;Em[em.className]=em;Em[Zg.className]=Zg;Em[Sm.className]=Sm;Em[Lg.className]=Lg;Em[im.className]=im;Em[nm.className]=nm;Em[rm.className]=rm;Em[om.className]=om;class Rm{static fromJSON(t,e){return Em[t.__className].fromJSON(t,e)}}class Om extends Uh{constructor(t,e,i="toNone"){super(t,e,i);if(!this.root.is("rootElement")){throw new ss["b"]("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",t)}Im.call(this)}detach(){this.stopListening()}is(t){return t=="livePosition"||t=="model:livePosition"||super.is(t)}toPosition(){return new Uh(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e?e:t.stickiness)}}function Im(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const i=e[0];if(!i.isDocumentOperation){return}Vm.call(this,i)},{priority:"low"})}function Vm(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path;this.root=e.root;this.fire("change",t)}}vs(Om,ds);function Nm(t,e,i,n){return t.change(o=>{let r;if(!i){r=t.document.selection}else if(i instanceof Xh||i instanceof df){r=i}else{r=o.createSelection(i,n)}if(!r.isCollapsed){t.deleteContent(r,{doNotAutoparagraph:true})}const s=new Mm(t,o,r.anchor);let a;if(e.is("documentFragment")){a=e.getChildren()}else{a=[e]}s.handleNodes(a,{isFirst:true,isLast:true});const c=s.getSelectionRange();if(c){if(r instanceof df){o.setSelection(c)}else{r.setTo(c)}}else{}const l=s.getAffectedRange()||t.createRange(r.anchor);s.destroy();return l})}class Mm{constructor(t,e,i){this.model=t;this.writer=e;this.position=i;this.canMergeWith=new Set([this.position.parent]);this.schema=t.schema;this._filterAttributesOf=[];this._affectedStart=null;this._affectedEnd=null}handleNodes(t,e){t=Array.from(t);for(let i=0;i<t.length;i++){const n=t[i];this._handleNode(n,{isFirst:i===0&&e.isFirst,isLast:i===t.length-1&&e.isLast})}this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer);this._filterAttributesOf=[]}getSelectionRange(){if(this.nodeToSelect){return $h._createOn(this.nodeToSelect)}return this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){if(!this._affectedStart){return null}return new $h(this._affectedStart,this._affectedEnd)}destroy(){if(this._affectedStart){this._affectedStart.detach()}if(this._affectedEnd){this._affectedEnd.detach()}}_handleNode(t,e){if(this.schema.isObject(t)){this._handleObject(t,e);return}const i=this._checkAndSplitToAllowedPosition(t,e);if(!i){this._handleDisallowedNode(t,e);return}this._insert(t);this._mergeSiblingsOf(t,e)}_handleObject(t,e){if(this._checkAndSplitToAllowedPosition(t)){this._insert(t)}else{this._tryAutoparagraphing(t,e)}}_handleDisallowedNode(t,e){if(t.is("element")){this.handleNodes(t.getChildren(),e)}else{this._tryAutoparagraphing(t,e)}}_insert(t){if(!this.schema.checkChild(this.position,t)){throw new ss["b"]("insertcontent-wrong-position: Given node cannot be inserted on the given position.",this,{node:t,position:this.position})}const e=Om.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position);this.writer.insert(t,this.position);this.position=e.toPosition();e.detach();if(this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")){this.nodeToSelect=t}else{this.nodeToSelect=null}this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){if(!this._affectedStart){this._affectedStart=Om.fromPosition(t,"toPrevious")}if(!this._affectedEnd||this._affectedEnd.isBefore(t)){if(this._affectedEnd){this._affectedEnd.detach()}this._affectedEnd=Om.fromPosition(t,"toNext")}}_mergeSiblingsOf(t,e){if(!(t instanceof jh)){return}const i=this._canMergeLeft(t,e);const n=this._canMergeRight(t,e);const o=Om._createBefore(t);o.stickiness="toNext";const r=Om._createAfter(t);r.stickiness="toNext";if(i){const t=Om.fromPosition(this.position);t.stickiness="toNext";if(this._affectedStart.isEqual(o)){this._affectedStart.detach();this._affectedStart=Om._createAt(o.nodeBefore,"end","toPrevious")}this.writer.merge(o);if(o.isEqual(this._affectedEnd)&&e.isLast){this._affectedEnd.detach();this._affectedEnd=Om._createAt(o.nodeBefore,"end","toNext")}this.position=t.toPosition();t.detach()}if(n){if(!this.position.isEqual(r)){throw new ss["b"]("insertcontent-invalid-insertion-position",this)}this.position=Uh._createAt(r.nodeBefore,"end");const t=Om.fromPosition(this.position,"toPrevious");if(this._affectedEnd.isEqual(r)){this._affectedEnd.detach();this._affectedEnd=Om._createAt(r.nodeBefore,"end","toNext")}this.writer.merge(r);if(r.getShiftedBy(-1).isEqual(this._affectedStart)&&e.isFirst){this._affectedStart.detach();this._affectedStart=Om._createAt(r.nodeBefore,0,"toPrevious")}this.position=t.toPosition();t.detach()}if(i||n){this._filterAttributesOf.push(this.position.parent)}o.detach();r.detach()}_canMergeLeft(t,e){const i=t.previousSibling;return e.isFirst&&i instanceof jh&&this.canMergeWith.has(i)&&this.model.schema.checkMerge(i,t)}_canMergeRight(t,e){const i=t.nextSibling;return e.isLast&&i instanceof jh&&this.canMergeWith.has(i)&&this.model.schema.checkMerge(t,i)}_tryAutoparagraphing(t,e){const i=this.writer.createElement("paragraph");if(this._getAllowedIn(i,this.position.parent)&&this.schema.checkChild(i,t)){i._appendChild(t);this._handleNode(i,e)}}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(t,this.position.parent);if(!e){return false}while(e!=this.position.parent){if(this.schema.isLimit(this.position.parent)){return false}if(this.position.isAtStart){const t=this.position.parent;this.position=this.writer.createPositionBefore(t);if(t.isEmpty&&t.parent===e){this.writer.remove(t)}}else if(this.position.isAtEnd){this.position=this.writer.createPositionAfter(this.position.parent)}else{const t=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position);this.writer.split(this.position);this.position=t;this.canMergeWith.add(this.position.nodeAfter)}}return true}_getAllowedIn(t,e){if(this.schema.checkChild(e,t)){return e}if(e.parent){return this._getAllowedIn(t,e.parent)}return null}}function Bm(t,e,i={}){if(e.isCollapsed){return}const n=e.getFirstRange();if(n.root.rootName=="$graveyard"){return}const o=t.schema;t.change(t=>{if(!i.doNotResetEntireContent&&Hm(o,e)){jm(t,e,o);return}const r=n.start;const s=Om.fromPosition(n.end,"toNext");if(!n.start.isTouching(n.end)){t.remove(n)}if(!i.leaveUnmerged){zm(t,r,s);o.removeDisallowedAttributes(r.parent.getChildren(),t)}Wm(t,e,r);if(!i.doNotAutoparagraph&&Lm(o,r)){Dm(t,r,e)}s.detach()})}function zm(t,e,i){const n=e.parent;const o=i.parent;if(n==o){return}if(t.model.schema.isLimit(n)||t.model.schema.isLimit(o)){return}if(!Fm(e,i,t.model.schema)){return}e=t.createPositionAfter(n);i=t.createPositionBefore(o);if(!i.isEqual(e)){t.insert(o,e)}t.merge(e);while(i.parent.isEmpty){const e=i.parent;i=t.createPositionBefore(e);t.remove(e)}zm(t,e,i)}function Lm(t,e){const i=t.checkChild(e,"$text");const n=t.checkChild(e,"paragraph");return!i&&n}function Fm(t,e,i){const n=new $h(t,e);for(const t of n.getWalker()){if(i.isLimit(t.item)){return false}}return true}function Dm(t,e,i){const n=t.createElement("paragraph");t.insert(n,e);Wm(t,i,t.createPositionAt(n,0))}function jm(t,e){const i=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(i));Dm(t,t.createPositionAt(i,0),e)}function Hm(t,e){const i=t.getLimitElement(e);if(!e.containsEntireContent(i)){return false}const n=e.getFirstRange();if(n.start.parent==n.end.parent){return false}return t.checkChild(i,"paragraph")}function Wm(t,e,i){if(e instanceof df){t.setSelection(i)}else{e.setTo(i)}}const qm=' ,.?!:;"-()';function Um(t,e,i={}){const n=t.schema;const o=i.direction!="backward";const r=i.unit?i.unit:"character";const s=e.focus;const a=new Wh({boundaries:Jm(s,o),singleCharacters:true,direction:o?"forward":"backward"});const c={walker:a,schema:n,isForward:o,unit:r};let l;while(l=a.next()){if(l.done){return}const i=$m(c,l.value);if(i){if(e instanceof df){t.change(t=>{t.setSelectionFocus(i)})}else{e.setFocus(i)}return}}}function $m(t,e){if(e.type=="text"){if(t.unit==="word"){return Km(t.walker,t.isForward)}return Gm(t.walker,t.unit,t.isForward)}if(e.type==(t.isForward?"elementStart":"elementEnd")){if(t.schema.isObject(e.item)){return Uh._createAt(e.item,t.isForward?"after":"before")}if(t.schema.checkChild(e.nextPosition,"$text")){return e.nextPosition}}else{if(t.schema.isLimit(e.item)){t.walker.skip(()=>true);return}if(t.schema.checkChild(e.nextPosition,"$text")){return e.nextPosition}}}function Gm(t,e){const i=t.position.textNode;if(i){const n=i.data;let o=t.position.offset-i.startOffset;while(vm(n,o)||e=="character"&&ym(n,o)){t.next();o=t.position.offset-i.startOffset}}return t.position}function Km(t,e){let i=t.position.textNode;if(i){let n=t.position.offset-i.startOffset;while(!Ym(i.data,n,e)&&!Qm(i,n,e)){t.next();const o=e?t.position.nodeAfter:t.position.nodeBefore;if(o&&o.is("text")){const n=o.data.charAt(e?0:o.data.length-1);if(!qm.includes(n)){t.next();i=t.position.textNode}}n=t.position.offset-i.startOffset}}return t.position}function Jm(t,e){const i=t.root;const n=Uh._createAt(i,e?"end":0);if(e){return new $h(t,n)}else{return new $h(n,t)}}function Ym(t,e,i){const n=e+(i?0:-1);return qm.includes(t.charAt(n))}function Qm(t,e,i){return e===(i?t.endOffset:0)}function Xm(t,e){return t.change(t=>{const i=t.createDocumentFragment();const n=e.getFirstRange();if(!n||n.isCollapsed){return i}const o=n.start.root;const r=n.start.getCommonPath(n.end);const s=o.getNodeByPath(r);let a;if(n.start.parent==n.end.parent){a=n}else{a=t.createRange(t.createPositionAt(s,n.start.path[r.length]),t.createPositionAt(s,n.end.path[r.length]+1))}const c=a.end.offset-a.start.offset;for(const e of a.getItems({shallow:true})){if(e.is("textProxy")){t.appendText(e.data,e.getAttributes(),i)}else{t.append(e._clone(true),i)}}if(a!=n){const e=n._getTransformedByMove(a.start,t.createPositionAt(i,0),c)[0];const o=t.createRange(t.createPositionAt(i,0),e.start);const r=t.createRange(e.end,t.createPositionAt(i,"end"));Zm(r,t);Zm(o,t)}return i})}function Zm(t,e){const i=[];Array.from(t.getItems({direction:"backward"})).map(t=>e.createRangeOn(t)).filter(e=>{const i=(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end));return i}).forEach(t=>{i.push(t.start.parent);e.remove(t)});i.forEach(t=>{let i=t;while(i.parent&&i.isEmpty){const t=e.createRangeOn(i);i=i.parent;e.remove(t)}})}function tp(t){t.document.registerPostFixer(e=>ep(e,t))}function ep(t,e){const i=e.document.selection;const n=e.schema;const o=[];let r=false;for(const t of i.getRanges()){const e=ip(t,n);if(e){o.push(e);r=true}else{o.push(t)}}if(r){t.setSelection(ap(o),{backward:i.isBackward})}}function ip(t,e){if(t.isCollapsed){return np(t,e)}return op(t,e)}function np(t,e){const i=t.start;const n=e.getNearestSelectionRange(i);if(!n){return null}if(!n.isCollapsed){return n}const o=n.start;if(i.isEqual(o)){return null}return new $h(o)}function op(t,e){const i=t.start;const n=t.end;const o=e.checkChild(i,"$text");const r=e.checkChild(n,"$text");const s=e.getLimitElement(i);const a=e.getLimitElement(n);if(s===a){if(o&&r){return null}if(sp(i,n,e)){const t=i.nodeAfter&&e.isObject(i.nodeAfter);const o=t?null:e.getNearestSelectionRange(i,"forward");const r=n.nodeBefore&&e.isObject(n.nodeBefore);const s=r?null:e.getNearestSelectionRange(n,"backward");const a=o?o.start:i;const c=s?s.start:n;return new $h(a,c)}}const c=s&&!s.is("rootElement");const l=a&&!a.is("rootElement");if(c||l){const t=i.nodeAfter&&n.nodeBefore&&i.nodeAfter.parent===n.nodeBefore.parent;const o=c&&(!t||!cp(i.nodeAfter,e));const r=l&&(!t||!cp(n.nodeBefore,e));let d=i;let u=n;if(o){d=Uh._createBefore(rp(s,e))}if(r){u=Uh._createAfter(rp(a,e))}return new $h(d,u)}return null}function rp(t,e){let i=t;let n=i;while(e.isLimit(n)&&n.parent){i=n;n=n.parent}return i}function sp(t,e,i){const n=t.nodeAfter&&!i.isLimit(t.nodeAfter)||i.checkChild(t,"$text");const o=e.nodeBefore&&!i.isLimit(e.nodeBefore)||i.checkChild(e,"$text");return n||o}function ap(t){const e=[];e.push(t.shift());for(const i of t){const t=e.pop();if(i.isIntersecting(t)){const n=t.start.isAfter(i.start)?i.start:t.start;const o=t.end.isAfter(i.end)?t.end:i.end;const r=new $h(n,o);e.push(r)}else{e.push(t);e.push(i)}}return e}function cp(t,e){return t&&e.isObject(t)}class lp{constructor(){this.markers=new Tm;this.document=new Cm(this);this.schema=new ug;this._pendingChanges=[];this._currentWriter=null;["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t));this.on("applyOperation",(t,e)=>{const i=e[0];i._validate()},{priority:"highest"});this.schema.register("$root",{isLimit:true});this.schema.register("$block",{allowIn:"$root",isBlock:true});this.schema.register("$text",{allowIn:"$block",isInline:true});this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:true});this.schema.extend("$text",{allowIn:"$clipboardHolder"});this.schema.register("$marker");this.schema.addChildCheck((t,e)=>{if(e.name==="$marker"){return true}});tp(this)}change(t){try{if(this._pendingChanges.length===0){this._pendingChanges.push({batch:new zg,callback:t});return this._runPendingChanges()[0]}else{return t(this._currentWriter)}}catch(t){ss["b"].rethrowUnexpectedError(t,this)}}enqueueChange(t,e){try{if(typeof t==="string"){t=new zg(t)}else if(typeof t=="function"){e=t;t=new zg}this._pendingChanges.push({batch:t,callback:e});if(this._pendingChanges.length==1){this._runPendingChanges()}}catch(t){ss["b"].rethrowUnexpectedError(t,this)}}applyOperation(t){t._execute()}insertContent(t,e,i){return Nm(this,t,e,i)}deleteContent(t,e){Bm(this,t,e)}modifySelection(t,e){Um(this,t,e)}getSelectedContent(t){return Xm(this,t)}hasContent(t,e){const i=t instanceof jh?$h._createIn(t):t;if(i.isCollapsed){return false}for(const t of this.markers.getMarkersIntersectingRange(i)){if(t.affectsData){return true}}const{ignoreWhitespaces:n=false}=e||{};for(const t of i.getItems()){if(t.is("textProxy")){if(!n){return true}else if(t.data.search(/\S/)!==-1){return true}}else if(this.schema.isObject(t)){return true}}return false}createPositionFromPath(t,e,i){return new Uh(t,e,i)}createPositionAt(t,e){return Uh._createAt(t,e)}createPositionAfter(t){return Uh._createAfter(t)}createPositionBefore(t){return Uh._createBefore(t)}createRange(t,e){return new $h(t,e)}createRangeIn(t){return $h._createIn(t)}createRangeOn(t){return $h._createOn(t)}createSelection(t,e,i){return new Xh(t,e,i)}createBatch(t){return new zg(t)}createOperationFromJSON(t){return Rm.fromJSON(t,this.document)}destroy(){this.document.destroy();this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");while(this._pendingChanges.length){const e=this._pendingChanges[0].batch;this._currentWriter=new am(this,e);const i=this._pendingChanges[0].callback(this._currentWriter);t.push(i);this.document._handleChangeBlock(this._currentWriter);this._pendingChanges.shift();this._currentWriter=null}this.fire("_afterChanges");return t}}vs(lp,Jc);class dp{constructor(){this._listener=Object.create(qd)}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this._listener.fire("_keydown:"+Ml(e),e)})}set(t,e,i={}){const n=Bl(t);const o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+n,(t,i)=>{e(i,()=>{i.preventDefault();i.stopPropagation();t.stop()});t.return=true},{priority:o})}press(t){return!!this._listener.fire("_keydown:"+Ml(t),t)}destroy(){this._listener.stopListening()}}class up extends dp{constructor(t){super();this.editor=t}set(t,e,i={}){if(typeof e=="string"){const t=e;e=(e,i)=>{this.editor.execute(t);i()}}super.set(t,e,i)}}class hp{constructor(t={}){this._context=t.context||new Is({language:t.language});this._context._addEditor(this,!t.context);const e=Array.from(this.constructor.builtinPlugins||[]);this.config=new Jr(t,this.constructor.defaultConfig);this.config.define("plugins",e);this.config.define(this._context._getEditorConfig());this.plugins=new xs(this,e,this._context.plugins);this.locale=this._context.locale;this.t=this.locale.t;this.commands=new cg;this.set("state","initializing");this.once("ready",()=>this.state="ready",{priority:"high"});this.once("destroy",()=>this.state="destroyed",{priority:"high"});this.set("isReadOnly",false);this.model=new lp;const i=new Vc;this.data=new Ig(this.model,i);this.editing=new ag(this.model,i);this.editing.view.document.bind("isReadOnly").to(this);this.conversion=new Ng([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher);this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher);this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher);this.keystrokes=new up(this);this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const t=this.config;const e=t.get("plugins");const i=t.get("removePlugins")||[];const n=t.get("extraPlugins")||[];return this.plugins.init(e.concat(n),i)}destroy(){let t=Promise.resolve();if(this.state=="initializing"){t=new Promise(t=>this.once("ready",t))}return t.then(()=>{this.fire("destroy");this.stopListening();this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy();this.data.destroy();this.editing.destroy();this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(...t){try{this.commands.execute(...t)}catch(t){ss["b"].rethrowUnexpectedError(t,this)}}}vs(hp,Jc);class fp{getHtml(t){const e=document.implementation.createHTMLDocument("");const i=e.createElement("div");i.appendChild(t);return i.innerHTML}}class gp{constructor(t){this._domParser=new DOMParser;this._domConverter=new zd(t,{blockFillerMode:"nbsp"});this._htmlWriter=new fp}toData(t){const e=this._domConverter.viewToDom(t,document);return this._htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this._domConverter.domToView(e)}_toDom(t){const e=this._domParser.parseFromString(t,"text/html");const i=e.createDocumentFragment();const n=e.body.childNodes;while(n.length>0){i.appendChild(n[0])}return i}}class mp{constructor(t){this.editor=t;this.set("isEnabled",true);this._disableStack=new Set}forceDisabled(t){this._disableStack.add(t);if(this._disableStack.size==1){this.on("set:isEnabled",pp,{priority:"highest"});this.isEnabled=false}}clearForceDisabled(t){this._disableStack.delete(t);if(this._disableStack.size==0){this.off("set:isEnabled",pp);this.isEnabled=true}}destroy(){this.stopListening()}static get isContextPlugin(){return false}}vs(mp,Jc);function pp(t){t.return=false;t.stop()}class bp extends ys{constructor(t){super({idProperty:"viewUid"});this.on("add",(t,e,i)=>{if(!e.isRendered){e.render()}if(e.element&&this._parentElement){this._parentElement.insertBefore(e.element,this._parentElement.children[i])}});this.on("remove",(t,e)=>{if(e.element&&this._parentElement){e.element.remove()}});this.locale=t;this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t}delegate(...t){if(!t.length||!wp(t)){throw new ss["b"]("ui-viewcollection-delegate-wrong-events: All event names must be strings.",this)}return{to:e=>{for(const i of this){for(const n of t){i.delegate(n).to(e)}}this.on("add",(i,n)=>{for(const i of t){n.delegate(i).to(e)}});this.on("remove",(i,n)=>{for(const i of t){n.stopDelegating(i,e)}})}}}}function wp(t){return t.every(t=>typeof t=="string")}const kp="http://www.w3.org/1999/xhtml";class _p{constructor(t){Object.assign(this,Op(Rp(t)));this._isRendered=false;this._revertData=null}render(){const t=this._renderNode({intoFragment:true});this._isRendered=true;return t}apply(t){this._revertData=qp();this._renderNode({node:t,isApplying:true,revertData:this._revertData});return t}revert(t){if(!this._revertData){throw new ss["b"]("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.",[this,t])}this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(e){if(e.children){for(const i of e.children){if(jp(i)){yield i}else if(Hp(i)){yield*t(i)}}}}yield*t(this)}static bind(t,e){return{to(i,n){return new yp({eventNameOrFunction:i,attribute:i,observable:t,emitter:e,callback:n})},if(i,n,o){return new xp({observable:t,emitter:e,attribute:i,valueIfTrue:n,callback:o})}}}static extend(t,e){if(t._isRendered){throw new ss["b"]("template-extend-render: Attempting to extend a template which has already been rendered.",[this,t])}Fp(t,Op(Rp(e)))}_renderNode(t){let e;if(t.node){e=this.tag&&this.text}else{e=this.tag?this.text:!this.text}if(e){throw new ss["b"]('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.',this)}if(this.text){return this._renderText(t)}else{return this._renderElement(t)}}_renderElement(t){let e=t.node;if(!e){e=t.node=document.createElementNS(this.ns||kp,this.tag)}this._renderAttributes(t);this._renderElementChildren(t);this._setUpListeners(t);return e}_renderText(t){let e=t.node;if(e){t.revertData.text=e.textContent}else{e=t.node=document.createTextNode("")}if(Cp(this.text)){this._bindToObservable({schema:this.text,updater:Pp(e),data:t})}else{e.textContent=this.text.join("")}return e}_renderAttributes(t){let e,i,n,o;if(!this.attributes){return}const r=t.node;const s=t.revertData;for(e in this.attributes){n=r.getAttribute(e);i=this.attributes[e];if(s){s.attributes[e]=n}o=ct(i[0])&&i[0].ns?i[0].ns:null;if(Cp(i)){const a=o?i[0].value:i;if(s&&Up(e)){a.unshift(n)}this._bindToObservable({schema:a,updater:Sp(r,e,o),data:t})}else if(e=="style"&&typeof i[0]!=="string"){this._renderStyleAttribute(i[0],t)}else{if(s&&n&&Up(e)){i.unshift(n)}i=i.map(t=>t?t.value||t:t).reduce((t,e)=>t.concat(e),[]).reduce(zp,"");if(!Dp(i)){r.setAttributeNS(o,e,i)}}}}_renderStyleAttribute(t,e){const i=e.node;for(const n in t){const o=t[n];if(Cp(o)){this._bindToObservable({schema:[o],updater:Ep(i,n),data:e})}else{i.style[n]=o}}}_renderElementChildren(t){const e=t.node;const i=t.intoFragment?document.createDocumentFragment():e;const n=t.isApplying;let o=0;for(const r of this.children){if(Wp(r)){if(!n){r.setParent(e);for(const t of r){i.appendChild(t.element)}}}else if(jp(r)){if(!n){if(!r.isRendered){r.render()}i.appendChild(r.element)}}else if(xd(r)){i.appendChild(r)}else{if(n){const e=t.revertData;const n=qp();e.children.push(n);r._renderNode({node:i.childNodes[o++],isApplying:true,revertData:n})}else{i.appendChild(r.render())}}}if(t.intoFragment){e.appendChild(i)}}_setUpListeners(t){if(!this.eventListeners){return}for(const e in this.eventListeners){const i=this.eventListeners[e].map(i=>{const[n,o]=e.split("@");return i.activateDomEventListener(n,o,t)});if(t.revertData){t.revertData.bindings.push(i)}}}_bindToObservable({schema:t,updater:e,data:i}){const n=i.revertData;Tp(t,e,i);const o=t.filter(t=>!Dp(t)).filter(t=>t.observable).map(n=>n.activateAttributeListener(t,e,i));if(n){n.bindings.push(o)}}_revertTemplateFromNode(t,e){for(const t of e.bindings){for(const e of t){e()}}if(e.text){t.textContent=e.text;return}for(const i in e.attributes){const n=e.attributes[i];if(n===null){t.removeAttribute(i)}else{t.setAttribute(i,n)}}for(let i=0;i<e.children.length;++i){this._revertTemplateFromNode(t.childNodes[i],e.children[i])}}}vs(_p,ds);class vp{constructor(t){Object.assign(this,t)}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,i){const n=()=>Tp(t,e,i);this.emitter.listenTo(this.observable,"change:"+this.attribute,n);return()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,n)}}}class yp extends vp{activateDomEventListener(t,e,i){const n=(t,i)=>{if(!e||i.target.matches(e)){if(typeof this.eventNameOrFunction=="function"){this.eventNameOrFunction(i)}else{this.observable.fire(this.eventNameOrFunction,i)}}};this.emitter.listenTo(i.node,t,n);return()=>{this.emitter.stopListening(i.node,t,n)}}}class xp extends vp{getValue(t){const e=super.getValue(t);return Dp(e)?false:this.valueIfTrue||true}}function Cp(t){if(!t){return false}if(t.value){t=t.value}if(Array.isArray(t)){return t.some(Cp)}else if(t instanceof vp){return true}return false}function Ap(t,e){return t.map(t=>{if(t instanceof vp){return t.getValue(e)}return t})}function Tp(t,e,{node:i}){let n=Ap(t,i);if(t.length==1&&t[0]instanceof xp){n=n[0]}else{n=n.reduce(zp,"")}if(Dp(n)){e.remove()}else{e.set(n)}}function Pp(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function Sp(t,e,i){return{set(n){t.setAttributeNS(i,e,n)},remove(){t.removeAttributeNS(i,e)}}}function Ep(t,e){return{set(i){t.style[e]=i},remove(){t.style[e]=null}}}function Rp(t){const e=$r(t,t=>{if(t&&(t instanceof vp||Hp(t)||jp(t)||Wp(t))){return t}});return e}function Op(t){if(typeof t=="string"){t=Np(t)}else if(t.text){Mp(t)}if(t.on){t.eventListeners=Vp(t.on);delete t.on}if(!t.text){if(t.attributes){Ip(t.attributes)}const e=[];if(t.children){if(Wp(t.children)){e.push(t.children)}else{for(const i of t.children){if(Hp(i)||jp(i)||xd(i)){e.push(i)}else{e.push(new _p(i))}}}}t.children=e}return t}function Ip(t){for(const e in t){if(t[e].value){t[e].value=[].concat(t[e].value)}Bp(t,e)}}function Vp(t){for(const e in t){Bp(t,e)}return t}function Np(t){return{text:[t]}}function Mp(t){if(!Array.isArray(t.text)){t.text=[t.text]}}function Bp(t,e){if(!Array.isArray(t[e])){t[e]=[t[e]]}}function zp(t,e){if(Dp(e)){return t}else if(Dp(t)){return e}else{return`${t} ${e}`}}function Lp(t,e){for(const i in e){if(t[i]){t[i].push(...e[i])}else{t[i]=e[i]}}}function Fp(t,e){if(e.attributes){if(!t.attributes){t.attributes={}}Lp(t.attributes,e.attributes)}if(e.eventListeners){if(!t.eventListeners){t.eventListeners={}}Lp(t.eventListeners,e.eventListeners)}if(e.text){t.text.push(...e.text)}if(e.children&&e.children.length){if(t.children.length!=e.children.length){throw new ss["b"]("ui-template-extend-children-mismatch: The number of children in extended definition does not match.",t)}let i=0;for(const n of e.children){Fp(t.children[i++],n)}}}function Dp(t){return!t&&t!==0}function jp(t){return t instanceof Gp}function Hp(t){return t instanceof _p}function Wp(t){return t instanceof bp}function qp(){return{children:[],bindings:[],attributes:{}}}function Up(t){return t=="class"||t=="style"}var $p=i(15);class Gp{constructor(t){this.element=null;this.isRendered=false;this.locale=t;this.t=t&&t.t;this._viewCollections=new ys;this._unboundChildren=this.createCollection();this._viewCollections.on("add",(e,i)=>{i.locale=t});this.decorate("render")}get bindTemplate(){if(this._bindTemplate){return this._bindTemplate}return this._bindTemplate=_p.bind(this,this)}createCollection(){const t=new bp;this._viewCollections.add(t);return t}registerChild(t){if(!js(t)){t=[t]}for(const e of t){this._unboundChildren.add(e)}}deregisterChild(t){if(!js(t)){t=[t]}for(const e of t){this._unboundChildren.remove(e)}}setTemplate(t){this.template=new _p(t)}extendTemplate(t){_p.extend(this.template,t)}render(){if(this.isRendered){throw new ss["b"]("ui-view-render-already-rendered: This View has already been rendered.",this)}if(this.template){this.element=this.template.render();this.registerChild(this.template.getViews())}this.isRendered=true}destroy(){this.stopListening();this._viewCollections.map(t=>t.destroy());if(this.template&&this.template._revertData){this.template.revert(this.element)}}}vs(Gp,qd);vs(Gp,Jc);function Kp(t){while(t&&t.tagName.toLowerCase()!="html"){if(Id.window.getComputedStyle(t).position!="static"){return t}t=t.parentElement}return null}function Jp({element:t,target:e,positions:i,limiter:n,fitInViewport:o}){if(gt(e)){e=e()}if(gt(n)){n=n()}const r=Kp(t.parentElement);const s=new vh(t);const a=new vh(e);let c;let l;if(!n&&!o){[l,c]=Yp(i[0],a,s)}else{const t=n&&new vh(n).getVisible();const e=o&&new vh(Id.window);[l,c]=Qp(i,a,s,t,e)||Yp(i[0],a,s)}let{left:d,top:u}=Xp(c);if(r){const t=Xp(new vh(r));const e=kh(r);d-=t.left;u-=t.top;d+=r.scrollLeft;u+=r.scrollTop;d-=e.left;u-=e.top}return{left:d,top:u,name:l}}function Yp(t,e,i){const{left:n,top:o,name:r}=t(e,i);return[r,i.clone().moveTo(n,o)]}function Qp(t,e,i,n,o){let r=0;let s=0;let a;let c;const l=i.getArea();t.some(t=>{const[d,u]=Yp(t,e,i);let h;let f;if(n){if(o){const t=n.getIntersection(o);if(t){h=t.getIntersectionArea(u)}else{h=0}}else{h=n.getIntersectionArea(u)}}if(o){f=o.getIntersectionArea(u)}if(o&&!n){if(f>s){g()}}else if(!o&&n){if(h>r){g()}}else{if(f>s&&h>=r){g()}else if(f>=s&&h>r){g()}}function g(){s=f;r=h;a=u;c=d}return h===l});return a?[c,a]:null}function Xp({left:t,top:e}){const{scrollX:i,scrollY:n}=Id.window;return{left:t+i,top:e+n}}function Zp(t){return e=>e+t}var tb=i(17);const eb=Zp("px");const ib=Id.document.body;class nb extends Gp{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0);this.set("left",0);this.set("position","arrow_nw");this.set("isVisible",false);this.set("withArrow",true);this.set("class");this.content=this.createCollection();this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",t=>`ck-balloon-panel_${t}`),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",eb),left:e.to("left",eb)}},children:this.content})}show(){this.isVisible=true}hide(){this.isVisible=false}attachTo(t){this.show();const e=nb.defaultPositions;const i=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthMiddleWest,e.southArrowNorthMiddleEast,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthMiddleWest,e.northArrowSouthMiddleEast,e.northArrowSouthWest,e.northArrowSouthEast],limiter:ib,fitInViewport:true},t);const n=nb._getOptimalPosition(i);const o=parseInt(n.left);const r=parseInt(n.top);const s=n.name;Object.assign(this,{top:r,left:o,position:s})}pin(t){this.unpin();this._pinWhenIsVisibleCallback=()=>{if(this.isVisible){this._startPinning(t)}else{this._stopPinning()}};this._startPinning(t);this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){if(this._pinWhenIsVisibleCallback){this._stopPinning();this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback);this._pinWhenIsVisibleCallback=null;this.hide()}}_startPinning(t){this.attachTo(t);const e=ob(t.target);const i=t.limiter?ob(t.limiter):ib;this.listenTo(Id.document,"scroll",(n,o)=>{const r=o.target;const s=e&&r.contains(e);const a=i&&r.contains(i);if(s||a||!e||!i){this.attachTo(t)}},{useCapture:true});this.listenTo(Id.window,"resize",()=>{this.attachTo(t)})}_stopPinning(){this.stopListening(Id.document,"scroll");this.stopListening(Id.window,"resize")}}function ob(t){if(Kr(t)){return t}if(wh(t)){return t.commonAncestorContainer}if(typeof t=="function"){return ob(t())}return null}nb.arrowHorizontalOffset=25;nb.arrowVerticalOffset=10;nb._getOptimalPosition=Jp;nb.defaultPositions={northWestArrowSouthWest:(t,e)=>({top:rb(t,e),left:t.left-nb.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthMiddleWest:(t,e)=>({top:rb(t,e),left:t.left-e.width*.25-nb.arrowHorizontalOffset,name:"arrow_smw"}),northWestArrowSouth:(t,e)=>({top:rb(t,e),left:t.left-e.width/2,name:"arrow_s"}),northWestArrowSouthMiddleEast:(t,e)=>({top:rb(t,e),left:t.left-e.width*.75+nb.arrowHorizontalOffset,name:"arrow_sme"}),northWestArrowSouthEast:(t,e)=>({top:rb(t,e),left:t.left-e.width+nb.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(t,e)=>({top:rb(t,e),left:t.left+t.width/2-nb.arrowHorizontalOffset,name:"arrow_sw"}),northArrowSouthMiddleWest:(t,e)=>({top:rb(t,e),left:t.left+t.width/2-e.width*.25-nb.arrowHorizontalOffset,name:"arrow_smw"}),northArrowSouth:(t,e)=>({top:rb(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"}),northArrowSouthMiddleEast:(t,e)=>({top:rb(t,e),left:t.left+t.width/2-e.width*.75+nb.arrowHorizontalOffset,name:"arrow_sme"}),northArrowSouthEast:(t,e)=>({top:rb(t,e),left:t.left+t.width/2-e.width+nb.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(t,e)=>({top:rb(t,e),left:t.right-nb.arrowHorizontalOffset,name:"arrow_sw"}),northEastArrowSouthMiddleWest:(t,e)=>({top:rb(t,e),left:t.right-e.width*.25-nb.arrowHorizontalOffset,name:"arrow_smw"}),northEastArrowSouth:(t,e)=>({top:rb(t,e),left:t.right-e.width/2,name:"arrow_s"}),northEastArrowSouthMiddleEast:(t,e)=>({top:rb(t,e),left:t.right-e.width*.75+nb.arrowHorizontalOffset,name:"arrow_sme"}),northEastArrowSouthEast:(t,e)=>({top:rb(t,e),left:t.right-e.width+nb.arrowHorizontalOffset,name:"arrow_se"}),southWestArrowNorthWest:(t,e)=>({top:sb(t,e),left:t.left-nb.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthMiddleWest:(t,e)=>({top:sb(t,e),left:t.left-e.width*.25-nb.arrowHorizontalOffset,name:"arrow_nmw"}),southWestArrowNorth:(t,e)=>({top:sb(t,e),left:t.left-e.width/2,name:"arrow_n"}),southWestArrowNorthMiddleEast:(t,e)=>({top:sb(t,e),left:t.left-e.width*.75+nb.arrowHorizontalOffset,name:"arrow_nme"}),southWestArrowNorthEast:(t,e)=>({top:sb(t,e),left:t.left-e.width+nb.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:(t,e)=>({top:sb(t,e),left:t.left+t.width/2-nb.arrowHorizontalOffset,name:"arrow_nw"}),southArrowNorthMiddleWest:(t,e)=>({top:sb(t,e),left:t.left+t.width/2-e.width*.25-nb.arrowHorizontalOffset,name:"arrow_nmw"}),southArrowNorth:(t,e)=>({top:sb(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_n"}),southArrowNorthMiddleEast:(t,e)=>({top:sb(t,e),left:t.left+t.width/2-e.width*.75+nb.arrowHorizontalOffset,name:"arrow_nme"}),southArrowNorthEast:(t,e)=>({top:sb(t,e),left:t.left+t.width/2-e.width+nb.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:(t,e)=>({top:sb(t,e),left:t.right-nb.arrowHorizontalOffset,name:"arrow_nw"}),southEastArrowNorthMiddleWest:(t,e)=>({top:sb(t,e),left:t.right-e.width*.25-nb.arrowHorizontalOffset,name:"arrow_nmw"}),southEastArrowNorth:(t,e)=>({top:sb(t,e),left:t.right-e.width/2,name:"arrow_n"}),southEastArrowNorthMiddleEast:(t,e)=>({top:sb(t,e),left:t.right-e.width*.75+nb.arrowHorizontalOffset,name:"arrow_nme"}),southEastArrowNorthEast:(t,e)=>({top:sb(t,e),left:t.right-e.width+nb.arrowHorizontalOffset,name:"arrow_ne"})};function rb(t,e){return t.top-e.height-nb.arrowVerticalOffset}function sb(t){return t.bottom+nb.arrowVerticalOffset}var ab=i(19);class cb extends Gp{constructor(){super();const t=this.bindTemplate;this.set("content","");this.set("viewBox","0 0 20 20");this.set("fillColor","");this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:t.to("viewBox")}})}render(){super.render();this._updateXMLContent();this._colorFillPaths();this.on("change:content",()=>{this._updateXMLContent();this._colorFillPaths()});this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml");const e=t.querySelector("svg");const i=e.getAttribute("viewBox");if(i){this.viewBox=i}this.element.innerHTML="";while(e.childNodes.length>0){this.element.appendChild(e.childNodes[0])}}}_colorFillPaths(){if(this.fillColor){this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}}var lb=i(21);class db extends Gp{constructor(t){super(t);this.set("text","");this.set("position","s");const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",e.to("position",t=>"ck-tooltip_"+t),e.if("text","ck-hidden",t=>!t.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:e.to("text")}]}]})}}var ub=i(23);class hb extends Gp{constructor(t){super(t);const e=this.bindTemplate;const i=is();this.set("class");this.set("labelStyle");this.set("icon");this.set("isEnabled",true);this.set("isOn",false);this.set("isVisible",true);this.set("isToggleable",false);this.set("keystroke");this.set("label");this.set("tabindex",-1);this.set("tooltip");this.set("tooltipPosition","s");this.set("type","button");this.set("withText",false);this.set("withKeystroke",false);this.children=this.createCollection();this.tooltipView=this._createTooltipView();this.labelView=this._createLabelView(i);this.iconView=new cb;this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}});this.keystrokeView=this._createKeystrokeView();this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",e.to("class"),e.if("isEnabled","ck-disabled",t=>!t),e.if("isVisible","ck-hidden",t=>!t),e.to("isOn",t=>t?"ck-on":"ck-off"),e.if("withText","ck-button_with-text"),e.if("withKeystroke","ck-button_with-keystroke")],type:e.to("type",t=>t?t:"button"),tabindex:e.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${i}`,"aria-disabled":e.if("isEnabled",true,t=>!t),"aria-pressed":e.to("isOn",t=>this.isToggleable?String(t):false)},children:this.children,on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(t=>{if(this.isEnabled){this.fire("execute")}else{t.preventDefault()}})}})}render(){super.render();if(this.icon){this.iconView.bind("content").to(this,"icon");this.children.add(this.iconView)}this.children.add(this.tooltipView);this.children.add(this.labelView);if(this.withKeystroke){this.children.add(this.keystrokeView)}}focus(){this.element.focus()}_createTooltipView(){const t=new db;t.bind("text").to(this,"_tooltipString");t.bind("position").to(this,"tooltipPosition");return t}_createLabelView(t){const e=new Gp;const i=this.bindTemplate;e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:i.to("labelStyle"),id:`ck-editor__aria-label_${t}`},children:[{text:this.bindTemplate.to("label")}]});return e}_createKeystrokeView(){const t=new Gp;t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>zl(t))}]});return t}_getTooltipString(t,e,i){if(t){if(typeof t=="string"){return t}else{if(i){i=zl(i)}if(t instanceof Function){return t(e,i)}else{return`${e}${i?` (${i})`:""}`}}}return""}}class fb{constructor(){this.set("isFocused",false);this.set("focusedElement",null);this._elements=new Set;this._nextEventLoopTimeout=null}add(t){if(this._elements.has(t)){throw new ss["b"]("focusTracker-add-element-already-exist",this)}this.listenTo(t,"focus",()=>this._focus(t),{useCapture:true});this.listenTo(t,"blur",()=>this._blur(),{useCapture:true});this._elements.add(t)}remove(t){if(t===this.focusedElement){this._blur(t)}if(this._elements.has(t)){this.stopListening(t);this._elements.delete(t)}}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout);this.focusedElement=t;this.isFocused=true}_blur(){clearTimeout(this._nextEventLoopTimeout);this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null;this.isFocused=false},0)}}vs(fb,qd);vs(fb,Jc);var gb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>';var mb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>';var pb=i(25);var bb=i(27);const wb=Zp("px");class kb extends mp{static get pluginName(){return"ContextualBalloon"}constructor(t){super(t);this.positionLimiter=()=>{const t=this.editor.editing.view;const e=t.document;const i=e.selection.editableElement;if(i){return t.domConverter.mapViewToDom(i.root)}return null};this.set("visibleView",null);this.view=new nb(t.locale);t.ui.view.body.add(this.view);t.ui.focusTracker.add(this.view.element);this._viewToStack=new Map;this._idToStack=new Map;this.set("_numberOfStacks",0);this.set("_singleViewMode",false);this._rotatorView=this._createRotatorView();this._fakePanelsView=this._createFakePanelsView()}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this.hasView(t.view)){throw new ss["b"]("contextualballoon-add-view-exist: Cannot add configuration of the same view twice.",[this,t])}const e=t.stackId||"main";if(!this._idToStack.has(e)){this._idToStack.set(e,new Map([[t.view,t]]));this._viewToStack.set(t.view,this._idToStack.get(e));this._numberOfStacks=this._idToStack.size;if(!this._visibleStack||t.singleViewMode){this.showStack(e)}return}const i=this._idToStack.get(e);if(t.singleViewMode){this.showStack(e)}i.set(t.view,t);this._viewToStack.set(t.view,i);if(i===this._visibleStack){this._showView(t)}}remove(t){if(!this.hasView(t)){throw new ss["b"]("contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.",[this,t])}const e=this._viewToStack.get(t);if(this._singleViewMode&&this.visibleView===t){this._singleViewMode=false}if(this.visibleView===t){if(e.size===1){if(this._idToStack.size>1){this._showNextStack()}else{this.view.hide();this.visibleView=null;this._rotatorView.hideView()}}else{this._showView(Array.from(e.values())[e.size-2])}}if(e.size===1){this._idToStack.delete(this._getStackId(e));this._numberOfStacks=this._idToStack.size}else{e.delete(t)}this._viewToStack.delete(t)}updatePosition(t){if(t){this._visibleStack.get(this.visibleView).position=t}this.view.pin(this._getBalloonPosition());this._fakePanelsView.updatePosition()}showStack(t){this.visibleStack=t;const e=this._idToStack.get(t);if(!e){throw new ss["b"]("contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.",this)}if(this._visibleStack===e){return}this._showView(Array.from(e.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){const e=Array.from(this._idToStack.entries()).find(e=>e[1]===t);return e[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)+1;if(!t[e]){e=0}this.showStack(this._getStackId(t[e]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)-1;if(!t[e]){e=t.length-1}this.showStack(this._getStackId(t[e]))}_createRotatorView(){const t=new _b(this.editor.locale);const e=this.editor.locale.t;this.view.content.add(t);t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>!e&&t>1);t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"});t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(t,i)=>{if(i<2){return""}const n=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return e("lu",[n,i])});t.buttonNextView.on("execute",()=>{if(t.focusTracker.isFocused){this.editor.editing.view.focus()}this._showNextStack()});t.buttonPrevView.on("execute",()=>{if(t.focusTracker.isFocused){this.editor.editing.view.focus()}this._showPrevStack()});return t}_createFakePanelsView(){const t=new vb(this.editor.locale,this.view);t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>{const i=!e&&t>=2;return i?Math.min(t-1,2):0});t.listenTo(this.view,"change:top",()=>t.updatePosition());t.listenTo(this.view,"change:left",()=>t.updatePosition());this.editor.ui.view.body.add(t);return t}_showView({view:t,balloonClassName:e="",withArrow:i=true,singleViewMode:n=false}){this.view.class=e;this.view.withArrow=i;this._rotatorView.showView(t);this.visibleView=t;this.view.pin(this._getBalloonPosition());this._fakePanelsView.updatePosition();if(n){this._singleViewMode=true}}_getBalloonPosition(){let t=Array.from(this._visibleStack.values()).pop().position;if(t&&!t.limiter){t=Object.assign({},t,{limiter:this.positionLimiter})}return t}}class _b extends Gp{constructor(t){super(t);const e=t.t;const i=this.bindTemplate;this.set("isNavigationVisible",true);this.focusTracker=new fb;this.buttonPrevView=this._createButtonView(e("lv"),gb);this.buttonNextView=this._createButtonView(e("lw"),mb);this.content=this.createCollection();this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",t=>t?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render();this.focusTracker.add(this.element)}showView(t){this.hideView();this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,e){const i=new hb(this.locale);i.set({label:t,icon:e,tooltip:true});return i}}class vb extends Gp{constructor(t,e){super(t);const i=this.bindTemplate;this.set("top",0);this.set("left",0);this.set("height",0);this.set("width",0);this.set("numberOfPanels",0);this.content=this.createCollection();this._balloonPanelView=e;this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",t=>t?"":"ck-hidden")],style:{top:i.to("top",wb),left:i.to("left",wb),width:i.to("width",wb),height:i.to("height",wb)}},children:this.content});this.on("change:numberOfPanels",(t,e,i,n)=>{if(i>n){this._addPanels(i-n)}else{this._removePanels(n-i)}this.updatePosition()})}_addPanels(t){while(t--){const t=new Gp;t.setTemplate({tag:"div"});this.content.add(t);this.registerChild(t)}}_removePanels(t){while(t--){const t=this.content.last;this.content.remove(t);this.deregisterChild(t);t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:e}=this._balloonPanelView;const{width:i,height:n}=new vh(this._balloonPanelView.element);Object.assign(this,{top:t,left:e,width:i,height:n})}}}class yb{constructor(t){Object.assign(this,t);if(t.actions&&t.keystrokeHandler){for(const e in t.actions){let i=t.actions[e];if(typeof i=="string"){i=[i]}for(const n of i){t.keystrokeHandler.set(n,(t,i)=>{this[e]();i()})}}}}get first(){return this.focusables.find(xb)||null}get last(){return this.focusables.filter(xb).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let t=null;if(this.focusTracker.focusedElement===null){return null}this.focusables.find((e,i)=>{const n=e.element===this.focusTracker.focusedElement;if(n){t=i}return n});return t}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){if(t){t.focus()}}_getFocusableItem(t){const e=this.current;const i=this.focusables.length;if(!i){return null}if(e===null){return this[t===1?"first":"last"]}let n=(e+i+t)%i;do{const e=this.focusables.get(n);if(xb(e)){return e}n=(n+i+t)%i}while(n!==e);return null}}function xb(t){return!!(t.focus&&Id.window.getComputedStyle(t.element).display!="none")}class Cb extends Gp{constructor(t){super(t);this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}const Ab=100;class Tb{constructor(t,e){if(!Tb._observerInstance){Tb._createObserver()}this._element=t;this._callback=e;Tb._addElementCallback(t,e);Tb._observerInstance.observe(t)}destroy(){Tb._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){if(!Tb._elementCallbacks){Tb._elementCallbacks=new Map}let i=Tb._elementCallbacks.get(t);if(!i){i=new Set;Tb._elementCallbacks.set(t,i)}i.add(e)}static _deleteElementCallback(t,e){const i=Tb._getElementCallbacks(t);if(i){i.delete(e);if(!i.size){Tb._elementCallbacks.delete(t);Tb._observerInstance.unobserve(t)}}if(Tb._elementCallbacks&&!Tb._elementCallbacks.size){Tb._observerInstance=null;Tb._elementCallbacks=null}}static _getElementCallbacks(t){if(!Tb._elementCallbacks){return null}return Tb._elementCallbacks.get(t)}static _createObserver(){let t;if(typeof Id.window.ResizeObserver==="function"){t=Id.window.ResizeObserver}else{t=Pb}Tb._observerInstance=new t(t=>{for(const e of t){const t=Tb._getElementCallbacks(e.target);if(t){for(const i of t){i(e)}}}})}}Tb._observerInstance=null;Tb._elementCallbacks=null;class Pb{constructor(t){this._callback=t;this._elements=new Set;this._previousRects=new Map;this._periodicCheckTimeout=null}observe(t){this._elements.add(t);this._checkElementRectsAndExecuteCallback();if(this._elements.size===1){this._startPeriodicCheck()}}unobserve(t){this._elements.delete(t);this._previousRects.delete(t);if(!this._elements.size){this._stopPeriodicCheck()}}_startPeriodicCheck(){const t=()=>{this._checkElementRectsAndExecuteCallback();this._periodicCheckTimeout=setTimeout(t,Ab)};this.listenTo(Id.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()});this._periodicCheckTimeout=setTimeout(t,Ab)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout);this.stopListening();this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const t=[];for(const e of this._elements){if(this._hasRectChanged(e)){t.push({target:e,contentRect:this._previousRects.get(e)})}}if(t.length){this._callback(t)}}_hasRectChanged(t){if(!t.ownerDocument.body.contains(t)){return false}const e=new vh(t);const i=this._previousRects.get(t);const n=!i||!i.isEqual(e);this._previousRects.set(t,e);return n}}vs(Pb,qd);function Sb(t){return t.bindTemplate.to(e=>{if(e.target===t.element){e.preventDefault()}})}class Eb extends Gp{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",false);this.set("position","se");this.children=this.createCollection();this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",t=>`ck-dropdown__panel_${t}`),e.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:e.to(t=>t.preventDefault())}})}focus(){if(this.children.length){this.children.first.focus()}}focusLast(){if(this.children.length){const t=this.children.last;if(typeof t.focusLast==="function"){t.focusLast()}else{t.focus()}}}}var Rb=i(29);class Ob extends Gp{constructor(t,e,i){super(t);const n=this.bindTemplate;this.buttonView=e;this.panelView=i;this.set("isOpen",false);this.set("isEnabled",true);this.set("class");this.set("id");this.set("panelPosition","auto");this.focusTracker=new fb;this.keystrokes=new dp;this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",n.to("class"),n.if("isEnabled","ck-disabled",t=>!t)],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[e,i]});e.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render();this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen});this.panelView.bind("isVisible").to(this,"isOpen");this.on("change:isOpen",()=>{if(!this.isOpen){return}if(this.panelPosition==="auto"){this.panelView.position=Ob._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:true,positions:this._panelPositions}).name}else{this.panelView.position=this.panelPosition}});this.keystrokes.listenTo(this.element);this.focusTracker.add(this.element);const t=(t,e)=>{if(this.isOpen){this.buttonView.focus();this.isOpen=false;e()}};this.keystrokes.set("arrowdown",(t,e)=>{if(this.buttonView.isEnabled&&!this.isOpen){this.isOpen=true;e()}});this.keystrokes.set("arrowright",(t,e)=>{if(this.isOpen){e()}});this.keystrokes.set("arrowleft",t);this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:e,northEast:i,northWest:n}=Ob.defaultPanelPositions;if(this.locale.uiLanguageDirection==="ltr"){return[t,e,i,n]}else{return[e,t,n,i]}}}Ob.defaultPanelPositions={southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.bottom-e.height,left:t.left-e.width+t.width,name:"nw"})};Ob._getOptimalPosition=Jp;var Ib='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class Vb extends hb{constructor(t){super(t);this.arrowView=this._createArrowView();this.extendTemplate({attributes:{"aria-haspopup":true}});this.delegate("execute").to(this,"open")}render(){super.render();this.children.add(this.arrowView)}_createArrowView(){const t=new cb;t.content=Ib;t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}});return t}}var Nb=i(31);class Mb extends Gp{constructor(){super();this.items=this.createCollection();this.focusTracker=new fb;this.keystrokes=new dp;this._focusCycler=new yb({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}});this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const t of this.items){this.focusTracker.add(t.element)}this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)});this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)});this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class Bb extends Gp{constructor(t){super(t);this.children=this.createCollection();this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}class zb extends Gp{constructor(t){super(t);this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}var Lb=i(33);class Fb extends hb{constructor(t){super(t);this.isToggleable=true;this.toggleSwitchView=this._createToggleView();this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render();this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new Gp;t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]});return t}}function Db({emitter:t,activator:e,callback:i,contextElements:n}){t.listenTo(document,"mousedown",(t,{target:o})=>{if(!e()){return}for(const t of n){if(t.contains(o)){return}}i()})}var jb=i(35);var Hb=i(37);function Wb(t,e=Vb){const i=new e(t);const n=new Eb(t);const o=new Ob(t,i,n);i.bind("isEnabled").to(o);if(i instanceof Vb){i.bind("isOn").to(o,"isOpen")}else{i.arrowView.bind("isOn").to(o,"isOpen")}$b(o);return o}function qb(t,e){const i=t.locale;const n=i.t;const o=t.toolbarView=new Xb(i);o.set("ariaLabel",n("lg"));t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}});e.map(t=>o.items.add(t));t.panelView.children.add(o);o.items.delegate("execute").to(t)}function Ub(t,e){const i=t.locale;const n=t.listView=new Mb(i);n.items.bindTo(e).using(({type:t,model:e})=>{if(t==="separator"){return new zb(i)}else if(t==="button"||t==="switchbutton"){const n=new Bb(i);let o;if(t==="button"){o=new hb(i)}else{o=new Fb(i)}o.bind(...Object.keys(e)).to(e);o.delegate("execute").to(n);n.children.add(o);return n}});t.panelView.children.add(n);n.items.delegate("execute").to(t)}function $b(t){Gb(t);Kb(t);Jb(t)}function Gb(t){t.on("render",()=>{Db({emitter:t,activator:()=>t.isOpen,callback:()=>{t.isOpen=false},contextElements:[t.element]})})}function Kb(t){t.on("execute",e=>{if(e.source instanceof Fb){return}t.isOpen=false})}function Jb(t){t.keystrokes.set("arrowdown",(e,i)=>{if(t.isOpen){t.panelView.focus();i()}});t.keystrokes.set("arrowup",(e,i)=>{if(t.isOpen){t.panelView.focusLast();i()}})}var Yb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>';var Qb=i(39);class Xb extends Gp{constructor(t,e){super(t);const i=this.bindTemplate;const n=this.t;this.options=e||{};this.set("ariaLabel",n("lr"));this.set("maxWidth","auto");this.items=this.createCollection();this.focusTracker=new fb;this.keystrokes=new dp;this.set("class");this.set("isCompact",false);this.itemsView=new Zb(t);this.children=this.createCollection();this.children.add(this.itemsView);this.focusables=this.createCollection();this._focusCycler=new yb({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}});this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")],role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:this.children,on:{mousedown:Sb(this)}});this._behavior=this.options.shouldGroupWhenFull?new ew(this):new tw(this)}render(){super.render();for(const t of this.items){this.focusTracker.add(t.element)}this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)});this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)});this.keystrokes.listenTo(this.element);this._behavior.render(this)}destroy(){this._behavior.destroy();return super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,e){t.map(t=>{if(t=="|"){this.items.add(new Cb)}else if(e.has(t)){this.items.add(e.create(t))}else{console.warn(Object(ss["a"])("toolbarview-item-unavailable: The requested toolbar item is unavailable."),{name:t})}})}}class Zb extends Gp{constructor(t){super(t);this.children=this.createCollection();this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class tw{constructor(t){const e=t.bindTemplate;t.set("isVertical",false);t.itemsView.children.bindTo(t.items).using(t=>t);t.focusables.bindTo(t.items).using(t=>t);t.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class ew{constructor(t){this.viewChildren=t.children;this.viewFocusables=t.focusables;this.viewItemsView=t.itemsView;this.viewFocusTracker=t.focusTracker;this.viewLocale=t.locale;this.ungroupedItems=t.createCollection();this.groupedItems=t.createCollection();this.groupedItemsDropdown=this._createGroupedItemsDropdown();this.resizeObserver=null;this.cachedPadding=null;t.itemsView.children.bindTo(this.ungroupedItems).using(t=>t);this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this));this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this));t.children.on("add",this._updateFocusCycleableItems.bind(this));t.children.on("remove",this._updateFocusCycleableItems.bind(this));t.items.on("add",(t,e,i)=>{if(i>this.ungroupedItems.length){this.groupedItems.add(e,i-this.ungroupedItems.length)}else{this.ungroupedItems.add(e,i)}this._updateGrouping()});t.items.on("remove",(t,e,i)=>{if(i>this.ungroupedItems.length){this.groupedItems.remove(e)}else{this.ungroupedItems.remove(e)}this._updateGrouping()});t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(t){this.viewElement=t.element;this._enableGroupingOnResize();this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy();this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement)){return}let t;while(this._areItemsOverflowing){this._groupLastItem();t=true}if(!t&&this.groupedItems.length){while(this.groupedItems.length&&!this._areItemsOverflowing){this._ungroupFirstItem()}if(this._areItemsOverflowing){this._groupLastItem()}}}get _areItemsOverflowing(){if(!this.ungroupedItems.length){return false}const t=this.viewElement;const e=this.viewLocale.uiLanguageDirection;const i=new vh(t.lastChild);const n=new vh(t);if(!this.cachedPadding){const i=Id.window.getComputedStyle(t);const n=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(i[n])}if(e==="ltr"){return i.right>n.right-this.cachedPadding}else{return i.left<n.left+this.cachedPadding}}_enableGroupingOnResize(){let t;this.resizeObserver=new Tb(this.viewElement,e=>{if(!t||t!==e.contentRect.width){this._updateGrouping();t=e.contentRect.width}});this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){if(!this.groupedItems.length){this.viewChildren.add(new Cb);this.viewChildren.add(this.groupedItemsDropdown);this.viewFocusTracker.add(this.groupedItemsDropdown.element)}this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first));if(!this.groupedItems.length){this.viewChildren.remove(this.groupedItemsDropdown);this.viewChildren.remove(this.viewChildren.last);this.viewFocusTracker.remove(this.groupedItemsDropdown.element)}}_createGroupedItemsDropdown(){const t=this.viewLocale;const e=t.t;const i=Wb(t);i.class="ck-toolbar__grouped-dropdown";i.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se";qb(i,[]);i.buttonView.set({label:e("ls"),tooltip:true,icon:Yb});i.toolbarView.items.bindTo(this.groupedItems).using(t=>t);return i}_updateFocusCycleableItems(){this.viewFocusables.clear();this.ungroupedItems.map(t=>{this.viewFocusables.add(t)});if(this.groupedItems.length){this.viewFocusables.add(this.groupedItemsDropdown)}}}function iw(t){if(Array.isArray(t)){return{items:t}}if(!t){return{items:[]}}return Object.assign({items:[]},t)}const nw=Zp("px");class ow extends mp{static get pluginName(){return"BalloonToolbar"}static get requires(){return[kb]}constructor(t){super(t);this._balloonConfig=iw(t.config.get("balloonToolbar"));this.toolbarView=this._createToolbarView();this.focusTracker=new fb;t.ui.once("ready",()=>{this.focusTracker.add(t.ui.getEditableElement());this.focusTracker.add(this.toolbarView.element)});this._resizeObserver=null;this._balloon=t.plugins.get(kb);this._fireSelectionChangeDebounced=uh(()=>this.fire("_selectionChangeDebounced"),200);this.decorate("show")}init(){const t=this.editor;const e=t.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(t,e,i)=>{const n=this._balloon.visibleView===this.toolbarView;if(!i&&n){this.hide()}else if(i){this.show()}});this.listenTo(e,"change:range",(t,i)=>{if(i.directChange||e.isCollapsed){this.hide()}this._fireSelectionChangeDebounced()});this.listenTo(this,"_selectionChangeDebounced",()=>{if(this.editor.editing.view.document.isFocused){this.show()}});if(!this._balloonConfig.shouldNotGroupWhenFull){this.listenTo(t,"ready",()=>{const e=t.ui.view.editable.element;this._resizeObserver=new Tb(e,()=>{this.toolbarView.maxWidth=nw(new vh(e).width*.9)})})}}afterInit(){const t=this.editor.ui.componentFactory;this.toolbarView.fillFromConfig(this._balloonConfig.items,t)}_createToolbarView(){const t=!this._balloonConfig.shouldNotGroupWhenFull;const e=new Xb(this.editor.locale,{shouldGroupWhenFull:t});e.extendTemplate({attributes:{class:["ck-toolbar_floating"]}});e.render();return e}show(){const t=this.editor;if(this._balloon.hasView(this.toolbarView)){return}if(t.model.document.selection.isCollapsed){return}if(Array.from(this.toolbarView.items).every(t=>t.isEnabled!==undefined&&!t.isEnabled)){return}this.listenTo(this.editor.ui,"update",()=>{this._balloon.updatePosition(this._getBalloonPositionData())});this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}hide(){if(this._balloon.hasView(this.toolbarView)){this.stopListening(this.editor.ui,"update");this._balloon.remove(this.toolbarView)}}_getBalloonPositionData(){const t=this.editor;const e=t.editing.view;const i=e.document;const n=i.selection;const o=i.selection.isBackward;return{target:()=>{const t=o?n.getFirstRange():n.getLastRange();const i=vh.getDomRangeRects(e.domConverter.viewRangeToDom(t));if(o){return i[0]}else{if(i.length>1&&i[i.length-1].width===0){i.pop()}return i[i.length-1]}},positions:rw(o)}}destroy(){super.destroy();this.stopListening();this._fireSelectionChangeDebounced.cancel();this.toolbarView.destroy();this.focusTracker.destroy();if(this._resizeObserver){this._resizeObserver.destroy()}}}function rw(t){const e=nb.defaultPositions;return t?[e.northWestArrowSouth,e.northWestArrowSouthWest,e.northWestArrowSouthEast,e.northWestArrowSouthMiddleEast,e.northWestArrowSouthMiddleWest,e.southWestArrowNorth,e.southWestArrowNorthWest,e.southWestArrowNorthEast,e.southWestArrowNorthMiddleWest,e.southWestArrowNorthMiddleEast]:[e.southEastArrowNorth,e.southEastArrowNorthEast,e.southEastArrowNorthWest,e.southEastArrowNorthMiddleEast,e.southEastArrowNorthMiddleWest,e.northEastArrowSouth,e.northEastArrowSouthEast,e.northEastArrowSouthWest,e.northEastArrowSouthMiddleEast,e.northEastArrowSouthMiddleWest]}class sw{constructor(t){this.editor=t;this._components=new Map}*names(){for(const t of this._components.values()){yield t.originalName}}add(t,e){if(this.has(t)){throw new ss["b"]("componentfactory-item-exists: The item already exists in the component factory.",this,{name:t})}this._components.set(aw(t),{callback:e,originalName:t})}create(t){if(!this.has(t)){throw new ss["b"]("componentfactory-item-missing: The required component is not registered in the factory.",this,{name:t})}return this._components.get(aw(t)).callback(this.editor.locale)}has(t){return this._components.has(aw(t))}}function aw(t){return String(t).toLowerCase()}class cw{constructor(t){this.editor=t;this.componentFactory=new sw(t);this.focusTracker=new fb;this._editableElementsMap=new Map;this.listenTo(t.editing.view.document,"layoutChanged",()=>this.update())}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening();this.focusTracker.destroy();for(const t of this._editableElementsMap.values()){t.ckeditorInstance=null}this._editableElementsMap=new Map}setEditableElement(t,e){this._editableElementsMap.set(t,e);if(!e.ckeditorInstance){e.ckeditorInstance=this.editor}}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){console.warn("editor-ui-deprecated-editable-elements: "+"The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this});return this._editableElementsMap}}vs(cw,ds);function lw({origin:t,originKeystrokeHandler:e,originFocusTracker:i,toolbar:n,beforeFocus:o,afterBlur:r}){i.add(n.element);e.set("Alt+F10",(t,e)=>{if(i.isFocused&&!n.focusTracker.isFocused){if(o){o()}n.focus();e()}});n.keystrokes.set("Esc",(e,i)=>{if(n.focusTracker.isFocused){t.focus();if(r){r()}i()}})}var dw=i(41);const uw=new WeakMap;function hw(t){const{view:e,element:i,text:n,isDirectHost:o=true}=t;const r=e.document;if(!uw.has(r)){uw.set(r,new Map);r.registerPostFixer(t=>bw(r,t))}uw.get(r).set(i,{text:n,isDirectHost:o});e.change(t=>bw(r,t))}function fw(t,e){const i=e.document;t.change(t=>{if(!uw.has(i)){return}const n=uw.get(i);const o=n.get(e);t.removeAttribute("data-placeholder",o.hostElement);mw(t,o.hostElement);n.delete(e)})}function gw(t,e){if(!e.hasClass("ck-placeholder")){t.addClass("ck-placeholder",e);return true}return false}function mw(t,e){if(e.hasClass("ck-placeholder")){t.removeClass("ck-placeholder",e);return true}return false}function pw(t){if(!t.isAttached()){return false}const e=!Array.from(t.getChildren()).some(t=>!t.is("uiElement"));const i=t.document;if(!i.isFocused&&e){return true}const n=i.selection;const o=n.anchor;if(e&&o&&o.parent!==t){return true}return false}function bw(t,e){const i=uw.get(t);let n=false;for(const[t,o]of i){if(ww(e,t,o)){n=true}}return n}function ww(t,e,i){const{text:n,isDirectHost:o}=i;const r=o?e:kw(e);let s=false;if(!r){return false}i.hostElement=r;if(r.getAttribute("data-placeholder")!==n){t.setAttribute("data-placeholder",n,r);s=true}if(pw(r)){if(gw(t,r)){s=true}}else if(mw(t,r)){s=true}return s}function kw(t){if(t.childCount===1){const e=t.getChild(0);if(e.is("element")&&!e.is("uiElement")){return e}}return null}class _w extends cw{constructor(t,e){super(t);this.view=e}get element(){return this.view.editable.element}init(){const t=this.editor;const e=this.view;const i=t.plugins.get("BalloonToolbar");const n=t.editing.view;const o=e.editable;const r=n.document.getRoot();o.name=r.rootName;e.render();const s=o.element;this.setEditableElement(o.name,s);this.focusTracker.add(s);o.bind("isFocused").to(this.focusTracker);n.attachDomRoot(s);lw({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:i.toolbarView,beforeFocus(){i.show()},afterBlur(){i.hide()}});this._initPlaceholder();this.fire("ready")}destroy(){const t=this.view;const e=this.editor.editing.view;e.detachDomRoot(t.editable.name);t.destroy();super.destroy()}_initPlaceholder(){const t=this.editor;const e=t.editing.view;const i=e.document.getRoot();const n=t.sourceElement;const o=t.config.get("placeholder")||n&&n.tagName.toLowerCase()==="textarea"&&n.getAttribute("placeholder");if(o){hw({view:e,element:i,text:o,isDirectHost:false})}}}var vw="[object String]";function yw(t){return typeof t=="string"||!Je(t)&&T(t)&&_(t)==vw}var xw=yw;function Cw(t,e,i={},n=[]){const o=i&&i.xmlns;const r=o?t.createElementNS(o,e):t.createElement(e);for(const t in i){r.setAttribute(t,i[t])}if(xw(n)||!js(n)){n=[n]}for(let e of n){if(xw(e)){e=t.createTextNode(e)}r.appendChild(e)}return r}class Aw extends bp{attachToDom(){this._bodyCollectionContainer=new _p({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let t=document.querySelector(".ck-body-wrapper");if(!t){t=Cw(document,"div",{class:"ck-body-wrapper"});document.body.appendChild(t)}t.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy();if(this._bodyCollectionContainer){this._bodyCollectionContainer.remove()}const t=document.querySelector(".ck-body-wrapper");if(t&&t.childElementCount==0){t.remove()}}}var Tw=i(43);class Pw extends Gp{constructor(t){super(t);this.body=new Aw(t)}render(){super.render();this.body.attachToDom()}destroy(){this.body.detachFromDom();return super.destroy()}}class Sw extends Gp{constructor(t,e,i){super(t);this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}});this.name=null;this.set("isFocused",false);this._editableElement=i;this._hasExternalElement=!!this._editableElement;this._editingView=e}render(){super.render();if(this._hasExternalElement){this.template.apply(this.element=this._editableElement)}else{this._editableElement=this.element}this.on("change:isFocused",()=>this._updateIsFocusedClasses());this._updateIsFocusedClasses()}destroy(){if(this._hasExternalElement){this.template.revert(this._editableElement)}super.destroy()}_updateIsFocusedClasses(){const t=this._editingView;if(t.isRenderingInProgress){i(this)}else{e(this)}function e(e){t.change(i=>{const n=t.document.getRoot(e.name);i.addClass(e.isFocused?"ck-focused":"ck-blurred",n);i.removeClass(e.isFocused?"ck-blurred":"ck-focused",n)})}function i(n){t.once("change:isRenderingInProgress",(t,o,r)=>{if(!r){e(n)}else{i(n)}})}}}class Ew extends Sw{constructor(t,e,i){super(t,e,i);this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;const e=this.t;t.change(i=>{const n=t.document.getRoot(this.name);i.setAttribute("aria-label",e("of",[this.name]),n)})}}class Rw extends Pw{constructor(t,e,i){super(t);this.editable=new Ew(t,e,i)}render(){super.render();this.registerChild(this.editable)}}function Ow(t,e){if(t instanceof HTMLTextAreaElement){t.value=e}t.innerHTML=e}function Iw(t){if(t instanceof HTMLTextAreaElement){return t.value}return t.innerHTML}const Vw={setData(t){this.data.set(t)},getData(t){return this.data.get(t)}};var Nw=Vw;const Mw={updateSourceElement(){if(!this.sourceElement){throw new ss["b"]("editor-missing-sourceelement: Cannot update the source element of a detached editor.",this)}Ow(this.sourceElement,this.data.get())}};var Bw=Mw;function zw(t){if(!gt(t.updateSourceElement)){throw new ss["b"]("attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.",t)}const e=t.sourceElement;if(e&&e.tagName.toLowerCase()==="textarea"&&e.form){let i;const n=e.form;const o=()=>t.updateSourceElement();if(gt(n.submit)){i=n.submit;n.submit=()=>{o();i.apply(n)}}n.addEventListener("submit",o);t.on("destroy",()=>{n.removeEventListener("submit",o);if(i){n.submit=i}})}}function Lw(t){const e=t.sourceElement;if(!e){return}if(e.ckeditorInstance){throw new ss["b"]("editor-source-element-already-used: "+"The DOM element cannot be used to create multiple editor instances.",t)}e.ckeditorInstance=t;t.once("destroy",()=>{delete e.ckeditorInstance})}class Fw extends hp{constructor(t,e){super(e);if(Kr(t)){this.sourceElement=t;Lw(this)}const i=this.config.get("plugins");i.push(ow);this.config.set("plugins",i);this.config.define("balloonToolbar",this.config.get("toolbar"));this.data.processor=new gp(this.data.viewDocument);this.model.document.createRoot();const n=new Rw(this.locale,this.editing.view,this.sourceElement);this.ui=new _w(this,n);zw(this)}destroy(){const t=this.getData();this.ui.destroy();return super.destroy().then(()=>{if(this.sourceElement){Ow(this.sourceElement,t)}})}static create(t,e={}){return new Promise(i=>{const n=Kr(t);if(n&&t.tagName==="TEXTAREA"){throw new ss["b"]("editor-wrong-element: This type of editor cannot be initialized inside <textarea> element.",null)}const o=new this(t,e);i(o.initPlugins().then(()=>{o.ui.init()}).then(()=>{if(!n&&e.initialData){throw new ss["b"]("editor-create-initial-data: "+"The config.initialData option cannot be used together with initial data passed in Editor.create().",null)}const i=e.initialData||Dw(t);return o.data.init(i)}).then(()=>o.fire("ready")).then(()=>o))})}}vs(Fw,Nw);vs(Fw,Bw);function Dw(t){return Kr(t)?Iw(t):t}class jw{constructor(t){this.editor=t;this.set("value",undefined);this.set("isEnabled",false);this._disableStack=new Set;this.decorate("execute");this.listenTo(this.editor.model.document,"change",()=>{this.refresh()});this.on("execute",t=>{if(!this.isEnabled){t.stop()}},{priority:"high"});this.listenTo(t,"change:isReadOnly",(t,e,i)=>{if(i){this.forceDisabled("readOnlyMode")}else{this.clearForceDisabled("readOnlyMode")}})}refresh(){this.isEnabled=true}forceDisabled(t){this._disableStack.add(t);if(this._disableStack.size==1){this.on("set:isEnabled",Hw,{priority:"highest"});this.isEnabled=false}}clearForceDisabled(t){this._disableStack.delete(t);if(this._disableStack.size==0){this.off("set:isEnabled",Hw);this.refresh()}}execute(){}destroy(){this.stopListening()}}vs(jw,Jc);function Hw(t){t.return=false;t.stop()}function Ww(t){const e=t.next();if(e.done){return null}return e.value}const qw=["left","right","center","justify"];function Uw(t){return qw.includes(t)}function $w(t,e){if(e.contentLanguageDirection=="rtl"){return t==="right"}else{return t==="left"}}const Gw="alignment";class Kw extends jw{refresh(){const t=this.editor;const e=t.locale;const i=Ww(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i);if(this.isEnabled&&i.hasAttribute("alignment")){this.value=i.getAttribute("alignment")}else{this.value=e.contentLanguageDirection==="rtl"?"right":"left"}}execute(t={}){const e=this.editor;const i=e.locale;const n=e.model;const o=n.document;const r=t.value;n.change(t=>{const e=Array.from(o.selection.getSelectedBlocks()).filter(t=>this._canBeAligned(t));const n=e[0].getAttribute("alignment");const s=$w(r,i)||n===r||!r;if(s){Jw(e,t)}else{Yw(e,t,r)}})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,Gw)}}function Jw(t,e){for(const i of t){e.removeAttribute(Gw,i)}}function Yw(t,e,i){for(const n of t){e.setAttribute(Gw,i,n)}}class Qw extends mp{static get pluginName(){return"AlignmentEditing"}constructor(t){super(t);t.config.define("alignment",{options:[...qw]})}init(){const t=this.editor;const e=t.locale;const i=t.model.schema;const n=t.config.get("alignment.options").filter(Uw);i.extend("$block",{allowAttributes:"alignment"});t.model.schema.setAttributeProperties("alignment",{isFormatting:true});const o=Xw(n.filter(t=>!$w(t,e)));t.conversion.attributeToAttribute(o);t.commands.add("alignment",new Kw(t))}}function Xw(t){const e={model:{key:"alignment",values:t.slice()},view:{}};for(const i of t){e.view[i]={key:"style",value:{"text-align":i}}}return e}var Zw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>';var tk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>';var ek='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>';var ik='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>';const nk=new Map([["left",Zw],["right",tk],["center",ek],["justify",ik]]);class ok extends mp{get localizedOptionTitles(){const t=this.editor.t;return{left:t("iw"),right:t("ix"),center:t("iy"),justify:t("iz")}}static get pluginName(){return"AlignmentUI"}init(){const t=this.editor;const e=t.ui.componentFactory;const i=t.t;const n=t.config.get("alignment.options");n.filter(Uw).forEach(t=>this._addButton(t));e.add("alignment",t=>{const o=Wb(t);const r=n.map(t=>e.create(`alignment:${t}`));qb(o,r);o.buttonView.set({label:i("ja"),tooltip:true});o.toolbarView.isVertical=true;o.toolbarView.ariaLabel=i("jb");o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const s=t.contentLanguageDirection==="rtl"?tk:Zw;o.buttonView.bind("icon").toMany(r,"isOn",(...t)=>{const e=t.findIndex(t=>t);if(e<0){return s}return r[e].icon});o.bind("isEnabled").toMany(r,"isEnabled",(...t)=>t.some(t=>t));return o})}_addButton(t){const e=this.editor;e.ui.componentFactory.add(`alignment:${t}`,i=>{const n=e.commands.get("alignment");const o=new hb(i);o.set({label:this.localizedOptionTitles[t],icon:nk.get(t),tooltip:true,isToggleable:true});o.bind("isEnabled").to(n);o.bind("isOn").to(n,"value",e=>e===t);this.listenTo(o,"execute",()=>{e.execute("alignment",{value:t});e.editing.view.focus()});return o})}}class rk extends mp{static get requires(){return[Qw,ok]}static get pluginName(){return"Alignment"}}class sk{constructor(t){this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return true}}vs(sk,Jc);class ak extends sk{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",false);this._actions=new ys({idProperty:"_id"});this._actions.delegate("add","remove").to(this)}add(t){if(typeof t!=="string"){throw new ss["b"]("pendingactions-add-invalid-message: The message must be a string.",this)}const e=Object.create(Jc);e.set("message",t);this._actions.add(e);this.hasAny=true;return e}remove(t){this._actions.remove(t);this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}class ck{constructor(){const t=new window.FileReader;this._reader=t;this._data=undefined;this.set("loaded",0);t.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const e=this._reader;this.total=t.size;return new Promise((i,n)=>{e.onload=()=>{const t=e.result;this._data=t;i(t)};e.onerror=()=>{n("error")};e.onabort=()=>{n("aborted")};this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}}vs(ck,Jc);class lk extends mp{static get pluginName(){return"FileRepository"}static get requires(){return[ak]}init(){this.loaders=new ys;this.loaders.on("add",()=>this._updatePendingAction());this.loaders.on("remove",()=>this._updatePendingAction());this._loadersMap=new Map;this._pendingAction=null;this.set("uploaded",0);this.set("uploadTotal",null);this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter){console.warn(Object(ss["a"])("filerepository-no-upload-adapter: Upload adapter is not defined."));return null}const e=new dk(Promise.resolve(t),this.createUploadAdapter);this.loaders.add(e);this._loadersMap.set(t,e);if(t instanceof Promise){e.file.then(t=>{this._loadersMap.set(t,e)}).catch(()=>{})}e.on("change:uploaded",()=>{let t=0;for(const e of this.loaders){t+=e.uploaded}this.uploaded=t});e.on("change:uploadTotal",()=>{let t=0;for(const e of this.loaders){if(e.uploadTotal){t+=e.uploadTotal}}this.uploadTotal=t});return e}destroyLoader(t){const e=t instanceof dk?t:this.getLoader(t);e._destroy();this.loaders.remove(e);this._loadersMap.forEach((t,i)=>{if(t===e){this._loadersMap.delete(i)}})}_updatePendingAction(){const t=this.editor.plugins.get(ak);if(this.loaders.length){if(!this._pendingAction){const e=this.editor.t;const i=t=>`${e("lb")} ${parseInt(t)}%.`;this._pendingAction=t.add(i(this.uploadedPercent));this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else{t.remove(this._pendingAction);this._pendingAction=null}}}vs(lk,Jc);class dk{constructor(t,e){this.id=is();this._filePromiseWrapper=this._createFilePromiseWrapper(t);this._adapter=e(this);this._reader=new ck;this.set("status","idle");this.set("uploaded",0);this.set("uploadTotal",null);this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0);this.set("uploadResponse",null)}get file(){if(!this._filePromiseWrapper){return Promise.resolve(null)}else{return this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null)}}get data(){return this._reader.data}read(){if(this.status!="idle"){throw new ss["b"]("filerepository-read-wrong-status: You cannot call read if the status is different than idle.",this)}this.status="reading";return this.file.then(t=>this._reader.read(t)).then(t=>{this.status="idle";return t}).catch(t=>{if(t==="aborted"){this.status="aborted";throw"aborted"}this.status="error";throw this._reader.error?this._reader.error:t})}upload(){if(this.status!="idle"){throw new ss["b"]("filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.",this)}this.status="uploading";return this.file.then(()=>this._adapter.upload()).then(t=>{this.uploadResponse=t;this.status="idle";return t}).catch(t=>{if(this.status==="aborted"){throw"aborted"}this.status="error";throw t})}abort(){const t=this.status;this.status="aborted";if(!this._filePromiseWrapper.isFulfilled){this._filePromiseWrapper.promise.catch(()=>{});this._filePromiseWrapper.rejecter("aborted")}else if(t=="reading"){this._reader.abort()}else if(t=="uploading"&&this._adapter.abort){this._adapter.abort()}this._destroy()}_destroy(){this._filePromiseWrapper=undefined;this._reader=undefined;this._adapter=undefined;this.uploadResponse=undefined}_createFilePromiseWrapper(t){const e={};e.promise=new Promise((i,n)=>{e.rejecter=n;e.isFulfilled=false;t.then(t=>{e.isFulfilled=true;i(t)}).catch(t=>{e.isFulfilled=true;n(t)})});return e}}vs(dk,Jc);class uk extends mp{static get requires(){return[lk]}static get pluginName(){return"Base64UploadAdapter"}init(){this.editor.plugins.get(lk).createUploadAdapter=t=>new hk(t)}}class hk{constructor(t){this.loader=t}upload(){return new Promise((t,e)=>{const i=this.reader=new window.FileReader;i.addEventListener("load",()=>{t({default:i.result})});i.addEventListener("error",t=>{e(t)});i.addEventListener("abort",()=>{e()});this.loader.file.then(t=>{i.readAsDataURL(t)})})}abort(){this.reader.abort()}}class fk extends jw{refresh(){this.value=this._getValue();this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model;const i=e.schema;const n=e.document.selection;const o=Array.from(n.getSelectedBlocks());const r=t.forceValue===undefined?!this.value:t.forceValue;e.change(t=>{if(!r){this._removeQuote(t,o.filter(gk))}else{const e=o.filter(t=>gk(t)||pk(i,t));this._applyQuote(t,e)}})}_getValue(){const t=this.editor.model.document.selection;const e=Ww(t.getSelectedBlocks());return!!(e&&gk(e))}_checkEnabled(){if(this.value){return true}const t=this.editor.model.document.selection;const e=this.editor.model.schema;const i=Ww(t.getSelectedBlocks());if(!i){return false}return pk(e,i)}_removeQuote(t,e){mk(t,e).reverse().forEach(e=>{if(e.start.isAtStart&&e.end.isAtEnd){t.unwrap(e.start.parent);return}if(e.start.isAtStart){const i=t.createPositionBefore(e.start.parent);t.move(e,i);return}if(!e.end.isAtEnd){t.split(e.end)}const i=t.createPositionAfter(e.end.parent);t.move(e,i)})}_applyQuote(t,e){const i=[];mk(t,e).reverse().forEach(e=>{let n=gk(e.start);if(!n){n=t.createElement("blockQuote");t.wrap(e,n)}i.push(n)});i.reverse().reduce((e,i)=>{if(e.nextSibling==i){t.merge(t.createPositionAfter(e));return e}return i})}}function gk(t){return t.parent.name=="blockQuote"?t.parent:null}function mk(t,e){let i;let n=0;const o=[];while(n<e.length){const r=e[n];const s=e[n+1];if(!i){i=t.createPositionBefore(r)}if(!s||r.nextSibling!=s){o.push(t.createRange(i,t.createPositionAfter(r)));i=null}n++}return o}function pk(t,e){const i=t.checkChild(e.parent,"blockQuote");const n=t.checkChild(["$root","blockQuote"],e);return i&&n}class bk extends mp{static get pluginName(){return"BlockQuoteEditing"}init(){const t=this.editor;const e=t.model.schema;t.commands.add("blockQuote",new fk(t));e.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"});e.addChildCheck((t,e)=>{if(t.endsWith("blockQuote")&&e.name=="blockQuote"){return false}});t.conversion.elementToElement({model:"blockQuote",view:"blockquote"});t.model.document.registerPostFixer(i=>{const n=t.model.document.differ.getChanges();for(const t of n){if(t.type=="insert"){const n=t.position.nodeAfter;if(!n){continue}if(n.is("blockQuote")&&n.isEmpty){i.remove(n);return true}else if(n.is("blockQuote")&&!e.checkChild(t.position,n)){i.unwrap(n);return true}else if(n.is("element")){const t=i.createRangeIn(n);for(const n of t.getItems()){if(n.is("blockQuote")&&!e.checkChild(i.createPositionBefore(n),n)){i.unwrap(n);return true}}}}else if(t.type=="remove"){const e=t.position.parent;if(e.is("blockQuote")&&e.isEmpty){i.remove(e);return true}}}return false})}afterInit(){const t=this.editor;const e=t.commands.get("blockQuote");this.listenTo(this.editor.editing.view.document,"enter",(t,i)=>{const n=this.editor.model.document;const o=n.selection.getLastPosition().parent;if(n.selection.isCollapsed&&o.isEmpty&&e.value){this.editor.execute("blockQuote");this.editor.editing.view.scrollToTheSelection();i.preventDefault();t.stop()}})}}var wk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>';var kk=i(45);class _k extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add("blockQuote",i=>{const n=t.commands.get("blockQuote");const o=new hb(i);o.set({label:e("jc"),icon:wk,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute("blockQuote");t.editing.view.focus()});return o})}}class vk extends mp{static get requires(){return[bk,_k]}static get pluginName(){return"BlockQuote"}}class yk extends jw{constructor(t,e){super(t);this.attributeKey=e}refresh(){const t=this.editor.model;const e=t.document;this.value=this._getValueFromFirstAllowedNode();this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model;const i=e.document;const n=i.selection;const o=t.forceValue===undefined?!this.value:t.forceValue;e.change(t=>{if(n.isCollapsed){if(o){t.setSelectionAttribute(this.attributeKey,true)}else{t.removeSelectionAttribute(this.attributeKey)}}else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i){if(o){t.setAttribute(this.attributeKey,o,e)}else{t.removeAttribute(this.attributeKey,e)}}}})}_getValueFromFirstAllowedNode(){const t=this.editor.model;const e=t.schema;const i=t.document.selection;if(i.isCollapsed){return i.hasAttribute(this.attributeKey)}for(const t of i.getRanges()){for(const i of t.getItems()){if(e.checkAttribute(i,this.attributeKey)){return i.hasAttribute(this.attributeKey)}}}return false}}const xk="bold";class Ck extends mp{static get pluginName(){return"BoldEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:xk});t.model.schema.setAttributeProperties(xk,{isFormatting:true,copyOnEnter:true});t.conversion.attributeToElement({model:xk,view:"strong",upcastAlso:["b",t=>{const e=t.getStyle("font-weight");if(!e){return null}if(e=="bold"||Number(e)>=600){return{name:true,styles:["font-weight"]}}}]});t.commands.add(xk,new yk(t,xk));t.keystrokes.set("CTRL+B",xk)}}var Ak='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>';const Tk="bold";class Pk extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(Tk,i=>{const n=t.commands.get(Tk);const o=new hb(i);o.set({label:e("ji"),icon:Ak,keystroke:"CTRL+B",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(Tk);t.editing.view.focus()});return o})}}class Sk extends mp{static get requires(){return[Ck,Pk]}static get pluginName(){return"Bold"}}class Ek extends jw{constructor(t,e){super(t);this.attributeKey=e}refresh(){const t=this.editor.model;const e=t.document;this.value=e.selection.getAttribute(this.attributeKey);this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model;const i=e.document;const n=i.selection;const o=t.value;e.change(t=>{if(n.isCollapsed){if(o){t.setSelectionAttribute(this.attributeKey,o)}else{t.removeSelectionAttribute(this.attributeKey)}}else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i){if(o){t.setAttribute(this.attributeKey,o,e)}else{t.removeAttribute(this.attributeKey,e)}}}})}}var Rk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035L8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class Ok extends hb{constructor(t){super(t);const e=this.bindTemplate;this.set("color");this.set("hasBorder");this.icon=Rk;this.extendTemplate({attributes:{style:{backgroundColor:e.to("color")},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render();this.iconView.fillColor="hsl(0, 0%, 100%)"}}var Ik=i(47);class Vk extends Gp{constructor(t,e){super(t);const i=e&&e.colorDefinitions||[];const n={};if(e&&e.columns){n.gridTemplateColumns=`repeat( ${e.columns}, 1fr)`}this.set("selectedColor");this.items=this.createCollection();this.focusTracker=new fb;this.keystrokes=new dp;this._focusCycler=new yb({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}});this.items.on("add",(t,e)=>{e.isOn=e.color===this.selectedColor});i.forEach(t=>{const e=new Ok;e.set({color:t.color,label:t.label,tooltip:true,hasBorder:t.options.hasBorder});e.on("execute",()=>{this.fire("execute",{value:t.color,hasBorder:t.options.hasBorder,label:t.label})});this.items.add(e)});this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:n}});this.on("change:selectedColor",(t,e,i)=>{for(const t of this.items){t.isOn=t.color===i}})}focus(){if(this.items.length){this.items.first.focus()}}focusLast(){if(this.items.length){this.items.last.focus()}}render(){super.render();for(const t of this.items){this.focusTracker.add(t.element)}this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)});this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)});this.keystrokes.listenTo(this.element)}}var Nk=i(49);class Mk extends Gp{constructor(t){super(t);this.set("text");this.set("for");this.id=`ck-editor__label_${is()}`;const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}class Bk extends ys{constructor(t){super(t);this.set("isEmpty",true)}add(t,e){if(this.find(e=>e.color===t.color)){return}super.add(t,e);this.set("isEmpty",false)}remove(t){const e=super.remove(t);if(this.length===0){this.set("isEmpty",true)}return e}hasColor(t){return!!this.find(e=>e.color===t)}}vs(Bk,Jc);var zk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.636 9.531l-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>';var Lk=i(51);class Fk extends Gp{constructor(t,{colors:e,columns:i,removeButtonLabel:n,documentColorsLabel:o,documentColorsCount:r}){super(t);this.items=this.createCollection();this.colorDefinitions=e;this.focusTracker=new fb;this.keystrokes=new dp;this.set("selectedColor");this.removeButtonLabel=n;this.columns=i;this.documentColors=new Bk;this.documentColorsCount=r;this._focusCycler=new yb({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}});this._documentColorsLabel=o;this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items});this.items.add(this._removeColorButton())}updateDocumentColors(t,e){const i=t.document;const n=this.documentColorsCount;this.documentColors.clear();for(const o of i.getRootNames()){const r=i.getRoot(o);const s=t.createRangeIn(r);for(const t of s.getItems()){if(t.is("textProxy")&&t.hasAttribute(e)){this._addColorToDocumentColors(t.getAttribute(e));if(this.documentColors.length>=n){return}}}}}updateSelectedColors(){const t=this.documentColorsGrid;const e=this.staticColorsGrid;const i=this.selectedColor;e.selectedColor=i;if(t){t.selectedColor=i}}render(){super.render();for(const t of this.items){this.focusTracker.add(t.element)}this.keystrokes.listenTo(this.element)}appendGrids(){if(this.staticColorsGrid){return}this.staticColorsGrid=this._createStaticColorsGrid();this.items.add(this.staticColorsGrid);if(this.documentColorsCount){const t=_p.bind(this.documentColors,this.documentColors);const e=new Mk(this.locale);e.text=this._documentColorsLabel;e.extendTemplate({attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]}});this.items.add(e);this.documentColorsGrid=this._createDocumentColorsGrid();this.items.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_removeColorButton(){const t=new hb;t.set({withText:true,icon:zk,tooltip:true,label:this.removeButtonLabel});t.class="ck-color-table__remove-color";t.on("execute",()=>{this.fire("execute",{value:null})});return t}_createStaticColorsGrid(){const t=new Vk(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});t.delegate("execute").to(this);return t}_createDocumentColorsGrid(){const t=_p.bind(this.documentColors,this.documentColors);const e=new Vk(this.locale,{columns:this.columns});e.delegate("execute").to(this);e.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}});e.items.bindTo(this.documentColors).using(t=>{const e=new Ok;e.set({color:t.color,hasBorder:t.options&&t.options.hasBorder});if(t.label){e.set({label:t.label,tooltip:true})}e.on("execute",()=>{this.fire("execute",{value:t.color})});return e});this.documentColors.on("change:isEmpty",(t,i,n)=>{if(n){e.selectedColor=null}});return e}_addColorToDocumentColors(t){const e=this.colorDefinitions.find(e=>e.color===t);if(!e){this.documentColors.add({color:t,label:t,options:{hasBorder:false}})}else{this.documentColors.add(Object.assign({},e))}}}const Dk="fontSize";const jk="fontFamily";const Hk="fontColor";const Wk="fontBackgroundColor";function qk(t,e){const i={model:{key:t,values:[]},view:{},upcastAlso:{}};for(const t of e){i.model.values.push(t.model);i.view[t.model]=t.view;if(t.upcastAlso){i.upcastAlso[t.model]=t.upcastAlso}}return i}function Uk(t){return e=>Kk(e.getStyle(t))}function $k(t){return(e,i)=>i.createAttributeElement("span",{style:`${t}:${e}`},{priority:7})}function Gk({dropdownView:t,colors:e,columns:i,removeButtonLabel:n,documentColorsLabel:o,documentColorsCount:r}){const s=t.locale;const a=new Fk(s,{colors:e,columns:i,removeButtonLabel:n,documentColorsLabel:o,documentColorsCount:r});t.colorTableView=a;t.panelView.children.add(a);a.delegate("execute").to(t,"execute");return a}function Kk(t){return t.replace(/\s/g,"")}class Jk extends Ek{constructor(t){super(t,jk)}}function Yk(t){return t.map(Qk).filter(t=>!!t)}function Qk(t){if(typeof t==="object"){return t}if(t==="default"){return{title:"Default",model:undefined}}if(typeof t!=="string"){return}return Xk(t)}function Xk(t){const e=t.replace(/"|'/g,"").split(",");const i=e[0];const n=e.map(Zk).join(", ");return{title:i,model:i,view:{name:"span",styles:{"font-family":n},priority:7}}}function Zk(t){t=t.trim();if(t.indexOf(" ")>0){t=`'${t}'`}return t}class t_ extends mp{static get pluginName(){return"FontFamilyEditing"}constructor(t){super(t);t.config.define(jk,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"]})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:jk});t.model.schema.setAttributeProperties(jk,{isFormatting:true,copyOnEnter:true});const e=Yk(t.config.get("fontFamily.options")).filter(t=>t.model);const i=qk(jk,e);t.conversion.attributeToElement(i);t.commands.add(jk,new Jk(t))}}class e_{constructor(t,e){if(e){qc(this,e)}if(t){this.set(t)}}}vs(e_,Jc);var i_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class n_ extends mp{init(){const t=this.editor;const e=t.t;const i=this._getLocalizedOptions();const n=t.commands.get(jk);t.ui.componentFactory.add(jk,o=>{const r=Wb(o);Ub(r,o_(i,n));r.buttonView.set({label:e("jo"),icon:i_,tooltip:true});r.extendTemplate({attributes:{class:"ck-font-family-dropdown"}});r.bind("isEnabled").to(n);this.listenTo(r,"execute",e=>{t.execute(e.source.commandName,{value:e.source.commandParam});t.editing.view.focus()});return r})}_getLocalizedOptions(){const t=this.editor;const e=t.t;const i=Yk(t.config.get(jk).options);return i.map(t=>{if(t.title==="Default"){t.title=e("jp")}return t})}}function o_(t,e){const i=new ys;for(const n of t){const t={type:"button",model:new e_({commandName:jk,commandParam:n.model,label:n.title,withText:true})};t.model.bind("isOn").to(e,"value",t=>t===n.model);if(n.view&&n.view.styles){t.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`)}i.add(t)}return i}class r_ extends mp{static get requires(){return[t_,n_]}static get pluginName(){return"FontFamily"}}class s_ extends Ek{constructor(t){super(t,Dk)}}function a_(t){return t.map(l_).filter(t=>!!t)}const c_={tiny:{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}},small:{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}},big:{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}},huge:{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}};function l_(t){if(typeof t==="object"){return t}if(c_[t]){return c_[t]}if(t==="default"){return{model:undefined,title:"Default"}}const e=parseFloat(t);if(isNaN(e)){return}return d_(e)}function d_(t){const e=String(t);return{title:e,model:t,view:{name:"span",styles:{"font-size":`${t}px`},priority:7}}}class u_ extends mp{static get pluginName(){return"FontSizeEditing"}constructor(t){super(t);t.config.define(Dk,{options:["tiny","small","default","big","huge"]});const e=a_(this.editor.config.get("fontSize.options")).filter(t=>t.model);const i=qk(Dk,e);t.conversion.attributeToElement(i);t.commands.add(Dk,new s_(t))}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Dk});t.model.schema.setAttributeProperties(Dk,{isFormatting:true,copyOnEnter:true})}}var h_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5L7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279l.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';var f_=i(53);class g_ extends mp{init(){const t=this.editor;const e=t.t;const i=this._getLocalizedOptions();const n=t.commands.get(Dk);t.ui.componentFactory.add(Dk,o=>{const r=Wb(o);Ub(r,m_(i,n));r.buttonView.set({label:e("jq"),icon:h_,tooltip:true});r.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}});r.bind("isEnabled").to(n);this.listenTo(r,"execute",e=>{t.execute(e.source.commandName,{value:e.source.commandParam});t.editing.view.focus()});return r})}_getLocalizedOptions(){const t=this.editor;const e=t.t;const i={Default:e("jp"),Tiny:e("jr"),Small:e("js"),Big:e("jt"),Huge:e("ju")};const n=a_(t.config.get(Dk).options);return n.map(t=>{const e=i[t.title];if(e&&e!=t.title){t=Object.assign({},t,{title:e})}return t})}}function m_(t,e){const i=new ys;for(const n of t){const t={type:"button",model:new e_({commandName:Dk,commandParam:n.model,label:n.title,class:"ck-fontsize-option",withText:true})};if(n.view&&n.view.styles){t.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`)}if(n.view&&n.view.classes){t.model.set("class",`${t.model.class} ${n.view.classes}`)}t.model.bind("isOn").to(e,"value",t=>t===n.model);i.add(t)}return i}class p_ extends mp{static get requires(){return[u_,g_]}static get pluginName(){return"FontSize"}}class b_ extends Ek{constructor(t){super(t,Hk)}}class w_ extends mp{static get pluginName(){return"FontColorEditing"}constructor(t){super(t);t.config.define(Hk,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:true},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5});t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Hk,value:Uk("color")}});t.conversion.for("downcast").attributeToElement({model:Hk,view:$k("color")});t.commands.add(Hk,new b_(t));t.model.schema.extend("$text",{allowAttributes:Hk});t.model.schema.setAttributeProperties(Hk,{isFormatting:true,copyOnEnter:true})}}function k_(t,e){const i=t.t;const n={Black:i("lx"),"Dim grey":i("ly"),Grey:i("lz"),"Light grey":i("ma"),White:i("mb"),Red:i("mc"),Orange:i("md"),Yellow:i("me"),"Light green":i("mf"),Green:i("mg"),Aquamarine:i("mh"),Turquoise:i("mi"),"Light blue":i("mj"),Blue:i("mk"),Purple:i("ml")};return e.map(t=>{const e=n[t.label];if(e&&e!=t.label){t.label=e}return t})}function __(t){return t.map(v_).filter(t=>!!t)}function v_(t){if(typeof t==="string"){return{model:t.replace(/ /g,""),label:t,hasBorder:false,view:{name:"span",styles:{color:t}}}}else{return{model:t.color.replace(/ /g,""),label:t.label||t.color,hasBorder:t.hasBorder===undefined?false:t.hasBorder,view:{name:"span",styles:{color:`${t.color}`}}}}}class y_ extends mp{constructor(t,{commandName:e,icon:i,componentName:n,dropdownLabel:o}){super(t);this.commandName=e;this.componentName=n;this.icon=i;this.dropdownLabel=o;this.columns=t.config.get(`${this.componentName}.columns`);this.colorTableView}init(){const t=this.editor;const e=t.locale;const i=e.t;const n=t.commands.get(this.commandName);const o=__(t.config.get(this.componentName).colors);const r=k_(e,o);const s=t.config.get(`${this.componentName}.documentColors`);t.ui.componentFactory.add(this.componentName,e=>{const o=Wb(e);this.colorTableView=Gk({dropdownView:o,colors:r.map(t=>({label:t.label,color:t.model,options:{hasBorder:t.hasBorder}})),columns:this.columns,removeButtonLabel:i("li"),documentColorsLabel:s!==0?i("lj"):undefined,documentColorsCount:s===undefined?this.columns:s});this.colorTableView.bind("selectedColor").to(n,"value");o.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:true});o.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}});o.bind("isEnabled").to(n);o.on("execute",(e,i)=>{t.execute(this.commandName,i);t.editing.view.focus()});o.on("change:isOpen",(e,i,n)=>{o.colorTableView.appendGrids();if(n){if(s!==0){this.colorTableView.updateDocumentColors(t.model,this.componentName)}this.colorTableView.updateSelectedColors()}});return o})}}var x_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3L10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class C_ extends y_{constructor(t){const e=t.locale.t;super(t,{commandName:Hk,componentName:Hk,icon:x_,dropdownLabel:e("jv")})}static get pluginName(){return"FontColorUI"}}class A_ extends mp{static get requires(){return[w_,C_]}static get pluginName(){return"FontColor"}}class T_ extends Ek{constructor(t){super(t,Wk)}}class P_ extends mp{static get pluginName(){return"FontBackgroundColorEditing"}constructor(t){super(t);t.config.define(Wk,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:true},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5});t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Wk,value:Uk("background-color")}});t.conversion.for("downcast").attributeToElement({model:Wk,view:$k("background-color")});t.commands.add(Wk,new T_(t));t.model.schema.extend("$text",{allowAttributes:Wk});t.model.schema.setAttributeProperties(Wk,{isFormatting:true,copyOnEnter:true})}}var S_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class E_ extends y_{constructor(t){const e=t.locale.t;super(t,{commandName:Wk,componentName:Wk,icon:S_,dropdownLabel:e("jw")})}static get pluginName(){return"FontBackgroundColorUI"}}class R_ extends mp{static get requires(){return[P_,E_]}static get pluginName(){return"FontBackgroundColor"}}class O_ extends jw{refresh(){const t=this.editor.model;const e=t.document;const i=Ww(e.selection.getSelectedBlocks());this.value=!!i&&i.is("paragraph");this.isEnabled=!!i&&I_(i,t.schema)}execute(t={}){const e=this.editor.model;const i=e.document;e.change(n=>{const o=(t.selection||i.selection).getSelectedBlocks();for(const t of o){if(!t.is("paragraph")&&I_(t,e.schema)){n.rename(t,"paragraph")}}})}}function I_(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class V_ extends mp{static get pluginName(){return"Paragraph"}init(){const t=this.editor;const e=t.model;const i=t.data;t.commands.add("paragraph",new O_(t));e.schema.register("paragraph",{inheritAllFrom:"$block"});t.conversion.elementToElement({model:"paragraph",view:"p"});t.conversion.for("upcast").elementToElement({model:(t,e)=>{if(!V_.paragraphLikeElements.has(t.name)){return null}if(t.isEmpty){return null}return e.createElement("paragraph")},converterPriority:"low"});i.upcastDispatcher.on("element",(t,e,i)=>{if(!i.consumable.test(e.viewItem,{name:e.viewItem.name})){return}if(M_(e.viewItem,e.modelCursor,i.schema)){Object.assign(e,N_(e.viewItem,e.modelCursor,i))}},{priority:"low"});i.upcastDispatcher.on("text",(t,e,i)=>{if(e.modelRange){return}if(M_(e.viewItem,e.modelCursor,i.schema)){Object.assign(e,N_(e.viewItem,e.modelCursor,i))}},{priority:"lowest"});e.document.registerPostFixer(t=>this._autoparagraphEmptyRoots(t));t.data.on("ready",()=>{e.enqueueChange("transparent",t=>this._autoparagraphEmptyRoots(t))},{priority:"lowest"})}_autoparagraphEmptyRoots(t){const e=this.editor.model;for(const i of e.document.getRootNames()){const n=e.document.getRoot(i);if(n.isEmpty&&n.rootName!="$graveyard"){if(e.schema.checkChild(n,"paragraph")){t.insertElement("paragraph",n);return true}}}}}V_.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);function N_(t,e,i){const n=i.writer.createElement("paragraph");i.writer.insert(n,e);return i.convertItem(t,i.writer.createPositionAt(n,0))}function M_(t,e,i){const n=i.createContext(e);if(!i.checkChild(n,"paragraph")){return false}if(!i.checkChild(n.push("paragraph"),t)){return false}return true}class B_ extends jw{constructor(t,e){super(t);this.modelElements=e}refresh(){const t=Ww(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name;this.isEnabled=!!t&&this.modelElements.some(e=>z_(t,e,this.editor.model.schema))}execute(t){const e=this.editor.model;const i=e.document;const n=t.value;e.change(t=>{const o=Array.from(i.selection.getSelectedBlocks()).filter(t=>z_(t,n,e.schema));for(const e of o){if(!e.is(n)){t.rename(e,n)}}})}}function z_(t,e,i){return i.checkChild(t.parent,e)&&!i.isObject(t)}const L_="paragraph";class F_ extends mp{static get pluginName(){return"HeadingEditing"}constructor(t){super(t);t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[V_]}init(){const t=this.editor;const e=t.config.get("heading.options");const i=[];for(const n of e){if(n.model!==L_){t.model.schema.register(n.model,{inheritAllFrom:"$block"});t.conversion.elementToElement(n);i.push(n.model)}}this._addDefaultH1Conversion(t);t.commands.add("heading",new B_(t,i))}afterInit(){const t=this.editor;const e=t.commands.get("enter");const i=t.config.get("heading.options");if(e){this.listenTo(e,"afterExecute",(e,n)=>{const o=t.model.document.selection.getFirstPosition().parent;const r=i.some(t=>o.is(t.model));if(r&&!o.is(L_)&&o.childCount===0){n.writer.rename(o,L_)}})}}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:os.get("low")+1})}}function D_(t){const e=t.t;const i={Paragraph:e("ny"),"Heading 1":e("nz"),"Heading 2":e("oa"),"Heading 3":e("ob"),"Heading 4":e("oc"),"Heading 5":e("od"),"Heading 6":e("oe")};return t.config.get("heading.options").map(t=>{const e=i[t.title];if(e&&e!=t.title){t.title=e}return t})}var j_=i(11);class H_ extends mp{init(){const t=this.editor;const e=t.t;const i=D_(t);const n=e("jd");const o=e("je");t.ui.componentFactory.add("heading",e=>{const r={};const s=new ys;const a=t.commands.get("heading");const c=t.commands.get("paragraph");const l=[a];for(const t of i){const e={type:"button",model:new e_({label:t.title,class:t.class,withText:true})};if(t.model==="paragraph"){e.model.bind("isOn").to(c,"value");e.model.set("commandName","paragraph");l.push(c)}else{e.model.bind("isOn").to(a,"value",e=>e===t.model);e.model.set({commandName:"heading",commandValue:t.model})}s.add(e);r[t.model]=t.title}const d=Wb(e);Ub(d,s);d.buttonView.set({isOn:false,withText:true,tooltip:o});d.extendTemplate({attributes:{class:["ck-heading-dropdown"]}});d.bind("isEnabled").toMany(l,"isEnabled",(...t)=>t.some(t=>t));d.buttonView.bind("label").to(a,"value",c,"value",(t,e)=>{const i=t||e&&"paragraph";return r[i]?r[i]:n});this.listenTo(d,"execute",e=>{t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:undefined);t.editing.view.focus()});return d})}}class W_ extends mp{static get requires(){return[F_,H_]}static get pluginName(){return"Heading"}}class q_{constructor(){this._stack=[]}add(t,e){const i=this._stack;const n=i[0];this._insertDescriptor(t);const o=i[0];if(n!==o&&!U_(n,o)){this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:e})}}remove(t,e){const i=this._stack;const n=i[0];this._removeDescriptor(t);const o=i[0];if(n!==o&&!U_(n,o)){this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:e})}}_insertDescriptor(t){const e=this._stack;const i=e.findIndex(e=>e.id===t.id);if(U_(t,e[i])){return}if(i>-1){e.splice(i,1)}let n=0;while(e[n]&&$_(e[n],t)){n++}e.splice(n,0,t)}_removeDescriptor(t){const e=this._stack;const i=e.findIndex(e=>e.id===t);if(i>-1){e.splice(i,1)}}}vs(q_,ds);function U_(t,e){return t&&e&&t.priority==e.priority&&G_(t.classes)==G_(e.classes)}function $_(t,e){if(t.priority>e.priority){return true}else if(t.priority<e.priority){return false}return G_(t.classes)>G_(e.classes)}function G_(t){return Array.isArray(t)?t.sort().join(","):t}var K_='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const J_="ck-widget";const Y_="ck-widget_selected";function Q_(t){if(!t.is("element")){return false}return!!t.getCustomProperty("widget")}function X_(t,e,i={}){if(!Al.isEdge){e.setAttribute("contenteditable","false",t)}e.addClass(J_,t);e.setCustomProperty("widget",true,t);t.getFillerOffset=rv;if(i.label){tv(t,i.label,e)}if(i.hasSelectionHandle){sv(t,e)}Z_(t,e,(t,e,i)=>i.addClass(n(e.classes),t),(t,e,i)=>i.removeClass(n(e.classes),t));return t;function n(t){return Array.isArray(t)?t:[t]}}function Z_(t,e,i,n){const o=new q_;o.on("change:top",(e,o)=>{if(o.oldDescriptor){n(t,o.oldDescriptor,o.writer)}if(o.newDescriptor){i(t,o.newDescriptor,o.writer)}});e.setCustomProperty("addHighlight",(t,e,i)=>o.add(e,i),t);e.setCustomProperty("removeHighlight",(t,e,i)=>o.remove(e,i),t)}function tv(t,e,i){i.setCustomProperty("widgetLabel",e,t)}function ev(t){const e=t.getCustomProperty("widgetLabel");if(!e){return""}return typeof e=="function"?e():e}function iv(t,e){e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t);if(!Al.isEdge){e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t);t.on("change:isReadOnly",(i,n,o)=>{e.setAttribute("contenteditable",o?"false":"true",t)})}t.on("change:isFocused",(i,n,o)=>{if(o){e.addClass("ck-editor__nested-editable_focused",t)}else{e.removeClass("ck-editor__nested-editable_focused",t)}});return t}function nv(t,e){const i=t.getSelectedElement();if(i&&e.schema.isBlock(i)){return e.createPositionAfter(i)}const n=t.getSelectedBlocks().next().value;if(n){if(n.isEmpty){return e.createPositionAt(n,0)}const i=e.createPositionAfter(n);if(t.focus.isTouching(i)){return i}return e.createPositionBefore(n)}return t.focus}function ov(t,e){return(i,n)=>{const{mapper:o,viewPosition:r}=n;const s=o.findMappedViewAncestor(r);if(!e(s)){return}const a=o.toModelElement(s);n.modelPosition=t.createPositionAt(a,r.isAtStart?"before":"after")}}function rv(){return null}function sv(t,e){const i=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},(function(t){const e=this.toDomElement(t);const i=new cb;i.set("content",K_);i.render();e.appendChild(i.element);return e}));e.insert(e.createPositionAt(t,0),i);e.addClass(["ck-widget_with-selection-handle"],t)}class av extends jw{refresh(){this.isEnabled=cv(this.editor.model)}execute(){const t=this.editor.model;t.change(e=>{const i=e.createElement("horizontalLine");t.insertContent(i);let n=i.nextSibling;const o=n&&t.schema.checkChild(n,"$text");if(!o&&t.schema.checkChild(i.parent,"paragraph")){n=e.createElement("paragraph");t.insertContent(n,e.createPositionAfter(i))}if(n){e.setSelection(n,0)}})}}function cv(t){const e=t.schema;const i=t.document.selection;return lv(i,e,t)&&!dv(i,e)}function lv(t,e,i){const n=uv(t,i);return e.checkChild(n,"horizontalLine")}function dv(t,e){const i=t.getSelectedElement();return i&&e.isObject(i)}function uv(t,e){const i=nv(t,e);const n=i.parent;if(n.isEmpty&&!n.is("$root")){return n.parent}return n}var hv=i(56);class fv extends mp{static get pluginName(){return"HorizontalLineEditing"}init(){const t=this.editor;const e=t.model.schema;const i=t.t;const n=t.conversion;e.register("horizontalLine",{isObject:true,allowWhere:"$block"});n.for("dataDowncast").elementToElement({model:"horizontalLine",view:(t,e)=>e.createEmptyElement("hr")});n.for("editingDowncast").elementToElement({model:"horizontalLine",view:(t,e)=>{const n=i("jf");const o=e.createContainerElement("div");const r=e.createEmptyElement("hr");e.addClass("ck-horizontal-line",o);e.setCustomProperty("hr",true,o);e.insert(e.createPositionAt(o,0),r);return gv(o,e,n)}});n.for("upcast").elementToElement({view:"hr",model:"horizontalLine"});t.commands.add("horizontalLine",new av(t))}}function gv(t,e,i){e.setCustomProperty("horizontalLine",true,t);return X_(t,e,{label:i})}var mv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>';class pv extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add("horizontalLine",i=>{const n=t.commands.get("horizontalLine");const o=new hb(i);o.set({label:e("jf"),icon:mv,tooltip:true});o.bind("isEnabled").to(n,"isEnabled");this.listenTo(o,"execute",()=>{t.execute("horizontalLine");t.editing.view.focus()});return o})}}class bv extends mp{static get requires(){return[fv,pv]}static get pluginName(){return"HorizontalLine"}}class wv extends Gd{observe(t){this.listenTo(t,"load",(t,e)=>{const i=e.target;if(i.tagName=="IMG"){this._fireEvents(e)}},{useCapture:true})}_fireEvents(t){if(this.isEnabled){this.document.fire("layoutChanged");this.document.fire("imageLoaded",t)}}}function kv(t,e,i){e.setCustomProperty("image",true,t);return X_(t,e,{label:n});function n(){const e=Av(t);const n=e.getAttribute("alt");return n?`${n} ${i}`:i}}function _v(t){return!!t.getCustomProperty("image")&&Q_(t)}function vv(t){const e=t.getSelectedElement();if(e&&_v(e)){return e}return null}function yv(t){return!!t&&t.is("image")}function xv(t,e,i={}){const n=t.createElement("image",i);const o=nv(e.document.selection,e);e.insertContent(n,o);if(n.parent){t.setSelection(n,"on")}}function Cv(t){const e=t.schema;const i=t.document.selection;return Tv(i,e,t)&&!Pv(i,e)&&Sv(i)}function Av(t){return Array.from(t.getChildren()).find(t=>t.is("img"))}function Tv(t,e,i){const n=Ev(t,i);return e.checkChild(n,"image")}function Pv(t,e){const i=t.getSelectedElement();return i&&e.isObject(i)}function Sv(t){return[...t.focus.getAncestors()].every(t=>!t.is("image"))}function Ev(t,e){const i=nv(t,e);const n=i.parent;if(n.isEmpty&&!n.is("$root")){return n.parent}return n}function Rv(){return e=>{e.on("element:figure",t)};function t(t,e,i){if(!i.consumable.test(e.viewItem,{name:true,classes:"image"})){return}const n=Av(e.viewItem);if(!n||!n.hasAttribute("src")||!i.consumable.test(n,{name:true})){return}const o=i.convertItem(n,e.modelCursor);const r=Ww(o.modelRange.getItems());if(!r){return}i.convertChildren(e.viewItem,i.writer.createPositionAt(r,0));e.modelRange=o.modelRange;e.modelCursor=o.modelCursor}}function Ov(){return e=>{e.on("attribute:srcset:image",t)};function t(t,e,i){if(!i.consumable.consume(e.item,t.name)){return}const n=i.writer;const o=i.mapper.toViewElement(e.item);const r=Av(o);if(e.attributeNewValue===null){const t=e.attributeOldValue;if(t.data){n.removeAttribute("srcset",r);n.removeAttribute("sizes",r);if(t.width){n.removeAttribute("width",r)}}}else{const t=e.attributeNewValue;if(t.data){n.setAttribute("srcset",t.data,r);n.setAttribute("sizes","100vw",r);if(t.width){n.setAttribute("width",t.width,r)}}}}}function Iv(t){return i=>{i.on(`attribute:${t}:image`,e)};function e(t,e,i){if(!i.consumable.consume(e.item,t.name)){return}const n=i.writer;const o=i.mapper.toViewElement(e.item);const r=Av(o);if(e.attributeNewValue!==null){n.setAttribute(e.attributeKey,e.attributeNewValue,r)}else{n.removeAttribute(e.attributeKey,r)}}}class Vv extends jw{refresh(){this.isEnabled=Cv(this.editor.model)}execute(t){const e=this.editor.model;e.change(i=>{const n=Array.isArray(t.source)?t.source:[t.source];for(const t of n){xv(i,e,{src:t})}})}}class Nv extends mp{static get pluginName(){return"ImageEditing"}init(){const t=this.editor;const e=t.model.schema;const i=t.t;const n=t.conversion;t.editing.view.addObserver(wv);e.register("image",{isObject:true,isBlock:true,allowWhere:"$block",allowAttributes:["alt","src","srcset"]});n.for("dataDowncast").elementToElement({model:"image",view:(t,e)=>Mv(e)});n.for("editingDowncast").elementToElement({model:"image",view:(t,e)=>kv(Mv(e),e,i("jx"))});n.for("downcast").add(Iv("src")).add(Iv("alt")).add(Ov());n.for("upcast").elementToElement({view:{name:"img",attributes:{src:true}},model:(t,e)=>e.createElement("image",{src:t.getAttribute("src")})}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:t=>{const e={data:t.getAttribute("srcset")};if(t.hasAttribute("width")){e.width=t.getAttribute("width")}return e}}}).add(Rv());t.commands.add("imageInsert",new Vv(t))}}function Mv(t){const e=t.createEmptyElement("img");const i=t.createContainerElement("figure",{class:"image"});t.insert(t.createPositionAt(i,0),e);return i}class Bv extends Ju{constructor(t){super(t);this.domEventType="mousedown"}onDomEvent(t){this.fire(t.type,t)}}var zv=i(58);const Lv=Bl("Ctrl+A");class Fv extends mp{static get pluginName(){return"Widget"}init(){const t=this.editor.editing.view;const e=t.document;this._previouslySelected=new Set;this.editor.editing.downcastDispatcher.on("selection",(t,e,i)=>{this._clearPreviouslySelectedWidgets(i.writer);const n=i.writer;const o=n.document.selection;const r=o.getSelectedElement();let s=null;for(const t of o.getRanges()){for(const e of t){const t=e.item;if(Q_(t)&&!Wv(t,s)){n.addClass(Y_,t);this._previouslySelected.add(t);s=t;if(t==r){n.setSelection(o.getRanges(),{fake:true,label:ev(r)})}}}}},{priority:"low"});t.addObserver(Bv);this.listenTo(e,"mousedown",(...t)=>this._onMousedown(...t));this.listenTo(e,"keydown",(...t)=>this._onKeydown(...t),{priority:"high"});this.listenTo(e,"delete",(t,e)=>{if(this._handleDelete(e.direction=="forward")){e.preventDefault();t.stop()}},{priority:"high"})}_onMousedown(t,e){const i=this.editor;const n=i.editing.view;const o=n.document;let r=e.target;if(Hv(r)){if(Al.isSafari&&e.domEvent.detail>=3){const t=i.editing.mapper;const n=t.toModelElement(r);this.editor.model.change(t=>{e.preventDefault();t.setSelection(n,"in")})}return}if(!Q_(r)){r=r.findAncestor(Q_);if(!r){return}}e.preventDefault();if(!o.isFocused){n.focus()}const s=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(s)}_onKeydown(t,e){const i=e.keyCode;const n=this.editor.locale.contentLanguageDirection==="ltr";const o=i==Nl.arrowdown||i==Nl[n?"arrowright":"arrowleft"];let r=false;if(Dv(i)){r=this._handleArrowKeys(o)}else if(jv(e)){r=this._selectAllNestedEditableContent()||this._selectAllContent()}else if(i===Nl.enter){r=this._handleEnterKey(e.shiftKey)}if(r){e.preventDefault();t.stop()}}_handleDelete(t){if(this.editor.isReadOnly){return}const e=this.editor.model.document;const i=e.selection;if(!i.isCollapsed){return}const n=this._getObjectElementNextToSelection(t);if(n){this.editor.model.change(t=>{let e=i.anchor.parent;while(e.isEmpty){const i=e;e=i.parent;t.remove(i)}this._setSelectionOverElement(n)});return true}}_handleArrowKeys(t){const e=this.editor.model;const i=e.schema;const n=e.document;const o=n.selection;const r=o.getSelectedElement();if(r&&i.isObject(r)){const n=t?o.getLastPosition():o.getFirstPosition();const r=i.getNearestSelectionRange(n,t?"forward":"backward");if(r){e.change(t=>{t.setSelection(r)})}return true}if(!o.isCollapsed){return}const s=this._getObjectElementNextToSelection(t);if(!!s&&i.isObject(s)){this._setSelectionOverElement(s);return true}}_handleEnterKey(t){const e=this.editor.model;const i=e.document.selection;const n=i.getSelectedElement();if(qv(n,e.schema)){e.change(i=>{let o=i.createPositionAt(n,t?"before":"after");const r=i.createElement("paragraph");if(e.schema.isBlock(n.parent)){const t=e.schema.findAllowedParent(o,r);o=i.split(o,t).position}i.insert(r,o);i.setSelection(r,"in")});return true}}_selectAllNestedEditableContent(){const t=this.editor.model;const e=t.document.selection;const i=t.schema.getLimitElement(e);if(e.getFirstRange().root==i){return false}t.change(t=>{t.setSelection(t.createRangeIn(i))});return true}_selectAllContent(){const t=this.editor.model;const e=this.editor.editing;const i=e.view;const n=i.document;const o=n.selection;const r=o.getSelectedElement();if(r&&Q_(r)){const i=e.mapper.toModelElement(r.parent);t.change(t=>{t.setSelection(t.createRangeIn(i))});return true}return false}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(t){const e=this.editor.model;const i=e.schema;const n=e.document.selection;const o=e.createSelection(n);e.modifySelection(o,{direction:t?"forward":"backward"});const r=t?o.focus.nodeBefore:o.focus.nodeAfter;if(!!r&&i.isObject(r)){return r}return null}_clearPreviouslySelectedWidgets(t){for(const e of this._previouslySelected){t.removeClass(Y_,e)}this._previouslySelected.clear()}}function Dv(t){return t==Nl.arrowright||t==Nl.arrowleft||t==Nl.arrowup||t==Nl.arrowdown}function jv(t){return Ml(t)==Lv}function Hv(t){while(t){if(t.is("editableElement")&&!t.is("rootElement")){return true}if(Q_(t)){return false}t=t.parent}return false}function Wv(t,e){if(!e){return false}return Array.from(t.getAncestors()).includes(e)}function qv(t,e){return t&&e.isObject(t)&&!e.isInline(t)}class Uv extends jw{refresh(){const t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=yv(t);if(yv(t)&&t.hasAttribute("alt")){this.value=t.getAttribute("alt")}else{this.value=false}}execute(t){const e=this.editor.model;const i=e.document.selection.getSelectedElement();e.change(e=>{e.setAttribute("alt",t.newValue,i)})}}class $v extends mp{static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Uv(this.editor))}}var Gv=i(60);class Kv extends Gp{constructor(t,e){super(t);const i=`ck-input-${is()}`;const n=`ck-status-${is()}`;this.set("label");this.set("value");this.set("isReadOnly",false);this.set("errorText",null);this.set("infoText",null);this.labelView=this._createLabelView(i);this.inputView=this._createInputView(e,i,n);this.statusView=this._createStatusView(n);this.bind("_statusText").to(this,"errorText",this,"infoText",(t,e)=>t||e);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-input",o.if("isReadOnly","ck-disabled")]},children:[this.labelView,this.inputView,this.statusView]})}_createLabelView(t){const e=new Mk(this.locale);e.for=t;e.bind("text").to(this,"label");return e}_createInputView(t,e,i){const n=new t(this.locale,i);n.id=e;n.ariaDescribedById=i;n.bind("value").to(this);n.bind("isReadOnly").to(this);n.bind("hasError").to(this,"errorText",t=>!!t);n.on("input",()=>{this.errorText=null});return n}_createStatusView(t){const e=new Gp(this.locale);const i=this.bindTemplate;e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-input__status",i.if("errorText","ck-labeled-input__status_error"),i.if("_statusText","ck-hidden",t=>!t)],id:t,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]});return e}select(){this.inputView.select()}focus(){this.inputView.focus()}}var Jv=i(62);class Yv extends Gp{constructor(t){super(t);this.set("value");this.set("id");this.set("placeholder");this.set("isReadOnly",false);this.set("hasError",false);this.set("ariaDescribedById");const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),"aria-invalid":e.if("hasError",true),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to("input")}})}render(){super.render();const t=t=>{this.element.value=!t&&t!==0?"":t};t(this.value);this.on("change:value",(e,i,n)=>{t(n)})}select(){this.element.select()}focus(){this.element.focus()}}function Qv({view:t}){t.listenTo(t.element,"submit",(e,i)=>{i.preventDefault();t.fire("submit")},{useCapture:true})}var Xv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>';var Zv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';var ty=i(64);class ey extends Gp{constructor(t){super(t);const e=this.locale.t;this.focusTracker=new fb;this.keystrokes=new dp;this.labeledInput=this._createLabeledInputView();this.saveButtonView=this._createButton(e("lo"),Xv,"ck-button-save");this.saveButtonView.type="submit";this.cancelButtonView=this._createButton(e("lp"),Zv,"ck-button-cancel","cancel");this._focusables=new bp;this._focusCycler=new yb({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render();this.keystrokes.listenTo(this.element);Qv({view:this});[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t);this.focusTracker.add(t.element)})}_createButton(t,e,i,n){const o=new hb(this.locale);o.set({label:t,icon:e,tooltip:true});o.extendTemplate({attributes:{class:i}});if(n){o.delegate("execute").to(this,n)}return o}_createLabeledInputView(){const t=this.locale.t;const e=new Kv(this.locale,Yv);e.label=t("lt");e.inputView.placeholder=t("lt");return e}}var iy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>';function ny(t){const e=t.plugins.get("ContextualBalloon");if(vv(t.editing.view.document.selection)){const i=oy(t);e.updatePosition(i)}}function oy(t){const e=t.editing.view;const i=nb.defaultPositions;return{target:e.domConverter.viewToDom(e.document.selection.getSelectedElement()),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]}}class ry extends mp{static get requires(){return[kb]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton();this._createForm()}destroy(){super.destroy();this._form.destroy()}_createButton(){const t=this.editor;const e=t.t;t.ui.componentFactory.add("imageTextAlternative",i=>{const n=t.commands.get("imageTextAlternative");const o=new hb(i);o.set({label:e("lh"),icon:iy,tooltip:true});o.bind("isEnabled").to(n,"isEnabled");this.listenTo(o,"execute",()=>{this._showForm()});return o})}_createForm(){const t=this.editor;const e=t.editing.view;const i=e.document;this._balloon=this.editor.plugins.get("ContextualBalloon");this._form=new ey(t.locale);this._form.render();this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.inputView.element.value});this._hideForm(true)});this.listenTo(this._form,"cancel",()=>{this._hideForm(true)});this._form.keystrokes.set("Esc",(t,e)=>{this._hideForm(true);e()});this.listenTo(t.ui,"update",()=>{if(!vv(i.selection)){this._hideForm(true)}else if(this._isVisible){ny(t)}});Db({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible){return}const t=this.editor;const e=t.commands.get("imageTextAlternative");const i=this._form.labeledInput;if(!this._isInBalloon){this._balloon.add({view:this._form,position:oy(t)})}i.value=i.inputView.element.value=e.value||"";this._form.labeledInput.select()}_hideForm(t){if(!this._isInBalloon){return}if(this._form.focusTracker.isFocused){this._form.saveButtonView.focus()}this._balloon.remove(this._form);if(t){this.editor.editing.view.focus()}}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class sy extends mp{static get requires(){return[$v,ry]}static get pluginName(){return"ImageTextAlternative"}}var ay=i(66);class cy extends mp{static get requires(){return[Nv,Fv,sy]}static get pluginName(){return"Image"}}class ly extends mp{static get requires(){return[kb]}static get pluginName(){return"WidgetToolbarRepository"}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const e=t.plugins.get("BalloonToolbar");this.listenTo(e,"show",e=>{if(hy(t.editing.view.document.selection)){e.stop()}},{priority:"high"})}this._toolbarDefinitions=new Map;this._balloon=this.editor.plugins.get("ContextualBalloon");this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()});this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()});this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values()){t.view.destroy()}}register(t,{ariaLabel:e,items:i,getRelatedElement:n,balloonClassName:o="ck-toolbar-container"}){const r=this.editor;const s=r.t;const a=new Xb(r.locale);a.ariaLabel=e||s("kf");if(this._toolbarDefinitions.has(t)){throw new ss["b"]("widget-toolbar-duplicated: Toolbar with the given id was already added.",this,{toolbarId:t})}a.fillFromConfig(i,r.ui.componentFactory);this._toolbarDefinitions.set(t,{view:a,getRelatedElement:n,balloonClassName:o})}_updateToolbarsVisibility(){let t=0;let e=null;let i=null;for(const n of this._toolbarDefinitions.values()){const o=n.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o){if(this._isToolbarInBalloon(n)){this._hideToolbar(n)}}else if(!this.editor.ui.focusTracker.isFocused){if(this._isToolbarVisible(n)){this._hideToolbar(n)}}else{const r=o.getAncestors().length;if(r>t){t=r;e=o;i=n}}}if(i){this._showToolbar(i,e)}}_hideToolbar(t){this._balloon.remove(t.view);this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,e){if(this._isToolbarVisible(t)){dy(this.editor,e)}else if(!this._isToolbarInBalloon(t)){this._balloon.add({view:t.view,position:uy(this.editor,e),balloonClassName:t.balloonClassName});this.listenTo(this._balloon,"change:visibleView",()=>{for(const t of this._toolbarDefinitions.values()){if(this._isToolbarVisible(t)){const e=t.getRelatedElement(this.editor.editing.view.document.selection);dy(this.editor,e)}}})}}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function dy(t,e){const i=t.plugins.get("ContextualBalloon");const n=uy(t,e);i.updatePosition(n)}function uy(t,e){const i=t.editing.view;const n=nb.defaultPositions;return{target:i.domConverter.mapViewToDom(e),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]}}function hy(t){const e=t.getSelectedElement();return!!(e&&Q_(e))}class fy extends mp{static get requires(){return[ly]}static get pluginName(){return"ImageToolbar"}afterInit(){const t=this.editor;const e=t.t;const i=t.plugins.get(ly);i.register("image",{ariaLabel:e("a"),items:t.config.get("image.toolbar")||[],getRelatedElement:vv})}}class gy extends jw{constructor(t,e){super(t);this.defaultStyle=false;this.styles=e.reduce((t,e)=>{t[e.name]=e;if(e.isDefault){this.defaultStyle=e.name}return t},{})}refresh(){const t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=yv(t);if(!t){this.value=false}else if(t.hasAttribute("imageStyle")){const e=t.getAttribute("imageStyle");this.value=this.styles[e]?e:false}else{this.value=this.defaultStyle}}execute(t){const e=t.value;const i=this.editor.model;const n=i.document.selection.getSelectedElement();i.change(t=>{if(this.styles[e].isDefault){t.removeAttribute("imageStyle",n)}else{t.setAttribute("imageStyle",e,n)}})}}function my(t){return(e,i,n)=>{if(!n.consumable.consume(i.item,e.name)){return}const o=by(i.attributeNewValue,t);const r=by(i.attributeOldValue,t);const s=n.mapper.toViewElement(i.item);const a=n.writer;if(r){a.removeClass(r.className,s)}if(o){a.addClass(o.className,s)}}}function py(t){const e=t.filter(t=>!t.isDefault);return(t,i,n)=>{if(!i.modelRange){return}const o=i.viewItem;const r=Ww(i.modelRange.getItems());if(!n.schema.checkAttribute(r,"imageStyle")){return}for(const t of e){if(n.consumable.consume(o,{classes:t.className})){n.writer.setAttribute("imageStyle",t.name,r)}}}}function by(t,e){for(const i of e){if(i.name===t){return i}}}var wy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>';var ky='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>';var _y='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>';var vy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>';const yy={full:{name:"full",title:"Full size image",icon:wy,isDefault:true},side:{name:"side",title:"Side image",icon:vy,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:ky,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:_y,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:vy,className:"image-style-align-right"}};const xy={full:wy,left:ky,right:vy,center:_y};function Cy(t=[]){return t.map(Ay)}function Ay(t){if(typeof t=="string"){const e=t;if(yy[e]){t=Object.assign({},yy[e])}else{console.warn(Object(ss["a"])("image-style-not-found: There is no such image style of given name."),{name:e});t={name:e}}}else if(yy[t.name]){const e=yy[t.name];const i=Object.assign({},t);for(const n in e){if(!t.hasOwnProperty(n)){i[n]=e[n]}}t=i}if(typeof t.icon=="string"&&xy[t.icon]){t.icon=xy[t.icon]}return t}class Ty extends mp{static get pluginName(){return"ImageStyleEditing"}init(){const t=this.editor;const e=t.model.schema;const i=t.data;const n=t.editing;t.config.define("image.styles",["full","side"]);const o=Cy(t.config.get("image.styles"));e.extend("image",{allowAttributes:"imageStyle"});const r=my(o);n.downcastDispatcher.on("attribute:imageStyle:image",r);i.downcastDispatcher.on("attribute:imageStyle:image",r);i.upcastDispatcher.on("element:figure",py(o),{priority:"low"});t.commands.add("imageStyle",new gy(t,o))}}var Py=i(68);class Sy extends mp{static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Full size image":t("jy"),"Side image":t("jz"),"Left aligned image":t("ka"),"Centered image":t("kb"),"Right aligned image":t("kc")}}init(){const t=this.editor;const e=t.config.get("image.styles");const i=Ey(Cy(e),this.localizedDefaultStylesTitles);for(const t of i){this._createButton(t)}}_createButton(t){const e=this.editor;const i=`imageStyle:${t.name}`;e.ui.componentFactory.add(i,i=>{const n=e.commands.get("imageStyle");const o=new hb(i);o.set({label:t.title,icon:t.icon,tooltip:true,isToggleable:true});o.bind("isEnabled").to(n,"isEnabled");o.bind("isOn").to(n,"value",e=>e===t.name);this.listenTo(o,"execute",()=>{e.execute("imageStyle",{value:t.name});e.editing.view.focus()});return o})}}function Ey(t,e){for(const i of t){if(e[i.title]){i.title=e[i.title]}}return t}class Ry extends mp{static get requires(){return[Ty,Sy]}static get pluginName(){return"ImageStyle"}}class Oy{constructor(t){this.set("activeHandlePosition",null);this.set("proposedWidthPercents",null);this.set("proposedWidth",null);this.set("proposedHeight",null);this.set("proposedHandleHostWidth",null);this.set("proposedHandleHostHeight",null);this._options=t;this._referenceCoordinates=null}begin(t,e,i){const n=new vh(e);this.activeHandlePosition=My(t);this._referenceCoordinates=Vy(e,By(this.activeHandlePosition));this.originalWidth=n.width;this.originalHeight=n.height;this.aspectRatio=n.width/n.height;const o=i.style.width;if(o&&o.match(/^\d+\.?\d*%$/)){this.originalWidthPercents=parseFloat(o)}else{this.originalWidthPercents=Iy(i,n)}}update(t){this.proposedWidth=t.width;this.proposedHeight=t.height;this.proposedWidthPercents=t.widthPercents;this.proposedHandleHostWidth=t.handleHostWidth;this.proposedHandleHostHeight=t.handleHostHeight}}vs(Oy,Jc);function Iy(t,e){const i=t.parentElement;const n=parseFloat(i.ownerDocument.defaultView.getComputedStyle(i).width);return e.width/n*100}function Vy(t,e){const i=new vh(t);const n=e.split("-");const o={x:n[1]=="right"?i.right:i.left,y:n[0]=="bottom"?i.bottom:i.top};o.x+=t.ownerDocument.defaultView.scrollX;o.y+=t.ownerDocument.defaultView.scrollY;return o}function Ny(t){return`ck-widget__resizer__handle-${t}`}function My(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const i of e){if(t.classList.contains(Ny(i))){return i}}}function By(t){const e=t.split("-");const i={top:"bottom",bottom:"top",left:"right",right:"left"};return`${i[e[0]]}-${i[e[1]]}`}class zy{constructor(t){this._options=t;this._domResizerWrapper=null;this._viewResizerWrapper=null;this.set("isEnabled",true);this.decorate("begin");this.decorate("cancel");this.decorate("commit");this.decorate("updateSize");this.on("commit",t=>{if(!this.state.proposedWidth&&!this.state.proposedWidthPercents){this._cleanup();t.stop()}},{priority:"high"})}attach(){const t=this;const e=this._options.viewElement;const i=this._options.editor.editing.view;i.change(i=>{const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},(function(e){const i=this.toDomElement(e);t._appendHandles(i);t._appendSizeUI(i);t._domResizerWrapper=i;t.on("change:isEnabled",(t,e,n)=>{i.style.display=n?"":"none"});i.style.display=t.isEnabled?"":"none";return i}));i.insert(i.createPositionAt(e,"end"),n);i.addClass("ck-widget_with-resizer",e);this._viewResizerWrapper=n})}begin(t){this.state=new Oy(this._options);this._sizeUI.bindToState(this._options,this.state);this.state.begin(t,this._getHandleHost(),this._getResizeHost())}updateSize(t){const e=this._proposeNewSize(t);const i=this._options.editor.editing.view;i.change(t=>{const i=this._options.unit||"%";const n=(i==="%"?e.widthPercents:e.width)+i;t.setStyle("width",n,this._options.viewElement)});const n=this._getHandleHost();const o=new vh(n);e.handleHostWidth=Math.round(o.width);e.handleHostHeight=Math.round(o.height);const r=new vh(n);e.width=Math.round(r.width);e.height=Math.round(r.height);this.redraw(o);this.state.update(e)}commit(){const t=this._options.unit||"%";const e=(t==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.onCommit(e);this._cleanup()}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(t){const e=this._domResizerWrapper;if(i(e)){this._options.editor.editing.view.change(i=>{const n=e.parentElement;const o=this._getHandleHost();const r=t||new vh(o);i.setStyle("width",r.width+"px",this._viewResizerWrapper);i.setStyle("height",r.height+"px",this._viewResizerWrapper);const s={left:o.offsetLeft,top:o.offsetTop,height:o.offsetHeight,width:o.offsetWidth};if(!n.isSameNode(o)){i.setStyle("left",s.left+"px",this._viewResizerWrapper);i.setStyle("top",s.top+"px",this._viewResizerWrapper);i.setStyle("height",s.height+"px",this._viewResizerWrapper);i.setStyle("width",s.width+"px",this._viewResizerWrapper)}})}function i(t){return t&&t.ownerDocument&&t.ownerDocument.contains(t)}}containsHandle(t){return this._domResizerWrapper.contains(t)}static isResizeHandle(t){return t.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeUI.dismiss();this._sizeUI.isVisible=false}_proposeNewSize(t){const e=this.state;const i=Dy(t);const n=this._options.isCentered?this._options.isCentered(this):true;const o={x:e._referenceCoordinates.x-(i.x+e.originalWidth),y:i.y-e.originalHeight-e._referenceCoordinates.y};if(n&&e.activeHandlePosition.endsWith("-right")){o.x=i.x-(e._referenceCoordinates.x+e.originalWidth)}if(n){o.x*=2}const r={width:Math.abs(e.originalWidth+o.x),height:Math.abs(e.originalHeight+o.y)};r.dominant=r.width/e.aspectRatio>r.height?"width":"height";r.max=r[r.dominant];const s={width:r.width,height:r.height};if(r.dominant=="width"){s.height=s.width/e.aspectRatio}else{s.width=s.height*e.aspectRatio}return{width:Math.round(s.width),height:Math.round(s.height),widthPercents:Math.min(Math.round(e.originalWidthPercents/e.originalWidth*s.width*100)/100,100)}}_getResizeHost(){const t=this._domResizerWrapper.parentElement;return this._options.getResizeHost(t)}_getHandleHost(){const t=this._domResizerWrapper.parentElement;return this._options.getHandleHost(t)}_appendHandles(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const i of e){t.appendChild(new _p({tag:"div",attributes:{class:`ck-widget__resizer__handle ${Fy(i)}`}}).render())}}_appendSizeUI(t){const e=new Ly;e.render();this._sizeUI=e;t.appendChild(e.element)}}vs(zy,Jc);class Ly extends Gp{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("activeHandlePosition",t=>t?`ck-orientation-${t}`:"")],style:{display:t.if("isVisible","none",t=>!t)}},children:[{text:t.to("label")}]})}bindToState(t,e){this.bind("isVisible").to(e,"proposedWidth",e,"proposedHeight",(t,e)=>t!==null&&e!==null);this.bind("label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(e,i,n)=>{if(t.unit==="px"){return`${e}${i}`}else{return`${n}%`}});this.bind("activeHandlePosition").to(e)}dismiss(){this.unbind();this.isVisible=false}}function Fy(t){return`ck-widget__resizer__handle-${t}`}function Dy(t){return{x:t.pageX,y:t.pageY}}var jy="Expected a function";function Hy(t,e,i){var n=true,o=true;if(typeof t!="function"){throw new TypeError(jy)}if(ct(i)){n="leading"in i?!!i.leading:n;o="trailing"in i?!!i.trailing:o}return uh(t,e,{leading:n,maxWait:e,trailing:o})}var Wy=Hy;var qy=i(70);class Uy extends mp{static get pluginName(){return"WidgetResize"}init(){this.set("_visibleResizer",null);this.set("_activeResizer",null);this._resizers=new Map;const t=Id.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:true});this._observer=Object.create(qd);this._observer.listenTo(t,"mousedown",this._mouseDownListener.bind(this));this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this));this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));const e=()=>{if(this._visibleResizer){this._visibleResizer.redraw()}};const i=Wy(e,200);this.on("change:_visibleResizer",e);this.editor.ui.on("update",i);this._observer.listenTo(Id.window,"resize",i);const n=this.editor.editing.view.document.selection;n.on("change",()=>{const t=n.getSelectedElement();this._visibleResizer=this._getResizerByViewElement(t)||null})}destroy(){this._observer.stopListening();for(const t of this._resizers.values()){t.destroy()}}attachTo(t){const e=new zy(t);const i=this.editor.plugins;e.attach();if(i.has("WidgetToolbarRepository")){const t=i.get("WidgetToolbarRepository");e.on("begin",()=>{t.forceDisabled("resize")},{priority:"lowest"});e.on("cancel",()=>{t.clearForceDisabled("resize")},{priority:"highest"});e.on("commit",()=>{t.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(t.viewElement,e);return e}_getResizerByHandle(t){for(const e of this._resizers.values()){if(e.containsHandle(t)){return e}}}_getResizerByViewElement(t){return this._resizers.get(t)}_mouseDownListener(t,e){if(!zy.isResizeHandle(e.target)){return}const i=e.target;this._activeResizer=this._getResizerByHandle(i);if(this._activeResizer){this._activeResizer.begin(i)}}_mouseMoveListener(t,e){if(this._activeResizer){this._activeResizer.updateSize(e)}}_mouseUpListener(){if(this._activeResizer){this._activeResizer.commit();this._activeResizer=null}}}vs(Uy,Jc);class $y extends jw{refresh(){const t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=yv(t);if(!t||!t.hasAttribute("width")){this.value=null}else{this.value={width:t.getAttribute("width"),height:null}}}execute(t){const e=this.editor.model;const i=e.document.selection.getSelectedElement();e.change(e=>{e.setAttribute("width",t.width,i)})}}var Gy=i(72);class Ky extends mp{static get requires(){return[Uy]}static get pluginName(){return"ImageResize"}init(){const t=this.editor;const e=new $y(t);this._registerSchema();this._registerConverters();t.commands.add("imageResize",e);t.editing.downcastDispatcher.on("insert:image",(i,n,o)=>{const r=o.mapper.toViewElement(n.item);const s=t.plugins.get(Uy).attachTo({unit:t.config.get("image.resizeUnit")||"%",modelElement:n.item,viewElement:r,editor:t,getHandleHost(t){return t.querySelector("img")},getResizeHost(t){return t},isCentered(){const t=n.item.getAttribute("imageStyle");return!t||t=="full"||t=="alignCenter"},onCommit(e){t.execute("imageResize",{width:e})}});s.on("updateSize",()=>{if(!r.hasClass("image_resized")){t.editing.view.change(t=>{t.addClass("image_resized",r)})}});s.bind("isEnabled").to(e)},{priority:"low"})}_registerSchema(){this.editor.model.schema.extend("image",{allowAttributes:"width"})}_registerConverters(){const t=this.editor;t.conversion.for("downcast").add(t=>t.on("attribute:width:image",(t,e,i)=>{if(!i.consumable.consume(e.item,t.name)){return}const n=i.writer;const o=i.mapper.toViewElement(e.item);if(e.attributeNewValue!==null){n.setStyle("width",e.attributeNewValue,o);n.addClass("image_resized",o)}else{n.removeStyle("width",o);n.removeClass("image_resized",o)}}));t.conversion.for("upcast").attributeToAttribute({view:{name:"figure",styles:{width:/.+/}},model:{key:"width",value:t=>t.getStyle("width")}})}}class Jy extends Gp{constructor(t){super(t);this.buttonView=new hb(t);this._fileInputView=new Yy(t);this._fileInputView.bind("acceptedType").to(this);this._fileInputView.bind("allowMultipleFiles").to(this);this._fileInputView.delegate("done").to(this);this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]});this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class Yy extends Gp{constructor(t){super(t);this.set("acceptedType");this.set("allowMultipleFiles",false);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{if(this.element&&this.element.files&&this.element.files.length){this.fire("done",this.element.files)}this.element.value=""})}})}open(){this.element.click()}}var Qy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';function Xy(t){const e=t.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function Zy(t){return new Promise((e,i)=>{const n=t.getAttribute("src");fetch(n).then(t=>t.blob()).then(t=>{const o=ex(t,n);const r=o.replace("image/","");const s=`image.${r}`;const a=ix(t,s,o);a?e(a):i()}).catch(i)})}function tx(t){if(!t.is("element","img")||!t.getAttribute("src")){return false}return t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g)}function ex(t,e){if(t.type){return t.type}else if(e.match(/data:(image\/\w+);base64/)){return e.match(/data:(image\/\w+);base64/)[1].toLowerCase()}else{return"image/jpeg"}}function ix(t,e,i){try{return new File([t],e,{type:i})}catch(t){return null}}class nx extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add("imageUpload",i=>{const n=new Jy(i);const o=t.commands.get("imageUpload");const r=t.config.get("image.upload.types");const s=Xy(r);n.set({acceptedType:r.map(t=>`image/${t}`).join(","),allowMultipleFiles:true});n.buttonView.set({label:e("kd"),icon:Qy,tooltip:true});n.buttonView.bind("isEnabled").to(o);n.on("done",(e,i)=>{const n=Array.from(i).filter(t=>s.test(t.type));if(n.length){t.execute("imageUpload",{file:n})}});return n})}}var ox='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>';var rx=i(74);var sx=i(76);var ax=i(78);class cx extends mp{constructor(t){super(t);this.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent(ox)}init(){const t=this.editor;t.editing.downcastDispatcher.on("attribute:uploadStatus:image",(...t)=>this.uploadStatusChange(...t))}uploadStatusChange(t,e,i){const n=this.editor;const o=e.item;const r=o.getAttribute("uploadId");if(!i.consumable.consume(e.item,t.name)){return}const s=n.plugins.get(lk);const a=r?e.attributeNewValue:null;const c=this.placeholder;const l=n.editing.mapper.toViewElement(o);const d=i.writer;if(a=="reading"){lx(l,d);ux(c,l,d);return}if(a=="uploading"){const t=s.loaders.get(r);lx(l,d);if(!t){ux(c,l,d)}else{hx(l,d);fx(l,d,t,n.editing.view);_x(l,d,t)}return}if(a=="complete"&&s.loaders.get(r)&&!Al.isEdge){mx(l,d,n.editing.view)}gx(l,d);hx(l,d);dx(l,d)}}function lx(t,e){if(!t.hasClass("ck-appear")){e.addClass("ck-appear",t)}}function dx(t,e){e.removeClass("ck-appear",t)}function ux(t,e,i){if(!e.hasClass("ck-image-upload-placeholder")){i.addClass("ck-image-upload-placeholder",e)}const n=Av(e);if(n.getAttribute("src")!==t){i.setAttribute("src",t,n)}if(!wx(e,"placeholder")){i.insert(i.createPositionAfter(n),bx(i))}}function hx(t,e){if(t.hasClass("ck-image-upload-placeholder")){e.removeClass("ck-image-upload-placeholder",t)}kx(t,e,"placeholder")}function fx(t,e,i,n){const o=px(e);e.insert(e.createPositionAt(t,"end"),o);i.on("change:uploadedPercent",(t,e,i)=>{n.change(t=>{t.setStyle("width",i+"%",o)})})}function gx(t,e){kx(t,e,"progressBar")}function mx(t,e,i){const n=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),n);setTimeout(()=>{i.change(t=>t.remove(t.createRangeOn(n)))},3e3)}function px(t){const e=t.createUIElement("div",{class:"ck-progress-bar"});t.setCustomProperty("progressBar",true,e);return e}function bx(t){const e=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});t.setCustomProperty("placeholder",true,e);return e}function wx(t,e){for(const i of t.getChildren()){if(i.getCustomProperty(e)){return i}}}function kx(t,e,i){const n=wx(t,i);if(n){e.remove(e.createRangeOn(n))}}function _x(t,e,i){if(i.data){const n=Av(t);e.setAttribute("src",i.data,n)}}class vx extends sk{static get pluginName(){return"Notification"}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=`show:${t.type}`+(t.namespace?`:${t.namespace}`:"");this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class yx{constructor(t){this.files=xx(t);this._native=t}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}}function xx(t){const e=t.files?Array.from(t.files):[];const i=t.items?Array.from(t.items):[];if(e.length){return e}return i.filter(t=>t.kind==="file").map(t=>t.getAsFile())}class Cx extends Ju{constructor(t){super(t);const e=this.document;this.domEventType=["paste","copy","cut","drop","dragover"];this.listenTo(e,"paste",i,{priority:"low"});this.listenTo(e,"drop",i,{priority:"low"});function i(t,i){i.preventDefault();const n=i.dropRange?[i.dropRange]:Array.from(e.selection.getRanges());const o=new ts(e,"clipboardInput");e.fire(o,{dataTransfer:i.dataTransfer,targetRanges:n});if(o.stop.called){i.stopPropagation()}}}onDomEvent(t){const e={dataTransfer:new yx(t.clipboardData?t.clipboardData:t.dataTransfer)};if(t.type=="drop"){e.dropRange=Ax(this.view,t)}this.fire(t.type,t,e)}}function Ax(t,e){const i=e.target.ownerDocument;const n=e.clientX;const o=e.clientY;let r;if(i.caretRangeFromPoint&&i.caretRangeFromPoint(n,o)){r=i.caretRangeFromPoint(n,o)}else if(e.rangeParent){r=i.createRange();r.setStart(e.rangeParent,e.rangeOffset);r.collapse(true)}if(r){return t.domConverter.domRangeToView(r)}else{return t.document.selection.getFirstRange()}}function Tx(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;");if(t.indexOf("</p><p>")>-1){t=`<p>${t}</p>`}return t}function Px(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>{if(e.length==1){return" "}return e})}const Sx=["figcaption","li"];function Ex(t){let e="";if(t.is("text")||t.is("textProxy")){e=t.data}else if(t.is("img")&&t.hasAttribute("alt")){e=t.getAttribute("alt")}else{let i=null;for(const n of t.getChildren()){const t=Ex(n);if(i&&(i.is("containerElement")||n.is("containerElement"))){if(Sx.includes(i.name)||Sx.includes(n.name)){e+="\n"}else{e+="\n\n"}}e+=t;i=n}}return e}class Rx extends mp{static get pluginName(){return"Clipboard"}init(){const t=this.editor;const e=t.model.document;const i=t.editing.view;const n=i.document;this._htmlDataProcessor=new gp(n);i.addObserver(Cx);this.listenTo(n,"clipboardInput",e=>{if(t.isReadOnly){e.stop()}},{priority:"highest"});this.listenTo(n,"clipboardInput",(t,e)=>{const n=e.dataTransfer;let o="";if(n.getData("text/html")){o=Px(n.getData("text/html"))}else if(n.getData("text/plain")){o=Tx(n.getData("text/plain"))}o=this._htmlDataProcessor.toView(o);this.fire("inputTransformation",{content:o,dataTransfer:n});i.scrollToTheSelection()},{priority:"low"});this.listenTo(this,"inputTransformation",(t,e)=>{if(!e.content.isEmpty){const t=this.editor.data;const i=this.editor.model;const n=t.toModel(e.content,"$clipboardHolder");if(n.childCount==0){return}i.insertContent(n)}},{priority:"low"});function o(i,o){const r=o.dataTransfer;o.preventDefault();const s=t.data.toView(t.model.getSelectedContent(e.selection));n.fire("clipboardOutput",{dataTransfer:r,content:s,method:i.name})}this.listenTo(n,"copy",o,{priority:"low"});this.listenTo(n,"cut",(e,i)=>{if(t.isReadOnly){i.preventDefault()}else{o(e,i)}},{priority:"low"});this.listenTo(n,"clipboardOutput",(i,n)=>{if(!n.content.isEmpty){n.dataTransfer.setData("text/html",this._htmlDataProcessor.toData(n.content));n.dataTransfer.setData("text/plain",Ex(n.content))}if(n.method=="cut"){t.model.deleteContent(e.selection)}},{priority:"low"})}}class Ox{constructor(t){this.document=t}createDocumentFragment(t){return new ql(this.document,t)}createElement(t,e,i){return new zc(this.document,t,e,i)}createText(t){return new Ls(this.document,t)}clone(t,e=false){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,i){return i._insertChild(t,e)}removeChildren(t,e,i){return i._removeChildren(t,e)}remove(t){const e=t.parent;if(e){return this.removeChildren(e.getChildIndex(t),1,e)}return[]}replace(t,e){const i=t.parent;if(i){const n=i.getChildIndex(t);this.removeChildren(n,1,i);this.insertChild(n,e,i);return true}return false}unwrapElement(t){const e=t.parent;if(e){const i=e.getChildIndex(t);this.remove(t);this.insertChild(i,t.getChildren(),e)}}rename(t,e){const i=new zc(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,i)?i:null}setAttribute(t,e,i){i._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,i){if(N(t)&&i===undefined){i=e}i._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,i){i._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return dl._createAt(t,e)}createPositionAfter(t){return dl._createAfter(t)}createPositionBefore(t){return dl._createBefore(t)}createRange(t,e){return new ul(t,e)}createRangeOn(t){return ul._createOn(t)}createRangeIn(t){return ul._createIn(t)}createSelection(t,e,i){return new gl(t,e,i)}}class Ix extends jw{refresh(){this.isEnabled=Cv(this.editor.model)}execute(t){const e=this.editor;const i=e.model;const n=e.plugins.get(lk);i.change(e=>{const o=Array.isArray(t.file)?t.file:[t.file];for(const t of o){Vx(e,i,n,t)}})}}function Vx(t,e,i,n){const o=i.createLoader(n);if(!o){return}xv(t,e,{uploadId:o.id})}class Nx extends mp{static get requires(){return[lk,vx,Rx]}static get pluginName(){return"ImageUploadEditing"}constructor(t){super(t);t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}})}init(){const t=this.editor;const e=t.model.document;const i=t.model.schema;const n=t.conversion;const o=t.plugins.get(lk);const r=Xy(t.config.get("image.upload.types"));i.extend("image",{allowAttributes:["uploadId","uploadStatus"]});t.commands.add("imageUpload",new Ix(t));n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"});this.listenTo(t.editing.view.document,"clipboardInput",(e,i)=>{if(Mx(i.dataTransfer)){return}const n=Array.from(i.dataTransfer.files).filter(t=>{if(!t){return false}return r.test(t.type)});const o=i.targetRanges.map(e=>t.editing.mapper.toModelRange(e));t.model.change(i=>{i.setSelection(o);if(n.length){e.stop();t.model.enqueueChange("default",()=>{t.execute("imageUpload",{file:n})})}})});this.listenTo(t.plugins.get(Rx),"inputTransformation",(e,i)=>{const n=Array.from(t.editing.view.createRangeIn(i.content)).filter(t=>tx(t.item)&&!t.item.getAttribute("uploadProcessed")).map(t=>({promise:Zy(t.item),imageElement:t.item}));if(!n.length){return}const r=new Ox(t.editing.view.document);for(const t of n){r.setAttribute("uploadProcessed",true,t.imageElement);const e=o.createLoader(t.promise);if(e){r.setAttribute("src","",t.imageElement);r.setAttribute("uploadId",e.id,t.imageElement)}}});t.editing.view.document.on("dragover",(t,e)=>{e.preventDefault()});e.on("change",()=>{const i=e.differ.getChanges({includeChangesInGraveyard:true});for(const e of i){if(e.type=="insert"&&e.name!="$text"){const i=e.position.nodeAfter;const n=e.position.root.rootName=="$graveyard";for(const e of Bx(t,i)){const t=e.getAttribute("uploadId");if(!t){continue}const i=o.loaders.get(t);if(!i){continue}if(n){i.abort()}else if(i.status=="idle"){this._readAndUpload(i,e)}}}}})}_readAndUpload(t,e){const i=this.editor;const n=i.model;const o=i.locale.t;const r=i.plugins.get(lk);const s=i.plugins.get(vx);n.enqueueChange("transparent",t=>{t.setAttribute("uploadStatus","reading",e)});return t.read().then(()=>{const o=t.upload();if(Al.isSafari){const t=i.editing.mapper.toViewElement(e);const n=Av(t);i.editing.view.once("render",()=>{if(!n.parent){return}const t=i.editing.view.domConverter.mapViewToDom(n.parent);if(!t){return}const e=t.style.display;t.style.display="none";t._ckHack=t.offsetHeight;t.style.display=e})}n.enqueueChange("transparent",t=>{t.setAttribute("uploadStatus","uploading",e)});return o}).then(t=>{n.enqueueChange("transparent",i=>{i.setAttributes({uploadStatus:"complete",src:t.default},e);this._parseAndSetSrcsetAttributeOnImage(t,e,i)});a()}).catch(i=>{if(t.status!=="error"&&t.status!=="aborted"){throw i}if(t.status=="error"&&i){s.showWarning(i,{title:o("ke"),namespace:"upload"})}a();n.enqueueChange("transparent",t=>{t.remove(e)})});function a(){n.enqueueChange("transparent",t=>{t.removeAttribute("uploadId",e);t.removeAttribute("uploadStatus",e)});r.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,e,i){let n=0;const o=Object.keys(t).filter(t=>{const e=parseInt(t,10);if(!isNaN(e)){n=Math.max(n,e);return true}}).map(e=>`${t[e]} ${e}w`).join(", ");if(o!=""){i.setAttribute("srcset",{data:o,width:n},e)}}}function Mx(t){return Array.from(t.types).includes("text/html")&&t.getData("text/html")!==""}function Bx(t,e){return Array.from(t.model.createRangeOn(e)).filter(t=>t.item.is("image")).map(t=>t.item)}class zx extends mp{static get pluginName(){return"ImageUpload"}static get requires(){return[Nx,nx,cx]}}class Lx extends jw{constructor(t){super(t);this._childCommands=[]}refresh(){}execute(...t){const e=this._getFirstEnabledCommand();e.execute(t)}registerChildCommand(t){this._childCommands.push(t);t.on("change:isEnabled",()=>this._checkEnabled());this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){return this._childCommands.find(t=>t.isEnabled)}}class Fx extends mp{static get pluginName(){return"IndentEditing"}init(){const t=this.editor;t.commands.add("indent",new Lx(t));t.commands.add("outdent",new Lx(t))}}var Dx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>';var jx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';class Hx extends mp{static get pluginName(){return"IndentUI"}init(){const t=this.editor;const e=t.locale;const i=t.t;const n=e.uiLanguageDirection=="ltr"?Dx:jx;const o=e.uiLanguageDirection=="ltr"?jx:Dx;this._defineButton("indent",i("jg"),n);this._defineButton("outdent",i("jh"),o)}_defineButton(t,e,i){const n=this.editor;n.ui.componentFactory.add(t,o=>{const r=n.commands.get(t);const s=new hb(o);s.set({label:e,icon:i,tooltip:true});s.bind("isOn","isEnabled").to(r,"value","isEnabled");this.listenTo(s,"execute",()=>{n.execute(t);n.editing.view.focus()});return s})}}class Wx extends mp{static get pluginName(){return"Indent"}static get requires(){return[Fx,Hx]}}class qx extends jw{constructor(t,e){super(t);this._indentBehavior=e}refresh(){const t=this.editor;const e=t.model;const i=Ww(e.document.selection.getSelectedBlocks());if(!i||!e.schema.checkAttribute(i,"blockIndent")){this.isEnabled=false;return}this.isEnabled=this._indentBehavior.checkEnabled(i.getAttribute("blockIndent"))}execute(){const t=this.editor.model;const e=Ux(t);t.change(t=>{for(const i of e){const e=i.getAttribute("blockIndent");const n=this._indentBehavior.getNextIndent(e);if(n){t.setAttribute("blockIndent",n,i)}else{t.removeAttribute("blockIndent",i)}}})}}function Ux(t){const e=t.document.selection;const i=t.schema;const n=Array.from(e.getSelectedBlocks());return n.filter(t=>i.checkAttribute(t,"blockIndent"))}class $x{constructor(t){this.isForward=t.direction==="forward";this.offset=t.offset;this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||0);return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||0);const i=!t||t.endsWith(this.unit);if(!i){return this.isForward?this.offset+this.unit:undefined}const n=this.isForward?this.offset:-this.offset;const o=e+n;return o>0?o+this.unit:undefined}}class Gx{constructor(t){this.isForward=t.direction==="forward";this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);if(this.isForward){return e<this.classes.length-1}else{return e>=0}}getNextIndent(t){const e=this.classes.indexOf(t);const i=this.isForward?1:-1;return this.classes[e+i]}}const Kx=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i;const Jx=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i;const Yx=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i;const Qx=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i;const Xx=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i;const Zx=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function tC(t){if(t.startsWith("#")){return Kx.test(t)}if(t.startsWith("rgb")){return Jx.test(t)||Yx.test(t)}if(t.startsWith("hsl")){return Qx.test(t)||Xx.test(t)}return Zx.has(t.toLowerCase())}const eC=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function iC(t){return eC.includes(t)}const nC=/^([+-]?[0-9]*[.]?[0-9]+(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function oC(t){return nC.test(t)}const rC=/^[+-]?[0-9]*[.]?[0-9]+%$/;function sC(t){return rC.test(t)}const aC=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function cC(t){return aC.includes(t)}const lC=["center","top","bottom","left","right"];function dC(t){return lC.includes(t)}const uC=["fixed","scroll","local"];function hC(t){return uC.includes(t)}const fC=/^url\(/;function gC(t){return fC.test(t)}function mC(t=""){if(t===""){return{top:undefined,right:undefined,bottom:undefined,left:undefined}}const e=kC(t);const i=e[0];const n=e[2]||i;const o=e[1]||i;const r=e[3]||o;return{top:i,bottom:n,right:o,left:r}}function pC(t){return e=>{const{top:i,right:n,bottom:o,left:r}=e;const s=[];if(![i,n,r,o].every(t=>!!t)){if(i){s.push([t+"-top",i])}if(n){s.push([t+"-right",n])}if(o){s.push([t+"-bottom",o])}if(r){s.push([t+"-left",r])}}else{s.push([t,bC(e)])}return s}}function bC({top:t,right:e,bottom:i,left:n}){const o=[];if(n!==e){o.push(t,e,i,n)}else if(i!==t){o.push(t,e,i)}else if(e!==t){o.push(t,e)}else{o.push(t)}return o.join(" ")}function wC(t){return e=>({path:t,value:mC(e)})}function kC(t){return t.replace(/, /g,",").split(" ").map(t=>t.replace(/,/g,", "))}function _C(t){t.setNormalizer("margin",wC("margin"));t.setNormalizer("margin-top",t=>({path:"margin.top",value:t}));t.setNormalizer("margin-right",t=>({path:"margin.right",value:t}));t.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t}));t.setNormalizer("margin-left",t=>({path:"margin.left",value:t}));t.setReducer("margin",pC("margin"));t.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}class vC extends mp{constructor(t){super(t);t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const t=this.editor;const e=t.config.get("indentBlock");const i=!e.classes||!e.classes.length;const n=Object.assign({direction:"forward"},e);const o=Object.assign({direction:"backward"},e);if(i){t.data.addStyleProcessorRules(_C);this._setupConversionUsingOffset(t.conversion);t.commands.add("indentBlock",new qx(t,new $x(n)));t.commands.add("outdentBlock",new qx(t,new $x(o)))}else{this._setupConversionUsingClasses(e.classes);t.commands.add("indentBlock",new qx(t,new Gx(n)));t.commands.add("outdentBlock",new qx(t,new Gx(o)))}}afterInit(){const t=this.editor;const e=t.model.schema;const i=t.commands.get("indent");const n=t.commands.get("outdent");const o=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];o.forEach(t=>{if(e.isRegistered(t)){e.extend(t,{allowAttributes:"blockIndent"})}});i.registerChildCommand(t.commands.get("indentBlock"));n.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion;const e=this.editor.locale;const i=e.contentLanguageDirection==="rtl"?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:t=>t.getStyle(i)}});t.for("downcast").attributeToAttribute({model:"blockIndent",view:t=>({key:"style",value:{[i]:t}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const i of t){e.model.values.push(i);e.view[i]={key:"class",value:[i]}}this.editor.conversion.attributeToAttribute(e)}}const yC="italic";class xC extends mp{static get pluginName(){return"ItalicEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:yC});t.model.schema.setAttributeProperties(yC,{isFormatting:true,copyOnEnter:true});t.conversion.attributeToElement({model:yC,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]});t.commands.add(yC,new yk(t,yC));t.keystrokes.set("CTRL+I",yC)}}var CC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const AC="italic";class TC extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(AC,i=>{const n=t.commands.get(AC);const o=new hb(i);o.set({label:e("jj"),icon:CC,keystroke:"CTRL+I",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(AC);t.editing.view.focus()});return o})}}class PC extends mp{static get requires(){return[xC,TC]}static get pluginName(){return"Italic"}}function SC(t,e,i){return i.createRange(EC(t,e,true,i),EC(t,e,false,i))}function EC(t,e,i,n){let o=t.textNode||(i?t.nodeBefore:t.nodeAfter);let r=null;while(o&&o.getAttribute("linkHref")==e){r=o;o=i?o.previousSibling:o.nextSibling}return r?n.createPositionAt(r,i?"before":"after"):t}class RC extends jw{constructor(t){super(t);this.manualDecorators=new ys}restoreManualDecoratorStates(){for(const t of this.manualDecorators){t.value=this._getDecoratorStateFromModel(t.id)}}refresh(){const t=this.editor.model;const e=t.document;this.value=e.selection.getAttribute("linkHref");for(const t of this.manualDecorators){t.value=this._getDecoratorStateFromModel(t.id)}this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"linkHref")}execute(t,e={}){const i=this.editor.model;const n=i.document.selection;const o=[];const r=[];for(const t in e){if(e[t]){o.push(t)}else{r.push(t)}}i.change(e=>{if(n.isCollapsed){const s=n.getFirstPosition();if(n.hasAttribute("linkHref")){const a=SC(s,n.getAttribute("linkHref"),i);e.setAttribute("linkHref",t,a);o.forEach(t=>{e.setAttribute(t,true,a)});r.forEach(t=>{e.removeAttribute(t,a)});e.setSelection(a)}else if(t!==""){const r=Hs(n.getAttributes());r.set("linkHref",t);o.forEach(t=>{r.set(t,true)});const a=e.createText(t,r);i.insertContent(a,s);e.setSelection(e.createRangeOn(a))}}else{const s=i.schema.getValidRanges(n.getRanges(),"linkHref");for(const i of s){e.setAttribute("linkHref",t,i);o.forEach(t=>{e.setAttribute(t,true,i)});r.forEach(t=>{e.removeAttribute(t,i)})}}})}_getDecoratorStateFromModel(t){const e=this.editor.model.document;return e.selection.getAttribute(t)||false}}class OC extends jw{refresh(){this.isEnabled=this.editor.model.document.selection.hasAttribute("linkHref")}execute(){const t=this.editor;const e=this.editor.model;const i=e.document.selection;const n=t.commands.get("link");e.change(t=>{const o=i.isCollapsed?[SC(i.getFirstPosition(),i.getAttribute("linkHref"),e)]:i.getRanges();for(const e of o){t.removeAttribute("linkHref",e);if(n){for(const i of n.manualDecorators){t.removeAttribute(i.id,e)}}}})}}function IC(t,e,i){var n=t.length;i=i===undefined?n:i;return!e&&i>=n?t:Oa(t,e,i)}var VC=IC;var NC="\\ud800-\\udfff",MC="\\u0300-\\u036f",BC="\\ufe20-\\ufe2f",zC="\\u20d0-\\u20ff",LC=MC+BC+zC,FC="\\ufe0e\\ufe0f";var DC="\\u200d";var jC=RegExp("["+DC+NC+LC+FC+"]");function HC(t){return jC.test(t)}var WC=HC;function qC(t){return t.split("")}var UC=qC;var $C="\\ud800-\\udfff",GC="\\u0300-\\u036f",KC="\\ufe20-\\ufe2f",JC="\\u20d0-\\u20ff",YC=GC+KC+JC,QC="\\ufe0e\\ufe0f";var XC="["+$C+"]",ZC="["+YC+"]",tA="\\ud83c[\\udffb-\\udfff]",eA="(?:"+ZC+"|"+tA+")",iA="[^"+$C+"]",nA="(?:\\ud83c[\\udde6-\\uddff]){2}",oA="[\\ud800-\\udbff][\\udc00-\\udfff]",rA="\\u200d";var sA=eA+"?",aA="["+QC+"]?",cA="(?:"+rA+"(?:"+[iA,nA,oA].join("|")+")"+aA+sA+")*",lA=aA+sA+cA,dA="(?:"+[iA+ZC+"?",ZC,nA,oA,XC].join("|")+")";var uA=RegExp(tA+"(?="+tA+")|"+dA+lA,"g");function hA(t){return t.match(uA)||[]}var fA=hA;function gA(t){return WC(t)?fA(t):UC(t)}var mA=gA;function pA(t){return function(e){e=_a(e);var i=WC(e)?mA(e):undefined;var n=i?i[0]:e.charAt(0);var o=i?VC(i,1).join(""):e.slice(1);return n[t]()+o}}var bA=pA;var wA=bA("toUpperCase");var kA=wA;const _A=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;const vA=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;function yA(t){return t.is("attributeElement")&&!!t.getCustomProperty("link")}function xA(t,e){const i=e.createAttributeElement("a",{href:t},{priority:5});e.setCustomProperty("link",true,i);return i}function CA(t){t=String(t);return AA(t)?t:"#"}function AA(t){const e=t.replace(_A,"");return e.match(vA)}function TA(t,e){const i={"Open in a new tab":t("mm"),Downloadable:t("mn")};e.forEach(t=>{if(t.label&&i[t.label]){t.label=i[t.label]}return t});return e}function PA(t){const e=[];if(t){for(const[i,n]of Object.entries(t)){const t=Object.assign({},n,{id:`link${kA(i)}`});e.push(t)}}return e}class SA{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(t){if(Array.isArray(t)){t.forEach(t=>this._definitions.add(t))}else{this._definitions.add(t)}}getDispatcher(){return t=>{t.on("attribute:linkHref",(t,e,i)=>{if(!i.consumable.test(e.item,"attribute:linkHref")){return}const n=i.writer;const o=n.document.selection;for(const t of this._definitions){const r=n.createAttributeElement("a",t.attributes,{priority:5});n.setCustomProperty("link",true,r);if(t.callback(e.attributeNewValue)){if(e.item.is("selection")){n.wrap(o.getFirstRange(),r)}else{n.wrap(i.mapper.toViewRange(e.range),r)}}else{n.unwrap(i.mapper.toViewRange(e.range),r)}}},{priority:"high"})}}}class EA{constructor({id:t,label:e,attributes:i}){this.id=t;this.set("value");this.label=e;this.attributes=i}}vs(EA,Jc);function RA({view:t,model:e,emitter:i,attribute:n,locale:o}){const r=new OA(e,i,n);const s=e.document.selection;i.listenTo(t.document,"keydown",(t,e)=>{if(!s.isCollapsed){return}if(e.shiftKey||e.altKey||e.ctrlKey){return}const i=e.keyCode==Nl.arrowright;const n=e.keyCode==Nl.arrowleft;if(!i&&!n){return}const a=s.getFirstPosition();const c=o.contentLanguageDirection;let l;if(c==="ltr"&&i||c==="rtl"&&n){l=r.handleForwardMovement(a,e)}else{l=r.handleBackwardMovement(a,e)}if(l){t.stop()}},{priority:os.get("high")+1})}class OA{constructor(t,e,i){this.model=t;this.attribute=i;this._modelSelection=t.document.selection;this._overrideUid=null;this._isNextGravityRestorationSkipped=false;e.listenTo(this._modelSelection,"change:range",(t,e)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=false;return}if(!this._isGravityOverridden){return}if(!e.directChange&&IA(this._modelSelection.getFirstPosition(),i)){return}this._restoreGravity()})}handleForwardMovement(t,e){const i=this.attribute;if(this._isGravityOverridden){return}if(t.isAtStart&&this._hasSelectionAttribute){return}if(MA(t,i)&&this._hasSelectionAttribute){this._preventCaretMovement(e);this._removeSelectionAttribute();return true}if(VA(t,i)){this._preventCaretMovement(e);this._overrideGravity();return true}if(NA(t,i)&&this._hasSelectionAttribute){this._preventCaretMovement(e);this._overrideGravity();return true}}handleBackwardMovement(t,e){const i=this.attribute;if(this._isGravityOverridden){if(MA(t,i)&&this._hasSelectionAttribute){this._preventCaretMovement(e);this._restoreGravity();this._removeSelectionAttribute();return true}else{this._preventCaretMovement(e);this._restoreGravity();if(t.isAtStart){this._removeSelectionAttribute()}return true}}else{if(MA(t,i)&&!this._hasSelectionAttribute){this._preventCaretMovement(e);this._setSelectionAttributeFromTheNodeBefore(t);return true}if(t.isAtEnd&&NA(t,i)){if(this._hasSelectionAttribute){if(BA(t,i)){this._skipNextAutomaticGravityRestoration();this._overrideGravity()}return}else{this._preventCaretMovement(e);this._setSelectionAttributeFromTheNodeBefore(t);return true}}if(t.isAtStart){if(this._hasSelectionAttribute){this._removeSelectionAttribute();this._preventCaretMovement(e);return true}return}if(BA(t,i)){this._skipNextAutomaticGravityRestoration();this._overrideGravity()}}}get _isGravityOverridden(){return!!this._overrideUid}get _hasSelectionAttribute(){return this._modelSelection.hasAttribute(this.attribute)}_overrideGravity(){this._overrideUid=this.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.model.change(t=>{t.restoreSelectionGravity(this._overrideUid);this._overrideUid=null})}_preventCaretMovement(t){t.preventDefault()}_removeSelectionAttribute(){this.model.change(t=>{t.removeSelectionAttribute(this.attribute)})}_setSelectionAttributeFromTheNodeBefore(t){const e=this.attribute;this.model.change(i=>{i.setSelectionAttribute(this.attribute,t.nodeBefore.getAttribute(e))})}_skipNextAutomaticGravityRestoration(){this._isNextGravityRestorationSkipped=true}}function IA(t,e){return VA(t,e)||NA(t,e)}function VA(t,e){const{nodeBefore:i,nodeAfter:n}=t;const o=i?i.hasAttribute(e):false;const r=n?n.hasAttribute(e):false;return r&&(!o||i.getAttribute(e)!==n.getAttribute(e))}function NA(t,e){const{nodeBefore:i,nodeAfter:n}=t;const o=i?i.hasAttribute(e):false;const r=n?n.hasAttribute(e):false;return o&&(!r||i.getAttribute(e)!==n.getAttribute(e))}function MA(t,e){const{nodeBefore:i,nodeAfter:n}=t;const o=i?i.hasAttribute(e):false;const r=n?n.hasAttribute(e):false;if(!r||!o){return}return n.getAttribute(e)!==i.getAttribute(e)}function BA(t,e){return IA(t.getShiftedBy(-1),e)}var zA=i(80);const LA="ck-link_selected";const FA="automatic";const DA="manual";const jA=/^(https?:)?\/\//;class HA extends mp{static get pluginName(){return"LinkEditing"}constructor(t){super(t);t.config.define("link",{addTargetToExternalLinks:false})}init(){const t=this.editor;const e=t.locale;t.model.schema.extend("$text",{allowAttributes:"linkHref"});t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:xA});t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(t,e)=>xA(CA(t),e)});t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:true}},model:{key:"linkHref",value:t=>t.getAttribute("href")}});t.commands.add("link",new RC(t));t.commands.add("unlink",new OC(t));const i=TA(t.t,PA(t.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(t=>t.mode===FA));this._enableManualDecorators(i.filter(t=>t.mode===DA));RA({view:t.editing.view,model:t.model,emitter:this,attribute:"linkHref",locale:e});this._setupLinkHighlight()}_enableAutomaticDecorators(t){const e=this.editor;const i=new SA;if(e.config.get("link.addTargetToExternalLinks")){i.add({id:"linkIsExternal",mode:FA,callback:t=>jA.test(t),attributes:{target:"_blank",rel:"noopener noreferrer"}})}i.add(t);if(i.length){e.conversion.for("downcast").add(i.getDispatcher())}}_enableManualDecorators(t){if(!t.length){return}const e=this.editor;const i=e.commands.get("link");const n=i.manualDecorators;t.forEach(t=>{e.model.schema.extend("$text",{allowAttributes:t.id});n.add(new EA(t));e.conversion.for("downcast").attributeToElement({model:t.id,view:(e,i)=>{if(e){const e=n.get(t.id).attributes;const o=i.createAttributeElement("a",e,{priority:5});i.setCustomProperty("link",true,o);return o}}});e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:n.get(t.id).attributes},model:{key:t.id}})})}_setupLinkHighlight(){const t=this.editor;const e=t.editing.view;const i=new Set;e.document.registerPostFixer(e=>{const n=t.model.document.selection;let o=false;if(n.hasAttribute("linkHref")){const r=SC(n.getFirstPosition(),n.getAttribute("linkHref"),t.model);const s=t.editing.mapper.toViewRange(r);for(const t of s.getItems()){if(t.is("a")&&!t.hasClass(LA)){e.addClass(LA,t);i.add(t);o=true}}}return o});t.conversion.for("editingDowncast").add(t=>{t.on("insert",n,{priority:"highest"});t.on("remove",n,{priority:"highest"});t.on("attribute",n,{priority:"highest"});t.on("selection",n,{priority:"highest"});function n(){e.change(t=>{for(const e of i.values()){t.removeClass(LA,e);i.delete(e)}})}})}}class WA extends Ju{constructor(t){super(t);this.domEventType="click"}onDomEvent(t){this.fire(t.type,t)}}var qA=i(82);class UA extends Gp{constructor(t,e=[]){super(t);const i=t.t;this.focusTracker=new fb;this.keystrokes=new dp;this.urlInputView=this._createUrlInput();this.saveButtonView=this._createButton(i("lo"),Xv,"ck-button-save");this.saveButtonView.type="submit";this.cancelButtonView=this._createButton(i("lp"),Zv,"ck-button-cancel","cancel");this._manualDecoratorSwitches=this._createManualDecoratorSwitches(e);this.children=this._createFormChildren(e);this._focusables=new bp;this._focusCycler=new yb({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const n=["ck","ck-link-form"];if(e.length){n.push("ck-link-form_layout-vertical")}this.setTemplate({tag:"form",attributes:{class:n,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((t,e)=>{t[e.name]=e.isOn;return t},{})}render(){super.render();Qv({view:this});const t=[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView];t.forEach(t=>{this._focusables.add(t);this.focusTracker.add(t.element)});this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const t=this.locale.t;const e=new Kv(this.locale,Yv);e.label=t("lq");e.inputView.placeholder="https://example.com";return e}_createButton(t,e,i,n){const o=new hb(this.locale);o.set({label:t,icon:e,tooltip:true});o.extendTemplate({attributes:{class:i}});if(n){o.delegate("execute").to(this,n)}return o}_createManualDecoratorSwitches(t){const e=this.createCollection();for(const i of t){const t=new Fb(this.locale);t.set({name:i.id,label:i.label,withText:true});t.bind("isOn").to(i,"value");t.on("execute",()=>{i.set("value",!t.isOn)});e.add(t)}return e}_createFormChildren(t){const e=this.createCollection();e.add(this.urlInputView);if(t.length){const t=new Gp;t.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(t=>({tag:"li",children:[t],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}});e.add(t)}e.add(this.saveButtonView);e.add(this.cancelButtonView);return e}}var $A='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';var GA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>';var KA=i(84);class JA extends Gp{constructor(t){super(t);const e=t.t;this.focusTracker=new fb;this.keystrokes=new dp;this.previewButtonView=this._createPreviewButton();this.unlinkButtonView=this._createButton(e("lk"),$A,"unlink");this.editButtonView=this._createButton(e("ll"),GA,"edit");this.set("href");this._focusables=new bp;this._focusCycler=new yb({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render();const t=[this.previewButtonView,this.editButtonView,this.unlinkButtonView];t.forEach(t=>{this._focusables.add(t);this.focusTracker.add(t.element)});this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createButton(t,e,i){const n=new hb(this.locale);n.set({label:t,icon:e,tooltip:true});n.delegate("execute").to(this,i);return n}_createPreviewButton(){const t=new hb(this.locale);const e=this.bindTemplate;const i=this.t;t.set({withText:true,tooltip:i("lm")});t.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:e.to("href",t=>t&&CA(t)),target:"_blank",rel:"noopener noreferrer"}});t.bind("label").to(this,"href",t=>t||i("ln"));t.bind("isEnabled").to(this,"href",t=>!!t);t.template.tag="a";t.template.eventListeners={};return t}}var YA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const QA="Ctrl+K";class XA extends mp{static get requires(){return[kb]}static get pluginName(){return"LinkUI"}init(){const t=this.editor;t.editing.view.addObserver(WA);this.actionsView=this._createActionsView();this.formView=this._createFormView();this._balloon=t.plugins.get(kb);this._createToolbarLinkButton();this._enableUserBalloonInteractions()}destroy(){super.destroy();this.formView.destroy()}_createActionsView(){const t=this.editor;const e=new JA(t.locale);const i=t.commands.get("link");const n=t.commands.get("unlink");e.bind("href").to(i,"value");e.editButtonView.bind("isEnabled").to(i);e.unlinkButtonView.bind("isEnabled").to(n);this.listenTo(e,"edit",()=>{this._addFormView()});this.listenTo(e,"unlink",()=>{t.execute("unlink");this._hideUI()});e.keystrokes.set("Esc",(t,e)=>{this._hideUI();e()});e.keystrokes.set(QA,(t,e)=>{this._addFormView();e()});return e}_createFormView(){const t=this.editor;const e=t.commands.get("link");const i=new UA(t.locale,e.manualDecorators);i.urlInputView.bind("value").to(e,"value");i.urlInputView.bind("isReadOnly").to(e,"isEnabled",t=>!t);i.saveButtonView.bind("isEnabled").to(e);this.listenTo(i,"submit",()=>{t.execute("link",i.urlInputView.inputView.element.value,i.getDecoratorSwitchesState());this._closeFormView()});this.listenTo(i,"cancel",()=>{this._closeFormView()});i.keystrokes.set("Esc",(t,e)=>{this._closeFormView();e()});return i}_createToolbarLinkButton(){const t=this.editor;const e=t.commands.get("link");const i=t.t;t.keystrokes.set(QA,(t,e)=>{e();this._showUI(true)});t.ui.componentFactory.add("link",t=>{const n=new hb(t);n.isEnabled=true;n.label=i("lf");n.icon=YA;n.keystroke=QA;n.tooltip=true;n.isToggleable=true;n.bind("isEnabled").to(e,"isEnabled");n.bind("isOn").to(e,"value",t=>!!t);this.listenTo(n,"execute",()=>this._showUI(true));return n})}_enableUserBalloonInteractions(){const t=this.editor.editing.view.document;this.listenTo(t,"click",()=>{const t=this._getSelectedLinkElement();if(t){this._showUI()}});this.editor.keystrokes.set("Tab",(t,e)=>{if(this._areActionsVisible&&!this.actionsView.focusTracker.isFocused){this.actionsView.focus();e()}},{priority:"high"});this.editor.keystrokes.set("Esc",(t,e)=>{if(this._isUIVisible){this._hideUI();e()}});Db({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){if(this._areActionsInPanel){return}this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this._isFormInPanel){return}const t=this.editor;const e=t.commands.get("link");this._balloon.add({view:this.formView,position:this._getBalloonPositionData()});if(this._balloon.visibleView===this.formView){this.formView.urlInputView.select()}this.formView.urlInputView.inputView.element.value=e.value||""}_closeFormView(){const t=this.editor.commands.get("link");t.restoreManualDecoratorStates();if(t.value!==undefined){this._removeFormView()}else{this._hideUI()}}_removeFormView(){if(this._isFormInPanel){this.formView.saveButtonView.focus();this._balloon.remove(this.formView);this.editor.editing.view.focus()}}_showUI(t=false){if(!this._getSelectedLinkElement()){this._addActionsView();if(t){this._balloon.showStack("main")}this._addFormView()}else{if(this._areActionsVisible){this._addFormView()}else{this._addActionsView()}if(t){this._balloon.showStack("main")}}this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel){return}const t=this.editor;this.stopListening(t.ui,"update");this.stopListening(this._balloon,"change:visibleView");t.editing.view.focus();this._removeFormView();this._balloon.remove(this.actionsView)}_startUpdatingUI(){const t=this.editor;const e=t.editing.view.document;let i=this._getSelectedLinkElement();let n=r();const o=()=>{const t=this._getSelectedLinkElement();const e=r();if(i&&!t||!i&&e!==n){this._hideUI()}else if(this._isUIVisible){this._balloon.updatePosition(this._getBalloonPositionData())}i=t;n=e};function r(){return e.selection.focus.getAncestors().reverse().find(t=>t.is("element"))}this.listenTo(t.ui,"update",o);this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const t=this._balloon.visibleView;return t==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view;const e=t.document;const i=this._getSelectedLinkElement();const n=i?t.domConverter.mapViewToDom(i):t.domConverter.viewRangeToDom(e.selection.getFirstRange());return{target:n}}_getSelectedLinkElement(){const t=this.editor.editing.view;const e=t.document.selection;if(e.isCollapsed){return ZA(e.getFirstPosition())}else{const i=e.getFirstRange().getTrimmed();const n=ZA(i.start);const o=ZA(i.end);if(!n||n!=o){return null}if(t.createRangeIn(n).getTrimmed().isEqual(i)){return n}else{return null}}}}function ZA(t){return t.getAncestors().find(t=>yA(t))}class tT extends mp{static get requires(){return[HA,XA]}static get pluginName(){return"Link"}}class eT extends jw{constructor(t,e){super(t);this.type=e}refresh(){this.value=this._getValue();this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;const e=t.document;const i=Array.from(e.selection.getSelectedBlocks()).filter(e=>nT(e,t.schema));const n=this.value===true;t.change(t=>{if(n){let e=i[i.length-1].nextSibling;let n=Number.POSITIVE_INFINITY;let o=[];while(e&&e.name=="listItem"&&e.getAttribute("listIndent")!==0){const t=e.getAttribute("listIndent");if(t<n){n=t}const i=t-n;o.push({element:e,listIndent:i});e=e.nextSibling}o=o.reverse();for(const e of o){t.setAttribute("listIndent",e.listIndent,e.element)}}if(!n){let t=Number.POSITIVE_INFINITY;for(const e of i){if(e.is("listItem")&&e.getAttribute("listIndent")<t){t=e.getAttribute("listIndent")}}t=t===0?1:t;iT(i,true,t);iT(i,false,t)}for(const e of i.reverse()){if(n&&e.name=="listItem"){t.rename(e,"paragraph")}else if(!n&&e.name!="listItem"){t.setAttributes({listType:this.type,listIndent:0},e);t.rename(e,"listItem")}else if(!n&&e.name=="listItem"&&e.getAttribute("listType")!=this.type){t.setAttribute("listType",this.type,e)}}})}_getValue(){const t=Ww(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("listItem")&&t.getAttribute("listType")==this.type}_checkEnabled(){if(this.value){return true}const t=this.editor.model.document.selection;const e=this.editor.model.schema;const i=Ww(t.getSelectedBlocks());if(!i){return false}return nT(i,e)}}function iT(t,e,i){const n=e?t[0]:t[t.length-1];if(n.is("listItem")){let o=n[e?"previousSibling":"nextSibling"];let r=n.getAttribute("listIndent");while(o&&o.is("listItem")&&o.getAttribute("listIndent")>=i){if(r>o.getAttribute("listIndent")){r=o.getAttribute("listIndent")}if(o.getAttribute("listIndent")==r){t[e?"unshift":"push"](o)}o=o[e?"previousSibling":"nextSibling"]}}}function nT(t,e){return e.checkChild(t.parent,"listItem")&&!e.isObject(t)}class oT extends jw{constructor(t,e){super(t);this._indentBy=e=="forward"?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;const e=t.document;let i=Array.from(e.selection.getSelectedBlocks());t.change(t=>{const e=i[i.length-1];let n=e.nextSibling;while(n&&n.name=="listItem"&&n.getAttribute("listIndent")>e.getAttribute("listIndent")){i.push(n);n=n.nextSibling}if(this._indentBy<0){i=i.reverse()}for(const e of i){const i=e.getAttribute("listIndent")+this._indentBy;if(i<0){t.rename(e,"paragraph")}else{t.setAttribute("listIndent",i,e)}}})}_checkEnabled(){const t=Ww(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("listItem")){return false}if(this._indentBy>0){const e=t.getAttribute("listIndent");const i=t.getAttribute("listType");let n=t.previousSibling;while(n&&n.is("listItem")&&n.getAttribute("listIndent")>=e){if(n.getAttribute("listIndent")==e){return n.getAttribute("listType")==i}n=n.previousSibling}return false}return true}}function rT(t){const e=t.createContainerElement("li");e.getFillerOffset=hT;return e}function sT(t,e){const i=e.mapper;const n=e.writer;const o=t.getAttribute("listType")=="numbered"?"ol":"ul";const r=rT(n);const s=n.createContainerElement(o,null);n.insert(n.createPositionAt(s,0),r);i.bindElements(t,r);return r}function aT(t,e,i,n){const o=e.parent;const r=i.mapper;const s=i.writer;let a=r.toViewPosition(n.createPositionBefore(t));const c=dT(t.previousSibling,{sameIndent:true,smallerIndent:true,listIndent:t.getAttribute("listIndent")});const l=t.previousSibling;if(c&&c.getAttribute("listIndent")==t.getAttribute("listIndent")){const t=r.toViewElement(c);a=s.breakContainer(s.createPositionAfter(t))}else{if(l&&l.name=="listItem"){a=r.toViewPosition(n.createPositionAt(l,"end"))}else{a=r.toViewPosition(n.createPositionBefore(t))}}a=lT(a);s.insert(a,o);if(l&&l.name=="listItem"){const t=r.toViewElement(l);const i=s.createRange(s.createPositionAt(t,0),a);const n=i.getWalker({ignoreElementEnd:true});for(const t of n){if(t.item.is("li")){const i=s.breakContainer(s.createPositionBefore(t.item));const o=t.item.parent;const r=s.createPositionAt(e,"end");cT(s,r.nodeBefore,r.nodeAfter);s.move(s.createRangeOn(o),r);n.position=i}}}else{const i=o.nextSibling;if(i&&(i.is("ul")||i.is("ol"))){let n=null;for(const e of i.getChildren()){const i=r.toModelElement(e);if(i&&i.getAttribute("listIndent")>t.getAttribute("listIndent")){n=e}else{break}}if(n){s.breakContainer(s.createPositionAfter(n));s.move(s.createRangeOn(n.parent),s.createPositionAt(e,"end"))}}}cT(s,o,o.nextSibling);cT(s,o.previousSibling,o)}function cT(t,e,i){if(!e||!i||e.name!="ul"&&e.name!="ol"){return null}if(e.name!=i.name||e.getAttribute("class")!==i.getAttribute("class")){return null}return t.mergeContainers(t.createPositionAfter(e))}function lT(t){return t.getLastMatchingPosition(t=>t.item.is("uiElement"))}function dT(t,e){const i=!!e.sameIndent;const n=!!e.smallerIndent;const o=e.listIndent;let r=t;while(r&&r.name=="listItem"){const t=r.getAttribute("listIndent");if(i&&o==t||n&&o>t){return r}r=r.previousSibling}return null}function uT(t,e,i,n){t.ui.componentFactory.add(e,o=>{const r=t.commands.get(e);const s=new hb(o);s.set({label:i,icon:n,tooltip:true,isToggleable:true});s.bind("isOn","isEnabled").to(r,"value","isEnabled");s.on("execute",()=>{t.execute(e);t.editing.view.focus()});return s})}function hT(){const t=!this.isEmpty&&(this.getChild(0).name=="ul"||this.getChild(0).name=="ol");if(this.isEmpty||t){return 0}return Hc.call(this)}function fT(t){return(e,i,n)=>{const o=n.consumable;if(!o.test(i.item,"insert")||!o.test(i.item,"attribute:listType")||!o.test(i.item,"attribute:listIndent")){return}o.consume(i.item,"insert");o.consume(i.item,"attribute:listType");o.consume(i.item,"attribute:listIndent");const r=i.item;const s=sT(r,n);aT(r,s,n,t)}}function gT(t){return(e,i,n)=>{const o=n.mapper.toViewPosition(i.position).getLastMatchingPosition(t=>!t.item.is("li"));const r=o.nodeAfter;const s=n.writer;s.breakContainer(s.createPositionBefore(r));s.breakContainer(s.createPositionAfter(r));const a=r.parent;const c=a.previousSibling;const l=s.createRangeOn(a);const d=s.remove(l);if(c&&c.nextSibling){cT(s,c,c.nextSibling)}const u=n.mapper.toModelElement(r);ET(u.getAttribute("listIndent")+1,i.position,l.start,r,n,t);for(const t of s.createRangeIn(d).getItems()){n.mapper.unbindViewElement(t)}e.stop()}}function mT(t,e,i){if(!i.consumable.consume(e.item,"attribute:listType")){return}const n=i.mapper.toViewElement(e.item);const o=i.writer;o.breakContainer(o.createPositionBefore(n));o.breakContainer(o.createPositionAfter(n));const r=n.parent;const s=e.attributeNewValue=="numbered"?"ol":"ul";o.rename(s,r)}function pT(t,e,i){const n=i.mapper.toViewElement(e.item);const o=n.parent;const r=i.writer;cT(r,o,o.nextSibling);cT(r,o.previousSibling,o);for(const t of e.item.getChildren()){i.consumable.consume(t,"insert")}}function bT(t){return(e,i,n)=>{if(!n.consumable.consume(i.item,"attribute:listIndent")){return}const o=n.mapper.toViewElement(i.item);const r=n.writer;r.breakContainer(r.createPositionBefore(o));r.breakContainer(r.createPositionAfter(o));const s=o.parent;const a=s.previousSibling;const c=r.createRangeOn(s);r.remove(c);if(a&&a.nextSibling){cT(r,a,a.nextSibling)}ET(i.attributeOldValue+1,i.range.start,c.start,o,n,t);aT(i.item,o,n,t);for(const t of i.item.getChildren()){n.consumable.consume(t,"insert")}}}function wT(t,e,i){if(e.item.name!="listItem"){let t=i.mapper.toViewPosition(e.range.start);const n=i.writer;const o=[];while(t.parent.name=="ul"||t.parent.name=="ol"){t=n.breakContainer(t);if(t.parent.name!="li"){break}const e=t;const i=n.createPositionAt(t.parent,"end");if(!e.isEqual(i)){const t=n.remove(n.createRange(e,i));o.push(t)}t=n.createPositionAfter(t.parent)}if(o.length>0){for(let e=0;e<o.length;e++){const i=t.nodeBefore;const r=n.insert(t,o[e]);t=r.end;if(e>0){const e=cT(n,i,i.nextSibling);if(e&&e.parent==i){t.offset--}}}cT(n,t.nodeBefore,t.nodeAfter)}}}function kT(t,e,i){const n=i.mapper.toViewPosition(e.position);const o=n.nodeBefore;const r=n.nodeAfter;cT(i.writer,o,r)}function _T(t,e,i){if(i.consumable.consume(e.viewItem,{name:true})){const t=i.writer;const n=t.createElement("listItem");const o=OT(e.viewItem);t.setAttribute("listIndent",o,n);const r=e.viewItem.parent&&e.viewItem.parent.name=="ol"?"numbered":"bulleted";t.setAttribute("listType",r,n);const s=i.splitToAllowedParent(n,e.modelCursor);if(!s){return}t.insert(n,s.position);const a=PT(n,e.viewItem.getChildren(),i);e.modelRange=t.createRange(e.modelCursor,a);if(s.cursorParent){e.modelCursor=t.createPositionAt(s.cursorParent,0)}else{e.modelCursor=e.modelRange.end}}}function vT(t,e,i){if(i.consumable.test(e.viewItem,{name:true})){const t=Array.from(e.viewItem.getChildren());for(const e of t){const t=!(e.is("li")||RT(e));if(t){e._remove()}}}}function yT(t,e,i){if(i.consumable.test(e.viewItem,{name:true})){if(e.viewItem.childCount===0){return}const t=[...e.viewItem.getChildren()];let i=false;let n=true;for(const e of t){if(i&&!RT(e)){e._remove()}if(e.is("text")){if(n){e._data=e.data.replace(/^\s+/,"")}if(!e.nextSibling||RT(e.nextSibling)){e._data=e.data.replace(/\s+$/,"")}}else if(RT(e)){i=true}n=false}}}function xT(t){return(e,i)=>{if(i.isPhantom){return}const n=i.modelPosition.nodeBefore;if(n&&n.is("listItem")){const e=i.mapper.toViewElement(n);const o=e.getAncestors().find(RT);const r=t.createPositionAt(e,0).getWalker();for(const t of r){if(t.type=="elementStart"&&t.item.is("li")){i.viewPosition=t.previousPosition;break}else if(t.type=="elementEnd"&&t.item==o){i.viewPosition=t.nextPosition;break}}}}}function CT(t){return(e,i)=>{const n=i.viewPosition;const o=n.parent;const r=i.mapper;if(o.name=="ul"||o.name=="ol"){if(!n.isAtEnd){const e=r.toModelElement(n.nodeAfter);i.modelPosition=t.createPositionBefore(e)}else{const e=r.toModelElement(n.nodeBefore);const o=r.getModelLength(n.nodeBefore);i.modelPosition=t.createPositionBefore(e).getShiftedBy(o)}e.stop()}else if(o.name=="li"&&n.nodeBefore&&(n.nodeBefore.name=="ul"||n.nodeBefore.name=="ol")){const s=r.toModelElement(o);let a=1;let c=n.nodeBefore;while(c&&RT(c)){a+=r.getModelLength(c);c=c.previousSibling}i.modelPosition=t.createPositionBefore(s).getShiftedBy(a);e.stop()}}}function AT(t,e){const i=t.document.differ.getChanges();const n=new Map;let o=false;for(const n of i){if(n.type=="insert"&&n.name=="listItem"){r(n.position)}else if(n.type=="insert"&&n.name!="listItem"){if(n.name!="$text"){const i=n.position.nodeAfter;if(i.hasAttribute("listIndent")){e.removeAttribute("listIndent",i);o=true}if(i.hasAttribute("listType")){e.removeAttribute("listType",i);o=true}for(const e of Array.from(t.createRangeIn(i)).filter(t=>t.item.is("listItem"))){r(e.previousPosition)}}const i=n.position.getShiftedBy(n.length);r(i)}else if(n.type=="remove"&&n.name=="listItem"){r(n.position)}else if(n.type=="attribute"&&n.attributeKey=="listIndent"){r(n.range.start)}else if(n.type=="attribute"&&n.attributeKey=="listType"){r(n.range.start)}}for(const t of n.values()){s(t);a(t)}return o;function r(t){const e=t.nodeBefore;if(!e||!e.is("listItem")){const e=t.nodeAfter;if(e&&e.is("listItem")){n.set(e,e)}}else{let i=e;if(n.has(i)){return}while(i.previousSibling&&i.previousSibling.is("listItem")){i=i.previousSibling;if(n.has(i)){return}}n.set(t.nodeBefore,i)}}function s(t){let i=0;let n=null;while(t&&t.is("listItem")){const r=t.getAttribute("listIndent");if(r>i){let s;if(n===null){n=r-i;s=i}else{if(n>r){n=r}s=r-n}e.setAttribute("listIndent",s,t);o=true}else{n=null;i=t.getAttribute("listIndent")+1}t=t.nextSibling}}function a(t){let i=[];let n=null;while(t&&t.is("listItem")){const r=t.getAttribute("listIndent");if(n&&n.getAttribute("listIndent")>r){i=i.slice(0,r+1)}if(r!=0){if(i[r]){const n=i[r];if(t.getAttribute("listType")!=n){e.setAttribute("listType",n,t);o=true}}else{i[r]=t.getAttribute("listType")}}n=t;t=t.nextSibling}}}function TT(t,[e,i]){let n=e.is("documentFragment")?e.getChild(0):e;let o;if(!i){o=this.document.selection}else{o=this.createSelection(i)}if(n&&n.is("listItem")){const t=o.getFirstPosition();let e=null;if(t.parent.is("listItem")){e=t.parent}else if(t.nodeBefore&&t.nodeBefore.is("listItem")){e=t.nodeBefore}if(e){const t=e.getAttribute("listIndent");if(t>0){while(n&&n.is("listItem")){n._setAttribute("listIndent",n.getAttribute("listIndent")+t);n=n.nextSibling}}}}}function PT(t,e,i){const{writer:n,schema:o}=i;let r=n.createPositionAfter(t);for(const s of e){if(s.name=="ul"||s.name=="ol"){r=i.convertItem(s,r).modelCursor}else{const e=i.convertItem(s,n.createPositionAt(t,"end"));const a=e.modelRange.start.nodeAfter;const c=a&&a.is("element")&&!o.checkChild(t,a.name);if(c){if(e.modelCursor.parent.is("listItem")){t=e.modelCursor.parent}else{t=ST(e.modelCursor)}r=n.createPositionAfter(t)}}}return r}function ST(t){const e=new Wh({startPosition:t});let i;do{i=e.next()}while(!i.value.item.is("listItem"));return i.value.item}function ET(t,e,i,n,o,r){const s=dT(e.nodeBefore,{sameIndent:true,smallerIndent:true,listIndent:t,foo:"b"});const a=o.mapper;const c=o.writer;const l=s?s.getAttribute("listIndent"):null;let d;if(!s){d=i}else if(l==t){const t=a.toViewElement(s).parent;d=c.createPositionAfter(t)}else{const t=r.createPositionAt(s,"end");d=a.toViewPosition(t)}d=lT(d);for(const t of[...n.getChildren()]){if(RT(t)){d=c.move(c.createRangeOn(t),d).end;cT(c,t,t.nextSibling);cT(c,t.previousSibling,t)}}}function RT(t){return t.is("ol")||t.is("ul")}function OT(t){let e=0;let i=t.parent;while(i){if(i.is("li")){e++}else{const t=i.previousSibling;if(t&&t.is("li")){e++}}i=i.parent}return e}class IT extends mp{static get pluginName(){return"ListEditing"}static get requires(){return[V_]}init(){const t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const e=t.data;const i=t.editing;t.model.document.registerPostFixer(e=>AT(t.model,e));i.mapper.registerViewToModelLength("li",VT);e.mapper.registerViewToModelLength("li",VT);i.mapper.on("modelToViewPosition",xT(i.view));i.mapper.on("viewToModelPosition",CT(t.model));e.mapper.on("modelToViewPosition",xT(i.view));t.conversion.for("editingDowncast").add(e=>{e.on("insert",wT,{priority:"high"});e.on("insert:listItem",fT(t.model));e.on("attribute:listType:listItem",mT,{priority:"high"});e.on("attribute:listType:listItem",pT,{priority:"low"});e.on("attribute:listIndent:listItem",bT(t.model));e.on("remove:listItem",gT(t.model));e.on("remove",kT,{priority:"low"})});t.conversion.for("dataDowncast").add(e=>{e.on("insert",wT,{priority:"high"});e.on("insert:listItem",fT(t.model))});t.conversion.for("upcast").add(t=>{t.on("element:ul",vT,{priority:"high"});t.on("element:ol",vT,{priority:"high"});t.on("element:li",yT,{priority:"high"});t.on("element:li",_T)});t.model.on("insertContent",TT,{priority:"high"});t.commands.add("numberedList",new eT(t,"numbered"));t.commands.add("bulletedList",new eT(t,"bulleted"));t.commands.add("indentList",new oT(t,"forward"));t.commands.add("outdentList",new oT(t,"backward"));const n=i.view.document;this.listenTo(n,"enter",(t,e)=>{const i=this.editor.model.document;const n=i.selection.getLastPosition().parent;if(i.selection.isCollapsed&&n.name=="listItem"&&n.isEmpty){this.editor.execute("outdentList");e.preventDefault();t.stop()}});this.listenTo(n,"delete",(t,e)=>{if(e.direction!=="backward"){return}const i=this.editor.model.document.selection;if(!i.isCollapsed){return}const n=i.getFirstPosition();if(!n.isAtStart){return}const o=n.parent;if(o.name!=="listItem"){return}const r=o.previousSibling&&o.previousSibling.name==="listItem";if(r){return}this.editor.execute("outdentList");e.preventDefault();t.stop()},{priority:"high"});const o=t=>(e,i)=>{const n=this.editor.commands.get(t);if(n.isEnabled){this.editor.execute(t);i()}};t.keystrokes.set("Tab",o("indentList"));t.keystrokes.set("Shift+Tab",o("outdentList"))}afterInit(){const t=this.editor.commands;const e=t.get("indent");const i=t.get("outdent");if(e){e.registerChildCommand(t.get("indentList"))}if(i){i.registerChildCommand(t.get("outdentList"))}}}function VT(t){let e=1;for(const i of t.getChildren()){if(i.name=="ul"||i.name=="ol"){for(const t of i.getChildren()){e+=VT(t)}}}return e}var NT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>';var MT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';class BT extends mp{init(){const t=this.editor.t;uT(this.editor,"numberedList",t("lc"),NT);uT(this.editor,"bulletedList",t("ld"),MT)}}class zT extends mp{static get requires(){return[IT,BT]}static get pluginName(){return"List"}}var LT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';const FT="removeFormat";class DT extends mp{static get pluginName(){return"RemoveFormatUI"}init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(FT,i=>{const n=t.commands.get(FT);const o=new hb(i);o.set({label:e("la"),icon:LT,tooltip:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(FT);t.editing.view.focus()});return o})}}class jT extends jw{refresh(){const t=this.editor.model;this.isEnabled=!!Ww(this._getFormattingItems(t.document.selection,t.schema))}execute(){const t=this.editor.model;const e=t.schema;t.change(i=>{for(const n of this._getFormattingItems(t.document.selection,e)){if(n.is("selection")){for(const t of this._getFormattingAttributes(n,e)){i.removeSelectionAttribute(t)}}else{const t=i.createRangeOn(n);for(const o of this._getFormattingAttributes(n,e)){i.removeAttribute(o,t)}}}})}*_getFormattingItems(t,e){const i=t=>!!Ww(this._getFormattingAttributes(t,e));for(const e of t.getRanges()){for(const t of e.getItems()){if(i(t)){yield t}}}if(i(t)){yield t}}*_getFormattingAttributes(t,e){for(const[i]of t.getAttributes()){const t=e.getAttributeProperties(i);if(t&&t.isFormatting){yield i}}}}class HT extends mp{static get pluginName(){return"RemoveFormatEditing"}init(){const t=this.editor;t.commands.add("removeFormat",new jT(t))}}class WT extends mp{static get requires(){return[HT,DT]}static get pluginName(){return"RemoveFormat"}}class qT{constructor(t,e=20){this.model=t;this.size=0;this.limit=e;this.isLocked=false;this._changeCallback=(t,e)=>{if(e.type!="transparent"&&e!==this._batch){this._reset(true)}};this._selectionChangeCallback=()=>{this._reset()};this.model.document.on("change",this._changeCallback);this.model.document.selection.on("change:range",this._selectionChangeCallback);this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){if(!this._batch){this._batch=this.model.createBatch()}return this._batch}input(t){this.size+=t;if(this.size>=this.limit){this._reset(true)}}lock(){this.isLocked=true}unlock(){this.isLocked=false}destroy(){this.model.document.off("change",this._changeCallback);this.model.document.selection.off("change:range",this._selectionChangeCallback);this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t){if(!this.isLocked||t){this._batch=null;this.size=0}}}class UT extends jw{constructor(t,e){super(t);this._buffer=new qT(t.model,e);this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy();this._buffer.destroy()}execute(t={}){const e=this.editor.model;const i=e.document;const n=t.text||"";const o=n.length;const r=t.range?e.createSelection(t.range):i.selection;const s=t.resultRange;e.enqueueChange(this._buffer.batch,t=>{this._buffer.lock();e.deleteContent(r);if(n){e.insertContent(t.createText(n,i.selection.getAttributes()),r)}if(s){t.setSelection(s)}else if(!r.is("documentSelection")){t.setSelection(r)}this._buffer.unlock();this._buffer.input(o);this._batches.add(this._buffer.batch)})}}function $T(t){let e=null;const i=t.model;const n=t.editing.view;const o=t.commands.get("input");if(Al.isAndroid){n.document.on("beforeinput",(t,e)=>r(e),{priority:"lowest"})}else{n.document.on("keydown",(t,e)=>r(e),{priority:"lowest"})}n.document.on("compositionstart",s,{priority:"lowest"});n.document.on("compositionend",()=>{e=i.createSelection(i.document.selection)},{priority:"lowest"});function r(t){const r=i.document;const s=n.document.isComposing;const c=e&&e.isEqual(r.selection);e=null;if(!o.isEnabled){return}if(KT(t)||r.selection.isCollapsed){return}if(s&&t.keyCode===229){return}if(!s&&t.keyCode===229&&c){return}a()}function s(){const t=i.document;const e=t.selection.rangeCount===1?t.selection.getFirstRange().isFlat:true;if(t.selection.isCollapsed||e){return}a()}function a(){const t=o.buffer;t.lock();i.enqueueChange(t.batch,()=>{i.deleteContent(i.document.selection)});t.unlock()}}const GT=[Ml("arrowUp"),Ml("arrowRight"),Ml("arrowDown"),Ml("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let t=112;t<=135;t++){GT.push(t)}function KT(t){if(t.ctrlKey){return true}return GT.includes(t.keyCode)}function JT(t,e){const i=[];let n=0;let o;t.forEach(t=>{if(t=="equal"){r();n++}else if(t=="insert"){if(s("insert")){o.values.push(e[n])}else{r();o={type:"insert",index:n,values:[e[n]]}}n++}else{if(s("delete")){o.howMany++}else{r();o={type:"delete",index:n,howMany:1}}}});r();return i;function r(){if(o){i.push(o);o=null}}function s(t){return o&&o.type==t}}function YT(t){if(t.length==0){return false}for(const e of t){if(e.type==="children"&&!QT(e)){return true}}return false}function QT(t){if(t.newChildren.length-t.oldChildren.length!=1){return}const e=_d(t.oldChildren,t.newChildren,XT);const i=JT(e,t.newChildren);if(i.length>1){return}const n=i[0];if(!(!!n.values[0]&&n.values[0].is("text"))){return}return n}function XT(t,e){if(!!t&&t.is("text")&&!!e&&e.is("text")){return t.data===e.data}else{return t===e}}function ZT(t){t.editing.view.document.on("mutations",(e,i,n)=>{new tP(t).handle(i,n)})}class tP{constructor(t){this.editor=t;this.editing=this.editor.editing}handle(t,e){if(YT(t)){this._handleContainerChildrenMutations(t,e)}else{for(const i of t){this._handleTextMutation(i,e);this._handleTextNodeInsertion(i)}}}_handleContainerChildrenMutations(t,e){const i=eP(t);if(!i){return}const n=this.editor.editing.view.domConverter;const o=n.mapViewToDom(i);const r=new zd(this.editor.editing.view.document);const s=this.editor.data.toModel(r.domToView(o)).getChild(0);const a=this.editor.editing.mapper.toModelElement(i);if(!a){return}const c=Array.from(s.getChildren());const l=Array.from(a.getChildren());const d=c[c.length-1];const u=l[l.length-1];if(d&&d.is("softBreak")&&u&&!u.is("softBreak")){c.pop()}const h=this.editor.model.schema;if(!iP(c,h)||!iP(l,h)){return}const f=c.map(t=>t.is("text")?t.data:"@").join("").replace(/\u00A0/g," ");const g=l.map(t=>t.is("text")?t.data:"@").join("").replace(/\u00A0/g," ");if(g===f){return}const m=_d(g,f);const{firstChangeAt:p,insertions:b,deletions:w}=nP(m);let k=null;if(e){k=this.editing.mapper.toModelRange(e.getFirstRange())}const _=f.substr(p,b);const v=this.editor.model.createRange(this.editor.model.createPositionAt(a,p),this.editor.model.createPositionAt(a,p+w));this.editor.execute("input",{text:_,range:v,resultRange:k})}_handleTextMutation(t,e){if(t.type!="text"){return}const i=t.newText.replace(/\u00A0/g," ");const n=t.oldText.replace(/\u00A0/g," ");if(n===i){return}const o=_d(n,i);const{firstChangeAt:r,insertions:s,deletions:a}=nP(o);let c=null;if(e){c=this.editing.mapper.toModelRange(e.getFirstRange())}const l=this.editing.view.createPositionAt(t.node,r);const d=this.editing.mapper.toModelPosition(l);const u=this.editor.model.createRange(d,d.getShiftedBy(a));const h=i.substr(r,s);this.editor.execute("input",{text:h,range:u,resultRange:c})}_handleTextNodeInsertion(t){if(t.type!="children"){return}const e=QT(t);const i=this.editing.view.createPositionAt(t.node,e.index);const n=this.editing.mapper.toModelPosition(i);const o=e.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(n)})}}function eP(t){const e=t.map(t=>t.node).reduce((t,e)=>t.getCommonAncestor(e,{includeSelf:true}));if(!e){return}return e.getAncestors({includeSelf:true,parentFirst:true}).find(t=>t.is("containerElement")||t.is("rootElement"))}function iP(t,e){return t.every(t=>e.isInline(t))}function nP(t){let e=null;let i=null;for(let n=0;n<t.length;n++){const o=t[n];if(o!="equal"){e=e===null?n:e;i=n}}let n=0;let o=0;for(let r=e;r<=i;r++){if(t[r]!="insert"){n++}if(t[r]!="delete"){o++}}return{insertions:o,deletions:n,firstChangeAt:e}}class oP extends mp{static get pluginName(){return"Input"}init(){const t=this.editor;const e=new UT(t,t.config.get("typing.undoStep")||20);t.commands.add("input",e);$T(t);ZT(t)}isInput(t){const e=this.editor.commands.get("input");return e._batches.has(t)}}class rP extends jw{constructor(t,e){super(t);this.direction=e;this._buffer=new qT(t.model,t.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(t={}){const e=this.editor.model;const i=e.document;e.enqueueChange(this._buffer.batch,n=>{this._buffer.lock();const o=n.createSelection(t.selection||i.selection);const r=o.isCollapsed;if(o.isCollapsed){e.modifySelection(o,{direction:this.direction,unit:t.unit})}if(this._shouldEntireContentBeReplacedWithParagraph(t.sequence||1)){this._replaceEntireContentWithParagraph(n);return}if(o.isCollapsed){return}let s=0;o.getFirstRange().getMinimalFlatRanges().forEach(t=>{s+=fl(t.getWalker({singleCharacters:true,ignoreElementEnd:true,shallow:true}))});e.deleteContent(o,{doNotResetEntireContent:r,direction:this.direction});this._buffer.input(s);n.setSelection(o);this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1){return false}const e=this.editor.model;const i=e.document;const n=i.selection;const o=e.schema.getLimitElement(n);const r=n.isCollapsed&&n.containsEntireContent(o);if(!r){return false}if(!e.schema.checkChild(o,"paragraph")){return false}const s=o.getChild(0);if(s&&s.name==="paragraph"){return false}return true}_replaceEntireContentWithParagraph(t){const e=this.editor.model;const i=e.document;const n=i.selection;const o=e.schema.getLimitElement(n);const r=t.createElement("paragraph");t.remove(t.createRangeIn(o));t.insert(r,o);t.setSelection(r,0)}}class sP extends Gd{constructor(t){super(t);const e=t.document;let i=0;e.on("keyup",(t,e)=>{if(e.keyCode==Nl.delete||e.keyCode==Nl.backspace){i=0}});e.on("keydown",(t,e)=>{const o={};if(e.keyCode==Nl.delete){o.direction="forward";o.unit="character"}else if(e.keyCode==Nl.backspace){o.direction="backward";o.unit="codePoint"}else{return}const r=Al.isMac?e.altKey:e.ctrlKey;o.unit=r?"word":o.unit;o.sequence=++i;n(t,e.domEvent,o)});if(Al.isAndroid){e.on("beforeinput",(e,i)=>{if(i.domEvent.inputType!="deleteContentBackward"){return}const o={unit:"codepoint",direction:"backward",sequence:1};const r=i.domTarget.ownerDocument.defaultView.getSelection();if(r.anchorNode==r.focusNode&&r.anchorOffset+1!=r.focusOffset){o.selectionToRemove=t.domConverter.domSelectionToView(r)}n(e,i.domEvent,o)})}function n(t,i,n){let o;e.once("delete",t=>o=t,{priority:Number.POSITIVE_INFINITY});e.fire("delete",new Ku(e,i,n));if(o&&o.stop.called){t.stop()}}}observe(){}}class aP extends mp{static get pluginName(){return"Delete"}init(){const t=this.editor;const e=t.editing.view;const i=e.document;e.addObserver(sP);t.commands.add("forwardDelete",new rP(t,"forward"));t.commands.add("delete",new rP(t,"backward"));this.listenTo(i,"delete",(i,n)=>{const o={unit:n.unit,sequence:n.sequence};if(n.selectionToRemove){const e=t.model.createSelection();const i=[];for(const e of n.selectionToRemove.getRanges()){i.push(t.editing.mapper.toModelRange(e))}e.setTo(i);o.selection=e}t.execute(n.direction=="forward"?"forwardDelete":"delete",o);n.preventDefault();e.scrollToTheSelection()});if(Al.isAndroid){let t=null;this.listenTo(i,"delete",(e,i)=>{const n=i.domTarget.ownerDocument.defaultView.getSelection();t={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}},{priority:"lowest"});this.listenTo(i,"keyup",(e,i)=>{if(t){const e=i.domTarget.ownerDocument.defaultView.getSelection();e.collapse(t.anchorNode,t.anchorOffset);e.extend(t.focusNode,t.focusOffset);t=null}})}}}class cP extends mp{static get requires(){return[oP,aP]}static get pluginName(){return"Typing"}}class lP extends Gp{constructor(t,e){super(t);const i=t.t;this.labelView=new Mk(t);this.labelView.text=i("b");this.groupDropdownView=this._createGroupDropdown(e);this.groupDropdownView.panelPosition=t.uiLanguageDirection==="rtl"?"se":"sw";this.setTemplate({tag:"div",attributes:{class:["ck","ck-special-characters-navigation"]},children:[this.labelView,this.groupDropdownView]})}get currentGroupName(){return this.groupDropdownView.value}_createGroupDropdown(t){const e=this.locale;const i=e.t;const n=Wb(e);const o=this._getCharacterGroupListItemDefinitions(n,t);n.set("value",o.first.model.label);n.buttonView.bind("label").to(n,"value");n.buttonView.set({isOn:false,withText:true,tooltip:i("le")});n.on("execute",t=>{n.value=t.source.label});n.delegate("execute").to(this);Ub(n,o);return n}_getCharacterGroupListItemDefinitions(t,e){const i=new ys;for(const n of e){const e={type:"button",model:new e_({label:n,withText:true})};e.model.bind("isOn").to(t,"value",t=>t===e.model.label);i.add(e)}return i}}var dP=i(86);class uP extends Gp{constructor(t){super(t);this.tiles=this.createCollection();this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}})}createTile(t,e){const i=new hb(this.locale);i.set({label:t,withText:true,class:"ck-character-grid__tile"});i.extendTemplate({attributes:{title:e},on:{mouseover:i.bindTemplate.to("mouseover")}});i.on("mouseover",()=>{this.fire("tileHover",{name:e,character:t})});i.on("execute",()=>{this.fire("execute",{name:e,character:t})});return i}}var hP=i(88);class fP extends Gp{constructor(t){super(t);const e=this.bindTemplate;this.set("character",null);this.set("name",null);this.bind("code").to(this,"character",gP);this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:e.to("name",t=>t?t:"")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:e.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function gP(t){if(t===null){return""}const e=t.codePointAt(0).toString(16);return"U+"+("0000"+e).slice(-4)}var mP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';var pP=i(90);const bP="";class wP extends mp{static get requires(){return[cP]}static get pluginName(){return"SpecialCharacters"}constructor(t){super(t);this._characters=new Map;this._groups=new Map}init(){const t=this.editor;const e=t.t;const i=t.commands.get("input");t.ui.componentFactory.add("specialCharacters",n=>{const o=Wb(n);let r;o.buttonView.set({label:e("b"),icon:mP,tooltip:true});o.bind("isEnabled").to(i);o.on("execute",(e,i)=>{t.execute("input",{text:i.character});t.editing.view.focus()});o.on("change:isOpen",()=>{if(!r){r=this._createDropdownPanelContent(n,o);o.panelView.children.add(r.navigationView);o.panelView.children.add(r.gridView);o.panelView.children.add(r.infoView)}r.infoView.set({character:null,name:null})});return o})}addItems(t,e){if(t===bP){throw new ss["b"](`special-character-invalid-group-name: The name "${bP}" is reserved and cannot be used.`)}const i=this._getGroup(t);for(const t of e){i.add(t.title);this._characters.set(t.title,t.character)}}getGroups(){return this._groups.keys()}getCharactersForGroup(t){if(t===bP){return new Set(this._characters.keys())}return this._groups.get(t)}getCharacter(t){return this._characters.get(t)}_getGroup(t){if(!this._groups.has(t)){this._groups.set(t,new Set)}return this._groups.get(t)}_updateGrid(t,e){e.tiles.clear();const i=this.getCharactersForGroup(t);for(const t of i){const i=this.getCharacter(t);e.tiles.add(e.createTile(i,t))}}_createDropdownPanelContent(t,e){const i=[...this.getGroups()];i.unshift(bP);const n=new lP(t,i);const o=new uP(t);const r=new fP(t);o.delegate("execute").to(e);o.on("tileHover",(t,e)=>{r.set(e)});n.on("execute",()=>{this._updateGrid(n.currentGroupName,o)});this._updateGrid(n.currentGroupName,o);return{navigationView:n,gridView:o,infoView:r}}}class kP extends mp{init(){const t=this.editor;const e=t.t;t.plugins.get("SpecialCharacters").addItems("",[{character:"$",title:e("u")},{character:"",title:e("v")},{character:"",title:e("w")},{character:"",title:e("x")},{character:"",title:e("y")},{character:"",title:e("z")},{character:"",title:e("aa")},{character:"",title:e("ab")},{character:"",title:e("ac")},{character:"",title:e("ad")},{character:"",title:e("ae")},{character:"",title:e("af")},{character:"",title:e("ag")},{character:"",title:e("ah")},{character:"",title:e("ai")},{character:"",title:e("aj")},{character:"",title:e("ak")},{character:"",title:e("al")},{character:"",title:e("am")},{character:"",title:e("an")},{character:"",title:e("ao")},{character:"",title:e("ap")},{character:"",title:e("aq")},{character:"",title:e("ar")},{character:"",title:e("as")},{character:"",title:e("at")},{character:"",title:e("au")},{character:"",title:e("av")},{character:"",title:e("aw")},{character:"",title:e("ax")},{character:"",title:e("ay")},{character:"",title:e("az")},{character:"",title:e("ba")},{character:"",title:e("bb")},{character:"",title:e("bc")},{character:"",title:e("bd")}])}}class _P extends mp{init(){const t=this.editor;const e=t.t;t.plugins.get("SpecialCharacters").addItems("",[{character:"<",title:e("gc")},{character:">",title:e("gd")},{character:"",title:e("ge")},{character:"",title:e("gf")},{character:"",title:e("gg")},{character:"",title:e("gh")},{character:"",title:e("gi")},{character:"",title:e("gj")},{character:"",title:e("gk")},{character:"",title:e("gl")},{character:"",title:e("gm")},{character:"",title:e("gn")},{character:"",title:e("go")},{character:"",title:e("gp")},{character:"",title:e("gq")},{character:"",title:e("gr")},{character:"",title:e("gs")},{character:"",title:e("gt")},{character:"",title:e("gu")},{character:"",title:e("gv")},{character:"",title:e("gw")},{character:"",title:e("gx")},{character:"",title:e("gy")},{character:"",title:e("gz")},{character:"",title:e("ha")},{character:"",title:e("hb")},{character:"",title:e("hc")},{character:"",title:e("hd")},{character:"",title:e("he")},{character:"",title:e("hf")},{character:"",title:e("hg")},{character:"",title:e("hh")},{character:"",title:e("hi")},{character:"",title:e("hj")},{character:"",title:e("hk")},{character:"",title:e("hl")},{character:"",title:e("hm")},{character:"",title:e("hn")},{character:"",title:e("ho")},{character:"",title:e("hp")},{character:"",title:e("hq")},{character:"",title:e("hr")},{character:"",title:e("hs")},{character:"",title:e("ht")}])}}class vP extends mp{init(){const t=this.editor;const e=t.t;t.plugins.get("SpecialCharacters").addItems("",[{title:e("c"),character:""},{title:e("d"),character:""},{title:e("e"),character:""},{title:e("f"),character:""},{title:e("g"),character:""},{title:e("h"),character:""},{title:e("i"),character:""},{title:e("j"),character:""},{title:e("k"),character:""},{title:e("l"),character:""},{title:e("m"),character:""},{title:e("n"),character:""},{title:e("o"),character:""},{title:e("p"),character:""},{title:e("q"),character:""},{title:e("r"),character:""},{title:e("s"),character:""},{title:e("t"),character:""}])}}class yP extends mp{init(){const t=this.editor;const e=t.t;t.plugins.get("SpecialCharacters").addItems(" ",[{character:"",title:e("be")},{character:"",title:e("bf")},{character:"",title:e("bg")},{character:"",title:e("bh")},{character:"",title:e("bi")},{character:"",title:e("bj")},{character:"",title:e("bk")},{character:"",title:e("bl")},{character:"",title:e("bm")},{character:"",title:e("bn")},{character:"",title:e("bo")},{character:"",title:e("bp")},{character:"",title:e("bq")},{character:"",title:e("br")},{character:"",title:e("bs")},{character:"",title:e("bt")},{character:"",title:e("bu")},{character:"",title:e("bv")},{character:"",title:e("bw")},{character:"",title:e("bx")},{character:"",title:e("by")},{character:"",title:e("bz")},{character:"",title:e("ca")},{character:"",title:e("cb")},{character:"",title:e("cc")},{character:"",title:e("cd")},{character:"",title:e("ce")},{character:"",title:e("cf")},{character:"",title:e("cg")},{character:"",title:e("ch")},{character:"",title:e("ci")},{character:"",title:e("cj")},{character:"",title:e("ck")},{character:"",title:e("cl")},{character:"",title:e("cm")},{character:"",title:e("cn")},{character:"",title:e("co")},{character:"",title:e("cp")},{character:"",title:e("cq")},{character:"",title:e("cr")},{character:"",title:e("cs")},{character:"",title:e("ct")},{character:"",title:e("cu")},{character:"",title:e("cv")},{character:"",title:e("cw")},{character:"",title:e("cx")},{character:"",title:e("cy")},{character:"",title:e("cz")},{character:"",title:e("da")},{character:"",title:e("db")},{character:"",title:e("dc")},{character:"",title:e("dd")},{character:"",title:e("de")},{character:"",title:e("df")},{character:"",title:e("dg")},{character:"",title:e("dh")},{character:"",title:e("di")},{character:"",title:e("dj")},{character:"",title:e("dk")},{character:"",title:e("dl")},{character:"",title:e("dm")},{character:"",title:e("dn")},{character:"",title:e("do")},{character:"",title:e("dp")},{character:"",title:e("dq")},{character:"",title:e("dr")},{character:"",title:e("ds")},{character:"",title:e("dt")},{character:"",title:e("du")},{character:"",title:e("dv")},{character:"",title:e("dw")},{character:"",title:e("dx")},{character:"",title:e("dy")},{character:"",title:e("dz")},{character:"",title:e("ea")},{character:"",title:e("eb")},{character:"",title:e("ec")},{character:"",title:e("ed")},{character:"",title:e("ee")},{character:"",title:e("ef")},{character:"",title:e("eg")},{character:"",title:e("eh")},{character:"",title:e("ei")},{character:"",title:e("ej")},{character:"",title:e("ek")},{character:"",title:e("el")},{character:"",title:e("em")},{character:"",title:e("en")},{character:"",title:e("eo")},{character:"",title:e("ep")},{character:"",title:e("eq")},{character:"",title:e("er")},{character:"",title:e("es")},{character:"",title:e("et")},{character:"",title:e("eu")},{character:"",title:e("ev")},{character:"",title:e("ew")},{character:"",title:e("ex")},{character:"",title:e("ey")},{character:"",title:e("ez")},{character:"",title:e("fa")},{character:"",title:e("fb")},{character:"",title:e("fc")},{character:"",title:e("fd")},{character:"",title:e("fe")},{character:"",title:e("ff")},{character:"",title:e("fg")},{character:"",title:e("fh")},{character:"",title:e("fi")},{character:"",title:e("fj")},{character:"",title:e("fk")},{character:"",title:e("fl")},{character:"",title:e("fm")},{character:"",title:e("fn")},{character:"",title:e("fo")},{character:"",title:e("fp")},{character:"",title:e("fq")},{character:"",title:e("fr")},{character:"",title:e("fs")},{character:"",title:e("ft")},{character:"",title:e("fu")},{character:"",title:e("fv")},{character:"",title:e("fw")},{character:"",title:e("fx")},{character:"",title:e("fy")},{character:"",title:e("fz")},{character:"",title:e("ga")},{character:"",title:e("gb")}])}}class xP extends mp{init(){const t=this.editor;const e=t.t;t.plugins.get("SpecialCharacters").addItems(" ",[{character:"",title:e("hu")},{character:"",title:e("hv")},{character:"",title:e("hw")},{character:"",title:e("hx")},{character:"",title:e("hy")},{character:"",title:e("hz")},{character:"",title:e("ia")},{character:"",title:e("ib")},{character:"",title:e("ic")},{character:"",title:e("id")},{character:"",title:e("ie")},{character:"",title:e("if")},{character:"",title:e("ig")},{character:"",title:e("ih")},{character:"",title:e("ii")},{character:"",title:e("ij")},{character:"",title:e("ik")},{character:"",title:e("il")},{character:"",title:e("im")},{character:"",title:e("in")},{character:"",title:e("io")},{character:"",title:e("ip")},{character:"",title:e("iq")},{character:"",title:e("ir")},{character:"",title:e("is")},{character:"",title:e("it")},{character:"",title:e("iu")}])}}class CP extends mp{static get requires(){return[kP,xP,_P,vP,yP]}}const AP="strikethrough";class TP extends mp{static get pluginName(){return"StrikethroughEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:AP});t.model.schema.setAttributeProperties(AP,{isFormatting:true,copyOnEnter:true});t.conversion.attributeToElement({model:AP,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]});t.commands.add(AP,new yk(t,AP));t.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}var PP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9L6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';const SP="strikethrough";class EP extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(SP,i=>{const n=t.commands.get(SP);const o=new hb(i);o.set({label:e("jk"),icon:PP,keystroke:"CTRL+SHIFT+X",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(SP);t.editing.view.focus()});return o})}}class RP extends mp{static get requires(){return[TP,EP]}static get pluginName(){return"Strikethrough"}}const OP="subscript";class IP extends mp{static get pluginName(){return"SubscriptEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:OP});t.model.schema.setAttributeProperties(OP,{isFormatting:true,copyOnEnter:true});t.conversion.attributeToElement({model:OP,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]});t.commands.add(OP,new yk(t,OP))}}var VP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';const NP="subscript";class MP extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(NP,i=>{const n=t.commands.get(NP);const o=new hb(i);o.set({label:e("jl"),icon:VP,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(NP);t.editing.view.focus()});return o})}}class BP extends mp{static get requires(){return[IP,MP]}static get pluginName(){return"Subscript"}}const zP="superscript";class LP extends mp{static get pluginName(){return"SuperscriptEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:zP});t.model.schema.setAttributeProperties(zP,{isFormatting:true,copyOnEnter:true});t.conversion.attributeToElement({model:zP,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]});t.commands.add(zP,new yk(t,zP))}}var FP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';const DP="superscript";class jP extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(DP,i=>{const n=t.commands.get(DP);const o=new hb(i);o.set({label:e("jm"),icon:FP,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(DP);t.editing.view.focus()});return o})}}class HP extends mp{static get requires(){return[LP,jP]}static get pluginName(){return"Superscript"}}function WP(t,e){let i=e.parent;while(i){if(i.name===t){return i}i=i.parent}}function qP(t,e,i,n,o=1){if(e>o){n.setAttribute(t,e,i)}else{n.removeAttribute(t,i)}}function UP(t,e,i={}){const n=t.createElement("tableCell",i);t.insertElement("paragraph",n);t.insert(n,e)}function $P(t){if(!t||!ct(t)){return t}const{top:e,right:i,bottom:n,left:o}=t;if(e==i&&i==n&&n==o){return e}}function GP(t,e){const i=parseFloat(t);if(Number.isNaN(i)){return t}if(String(i)!==String(t)){return t}return`${i}${e}`}function KP(t,e){const i=e.parent.parent;const n=parseInt(i.getAttribute("headingColumns")||0);const{column:o}=t.getCellLocation(e);return!!n&&o<n}function JP(){return t=>{t.on("element:table",(t,e,i)=>{const n=e.viewItem;if(!i.consumable.test(n,{name:true})){return}const{rows:o,headingRows:r,headingColumns:s}=QP(n);const a={};if(s){a.headingColumns=s}if(r){a.headingRows=r}const c=i.writer.createElement("table",a);const l=i.splitToAllowedParent(c,e.modelCursor);if(!l){return}i.writer.insert(c,l.position);i.consumable.consume(n,{name:true});if(o.length){o.forEach(t=>i.convertItem(t,i.writer.createPositionAt(c,"end")))}else{const t=i.writer.createElement("tableRow");i.writer.insert(t,i.writer.createPositionAt(c,"end"));UP(i.writer,i.writer.createPositionAt(t,"end"))}e.modelRange=i.writer.createRange(i.writer.createPositionBefore(c),i.writer.createPositionAfter(c));if(l.cursorParent){e.modelCursor=i.writer.createPositionAt(l.cursorParent,0)}else{e.modelCursor=e.modelRange.end}})}}function YP(t){return e=>{e.on(`element:${t}`,(t,e,i)=>{const n=e.viewItem;if(!i.consumable.test(n,{name:true})){return}const o=i.writer.createElement("tableCell");const r=i.splitToAllowedParent(o,e.modelCursor);if(!r){return}i.writer.insert(o,r.position);i.consumable.consume(n,{name:true});const s=i.writer.createPositionAt(o,0);i.convertChildren(n,s);if(!o.childCount){i.writer.insertElement("paragraph",s)}e.modelRange=i.writer.createRange(i.writer.createPositionBefore(o),i.writer.createPositionAfter(o));e.modelCursor=e.modelRange.end})}}function QP(t){const e={headingRows:0,headingColumns:0};const i=[];const n=[];let o;for(const r of Array.from(t.getChildren())){if(r.name==="tbody"||r.name==="thead"||r.name==="tfoot"){if(r.name==="thead"&&!o){o=r}const t=Array.from(r.getChildren()).filter(t=>t.is("element","tr"));for(const r of t){if(r.parent.name==="thead"&&r.parent===o){e.headingRows++;i.push(r)}else{n.push(r);const t=XP(r,e,o);if(t>e.headingColumns){e.headingColumns=t}}}}}e.rows=[...i,...n];return e}function XP(t){let e=0;let i=0;const n=Array.from(t.getChildren()).filter(t=>t.name==="th"||t.name==="td");while(i<n.length&&n[i].name==="th"){const t=n[i];const o=parseInt(t.getAttribute("colspan")||1);e=e+o;i++}return e}class ZP{constructor(t,e={}){this.table=t;this.startRow=e.startRow||0;this.endRow=typeof e.endRow=="number"?e.endRow:undefined;this.includeSpanned=!!e.includeSpanned;this.column=typeof e.column=="number"?e.column:undefined;this._skipRows=new Set;this._row=0;this._column=0;this._cellIndex=0;this._spannedCells=new Map;this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const t=this.table.getChild(this._row);if(!t||this._isOverEndRow()){return{done:true}}let e,i,n;if(this._isSpanned(this._row,this._column)){e=this._getSpanned(this._row,this._column);i=!this.includeSpanned||this._shouldSkipRow()||this._shouldSkipColumn();n=this._formatOutValue(e,this._column,true)}else{e=t.getChild(this._cellIndex);if(!e){this._row++;this._column=0;this._cellIndex=0;this._nextCellAtColumn=-1;return this.next()}const o=parseInt(e.getAttribute("colspan")||1);const r=parseInt(e.getAttribute("rowspan")||1);if(o>1||r>1){this._recordSpans(this._row,this._column,r,o,e)}this._nextCellAtColumn=this._column+o;i=this._shouldSkipRow()||this._shouldSkipColumn();n=this._formatOutValue(e,this._column,false,r,o)}this._column++;if(this._column==this._nextCellAtColumn){this._cellIndex++}return i?this.next():n}skipRow(t){this._skipRows.add(t)}_isOverEndRow(){return this.endRow!==undefined&&this._row>this.endRow}_formatOutValue(t,e,i,n=1,o=1){return{done:false,value:{cell:t,row:this._row,column:e,isSpanned:i,rowspan:n,colspan:o,cellIndex:this._cellIndex}}}_shouldSkipRow(){const t=this._row<this.startRow;const e=this._skipRows.has(this._row);return t||e}_shouldSkipColumn(){if(this.column===undefined){return false}return this.column!=this._column}_isSpanned(t,e){if(!this._spannedCells.has(t)){return false}const i=this._spannedCells.get(t);return i.has(e)}_getSpanned(t,e){return this._spannedCells.get(t).get(e)}_recordSpans(t,e,i,n,o){for(let i=e+1;i<=e+n-1;i++){this._markSpannedCell(t,i,o)}for(let r=t+1;r<t+i;r++){for(let t=e;t<=e+n-1;t++){this._markSpannedCell(r,t,o)}}}_markSpannedCell(t,e,i){if(!this._spannedCells.has(t)){this._spannedCells.set(t,new Map)}const n=this._spannedCells.get(t);n.set(e,i)}}function tS(t,e){e.setCustomProperty("table",true,t);return X_(t,e,{hasSelectionHandle:true})}function eS(t){return!!t.getCustomProperty("table")&&Q_(t)}function iS(t){const e=t.getSelectedElement();if(e&&eS(e)){return e}return null}function nS(t){const e=WP("table",t.getFirstPosition());if(e&&eS(e.parent)){return e.parent}return null}function oS(t){const e=[];for(const i of aS(t.getRanges())){const t=i.getContainedElement();if(t&&t.is("tableCell")){e.push(t)}}return e}function rS(t){const e=[];for(const i of t.getRanges()){const t=WP("tableCell",i.start);if(t){e.push(t)}}return e}function sS(t){const e=oS(t);if(e.length){return e}return rS(t)}function aS(t){return Array.from(t).sort(cS)}function cS(t,e){const i=t.start;const n=e.start;if(i.isEqual(n)){return 0}return i.isBefore(n)?-1:1}function lS(t={}){return e=>e.on("insert:table",(e,i,n)=>{const o=i.item;if(!n.consumable.consume(o,"insert")){return}n.consumable.consume(o,"attribute:headingRows:table");n.consumable.consume(o,"attribute:headingColumns:table");const r=t&&t.asWidget;const s=n.writer.createContainerElement("figure",{class:"table"});const a=n.writer.createContainerElement("table");n.writer.insert(n.writer.createPositionAt(s,0),a);let c;if(r){c=tS(s,n.writer)}const l=new ZP(o);const d={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};const u=new Map;for(const e of l){const{row:i,cell:r}=e;const s=vS(_S(i,d),a,n);const c=o.getChild(i);const l=u.get(i)||wS(c,i,s,n);u.set(i,l);n.consumable.consume(r,"insert");const h=n.writer.createPositionAt(l,"end");bS(e,d,h,n,t)}const h=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(o,r?c:s);n.writer.insert(h,r?c:s)})}function dS(t={}){return e=>e.on("insert:tableRow",(e,i,n)=>{const o=i.item;if(!n.consumable.consume(o,"insert")){return}const r=o.parent;const s=n.mapper.toViewElement(r);const a=TS(s);const c=r.getChildIndex(o);const l=new ZP(r,{startRow:c,endRow:c});const d={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0};const u=new Map;for(const e of l){const i=vS(_S(c,d),a,n);const r=u.get(c)||wS(o,c,i,n);u.set(c,r);n.consumable.consume(e.cell,"insert");const s=n.writer.createPositionAt(r,"end");bS(e,d,s,n,t)}})}function uS(t={}){return e=>e.on("insert:tableCell",(e,i,n)=>{const o=i.item;if(!n.consumable.consume(o,"insert")){return}const r=o.parent;const s=r.parent;const a=s.getChildIndex(r);const c=new ZP(s,{startRow:a,endRow:a});const l={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0};for(const e of c){if(e.cell===o){const i=n.mapper.toViewElement(r);const s=n.writer.createPositionAt(i,r.getChildIndex(o));bS(e,l,s,n,t);return}}})}function hS(t={}){const e=!!t.asWidget;return t=>t.on("attribute:headingRows:table",(t,i,n)=>{const o=i.item;if(!n.consumable.consume(i.item,t.name)){return}const r=n.mapper.toViewElement(o);const s=TS(r);const a=i.attributeOldValue;const c=i.attributeNewValue;if(c>a){const t=Array.from(o.getChildren()).filter(({index:t})=>l(t,a-1,c));const i=vS("thead",s,n);AS(t,i,n,"end");for(const i of t){for(const t of i.getChildren()){mS(t,"th",n,e)}}CS("tbody",s,n)}else{const t=Array.from(o.getChildren()).filter(({index:t})=>l(t,c-1,a)).reverse();const i=vS("tbody",s,n);AS(t,i,n,0);const r=new ZP(o,{startRow:c?c-1:c,endRow:a-1});const d={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};for(const t of r){pS(t,d,n,e)}CS("thead",s,n)}function l(t,e,i){return t>e&&t<i}})}function fS(t={}){const e=!!t.asWidget;return t=>t.on("attribute:headingColumns:table",(t,i,n)=>{const o=i.item;if(!n.consumable.consume(i.item,t.name)){return}const r={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};const s=i.attributeOldValue;const a=i.attributeNewValue;const c=(s>a?s:a)-1;for(const t of new ZP(o)){if(t.column>c){continue}pS(t,r,n,e)}})}function gS(){return t=>t.on("remove:tableRow",(t,e,i)=>{t.stop();const n=i.writer;const o=i.mapper;const r=o.toViewPosition(e.position).getLastMatchingPosition(t=>!t.item.is("tr"));const s=r.nodeAfter;const a=s.parent;const c=n.createRangeOn(s);const l=n.remove(c);for(const t of n.createRangeIn(l).getItems()){o.unbindViewElement(t)}if(!a.childCount){n.remove(n.createRangeOn(a))}},{priority:"higher"})}function mS(t,e,i,n){const o=i.writer;const r=i.mapper.toViewElement(t);if(!r){return}let s;if(n){const t=o.createEditableElement(e,r.getAttributes());s=iv(t,o);o.insert(o.createPositionAfter(r),s);o.move(o.createRangeIn(r),o.createPositionAt(s,0));o.remove(o.createRangeOn(r))}else{s=o.rename(e,r)}i.mapper.unbindViewElement(r);i.mapper.bindElements(t,s)}function pS(t,e,i,n){const{cell:o}=t;const r=kS(t,e);const s=i.mapper.toViewElement(o);if(s&&s.name!==r){mS(o,r,i,n)}}function bS(t,e,i,n,o){const r=o&&o.asWidget;const s=kS(t,e);const a=r?iv(n.writer.createEditableElement(s),n.writer):n.writer.createContainerElement(s);const c=t.cell;const l=c.getChild(0);const d=c.childCount===1&&l.name==="paragraph";n.writer.insert(i,a);if(d&&!PS(l)){const t=c.getChild(0);const e=n.writer.createPositionAt(a,"end");n.consumable.consume(t,"insert");if(o.asWidget){const i=n.writer.createContainerElement("span",{style:"display:inline-block"});n.mapper.bindElements(t,i);n.writer.insert(e,i);n.mapper.bindElements(c,a)}else{n.mapper.bindElements(c,a);n.mapper.bindElements(t,a)}}else{n.mapper.bindElements(c,a)}}function wS(t,e,i,n){n.consumable.consume(t,"insert");const o=n.writer.createContainerElement("tr");n.mapper.bindElements(t,o);const r=t.parent.getAttribute("headingRows")||0;const s=r>0&&e>=r?e-r:e;const a=n.writer.createPositionAt(i,s);n.writer.insert(a,o);return o}function kS(t,e){const{row:i,column:n}=t;const{headingColumns:o,headingRows:r}=e;const s=r&&r>i;if(s){return"th"}const a=o&&o>n;return a?"th":"td"}function _S(t,e){return t<e.headingRows?"thead":"tbody"}function vS(t,e,i){const n=yS(t,e);return n?n:xS(t,e,i)}function yS(t,e){for(const i of e.getChildren()){if(i.name==t){return i}}}function xS(t,e,i){const n=i.writer.createContainerElement(t);const o=i.writer.createPositionAt(e,t=="tbody"?"end":0);i.writer.insert(o,n);return n}function CS(t,e,i){const n=yS(t,e);if(n&&n.childCount===0){i.writer.remove(i.writer.createRangeOn(n))}}function AS(t,e,i,n){for(const o of t){const t=i.mapper.toViewElement(o);if(t){i.writer.move(i.writer.createRangeOn(t),i.writer.createPositionAt(e,n))}}}function TS(t){for(const e of t.getChildren()){if(e.name==="table"){return e}}}function PS(t){return!![...t.getAttributeKeys()].length}class SS extends jw{refresh(){const t=this.editor.model;const e=t.document.selection;const i=t.schema;const n=ES(e.getFirstPosition());this.isEnabled=i.checkChild(n,"table")}execute(t={}){const e=this.editor.model;const i=e.document.selection;const n=this.editor.plugins.get("TableUtils");const o=parseInt(t.rows)||2;const r=parseInt(t.columns)||2;const s=nv(i,e);e.change(t=>{const i=n.createTable(t,o,r);e.insertContent(i,s);t.setSelection(t.createPositionAt(i.getNodeByPath([0,0,0]),0))})}}function ES(t){const e=t.parent;return e===e.root?e:e.parent}class RS extends jw{constructor(t,e={}){super(t);this.order=e.order||"below"}refresh(){const t=this.editor.model.document.selection;const e=WP("table",t.getFirstPosition());this.isEnabled=!!e}execute(){const t=this.editor;const e=t.model.document.selection;const i=t.plugins.get("TableUtils");const n=this.order==="above";const o=n?e.getFirstPosition():e.getLastPosition();const r=n?e.getFirstRange():e.getLastRange();const s=r.getContainedElement()||WP("tableCell",o);const a=s.parent;const c=a.parent;const l=c.getChildIndex(a);i.insertRows(c,{rows:1,at:this.order==="below"?l+1:l})}}class OS extends jw{constructor(t,e={}){super(t);this.order=e.order||"right"}refresh(){const t=this.editor.model.document.selection;const e=WP("table",t.getFirstPosition());this.isEnabled=!!e}execute(){const t=this.editor;const e=t.model.document.selection;const i=t.plugins.get("TableUtils");const n=this.order==="left";const o=n?e.getFirstPosition():e.getLastPosition();const r=n?e.getFirstRange():e.getLastRange();const s=r.getContainedElement()||WP("tableCell",o);const a=s.parent.parent;const{column:c}=i.getCellLocation(s);i.insertColumns(a,{columns:1,at:n?c:c+1})}}class IS extends jw{constructor(t,e={}){super(t);this.direction=e.direction||"horizontally"}refresh(){const t=sS(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const t=sS(this.editor.model.document.selection)[0];const e=this.direction==="horizontally";const i=this.editor.plugins.get("TableUtils");if(e){i.splitCellHorizontally(t,2)}else{i.splitCellVertically(t,2)}}}class VS extends jw{constructor(t,e){super(t);this.direction=e.direction;this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const t=this._getMergeableCell();this.value=t;this.isEnabled=!!t}execute(){const t=this.editor.model;const e=t.document;const i=rS(e.selection)[0];const n=this.value;const o=this.direction;t.change(t=>{const e=o=="right"||o=="down";const r=e?i:n;const s=e?n:i;const a=s.parent;zS(s,r,t);const c=this.isHorizontal?"colspan":"rowspan";const l=parseInt(i.getAttribute(c)||1);const d=parseInt(n.getAttribute(c)||1);t.setAttribute(c,l+d,r);t.setSelection(t.createRangeIn(r));if(!a.childCount){BS(a,t)}})}_getMergeableCell(){const t=this.editor.model;const e=t.document;const i=rS(e.selection)[0];if(!i){return}const n=this.editor.plugins.get("TableUtils");const o=this.isHorizontal?NS(i,this.direction,n):MS(i,this.direction);if(!o){return}const r=this.isHorizontal?"rowspan":"colspan";const s=parseInt(i.getAttribute(r)||1);const a=parseInt(o.getAttribute(r)||1);if(a===s){return o}}}function NS(t,e,i){const n=t.parent;const o=n.parent;const r=e=="right"?t.nextSibling:t.previousSibling;const s=(o.getAttribute("headingColumns")||0)>0;if(!r){return}const a=e=="right"?t:r;const c=e=="right"?r:t;const{column:l}=i.getCellLocation(a);const{column:d}=i.getCellLocation(c);const u=parseInt(a.getAttribute("colspan")||1);const h=KP(i,a,o);const f=KP(i,c,o);if(s&&h!=f){return}const g=l+u===d;return g?r:undefined}function MS(t,e){const i=t.parent;const n=i.parent;const o=n.getChildIndex(i);if(e=="down"&&o===n.childCount-1||e=="up"&&o===0){return}const r=parseInt(t.getAttribute("rowspan")||1);const s=n.getAttribute("headingRows")||0;const a=e=="down"&&o+r===s;const c=e=="up"&&o===s;if(s&&(a||c)){return}const l=parseInt(t.getAttribute("rowspan")||1);const d=e=="down"?o+l:o;const u=[...new ZP(n,{endRow:d})];const h=u.find(e=>e.cell===t);const f=h.column;const g=u.find(({row:t,rowspan:i,column:n})=>{if(n!==f){return false}if(e=="down"){return t===d}else{return d===t+i}});return g&&g.cell}function BS(t,e){const i=t.parent;const n=i.getChildIndex(t);for(const{cell:t,row:o,rowspan:r}of new ZP(i,{endRow:n})){const i=o+r-1>=n;if(i){qP("rowspan",r-1,t,e)}}e.remove(t)}function zS(t,e,i){if(!LS(t)){if(LS(e)){i.remove(i.createRangeIn(e))}i.move(i.createRangeIn(t),i.createPositionAt(e,"end"))}i.remove(t)}function LS(t){return t.childCount==1&&t.getChild(0).is("paragraph")&&t.getChild(0).isEmpty}class FS extends jw{refresh(){const t=sS(this.editor.model.document.selection);const e=t[0];if(e){const i=e.parent.parent;const n=this.editor.plugins.get("TableUtils").getRows(i);const o=[...new ZP(i)];const r=o.filter(e=>t.includes(e.cell)).map(t=>t.row);const s=r[0];const a=r[r.length-1];this.isEnabled=a-s<n-1}else{this.isEnabled=false}}execute(){const t=sS(this.editor.model.document.selection);const e=DS(t);const i=t[0];const n=i.parent.parent;const o=[...new ZP(n,{endRow:e.last})];const r=this.editor.model.createBatch();const s=HS(o,i);this.editor.model.enqueueChange(r,t=>{t.setSelection(t.createSelection(n,"on"))});let a;for(let t=e.last;t>=e.first;t--){this.editor.model.enqueueChange(r,e=>{const i=t;this._removeRow(i,n,e,o);a=jS(n,i,s)})}this.editor.model.enqueueChange(r,t=>{t.setSelection(t.createPositionAt(a,0))})}_removeRow(t,e,i,n){const o=new Map;const r=e.getChild(t);const s=e.getAttribute("headingRows")||0;if(s&&t<s){qP("headingRows",s-1,e,i,0)}n.filter(({row:e,rowspan:i})=>e===t&&i>1).forEach(({column:t,cell:e,rowspan:i})=>o.set(t,{cell:e,rowspanToSet:i-1}));n.filter(({row:e,rowspan:i})=>e<=t-1&&e+i>t).forEach(({cell:t,rowspan:e})=>qP("rowspan",e-1,t,i));const a=t+1;const c=new ZP(e,{includeSpanned:true,startRow:a,endRow:a});let l;for(const{row:t,column:n,cell:r}of[...c]){if(o.has(n)){const{cell:r,rowspanToSet:s}=o.get(n);const a=l?i.createPositionAfter(l):i.createPositionAt(e.getChild(t),0);i.move(i.createRangeOn(r),a);qP("rowspan",s,r,i);l=r}else{l=r}}i.remove(r)}}function DS(t){const e=t.map(t=>t.parent.index).sort();return{first:e[0],last:e[e.length-1]}}function jS(t,e,i){const n=t.getChild(e)||t.getChild(t.childCount-1);let o=n.getChild(0);let r=0;for(const t of n.getChildren()){if(r>i){return o}o=t;r+=parseInt(t.getAttribute("colspan")||1)}return o}function HS(t,e){const i=t.find(t=>t.cell===e);return i.column}class WS extends jw{refresh(){const t=sS(this.editor.model.document.selection);const e=t[0];if(e){const i=e.parent.parent;const n=this.editor.plugins.get("TableUtils").getColumns(i);const o=[...new ZP(i)];const r=o.filter(e=>t.includes(e.cell)).map(t=>t.column).sort();const s=r[0];const a=r[r.length-1];this.isEnabled=a-s<n-1}else{this.isEnabled=false}}execute(){const[t,e]=$S(this.editor.model.document.selection);const i=t.parent.parent;const n=[...new ZP(i)];const o={first:n.find(e=>e.cell===t).column,last:n.find(t=>t.cell===e).column};const r=US(n,t,e,o);this.editor.model.change(t=>{t.setSelection(t.createRangeOn(i));qS(i,o,t);for(let e=o.last;e>=o.first;e--){for(const{cell:i,column:o,colspan:r}of n){if(o<=e&&r>1&&o+r>e){qP("colspan",r-1,i,t)}else if(o===e){const e=i.parent;t.remove(i);if(!e.childCount){t.remove(e)}}}}t.setSelection(t.createPositionAt(r,0))})}}function qS(t,e,i){const n=t.getAttribute("headingColumns")||0;if(n&&e.first<=n){const o=Math.min(n-1,e.last)-e.first+1;i.setAttribute("headingColumns",n-o,t)}}function US(t,e,i,n){const o=parseInt(i.getAttribute("colspan")||1);if(o>1){return i}else if(e.previousSibling||i.nextSibling){return i.nextSibling||e.previousSibling}else{if(n.first){return t.reverse().find(({column:t})=>t<n.first).cell}else{return t.reverse().find(({column:t})=>t>n.last).cell}}}function $S(t){const e=sS(t);const i=e[0];const n=e.pop();const o=[i,n];return i.isBefore(n)?o:o.reverse()}class GS extends jw{refresh(){const t=this.editor.model;const e=sS(t.document.selection);const i=e.length>0;this.isEnabled=i;this.value=i&&e.every(t=>this._isInHeading(t,t.parent.parent))}execute(t={}){const e=this.editor.model;const i=sS(e.document.selection);const n=i[0];const o=i[i.length-1];const r=n.parent.parent;const s=r.getAttribute("headingRows")||0;const[a,c]=[n.parent.index,o.parent.index].sort();if(t.forceValue===this.value){return}const l=this.value?a:c+1;e.change(t=>{if(l){const e=KS(r,l,s);for(const i of e){JS(i,l,t)}}qP("headingRows",l,r,t,0)})}_isInHeading(t,e){const i=parseInt(e.getAttribute("headingRows")||0);return!!i&&t.parent.index<i}}function KS(t,e,i){const n=[];const o=e>i?i:0;const r=e-1;const s=new ZP(t,{startRow:o,endRow:r});for(const{row:t,rowspan:i,cell:o}of s){if(i>1&&t+i>e){n.push(o)}}return n}function JS(t,e,i){const n=t.parent;const o=n.parent;const r=n.index;const s=parseInt(t.getAttribute("rowspan"));const a=e-r;const c={};const l=s-a;if(l>1){c.rowspan=l}const d=parseInt(t.getAttribute("colspan")||1);if(d>1){c.colspan=d}const u=o.getChildIndex(n);const h=u+a;const f=[...new ZP(o,{startRow:u,endRow:h,includeSpanned:true})];let g;for(const{row:e,column:n,cell:r,cellIndex:s}of f){if(r===t&&g===undefined){g=n}if(g!==undefined&&g===n&&e===h){const t=o.getChild(e);const n=i.createPositionAt(t,s);UP(i,n,c)}}qP("rowspan",a,t,i)}class YS extends jw{refresh(){const t=this.editor.model;const e=sS(t.document.selection);const i=this.editor.plugins.get("TableUtils");const n=e.length>0;this.isEnabled=n;this.value=n&&e.every(t=>KP(i,t))}execute(t={}){const e=this.editor.model;const i=this.editor.plugins.get("TableUtils");const n=sS(e.document.selection);const o=n[0];const r=n[n.length-1];const s=o.parent;const a=s.parent;const[c,l]=[i.getCellLocation(o).column,i.getCellLocation(r).column].sort();if(t.forceValue===this.value){return}const d=this.value?c:l+1;e.change(t=>{qP("headingColumns",d,a,t,0)})}}class QS extends mp{static get pluginName(){return"TableUtils"}getCellLocation(t){const e=t.parent;const i=e.parent;const n=i.getChildIndex(e);const o=new ZP(i,{startRow:n,endRow:n});for(const{cell:e,row:i,column:n}of o){if(e===t){return{row:i,column:n}}}}createTable(t,e,i){const n=t.createElement("table");XS(t,n,0,e,i);return n}insertRows(t,e={}){const i=this.editor.model;const n=e.at||0;const o=e.rows||1;i.change(e=>{const i=t.getAttribute("headingRows")||0;if(i>n){e.setAttribute("headingRows",i+o,t)}if(n===0||n===t.childCount){XS(e,t,n,o,this.getColumns(t));return}const r=new ZP(t,{endRow:n});let s=0;for(const{row:t,rowspan:i,colspan:a,cell:c}of r){const r=t<n;const l=t+i>n;if(r&&l){e.setAttribute("rowspan",i+o,c)}if(t===n){s+=a}}XS(e,t,n,o,s)})}insertColumns(t,e={}){const i=this.editor.model;const n=e.at||0;const o=e.columns||1;i.change(e=>{const i=t.getAttribute("headingColumns");if(n<i){e.setAttribute("headingColumns",i+o,t)}const r=this.getColumns(t);if(n===0||r===n){for(const i of t.getChildren()){ZS(o,e,e.createPositionAt(i,n?"end":0))}return}const s=new ZP(t,{column:n,includeSpanned:true});for(const{row:i,cell:r,cellIndex:a}of s){const c=parseInt(r.getAttribute("rowspan")||1);const l=parseInt(r.getAttribute("colspan")||1);if(r.index!==n&&l>1){e.setAttribute("colspan",l+o,r);s.skipRow(i);if(c>1){for(let t=i+1;t<i+c;t++){s.skipRow(t)}}}else{const n=e.createPositionAt(t.getChild(i),a);ZS(o,e,n)}}})}splitCellVertically(t,e=2){const i=this.editor.model;const n=t.parent;const o=n.parent;const r=parseInt(t.getAttribute("rowspan")||1);const s=parseInt(t.getAttribute("colspan")||1);i.change(i=>{if(s>1){const{newCellsSpan:n,updatedSpan:o}=tE(s,e);qP("colspan",o,t,i);const a={};if(n>1){a.colspan=n}if(r>1){a.rowspan=r}const c=s>e?e-1:s-1;ZS(c,i,i.createPositionAfter(t),a)}if(s<e){const n=e-s;const a=[...new ZP(o)];const{column:c}=a.find(({cell:e})=>e===t);const l=a.filter(({cell:e,colspan:i,column:n})=>{const o=e!==t&&n===c;const r=n<c&&n+i>c;return o||r});for(const{cell:t,colspan:e}of l){i.setAttribute("colspan",e+n,t)}const d={};if(r>1){d.rowspan=r}ZS(n,i,i.createPositionAfter(t),d);const u=o.getAttribute("headingColumns")||0;if(u>c){qP("headingColumns",u+n,o,i)}}})}splitCellHorizontally(t,e=2){const i=this.editor.model;const n=t.parent;const o=n.parent;const r=o.getChildIndex(n);const s=parseInt(t.getAttribute("rowspan")||1);const a=parseInt(t.getAttribute("colspan")||1);i.change(i=>{if(s>1){const n=[...new ZP(o,{startRow:r,endRow:r+s-1,includeSpanned:true})];const{newCellsSpan:c,updatedSpan:l}=tE(s,e);qP("rowspan",l,t,i);const{column:d}=n.find(({cell:e})=>e===t);const u={};if(c>1){u.rowspan=c}if(a>1){u.colspan=a}for(const{column:t,row:e,cellIndex:s}of n){const n=e>=r+l;const a=t===d;const h=(e+r+l)%c===0;if(n&&a&&h){const t=i.createPositionAt(o.getChild(e),s);ZS(1,i,t,u)}}}if(s<e){const n=e-s;const c=[...new ZP(o,{startRow:0,endRow:r})];for(const{cell:e,rowspan:o,row:s}of c){if(e!==t&&s+o>r){const t=o+n;i.setAttribute("rowspan",t,e)}}const l={};if(a>1){l.colspan=a}XS(i,o,r+1,n,1,l);const d=o.getAttribute("headingRows")||0;if(d>r){qP("headingRows",d+n,o,i)}}})}getColumns(t){const e=t.getChild(0);return[...e.getChildren()].reduce((t,e)=>{const i=parseInt(e.getAttribute("colspan")||1);return t+i},0)}getRows(t){return t.childCount}}function XS(t,e,i,n,o,r={}){for(let s=0;s<n;s++){const n=t.createElement("tableRow");t.insert(n,e,i);ZS(o,t,t.createPositionAt(n,"end"),r)}}function ZS(t,e,i,n={}){for(let o=0;o<t;o++){UP(e,i,n)}}function tE(t,e){if(t<e){return{newCellsSpan:1,updatedSpan:1}}const i=Math.floor(t/e);const n=t-i*e+i;return{newCellsSpan:i,updatedSpan:n}}function eE(t){t.document.registerPostFixer(e=>iE(e,t))}function iE(t,e){const i=e.document.differ.getChanges();let n=false;const o=new Set;for(const e of i){let i;if(e.name=="table"&&e.type=="insert"){i=e.position.nodeAfter}if(e.name=="tableRow"||e.name=="tableCell"){i=WP("table",e.position)}if(aE(e)){i=WP("table",e.range.start)}if(i&&!o.has(i)){n=nE(i,t)||n;n=oE(i,t)||n;o.add(i)}}return n}function nE(t,e){let i=false;const n=rE(t);if(n.length){i=true;for(const t of n){qP("rowspan",t.rowspan,t.cell,e,1)}}return i}function oE(t,e){let i=false;const n=sE(t);const o=n[0];const r=Object.values(n).every(t=>t===o);if(!r){const o=Object.values(n).reduce((t,e)=>e>t?e:t,0);for(const[r,s]of Object.entries(n)){const n=o-s;if(n){for(let i=0;i<n;i++){UP(e,e.createPositionAt(t.getChild(r),"end"))}i=true}}}return i}function rE(t){const e=parseInt(t.getAttribute("headingRows")||0);const i=t.childCount;const n=[];for(const{row:o,rowspan:r,cell:s}of new ZP(t)){if(r<2){continue}const t=o<e;const a=t?e:i;if(o+r>a){const t=a-o;n.push({cell:s,rowspan:t})}}return n}function sE(t){const e={};for(const{row:i}of new ZP(t,{includeSpanned:true})){if(!e[i]){e[i]=0}e[i]+=1}return e}function aE(t){const e=t.type==="attribute";const i=t.attributeKey;return e&&(i==="headingRows"||i==="colspan"||i==="rowspan")}function cE(t){t.document.registerPostFixer(e=>lE(e,t))}function lE(t,e){const i=e.document.differ.getChanges();let n=false;for(const e of i){if(e.type=="insert"&&e.name=="table"){n=dE(e.position.nodeAfter,t)||n}if(e.type=="insert"&&e.name=="tableRow"){n=uE(e.position.nodeAfter,t)||n}if(e.type=="insert"&&e.name=="tableCell"){n=hE(e.position.nodeAfter,t)||n}if(fE(e)){n=hE(e.position.parent,t)||n}}return n}function dE(t,e){let i=false;for(const n of t.getChildren()){i=uE(n,e)||i}return i}function uE(t,e){let i=false;for(const n of t.getChildren()){i=hE(n,e)||i}return i}function hE(t,e){if(t.childCount==0){e.insertElement("paragraph",t);return true}const i=Array.from(t.getChildren()).filter(t=>t.is("text"));for(const t of i){e.wrap(e.createRangeOn(t),"paragraph")}return!!i.length}function fE(t){if(!t.position||!t.position.parent.is("tableCell")){return false}return t.type=="insert"&&t.name=="$text"||t.type=="remove"}function gE(t){t.document.registerPostFixer(()=>mE(t))}function mE(t){const e=t.document.differ;const i=new Set;for(const t of e.getChanges()){const e=t.type=="insert"||t.type=="remove"?t.position.parent:t.range.start.parent;if(e.is("tableCell")&&pE(e,t.type)){i.add(e)}}if(i.size){for(const t of i.values()){e.refreshItem(t)}return true}return false}function pE(t,e){const i=Array.from(t.getChildren()).some(t=>t.is("paragraph"));if(!i){return false}if(e=="attribute"){const e=Array.from(t.getChild(0).getAttributeKeys()).length;return t.childCount===1&&e<2}return t.childCount<=(e=="insert"?2:1)}var bE=i(92);class wE extends mp{static get pluginName(){return"TableEditing"}init(){const t=this.editor;const e=t.model;const i=e.schema;const n=t.conversion;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isLimit:true,isObject:true,isBlock:true});i.register("tableRow",{allowIn:"table",isLimit:true});i.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isObject:true});i.extend("$block",{allowIn:"tableCell"});i.addChildCheck((t,e)=>{if(e.name=="table"&&Array.from(t.getNames()).includes("table")){return false}});n.for("upcast").add(JP());n.for("editingDowncast").add(lS({asWidget:true}));n.for("dataDowncast").add(lS());n.for("upcast").elementToElement({model:"tableRow",view:"tr"});n.for("editingDowncast").add(dS({asWidget:true}));n.for("dataDowncast").add(dS());n.for("downcast").add(gS());n.for("upcast").add(YP("td"));n.for("upcast").add(YP("th"));n.for("editingDowncast").add(uS({asWidget:true}));n.for("dataDowncast").add(uS());n.attributeToAttribute({model:"colspan",view:"colspan"});n.attributeToAttribute({model:"rowspan",view:"rowspan"});n.for("editingDowncast").add(fS({asWidget:true}));n.for("dataDowncast").add(fS());n.for("editingDowncast").add(hS({asWidget:true}));n.for("dataDowncast").add(hS());t.commands.add("insertTable",new SS(t));t.commands.add("insertTableRowAbove",new RS(t,{order:"above"}));t.commands.add("insertTableRowBelow",new RS(t,{order:"below"}));t.commands.add("insertTableColumnLeft",new OS(t,{order:"left"}));t.commands.add("insertTableColumnRight",new OS(t,{order:"right"}));t.commands.add("removeTableRow",new FS(t));t.commands.add("removeTableColumn",new WS(t));t.commands.add("splitTableCellVertically",new IS(t,{direction:"vertically"}));t.commands.add("splitTableCellHorizontally",new IS(t,{direction:"horizontally"}));t.commands.add("mergeTableCellRight",new VS(t,{direction:"right"}));t.commands.add("mergeTableCellLeft",new VS(t,{direction:"left"}));t.commands.add("mergeTableCellDown",new VS(t,{direction:"down"}));t.commands.add("mergeTableCellUp",new VS(t,{direction:"up"}));t.commands.add("setTableColumnHeader",new YS(t));t.commands.add("setTableRowHeader",new GS(t));eE(e);gE(e);cE(e);this.editor.keystrokes.set("Tab",(...t)=>this._handleTabOnSelectedTable(...t),{priority:"low"});this.editor.keystrokes.set("Tab",this._getTabHandler(true),{priority:"low"});this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(false),{priority:"low"})}static get requires(){return[QS]}_handleTabOnSelectedTable(t,e){const i=this.editor;const n=i.model.document.selection;if(!n.isCollapsed&&n.rangeCount===1&&n.getFirstRange().isFlat){const t=n.getSelectedElement();if(!t||!t.is("table")){return}e();i.model.change(e=>{e.setSelection(e.createRangeIn(t.getChild(0).getChild(0)))})}}_getTabHandler(t){const e=this.editor;return(i,n)=>{const o=e.model.document.selection;const r=rS(o)[0];if(!r){return}n();const s=r.parent;const a=s.parent;const c=a.getChildIndex(s);const l=s.getChildIndex(r);const d=l===0;if(!t&&d&&c===0){return}const u=l===s.childCount-1;const h=c===a.childCount-1;if(t&&h&&u){e.execute("insertTableRowBelow");if(c===a.childCount-1){return}}let f;if(t&&u){const t=a.getChild(c+1);f=t.getChild(0)}else if(!t&&d){const t=a.getChild(c-1);f=t.getChild(t.childCount-1)}else{f=s.getChild(l+(t?1:-1))}e.model.change(t=>{t.setSelection(t.createRangeIn(f))})}}}var kE=i(94);class _E extends Gp{constructor(t){super(t);const e=this.bindTemplate;this.items=this.createCollection();this.set("rows",0);this.set("columns",0);this.bind("label").to(this,"columns",this,"rows",(t,e)=>`${e}  ${t}`);this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},children:this.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:e.to("label")}]}],on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(()=>{this.fire("execute")})}});for(let t=0;t<100;t++){const e=new vE;e.on("over",()=>{const e=Math.floor(t/10);const i=t%10;this.set("rows",e+1);this.set("columns",i+1)});this.items.add(e)}this.on("change:columns",()=>{this._highlightGridBoxes()});this.on("change:rows",()=>{this._highlightGridBoxes()})}focus(){}focusLast(){}_highlightGridBoxes(){const t=this.rows;const e=this.columns;this.items.map((i,n)=>{const o=Math.floor(n/10);const r=n%10;const s=o<t&&r<e;i.set("isOn",s)})}}class vE extends Gp{constructor(t){super(t);const e=this.bindTemplate;this.set("isOn",false);this.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",e.if("isOn","ck-on")]},on:{mouseover:e.to("over")}})}}var yE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>';var xE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>';var CE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>';var AE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class TE extends mp{init(){const t=this.editor;const e=this.editor.t;const i=t.locale.contentLanguageDirection;const n=i==="ltr";t.ui.componentFactory.add("insertTable",i=>{const n=t.commands.get("insertTable");const o=Wb(i);o.bind("isEnabled").to(n);o.buttonView.set({icon:yE,label:e("ki"),tooltip:true});let r;o.on("change:isOpen",()=>{if(r){return}r=new _E(i);o.panelView.children.add(r);r.delegate("execute").to(o);o.buttonView.on("open",()=>{r.rows=0;r.columns=0});o.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns});t.editing.view.focus()})});return o});t.ui.componentFactory.add("tableColumn",t=>{const i=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("kj"),bindIsOn:true}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:e("kk")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:e("kl")}},{type:"button",model:{commandName:"removeTableColumn",label:e("km")}}];return this._prepareDropdown(e("kn"),xE,i,t)});t.ui.componentFactory.add("tableRow",t=>{const i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("ko"),bindIsOn:true}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowBelow",label:e("kp")}},{type:"button",model:{commandName:"insertTableRowAbove",label:e("kq")}},{type:"button",model:{commandName:"removeTableRow",label:e("kr")}}];return this._prepareDropdown(e("ks"),CE,i,t)});t.ui.componentFactory.add("mergeTableCells",t=>{const i=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("kt")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:e("ku")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("kv")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:e("kw")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("kx")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("ky")}}];return this._prepareDropdown(e("kz"),AE,i,t)})}_prepareDropdown(t,e,i,n){const o=this.editor;const r=Wb(n);const s=[];const a=new ys;for(const t of i){PE(t,o,s,a)}Ub(r,a,o.ui.componentFactory);r.buttonView.set({label:t,icon:e,tooltip:true});r.bind("isEnabled").toMany(s,"isEnabled",(...t)=>t.some(t=>t));this.listenTo(r,"execute",t=>{o.execute(t.source.commandName);o.editing.view.focus()});return r}}function PE(t,e,i,n){const o=t.model=new e_(t.model);const{commandName:r,bindIsOn:s}=t.model;if(t.type==="button"||t.type==="switchbutton"){const t=e.commands.get(r);i.push(t);o.set({commandName:r});o.bind("isEnabled").to(t);if(s){o.bind("isOn").to(t,"value")}}o.set({withText:true});n.add(t)}class SE extends Ju{constructor(t){super(t);this.domEventType=["mousemove","mouseup","mouseleave"]}onDomEvent(t){this.fire(t.type,t)}}function EE(t,e,i){const n=Array.from(t);const o=n[0];const r=n[n.length-1];const{row:s,column:a}=e.getCellLocation(o);const c=RE(n,a,i,e);const{row:l,column:d}=e.getCellLocation(r);const u=d-a+1;const h=l-s+1;IE(c,u,h,i,e);const f=WP("table",o);VE(c,f,s,a,i);return c}function RE(t,e,i,n){const o=i.createElement("table");const r=new Map;const s=new Map;for(const e of t){const t=WP("tableRow",e);if(!r.has(t)){const e=t._clone();i.append(e,o);r.set(t,e)}const a=e._clone(true);const{column:c}=n.getCellLocation(e);s.set(a,c);i.append(a,r.get(t))}OE(o,e,s,i,n);return o}function OE(t,e,i,n,o){for(const r of t.getChildren()){for(const t of Array.from(r.getChildren())){const{column:r}=o.getCellLocation(t);const s=i.get(t);const a=s-e;if(r!==a){for(let e=0;e<a-r;e++){const e=n.createElement("tableCell");n.insert(e,n.createPositionBefore(t));const i=n.createElement("paragraph");n.insert(i,e,0);n.insertText("",i,0)}}}}}function IE(t,e,i,n,o){for(const r of t.getChildren()){for(const t of r.getChildren()){const r=parseInt(t.getAttribute("colspan")||1);const s=parseInt(t.getAttribute("rowspan")||1);const{row:a,column:c}=o.getCellLocation(t);if(c+r>e){const i=e-c;if(i>1){n.setAttribute("colspan",i,t)}else{n.removeAttribute("colspan",t)}}if(a+s>i){const e=i-a;if(e>1){n.setAttribute("rowspan",e,t)}else{n.removeAttribute("rowspan",t)}}}}}function VE(t,e,i,n,o){const r=parseInt(e.getAttribute("headingRows")||0);if(r>0){const e=r-i;o.setAttribute("headingRows",e,t)}const s=parseInt(e.getAttribute("headingColumns")||0);if(s>0){const e=s-n;o.setAttribute("headingColumns",e,t)}}var NE=i(96);class ME extends mp{static get pluginName(){return"TableSelection"}static get requires(){return[QS]}init(){const t=this.editor;const e=t.model;this.listenTo(e,"deleteContent",(t,e)=>this._handleDeleteContent(t,e),{priority:"high"});t.editing.view.addObserver(SE);this._defineSelectionConverter();this._enableShiftClickSelection();this._enableMouseDragSelection()}getSelectedTableCells(){const t=this.editor.model.document.selection;const e=oS(t);if(e.length==0){return null}return e}getSelectionAsFragment(){const t=this.getSelectedTableCells();if(!t){return null}return this.editor.model.change(e=>{const i=e.createDocumentFragment();const n=EE(t,this.editor.plugins.get("TableUtils"),e);e.insert(n,i,0);return i})}_defineSelectionConverter(){const t=this.editor;const e=new Set;t.conversion.for("editingDowncast").add(t=>t.on("selection",(t,n,o)=>{const r=o.writer;i(r);const s=this.getSelectedTableCells();if(!s){return}for(const t of s){const i=o.mapper.toViewElement(t);r.addClass("ck-editor__editable_selected",i);e.add(i)}const a=o.mapper.toViewElement(s[s.length-1]);r.setSelection(a,0)},{priority:"lowest"}));function i(t){for(const i of e){t.removeClass("ck-editor__editable_selected",i)}e.clear()}}_enableShiftClickSelection(){const t=this.editor;let e=false;this.listenTo(t.editing.view.document,"mousedown",(i,n)=>{if(!this.isEnabled){return}if(!n.domEvent.shiftKey){return}const o=rS(t.model.document.selection)[0];if(!o){return}const r=this._getModelTableCellFromDomEvent(n);if(r&&zE(o,r)){e=true;this._setCellSelection(o,r);n.preventDefault()}});this.listenTo(t.editing.view.document,"mouseup",()=>{e=false});this.listenTo(t.editing.view.document,"selectionChange",t=>{if(e){t.stop()}},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,i;let n=false;let o=false;this.listenTo(t.editing.view.document,"mousedown",(t,i)=>{if(!this.isEnabled){return}if(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey){return}e=this._getModelTableCellFromDomEvent(i)});this.listenTo(t.editing.view.document,"mousemove",(t,r)=>{if(!r.domEvent.buttons){return}if(!e){return}const s=this._getModelTableCellFromDomEvent(r);if(s&&zE(e,s)){i=s;if(!n&&i!=e){n=true}}if(!n){return}o=true;this._setCellSelection(e,i);r.preventDefault()});this.listenTo(t.editing.view.document,"mouseup",()=>{n=false;o=false;e=null;i=null});this.listenTo(t.editing.view.document,"selectionChange",t=>{if(o){t.stop()}},{priority:"highest"})}_handleDeleteContent(t,e){const[i,n]=e;const o=this.editor.model;const r=!n||n.direction=="backward";const s=oS(i);if(!s.length){return}t.stop();o.change(t=>{const e=s[r?s.length-1:0];o.change(t=>{for(const e of s){o.deleteContent(t.createSelection(e,"in"))}});const n=o.schema.getNearestSelectionRange(t.createPositionAt(e,0));if(n){if(i.is("documentSelection")){t.setSelection(n)}else{i.setTo(n)}}})}_setCellSelection(t,e){const i=this._getCellsToSelect(t,e);this.editor.model.change(t=>{t.setSelection(i.cells.map(e=>t.createRangeOn(e)),{backward:i.backward})})}_getModelTableCellFromDomEvent(t){const e=t.target;const i=this.editor.editing.view.createPositionAt(e,0);const n=this.editor.editing.mapper.toModelPosition(i);const o=n.parent;if(!o){return}if(o.is("tableCell")){return o}return WP("tableCell",o)}_getCellsToSelect(t,e){const i=this.editor.plugins.get("TableUtils");const n=i.getCellLocation(t);const o=i.getCellLocation(e);const r=Math.min(n.row,o.row);const s=Math.max(n.row,o.row);const a=Math.min(n.column,o.column);const c=Math.max(n.column,o.column);const l=[];for(const e of new ZP(WP("table",t),{startRow:r,endRow:s})){if(e.column>=a&&e.column<=c){l.push(e.cell)}}if(BE(n,o)){return{cells:l.reverse(),backward:true}}return{cells:l,backward:false}}}function BE(t,e){if(t.row>e.row){return true}if(t.row==e.row&&t.column>e.column){return true}return false}function zE(t,e){return t.parent.parent==e.parent.parent}class LE extends mp{static get pluginName(){return"TableClipboard"}static get requires(){return[ME]}init(){const t=this.editor;const e=t.editing.view.document;this.listenTo(e,"copy",(t,e)=>this._onCopyCut(t,e));this.listenTo(e,"cut",(t,e)=>this._onCopyCut(t,e))}_onCopyCut(t,e){const i=this.editor.plugins.get("TableSelection");if(!i.getSelectedTableCells()){return}if(t.name=="cut"&&this.editor.isReadOnly){return}e.preventDefault();t.stop();const n=this.editor.data;const o=this.editor.editing.view.document;const r=n.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:r,method:t.name})}}var FE=i(98);class DE extends mp{static get requires(){return[wE,TE,ME,LE,Fv]}static get pluginName(){return"Table"}}var jE=i(100);class HE extends Gp{constructor(t,e){super(t);const i=`ck-labeled-view-${is()}`;const n=`ck-labeled-view-status-${is()}`;this.view=e(this,i,n);this.set("label");this.set("isEnabled",true);this.set("errorText",null);this.set("infoText",null);this.set("class");this.labelView=this._createLabelView(i);this.statusView=this._createStatusView(n);this.bind("_statusText").to(this,"errorText",this,"infoText",(t,e)=>t||e);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-view",o.to("class"),o.if("isEnabled","ck-disabled",t=>!t)]},children:[this.labelView,this.view,this.statusView]})}_createLabelView(t){const e=new Mk(this.locale);e.for=t;e.bind("text").to(this,"label");return e}_createStatusView(t){const e=new Gp(this.locale);const i=this.bindTemplate;e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-view__status",i.if("errorText","ck-labeled-view__status_error"),i.if("_statusText","ck-hidden",t=>!t)],id:t,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]});return e}focus(){this.view.focus()}}function WE(t,e,i){const n=new Yv(t.locale);n.set({id:e,ariaDescribedById:i});n.bind("isReadOnly").to(t,"isEnabled",t=>!t);n.bind("hasError").to(t,"errorText",t=>!!t);n.on("input",()=>{t.errorText=null});return n}function qE(t,e,i){const n=Wb(t.locale);n.set({id:e,ariaDescribedById:i});n.bind("isEnabled").to(t);return n}var UE=i(102);class $E extends Gp{constructor(t,e){super(t);const i=this.bindTemplate;this.set("value","");this.set("id");this.set("isReadOnly",false);this.set("hasError",false);this.set("ariaDescribedById");this.options=e;this._dropdownView=this._createDropdownView(t);this._inputView=this._createInputTextView(t);this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color",i.if("hasError","ck-error")],id:i.to("id"),"aria-invalid":i.if("hasError",true),"aria-describedby":i.to("ariaDescribedById")},children:[this._inputView,this._dropdownView]})}focus(){this._inputView.focus()}_createDropdownView(){const t=this.locale;const e=this.bindTemplate;const i=this._createColorGrid(t);const n=Wb(t);const o=new Gp;const r=this._createRemoveColorButton(t);o.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:e.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",e.if("value","ck-hidden",t=>t!="")]}}]});n.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}});n.buttonView.children.add(o);n.panelPosition=t.uiLanguageDirection==="rtl"?"se":"sw";n.panelView.children.add(r);n.panelView.children.add(i);n.bind("isEnabled").to(this,"isReadOnly",t=>!t);return n}_createInputTextView(){const t=this.locale;const e=new Yv(t);e.bind("value").to(this);e.bind("isReadOnly").to(this);e.bind("hasError").to(this);e.on("input",()=>{this.value=e.element.value});e.delegate("input").to(this);return e}_createRemoveColorButton(){const t=this.locale;const e=t.t;const i=new hb(t);i.class="ck-input-color__remove-color";i.withText=true;i.icon=zk;i.label=e("li");i.on("execute",()=>{this.value="";this._dropdownView.isOpen=false;this.fire("input")});return i}_createColorGrid(t){const e=new Vk(t,{colorDefinitions:this.options.colorDefinitions,columns:this.options.columns});e.on("execute",(t,e)=>{this.value=e.value;this._dropdownView.isOpen=false;this.fire("input")});e.bind("selectedColor").to(this,"value");return e}}const GE=nb.defaultPositions;const KE=[GE.northArrowSouth,GE.northArrowSouthWest,GE.northArrowSouthEast,GE.southArrowNorth,GE.southArrowNorthWest,GE.southArrowNorthEast];const JE=t=>t==="";function YE(t,e){const i=t.plugins.get("ContextualBalloon");if(nS(t.editing.view.document.selection)){let n;if(e==="cell"){n=XE(t)}else{n=QE(t)}i.updatePosition(n)}}function QE(t){const e=t.model.document.selection.getFirstPosition();const i=WP("table",e);const n=t.editing.mapper.toViewElement(i);return{target:t.editing.view.domConverter.viewToDom(n),positions:KE}}function XE(t){const e=uR(t.model.document.selection.getFirstPosition());const i=t.editing.mapper.toViewElement(e);return{target:t.editing.view.domConverter.viewToDom(i),positions:KE}}function ZE(t){return{none:t("mq"),solid:t("mr"),dotted:t("ms"),dashed:t("mt"),double:t("mu"),groove:t("mv"),ridge:t("mw"),inset:t("mx"),outset:t("my")}}function tR(t){return t("mz")}function eR(t){return t("na")}function iR(t){t=t.trim();return JE(t)||tC(t)}function nR(t){t=t.trim();return JE(t)||lR(t)||oC(t)||sC(t)}function oR(t){t=t.trim();return JE(t)||lR(t)||oC(t)}function rR(t){const e=new ys;const i=ZE(t.t);for(const n in i){const o={type:"button",model:new e_({_borderStyleValue:n==="none"?"":n,label:i[n],withText:true})};if(n==="none"){o.model.bind("isOn").to(t,"borderStyle",t=>!t)}else{o.model.bind("isOn").to(t,"borderStyle",t=>t===n)}e.add(o)}return e}function sR({view:t,icons:e,toolbar:i,labels:n,propertyName:o,nameToValue:r}){for(const s in n){const a=new hb(t.locale);a.set({label:n[s],icon:e[s]});a.bind("isOn").to(t,o,t=>t===r(s));a.on("execute",()=>{t[o]=r(s)});i.items.add(a)}}const aR=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:true},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function cR(t){return(e,i,n)=>{const o=new $E(e.locale,{colorDefinitions:dR(t.colorConfig),columns:t.columns});o.set({id:i,ariaDescribedById:n});o.bind("isReadOnly").to(e,"isEnabled",t=>!t);o.bind("errorText").to(e);o.on("input",()=>{e.errorText=null});return o}}function lR(t){const e=parseFloat(t);return!Number.isNaN(e)&&t===String(e)}function dR(t){return t.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}function uR(t){const e=t.nodeAfter&&t.nodeAfter.is("tableCell");return e?t.nodeAfter:WP("tableCell",t)}var hR=i(104);class fR extends Gp{constructor(t,e={}){super(t);const i=this.bindTemplate;this.set("class",e.class||null);this.children=this.createCollection();if(e.children){e.children.forEach(t=>this.children.add(t))}this.set("_role",null);this.set("_ariaLabelledBy",null);if(e.labelView){this.set({_role:"group",_ariaLabelledBy:e.labelView.id})}this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",i.to("class")],role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}var gR=i(106);class mR extends Gp{constructor(t,e={}){super(t);const i=this.bindTemplate;this.children=this.createCollection();this.set("class",e.class||null);this.set("label",e.label||"");const n=new Gp(t);n.setTemplate({tag:"span",attributes:{class:["ck","ck-form__header__label"]},children:[{text:i.to("label")}]});this.children.add(n);this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children})}}var pR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.261 7.062l2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>';var bR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>';var wR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.239 13.938l-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>';var kR=i(12);var _R=i(13);var vR=i(110);const yR={left:Zw,center:ek,right:tk,justify:ik,top:pR,middle:bR,bottom:wR};class xR extends Gp{constructor(t,e){super(t);this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""});this.options=e;const{borderStyleDropdown:i,borderWidthInput:n,borderColorInput:o,borderRowLabel:r}=this._createBorderFields();const{widthInput:s,operatorLabel:a,heightInput:c,dimensionsLabel:l}=this._createDimensionFields();const{horizontalAlignmentToolbar:d,verticalAlignmentToolbar:u,alignmentLabel:h}=this._createAlignmentFields();this.focusTracker=new fb;this.keystrokes=new dp;this.children=this.createCollection();this.borderStyleDropdown=i;this.borderWidthInput=n;this.borderColorInput=o;this.backgroundInput=this._createBackgroundField();this.paddingInput=this._createPaddingField();this.widthInput=s;this.heightInput=c;this.horizontalAlignmentToolbar=d;this.verticalAlignmentToolbar=u;const{saveButtonView:f,cancelButtonView:g}=this._createActionButtons();this.saveButtonView=f;this.cancelButtonView=g;this._focusables=new bp;this._focusCycler=new yb({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});this.children.add(new mR(t,{label:this.t(" ")}));this.children.add(new fR(t,{labelView:r,children:[r,i,o,n],class:"ck-table-form__border-row"}));this.children.add(new fR(t,{children:[this.backgroundInput]}));this.children.add(new fR(t,{children:[new fR(t,{labelView:l,children:[l,s,a,c],class:"ck-table-form__dimensions-row"}),new fR(t,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]}));this.children.add(new fR(t,{labelView:h,children:[h,d,u],class:"ck-table-cell-properties-form__alignment-row"}));this.children.add(new fR(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"}));this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render();Qv({view:this});[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t);this.focusTracker.add(t.element)});this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=cR({colorConfig:this.options.borderColors,columns:5});const e=this.locale;const i=this.t;const n=new Mk(e);n.text=i("nb");const o=ZE(i);const r=new HE(e,qE);r.set({label:i("nc"),class:"ck-table-form__border-style"});r.view.buttonView.set({isOn:false,withText:true,tooltip:i("nc")});r.view.buttonView.bind("label").to(this,"borderStyle",t=>o[t?t:"none"]);r.view.on("execute",t=>{this.borderStyle=t.source._borderStyleValue});Ub(r.view,rR(this));const s=new HE(e,WE);s.set({label:i("nd"),class:"ck-table-form__border-width"});s.view.bind("value").to(this,"borderWidth");s.bind("isEnabled").to(this,"borderStyle",CR);s.view.on("input",()=>{this.borderWidth=s.view.element.value});const a=new HE(e,t);a.set({label:i("ne"),class:"ck-table-form__border-color"});a.view.bind("value").to(this,"borderColor");a.bind("isEnabled").to(this,"borderStyle",CR);a.view.on("input",()=>{this.borderColor=a.view.value});this.on("change:borderStyle",(t,e,i)=>{if(!CR(i)){this.borderColor="";this.borderWidth=""}});return{borderRowLabel:n,borderStyleDropdown:r,borderColorInput:a,borderWidthInput:s}}_createBackgroundField(){const t=this.locale;const e=this.t;const i=cR({colorConfig:this.options.backgroundColors,columns:5});const n=new HE(t,i);n.set({label:e("nf"),class:"ck-table-cell-properties-form__background"});n.view.bind("value").to(this,"backgroundColor");n.view.on("input",()=>{this.backgroundColor=n.view.value});return n}_createDimensionFields(){const t=this.locale;const e=this.t;const i=new Mk(t);i.text=e("ng");const n=new HE(t,WE);n.set({label:e("nd"),class:"ck-table-form__dimensions-row__width"});n.view.bind("value").to(this,"width");n.view.on("input",()=>{this.width=n.view.element.value});const o=new Gp(t);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const r=new HE(t,WE);r.set({label:e("nh"),class:"ck-table-form__dimensions-row__height"});r.view.bind("value").to(this,"height");r.view.on("input",()=>{this.height=r.view.element.value});return{dimensionsLabel:i,widthInput:n,operatorLabel:o,heightInput:r}}_createPaddingField(){const t=this.locale;const e=this.t;const i=new HE(t,WE);i.set({label:e("ni"),class:"ck-table-cell-properties-form__padding"});i.view.bind("value").to(this,"padding");i.view.on("input",()=>{this.padding=i.view.element.value});return i}_createAlignmentFields(){const t=this.locale;const e=this.t;const i=new Mk(t);i.text=e("nj");const n=new Xb(t);const o=this.locale.contentLanguageDirection==="rtl";n.set({isCompact:true,ariaLabel:e("nk")});sR({view:this,icons:yR,toolbar:n,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:t=>t===(o?"right":"left")?"":t});const r=new Xb(t);r.set({isCompact:true,ariaLabel:e("nl")});sR({view:this,icons:yR,toolbar:r,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",nameToValue:t=>t==="middle"?"":t});return{horizontalAlignmentToolbar:n,verticalAlignmentToolbar:r,alignmentLabel:i}}_createActionButtons(){const t=this.locale;const e=this.t;const i=new hb(t);const n=new hb(t);const o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];i.set({label:e("lo"),icon:Xv,class:"ck-button-save",type:"submit",withText:true});i.bind("isEnabled").toMany(o,"errorText",(...t)=>t.every(t=>!t));n.set({label:e("lp"),icon:Zv,class:"ck-button-cancel",type:"cancel",withText:true});n.delegate("execute").to(this,"cancel");return{saveButtonView:i,cancelButtonView:n}}get _horizontalAlignmentLabels(){const t=this.locale;const e=this.t;const i=e("nm");const n=e("nn");const o=e("no");const r=e("np");if(t.uiLanguageDirection==="rtl"){return{right:o,center:n,left:i,justify:r}}else{return{left:i,center:n,right:o,justify:r}}}get _verticalAlignmentLabels(){const t=this.t;return{top:t("nq"),middle:t("nr"),bottom:t("ns")}}}function CR(t){return!!t}var AR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.105 18l-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="M15.5 11.5l1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';const TR=500;class PR extends mp{static get requires(){return[kb]}static get pluginName(){return"TableCellPropertiesUI"}constructor(t){super(t);t.config.define("table.tableCellProperties",{borderColors:aR,backgroundColors:aR})}init(){const t=this.editor;const e=t.t;this._balloon=t.plugins.get(kb);this.view=this._createPropertiesView();this._undoStepBatch=null;t.ui.componentFactory.add("tableCellProperties",t=>{const i=new hb(t);i.set({label:e("kh"),icon:AR,tooltip:true});this.listenTo(i,"execute",()=>this._showView());return i})}destroy(){super.destroy();this.view.destroy()}_createPropertiesView(){const t=this.editor;const e=t.editing.view.document;const i=t.config.get("table.tableCellProperties");const n=__(i.borderColors);const o=k_(t.locale,n);const r=__(i.backgroundColors);const s=k_(t.locale,r);const a=new xR(t.locale,{borderColors:o,backgroundColors:s});const c=t.t;a.render();this.listenTo(a,"submit",()=>{this._hideView()});this.listenTo(a,"cancel",()=>{if(this._undoStepBatch.operations.length){t.execute("undo",this._undoStepBatch)}this._hideView()});a.keystrokes.set("Esc",(t,e)=>{this._hideView();e()});this.listenTo(t.ui,"update",()=>{if(!nS(e.selection)){this._hideView()}else if(this._isViewVisible){YE(t,"cell")}});Db({emitter:a,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const l=tR(c);const d=eR(c);a.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle"));a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableCellBorderColor",errorText:l,validator:iR}));a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableCellBorderWidth",errorText:d,validator:oR}));a.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:a.paddingInput,commandName:"tableCellPadding",errorText:d,validator:nR}));a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableCellWidth",errorText:d,validator:nR}));a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableCellHeight",errorText:d,validator:nR}));a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableCellBackgroundColor",errorText:l,validator:iR}));a.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment"));a.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment"));return a}_fillViewFormFromCommandValues(){const t=this.editor.commands;this.view.set({borderStyle:t.get("tableCellBorderStyle").value||"",borderColor:t.get("tableCellBorderColor").value||"",borderWidth:t.get("tableCellBorderWidth").value||"",width:t.get("tableCellWidth").value||"",height:t.get("tableCellHeight").value||"",padding:t.get("tableCellPadding").value||"",backgroundColor:t.get("tableCellBackgroundColor").value||"",horizontalAlignment:t.get("tableCellHorizontalAlignment").value||"",verticalAlignment:t.get("tableCellVerticalAlignment").value||""})}_showView(){const t=this.editor;this._balloon.add({view:this.view,position:XE(t)});this._undoStepBatch=t.model.createBatch();this._fillViewFormFromCommandValues();this.view.focus()}_hideView(){if(!this._isViewInBalloon){return}const t=this.editor;this.stopListening(t.ui,"update");this.view.saveButtonView.focus();this._balloon.remove(this.view);this.editor.editing.view.focus()}get _isViewVisible(){return this._balloon.visibleView===this.view}get _isViewInBalloon(){return this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(e,i,n)=>{this.editor.execute(t,{value:n,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback({commandName:t,viewField:e,validator:i,errorText:n}){const o=uh(()=>{e.errorText=n},TR);return(n,r,s)=>{o.cancel();if(i(s)){this.editor.execute(t,{value:s,batch:this._undoStepBatch});e.errorText=null}else{o()}}}}function SR(t){t.setNormalizer("border",ER);t.setNormalizer("border-top",RR("top"));t.setNormalizer("border-right",RR("right"));t.setNormalizer("border-bottom",RR("bottom"));t.setNormalizer("border-left",RR("left"));t.setNormalizer("border-color",OR("color"));t.setNormalizer("border-width",OR("width"));t.setNormalizer("border-style",OR("style"));t.setNormalizer("border-top-color",VR("color","top"));t.setNormalizer("border-top-style",VR("style","top"));t.setNormalizer("border-top-width",VR("width","top"));t.setNormalizer("border-right-color",VR("color","right"));t.setNormalizer("border-right-style",VR("style","right"));t.setNormalizer("border-right-width",VR("width","right"));t.setNormalizer("border-bottom-color",VR("color","bottom"));t.setNormalizer("border-bottom-style",VR("style","bottom"));t.setNormalizer("border-bottom-width",VR("width","bottom"));t.setNormalizer("border-left-color",VR("color","left"));t.setNormalizer("border-left-style",VR("style","left"));t.setNormalizer("border-left-width",VR("width","left"));t.setExtractor("border-top",NR("top"));t.setExtractor("border-right",NR("right"));t.setExtractor("border-bottom",NR("bottom"));t.setExtractor("border-left",NR("left"));t.setExtractor("border-top-color","border.color.top");t.setExtractor("border-right-color","border.color.right");t.setExtractor("border-bottom-color","border.color.bottom");t.setExtractor("border-left-color","border.color.left");t.setExtractor("border-top-width","border.width.top");t.setExtractor("border-right-width","border.width.right");t.setExtractor("border-bottom-width","border.width.bottom");t.setExtractor("border-left-width","border.width.left");t.setExtractor("border-top-style","border.style.top");t.setExtractor("border-right-style","border.style.right");t.setExtractor("border-bottom-style","border.style.bottom");t.setExtractor("border-left-style","border.style.left");t.setReducer("border-color",pC("border-color"));t.setReducer("border-style",pC("border-style"));t.setReducer("border-width",pC("border-width"));t.setReducer("border-top",LR("top"));t.setReducer("border-right",LR("right"));t.setReducer("border-bottom",LR("bottom"));t.setReducer("border-left",LR("left"));t.setReducer("border",zR);t.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]);t.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]);t.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]);t.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]);t.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]);t.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]);t.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]);t.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function ER(t){const{color:e,style:i,width:n}=BR(t);return{path:"border",value:{color:mC(e),style:mC(i),width:mC(n)}}}function RR(t){return e=>{const{color:i,style:n,width:o}=BR(e);const r={};if(i!==undefined){r.color={[t]:i}}if(n!==undefined){r.style={[t]:n}}if(o!==undefined){r.width={[t]:o}}return{path:"border",value:r}}}function OR(t){return e=>({path:"border",value:IR(e,t)})}function IR(t,e){return{[e]:mC(t)}}function VR(t,e){return i=>({path:"border",value:{[t]:{[e]:i}}})}function NR(t){return(e,i)=>{if(i.border){return MR(i.border,t)}}}function MR(t,e){const i={};if(t.width&&t.width[e]){i.width=t.width[e]}if(t.style&&t.style[e]){i.style=t.style[e]}if(t.color&&t.color[e]){i.color=t.color[e]}return i}function BR(t){const e={};const i=kC(t);for(const t of i){if(oC(t)||/thin|medium|thick/.test(t)){e.width=t}else if(iC(t)){e.style=t}else{e.color=t}}return e}function zR(t){const e=[];e.push(...FR(MR(t,"top"),"top"));e.push(...FR(MR(t,"right"),"right"));e.push(...FR(MR(t,"bottom"),"bottom"));e.push(...FR(MR(t,"left"),"left"));return e}function LR(t){return e=>FR(e,t)}function FR(t,e){const i=[];if(t&&t.width!==undefined){i.push(t.width)}if(t&&t.style!==undefined){i.push(t.style)}if(t&&t.color!==undefined){i.push(t.color)}if(i.length){return[[`border-${e}`,i.join(" ")]]}return[]}function DR(t){t.setNormalizer("padding",wC("padding"));t.setNormalizer("padding-top",t=>({path:"padding.top",value:t}));t.setNormalizer("padding-right",t=>({path:"padding.right",value:t}));t.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t}));t.setNormalizer("padding-left",t=>({path:"padding.left",value:t}));t.setReducer("padding",pC("padding"));t.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}function jR(t){t.setNormalizer("background",HR);t.setNormalizer("background-color",t=>({path:"background.color",value:t}));t.setReducer("background",t=>{const e=[];e.push(["background-color",t.color]);return e})}function HR(t){const e={};const i=kC(t);for(const t of i){if(cC(t)){e.repeat=e.repeat||[];e.repeat.push(t)}else if(dC(t)){e.position=e.position||[];e.position.push(t)}else if(hC(t)){e.attachment=t}else if(tC(t)){e.color=t}else if(gC(t)){e.image=t}}return{path:"background",value:e}}function WR(t,e,i,n){t.for("upcast").attributeToAttribute({view:{styles:{[n]:/[\s\S]+/}},model:{name:e,key:i,value:t=>t.getNormalizedStyle(n)}})}function qR(t,e){t.for("upcast").add(t=>t.on("element:"+e,(t,e,i)=>{const n=["border-top","border-right","border-bottom","border-left"].filter(t=>e.viewItem.hasStyle(t));if(!n.length){return}const o={styles:n};if(!i.consumable.test(e.viewItem,o)){return}if(!e.modelRange){e=Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor))}const r=[...e.modelRange.getItems({shallow:true})].pop();i.consumable.consume(e.viewItem,o);i.writer.setAttribute("borderStyle",e.viewItem.getNormalizedStyle("border-style"),r);i.writer.setAttribute("borderColor",e.viewItem.getNormalizedStyle("border-color"),r);i.writer.setAttribute("borderWidth",e.viewItem.getNormalizedStyle("border-width"),r)}))}function UR(t,e,i,n){t.for("downcast").attributeToAttribute({model:{name:e,key:i},view:t=>({key:"style",value:{[n]:t}})})}function $R(t,e,i){t.for("downcast").add(t=>t.on(`attribute:${e}:table`,(t,e,n)=>{const{item:o,attributeNewValue:r}=e;const{mapper:s,writer:a}=n;if(!n.consumable.consume(e.item,t.name)){return}const c=[...s.toViewElement(o).getChildren()].find(t=>t.is("table"));if(r){a.setStyle(i,r,c)}else{a.removeStyle(i,c)}}))}class GR extends jw{constructor(t,e){super(t);this.attributeName=e}refresh(){const t=this.editor;const e=sS(t.model.document.selection);this.isEnabled=!!e.length;this.value=this._getSingleValue(e)}execute(t={}){const{value:e,batch:i}=t;const n=this.editor.model;const o=sS(n.document.selection);const r=this._getValueToSet(e);n.enqueueChange(i||"default",t=>{if(r){o.forEach(e=>t.setAttribute(this.attributeName,r,e))}else{o.forEach(e=>t.removeAttribute(this.attributeName,e))}})}_getAttribute(t){if(!t){return}return t.getAttribute(this.attributeName)}_getValueToSet(t){return t}_getSingleValue(t){const e=this._getAttribute(t[0]);const i=t.every(t=>this._getAttribute(t)===e);return i?e:undefined}}class KR extends GR{constructor(t){super(t,"padding")}_getAttribute(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}_getValueToSet(t){return GP(t,"px")}}class JR extends GR{constructor(t){super(t,"width")}_getValueToSet(t){return GP(t,"px")}}class YR extends GR{constructor(t){super(t,"height")}_getValueToSet(t){return GP(t,"px")}}class QR extends GR{constructor(t){super(t,"backgroundColor")}}class XR extends GR{constructor(t){super(t,"verticalAlignment")}}class ZR extends GR{constructor(t){super(t,"horizontalAlignment")}}class tO extends GR{constructor(t){super(t,"borderStyle")}_getAttribute(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}}class eO extends GR{constructor(t){super(t,"borderColor")}_getAttribute(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}}class iO extends GR{constructor(t){super(t,"borderWidth")}_getAttribute(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}_getValueToSet(t){return GP(t,"px")}}const nO=/^(top|bottom)$/;class oO extends mp{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[wE]}init(){const t=this.editor;const e=t.model.schema;const i=t.conversion;t.data.addStyleProcessorRules(SR);rO(e,i);t.commands.add("tableCellBorderStyle",new tO(t));t.commands.add("tableCellBorderColor",new eO(t));t.commands.add("tableCellBorderWidth",new iO(t));sO(e,i);t.commands.add("tableCellHorizontalAlignment",new ZR(t));cO(e,i,"width","width");t.commands.add("tableCellWidth",new JR(t));cO(e,i,"height","height");t.commands.add("tableCellHeight",new YR(t));t.data.addStyleProcessorRules(DR);cO(e,i,"padding","padding");t.commands.add("tableCellPadding",new KR(t));t.data.addStyleProcessorRules(jR);cO(e,i,"backgroundColor","background-color");t.commands.add("tableCellBackgroundColor",new QR(t));aO(e,i);t.commands.add("tableCellVerticalAlignment",new XR(t))}}function rO(t,e){t.extend("tableCell",{allowAttributes:["borderWidth","borderColor","borderStyle"]});qR(e,"td");qR(e,"th");UR(e,"tableCell","borderStyle","border-style");UR(e,"tableCell","borderColor","border-color");UR(e,"tableCell","borderWidth","border-width")}function sO(t,e){t.extend("tableCell",{allowAttributes:["horizontalAlignment"]});e.attributeToAttribute({model:{name:"tableCell",key:"horizontalAlignment",values:["right","center","justify"]},view:{right:{key:"style",value:{"text-align":"right"}},center:{key:"style",value:{"text-align":"center"}},justify:{key:"style",value:{"text-align":"justify"}}}})}function aO(t,e){t.extend("tableCell",{allowAttributes:["verticalAlignment"]});e.attributeToAttribute({model:{name:"tableCell",key:"verticalAlignment",values:["top","bottom"]},view:{top:{key:"style",value:{"vertical-align":"top"}},bottom:{key:"style",value:{"vertical-align":"bottom"}}}});e.for("upcast").attributeToAttribute({view:{attributes:{valign:nO}},model:{name:"tableCell",key:"verticalAlignment",value:t=>t.getAttribute("valign")}})}function cO(t,e,i,n){t.extend("tableCell",{allowAttributes:[i]});WR(e,"tableCell",i,n);UR(e,"tableCell",i,n)}class lO extends mp{static get pluginName(){return"TableCellProperties"}static get requires(){return[oO,PR]}}class dO extends mp{static get requires(){return[ly]}static get pluginName(){return"TableToolbar"}afterInit(){const t=this.editor;const e=t.t;const i=t.plugins.get(ly);const n=t.config.get("table.contentToolbar");const o=t.config.get("table.tableToolbar");if(n){i.register("tableContent",{ariaLabel:e("iv"),items:n,getRelatedElement:nS})}if(o){i.register("table",{ariaLabel:e("iv"),items:o,getRelatedElement:iS})}}}class uO extends jw{constructor(t,e){super(t);this.attributeName=e}refresh(){const t=this.editor;const e=t.model.document.selection;const i=WP("table",e.getFirstPosition());this.isEnabled=!!i;this.value=this._getValue(i)}execute(t={}){const e=this.editor.model;const i=e.document.selection;const{value:n,batch:o}=t;const r=WP("table",i.getFirstPosition());const s=this._getValueToSet(n);e.enqueueChange(o||"default",t=>{if(s){t.setAttribute(this.attributeName,s,r)}else{t.removeAttribute(this.attributeName,r)}})}_getValue(t){if(!t){return}return t.getAttribute(this.attributeName)}_getValueToSet(t){return t}}class hO extends uO{constructor(t){super(t,"backgroundColor")}}class fO extends uO{constructor(t){super(t,"borderColor")}_getValue(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}}class gO extends uO{constructor(t){super(t,"borderStyle")}_getValue(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}}class mO extends uO{constructor(t){super(t,"borderWidth")}_getValue(t){if(!t){return}return $P(t.getAttribute(this.attributeName))}_getValueToSet(t){return GP(t,"px")}}class pO extends uO{constructor(t){super(t,"width")}_getValueToSet(t){return GP(t,"px")}}class bO extends uO{constructor(t){super(t,"height")}_getValueToSet(t){return GP(t,"px")}}class wO extends uO{constructor(t){super(t,"alignment")}}const kO=/^(left|right)$/;class _O extends mp{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[wE]}init(){const t=this.editor;const e=t.model.schema;const i=t.conversion;t.data.addStyleProcessorRules(SR);vO(e,i);t.commands.add("tableBorderColor",new fO(t));t.commands.add("tableBorderStyle",new gO(t));t.commands.add("tableBorderWidth",new mO(t));yO(e,i);t.commands.add("tableAlignment",new wO(t));CO(e,i,"width","width");t.commands.add("tableWidth",new pO(t));CO(e,i,"height","height");t.commands.add("tableHeight",new bO(t));t.data.addStyleProcessorRules(jR);xO(e,i,"backgroundColor","background-color");t.commands.add("tableBackgroundColor",new hO(t))}}function vO(t,e){t.extend("table",{allowAttributes:["borderWidth","borderColor","borderStyle"]});qR(e,"table");$R(e,"borderColor","border-color");$R(e,"borderStyle","border-style");$R(e,"borderWidth","border-width")}function yO(t,e){t.extend("table",{allowAttributes:["alignment"]});e.attributeToAttribute({model:{name:"table",key:"alignment",values:["left","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}}},converterPriority:"high"});e.for("upcast").attributeToAttribute({view:{attributes:{align:kO}},model:{name:"table",key:"alignment",value:t=>t.getAttribute("align")}})}function xO(t,e,i,n){t.extend("table",{allowAttributes:[i]});WR(e,"table",i,n);$R(e,i,n)}function CO(t,e,i,n){t.extend("table",{allowAttributes:[i]});WR(e,"table",i,n);UR(e,"table",i,n)}var AO=i(112);const TO={left:ky,center:_y,right:vy};class PO extends Gp{constructor(t,e){super(t);this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""});this.options=e;const{borderStyleDropdown:i,borderWidthInput:n,borderColorInput:o,borderRowLabel:r}=this._createBorderFields();const{widthInput:s,operatorLabel:a,heightInput:c,dimensionsLabel:l}=this._createDimensionFields();const{alignmentToolbar:d,alignmentLabel:u}=this._createAlignmentFields();this.focusTracker=new fb;this.keystrokes=new dp;this.children=this.createCollection();this.borderStyleDropdown=i;this.borderWidthInput=n;this.borderColorInput=o;this.backgroundInput=this._createBackgroundField();this.widthInput=s;this.heightInput=c;this.alignmentToolbar=d;const{saveButtonView:h,cancelButtonView:f}=this._createActionButtons();this.saveButtonView=h;this.cancelButtonView=f;this._focusables=new bp;this._focusCycler=new yb({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});this.children.add(new mR(t,{label:this.t(" ")}));this.children.add(new fR(t,{labelView:r,children:[r,i,o,n],class:"ck-table-form__border-row"}));this.children.add(new fR(t,{children:[this.backgroundInput]}));this.children.add(new fR(t,{children:[new fR(t,{labelView:l,children:[l,s,a,c],class:"ck-table-form__dimensions-row"}),new fR(t,{labelView:u,children:[u,d],class:"ck-table-properties-form__alignment-row"})]}));this.children.add(new fR(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"}));this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render();Qv({view:this});[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t);this.focusTracker.add(t.element)});this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=cR({colorConfig:this.options.borderColors,columns:5});const e=this.locale;const i=this.t;const n=new Mk(e);n.text=i("nb");const o=ZE(this.t);const r=new HE(e,qE);r.set({label:i("nc"),class:"ck-table-form__border-style"});r.view.buttonView.set({isOn:false,withText:true,tooltip:i("nc")});r.view.buttonView.bind("label").to(this,"borderStyle",t=>o[t?t:"none"]);r.view.on("execute",t=>{this.borderStyle=t.source._borderStyleValue});Ub(r.view,rR(this));const s=new HE(e,WE);s.set({label:i("nd"),class:"ck-table-form__border-width"});s.view.bind("value").to(this,"borderWidth");s.bind("isEnabled").to(this,"borderStyle",SO);s.view.on("input",()=>{this.borderWidth=s.view.element.value});const a=new HE(e,t);a.set({label:i("ne"),class:"ck-table-form__border-color"});a.view.bind("value").to(this,"borderColor");a.bind("isEnabled").to(this,"borderStyle",SO);a.view.on("input",()=>{this.borderColor=a.view.value});this.on("change:borderStyle",(t,e,i)=>{if(!SO(i)){this.borderColor="";this.borderWidth=""}});return{borderRowLabel:n,borderStyleDropdown:r,borderColorInput:a,borderWidthInput:s}}_createBackgroundField(){const t=cR({colorConfig:this.options.backgroundColors,columns:5});const e=this.locale;const i=this.t;const n=new HE(e,t);n.set({label:i("nf"),class:"ck-table-properties-form__background"});n.view.bind("value").to(this,"backgroundColor");n.view.on("input",()=>{this.backgroundColor=n.view.value});return n}_createDimensionFields(){const t=this.locale;const e=this.t;const i=new Mk(t);i.text=e("ng");const n=new HE(t,WE);n.set({label:e("nd"),class:"ck-table-form__dimensions-row__width"});n.view.bind("value").to(this,"width");n.view.on("input",()=>{this.width=n.view.element.value});const o=new Gp(t);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const r=new HE(t,WE);r.set({label:e("nh"),class:"ck-table-form__dimensions-row__height"});r.view.bind("value").to(this,"height");r.view.on("input",()=>{this.height=r.view.element.value});return{dimensionsLabel:i,widthInput:n,operatorLabel:o,heightInput:r}}_createAlignmentFields(){const t=this.locale;const e=this.t;const i=new Mk(t);i.text=e("nt");const n=new Xb(t);n.set({isCompact:true,ariaLabel:e("nu")});sR({view:this,icons:TO,toolbar:n,labels:this._alignmentLabels,propertyName:"alignment",nameToValue:t=>t==="center"?"":t});return{alignmentLabel:i,alignmentToolbar:n}}_createActionButtons(){const t=this.locale;const e=this.t;const i=new hb(t);const n=new hb(t);const o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];i.set({label:e("lo"),icon:Xv,class:"ck-button-save",type:"submit",withText:true});i.bind("isEnabled").toMany(o,"errorText",(...t)=>t.every(t=>!t));n.set({label:e("lp"),icon:Zv,class:"ck-button-cancel",type:"cancel",withText:true});n.delegate("execute").to(this,"cancel");return{saveButtonView:i,cancelButtonView:n}}get _alignmentLabels(){const t=this.locale;const e=this.t;const i=e("nv");const n=e("nw");const o=e("nx");if(t.uiLanguageDirection==="rtl"){return{right:o,center:n,left:i}}else{return{left:i,center:n,right:o}}}}function SO(t){return!!t}var EO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="M15.5 11.5l1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const RO=500;class OO extends mp{static get requires(){return[kb]}static get pluginName(){return"TablePropertiesUI"}constructor(t){super(t);t.config.define("table.tableProperties",{borderColors:aR,backgroundColors:aR})}init(){const t=this.editor;const e=t.t;this._balloon=t.plugins.get(kb);this.view=this._createPropertiesView();this._undoStepBatch=null;t.ui.componentFactory.add("tableProperties",t=>{const i=new hb(t);i.set({label:e("kg"),icon:EO,tooltip:true});this.listenTo(i,"execute",()=>this._showView());return i})}destroy(){super.destroy();this.view.destroy()}_createPropertiesView(){const t=this.editor;const e=t.editing.view.document;const i=t.config.get("table.tableProperties");const n=__(i.borderColors);const o=k_(t.locale,n);const r=__(i.backgroundColors);const s=k_(t.locale,r);const a=new PO(t.locale,{borderColors:o,backgroundColors:s});const c=t.t;a.render();this.listenTo(a,"submit",()=>{this._hideView()});this.listenTo(a,"cancel",()=>{if(this._undoStepBatch.operations.length){t.execute("undo",this._undoStepBatch)}this._hideView()});a.keystrokes.set("Esc",(t,e)=>{this._hideView();e()});this.listenTo(t.ui,"update",()=>{if(!nS(e.selection)){this._hideView()}else if(this._isViewVisible){YE(t,"table")}});Db({emitter:a,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const l=tR(c);const d=eR(c);a.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle"));a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableBorderColor",errorText:l,validator:iR}));a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableBorderWidth",errorText:d,validator:oR}));a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableBackgroundColor",errorText:l,validator:iR}));a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableWidth",errorText:d,validator:nR}));a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableHeight",errorText:d,validator:nR}));a.on("change:alignment",this._getPropertyChangeCallback("tableAlignment"));return a}_fillViewFormFromCommandValues(){const t=this.editor.commands;this.view.set({borderStyle:t.get("tableBorderStyle").value||"",borderColor:t.get("tableBorderColor").value||"",borderWidth:t.get("tableBorderWidth").value||"",backgroundColor:t.get("tableBackgroundColor").value||"",width:t.get("tableWidth").value||"",height:t.get("tableHeight").value||"",alignment:t.get("tableAlignment").value||""})}_showView(){const t=this.editor;this._balloon.add({view:this.view,position:QE(t)});this._undoStepBatch=t.model.createBatch();this._fillViewFormFromCommandValues();this.view.focus()}_hideView(){if(!this._isViewInBalloon){return}const t=this.editor;this.stopListening(t.ui,"update");this.view.saveButtonView.focus();this._balloon.remove(this.view);this.editor.editing.view.focus()}get _isViewVisible(){return this._balloon.visibleView===this.view}get _isViewInBalloon(){return this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(e,i,n)=>{this.editor.execute(t,{value:n,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback({commandName:t,viewField:e,validator:i,errorText:n}){const o=uh(()=>{e.errorText=n},RO);return(n,r,s)=>{o.cancel();if(i(s)){this.editor.execute(t,{value:s,batch:this._undoStepBatch});e.errorText=null}else{o()}}}}class IO extends mp{static get pluginName(){return"TableProperties"}static get requires(){return[_O,OO]}}const VO="underline";class NO extends mp{static get pluginName(){return"UnderlineEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:VO});t.model.schema.setAttributeProperties(VO,{isFormatting:true,copyOnEnter:true});t.conversion.attributeToElement({model:VO,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}});t.commands.add(VO,new yk(t,VO));t.keystrokes.set("CTRL+U","underline")}}var MO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const BO="underline";class zO extends mp{init(){const t=this.editor;const e=t.t;t.ui.componentFactory.add(BO,i=>{const n=t.commands.get(BO);const o=new hb(i);o.set({label:e("jn"),icon:MO,keystroke:"CTRL+U",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");this.listenTo(o,"execute",()=>{t.execute(BO);t.editing.view.focus()});return o})}}class LO extends mp{static get requires(){return[NO,zO]}static get pluginName(){return"Underline"}}function*FO(t,e){for(const i of e){if(i&&t.getAttributeProperties(i[0]).copyOnEnter){yield i}}}class DO extends jw{execute(){const t=this.editor.model;const e=t.document;t.change(i=>{jO(this.editor.model,i,e.selection,t.schema);this.fire("afterExecute",{writer:i})})}}function jO(t,e,i,n){const o=i.isCollapsed;const r=i.getFirstRange();const s=r.start.parent;const a=r.end.parent;if(n.isLimit(s)||n.isLimit(a)){if(!o&&s==a){t.deleteContent(i)}return}if(o){const t=FO(e.model.schema,i.getAttributes());HO(e,r.start);e.setSelectionAttribute(t)}else{const n=!(r.start.isAtStart&&r.end.isAtEnd);const o=s==a;t.deleteContent(i,{leaveUnmerged:n});if(n){if(o){HO(e,i.focus)}else{e.setSelection(a,0)}}}}function HO(t,e){t.split(e);t.setSelection(e.parent.nextSibling,0)}class WO extends Gd{constructor(t){super(t);const e=this.document;e.on("keydown",(t,i)=>{if(this.isEnabled&&i.keyCode==Nl.enter){let n;e.once("enter",t=>n=t,{priority:"highest"});e.fire("enter",new Ku(e,i.domEvent,{isSoft:i.shiftKey}));if(n&&n.stop.called){t.stop()}}})}observe(){}}class qO extends mp{static get pluginName(){return"Enter"}init(){const t=this.editor;const e=t.editing.view;const i=e.document;e.addObserver(WO);t.commands.add("enter",new DO(t));this.listenTo(i,"enter",(i,n)=>{n.preventDefault();if(n.isSoft){return}t.execute("enter");e.scrollToTheSelection()},{priority:"low"})}}class UO extends jw{execute(){const t=this.editor.model;const e=t.document;t.change(i=>{GO(t,i,e.selection);this.fire("afterExecute",{writer:i})})}refresh(){const t=this.editor.model;const e=t.document;this.isEnabled=$O(t.schema,e.selection)}}function $O(t,e){if(e.rangeCount>1){return false}const i=e.anchor;if(!i||!t.checkChild(i,"softBreak")){return false}const n=e.getFirstRange();const o=n.start.parent;const r=n.end.parent;if((JO(o,t)||JO(r,t))&&o!==r){return false}return true}function GO(t,e,i){const n=i.isCollapsed;const o=i.getFirstRange();const r=o.start.parent;const s=o.end.parent;const a=r==s;if(n){const n=FO(t.schema,i.getAttributes());KO(t,e,o.end);e.removeSelectionAttribute(i.getAttributeKeys());e.setSelectionAttribute(n)}else{const n=!(o.start.isAtStart&&o.end.isAtEnd);t.deleteContent(i,{leaveUnmerged:n});if(a){KO(t,e,i.focus)}else{if(n){e.setSelection(s,0)}}}}function KO(t,e,i){const n=e.createElement("softBreak");t.insertContent(n,i);e.setSelection(n,"after")}function JO(t,e){if(t.is("rootElement")){return false}return e.isLimit(t)||JO(t.parent,e)}class YO extends mp{static get pluginName(){return"ShiftEnter"}init(){const t=this.editor;const e=t.model.schema;const i=t.conversion;const n=t.editing.view;const o=n.document;e.register("softBreak",{allowWhere:"$text",isInline:true});i.for("upcast").elementToElement({model:"softBreak",view:"br"});i.for("downcast").elementToElement({model:"softBreak",view:(t,e)=>e.createEmptyElement("br")});n.addObserver(WO);t.commands.add("shiftEnter",new UO(t));this.listenTo(o,"enter",(e,i)=>{i.preventDefault();if(!i.isSoft){return}t.execute("shiftEnter");n.scrollToTheSelection()},{priority:"low"})}}const QO=new Map;function XO(t,e,i){let n=QO.get(t);if(!n){n=new Map;QO.set(t,n)}n.set(e,i)}function ZO(t,e){const i=QO.get(t);if(i&&i.has(e)){return i.get(e)}return tI}function tI(t){return[t]}function eI(t,e,i={}){const n=ZO(t.constructor,e.constructor);try{t=t.clone();return n(t,e,i)}catch(t){throw t}}function iI(t,e,i){t=t.slice();e=e.slice();const n=new nI(i.document,i.useRelations,i.forceWeakRemove);n.setOriginalOperations(t);n.setOriginalOperations(e);const o=n.originalOperations;if(t.length==0||e.length==0){return{operationsA:t,operationsB:e,originalOperations:o}}const r=new WeakMap;for(const e of t){r.set(e,0)}const s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;while(a<t.length){const i=t[a];const o=r.get(i);if(o==e.length){a++;continue}const s=e[o];const c=eI(i,s,n.getContext(i,s,true));const l=eI(s,i,n.getContext(s,i,false));n.updateRelation(i,s);n.setOriginalOperations(c,i);n.setOriginalOperations(l,s);for(const t of c){r.set(t,o+l.length)}t.splice(a,1,...c);e.splice(o,1,...l)}if(i.padWithNoOps){const i=t.length-s.originalOperationsACount;const n=e.length-s.originalOperationsBCount;rI(t,n-i);rI(e,i-n)}oI(t,s.nextBaseVersionB);oI(e,s.nextBaseVersionA);return{operationsA:t,operationsB:e,originalOperations:o}}class nI{constructor(t,e,i=false){this.originalOperations=new Map;this._history=t.history;this._useRelations=e;this._forceWeakRemove=!!i;this._relations=new Map}setOriginalOperations(t,e=null){const i=e?this.originalOperations.get(e):null;for(const e of t){this.originalOperations.set(e,i||e)}}updateRelation(t,e){switch(t.constructor){case Zg:{switch(e.constructor){case om:{if(t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)){this._setRelation(t,e,"insertAtSource")}else if(t.targetPosition.isEqual(e.deletionPosition)){this._setRelation(t,e,"insertBetween")}else if(t.targetPosition.isAfter(e.sourcePosition)){this._setRelation(t,e,"moveTargetAfter")}break}case Zg:{if(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)){this._setRelation(t,e,"insertBefore")}else{this._setRelation(t,e,"insertAfter")}break}}break}case rm:{switch(e.constructor){case om:{if(t.splitPosition.isBefore(e.sourcePosition)){this._setRelation(t,e,"splitBefore")}break}case Zg:{if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition)){this._setRelation(t,e,"splitBefore")}break}}break}case om:{switch(e.constructor){case om:{if(!t.targetPosition.isEqual(e.sourcePosition)){this._setRelation(t,e,"mergeTargetNotMoved")}if(t.sourcePosition.isEqual(e.targetPosition)){this._setRelation(t,e,"mergeSourceNotMoved")}if(t.sourcePosition.isEqual(e.sourcePosition)){this._setRelation(t,e,"mergeSameElement")}break}case rm:{if(t.sourcePosition.isEqual(e.splitPosition)){this._setRelation(t,e,"splitAtSource")}}}break}case em:{const i=t.newRange;if(!i){return}switch(e.constructor){case Zg:{const n=$h._createFromPositionAndShift(e.sourcePosition,e.howMany);const o=n.containsPosition(i.start)||n.start.isEqual(i.start);const r=n.containsPosition(i.end)||n.end.isEqual(i.end);if((o||r)&&!n.containsRange(i)){this._setRelation(t,e,{side:o?"left":"right",path:o?i.start.path.slice():i.end.path.slice()})}break}case om:{const n=i.start.isEqual(e.targetPosition);const o=i.start.isEqual(e.deletionPosition);const r=i.end.isEqual(e.deletionPosition);const s=i.end.isEqual(e.sourcePosition);if(n||o||r||s){this._setRelation(t,e,{wasInLeftElement:n,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:s})}break}}break}}}getContext(t,e,i){return{aIsStrong:i,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const i=this.originalOperations.get(e);const n=this._history.getUndoneOperation(i);if(!n){return null}const o=this.originalOperations.get(t);const r=this._relations.get(o);if(r){return r.get(n)||null}return null}_setRelation(t,e,i){const n=this.originalOperations.get(t);const o=this.originalOperations.get(e);let r=this._relations.get(n);if(!r){r=new Map;this._relations.set(n,r)}r.set(o,i)}}function oI(t,e){for(const i of t){i.baseVersion=e++}}function rI(t,e){for(let i=0;i<e;i++){t.push(new Sm(0))}}XO(Qg,Qg,(t,e,i)=>{if(t.key===e.key){const n=t.range.getDifference(e.range).map(e=>new Qg(e,t.key,t.oldValue,t.newValue,0));const o=t.range.getIntersection(e.range);if(o){if(i.aIsStrong){n.push(new Qg(o,e.key,e.newValue,t.newValue,0))}}if(n.length==0){return[new Sm(0)]}return n}else{return[t]}});XO(Qg,tm,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const i=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes);const n=i.map(e=>new Qg(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const i=sI(e,t.key,t.oldValue);if(i){n.unshift(i)}}return n}t.range=t.range._getTransformedByInsertion(e.position,e.howMany,false)[0];return[t]});function sI(t,e,i){const n=t.nodes;const o=n.getNode(0).getAttribute(e);if(o==i){return null}const r=new $h(t.position,t.position.getShiftedBy(t.howMany));return new Qg(r,e,o,i,0)}XO(Qg,om,(t,e)=>{const i=[];if(t.range.start.hasSameParentAs(e.deletionPosition)){if(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition)){i.push($h._createFromPositionAndShift(e.graveyardPosition,1))}}const n=t.range._getTransformedByMergeOperation(e);if(!n.isCollapsed){i.push(n)}return i.map(e=>new Qg(e,t.key,t.oldValue,t.newValue,t.baseVersion))});XO(Qg,Zg,(t,e)=>{const i=aI(t.range,e);return i.map(e=>new Qg(e,t.key,t.oldValue,t.newValue,t.baseVersion))});function aI(t,e){const i=$h._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null;let o=[];if(i.containsRange(t,true)){n=t}else if(t.start.hasSameParentAs(i.start)){o=t.getDifference(i);n=t.getIntersection(i)}else{o=[t]}const r=[];for(let t of o){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const i=e.getMovedRangeStart();const n=t.start.hasSameParentAs(i);t=t._getTransformedByInsertion(i,e.howMany,n);r.push(...t)}if(n){r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,false)[0])}return r}XO(Qg,rm,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition)){if(!e.graveyardPosition){t.range.end.offset++}return[t]}if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const i=t.clone();i.range=new $h(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition));t.range.end=e.splitPosition.clone();t.range.end.stickiness="toPrevious";return[t,i]}t.range=t.range._getTransformedBySplitOperation(e);return[t]});XO(tm,Qg,(t,e)=>{const i=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const n=sI(t,e.key,e.newValue);if(n){i.push(n)}}return i});XO(tm,tm,(t,e,i)=>{if(t.position.isEqual(e.position)&&i.aIsStrong){return[t]}t.position=t.position._getTransformedByInsertOperation(e);return[t]});XO(tm,Zg,(t,e)=>{t.position=t.position._getTransformedByMoveOperation(e);return[t]});XO(tm,rm,(t,e)=>{t.position=t.position._getTransformedBySplitOperation(e);return[t]});XO(tm,om,(t,e)=>{t.position=t.position._getTransformedByMergeOperation(e);return[t]});XO(em,tm,(t,e)=>{if(t.oldRange){t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]}if(t.newRange){t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]}return[t]});XO(em,em,(t,e,i)=>{if(t.name==e.name){if(i.aIsStrong){t.oldRange=e.newRange?e.newRange.clone():null}else{return[new Sm(0)]}}return[t]});XO(em,om,(t,e)=>{if(t.oldRange){t.oldRange=t.oldRange._getTransformedByMergeOperation(e)}if(t.newRange){t.newRange=t.newRange._getTransformedByMergeOperation(e)}return[t]});XO(em,Zg,(t,e,i)=>{if(t.oldRange){t.oldRange=$h._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))}if(t.newRange){if(i.abRelation){const n=$h._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if(i.abRelation.side=="left"&&e.targetPosition.isEqual(t.newRange.start)){t.newRange.start.path=i.abRelation.path;t.newRange.end=n.end;return[t]}else if(i.abRelation.side=="right"&&e.targetPosition.isEqual(t.newRange.end)){t.newRange.start=n.start;t.newRange.end.path=i.abRelation.path;return[t]}}t.newRange=$h._createFromRanges(t.newRange._getTransformedByMoveOperation(e))}return[t]});XO(em,rm,(t,e,i)=>{if(t.oldRange){t.oldRange=t.oldRange._getTransformedBySplitOperation(e)}if(t.newRange){if(i.abRelation){const n=t.newRange._getTransformedBySplitOperation(e);if(t.newRange.start.isEqual(e.splitPosition)&&i.abRelation.wasStartBeforeMergedElement){t.newRange.start=Uh._createAt(e.insertionPosition)}else if(t.newRange.start.isEqual(e.splitPosition)&&!i.abRelation.wasInLeftElement){t.newRange.start=Uh._createAt(e.moveTargetPosition)}if(t.newRange.end.isEqual(e.splitPosition)&&i.abRelation.wasInRightElement){t.newRange.end=Uh._createAt(e.moveTargetPosition)}else if(t.newRange.end.isEqual(e.splitPosition)&&i.abRelation.wasEndBeforeMergedElement){t.newRange.end=Uh._createAt(e.insertionPosition)}else{t.newRange.end=n.end}return[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]});XO(om,tm,(t,e)=>{if(t.sourcePosition.hasSameParentAs(e.position)){t.howMany+=e.howMany}t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e);t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e);return[t]});XO(om,om,(t,e,i)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(!i.bWasUndone){return[new Sm(0)]}else{const i=e.graveyardPosition.path.slice();i.push(0);t.sourcePosition=new Uh(e.graveyardPosition.root,i);t.howMany=0;return[t]}}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!i.bWasUndone&&i.abRelation!="splitAtSource"){const n=t.targetPosition.root.rootName=="$graveyard";const o=e.targetPosition.root.rootName=="$graveyard";const r=n&&!o;const s=o&&!n;const a=s||!r&&i.aIsStrong;if(a){const i=e.targetPosition._getTransformedByMergeOperation(e);const n=t.targetPosition._getTransformedByMergeOperation(e);return[new Zg(i,t.howMany,n,0)]}else{return[new Sm(0)]}}if(t.sourcePosition.hasSameParentAs(e.targetPosition)){t.howMany+=e.howMany}t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e);t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e);if(!t.graveyardPosition.isEqual(e.graveyardPosition)||!i.aIsStrong){t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)}return[t]});XO(om,Zg,(t,e,i)=>{const n=$h._createFromPositionAndShift(e.sourcePosition,e.howMany);if(e.type=="remove"&&!i.bWasUndone&&!i.forceWeakRemove){if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)){return[new Sm(0)]}}if(t.sourcePosition.hasSameParentAs(e.targetPosition)){t.howMany+=e.howMany}if(t.sourcePosition.hasSameParentAs(e.sourcePosition)){t.howMany-=e.howMany}t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e);t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e);if(!t.graveyardPosition.isEqual(e.targetPosition)){t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}return[t]});XO(om,rm,(t,e,i)=>{if(e.graveyardPosition){t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1);if(t.deletionPosition.isEqual(e.graveyardPosition)){t.howMany=e.howMany}}if(t.targetPosition.isEqual(e.splitPosition)){const n=e.howMany!=0;const o=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(n||o||i.abRelation=="mergeTargetNotMoved"){t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e);return[t]}}if(t.sourcePosition.isEqual(e.splitPosition)){if(i.abRelation=="mergeSourceNotMoved"){t.howMany=0;t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e);return[t]}if(i.abRelation=="mergeSameElement"||t.sourcePosition.offset>0){t.sourcePosition=e.moveTargetPosition.clone();t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e);return[t]}}if(t.sourcePosition.hasSameParentAs(e.splitPosition)){t.howMany=e.splitPosition.offset}t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e);t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e);return[t]});XO(Zg,tm,(t,e)=>{const i=$h._createFromPositionAndShift(t.sourcePosition,t.howMany);const n=i._getTransformedByInsertOperation(e,false)[0];t.sourcePosition=n.start;t.howMany=n.end.offset-n.start.offset;if(!t.targetPosition.isEqual(e.position)){t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)}return[t]});XO(Zg,Zg,(t,e,i)=>{const n=$h._createFromPositionAndShift(t.sourcePosition,t.howMany);const o=$h._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=i.aIsStrong;let s=!i.aIsStrong;if(i.abRelation=="insertBefore"||i.baRelation=="insertAfter"){s=true}else if(i.abRelation=="insertAfter"||i.baRelation=="insertBefore"){s=false}let a;if(t.targetPosition.isEqual(e.targetPosition)&&s){a=t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}else{a=t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}if(cI(t,e)&&cI(e,t)){return[e.getReversed()]}const c=n.containsPosition(e.targetPosition);if(c&&n.containsRange(o,true)){n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);return lI([n],a)}const l=o.containsPosition(t.targetPosition);if(l&&o.containsRange(n,true)){n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart());n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart());return lI([n],a)}const d=Vs(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(d=="prefix"||d=="extension"){n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);return lI([n],a)}if(t.type=="remove"&&e.type!="remove"&&!i.aWasUndone&&!i.forceWeakRemove){r=true}else if(t.type!="remove"&&e.type=="remove"&&!i.bWasUndone&&!i.forceWeakRemove){r=false}const u=[];const h=n.getDifference(o);for(const t of h){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany);t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const i=Vs(t.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same";const n=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,i);u.push(...n)}const f=n.getIntersection(o);if(f!==null&&r){f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart());f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart());if(u.length===0){u.push(f)}else if(u.length==1){if(o.start.isBefore(n.start)||o.start.isEqual(n.start)){u.unshift(f)}else{u.push(f)}}else{u.splice(1,0,f)}}if(u.length===0){return[new Sm(t.baseVersion)]}return lI(u,a)});XO(Zg,rm,(t,e,i)=>{let n=t.targetPosition.clone();if(!t.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||i.abRelation=="moveTargetAfter"){n=t.targetPosition._getTransformedBySplitOperation(e)}const o=$h._createFromPositionAndShift(t.sourcePosition,t.howMany);if(o.end.isEqual(e.insertionPosition)){if(!e.graveyardPosition){t.howMany++}t.targetPosition=n;return[t]}if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let t=new $h(e.splitPosition,o.end);t=t._getTransformedBySplitOperation(e);const i=[new $h(o.start,e.splitPosition),t];return lI(i,n)}if(t.targetPosition.isEqual(e.splitPosition)&&i.abRelation=="insertAtSource"){n=e.moveTargetPosition}if(t.targetPosition.isEqual(e.insertionPosition)&&i.abRelation=="insertBetween"){n=t.targetPosition}const r=o._getTransformedBySplitOperation(e);const s=[r];if(e.graveyardPosition){const n=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);if(t.howMany>1&&n&&!i.aWasUndone){s.push($h._createFromPositionAndShift(e.insertionPosition,1))}}return lI(s,n)});XO(Zg,om,(t,e,i)=>{const n=$h._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition)){if(t.type=="remove"&&!i.forceWeakRemove){if(!i.aWasUndone){const i=[];let n=e.graveyardPosition.clone();let o=e.targetPosition._getTransformedByMergeOperation(e);if(t.howMany>1){i.push(new Zg(t.sourcePosition,t.howMany-1,t.targetPosition,0));n=n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1);o=o._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1)}const r=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition);const s=new Zg(n,1,r,0);const a=s.getMovedRangeStart().path.slice();a.push(0);const c=new Uh(s.targetPosition.root,a);o=o._getTransformedByMove(n,r,1);const l=new Zg(o,e.howMany,c,0);i.push(s);i.push(l);return i}}else{if(t.howMany==1){if(!i.bWasUndone){return[new Sm(0)]}else{t.sourcePosition=e.graveyardPosition.clone();t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e);return[t]}}}}const o=$h._createFromPositionAndShift(t.sourcePosition,t.howMany);const r=o._getTransformedByMergeOperation(e);t.sourcePosition=r.start;t.howMany=r.end.offset-r.start.offset;t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e);return[t]});XO(im,tm,(t,e)=>{t.position=t.position._getTransformedByInsertOperation(e);return[t]});XO(im,om,(t,e)=>{if(t.position.isEqual(e.deletionPosition)){t.position=e.graveyardPosition.clone();t.position.stickiness="toNext";return[t]}t.position=t.position._getTransformedByMergeOperation(e);return[t]});XO(im,Zg,(t,e)=>{t.position=t.position._getTransformedByMoveOperation(e);return[t]});XO(im,im,(t,e,i)=>{if(t.position.isEqual(e.position)){if(i.aIsStrong){t.oldName=e.newName}else{return[new Sm(0)]}}return[t]});XO(im,rm,(t,e)=>{const i=t.position.path;const n=e.splitPosition.getParentPath();if(Vs(i,n)=="same"&&!e.graveyardPosition){const e=new im(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}t.position=t.position._getTransformedBySplitOperation(e);return[t]});XO(nm,nm,(t,e,i)=>{if(t.root===e.root&&t.key===e.key){if(!i.aIsStrong||t.newValue===e.newValue){return[new Sm(0)]}else{t.oldValue=e.newValue}}return[t]});XO(rm,tm,(t,e)=>{if(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset){t.howMany+=e.howMany}t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e);t.insertionPosition=rm.getInsertionPosition(t.splitPosition);return[t]});XO(rm,om,(t,e,i)=>{if(!t.graveyardPosition&&!i.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const n=new Uh(e.graveyardPosition.root,i);const o=rm.getInsertionPosition(new Uh(e.graveyardPosition.root,i));const r=new rm(n,0,null,0);r.insertionPosition=o;t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e);t.insertionPosition=rm.getInsertionPosition(t.splitPosition);t.graveyardPosition=r.insertionPosition.clone();t.graveyardPosition.stickiness="toNext";return[r,t]}if(t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)){t.howMany--}if(t.splitPosition.hasSameParentAs(e.targetPosition)){t.howMany+=e.howMany}t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e);t.insertionPosition=rm.getInsertionPosition(t.splitPosition);if(t.graveyardPosition){t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)}return[t]});XO(rm,Zg,(t,e,i)=>{const n=$h._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const o=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!i.bWasUndone&&o){const i=t.splitPosition._getTransformedByMoveOperation(e);const n=t.graveyardPosition._getTransformedByMoveOperation(e);const o=n.path.slice();o.push(0);const r=new Uh(n.root,o);const s=new Zg(i,t.howMany,r,0);return[s]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const i=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);t.howMany-=i;if(t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset){t.howMany+=e.howMany}t.splitPosition=e.sourcePosition.clone();t.insertionPosition=rm.getInsertionPosition(t.splitPosition);return[t]}const o=t.splitPosition.isEqual(e.targetPosition);if(o&&(i.baRelation=="insertAtSource"||i.abRelation=="splitBefore")){t.howMany+=e.howMany;t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany);t.insertionPosition=rm.getInsertionPosition(t.splitPosition);return[t]}if(!e.sourcePosition.isEqual(e.targetPosition)){if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset){t.howMany-=e.howMany}if(t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset){t.howMany+=e.howMany}}t.splitPosition.stickiness="toNone";t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e);t.splitPosition.stickiness="toNext";if(t.graveyardPosition){t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e)}else{t.insertionPosition=rm.getInsertionPosition(t.splitPosition)}return[t]});XO(rm,rm,(t,e,i)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition){return[new Sm(0)]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){return[new Sm(0)]}if(i.abRelation=="splitBefore"){t.howMany=0;t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e);return[t]}}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const n=t.splitPosition.root.rootName=="$graveyard";const o=e.splitPosition.root.rootName=="$graveyard";const r=n&&!o;const s=o&&!n;const a=s||!r&&i.aIsStrong;if(a){const i=[];if(e.howMany){i.push(new Zg(e.moveTargetPosition,e.howMany,e.splitPosition,0))}if(t.howMany){i.push(new Zg(t.splitPosition,t.howMany,t.moveTargetPosition,0))}return i}else{return[new Sm(0)]}}if(t.graveyardPosition){t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)}if(t.splitPosition.isEqual(e.insertionPosition)&&i.abRelation=="splitBefore"){t.howMany++;return[t]}if(e.splitPosition.isEqual(t.insertionPosition)&&i.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const n=new Uh(e.insertionPosition.root,i);const o=new Zg(t.insertionPosition,1,n,0);return[t,o]}if(t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset){t.howMany-=e.howMany}t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e);t.insertionPosition=rm.getInsertionPosition(t.splitPosition);return[t]});function cI(t,e){return t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function lI(t,e){const i=[];for(let n=0;n<t.length;n++){const o=t[n];const r=new Zg(o.start,o.end.offset-o.start.offset,e,0);i.push(r);for(let e=n+1;e<t.length;e++){t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0]}e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return i}class dI extends jw{constructor(t){super(t);this._stack=[];this._createdBatches=new WeakSet;this.refresh()}refresh(){this.isEnabled=this._stack.length>0}addBatch(t){const e=this.editor.model.document.selection;const i={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:i});this.refresh()}clearStack(){this._stack=[];this.refresh()}_restoreSelection(t,e,i){const n=this.editor.model;const o=n.document;const r=[];for(const e of t){const t=uI(e,i);const n=t.find(t=>t.start.root!=o.graveyard);if(n){r.push(n)}}if(r.length){n.change(t=>{t.setSelection(r,{backward:e})})}}_undo(t,e){const i=this.editor.model;const n=i.document;this._createdBatches.add(e);const o=t.operations.slice().filter(t=>t.isDocumentOperation);o.reverse();for(const t of o){const o=t.baseVersion+1;const r=Array.from(n.history.getOperations(o));const s=iI([t.getReversed()],r,{useRelations:true,document:this.editor.model.document,padWithNoOps:false,forceWeakRemove:true});const a=s.operationsA;for(const o of a){e.addOperation(o);i.applyOperation(o);n.history.setOperationAsUndone(t,o)}}}}function uI(t,e){const i=t.getTransformedByOperations(e);i.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<i.length;t++){const e=i[t-1];const n=i[t];if(e.end.isTouching(n.start)){e.end=n.end;i.splice(t,1);t--}}return i}class hI extends dI{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1;const i=this._stack.splice(e,1)[0];const n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,()=>{this._undo(i.batch,n);const t=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,t);this.fire("revert",i.batch,n)});this.refresh()}}class fI extends dI{execute(){const t=this._stack.pop();const e=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(e,()=>{const i=t.batch.operations[t.batch.operations.length-1];const n=i.baseVersion+1;const o=this.editor.model.document.history.getOperations(n);this._restoreSelection(t.selection.ranges,t.selection.isBackward,o);this._undo(t.batch,e)});this.refresh()}}class gI extends mp{static get pluginName(){return"UndoEditing"}constructor(t){super(t);this._batchRegistry=new WeakSet}init(){const t=this.editor;this._undoCommand=new hI(t);this._redoCommand=new fI(t);t.commands.add("undo",this._undoCommand);t.commands.add("redo",this._redoCommand);this.listenTo(t.model,"applyOperation",(t,e)=>{const i=e[0];if(!i.isDocumentOperation){return}const n=i.batch;const o=this._redoCommand._createdBatches.has(n);const r=this._undoCommand._createdBatches.has(n);const s=this._batchRegistry.has(n);if(s||n.type=="transparent"&&!o&&!r){return}else{if(o){this._undoCommand.addBatch(n)}else if(!r){this._undoCommand.addBatch(n);this._redoCommand.clearStack()}}this._batchRegistry.add(n)},{priority:"highest"});this.listenTo(this._undoCommand,"revert",(t,e,i)=>{this._redoCommand.addBatch(i)});t.keystrokes.set("CTRL+Z","undo");t.keystrokes.set("CTRL+Y","redo");t.keystrokes.set("CTRL+SHIFT+Z","redo")}}var mI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>';var pI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class bI extends mp{init(){const t=this.editor;const e=t.locale;const i=t.t;const n=e.uiLanguageDirection=="ltr"?mI:pI;const o=e.uiLanguageDirection=="ltr"?pI:mI;this._addButton("undo",i("mo"),"CTRL+Z",n);this._addButton("redo",i("mp"),"CTRL+Y",o)}_addButton(t,e,i,n){const o=this.editor;o.ui.componentFactory.add(t,r=>{const s=o.commands.get(t);const a=new hb(r);a.set({label:e,icon:n,keystroke:i,tooltip:true});a.bind("isEnabled").to(s,"isEnabled");this.listenTo(a,"execute",()=>{o.execute(t);o.editing.view.focus()});return a})}}class wI extends mp{static get requires(){return[gI,bI]}static get pluginName(){return"Undo"}}class kI extends mp{static get requires(){return[Rx,qO,YO,cP,wI]}static get pluginName(){return"Essentials"}}class _I extends Fw{}_I.builtinPlugins=[rk,uk,vk,Sk,r_,p_,A_,R_,W_,bv,cy,fy,Ry,Ky,zx,Wx,vC,PC,tT,zT,WT,wP,CP,vP,kP,yP,_P,xP,RP,BP,HP,DE,lO,dO,IO,LO,kI,V_]}])["default"]}));

},{"../../ru":2}],2:[function(require,module,exports){
module.exports =  {
    a: "Image toolbar",
    b: "",
    c: "leftwards double arrow",
    d: "rightwards double arrow",
    e: "upwards double arrow",
    f: "downwards double arrow",
    g: "leftwards dashed arrow",
    h: "rightwards dashed arrow",
    i: "upwards dashed arrow",
    j: "downwards dashed arrow",
    k: "leftwards arrow to bar",
    l: "rightwards arrow to bar",
    m: "upwards arrow to bar",
    n: "downwards arrow to bar",
    o: "up down arrow with base",
    p: "back with leftwards arrow above",
    q: "end with leftwards arrow above",
    r: "on with exclamation mark with left right arrow above",
    s: "soon with rightwards arrow above",
    t: "top with upwards arrow above",
    u: "Dollar sign",
    v: "Euro sign",
    w: "Yen sign",
    x: "Pound sign",
    y: "Cent sign",
    z: "Euro-currency sign",
    aa: "Colon sign",
    ab: "Cruzeiro sign",
    ac: "French franc sign",
    ad: "Lira sign",
    ae: "Currency sign",
    af: "Bitcoin sign",
    ag: "Mill sign",
    ah: "Naira sign",
    ai: "Peseta sign",
    aj: "Rupee sign",
    ak: "Won sign",
    al: "New sheqel sign",
    am: "Dong sign",
    an: "Kip sign",
    ao: "Tugrik sign",
    ap: "Drachma sign",
    aq: "German penny sign",
    ar: "Peso sign",
    as: "Guarani sign",
    at: "Austral sign",
    au: "Hryvnia sign",
    av: "Cedi sign",
    aw: "Livre tournois sign",
    ax: "Spesmilo sign",
    ay: "Tenge sign",
    az: "Indian rupee sign",
    ba: "Turkish lira sign",
    bb: "Nordic mark sign",
    bc: "Manat sign",
    bd: "Ruble sign",
    be: "Latin capital letter a with macron",
    bf: "Latin small letter a with macron",
    bg: "Latin capital letter a with breve",
    bh: "Latin small letter a with breve",
    bi: "Latin capital letter a with ogonek",
    bj: "Latin small letter a with ogonek",
    bk: "Latin capital letter c with acute",
    bl: "Latin small letter c with acute",
    bm: "Latin capital letter c with circumflex",
    bn: "Latin small letter c with circumflex",
    bo: "Latin capital letter c with dot above",
    bp: "Latin small letter c with dot above",
    bq: "Latin capital letter c with caron",
    br: "Latin small letter c with caron",
    bs: "Latin capital letter d with caron",
    bt: "Latin small letter d with caron",
    bu: "Latin capital letter d with stroke",
    bv: "Latin small letter d with stroke",
    bw: "Latin capital letter e with macron",
    bx: "Latin small letter e with macron",
    by: "Latin capital letter e with breve",
    bz: "Latin small letter e with breve",
    ca: "Latin capital letter e with dot above",
    cb: "Latin small letter e with dot above",
    cc: "Latin capital letter e with ogonek",
    cd: "Latin small letter e with ogonek",
    ce: "Latin capital letter e with caron",
    cf: "Latin small letter e with caron",
    cg: "Latin capital letter g with circumflex",
    ch: "Latin small letter g with circumflex",
    ci: "Latin capital letter g with breve",
    cj: "Latin small letter g with breve",
    ck: "Latin capital letter g with dot above",
    cl: "Latin small letter g with dot above",
    cm: "Latin capital letter g with cedilla",
    cn: "Latin small letter g with cedilla",
    co: "Latin capital letter h with circumflex",
    cp: "Latin small letter h with circumflex",
    cq: "Latin capital letter h with stroke",
    cr: "Latin small letter h with stroke",
    cs: "Latin capital letter i with tilde",
    ct: "Latin small letter i with tilde",
    cu: "Latin capital letter i with macron",
    cv: "Latin small letter i with macron",
    cw: "Latin capital letter i with breve",
    cx: "Latin small letter i with breve",
    cy: "Latin capital letter i with ogonek",
    cz: "Latin small letter i with ogonek",
    da: "Latin capital letter i with dot above",
    db: "Latin small letter dotless i",
    dc: "Latin capital ligature ij",
    dd: "Latin small ligature ij",
    de: "Latin capital letter j with circumflex",
    df: "Latin small letter j with circumflex",
    dg: "Latin capital letter k with cedilla",
    dh: "Latin small letter k with cedilla",
    di: "Latin small letter kra",
    dj: "Latin capital letter l with acute",
    dk: "Latin small letter l with acute",
    dl: "Latin capital letter l with cedilla",
    dm: "Latin small letter l with cedilla",
    dn: "Latin capital letter l with caron",
    do: "Latin small letter l with caron",
    dp: "Latin capital letter l with middle dot",
    dq: "Latin small letter l with middle dot",
    dr: "Latin capital letter l with stroke",
    ds: "Latin small letter l with stroke",
    dt: "Latin capital letter n with acute",
    du: "Latin small letter n with acute",
    dv: "Latin capital letter n with cedilla",
    dw: "Latin small letter n with cedilla",
    dx: "Latin capital letter n with caron",
    dy: "Latin small letter n with caron",
    dz: "Latin small letter n preceded by apostrophe",
    ea: "Latin capital letter eng",
    eb: "Latin small letter eng",
    ec: "Latin capital letter o with macron",
    ed: "Latin small letter o with macron",
    ee: "Latin capital letter o with breve",
    ef: "Latin small letter o with breve",
    eg: "Latin capital letter o with double acute",
    eh: "Latin small letter o with double acute",
    ei: "Latin capital ligature oe",
    ej: "Latin small ligature oe",
    ek: "Latin capital letter r with acute",
    el: "Latin small letter r with acute",
    em: "Latin capital letter r with cedilla",
    en: "Latin small letter r with cedilla",
    eo: "Latin capital letter r with caron",
    ep: "Latin small letter r with caron",
    eq: "Latin capital letter s with acute",
    er: "Latin small letter s with acute",
    es: "Latin capital letter s with circumflex",
    et: "Latin small letter s with circumflex",
    eu: "Latin capital letter s with cedilla",
    ev: "Latin small letter s with cedilla",
    ew: "Latin capital letter s with caron",
    ex: "Latin small letter s with caron",
    ey: "Latin capital letter t with cedilla",
    ez: "Latin small letter t with cedilla",
    fa: "Latin capital letter t with caron",
    fb: "Latin small letter t with caron",
    fc: "Latin capital letter t with stroke",
    fd: "Latin small letter t with stroke",
    fe: "Latin capital letter u with tilde",
    ff: "Latin small letter u with tilde",
    fg: "Latin capital letter u with macron",
    fh: "Latin small letter u with macron",
    fi: "Latin capital letter u with breve",
    fj: "Latin small letter u with breve",
    fk: "Latin capital letter u with ring above",
    fl: "Latin small letter u with ring above",
    fm: "Latin capital letter u with double acute",
    fn: "Latin small letter u with double acute",
    fo: "Latin capital letter u with ogonek",
    fp: "Latin small letter u with ogonek",
    fq: "Latin capital letter w with circumflex",
    fr: "Latin small letter w with circumflex",
    fs: "Latin capital letter y with circumflex",
    ft: "Latin small letter y with circumflex",
    fu: "Latin capital letter y with diaeresis",
    fv: "Latin capital letter z with acute",
    fw: "Latin small letter z with acute",
    fx: "Latin capital letter z with dot above",
    fy: "Latin small letter z with dot above",
    fz: "Latin capital letter z with caron",
    ga: "Latin small letter z with caron",
    gb: "Latin small letter long s",
    gc: "Less-than sign",
    gd: "Greater-than sign",
    ge: "Less-than or equal to",
    gf: "Greater-than or equal to",
    gg: "En dash",
    gh: "Em dash",
    gi: "Macron",
    gj: "Overline",
    gk: "Degree sign",
    gl: "Minus sign",
    gm: "Plus-minus sign",
    gn: "Division sign",
    go: "Fraction slash",
    gp: "Multiplication sign",
    gq: "Latin small letter f with hook",
    gr: "Integral",
    gs: "N-ary summation",
    gt: "Infinity",
    gu: "Square root",
    gv: "Tilde operator",
    gw: "Approximately equal to",
    gx: "Almost equal to",
    gy: "Not equal to",
    gz: "Identical to",
    ha: "Element of",
    hb: "Not an element of",
    hc: "Contains as member",
    hd: "N-ary product",
    he: "Logical and",
    hf: "Logical or",
    hg: "Not sign",
    hh: "Intersection",
    hi: "Union",
    hj: "Partial differential",
    hk: "For all",
    hl: "There exists",
    hm: "Empty set",
    hn: "Nabla",
    ho: "Asterisk operator",
    hp: "Proportional to",
    hq: "Angle",
    hr: "Vulgar fraction one quarter",
    hs: "Vulgar fraction one half",
    ht: "Vulgar fraction three quarters",
    hu: "Single left-pointing angle quotation mark",
    hv: "Single right-pointing angle quotation mark",
    hw: "Left-pointing double angle quotation mark",
    hx: "Right-pointing double angle quotation mark",
    hy: "Left single quotation mark",
    hz: "Right single quotation mark",
    ia: "Left double quotation mark",
    ib: "Right double quotation mark",
    ic: "Single low-9 quotation mark",
    id: "Double low-9 quotation mark",
    ie: "Inverted exclamation mark",
    if: "Inverted question mark",
    ig: "Two dot leader",
    ih: "Horizontal ellipsis",
    ii: "Double dagger",
    ij: "Per mille sign",
    ik: "Per ten thousand sign",
    il: "Double exclamation mark",
    im: "Question exclamation mark",
    in: "Exclamation question mark",
    io: "Double question mark",
    ip: "Copyright sign",
    iq: "Registered sign",
    ir: "Trade mark sign",
    is: "Section sign",
    it: "Paragraph sign",
    iu: "Reversed paragraph sign",
    iv: "Table toolbar",
    iw: "   ",
    ix: "   ",
    iy: "  ",
    iz: "  ",
    ja: " ",
    jb: "",
    jc: "",
    jd: " ",
    je: "",
    jf: " ",
    jg: " ",
    jh: " ",
    ji: "",
    jj: "",
    jk: "",
    jl: "",
    jm: "",
    jn: "",
    jo: " ",
    jp: " ",
    jq: " ",
    jr: " ",
    js: "",
    jt: "",
    ju: " ",
    jv: " ",
    jw: " ",
    jx: " ",
    jy: "  ",
    jz: " ",
    ka: "   ",
    kb: "  ",
    kc: "   ",
    kd: " ",
    ke: "  ",
    kf: "Widget toolbar",
    kg: " ",
    kh: " ",
    ki: " ",
    kj: " ",
    kk: "  ",
    kl: "  ",
    km: " ",
    kn: "",
    ko: " ",
    kp: "  ",
    kq: "  ",
    kr: " ",
    ks: "",
    kt: "   ",
    ku: "   ",
    kv: "   ",
    kw: "   ",
    kx: "  ",
    ky: "  ",
    kz: " ",
    la: " ",
    lb: " ",
    lc: " ",
    ld: " ",
    le: "Character categories",
    lf: "",
    lg: "Dropdown toolbar",
    lh: "  ",
    li: " ",
    lj: " ",
    lk: " ",
    ll: " ",
    lm: "    ",
    ln: "      URL",
    lo: "",
    lp: "",
    lq: " URL",
    lr: "Editor toolbar",
    ls: " ",
    lt: " ",
    lu: "%0 of %1",
    lv: "Previous",
    lw: "Next",
    lx: "",
    ly: "-",
    lz: "",
    ma: "-",
    mb: "",
    mc: "",
    md: "",
    me: "",
    mf: "",
    mg: "",
    mh: "",
    mi: "",
    mj: "",
    mk: "",
    ml: "",
    mm: "Open in a new tab",
    mn: "Downloadable",
    mo: "",
    mp: "",
    mq: "",
    mr: "",
    ms: "",
    mt: "",
    mu: "",
    mv: "Groove",
    mw: "Ridge",
    mx: "Inset",
    my: "Outset",
    mz: 'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".',
    na: 'The value is invalid. Try "10px" or "2em" or simply "2".',
    nb: "",
    nc: "",
    nd: "",
    ne: "",
    nf: " ",
    ng: "",
    nh: "",
    ni: "",
    nj: "  ",
    nk: "Horizontal text alignment toolbar",
    nl: "Vertical text alignment toolbar",
    nm: "Align cell text to the left",
    nn: "Align cell text to the center",
    no: "Align cell text to the right",
    np: "Justify cell text",
    nq: "Align cell text to the top",
    nr: "Align cell text to the middle",
    ns: "Align cell text to the bottom",
    nt: "",
    nu: "",
    nv: "  ",
    nw: " ",
    nx: "  ",
    ny: "",
    nz: " 1",
    oa: " 2",
    ob: " 3",
    oc: " 4",
    od: " 5",
    oe: " 6",
    of: ", %0"
};
},{}],3:[function(require,module,exports){
var css = ".container,\n.container-fluid {\n  margin-right: auto;\n  margin-left: auto;\n}\n.container-fluid {\n  padding-right: 2rem;\n  padding-left: 2rem;\n}\n.row {\n  box-sizing: border-box;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 0;\n  -ms-flex: 0 1 auto;\n  flex: 0 1 auto;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  margin-right: -.5rem;\n  margin-left: -.5rem;\n}\n.row.reverse {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n  -ms-flex-direction: row-reverse;\n  flex-direction: row-reverse;\n}\n.col.reverse {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n  -ms-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n}\n.col-xs,\n.col-xs-1,\n.col-xs-10,\n.col-xs-11,\n.col-xs-12,\n.col-xs-2,\n.col-xs-3,\n.col-xs-4,\n.col-xs-5,\n.col-xs-6,\n.col-xs-7,\n.col-xs-8,\n.col-xs-9,\n.col-xs-offset-0,\n.col-xs-offset-1,\n.col-xs-offset-10,\n.col-xs-offset-11,\n.col-xs-offset-12,\n.col-xs-offset-2,\n.col-xs-offset-3,\n.col-xs-offset-4,\n.col-xs-offset-5,\n.col-xs-offset-6,\n.col-xs-offset-7,\n.col-xs-offset-8,\n.col-xs-offset-9 {\n  box-sizing: border-box;\n  -webkit-box-flex: 0;\n  -ms-flex: 0 0 auto;\n  flex: 0 0 auto;\n  padding-right: .5rem;\n  padding-left: .5rem;\n}\n.col-xs {\n  -webkit-box-flex: 1;\n  -ms-flex-positive: 1;\n  flex-grow: 1;\n  -ms-flex-preferred-size: 0;\n  flex-basis: 0;\n  max-width: 100%;\n}\n.col-xs-1 {\n  -ms-flex-preferred-size: 8.33333333%;\n  flex-basis: 8.33333333%;\n  max-width: 8.33333333%;\n}\n.col-xs-2 {\n  -ms-flex-preferred-size: 16.66666667%;\n  flex-basis: 16.66666667%;\n  max-width: 16.66666667%;\n}\n.col-xs-3 {\n  -ms-flex-preferred-size: 25%;\n  flex-basis: 25%;\n  max-width: 25%;\n}\n.col-xs-4 {\n  -ms-flex-preferred-size: 33.33333333%;\n  flex-basis: 33.33333333%;\n  max-width: 33.33333333%;\n}\n.col-xs-5 {\n  -ms-flex-preferred-size: 41.66666667%;\n  flex-basis: 41.66666667%;\n  max-width: 41.66666667%;\n}\n.col-xs-6 {\n  -ms-flex-preferred-size: 50%;\n  flex-basis: 50%;\n  max-width: 50%;\n}\n.col-xs-7 {\n  -ms-flex-preferred-size: 58.33333333%;\n  flex-basis: 58.33333333%;\n  max-width: 58.33333333%;\n}\n.col-xs-8 {\n  -ms-flex-preferred-size: 66.66666667%;\n  flex-basis: 66.66666667%;\n  max-width: 66.66666667%;\n}\n.col-xs-9 {\n  -ms-flex-preferred-size: 75%;\n  flex-basis: 75%;\n  max-width: 75%;\n}\n.col-xs-10 {\n  -ms-flex-preferred-size: 83.33333333%;\n  flex-basis: 83.33333333%;\n  max-width: 83.33333333%;\n}\n.col-xs-11 {\n  -ms-flex-preferred-size: 91.66666667%;\n  flex-basis: 91.66666667%;\n  max-width: 91.66666667%;\n}\n.col-xs-12 {\n  -ms-flex-preferred-size: 100%;\n  flex-basis: 100%;\n  max-width: 100%;\n}\n.col-xs-offset-0 {\n  margin-left: 0;\n}\n.col-xs-offset-1 {\n  margin-left: 8.33333333%;\n}\n.col-xs-offset-2 {\n  margin-left: 16.66666667%;\n}\n.col-xs-offset-3 {\n  margin-left: 25%;\n}\n.col-xs-offset-4 {\n  margin-left: 33.33333333%;\n}\n.col-xs-offset-5 {\n  margin-left: 41.66666667%;\n}\n.col-xs-offset-6 {\n  margin-left: 50%;\n}\n.col-xs-offset-7 {\n  margin-left: 58.33333333%;\n}\n.col-xs-offset-8 {\n  margin-left: 66.66666667%;\n}\n.col-xs-offset-9 {\n  margin-left: 75%;\n}\n.col-xs-offset-10 {\n  margin-left: 83.33333333%;\n}\n.col-xs-offset-11 {\n  margin-left: 91.66666667%;\n}\n.start-xs {\n  -webkit-box-pack: start;\n  -ms-flex-pack: start;\n  justify-content: flex-start;\n  text-align: start;\n}\n.center-xs {\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n}\n.end-xs {\n  -webkit-box-pack: end;\n  -ms-flex-pack: end;\n  justify-content: flex-end;\n  text-align: end;\n}\n.top-xs {\n  -webkit-box-align: start;\n  -ms-flex-align: start;\n  align-items: flex-start;\n}\n.middle-xs {\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.bottom-xs {\n  -webkit-box-align: end;\n  -ms-flex-align: end;\n  align-items: flex-end;\n}\n.around-xs {\n  -ms-flex-pack: distribute;\n  justify-content: space-around;\n}\n.between-xs {\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n}\n.first-xs {\n  -webkit-box-ordinal-group: 0;\n  -ms-flex-order: -1;\n  order: -1;\n}\n.last-xs {\n  -webkit-box-ordinal-group: 2;\n  -ms-flex-order: 1;\n  order: 1;\n}\n@media only screen and (min-width:48em) {\n  .container {\n    width: 49rem;\n  }\n\n  .col-sm,\n  .col-sm-1,\n  .col-sm-10,\n  .col-sm-11,\n  .col-sm-12,\n  .col-sm-2,\n  .col-sm-3,\n  .col-sm-4,\n  .col-sm-5,\n  .col-sm-6,\n  .col-sm-7,\n  .col-sm-8,\n  .col-sm-9,\n  .col-sm-offset-0,\n  .col-sm-offset-1,\n  .col-sm-offset-10,\n  .col-sm-offset-11,\n  .col-sm-offset-12,\n  .col-sm-offset-2,\n  .col-sm-offset-3,\n  .col-sm-offset-4,\n  .col-sm-offset-5,\n  .col-sm-offset-6,\n  .col-sm-offset-7,\n  .col-sm-offset-8,\n  .col-sm-offset-9 {\n    box-sizing: border-box;\n    -webkit-box-flex: 0;\n    -ms-flex: 0 0 auto;\n    flex: 0 0 auto;\n    padding-right: .5rem;\n    padding-left: .5rem;\n  }\n\n  .col-sm {\n    -webkit-box-flex: 1;\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n    -ms-flex-preferred-size: 0;\n    flex-basis: 0;\n    max-width: 100%;\n  }\n\n  .col-sm-1 {\n    -ms-flex-preferred-size: 8.33333333%;\n    flex-basis: 8.33333333%;\n    max-width: 8.33333333%;\n  }\n\n  .col-sm-2 {\n    -ms-flex-preferred-size: 16.66666667%;\n    flex-basis: 16.66666667%;\n    max-width: 16.66666667%;\n  }\n\n  .col-sm-3 {\n    -ms-flex-preferred-size: 25%;\n    flex-basis: 25%;\n    max-width: 25%;\n  }\n\n  .col-sm-4 {\n    -ms-flex-preferred-size: 33.33333333%;\n    flex-basis: 33.33333333%;\n    max-width: 33.33333333%;\n  }\n\n  .col-sm-5 {\n    -ms-flex-preferred-size: 41.66666667%;\n    flex-basis: 41.66666667%;\n    max-width: 41.66666667%;\n  }\n\n  .col-sm-6 {\n    -ms-flex-preferred-size: 50%;\n    flex-basis: 50%;\n    max-width: 50%;\n  }\n\n  .col-sm-7 {\n    -ms-flex-preferred-size: 58.33333333%;\n    flex-basis: 58.33333333%;\n    max-width: 58.33333333%;\n  }\n\n  .col-sm-8 {\n    -ms-flex-preferred-size: 66.66666667%;\n    flex-basis: 66.66666667%;\n    max-width: 66.66666667%;\n  }\n\n  .col-sm-9 {\n    -ms-flex-preferred-size: 75%;\n    flex-basis: 75%;\n    max-width: 75%;\n  }\n\n  .col-sm-10 {\n    -ms-flex-preferred-size: 83.33333333%;\n    flex-basis: 83.33333333%;\n    max-width: 83.33333333%;\n  }\n\n  .col-sm-11 {\n    -ms-flex-preferred-size: 91.66666667%;\n    flex-basis: 91.66666667%;\n    max-width: 91.66666667%;\n  }\n\n  .col-sm-12 {\n    -ms-flex-preferred-size: 100%;\n    flex-basis: 100%;\n    max-width: 100%;\n  }\n\n  .col-sm-offset-0 {\n    margin-left: 0;\n  }\n\n  .col-sm-offset-1 {\n    margin-left: 8.33333333%;\n  }\n\n  .col-sm-offset-2 {\n    margin-left: 16.66666667%;\n  }\n\n  .col-sm-offset-3 {\n    margin-left: 25%;\n  }\n\n  .col-sm-offset-4 {\n    margin-left: 33.33333333%;\n  }\n\n  .col-sm-offset-5 {\n    margin-left: 41.66666667%;\n  }\n\n  .col-sm-offset-6 {\n    margin-left: 50%;\n  }\n\n  .col-sm-offset-7 {\n    margin-left: 58.33333333%;\n  }\n\n  .col-sm-offset-8 {\n    margin-left: 66.66666667%;\n  }\n\n  .col-sm-offset-9 {\n    margin-left: 75%;\n  }\n\n  .col-sm-offset-10 {\n    margin-left: 83.33333333%;\n  }\n\n  .col-sm-offset-11 {\n    margin-left: 91.66666667%;\n  }\n\n  .start-sm {\n    -webkit-box-pack: start;\n    -ms-flex-pack: start;\n    justify-content: flex-start;\n    text-align: start;\n  }\n\n  .center-sm {\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    justify-content: center;\n    text-align: center;\n  }\n\n  .end-sm {\n    -webkit-box-pack: end;\n    -ms-flex-pack: end;\n    justify-content: flex-end;\n    text-align: end;\n  }\n\n  .top-sm {\n    -webkit-box-align: start;\n    -ms-flex-align: start;\n    align-items: flex-start;\n  }\n\n  .middle-sm {\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  .bottom-sm {\n    -webkit-box-align: end;\n    -ms-flex-align: end;\n    align-items: flex-end;\n  }\n\n  .around-sm {\n    -ms-flex-pack: distribute;\n    justify-content: space-around;\n  }\n\n  .between-sm {\n    -webkit-box-pack: justify;\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n  }\n\n  .first-sm {\n    -webkit-box-ordinal-group: 0;\n    -ms-flex-order: -1;\n    order: -1;\n  }\n\n  .last-sm {\n    -webkit-box-ordinal-group: 2;\n    -ms-flex-order: 1;\n    order: 1;\n  }\n}\n@media only screen and (min-width:64em) {\n  .container {\n    width: 65rem;\n  }\n\n  .col-md,\n  .col-md-1,\n  .col-md-10,\n  .col-md-11,\n  .col-md-12,\n  .col-md-2,\n  .col-md-3,\n  .col-md-4,\n  .col-md-5,\n  .col-md-6,\n  .col-md-7,\n  .col-md-8,\n  .col-md-9,\n  .col-md-offset-0,\n  .col-md-offset-1,\n  .col-md-offset-10,\n  .col-md-offset-11,\n  .col-md-offset-12,\n  .col-md-offset-2,\n  .col-md-offset-3,\n  .col-md-offset-4,\n  .col-md-offset-5,\n  .col-md-offset-6,\n  .col-md-offset-7,\n  .col-md-offset-8,\n  .col-md-offset-9 {\n    box-sizing: border-box;\n    -webkit-box-flex: 0;\n    -ms-flex: 0 0 auto;\n    flex: 0 0 auto;\n    padding-right: .5rem;\n    padding-left: .5rem;\n  }\n\n  .col-md {\n    -webkit-box-flex: 1;\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n    -ms-flex-preferred-size: 0;\n    flex-basis: 0;\n    max-width: 100%;\n  }\n\n  .col-md-1 {\n    -ms-flex-preferred-size: 8.33333333%;\n    flex-basis: 8.33333333%;\n    max-width: 8.33333333%;\n  }\n\n  .col-md-2 {\n    -ms-flex-preferred-size: 16.66666667%;\n    flex-basis: 16.66666667%;\n    max-width: 16.66666667%;\n  }\n\n  .col-md-3 {\n    -ms-flex-preferred-size: 25%;\n    flex-basis: 25%;\n    max-width: 25%;\n  }\n\n  .col-md-4 {\n    -ms-flex-preferred-size: 33.33333333%;\n    flex-basis: 33.33333333%;\n    max-width: 33.33333333%;\n  }\n\n  .col-md-5 {\n    -ms-flex-preferred-size: 41.66666667%;\n    flex-basis: 41.66666667%;\n    max-width: 41.66666667%;\n  }\n\n  .col-md-6 {\n    -ms-flex-preferred-size: 50%;\n    flex-basis: 50%;\n    max-width: 50%;\n  }\n\n  .col-md-7 {\n    -ms-flex-preferred-size: 58.33333333%;\n    flex-basis: 58.33333333%;\n    max-width: 58.33333333%;\n  }\n\n  .col-md-8 {\n    -ms-flex-preferred-size: 66.66666667%;\n    flex-basis: 66.66666667%;\n    max-width: 66.66666667%;\n  }\n\n  .col-md-9 {\n    -ms-flex-preferred-size: 75%;\n    flex-basis: 75%;\n    max-width: 75%;\n  }\n\n  .col-md-10 {\n    -ms-flex-preferred-size: 83.33333333%;\n    flex-basis: 83.33333333%;\n    max-width: 83.33333333%;\n  }\n\n  .col-md-11 {\n    -ms-flex-preferred-size: 91.66666667%;\n    flex-basis: 91.66666667%;\n    max-width: 91.66666667%;\n  }\n\n  .col-md-12 {\n    -ms-flex-preferred-size: 100%;\n    flex-basis: 100%;\n    max-width: 100%;\n  }\n\n  .col-md-offset-0 {\n    margin-left: 0;\n  }\n\n  .col-md-offset-1 {\n    margin-left: 8.33333333%;\n  }\n\n  .col-md-offset-2 {\n    margin-left: 16.66666667%;\n  }\n\n  .col-md-offset-3 {\n    margin-left: 25%;\n  }\n\n  .col-md-offset-4 {\n    margin-left: 33.33333333%;\n  }\n\n  .col-md-offset-5 {\n    margin-left: 41.66666667%;\n  }\n\n  .col-md-offset-6 {\n    margin-left: 50%;\n  }\n\n  .col-md-offset-7 {\n    margin-left: 58.33333333%;\n  }\n\n  .col-md-offset-8 {\n    margin-left: 66.66666667%;\n  }\n\n  .col-md-offset-9 {\n    margin-left: 75%;\n  }\n\n  .col-md-offset-10 {\n    margin-left: 83.33333333%;\n  }\n\n  .col-md-offset-11 {\n    margin-left: 91.66666667%;\n  }\n\n  .start-md {\n    -webkit-box-pack: start;\n    -ms-flex-pack: start;\n    justify-content: flex-start;\n    text-align: start;\n  }\n\n  .center-md {\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    justify-content: center;\n    text-align: center;\n  }\n\n  .end-md {\n    -webkit-box-pack: end;\n    -ms-flex-pack: end;\n    justify-content: flex-end;\n    text-align: end;\n  }\n\n  .top-md {\n    -webkit-box-align: start;\n    -ms-flex-align: start;\n    align-items: flex-start;\n  }\n\n  .middle-md {\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  .bottom-md {\n    -webkit-box-align: end;\n    -ms-flex-align: end;\n    align-items: flex-end;\n  }\n\n  .around-md {\n    -ms-flex-pack: distribute;\n    justify-content: space-around;\n  }\n\n  .between-md {\n    -webkit-box-pack: justify;\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n  }\n\n  .first-md {\n    -webkit-box-ordinal-group: 0;\n    -ms-flex-order: -1;\n    order: -1;\n  }\n\n  .last-md {\n    -webkit-box-ordinal-group: 2;\n    -ms-flex-order: 1;\n    order: 1;\n  }\n}\n@media only screen and (min-width:75em) {\n  .container {\n    width: 76rem;\n  }\n\n  .col-lg,\n  .col-lg-1,\n  .col-lg-10,\n  .col-lg-11,\n  .col-lg-12,\n  .col-lg-2,\n  .col-lg-3,\n  .col-lg-4,\n  .col-lg-5,\n  .col-lg-6,\n  .col-lg-7,\n  .col-lg-8,\n  .col-lg-9,\n  .col-lg-offset-0,\n  .col-lg-offset-1,\n  .col-lg-offset-10,\n  .col-lg-offset-11,\n  .col-lg-offset-12,\n  .col-lg-offset-2,\n  .col-lg-offset-3,\n  .col-lg-offset-4,\n  .col-lg-offset-5,\n  .col-lg-offset-6,\n  .col-lg-offset-7,\n  .col-lg-offset-8,\n  .col-lg-offset-9 {\n    box-sizing: border-box;\n    -webkit-box-flex: 0;\n    -ms-flex: 0 0 auto;\n    flex: 0 0 auto;\n    padding-right: .5rem;\n    padding-left: .5rem;\n  }\n\n  .col-lg {\n    -webkit-box-flex: 1;\n    -ms-flex-positive: 1;\n    flex-grow: 1;\n    -ms-flex-preferred-size: 0;\n    flex-basis: 0;\n    max-width: 100%;\n  }\n\n  .col-lg-1 {\n    -ms-flex-preferred-size: 8.33333333%;\n    flex-basis: 8.33333333%;\n    max-width: 8.33333333%;\n  }\n\n  .col-lg-2 {\n    -ms-flex-preferred-size: 16.66666667%;\n    flex-basis: 16.66666667%;\n    max-width: 16.66666667%;\n  }\n\n  .col-lg-3 {\n    -ms-flex-preferred-size: 25%;\n    flex-basis: 25%;\n    max-width: 25%;\n  }\n\n  .col-lg-4 {\n    -ms-flex-preferred-size: 33.33333333%;\n    flex-basis: 33.33333333%;\n    max-width: 33.33333333%;\n  }\n\n  .col-lg-5 {\n    -ms-flex-preferred-size: 41.66666667%;\n    flex-basis: 41.66666667%;\n    max-width: 41.66666667%;\n  }\n\n  .col-lg-6 {\n    -ms-flex-preferred-size: 50%;\n    flex-basis: 50%;\n    max-width: 50%;\n  }\n\n  .col-lg-7 {\n    -ms-flex-preferred-size: 58.33333333%;\n    flex-basis: 58.33333333%;\n    max-width: 58.33333333%;\n  }\n\n  .col-lg-8 {\n    -ms-flex-preferred-size: 66.66666667%;\n    flex-basis: 66.66666667%;\n    max-width: 66.66666667%;\n  }\n\n  .col-lg-9 {\n    -ms-flex-preferred-size: 75%;\n    flex-basis: 75%;\n    max-width: 75%;\n  }\n\n  .col-lg-10 {\n    -ms-flex-preferred-size: 83.33333333%;\n    flex-basis: 83.33333333%;\n    max-width: 83.33333333%;\n  }\n\n  .col-lg-11 {\n    -ms-flex-preferred-size: 91.66666667%;\n    flex-basis: 91.66666667%;\n    max-width: 91.66666667%;\n  }\n\n  .col-lg-12 {\n    -ms-flex-preferred-size: 100%;\n    flex-basis: 100%;\n    max-width: 100%;\n  }\n\n  .col-lg-offset-0 {\n    margin-left: 0;\n  }\n\n  .col-lg-offset-1 {\n    margin-left: 8.33333333%;\n  }\n\n  .col-lg-offset-2 {\n    margin-left: 16.66666667%;\n  }\n\n  .col-lg-offset-3 {\n    margin-left: 25%;\n  }\n\n  .col-lg-offset-4 {\n    margin-left: 33.33333333%;\n  }\n\n  .col-lg-offset-5 {\n    margin-left: 41.66666667%;\n  }\n\n  .col-lg-offset-6 {\n    margin-left: 50%;\n  }\n\n  .col-lg-offset-7 {\n    margin-left: 58.33333333%;\n  }\n\n  .col-lg-offset-8 {\n    margin-left: 66.66666667%;\n  }\n\n  .col-lg-offset-9 {\n    margin-left: 75%;\n  }\n\n  .col-lg-offset-10 {\n    margin-left: 83.33333333%;\n  }\n\n  .col-lg-offset-11 {\n    margin-left: 91.66666667%;\n  }\n\n  .start-lg {\n    -webkit-box-pack: start;\n    -ms-flex-pack: start;\n    justify-content: flex-start;\n    text-align: start;\n  }\n\n  .center-lg {\n    -webkit-box-pack: center;\n    -ms-flex-pack: center;\n    justify-content: center;\n    text-align: center;\n  }\n\n  .end-lg {\n    -webkit-box-pack: end;\n    -ms-flex-pack: end;\n    justify-content: flex-end;\n    text-align: end;\n  }\n\n  .top-lg {\n    -webkit-box-align: start;\n    -ms-flex-align: start;\n    align-items: flex-start;\n  }\n\n  .middle-lg {\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  .bottom-lg {\n    -webkit-box-align: end;\n    -ms-flex-align: end;\n    align-items: flex-end;\n  }\n\n  .around-lg {\n    -ms-flex-pack: distribute;\n    justify-content: space-around;\n  }\n\n  .between-lg {\n    -webkit-box-pack: justify;\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n  }\n\n  .first-lg {\n    -webkit-box-ordinal-group: 0;\n    -ms-flex-order: -1;\n    order: -1;\n  }\n\n  .last-lg {\n    -webkit-box-ordinal-group: 2;\n    -ms-flex-order: 1;\n    order: 1;\n  }\n}\n"; (require("browserify-css").createStyle(css, { "href": "dependencies\\flexboxgrid\\flexboxgrid.min.css" }, { "insertAt": "bottom" })); module.exports = css;
},{"browserify-css":5}],4:[function(require,module,exports){
module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }

},{}],5:[function(require,module,exports){
'use strict';
// For more information about browser field, check out the browser field at https://github.com/substack/browserify-handbook#browser-field.

var styleElementsInsertedAtTop = [];

var insertStyleElement = function(styleElement, options) {
    var head = document.head || document.getElementsByTagName('head')[0];
    var lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];

    options = options || {};
    options.insertAt = options.insertAt || 'bottom';

    if (options.insertAt === 'top') {
        if (!lastStyleElementInsertedAtTop) {
            head.insertBefore(styleElement, head.firstChild);
        } else if (lastStyleElementInsertedAtTop.nextSibling) {
            head.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);
        } else {
            head.appendChild(styleElement);
        }
        styleElementsInsertedAtTop.push(styleElement);
    } else if (options.insertAt === 'bottom') {
        head.appendChild(styleElement);
    } else {
        throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.');
    }
};

module.exports = {
    // Create a <link> tag with optional data attributes
    createLink: function(href, attributes) {
        var head = document.head || document.getElementsByTagName('head')[0];
        var link = document.createElement('link');

        link.href = href;
        link.rel = 'stylesheet';

        for (var key in attributes) {
            if ( ! attributes.hasOwnProperty(key)) {
                continue;
            }
            var value = attributes[key];
            link.setAttribute('data-' + key, value);
        }

        head.appendChild(link);
    },
    // Create a <style> tag with optional data attributes
    createStyle: function(cssText, attributes, extraOptions) {
        extraOptions = extraOptions || {};

        var style = document.createElement('style');
        style.type = 'text/css';

        for (var key in attributes) {
            if ( ! attributes.hasOwnProperty(key)) {
                continue;
            }
            var value = attributes[key];
            style.setAttribute('data-' + key, value);
        }

        if (style.sheet) { // for jsdom and IE9+
            style.innerHTML = cssText;
            style.sheet.cssText = cssText;
            insertStyleElement(style, { insertAt: extraOptions.insertAt });
        } else if (style.styleSheet) { // for IE8 and below
            insertStyleElement(style, { insertAt: extraOptions.insertAt });
            style.styleSheet.cssText = cssText;
        } else { // for Chrome, Firefox, and Safari
            style.appendChild(document.createTextNode(cssText));
            insertStyleElement(style, { insertAt: extraOptions.insertAt });
        }
    }
};

},{}],6:[function(require,module,exports){
'use strict';

var ticky = require('ticky');

module.exports = function debounce (fn, args, ctx) {
  if (!fn) { return; }
  ticky(function run () {
    fn.apply(ctx || null, args || []);
  });
};

},{"ticky":15}],7:[function(require,module,exports){
'use strict';

var atoa = require('atoa');
var debounce = require('./debounce');

module.exports = function emitter (thing, options) {
  var opts = options || {};
  var evt = {};
  if (thing === undefined) { thing = {}; }
  thing.on = function (type, fn) {
    if (!evt[type]) {
      evt[type] = [fn];
    } else {
      evt[type].push(fn);
    }
    return thing;
  };
  thing.once = function (type, fn) {
    fn._once = true; // thing.off(fn) still works!
    thing.on(type, fn);
    return thing;
  };
  thing.off = function (type, fn) {
    var c = arguments.length;
    if (c === 1) {
      delete evt[type];
    } else if (c === 0) {
      evt = {};
    } else {
      var et = evt[type];
      if (!et) { return thing; }
      et.splice(et.indexOf(fn), 1);
    }
    return thing;
  };
  thing.emit = function () {
    var args = atoa(arguments);
    return thing.emitterSnapshot(args.shift()).apply(this, args);
  };
  thing.emitterSnapshot = function (type) {
    var et = (evt[type] || []).slice(0);
    return function () {
      var args = atoa(arguments);
      var ctx = this || thing;
      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }
      et.forEach(function emitter (listen) {
        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }
        if (listen._once) { thing.off(type, listen); }
      });
      return thing;
    };
  };
  return thing;
};

},{"./debounce":6,"atoa":4}],8:[function(require,module,exports){
(function (global){
'use strict';

var customEvent = require('custom-event');
var eventmap = require('./eventmap');
var doc = global.document;
var addEvent = addEventEasy;
var removeEvent = removeEventEasy;
var hardCache = [];

if (!global.addEventListener) {
  addEvent = addEventHard;
  removeEvent = removeEventHard;
}

module.exports = {
  add: addEvent,
  remove: removeEvent,
  fabricate: fabricateEvent
};

function addEventEasy (el, type, fn, capturing) {
  return el.addEventListener(type, fn, capturing);
}

function addEventHard (el, type, fn) {
  return el.attachEvent('on' + type, wrap(el, type, fn));
}

function removeEventEasy (el, type, fn, capturing) {
  return el.removeEventListener(type, fn, capturing);
}

function removeEventHard (el, type, fn) {
  var listener = unwrap(el, type, fn);
  if (listener) {
    return el.detachEvent('on' + type, listener);
  }
}

function fabricateEvent (el, type, model) {
  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();
  if (el.dispatchEvent) {
    el.dispatchEvent(e);
  } else {
    el.fireEvent('on' + type, e);
  }
  function makeClassicEvent () {
    var e;
    if (doc.createEvent) {
      e = doc.createEvent('Event');
      e.initEvent(type, true, true);
    } else if (doc.createEventObject) {
      e = doc.createEventObject();
    }
    return e;
  }
  function makeCustomEvent () {
    return new customEvent(type, { detail: model });
  }
}

function wrapperFactory (el, type, fn) {
  return function wrapper (originalEvent) {
    var e = originalEvent || global.event;
    e.target = e.target || e.srcElement;
    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };
    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };
    e.which = e.which || e.keyCode;
    fn.call(el, e);
  };
}

function wrap (el, type, fn) {
  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);
  hardCache.push({
    wrapper: wrapper,
    element: el,
    type: type,
    fn: fn
  });
  return wrapper;
}

function unwrap (el, type, fn) {
  var i = find(el, type, fn);
  if (i) {
    var wrapper = hardCache[i].wrapper;
    hardCache.splice(i, 1); // free up a tad of memory
    return wrapper;
  }
}

function find (el, type, fn) {
  var i, item;
  for (i = 0; i < hardCache.length; i++) {
    item = hardCache[i];
    if (item.element === el && item.type === type && item.fn === fn) {
      return i;
    }
  }
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./eventmap":9,"custom-event":10}],9:[function(require,module,exports){
(function (global){
'use strict';

var eventmap = [];
var eventname = '';
var ron = /^on/;

for (eventname in global) {
  if (ron.test(eventname)) {
    eventmap.push(eventname.slice(2));
  }
}

module.exports = eventmap;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],10:[function(require,module,exports){
(function (global){

var NativeCustomEvent = global.CustomEvent;

function useNative () {
  try {
    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });
    return  'cat' === p.type && 'bar' === p.detail.foo;
  } catch (e) {
  }
  return false;
}

/**
 * Cross-browser `CustomEvent` constructor.
 *
 * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent
 *
 * @public
 */

module.exports = useNative() ? NativeCustomEvent :

// IE >= 9
'function' === typeof document.createEvent ? function CustomEvent (type, params) {
  var e = document.createEvent('CustomEvent');
  if (params) {
    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);
  } else {
    e.initCustomEvent(type, false, false, void 0);
  }
  return e;
} :

// IE <= 8
function CustomEvent (type, params) {
  var e = document.createEventObject();
  e.type = type;
  if (params) {
    e.bubbles = Boolean(params.bubbles);
    e.cancelable = Boolean(params.cancelable);
    e.detail = params.detail;
  } else {
    e.bubbles = false;
    e.cancelable = false;
    e.detail = void 0;
  }
  return e;
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],11:[function(require,module,exports){
'use strict';

var cache = {};
var start = '(?:^|\\s)';
var end = '(?:\\s|$)';

function lookupClass (className) {
  var cached = cache[className];
  if (cached) {
    cached.lastIndex = 0;
  } else {
    cache[className] = cached = new RegExp(start + className + end, 'g');
  }
  return cached;
}

function addClass (el, className) {
  var current = el.className;
  if (!current.length) {
    el.className = className;
  } else if (!lookupClass(className).test(current)) {
    el.className += ' ' + className;
  }
}

function rmClass (el, className) {
  el.className = el.className.replace(lookupClass(className), ' ').trim();
}

module.exports = {
  add: addClass,
  rm: rmClass
};

},{}],12:[function(require,module,exports){
var css = ".gu-mirror {\n  position: fixed!important;\n  margin: 0!important;\n  z-index: 9999!important;\n  opacity: .8;\n  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)\";\n  filter: alpha(opacity=80);\n}\n.gu-hide {\n  display: none!important;\n}\n.gu-unselectable {\n  -webkit-user-select: none!important;\n  -moz-user-select: none!important;\n  -ms-user-select: none!important;\n  user-select: none!important;\n}\n.gu-transit {\n  opacity: .2;\n  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)\";\n  filter: alpha(opacity=20);\n}\n"; (require("browserify-css").createStyle(css, { "href": "node_modules\\dragula\\dist\\dragula.min.css" }, { "insertAt": "bottom" })); module.exports = css;
},{"browserify-css":5}],13:[function(require,module,exports){
(function (global){
'use strict';

var emitter = require('contra/emitter');
var crossvent = require('crossvent');
var classes = require('./classes');
var doc = document;
var documentElement = doc.documentElement;

function dragula (initialContainers, options) {
  var len = arguments.length;
  if (len === 1 && Array.isArray(initialContainers) === false) {
    options = initialContainers;
    initialContainers = [];
  }
  var _mirror; // mirror image
  var _source; // source container
  var _item; // item being dragged
  var _offsetX; // reference x
  var _offsetY; // reference y
  var _moveX; // reference move x
  var _moveY; // reference move y
  var _initialSibling; // reference sibling when grabbed
  var _currentSibling; // reference sibling now
  var _copy; // item used for copying
  var _renderTimer; // timer for setTimeout renderMirrorImage
  var _lastDropTarget = null; // last container item was over
  var _grabbed; // holds mousedown context until first mousemove

  var o = options || {};
  if (o.moves === void 0) { o.moves = always; }
  if (o.accepts === void 0) { o.accepts = always; }
  if (o.invalid === void 0) { o.invalid = invalidTarget; }
  if (o.containers === void 0) { o.containers = initialContainers || []; }
  if (o.isContainer === void 0) { o.isContainer = never; }
  if (o.copy === void 0) { o.copy = false; }
  if (o.copySortSource === void 0) { o.copySortSource = false; }
  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }
  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }
  if (o.direction === void 0) { o.direction = 'vertical'; }
  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }
  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }

  var drake = emitter({
    containers: o.containers,
    start: manualStart,
    end: end,
    cancel: cancel,
    remove: remove,
    destroy: destroy,
    canMove: canMove,
    dragging: false
  });

  if (o.removeOnSpill === true) {
    drake.on('over', spillOver).on('out', spillOut);
  }

  events();

  return drake;

  function isContainer (el) {
    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);
  }

  function events (remove) {
    var op = remove ? 'remove' : 'add';
    touchy(documentElement, op, 'mousedown', grab);
    touchy(documentElement, op, 'mouseup', release);
  }

  function eventualMovements (remove) {
    var op = remove ? 'remove' : 'add';
    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);
  }

  function movements (remove) {
    var op = remove ? 'remove' : 'add';
    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8
    crossvent[op](documentElement, 'click', preventGrabbed);
  }

  function destroy () {
    events(true);
    release({});
  }

  function preventGrabbed (e) {
    if (_grabbed) {
      e.preventDefault();
    }
  }

  function grab (e) {
    _moveX = e.clientX;
    _moveY = e.clientY;

    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;
    if (ignore) {
      return; // we only care about honest-to-god left clicks and touch events
    }
    var item = e.target;
    var context = canStart(item);
    if (!context) {
      return;
    }
    _grabbed = context;
    eventualMovements();
    if (e.type === 'mousedown') {
      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208
        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176
      } else {
        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155
      }
    }
  }

  function startBecauseMouseMoved (e) {
    if (!_grabbed) {
      return;
    }
    if (whichMouseButton(e) === 0) {
      release({});
      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope
    }
    // truthy check fixes #239, equality fixes #207
    if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {
      return;
    }
    if (o.ignoreInputTextSelection) {
      var clientX = getCoord('clientX', e);
      var clientY = getCoord('clientY', e);
      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);
      if (isInput(elementBehindCursor)) {
        return;
      }
    }

    var grabbed = _grabbed; // call to end() unsets _grabbed
    eventualMovements(true);
    movements();
    end();
    start(grabbed);

    var offset = getOffset(_item);
    _offsetX = getCoord('pageX', e) - offset.left;
    _offsetY = getCoord('pageY', e) - offset.top;

    classes.add(_copy || _item, 'gu-transit');
    renderMirrorImage();
    drag(e);
  }

  function canStart (item) {
    if (drake.dragging && _mirror) {
      return;
    }
    if (isContainer(item)) {
      return; // don't drag container itself
    }
    var handle = item;
    while (getParent(item) && isContainer(getParent(item)) === false) {
      if (o.invalid(item, handle)) {
        return;
      }
      item = getParent(item); // drag target should be a top element
      if (!item) {
        return;
      }
    }
    var source = getParent(item);
    if (!source) {
      return;
    }
    if (o.invalid(item, handle)) {
      return;
    }

    var movable = o.moves(item, source, handle, nextEl(item));
    if (!movable) {
      return;
    }

    return {
      item: item,
      source: source
    };
  }

  function canMove (item) {
    return !!canStart(item);
  }

  function manualStart (item) {
    var context = canStart(item);
    if (context) {
      start(context);
    }
  }

  function start (context) {
    if (isCopy(context.item, context.source)) {
      _copy = context.item.cloneNode(true);
      drake.emit('cloned', _copy, context.item, 'copy');
    }

    _source = context.source;
    _item = context.item;
    _initialSibling = _currentSibling = nextEl(context.item);

    drake.dragging = true;
    drake.emit('drag', _item, _source);
  }

  function invalidTarget () {
    return false;
  }

  function end () {
    if (!drake.dragging) {
      return;
    }
    var item = _copy || _item;
    drop(item, getParent(item));
  }

  function ungrab () {
    _grabbed = false;
    eventualMovements(true);
    movements(true);
  }

  function release (e) {
    ungrab();

    if (!drake.dragging) {
      return;
    }
    var item = _copy || _item;
    var clientX = getCoord('clientX', e);
    var clientY = getCoord('clientY', e);
    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);
    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);
    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {
      drop(item, dropTarget);
    } else if (o.removeOnSpill) {
      remove();
    } else {
      cancel();
    }
  }

  function drop (item, target) {
    var parent = getParent(item);
    if (_copy && o.copySortSource && target === _source) {
      parent.removeChild(_item);
    }
    if (isInitialPlacement(target)) {
      drake.emit('cancel', item, _source, _source);
    } else {
      drake.emit('drop', item, target, _source, _currentSibling);
    }
    cleanup();
  }

  function remove () {
    if (!drake.dragging) {
      return;
    }
    var item = _copy || _item;
    var parent = getParent(item);
    if (parent) {
      parent.removeChild(item);
    }
    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);
    cleanup();
  }

  function cancel (revert) {
    if (!drake.dragging) {
      return;
    }
    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;
    var item = _copy || _item;
    var parent = getParent(item);
    var initial = isInitialPlacement(parent);
    if (initial === false && reverts) {
      if (_copy) {
        if (parent) {
          parent.removeChild(_copy);
        }
      } else {
        _source.insertBefore(item, _initialSibling);
      }
    }
    if (initial || reverts) {
      drake.emit('cancel', item, _source, _source);
    } else {
      drake.emit('drop', item, parent, _source, _currentSibling);
    }
    cleanup();
  }

  function cleanup () {
    var item = _copy || _item;
    ungrab();
    removeMirrorImage();
    if (item) {
      classes.rm(item, 'gu-transit');
    }
    if (_renderTimer) {
      clearTimeout(_renderTimer);
    }
    drake.dragging = false;
    if (_lastDropTarget) {
      drake.emit('out', item, _lastDropTarget, _source);
    }
    drake.emit('dragend', item);
    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;
  }

  function isInitialPlacement (target, s) {
    var sibling;
    if (s !== void 0) {
      sibling = s;
    } else if (_mirror) {
      sibling = _currentSibling;
    } else {
      sibling = nextEl(_copy || _item);
    }
    return target === _source && sibling === _initialSibling;
  }

  function findDropTarget (elementBehindCursor, clientX, clientY) {
    var target = elementBehindCursor;
    while (target && !accepted()) {
      target = getParent(target);
    }
    return target;

    function accepted () {
      var droppable = isContainer(target);
      if (droppable === false) {
        return false;
      }

      var immediate = getImmediateChild(target, elementBehindCursor);
      var reference = getReference(target, immediate, clientX, clientY);
      var initial = isInitialPlacement(target, reference);
      if (initial) {
        return true; // should always be able to drop it right back where it was
      }
      return o.accepts(_item, target, _source, reference);
    }
  }

  function drag (e) {
    if (!_mirror) {
      return;
    }
    e.preventDefault();

    var clientX = getCoord('clientX', e);
    var clientY = getCoord('clientY', e);
    var x = clientX - _offsetX;
    var y = clientY - _offsetY;

    _mirror.style.left = x + 'px';
    _mirror.style.top = y + 'px';

    var item = _copy || _item;
    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);
    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);
    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;
    if (changed || dropTarget === null) {
      out();
      _lastDropTarget = dropTarget;
      over();
    }
    var parent = getParent(item);
    if (dropTarget === _source && _copy && !o.copySortSource) {
      if (parent) {
        parent.removeChild(item);
      }
      return;
    }
    var reference;
    var immediate = getImmediateChild(dropTarget, elementBehindCursor);
    if (immediate !== null) {
      reference = getReference(dropTarget, immediate, clientX, clientY);
    } else if (o.revertOnSpill === true && !_copy) {
      reference = _initialSibling;
      dropTarget = _source;
    } else {
      if (_copy && parent) {
        parent.removeChild(item);
      }
      return;
    }
    if (
      (reference === null && changed) ||
      reference !== item &&
      reference !== nextEl(item)
    ) {
      _currentSibling = reference;
      dropTarget.insertBefore(item, reference);
      drake.emit('shadow', item, dropTarget, _source);
    }
    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }
    function over () { if (changed) { moved('over'); } }
    function out () { if (_lastDropTarget) { moved('out'); } }
  }

  function spillOver (el) {
    classes.rm(el, 'gu-hide');
  }

  function spillOut (el) {
    if (drake.dragging) { classes.add(el, 'gu-hide'); }
  }

  function renderMirrorImage () {
    if (_mirror) {
      return;
    }
    var rect = _item.getBoundingClientRect();
    _mirror = _item.cloneNode(true);
    _mirror.style.width = getRectWidth(rect) + 'px';
    _mirror.style.height = getRectHeight(rect) + 'px';
    classes.rm(_mirror, 'gu-transit');
    classes.add(_mirror, 'gu-mirror');
    o.mirrorContainer.appendChild(_mirror);
    touchy(documentElement, 'add', 'mousemove', drag);
    classes.add(o.mirrorContainer, 'gu-unselectable');
    drake.emit('cloned', _mirror, _item, 'mirror');
  }

  function removeMirrorImage () {
    if (_mirror) {
      classes.rm(o.mirrorContainer, 'gu-unselectable');
      touchy(documentElement, 'remove', 'mousemove', drag);
      getParent(_mirror).removeChild(_mirror);
      _mirror = null;
    }
  }

  function getImmediateChild (dropTarget, target) {
    var immediate = target;
    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {
      immediate = getParent(immediate);
    }
    if (immediate === documentElement) {
      return null;
    }
    return immediate;
  }

  function getReference (dropTarget, target, x, y) {
    var horizontal = o.direction === 'horizontal';
    var reference = target !== dropTarget ? inside() : outside();
    return reference;

    function outside () { // slower, but able to figure out any position
      var len = dropTarget.children.length;
      var i;
      var el;
      var rect;
      for (i = 0; i < len; i++) {
        el = dropTarget.children[i];
        rect = el.getBoundingClientRect();
        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }
        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }
      }
      return null;
    }

    function inside () { // faster, but only available if dropped inside a child element
      var rect = target.getBoundingClientRect();
      if (horizontal) {
        return resolve(x > rect.left + getRectWidth(rect) / 2);
      }
      return resolve(y > rect.top + getRectHeight(rect) / 2);
    }

    function resolve (after) {
      return after ? nextEl(target) : target;
    }
  }

  function isCopy (item, container) {
    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);
  }
}

function touchy (el, op, type, fn) {
  var touch = {
    mouseup: 'touchend',
    mousedown: 'touchstart',
    mousemove: 'touchmove'
  };
  var pointers = {
    mouseup: 'pointerup',
    mousedown: 'pointerdown',
    mousemove: 'pointermove'
  };
  var microsoft = {
    mouseup: 'MSPointerUp',
    mousedown: 'MSPointerDown',
    mousemove: 'MSPointerMove'
  };
  if (global.navigator.pointerEnabled) {
    crossvent[op](el, pointers[type], fn);
  } else if (global.navigator.msPointerEnabled) {
    crossvent[op](el, microsoft[type], fn);
  } else {
    crossvent[op](el, touch[type], fn);
    crossvent[op](el, type, fn);
  }
}

function whichMouseButton (e) {
  if (e.touches !== void 0) { return e.touches.length; }
  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261
  if (e.buttons !== void 0) { return e.buttons; }
  var button = e.button;
  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575
    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);
  }
}

function getOffset (el) {
  var rect = el.getBoundingClientRect();
  return {
    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),
    top: rect.top + getScroll('scrollTop', 'pageYOffset')
  };
}

function getScroll (scrollProp, offsetProp) {
  if (typeof global[offsetProp] !== 'undefined') {
    return global[offsetProp];
  }
  if (documentElement.clientHeight) {
    return documentElement[scrollProp];
  }
  return doc.body[scrollProp];
}

function getElementBehindPoint (point, x, y) {
  var p = point || {};
  var state = p.className;
  var el;
  p.className += ' gu-hide';
  el = doc.elementFromPoint(x, y);
  p.className = state;
  return el;
}

function never () { return false; }
function always () { return true; }
function getRectWidth (rect) { return rect.width || (rect.right - rect.left); }
function getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }
function getParent (el) { return el.parentNode === doc ? null : el.parentNode; }
function isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }
function isEditable (el) {
  if (!el) { return false; } // no parents were editable
  if (el.contentEditable === 'false') { return false; } // stop the lookup
  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain
  return isEditable(getParent(el)); // contentEditable is set to 'inherit'
}

function nextEl (el) {
  return el.nextElementSibling || manually();
  function manually () {
    var sibling = el;
    do {
      sibling = sibling.nextSibling;
    } while (sibling && sibling.nodeType !== 1);
    return sibling;
  }
}

function getEventHost (e) {
  // on touchend event, we have to use `e.changedTouches`
  // see http://stackoverflow.com/questions/7192563/touchend-event-properties
  // see https://github.com/bevacqua/dragula/issues/34
  if (e.targetTouches && e.targetTouches.length) {
    return e.targetTouches[0];
  }
  if (e.changedTouches && e.changedTouches.length) {
    return e.changedTouches[0];
  }
  return e;
}

function getCoord (coord, e) {
  var host = getEventHost(e);
  var missMap = {
    pageX: 'clientX', // IE8
    pageY: 'clientY' // IE8
  };
  if (coord in missMap && !(coord in host) && missMap[coord] in host) {
    coord = missMap[coord];
  }
  return host[coord];
}

module.exports = dragula;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./classes":11,"contra/emitter":7,"crossvent":8}],14:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],15:[function(require,module,exports){
(function (setImmediate){
var si = typeof setImmediate === 'function', tick;
if (si) {
  tick = function (fn) { setImmediate(fn); };
} else {
  tick = function (fn) { setTimeout(fn, 0); };
}

module.exports = tick;
}).call(this,require("timers").setImmediate)

},{"timers":16}],16:[function(require,module,exports){
(function (setImmediate,clearImmediate){
var nextTick = require('process/browser.js').nextTick;
var apply = Function.prototype.apply;
var slice = Array.prototype.slice;
var immediateIds = {};
var nextImmediateId = 0;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) { timeout.close(); };

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(window, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// That's not how node.js implements it but the exposed api is the same.
exports.setImmediate = typeof setImmediate === "function" ? setImmediate : function(fn) {
  var id = nextImmediateId++;
  var args = arguments.length < 2 ? false : slice.call(arguments, 1);

  immediateIds[id] = true;

  nextTick(function onNextTick() {
    if (immediateIds[id]) {
      // fn.call() is faster so we optimize for the common use-case
      // @see http://jsperf.com/call-apply-segu
      if (args) {
        fn.apply(null, args);
      } else {
        fn.call(null);
      }
      // Prevent ids from leaking
      exports.clearImmediate(id);
    }
  });

  return id;
};

exports.clearImmediate = typeof clearImmediate === "function" ? clearImmediate : function(id) {
  delete immediateIds[id];
};
}).call(this,require("timers").setImmediate,require("timers").clearImmediate)

},{"process/browser.js":14,"timers":16}],17:[function(require,module,exports){
module.exports={
  "name": "pdf-builder-2020",
  "version": "0.0.10-snapshot",
  "description": "",
  "main": "index.js",
  "scripts": {
    "build-all": "npm run build-pdf-editor && npm run build-manager & npm run deploy",
    "build-pdf-editor": "browserify -d src/pdf-editor/PdfEditor.js > public/pdf-editor/pdf-editor.js",
    "build-manager": "browserify -d src/manage-application/ManageApplication.js > public/manage-application/manager.js",
    "deploy": "xcopy /S /Y  \"./public\" \"C:/Users/Stranger_in_the_Q/IdeaProjects/itext-server/static\""
  },
  "devDependencies": {
    "babel-preset-es2015": "^6.24.1",
    "browserify": "^16.2.3",
    "browserify-css": "^0.14.0",
    "exports-loader": "^0.7.0",
    "graceful-fs": "^4.1.13",
    "imports-loader": "^0.8.0",
    "stripify": "^6.0.0"
  },
  "browserify": {
    "transform": [
      "browserify-css"
    ]
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "d3-selection": "^1.4.0",
    "dragula": "^3.7.2"
  }
}

},{}],18:[function(require,module,exports){
// var InlineEditor = require('../../dependencies/ckeditor/ckeditor5-inline-full/build/ckeditor')
var BalloonEditor = require('../../dependencies/ckeditor/ckeditor-baloon/build/ckeditor')
// require('../../dependencies/ckeditor/ckeditor5-inline-full/build/translations/ru')
module.exports = {

    removeTextEditor: function remove(el) {

    },

    initTextEditor: function (el) {
        // !el.getAttribute('id') &&
        //el.setAttribute('id', Math.random().toString(36).substring(2));
        // el.setAttribute('contenteditable', true)

        // setTimeout(() =>
            ckEditor(el)
            // , 1000);
    }
};


function ckEditor(el) {

    if(el.classList.contains('initialized'))
        return
    el.classList.add('initialized');
    // InlineEditor
    BalloonEditor
        .create(el, {

            toolbar: {
                items: [
                    'undo',
                    'redo',
                    '|',
                    'bold',
                    'italic',
                    'underline',
                    'strikethrough',
                    'subscript',
                    'superscript',
                    // 'blockQuote',
                    // 'bulletedList',
                    // 'numberedList',
                    '|',
                    'alignment',
                    'indent',
                    'outdent',
                    'fontFamily',
                    'fontSize',
                    'fontBackgroundColor',
                    'fontColor',
                    '|',
                    // 'imageUpload',
                    // 'insertTable',
                    'specialCharacters',
                    'horizontalLine',
                    'link'
                ]
            },
            language: 'ru',
            image: {
                // You need to configure the image toolbar, too, so it uses the new style buttons.
                toolbar: [
                    'imageUpload',
                    // 'imageTextAlternative',
                    // '|',
                    'imageStyle:alignLeft',
                    'imageStyle:full',
                    'imageStyle:alignRight'
                ],
                styles: [
                    'full',
                    'alignLeft',
                    'alignRight'
                ]
            },
            table: {
                contentToolbar: [
                    'tableColumn',
                    'tableRow',
                    'mergeTableCells',
                    'tableCellProperties',
                    'tableProperties'
                ]
            },
            licenseKey: '',

        }).then(editor => {
            el.editor = editor;
        })
}

},{"../../dependencies/ckeditor/ckeditor-baloon/build/ckeditor":1}],19:[function(require,module,exports){

module.exports = function (html) {
    let tmp = tmpElement(html);
    fixFlex(tmp);
    fixImagesAlign(tmp);
    fixTablesAlign(tmp);
    pageBreaks(tmp);
    return page(tmp);
}

function page(el) {
    return `
        <html>
            <head>${style(el)}</head>
            <body>${el.innerHTML}</body>
        </html>
    `;
}

function style(tmp) {
    let styles = tmp.querySelector('style');
    styles.remove();
    return `
        <style>
            ${styles.textContent}
            figure > img {
                display: block;
                margin: 0 auto;
                max-width: 100%;
                min-width: 50px;
            }
            figure.image.image_resized img {
                width: 100%;
            }
           .image-style-align-left {
                float: left;
            }
           .image-style-align-right {
                float: right;
            }
        </style>
    `;
}

function pageBreaks(tmp) {
    tmp.querySelectorAll('.page-break').forEach(el => {
        el.innerHTML = '';
        el.classList.remove('page-break')
    })
}

function fixFlex(el) {
    el.querySelectorAll('.row').forEach(row => {
        let columns = row.querySelectorAll('.col-xs')
        columns.forEach(col => {
            let s = col.style;
            s.display = 'inline-block'
            s.minWidth = s.width = 100 / columns.length + '%'
        })
    })
}

function fixImagesAlign(el) {
    el.querySelectorAll('figure.image').forEach(imgBlock => {
        let centerAlign = !imgBlock.classList.contains('image-style-align-left')
                        && !imgBlock.classList.contains('image-style-align-right');
        if (centerAlign)
            imgBlock.parentNode.style.textAlign = "center"
    })
}

function fixTablesAlign(el) {
    el.querySelectorAll('figure.table').forEach(tableBlock => {
        let centerAlign = !tableBlock.style.float;
        if (!centerAlign) return
        tableBlock.parentNode.style.textAlign = "center"
        tableBlock.style.display = "inline-block"
    })
}

function tmpElement(html) {
    let tmp = document.createElement('div');
    tmp.innerHTML = html;
    return tmp;
}
},{}],20:[function(require,module,exports){
let fill = '#432c12'

let move = `
    <path d="M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 
        0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 
        21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 
        159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 
        0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 
        15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 
        40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 
        4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"/>
`;

let copy = `
    <path fill="${fill}" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 
        0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 
        30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 
        13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 
        0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 
        0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"/>
`;

let del = `
    <path fill="${fill}" d="M81  81 l350  350 l-40 40 l-350 -350z"/>
    <path fill="${fill}" d="M411 81 l-350 350 l40  40 l350  -350z"/>
`;

let down = `
    <path fill="${fill}" d="M50 150 l200 200 l200 -200z"/>
`;

let up = `
    <path fill="${fill}" d="M50 350 l200 -200 l200 200z"/>
`;

module.exports = {
    move: (w, h) => svg(w, h, move, [-50, -50, 612, 612]),
    copy: (w, h) => svg(w, h, copy),
    del: (w, h) => svg(w, h, del),
    up: (w, h) => svg(w, h, up),
    down: (w, h) => svg(w, h,down)
};

function svg(w, h, html, vb) {
    vb = vb || [-50, -50, 548, 612];
    return `<svg xmlns="http://www.w3.org/2000/svg" 
                viewBox="${vb}" 
                width="${w}px"  
                height="${h}px">
            ${html}
        </svg>`
}
},{}],21:[function(require,module,exports){
require('./pdf-editor.css');
require('../../dependencies/flexboxgrid/flexboxgrid.min.css');
let ver = require('../../package.json').version

let dnd = require('./dnd')

let htmlTemplate = require('./html-template');
let TemplatesFactory = require('./TemplatesFactory');

let TextEditor = require('./CkEditor5');
let blocks = require('./blocks');
let svgOverlay = require('./svgOverlay/svgOverlay');
let documentCleaner = require('./documentCleaner');
let forItextFormatter = require('./ForItextFormatter');
let mouseoverButtons = require('./mouseoverButtons');

let templatesFactory = new TemplatesFactory();

class PdfEditor {

    constructor(properties) {
        this.properties = properties || {};
        this.properties.blockProperties = this.properties.blockProperties || {}
        this.properties.buttonsSize = this.properties.buttonsSize || 25;
        this.initPdfEditor();
        this.writeVersion();
        dnd.initDnD(this)

        this.initCollapsePanels()
        this.initClearBlockSelectionOnClickInMilkListener();

        blocks.initBlocks(this);
        svgOverlay.initSvgOverlay(this);

        addEventListener('mouseup', () => {
            this.manageHoverState()
            this.removeEmptyRows()
        })
        console.log('pdf-editor: ' + ver)
    }

    removeEmptyRows() {
        setTimeout(() => {
            let allBlocks = this.targetElement.querySelectorAll('.pdf-editor .page > .template');
            allBlocks.forEach(b => {
                if (!b.firstChild)
                    return
                this.clearNotNeededRows(b.firstChild);
                if (b.childElementCount === 1)
                    b.firstChild.classList.remove('empty-drop-zone')
            })
        })
    }

    initPdfEditor() {
        let targetElement = this.properties.target;
        if (typeof targetElement === "string")
            targetElement = document.querySelector(targetElement);
        targetElement.innerHTML = htmlTemplate(this.properties);
        targetElement.querySelector('.sidePanel #blocks')
            .innerHTML = templatesFactory.createBlocks();
        targetElement.querySelector('.sidePanel #elements')
            .innerHTML = templatesFactory.createElements();
        targetElement.addEventListener('mousemove',
            e => mouseoverButtons.manage(e, this));

        this.targetElement = targetElement;
    }

    writeVersion(){
        let page = this.targetElement.querySelector('.page');
        if (!page.getAttribute('created-ver'))
            page.setAttribute('created-ver', ver);
        page.setAttribute('last-edited-ver', ver);
    }

    initClearBlockSelectionOnClickInMilkListener() {
        this.targetElement.querySelector('.content').addEventListener('click', e => {
            let clear = ['content', 'page'].find(c => e.target.classList.contains(c))
            clear |= e.target.querySelector('.page-break');
            if (clear)
                this.clickOnBlock(null)
        });
    }

    initCollapsePanels() {
        this.targetElement.querySelectorAll('.groupName').forEach(groupName => {
            groupName.addEventListener('click', () => {
                groupName.classList.toggle('collapsed')
            });
        });
    }

    manageHoverState(target) {
        if (target === this.lastHover)
            return;
        this.lastHover = target;
        this.targetElement.querySelectorAll('.page.container > .template')
            .forEach(tpl => tpl.classList.remove('hover-state'))
        if (!target)
            return
        target.classList.add('hover-state')

    }

    markEmptyRows(target) {
        target.parentNode.querySelectorAll('.dropzone').forEach(dz => {
            let empty = dz.innerHTML.trim() === '';
            dz.classList.toggle('empty-drop-zone', empty)
        });
    }

    manageExtraRows(target) {
        let first = [...target.parentNode.querySelectorAll('.dropzone')].shift()
        if (first.innerHTML.trim() !== '') {
            target.parentNode.insertBefore(this.newDropZone(), first);
        }
        let last = [...target.parentNode.querySelectorAll('.dropzone')].pop()
        if (last.innerHTML.trim() !== '') {
            target.parentNode.append(this.newDropZone());
        }
    }

    clearNotNeededRows(target) {
        let dropZones = target.parentNode.querySelectorAll('.dropzone');
        let prevRowIsEmpty;
        for (let i = 0; i < dropZones.length; i++) {
            let empty = dropZones[i].innerHTML.trim() === '';
            if (empty && prevRowIsEmpty) {
                dropZones[i].remove();
                dnd.removeElement(dropZones[i])
            } else {
                prevRowIsEmpty = empty;
            }
        }
    }

    newDropZone() {
        let dz = document.createElement('div');
        dz.className = 'dropzone row';
        this.initDz(dz);
        return dz
    }

    initEditor(el) {
        this.removeBySel('.dz-buttons, .template-buttons');
        TextEditor.initTextEditor(el)
    }

    initDz(dropZone) {
        dnd.pushElement(dropZone);
        dropZone.classList.remove('origin');
    }

    removeBySel(sel) {
        this.targetElement.querySelectorAll(sel)
            .forEach(e => e.remove());
    }

    clickOnBlock(el) {
        this.selectedBlock = el;
        blocks.handleClick(el);
    }

    // public api

    getDocument() {
        let pageContent = this.targetElement.querySelector('.page').outerHTML;
        return documentCleaner(pageContent).innerHTML;
    }

    forItext(){
        return forItextFormatter(this.getDocument())
    }

    loadDocument(data) {
        if (!data)
            return;
        let content = this.targetElement.querySelector('.content');
        content.innerHTML = data;
        let templates = content.querySelectorAll('.template');
        templates.forEach(tpl => blocks.initTemplate(tpl, '.dropzone'));
        dnd.pushElement(content.querySelector('.page'));
    }
}

window.PdfEditor = PdfEditor;
},{"../../dependencies/flexboxgrid/flexboxgrid.min.css":3,"../../package.json":17,"./CkEditor5":18,"./ForItextFormatter":19,"./TemplatesFactory":22,"./blocks":24,"./dnd":25,"./documentCleaner":26,"./html-template":27,"./mouseoverButtons":28,"./pdf-editor.css":30,"./svgOverlay/svgOverlay":33}],22:[function(require,module,exports){
class TemplatesFactory {

    createBlocks() {
        let row = `<div class='dropzone origin row'></div>`;
        return this.createTemplate(row) + this.createTemplate(this.pageBreakBlock());
    }
    
     createTemplate(content, col) {
        return `<div class='template ${col?'col-xs':''}'>${content}</div>`;
    }

     imgBlock() {
        let svg = `<svg preserveAspectRatio='xMidYMid meet' xmlns='http://www.w3.org/2000/svg' 
                            width='100px' height='100px' viewbox='0 0 100 100'>
                          <path stroke='black' fill='none' 
                                d='M10,90v-20l30,-30l15,15l35,-35v70z M5,5h90v90h-90z M30,10a10,10,0,1,0,0.001,0z'></path>
                        </svg>`;
        return `<img draggable="false" class="img" width="100px" height="100px"  src="data:image/svg+xml;base64,${btoa(svg)}" >`;
    }

     textBlock() {
        return `<span>
                         ,      , 
                          2  ,    , 
                            , !
                </span>`
    }

     tableBlock() {
        let t = this.td();
        t += t + t + t;
        t = `<tr>${t}</tr>`;
        t += t + t;
        return `<table><tbody>${t}</tbody></table>`
    }

    td() {
        return `<td style="border: solid">&nbsp;</td>`
    }

     headerBlock() {
        return `<p style="text-align:center;"><span class="text-huge"><strong></strong></span></p>`;
    }

     pageBreakBlock() {
        return `<div class="page-break" style="page-break-after: always"> </div>`;
    }

     createElements() {
        return  [
            this.headerBlock,
            this.textBlock,
            this.imgBlock,
            this.tableBlock
        ].map(fn => {
            let content = `<div class="${fn.name} add_editor_here">${fn.call(this)}</div>`;
            return this.createTemplate(content, true)
        }).join('')
    }
}

module.exports = TemplatesFactory;
},{}],23:[function(require,module,exports){
let templates = {

    block_name : `
        <div class="sub-label"> </div>
        <input type="text" id="block_name">
    `,

    block_descr : `
        <div class="sub-label"> </div>
        <textarea id="block_descr"></textarea>
    `,

    block_no_edit: `
        <br>
        <input id="block_no_edit" type="checkbox">
        <label for="block_no_edit" class="sub-label"> </label>
    `,
    block_no_move: `
        <br>
        <input id="block_no_move" type="checkbox">
        <label for="block_no_move" class="sub-label"> </label>     
    `,

    block_no_copy: `
        <br>
        <input id="block_no_copy" type="checkbox">
        <label for="block_no_copy"  class="sub-label"> </label>
    `,
    block_attach_button:`
        <br>
        <br>
        <button>  </button>
    `
}

module.exports = {

    htmlTemplate: properties => `
         <div style="padding:  0 10px; color:white; width:100%">
            ${Object.entries(properties.blockProperties).map(propertyBlock).join('')}
        </div>
    `,

};

function propertyBlock(entry) {
    return entry[1] !== false ? templates[entry[0]] : '';
}
},{}],24:[function(require,module,exports){
module.exports = {

    pdfEditor: null,

    newBlockNameText: '  ',

    propertyKeys: {
        block_name: 'block_name',
        block_descr: 'block_descr',
        block_no_edit: 'block_no_edit',
        block_no_move: 'block_no_move',
        block_no_copy: 'block_no_copy',
    },

    initBlocks(pdfEditor){
        this.pdfEditor = pdfEditor;
        this.initBlockEditors()
    },

    handleClick(el) {
        let pdfEditor = this.pdfEditor;

        if (!pdfEditor.properties.propertiesPage)
            return

        if (!el) return;

        let keys = this.propertyKeys;

        [keys. block_name, keys. block_descr].forEach(key => {
            if (pdfEditor.properties.blockProperties[key])
                pdfEditor.targetElement.querySelector('#'+key).value = el.getAttribute(key)
        });

        [keys. block_no_edit, keys. block_no_move, keys.block_no_copy].forEach(key => {
            if (pdfEditor.properties.blockProperties[key])
                pdfEditor.targetElement.querySelector('#'+key).checked = "true" !== el.getAttribute(key);
        });
    },

    copyBlock(e) {
        e.stopPropagation();
        let tpl = e.target.closest('.template');
        let cloned = tpl.cloneNode(true);
        cloned.querySelector('.initialized').classList.remove('initialized');
        tpl.parentElement.insertBefore(cloned, tpl);
        tpl.parentElement.insertBefore(tpl, cloned); // stupid hack
        cloned.id = "";
        let name = this.propertyKeys.block_name;
        cloned.setAttribute(name, cloned.getAttribute(name) + ' ')
        this.initTemplate(cloned, '.dropzone');
    },

    initTemplate(el, dropZoneSelector) {
        if (el.querySelector('.dropzone')) {

            if (!el.id)
                el.id = 'block_' + this.rnd() + this.rnd();

            let name = this.propertyKeys.block_name;
            if (!el.getAttribute(name))
                el.setAttribute(name, this.findNextNumber());

            el.addEventListener('click', () => this.pdfEditor.clickOnBlock(el));
            el.querySelectorAll(dropZoneSelector).forEach(dz => this.pdfEditor.initDz(dz));
        } else {
            el = el.querySelector('div.add_editor_here')
            if (el && !el.classList.contains('initialized')) {
                this.pdfEditor.initEditor(el);
            }
        }
    },

    rnd() {
        return Math.random().toString(36).substring(2);
    },

    findNextNumber() {
        let numbers = [...this.pdfEditor.targetElement .querySelectorAll('.page > .template')].map(el => {
            let name = el.getAttribute(this.propertyKeys.block_name);
            return name && parseInt(name.split(this.newBlockNameText).pop());
        }).filter(n => n);
        let i = 1;
        for (; i < 1e5; i++)
            if (numbers.indexOf(i) === -1)
                break;
        return this.newBlockNameText + i;
    },

    initBlockEditors() {
        let  pdfEditor = this.pdfEditor;
        if (!pdfEditor.properties.propertiesPage)
            return

        Object.values(this.propertyKeys).forEach(function (id) {
            if (pdfEditor.properties.blockProperties[id])
                pdfEditor.targetElement.querySelector('#'+id).oninput = onInput;
        });

        function onInput() {
            if (!pdfEditor.selectedBlock || !pdfEditor.properties.blockProperties[this.id])
                return
            // console.log(self.selectedDropzone)
            pdfEditor.selectedBlock.setAttribute(this.id,
                this.type === 'checkbox' ? !this.checked : this.value
            );
            if (this.id !== 'block_no_edit')
                return;
            pdfEditor.selectedBlock
                .querySelectorAll('.add_editor_here')
                .forEach(el => {
                    if (this.checked)
                        el.setAttribute('contenteditable', true)
                    else
                        el.removeAttribute('contenteditable')
                })
        }
    }
};

},{}],25:[function(require,module,exports){
require('../../node_modules/dragula/dist/dragula.min.css');
let dragula = require('dragula');
let blocks = require('./blocks');

let drake;
let pdfEditor;
module.exports = {
    initDnD(pdfEditorInstance) {
        pdfEditor = pdfEditorInstance;
        drake = dragula([
            pdfEditor.targetElement.querySelector('#blocks'),
            pdfEditor.targetElement.querySelector('#elements'),
            pdfEditor.targetElement.querySelector('.page')
        ], {
            removeOnSpill: true,
            copy: function (el, source) {
                return source.classList.contains('templates');
            },
            accepts: (el, target) => dropAccepts(el, target),
            moves: function (el, container, handle) {
                return handle.classList.contains('handle') ||
                    container.classList.contains('templates');
            }
        });

        drake.on('drag', e => dragStart(e));
        drake.on('drop', (el, target) => handleDrop(el, target));
    },
    pushElement(element) {
        drake.containers.push(element)
    },
    removeElement(element) {
        drake.containers.splice( drake.containers.indexOf(element), 1 );
    }
};

function dragStart(e){

}

function dropAccepts(el, target) {
    let t = target.classList;
    if (t.contains('templates'))
        return false;
    if (el.querySelector('.dropzone') || el.querySelector('.page-break')) {
        return t.contains('page');
    } else {
        let canEdit = t.contains('dropzone') &&
            target.parentNode.getAttribute('block_no_edit') !== 'true';
        canEdit && pdfEditor.manageHoverState(target.parentNode, true);
        return canEdit;
    }
}


function handleDrop(el, target) {
    if (!target.classList.contains('page')){
        setTimeout(() => {
            pdfEditor.manageExtraRows(target);
            pdfEditor.clearNotNeededRows(target);
            pdfEditor.markEmptyRows(target);
        }, 10);
    }
    pdfEditor.clickOnBlock(pdfEditor.selectedBlock)
    blocks.initTemplate(el, '.origin');
}


},{"../../node_modules/dragula/dist/dragula.min.css":12,"./blocks":24,"dragula":13}],26:[function(require,module,exports){
module.exports = function (pageContent) {
    let tmp = document.createElement('div');
    tmp.innerHTML = pageContent;
    removeElements(tmp);
    cleanClasses(tmp);
    cleanAttributes(tmp);
    removeEmptyClassAttr(tmp);
    removeImageWidgetText(tmp);
    // pullUpFigureTagChildren(tmp)
    // console.log(tmp.innerHTML)
    return tmp;
}

function removeEmptyClassAttr(tmp) {
    tmp.querySelectorAll(`[class=""]`)
        .forEach(el => el.removeAttribute('class'));
}

function removeElements(tmp) {
    tmp.querySelectorAll([
        '.ck-widget__selection-handle',
        '.ck-widget__resizer',
        '.dz-buttons',
        '.template-buttons',
        '.empty-drop-zone:first-child',
        '.empty-drop-zone:last-child'
    ].join(', ')).forEach(el => el.remove());
}

function cleanClasses(tmp) {
    [
        'initialized',
        'ck-blurred',
        'ck',
        'ck-content',
        'ck-editor__editable',
        'ck-rounded-corners',
        // 'ck-editor__editable_inline',
        'ck-editor__nested-editable'
    ].forEach(c => tmp.querySelectorAll('.' + c)
        .forEach(el => el.classList.remove(c)));
}

function cleanAttributes(tmp) {
    [
        'aria-label',
        'contenteditable',
        'role',
        'lang',
        'dir',
        'data-cke-filler'
    ].forEach(attr => tmp.querySelectorAll(`[${attr}]`)
        .forEach(el => el.removeAttribute(attr)))
}

function removeImageWidgetText(tmp) {
    tmp.querySelectorAll('p, div')
        .forEach(el => el.innerHTML === ' ' && el.remove());
}

function pullUpFigureTagChildren(tmp) {
    tmp.querySelectorAll('figure')
        .forEach(f => {
            f.parentNode.insertBefore(f.firstChild, f);
            f.remove()
        })

}
},{}],27:[function(require,module,exports){


module.exports = properties => `
    ${require('./mouseoverButtons').styles(properties)}
    <div class="pdf-editor wrapper">
    
        <div class="sidePanel bg1">
            <div class="groupName"></div>
            <div id="blocks" class="templates"></div>
            <div class="groupName"></div>
            <div id="elements" class="templates"></div>
            ${properties.propertiesPage ? `
                <div class="groupName"></div>
                ${require('./blockProperties').htmlTemplate(properties)}
            ` : ''}
        </div>
        
        <div class="content">
            <div class="page container">${require('./page-styles')}</div>
        </div>

        ${require('./svgOverlay/svgOverlay').htmlTemplate(properties)}

    </div>
`;

},{"./blockProperties":23,"./mouseoverButtons":28,"./page-styles":29,"./svgOverlay/svgOverlay":33}],28:[function(require,module,exports){
let Icons = require('./Icons');
let blocks = require('./blocks');

module.exports = {
    manage: function(e, pdfEditor) {
        if (e.target.classList.contains('handle'))
            return;
        elementButtons(e, pdfEditor, blockButtons(e, pdfEditor));
    },
    styles: props => `
        <style>
            .pdf-editor .page .template:hover  .dz-buttons,
            .pdf-editor .page .template:hover  .template-buttons {
                opacity: 1;
            }
           .dz-buttons, .template-buttons {
                z-index: 111;
            } 
            .dz-buttons > div {
                transform: translate(${60+props.buttonsSize}px,0);
                width: 50px;
                user-select: none;
                text-align: right;
                height: 100px;
            }
            .dz-buttons svg, .template-buttons svg{
                pointer-events: none;
            }
            div.dz-buttons {
                margin-left: 700px;
            }
            .dz-buttons, .template-buttons {
                opacity: 0;
                position: relative;
                overflow: visible;
                width: 0px;
                height: 0px;
                line-height:0;
            }
            .template-buttons {
                transform: translate(${-18-props.buttonsSize}px, 0);
            }
            .template-buttons > div {
                width: 40px;
                height: 60px;
            }
        </style>
    `
}

function blockButtons(e, pdfEditor) {
    let size = pdfEditor.properties.buttonsSize
    let closestDz = e.target.closest('.page .template:not(.col-xs)');
    closestDz = closestDz || e.target.cl
    if (closestDz !== pdfEditor.mouseOverDz) {
        pdfEditor.removeBySel('.dz-buttons');
        pdfEditor.mouseOverDz = closestDz;
        if (closestDz) {
            let tb = document.createElement('div');
            tb.classList.add('dz-buttons');

            let canMove = closestDz.getAttribute('block_no_move') !== 'true';
            let canCopy = closestDz.getAttribute('block_no_copy') !== 'true';
            if (e.target.querySelector('.page-break'))
                canCopy = 0;
            tb.innerHTML = `
                    <div>
                        ${canMove ? `<span class='handle'>${Icons.move(size, size)}</span>` : ''}
                        ${canCopy ? `<span class='copy'>${Icons.copy(size, size)}</span>` : ''}
                        ${canCopy ? `<span class='del'>${Icons.del(size, size)}</span>` : ''}
                        ${canCopy ? `<span class='up'>${Icons.up(size, size)}</span>` : ''}
                        ${canCopy ? `<span class='down'>${Icons.down(size, size)}</span>` : ''}
                    </div>
                `;
            closestDz.insertBefore(tb, closestDz.firstChild);

            let copy = tb.querySelector('.copy')
            copy && (copy.onclick = e => blocks.copyBlock(e))

            let del = tb.querySelector('.del')
            del && (del.onclick = e => {
                e.stopPropagation();
                let tpl = e.target.closest('.template');
                tpl.remove();
            });

            let up = tb.querySelector('.up')
            up && (up.onclick = e => {
                e.stopPropagation();
                let tpl = e.target.closest('.template');
                if (tpl.previousSibling && tpl.previousSibling.nodeName.toLowerCase() === "div")
                   tpl.parentNode.insertBefore(tpl, tpl.previousSibling)
            });

            let down = tb.querySelector('.down')
            down && (down.onclick = e => {
                e.stopPropagation();
                let tpl = e.target.closest('.template');
                tpl.parentNode.insertBefore(tpl, tpl.nextSibling.nextSibling)
            });
        }
    }
    return closestDz;
}

function elementButtons(e, pdfEditor, closestDz) {
    let size = pdfEditor.properties.buttonsSize
    let closestTpl = e.target.closest('.page .template.col-xs');
    if (closestTpl !== pdfEditor.mouseOverTpl) {
        pdfEditor.removeBySel('.template-buttons');
        pdfEditor.mouseOverTpl = closestTpl;
        let canEdit = closestDz && closestDz.getAttribute('block_no_edit') !== 'true';
        if (closestTpl && canEdit) {
            let closestTpl1 = e.target.closest('.page .template.col-xs:not(.mce-edit-focus)');
            let tb = document.createElement('div');
            tb.classList.add('template-buttons');
            tb.innerHTML = `
                    <div>
                        <div class='handle'>${Icons.move(size, size)}</div>
                    </div>
                `;
            closestTpl1.insertBefore(tb, closestTpl1.firstChild)
        }
    }
}



},{"./Icons":20,"./blocks":24}],29:[function(require,module,exports){
module.exports = `
<style>
p {
    margin-block-start: 0!important;
    margin-block-end: 0 !important;
}
.page {
    display: inline-block;
    min-height: 1110px;
    width: 100%;
    background: white;
    text-align: left;
    padding: 5px;
}
.template {
    color: black;
    width: 100%;
}
.page > .template:not(:last-child) {
    margin-bottom: 5px;
}
div.dropzone.row {
    min-height: 35px;
    margin: 0;
    transition: 300ms;
}
div.dropzone.row.empty-drop-zone {
     min-height: 0px;
     opacity: 0;
}
div.template.hover-state div.dropzone.row.empty-drop-zone {
     min-height: 25px;
     opacity: 1;
     background-color: #0002;
}
.page .page-break {
    margin-left: -20px;
    margin-right: -20px;
    background: var(--bg-col);
    color: orange;
}
.page-break {
    background: #eee;
    height: 35px;
    pointer-events:none;
    text-align: center;
    line-height: 35px;
}
 .ck-widget__selection-handle {
    height: 0;
    overflow: visible;
    transform: translate(-50,0);
 }
 .ck-widget_with-selection-handle{
    margin-top: 15px !important;
 }
 .ck-widget__selection-handle .ck.ck-icon {
    opacity: 0;
    pointer-events: none;
 }
 /*.template.col-xs {*/
 /*   padding: 2px!important;*/
 /*}*/
 /*.dropzone > .template {*/
 /*   height: 100%;*/
 /*}*/
 .page table {
    border-collapse: collapse;
 }
 .page table td {
    min-width: 40px;
 }
 
@page {
    margin: 0px;
}
</style>
`.split('\n').join('').split('    ').join('');
},{}],30:[function(require,module,exports){
var css = ".pdf-editor.wrapper {\n  display: flex;\n  flex-direction: row;\n  --bg-col: #444;\n}\n.pdf-editor .content {\n  flex-grow: 1;\n  background: var(--bg-col);\n  overflow-y: scroll;\n  padding: 50px 20px;\n  text-align: center;\n}\n.pdf-editor .page {\n  box-shadow: 1px 1px 4px 1px #2226;\n}\n.pdf-editor .sidePanel,\n.pdf-editor .propsPanel {\n  display: flex;\n  width: 360px;\n  /*background: #444;*/\n  flex-direction: column;\n  border-left: 1px solid gray;\n  border-right: 1px solid gray;\n  box-sizing: border-box;\n}\n.pdf-editor .templates {\n  /*flex-grow: 1;*/\n  /*overflow-y: auto;*/\n  /*overflow-x: hidden;*/\n  padding: 10px 25px;\n}\n.pdf-editor .templates .template {\n  margin-bottom: 5px;\n  /*padding:  5px 0;*/\n}\n.pdf-editor .buttons {\n  padding: 5px 5px 0 5px;\n}\n.pdf-editor .buttons button {\n  line-height: 30px;\n  border-radius: 11px;\n}\n.pdf-editor .template {\n  transition: 0.2s;\n}\n.pdf-editor #elements .template {\n  transition: 0.2s;\n  background: #eee;\n}\n.pdf-editor .sidePanel .dropzone {\n  background-color: #eee;\n  min-height: 35px;\n}\n.pdf-editor .sidePanel .template:hover {\n  transform: scale(1.1);\n  cursor: move;\n}\n.dropzone {\n  background-color: #0001;\n  /*border: 1px solid #0003;*/\n}\n/*div.dropzone.row:first-child,*/\n/*div.dropzone.row:last-child {*/\n/*    min-height: 0;*/\n/*}*/\n.handle {\n  cursor: move;\n}\n.copy {\n  cursor: pointer;\n}\n.handle,\n.copy,\n.del,\n.up,\n.down {\n  background-color: rgba(254, 177, 62, 0.4);\n  display: inline-block;\n  border-radius: 15%;\n  transition: 0.2s;\n  margin: 2px;\n}\n.handle:hover,\n.copy:hover,\n.del:hover,\n.up:hover,\n.down:hover {\n  background-color: rgba(254, 177, 62, 0.8);\n  /*background-color: rgb(187, 135, 64);*/\n}\n.dz-buttons,\n.template-buttons {\n  opacity: 0;\n  position: relative;\n  overflow: visible;\n  width: 0px;\n  height: 0px;\n  line-height: 0;\n}\n.template-buttons {\n  transform: translate(-40px, 0);\n}\n.template-buttons > div {\n  width: 40px;\n  height: 60px;\n  /*background: rebeccapurple;*/\n}\ndiv.dz-buttons {\n  margin-left: 700px;\n}\n.svg-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\ntable td {\n  min-width: 50px;\n  min-height: 30px;\n  border: 1px solid black;\n}\n.sub-label {\n  font-size: 16px;\n  color: #999;\n  font-family: Arial, sans-serif;\n}\n.sub-label:first-child {\n  padding-top: 5px;\n}\n.sidePanel #elements > div.template {\n  box-shadow: 0 0 0 1px gray;\n  text-align: center;\n}\n.sidePanel #elements  > div.template {\n  text-align: center;\n}\n.sidePanel #elements  table {\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.sidePanel #elements  img {\n  margin-bottom: -4px;\n}\ndiv.template  table {\n  border-collapse: collapse;\n}\n.sidePanel textarea {\n  width: 333px;\n  height: 84px;\n}\n.sidePanel button,\n.sidePanel input[type=\"text\"] {\n  height: 28px;\n  width: 337px;\n}\n/*.sidePanel button {*/\n/*    outline: none;*/\n/*    padding-top: 5px;*/\n/*    border-radius: 5px;*/\n/*    border: 1px solid orange;*/\n/*    background: #444;*/\n/*    color: white;*/\n/*}*/\n.sidePanel textarea,\n.sidePanel input[type=\"text\"] {\n  border-radius: 4px;\n  background: #444;\n  color: white;\n  border: 1px solid #999;\n  margin-bottom: 5px;\n}\n.groupName {\n  width: 360px;\n  padding-left: 15px;\n  border-top: 1px solid gray;\n  border-bottom: 1px solid gray;\n  /*text-align: center;*/\n  font-size: 20px;\n  line-height: 30px;\n  font-family: Arial, sans-serif;\n  color: #999;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.groupName + div {\n  transition: 300ms;\n  max-height: 100vh;\n  overflow: hidden;\n}\n.groupName.collapsed + div {\n  max-height: 0;\n  min-height: 0 !important;\n  padding-top: 0;\n  padding-bottom: 0;\n  overflow: hidden;\n}\n.groupName:after {\n  content: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30'><circle fill='%23777' cx='15' cy='15' r='10' /><polyline stroke-width='3' points='10 13 15 18 20 13' fill='none' stroke='%23444'/></svg>\");\n  transition: 300ms;\n  float: right;\n  margin-right: 10px;\n  display: inline-block;\n  line-height: 0px;\n}\n.groupName.collapsed:after {\n  transform: rotate(90deg) scale(-1,-1);\n}\n.sidePanel table {\n  /*padding: 5px;*/\n  margin-left: 40px;\n}\n.sidePanel tr:nth-child(2) td:nth-child(3) {\n  background: lightgray;\n}\n.pdf-editor .page {\n  width: 800px;\n}\n"; (require("browserify-css").createStyle(css, { "href": "src\\pdf-editor\\pdf-editor.css" }, { "insertAt": "bottom" })); module.exports = css;
},{"browserify-css":5}],31:[function(require,module,exports){
module.exports = {

    htmlTemplate: properties => `
         <path fill="none" stroke="#ff6e1b"></path>
    `,

    initComponent(parentComponent) {
        this.blockSelectionFrame = parentComponent.querySelector('path');
    },

    updateComponent(pdfEditor) {
        if (!pdfEditor.selectedBlock)
            return this.blockSelectionFrame.removeAttribute('d');
        let r = pdfEditor.selectedBlock.getBoundingClientRect();
        this.blockSelectionFrame.setAttribute('d',`M${r.x},${r.y}h${r.width}v${r.height}h-${r.width}z`)
    }
}
},{}],32:[function(require,module,exports){
let blocks = require('../blocks');

module.exports = {

    htmlTemplate(properties) {
        return (this.enabled = properties.floatingBlockName) ? `
            <g>
                <rect y="-30" rx="5" height="25" fill="rgb(187, 135, 64)"></rect>
                <text y="-10" x="10"></text>
            </g>
        ` : '';
    },

    initComponent(parentComponent) {
        if (!this.enabled)
            return
        this.blockNameGroup = parentComponent.querySelector('.svg-overlay g g');
        this.blockNameBg = parentComponent.querySelector('.svg-overlay g g rect');
        this.blockNameText = parentComponent.querySelector('.svg-overlay g g text');
    },

    updateComponent(pdfEditor) {
        if (!this.enabled)
            return
        let selectedBlock = pdfEditor.selectedBlock;
        if (!selectedBlock)
            return this.blockNameGroup.setAttribute(`transform`, `translate(0,-1000)`);
        let r = selectedBlock.getBoundingClientRect();
        this.blockNameGroup.setAttribute(`transform`, `translate(${r.x},${r.y})`);
        this.blockNameText.textContent = selectedBlock.getAttribute(blocks.propertyKeys.block_name);
        r = this.blockNameText.getBoundingClientRect();
        this.blockNameBg.setAttribute('width', r.width + 20);
    }
}
},{"../blocks":24}],33:[function(require,module,exports){
let floatingBlockName = require('./floatingBlockName');
let blockSelection = require('./blockSelection');

module.exports = {

    htmlTemplate: properties => `
        <svg class="svg-overlay">
            <defs>
                <clipPath id="editor_clip_rect">
                    <polygon></polygon>
                </clipPath>
            </defs>
            <g clip-path="url(#editor_clip_rect)">
                ${blockSelection.htmlTemplate(properties)}
                ${floatingBlockName.htmlTemplate(properties)}
            </g>
        </svg>
    `,

    initSvgOverlay: function (pdfEditor) {
        this.pdfEditor = pdfEditor;
        this.overlay = pdfEditor.targetElement.querySelector('.svg-overlay');
        this.overlayClipPolygon = this.overlay.querySelector('#editor_clip_rect polygon');
        blockSelection.initComponent(this.overlay);
        floatingBlockName.initComponent(this.overlay);
        this.updateComponent(this.pdfEditor);
    },

    updateComponent(pdfEditor) {

        requestAnimationFrame(() => this.updateComponent(pdfEditor));

        if (!this.pdfEditor .targetElement.querySelector('.pdf-editor .content'))
            return;

        this.overlay.setAttribute('viewBox',`0 0 ${innerWidth} ${innerHeight}`);
        this.overlay.setAttribute('width', innerWidth);
        this.overlay.setAttribute('height', innerHeight);

        let r = this.pdfEditor.targetElement .querySelector('.pdf-editor .content').getBoundingClientRect();
        let scrollWidth = 17;
        let pts = [
            r.x, r.y,
            r.x + r.width - scrollWidth, r.y,
            r.x + r.width - scrollWidth, r.y + r.height,
            r.x, r.y + r.height
        ];
        this.overlayClipPolygon.setAttribute('points', pts.join(' '));

        blockSelection.updateComponent(this.pdfEditor)
        floatingBlockName.updateComponent(this.pdfEditor)
    }

}
},{"./blockSelection":31,"./floatingBlockName":32}]},{},[21])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXBlbmRlbmNpZXMvY2tlZGl0b3IvY2tlZGl0b3ItYmFsb29uL2J1aWxkL2NrZWRpdG9yLmpzIiwiZGVwZW5kZW5jaWVzL2NrZWRpdG9yL3J1LmpzIiwiZGVwZW5kZW5jaWVzL2ZsZXhib3hncmlkL2ZsZXhib3hncmlkLm1pbi5jc3MiLCJub2RlX21vZHVsZXMvYXRvYS9hdG9hLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnktY3NzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvY29udHJhL2RlYm91bmNlLmpzIiwibm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvY3Jvc3N2ZW50LmpzIiwibm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvZXZlbnRtYXAuanMiLCJub2RlX21vZHVsZXMvY3VzdG9tLWV2ZW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2RyYWd1bGEvY2xhc3Nlcy5qcyIsIm5vZGVfbW9kdWxlcy9kcmFndWxhL2Rpc3QvZHJhZ3VsYS5taW4uY3NzIiwibm9kZV9tb2R1bGVzL2RyYWd1bGEvZHJhZ3VsYS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdGlja3kvdGlja3ktYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwicGFja2FnZS5qc29uIiwic3JjL3BkZi1lZGl0b3IvQ2tFZGl0b3I1LmpzIiwic3JjL3BkZi1lZGl0b3IvRm9ySXRleHRGb3JtYXR0ZXIuanMiLCJzcmMvcGRmLWVkaXRvci9JY29ucy5qcyIsInNyYy9wZGYtZWRpdG9yL1BkZkVkaXRvci5qcyIsInNyYy9wZGYtZWRpdG9yL1RlbXBsYXRlc0ZhY3RvcnkuanMiLCJzcmMvcGRmLWVkaXRvci9ibG9ja1Byb3BlcnRpZXMuanMiLCJzcmMvcGRmLWVkaXRvci9ibG9ja3MuanMiLCJzcmMvcGRmLWVkaXRvci9kbmQuanMiLCJzcmMvcGRmLWVkaXRvci9kb2N1bWVudENsZWFuZXIuanMiLCJzcmMvcGRmLWVkaXRvci9odG1sLXRlbXBsYXRlLmpzIiwic3JjL3BkZi1lZGl0b3IvbW91c2VvdmVyQnV0dG9ucy5qcyIsInNyYy9wZGYtZWRpdG9yL3BhZ2Utc3R5bGVzLmpzIiwic3JjL3BkZi1lZGl0b3IvcGRmLWVkaXRvci5jc3MiLCJzcmMvcGRmLWVkaXRvci9zdmdPdmVybGF5L2Jsb2NrU2VsZWN0aW9uLmpzIiwic3JjL3BkZi1lZGl0b3Ivc3ZnT3ZlcmxheS9mbG9hdGluZ0Jsb2NrTmFtZS5qcyIsInNyYy9wZGYtZWRpdG9yL3N2Z092ZXJsYXkvc3ZnT3ZlcmxheS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3WUE7O0FDQUE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2htQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKiFcclxuICogQGxpY2Vuc2UgQ29weXJpZ2h0IChjKSAyMDAzLTIwMjAsIENLU291cmNlIC0gRnJlZGVyaWNvIEtuYWJiZW4uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqIEZvciBsaWNlbnNpbmcsIHNlZSBMSUNFTlNFLm1kLlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24odCl7dFtcInJ1XCJdPU9iamVjdC5hc3NpZ24odFtcInJ1XCJdfHx7fSxyZXF1aXJlKCcuLi8uLi9ydScpKX0pKHdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlN8fCh3aW5kb3cuQ0tFRElUT1JfVFJBTlNMQVRJT05TPXt9KSk7KGZ1bmN0aW9uIHQoZSxpKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGU9PT1cIm9iamVjdFwiKW1vZHVsZS5leHBvcnRzPWkoKTtlbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpZGVmaW5lKFtdLGkpO2Vsc2UgaWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiKWV4cG9ydHNbXCJCYWxsb29uRWRpdG9yXCJdPWkoKTtlbHNlIGVbXCJCYWxsb29uRWRpdG9yXCJdPWkoKX0pKHdpbmRvdywoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gaShuKXtpZihlW25dKXtyZXR1cm4gZVtuXS5leHBvcnRzfXZhciBvPWVbbl09e2k6bixsOmZhbHNlLGV4cG9ydHM6e319O3Rbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsaSk7by5sPXRydWU7cmV0dXJuIG8uZXhwb3J0c31pLm09dDtpLmM9ZTtpLmQ9ZnVuY3Rpb24odCxlLG4pe2lmKCFpLm8odCxlKSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTp0cnVlLGdldDpufSl9fTtpLnI9ZnVuY3Rpb24odCl7aWYodHlwZW9mIFN5bWJvbCE9PVwidW5kZWZpbmVkXCImJlN5bWJvbC50b1N0cmluZ1RhZyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KX07aS50PWZ1bmN0aW9uKHQsZSl7aWYoZSYxKXQ9aSh0KTtpZihlJjgpcmV0dXJuIHQ7aWYoZSY0JiZ0eXBlb2YgdD09PVwib2JqZWN0XCImJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2kucihuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkobixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTp0cnVlLHZhbHVlOnR9KTtpZihlJjImJnR5cGVvZiB0IT1cInN0cmluZ1wiKWZvcih2YXIgbyBpbiB0KWkuZChuLG8sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxvKSk7cmV0dXJuIG59O2kubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24gZSgpe3JldHVybiB0W1wiZGVmYXVsdFwiXX06ZnVuY3Rpb24gZSgpe3JldHVybiB0fTtpLmQoZSxcImFcIixlKTtyZXR1cm4gZX07aS5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfTtpLnA9XCJcIjtyZXR1cm4gaShpLnM9MTE0KX0oW2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLmQoZSxcImJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gb30pKTtpLmQoZSxcImFcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcn0pKTtjb25zdCBuPVwiaHR0cHM6Ly9ja2VkaXRvci5jb20vZG9jcy9ja2VkaXRvcjUvbGF0ZXN0L2ZyYW1ld29yay9ndWlkZXMvc3VwcG9ydC9lcnJvci1jb2Rlcy5odG1sXCI7Y2xhc3MgbyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsZSxpKXt0PXIodCk7aWYoaSl7dCs9XCIgXCIrSlNPTi5zdHJpbmdpZnkoaSl9c3VwZXIodCk7dGhpcy5uYW1lPVwiQ0tFZGl0b3JFcnJvclwiO3RoaXMuY29udGV4dD1lO3RoaXMuZGF0YT1pfWlzKHQpe3JldHVybiB0PT09XCJDS0VkaXRvckVycm9yXCJ9c3RhdGljIHJldGhyb3dVbmV4cGVjdGVkRXJyb3IodCxlKXtpZih0LmlzJiZ0LmlzKFwiQ0tFZGl0b3JFcnJvclwiKSl7dGhyb3cgdH1jb25zdCBpPW5ldyBvKHQubWVzc2FnZSxlKTtpLnN0YWNrPXQuc3RhY2s7dGhyb3cgaX19ZnVuY3Rpb24gcih0KXtjb25zdCBlPXQubWF0Y2goL14oW146XSspOi8pO2lmKCFlKXtyZXR1cm4gdH1yZXR1cm4gdCtgIFJlYWQgbW9yZTogJHtufSNlcnJvci0ke2VbMV19XFxuYH19LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1mdW5jdGlvbiB0KCl7dmFyIGU7cmV0dXJuIGZ1bmN0aW9uIHQoKXtpZih0eXBlb2YgZT09PVwidW5kZWZpbmVkXCIpe2U9Qm9vbGVhbih3aW5kb3cmJmRvY3VtZW50JiZkb2N1bWVudC5hbGwmJiF3aW5kb3cuYXRvYil9cmV0dXJuIGV9fSgpO3ZhciBvPWZ1bmN0aW9uIHQoKXt2YXIgZT17fTtyZXR1cm4gZnVuY3Rpb24gdChpKXtpZih0eXBlb2YgZVtpXT09PVwidW5kZWZpbmVkXCIpe3ZhciBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaSk7aWYod2luZG93LkhUTUxJRnJhbWVFbGVtZW50JiZuIGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KXt0cnl7bj1uLmNvbnRlbnREb2N1bWVudC5oZWFkfWNhdGNoKHQpe249bnVsbH19ZVtpXT1ufXJldHVybiBlW2ldfX0oKTt2YXIgcj1bXTtmdW5jdGlvbiBzKHQpe3ZhciBlPS0xO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXtpZihyW2ldLmlkZW50aWZpZXI9PT10KXtlPWk7YnJlYWt9fXJldHVybiBlfWZ1bmN0aW9uIGEodCxlKXt2YXIgaT17fTt2YXIgbj1bXTtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIGE9dFtvXTt2YXIgYz1lLmJhc2U/YVswXStlLmJhc2U6YVswXTt2YXIgbD1pW2NdfHwwO3ZhciBkPVwiXCIuY29uY2F0KGMsXCIgXCIpLmNvbmNhdChsKTtpW2NdPWwrMTt2YXIgdT1zKGQpO3ZhciBoPXtjc3M6YVsxXSxtZWRpYTphWzJdLHNvdXJjZU1hcDphWzNdfTtpZih1IT09LTEpe3JbdV0ucmVmZXJlbmNlcysrO3JbdV0udXBkYXRlcihoKX1lbHNle3IucHVzaCh7aWRlbnRpZmllcjpkLHVwZGF0ZXI6bShoLGUpLHJlZmVyZW5jZXM6MX0pfW4ucHVzaChkKX1yZXR1cm4gbn1mdW5jdGlvbiBjKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTt2YXIgbj10LmF0dHJpYnV0ZXN8fHt9O2lmKHR5cGVvZiBuLm5vbmNlPT09XCJ1bmRlZmluZWRcIil7dmFyIHI9dHJ1ZT9pLm5jOnVuZGVmaW5lZDtpZihyKXtuLm5vbmNlPXJ9fU9iamVjdC5rZXlzKG4pLmZvckVhY2goKGZ1bmN0aW9uKHQpe2Uuc2V0QXR0cmlidXRlKHQsblt0XSl9KSk7aWYodHlwZW9mIHQuaW5zZXJ0PT09XCJmdW5jdGlvblwiKXt0Lmluc2VydChlKX1lbHNle3ZhciBzPW8odC5pbnNlcnR8fFwiaGVhZFwiKTtpZighcyl7dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKX1zLmFwcGVuZENoaWxkKGUpfXJldHVybiBlfWZ1bmN0aW9uIGwodCl7aWYodC5wYXJlbnROb2RlPT09bnVsbCl7cmV0dXJuIGZhbHNlfXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX12YXIgZD1mdW5jdGlvbiB0KCl7dmFyIGU9W107cmV0dXJuIGZ1bmN0aW9uIHQoaSxuKXtlW2ldPW47cmV0dXJuIGUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcXG5cIil9fSgpO2Z1bmN0aW9uIHUodCxlLGksbil7dmFyIG89aT9cIlwiOm4ubWVkaWE/XCJAbWVkaWEgXCIuY29uY2F0KG4ubWVkaWEsXCIge1wiKS5jb25jYXQobi5jc3MsXCJ9XCIpOm4uY3NzO2lmKHQuc3R5bGVTaGVldCl7dC5zdHlsZVNoZWV0LmNzc1RleHQ9ZChlLG8pfWVsc2V7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobyk7dmFyIHM9dC5jaGlsZE5vZGVzO2lmKHNbZV0pe3QucmVtb3ZlQ2hpbGQoc1tlXSl9aWYocy5sZW5ndGgpe3QuaW5zZXJ0QmVmb3JlKHIsc1tlXSl9ZWxzZXt0LmFwcGVuZENoaWxkKHIpfX19ZnVuY3Rpb24gaCh0LGUsaSl7dmFyIG49aS5jc3M7dmFyIG89aS5tZWRpYTt2YXIgcj1pLnNvdXJjZU1hcDtpZihvKXt0LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsbyl9ZWxzZXt0LnJlbW92ZUF0dHJpYnV0ZShcIm1lZGlhXCIpfWlmKHImJmJ0b2Epe24rPVwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocikpKSksXCIgKi9cIil9aWYodC5zdHlsZVNoZWV0KXt0LnN0eWxlU2hlZXQuY3NzVGV4dD1ufWVsc2V7d2hpbGUodC5maXJzdENoaWxkKXt0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCl9dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuKSl9fXZhciBmPW51bGw7dmFyIGc9MDtmdW5jdGlvbiBtKHQsZSl7dmFyIGk7dmFyIG47dmFyIG87aWYoZS5zaW5nbGV0b24pe3ZhciByPWcrKztpPWZ8fChmPWMoZSkpO249dS5iaW5kKG51bGwsaSxyLGZhbHNlKTtvPXUuYmluZChudWxsLGkscix0cnVlKX1lbHNle2k9YyhlKTtuPWguYmluZChudWxsLGksZSk7bz1mdW5jdGlvbiB0KCl7bChpKX19bih0KTtyZXR1cm4gZnVuY3Rpb24gZShpKXtpZihpKXtpZihpLmNzcz09PXQuY3NzJiZpLm1lZGlhPT09dC5tZWRpYSYmaS5zb3VyY2VNYXA9PT10LnNvdXJjZU1hcCl7cmV0dXJufW4odD1pKX1lbHNle28oKX19fXQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2U9ZXx8e307aWYoIWUuc2luZ2xldG9uJiZ0eXBlb2YgZS5zaW5nbGV0b24hPT1cImJvb2xlYW5cIil7ZS5zaW5nbGV0b249bigpfXQ9dHx8W107dmFyIGk9YSh0LGUpO3JldHVybiBmdW5jdGlvbiB0KG4pe249bnx8W107aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4pIT09XCJbb2JqZWN0IEFycmF5XVwiKXtyZXR1cm59Zm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBjPWlbb107dmFyIGw9cyhjKTtyW2xdLnJlZmVyZW5jZXMtLX12YXIgZD1hKG4sZSk7Zm9yKHZhciB1PTA7dTxpLmxlbmd0aDt1Kyspe3ZhciBoPWlbdV07dmFyIGY9cyhoKTtpZihyW2ZdLnJlZmVyZW5jZXM9PT0wKXtyW2ZdLnVwZGF0ZXIoKTtyLnNwbGljZShmLDEpfX1pPWR9fX0sLGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1pKDcpO3ZhciBvPXR5cGVvZiBzZWxmPT1cIm9iamVjdFwiJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZjt2YXIgcj1uW1wiYVwiXXx8b3x8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO2VbXCJhXCJdPXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjsoZnVuY3Rpb24odCl7dmFyIG49aSgzKTt2YXIgbz1pKDE0KTt2YXIgcj10eXBlb2YgZXhwb3J0cz09XCJvYmplY3RcIiYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHM7dmFyIHM9ciYmdHlwZW9mIHQ9PVwib2JqZWN0XCImJnQmJiF0Lm5vZGVUeXBlJiZ0O3ZhciBhPXMmJnMuZXhwb3J0cz09PXI7dmFyIGM9YT9uW1wiYVwiXS5CdWZmZXI6dW5kZWZpbmVkO3ZhciBsPWM/Yy5pc0J1ZmZlcjp1bmRlZmluZWQ7dmFyIGQ9bHx8b1tcImFcIl07ZVtcImFcIl09ZH0pLmNhbGwodGhpcyxpKDkpKHQpKX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXt2YXIgbj1pKDcpO3ZhciBvPXR5cGVvZiBleHBvcnRzPT1cIm9iamVjdFwiJiZleHBvcnRzJiYhZXhwb3J0cy5ub2RlVHlwZSYmZXhwb3J0czt2YXIgcj1vJiZ0eXBlb2YgdD09XCJvYmplY3RcIiYmdCYmIXQubm9kZVR5cGUmJnQ7dmFyIHM9ciYmci5leHBvcnRzPT09bzt2YXIgYT1zJiZuW1wiYVwiXS5wcm9jZXNzO3ZhciBjPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PXImJnIucmVxdWlyZSYmci5yZXF1aXJlKFwidXRpbFwiKS50eXBlcztpZih0KXtyZXR1cm4gdH1yZXR1cm4gYSYmYS5iaW5kaW5nJiZhLmJpbmRpbmcoXCJ1dGlsXCIpfWNhdGNoKHQpe319KCk7ZVtcImFcIl09Y30pLmNhbGwodGhpcyxpKDkpKHQpKX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXt2YXIgZT1pKDApO2NvbnN0IG49XCIxOC4wLjBcIjtjb25zdCBvPXR5cGVvZiB3aW5kb3c9PT1cIm9iamVjdFwiP3dpbmRvdzp0O2lmKG8uQ0tFRElUT1JfVkVSU0lPTil7dGhyb3cgbmV3IGVbXCJiXCJdKFwiY2tlZGl0b3ItZHVwbGljYXRlZC1tb2R1bGVzOiBTb21lIENLRWRpdG9yIDUgbW9kdWxlcyBhcmUgZHVwbGljYXRlZC5cIixudWxsKX1lbHNle28uQ0tFRElUT1JfVkVSU0lPTj1ufX0pLmNhbGwodGhpcyxpKDEwKSl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjsoZnVuY3Rpb24odCl7dmFyIGk9dHlwZW9mIHQ9PVwib2JqZWN0XCImJnQmJnQuT2JqZWN0PT09T2JqZWN0JiZ0O2VbXCJhXCJdPWl9KS5jYWxsKHRoaXMsaSgxMCkpfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7KGZ1bmN0aW9uKHQpe3ZhciBuPWkoMyk7dmFyIG89dHlwZW9mIGV4cG9ydHM9PVwib2JqZWN0XCImJmV4cG9ydHMmJiFleHBvcnRzLm5vZGVUeXBlJiZleHBvcnRzO3ZhciByPW8mJnR5cGVvZiB0PT1cIm9iamVjdFwiJiZ0JiYhdC5ub2RlVHlwZSYmdDt2YXIgcz1yJiZyLmV4cG9ydHM9PT1vO3ZhciBhPXM/bltcImFcIl0uQnVmZmVyOnVuZGVmaW5lZCxjPWE/YS5hbGxvY1Vuc2FmZTp1bmRlZmluZWQ7ZnVuY3Rpb24gbCh0LGUpe2lmKGUpe3JldHVybiB0LnNsaWNlKCl9dmFyIGk9dC5sZW5ndGgsbj1jP2MoaSk6bmV3IHQuY29uc3RydWN0b3IoaSk7dC5jb3B5KG4pO3JldHVybiBufWVbXCJhXCJdPWx9KS5jYWxsKHRoaXMsaSg5KSh0KSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCF0LndlYnBhY2tQb2x5ZmlsbCl7dmFyIGU9T2JqZWN0LmNyZWF0ZSh0KTtpZighZS5jaGlsZHJlbillLmNoaWxkcmVuPVtdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwibG9hZGVkXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5sfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiaWRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBlLml9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJleHBvcnRzXCIse2VudW1lcmFibGU6dHJ1ZX0pO2Uud2VicGFja1BvbHlmaWxsPTF9cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUpe3ZhciBpO2k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7aT1pfHxuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKHQpe2lmKHR5cGVvZiB3aW5kb3c9PT1cIm9iamVjdFwiKWk9d2luZG93fXQuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDU1KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSgxMDgpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDEwOSk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuIGZhbHNlfWVbXCJhXCJdPW59LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoMTYpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay1oaWRkZW57ZGlzcGxheTpub25lIWltcG9ydGFudH0uY2suY2stcmVzZXQsLmNrLmNrLXJlc2V0X2FsbCwuY2suY2stcmVzZXRfYWxsICp7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOmF1dG87aGVpZ2h0OmF1dG87cG9zaXRpb246c3RhdGljfTpyb290ey0tY2stei1kZWZhdWx0OjE7LS1jay16LW1vZGFsOmNhbGModmFyKC0tY2stei1kZWZhdWx0KSArIDk5OSk7LS1jay1jb2xvci1iYXNlLWZvcmVncm91bmQ6I2ZhZmFmYTstLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZDojZmZmOy0tY2stY29sb3ItYmFzZS1ib3JkZXI6I2M0YzRjNDstLWNrLWNvbG9yLWJhc2UtYWN0aW9uOiM2MWIwNDU7LS1jay1jb2xvci1iYXNlLWZvY3VzOiM2Y2I1Zjk7LS1jay1jb2xvci1iYXNlLXRleHQ6IzMzMzstLWNrLWNvbG9yLWJhc2UtYWN0aXZlOiMxOThjZjA7LS1jay1jb2xvci1iYXNlLWFjdGl2ZS1mb2N1czojMGU3ZmUxOy0tY2stY29sb3ItYmFzZS1lcnJvcjojZGIzNzAwOy0tY2stY29sb3ItZm9jdXMtYm9yZGVyOiMxZjg5ZTU7LS1jay1jb2xvci1mb2N1cy1vdXRlci1zaGFkb3c6I2JjZGVmYjstLWNrLWNvbG9yLWZvY3VzLWRpc2FibGVkLXNoYWRvdzpyZ2JhKDExOSwxODYsMjQ4LDAuMyk7LS1jay1jb2xvci1mb2N1cy1lcnJvci1zaGFkb3c6cmdiYSgyNTUsNjQsMzEsMC4zKTstLWNrLWNvbG9yLXRleHQ6dmFyKC0tY2stY29sb3ItYmFzZS10ZXh0KTstLWNrLWNvbG9yLXNoYWRvdy1kcm9wOnJnYmEoMCwwLDAsMC4xNSk7LS1jay1jb2xvci1zaGFkb3ctZHJvcC1hY3RpdmU6cmdiYSgwLDAsMCwwLjIpOy0tY2stY29sb3Itc2hhZG93LWlubmVyOnJnYmEoMCwwLDAsMC4xKTstLWNrLWNvbG9yLWJ1dHRvbi1kZWZhdWx0LWJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7LS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1ob3Zlci1iYWNrZ3JvdW5kOiNlNmU2ZTY7LS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1hY3RpdmUtYmFja2dyb3VuZDojZDlkOWQ5Oy0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtYWN0aXZlLXNoYWRvdzojYmZiZmJmOy0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtZGlzYWJsZWQtYmFja2dyb3VuZDp0cmFuc3BhcmVudDstLWNrLWNvbG9yLWJ1dHRvbi1vbi1iYWNrZ3JvdW5kOiNkZWRlZGU7LS1jay1jb2xvci1idXR0b24tb24taG92ZXItYmFja2dyb3VuZDojYzRjNGM0Oy0tY2stY29sb3ItYnV0dG9uLW9uLWFjdGl2ZS1iYWNrZ3JvdW5kOiNiYWJhYmE7LS1jay1jb2xvci1idXR0b24tb24tYWN0aXZlLXNoYWRvdzojYTFhMWExOy0tY2stY29sb3ItYnV0dG9uLW9uLWRpc2FibGVkLWJhY2tncm91bmQ6I2RlZGVkZTstLWNrLWNvbG9yLWJ1dHRvbi1hY3Rpb24tYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWFjdGlvbik7LS1jay1jb2xvci1idXR0b24tYWN0aW9uLWhvdmVyLWJhY2tncm91bmQ6IzU3OWUzZDstLWNrLWNvbG9yLWJ1dHRvbi1hY3Rpb24tYWN0aXZlLWJhY2tncm91bmQ6IzUzOTczYjstLWNrLWNvbG9yLWJ1dHRvbi1hY3Rpb24tYWN0aXZlLXNoYWRvdzojNDk4NDMzOy0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1kaXNhYmxlZC1iYWNrZ3JvdW5kOiM3ZWMzNjU7LS1jay1jb2xvci1idXR0b24tYWN0aW9uLXRleHQ6dmFyKC0tY2stY29sb3ItYmFzZS1iYWNrZ3JvdW5kKTstLWNrLWNvbG9yLWJ1dHRvbi1zYXZlOiMwMDhhMDA7LS1jay1jb2xvci1idXR0b24tY2FuY2VsOiNkYjM3MDA7LS1jay1jb2xvci1zd2l0Y2gtYnV0dG9uLW9mZi1iYWNrZ3JvdW5kOiNiMGIwYjA7LS1jay1jb2xvci1zd2l0Y2gtYnV0dG9uLW9mZi1ob3Zlci1iYWNrZ3JvdW5kOiNhM2EzYTM7LS1jay1jb2xvci1zd2l0Y2gtYnV0dG9uLW9uLWJhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1iYWNrZ3JvdW5kKTstLWNrLWNvbG9yLXN3aXRjaC1idXR0b24tb24taG92ZXItYmFja2dyb3VuZDojNTc5ZTNkOy0tY2stY29sb3Itc3dpdGNoLWJ1dHRvbi1pbm5lci1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1zd2l0Y2gtYnV0dG9uLWlubmVyLXNoYWRvdzpyZ2JhKDAsMCwwLDAuMSk7LS1jay1jb2xvci1kcm9wZG93bi1wYW5lbC1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1kcm9wZG93bi1wYW5lbC1ib3JkZXI6dmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpOy0tY2stY29sb3ItaW5wdXQtYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpOy0tY2stY29sb3ItaW5wdXQtYm9yZGVyOiNjN2M3Yzc7LS1jay1jb2xvci1pbnB1dC1lcnJvci1ib3JkZXI6dmFyKC0tY2stY29sb3ItYmFzZS1lcnJvcik7LS1jay1jb2xvci1pbnB1dC10ZXh0OnZhcigtLWNrLWNvbG9yLWJhc2UtdGV4dCk7LS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC1iYWNrZ3JvdW5kOiNmMmYyZjI7LS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC1ib3JkZXI6I2M3YzdjNzstLWNrLWNvbG9yLWlucHV0LWRpc2FibGVkLXRleHQ6IzVjNWM1YzstLWNrLWNvbG9yLWxpc3QtYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpOy0tY2stY29sb3ItbGlzdC1idXR0b24taG92ZXItYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1ob3Zlci1iYWNrZ3JvdW5kKTstLWNrLWNvbG9yLWxpc3QtYnV0dG9uLW9uLWJhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYmFzZS1hY3RpdmUpOy0tY2stY29sb3ItbGlzdC1idXR0b24tb24tYmFja2dyb3VuZC1mb2N1czp2YXIoLS1jay1jb2xvci1iYXNlLWFjdGl2ZS1mb2N1cyk7LS1jay1jb2xvci1saXN0LWJ1dHRvbi1vbi10ZXh0OnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1wYW5lbC1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1wYW5lbC1ib3JkZXI6dmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpOy0tY2stY29sb3ItdG9vbGJhci1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtZm9yZWdyb3VuZCk7LS1jay1jb2xvci10b29sYmFyLWJvcmRlcjp2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcik7LS1jay1jb2xvci10b29sdGlwLWJhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYmFzZS10ZXh0KTstLWNrLWNvbG9yLXRvb2x0aXAtdGV4dDp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpOy0tY2stY29sb3ItZW5naW5lLXBsYWNlaG9sZGVyLXRleHQ6IzcwNzA3MDstLWNrLWNvbG9yLXVwbG9hZC1iYXItYmFja2dyb3VuZDojNmNiNWY5Oy0tY2stY29sb3ItbGluay1kZWZhdWx0OiMwMDAwZjA7LS1jay1jb2xvci1saW5rLXNlbGVjdGVkLWJhY2tncm91bmQ6cmdiYSgzMSwxNzcsMjU1LDAuMSk7LS1jay1kaXNhYmxlZC1vcGFjaXR5Oi41Oy0tY2stZm9jdXMtb3V0ZXItc2hhZG93LWdlb21ldHJ5OjAgMCAwIDNweDstLWNrLWZvY3VzLW91dGVyLXNoYWRvdzp2YXIoLS1jay1mb2N1cy1vdXRlci1zaGFkb3ctZ2VvbWV0cnkpIHZhcigtLWNrLWNvbG9yLWZvY3VzLW91dGVyLXNoYWRvdyk7LS1jay1mb2N1cy1kaXNhYmxlZC1vdXRlci1zaGFkb3c6dmFyKC0tY2stZm9jdXMtb3V0ZXItc2hhZG93LWdlb21ldHJ5KSB2YXIoLS1jay1jb2xvci1mb2N1cy1kaXNhYmxlZC1zaGFkb3cpOy0tY2stZm9jdXMtZXJyb3Itb3V0ZXItc2hhZG93OnZhcigtLWNrLWZvY3VzLW91dGVyLXNoYWRvdy1nZW9tZXRyeSkgdmFyKC0tY2stY29sb3ItZm9jdXMtZXJyb3Itc2hhZG93KTstLWNrLWZvY3VzLXJpbmc6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWZvY3VzLWJvcmRlcik7LS1jay1mb250LXNpemUtYmFzZToxM3B4Oy0tY2stbGluZS1oZWlnaHQtYmFzZToxLjg0NjE1Oy0tY2stZm9udC1mYWNlOkhlbHZldGljYSxBcmlhbCxUYWhvbWEsVmVyZGFuYSxTYW5zLVNlcmlmOy0tY2stZm9udC1zaXplLXRpbnk6MC43ZW07LS1jay1mb250LXNpemUtc21hbGw6MC43NWVtOy0tY2stZm9udC1zaXplLW5vcm1hbDoxZW07LS1jay1mb250LXNpemUtYmlnOjEuNGVtOy0tY2stZm9udC1zaXplLWxhcmdlOjEuOGVtOy0tY2stdWktY29tcG9uZW50LW1pbi1oZWlnaHQ6Mi4zZW19LmNrLmNrLXJlc2V0LC5jay5jay1yZXNldF9hbGwsLmNrLmNrLXJlc2V0X2FsbCAqe21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O3RleHQtZGVjb3JhdGlvbjpub25lO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt0cmFuc2l0aW9uOm5vbmU7d29yZC13cmFwOmJyZWFrLXdvcmR9LmNrLmNrLXJlc2V0X2FsbCwuY2suY2stcmVzZXRfYWxsICp7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlO2ZvbnQ6bm9ybWFsIG5vcm1hbCBub3JtYWwgdmFyKC0tY2stZm9udC1zaXplLWJhc2UpL3ZhcigtLWNrLWxpbmUtaGVpZ2h0LWJhc2UpIHZhcigtLWNrLWZvbnQtZmFjZSk7Y29sb3I6dmFyKC0tY2stY29sb3ItdGV4dCk7dGV4dC1hbGlnbjpsZWZ0O3doaXRlLXNwYWNlOm5vd3JhcDtjdXJzb3I6YXV0bztmbG9hdDpub25lfS5jay5jay1yZXNldF9hbGwgLmNrLXJ0bCAqe3RleHQtYWxpZ246cmlnaHR9LmNrLmNrLXJlc2V0X2FsbCBpZnJhbWV7dmVydGljYWwtYWxpZ246aW5oZXJpdH0uY2suY2stcmVzZXRfYWxsIHRleHRhcmVhe3doaXRlLXNwYWNlOnByZS13cmFwfS5jay5jay1yZXNldF9hbGwgaW5wdXRbdHlwZT1wYXNzd29yZF0sLmNrLmNrLXJlc2V0X2FsbCBpbnB1dFt0eXBlPXRleHRdLC5jay5jay1yZXNldF9hbGwgdGV4dGFyZWF7Y3Vyc29yOnRleHR9LmNrLmNrLXJlc2V0X2FsbCBpbnB1dFt0eXBlPXBhc3N3b3JkXVtkaXNhYmxlZF0sLmNrLmNrLXJlc2V0X2FsbCBpbnB1dFt0eXBlPXRleHRdW2Rpc2FibGVkXSwuY2suY2stcmVzZXRfYWxsIHRleHRhcmVhW2Rpc2FibGVkXXtjdXJzb3I6ZGVmYXVsdH0uY2suY2stcmVzZXRfYWxsIGZpZWxkc2V0e3BhZGRpbmc6MTBweDtib3JkZXI6MnB4IGdyb292ZSAjZGZkZWUzfS5jay5jay1yZXNldF9hbGwgYnV0dG9uOjotbW96LWZvY3VzLWlubmVye3BhZGRpbmc6MDtib3JkZXI6MH0uY2tbZGlyPXJ0bF0sLmNrW2Rpcj1ydGxdIC5ja3t0ZXh0LWFsaWduOnJpZ2h0fTpyb290ey0tY2stYm9yZGVyLXJhZGl1czoycHg7LS1jay1pbm5lci1zaGFkb3c6MnB4IDJweCAzcHggdmFyKC0tY2stY29sb3Itc2hhZG93LWlubmVyKSBpbnNldDstLWNrLWRyb3Atc2hhZG93OjAgMXB4IDJweCAxcHggdmFyKC0tY2stY29sb3Itc2hhZG93LWRyb3ApOy0tY2stZHJvcC1zaGFkb3ctYWN0aXZlOjAgM3B4IDZweCAxcHggdmFyKC0tY2stY29sb3Itc2hhZG93LWRyb3AtYWN0aXZlKTstLWNrLXNwYWNpbmctdW5pdDowLjZlbTstLWNrLXNwYWNpbmctbGFyZ2U6Y2FsYyh2YXIoLS1jay1zcGFjaW5nLXVuaXQpKjEuNSk7LS1jay1zcGFjaW5nLXN0YW5kYXJkOnZhcigtLWNrLXNwYWNpbmctdW5pdCk7LS1jay1zcGFjaW5nLW1lZGl1bTpjYWxjKHZhcigtLWNrLXNwYWNpbmctdW5pdCkqMC44KTstLWNrLXNwYWNpbmctc21hbGw6Y2FsYyh2YXIoLS1jay1zcGFjaW5nLXVuaXQpKjAuNSk7LS1jay1zcGFjaW5nLXRpbnk6Y2FsYyh2YXIoLS1jay1zcGFjaW5nLXVuaXQpKjAuMyk7LS1jay1zcGFjaW5nLWV4dHJhLXRpbnk6Y2FsYyh2YXIoLS1jay1zcGFjaW5nLXVuaXQpKjAuMTYpfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDE4KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jzpyb290ey0tY2stYmFsbG9vbi1wYW5lbC1hcnJvdy16LWluZGV4OmNhbGModmFyKC0tY2stei1kZWZhdWx0KSAtIDMpfS5jay5jay1iYWxsb29uLXBhbmVse2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OnZhcigtLWNrLXotbW9kYWwpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfd2l0aC1hcnJvdzphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3c6YmVmb3Jle2NvbnRlbnQ6XCJcIjtwb3NpdGlvbjphYnNvbHV0ZX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3c6YmVmb3Jle3otaW5kZXg6dmFyKC0tY2stYmFsbG9vbi1wYW5lbC1hcnJvdy16LWluZGV4KX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3c6YWZ0ZXJ7ei1pbmRleDpjYWxjKHZhcigtLWNrLWJhbGxvb24tcGFuZWwtYXJyb3ctei1pbmRleCkgKyAxKX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfbl06YmVmb3Jle3otaW5kZXg6dmFyKC0tY2stYmFsbG9vbi1wYW5lbC1hcnJvdy16LWluZGV4KX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfbl06YWZ0ZXJ7ei1pbmRleDpjYWxjKHZhcigtLWNrLWJhbGxvb24tcGFuZWwtYXJyb3ctei1pbmRleCkgKyAxKX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfc106YmVmb3Jle3otaW5kZXg6dmFyKC0tY2stYmFsbG9vbi1wYW5lbC1hcnJvdy16LWluZGV4KX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfc106YWZ0ZXJ7ei1pbmRleDpjYWxjKHZhcigtLWNrLWJhbGxvb24tcGFuZWwtYXJyb3ctei1pbmRleCkgKyAxKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3Zpc2libGV7ZGlzcGxheTpibG9ja306cm9vdHstLWNrLWJhbGxvb24tYXJyb3ctb2Zmc2V0OjJweDstLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0OjEwcHg7LS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGg6OHB4fS5jay5jay1iYWxsb29uLXBhbmVse2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1iYWxsb29uLXBhbmVsLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay1iYWxsb29uLXBhbmVse2JveC1zaGFkb3c6dmFyKC0tY2stZHJvcC1zaGFkb3cpLDAgMDttaW4taGVpZ2h0OjE1cHg7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1wYW5lbC1iYWNrZ3JvdW5kKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXBhbmVsLWJvcmRlcil9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF93aXRoLWFycm93OmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfd2l0aC1hcnJvdzpiZWZvcmV7d2lkdGg6MDtoZWlnaHQ6MDtib3JkZXItc3R5bGU6c29saWR9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X25dOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19uXTpiZWZvcmV7Ym9yZGVyLWxlZnQtd2lkdGg6dmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKTtib3JkZXItYm90dG9tLXdpZHRoOnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0KTtib3JkZXItcmlnaHQtd2lkdGg6dmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKTtib3JkZXItdG9wLXdpZHRoOjB9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X25dOmJlZm9yZXtib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWNrLWNvbG9yLXBhbmVsLWJvcmRlcil9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X25dOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19uXTpiZWZvcmV7Ym9yZGVyLWxlZnQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0LWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci10b3AtY29sb3I6dHJhbnNwYXJlbnR9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X25dOmFmdGVye2JvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tY2stY29sb3ItcGFuZWwtYmFja2dyb3VuZCk7bWFyZ2luLXRvcDp2YXIoLS1jay1iYWxsb29uLWFycm93LW9mZnNldCl9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X3NdOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19zXTpiZWZvcmV7Ym9yZGVyLWxlZnQtd2lkdGg6dmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKTtib3JkZXItYm90dG9tLXdpZHRoOjA7Ym9yZGVyLXJpZ2h0LXdpZHRoOnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGFsZi13aWR0aCk7Ym9yZGVyLXRvcC13aWR0aDp2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCl9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X3NdOmJlZm9yZXtib3JkZXItdG9wLWNvbG9yOnZhcigtLWNrLWNvbG9yLXBhbmVsLWJvcmRlcil9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X3NdOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19zXTpiZWZvcmV7Ym9yZGVyLWxlZnQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbS1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItcmlnaHQtY29sb3I6dHJhbnNwYXJlbnR9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X3NdOmFmdGVye2JvcmRlci10b3AtY29sb3I6dmFyKC0tY2stY29sb3ItcGFuZWwtYmFja2dyb3VuZCk7bWFyZ2luLWJvdHRvbTp2YXIoLS1jay1iYWxsb29uLWFycm93LW9mZnNldCl9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19uOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfbjpiZWZvcmV7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6Y2FsYygtMSp2YXIoLS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGgpKTt0b3A6Y2FsYygtMSp2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfbnc6YWZ0ZXIsLmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19udzpiZWZvcmV7bGVmdDpjYWxjKDIqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7dG9wOmNhbGMoLTEqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oZWlnaHQpKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X25lOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfbmU6YmVmb3Jle3JpZ2h0OmNhbGMoMip2YXIoLS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGgpKTt0b3A6Y2FsYygtMSp2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfczphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3M6YmVmb3Jle2xlZnQ6NTAlO21hcmdpbi1sZWZ0OmNhbGMoLTEqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7Ym90dG9tOmNhbGMoLTEqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oZWlnaHQpKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3N3OmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfc3c6YmVmb3Jle2xlZnQ6Y2FsYygyKnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGFsZi13aWR0aCkpO2JvdHRvbTpjYWxjKC0xKnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0KSl9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19zZTphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3NlOmJlZm9yZXtyaWdodDpjYWxjKDIqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7Ym90dG9tOmNhbGMoLTEqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oZWlnaHQpKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3NtZTphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3NtZTpiZWZvcmV7cmlnaHQ6MjUlO21hcmdpbi1yaWdodDpjYWxjKDIqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7Ym90dG9tOmNhbGMoLTEqdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oZWlnaHQpKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3NtdzphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3NtdzpiZWZvcmV7bGVmdDoyNSU7bWFyZ2luLWxlZnQ6Y2FsYygyKnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGFsZi13aWR0aCkpO2JvdHRvbTpjYWxjKC0xKnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0KSl9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19ubWU6YWZ0ZXIsLmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19ubWU6YmVmb3Jle3JpZ2h0OjI1JTttYXJnaW4tcmlnaHQ6Y2FsYygyKnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGFsZi13aWR0aCkpO3RvcDpjYWxjKC0xKnZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0KSl9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19ubXc6YWZ0ZXIsLmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19ubXc6YmVmb3Jle2xlZnQ6MjUlO21hcmdpbi1sZWZ0OmNhbGMoMip2YXIoLS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGgpKTt0b3A6Y2FsYygtMSp2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkpfSd9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoMjApO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1pY29ue3ZlcnRpY2FsLWFsaWduOm1pZGRsZX06cm9vdHstLWNrLWljb24tc2l6ZTpjYWxjKHZhcigtLWNrLWxpbmUtaGVpZ2h0LWJhc2UpKnZhcigtLWNrLWZvbnQtc2l6ZS1ub3JtYWwpKX0uY2suY2staWNvbnt3aWR0aDp2YXIoLS1jay1pY29uLXNpemUpO2hlaWdodDp2YXIoLS1jay1pY29uLXNpemUpO2ZvbnQtc2l6ZTouODMzMzM1MDY5NGVtO3dpbGwtY2hhbmdlOnRyYW5zZm9ybX0uY2suY2staWNvbiwuY2suY2staWNvbiAqe2NvbG9yOmluaGVyaXQ7Y3Vyc29yOmluaGVyaXR9LmNrLmNrLWljb24gOm5vdChbZmlsbF0pe2ZpbGw6Y3VycmVudENvbG9yfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDIyKTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jy5jay5jay10b29sdGlwLC5jay5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0OmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO3BvaW50ZXItZXZlbnRzOm5vbmU7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbn0uY2suY2stdG9vbHRpcHt2aXNpYmlsaXR5OmhpZGRlbjtvcGFjaXR5OjA7ZGlzcGxheTpub25lO3otaW5kZXg6dmFyKC0tY2stei1tb2RhbCl9LmNrLmNrLXRvb2x0aXAgLmNrLXRvb2x0aXBfX3RleHR7ZGlzcGxheTppbmxpbmUtYmxvY2t9LmNrLmNrLXRvb2x0aXAgLmNrLXRvb2x0aXBfX3RleHQ6YWZ0ZXJ7Y29udGVudDpcIlwiO3dpZHRoOjA7aGVpZ2h0OjB9OnJvb3R7LS1jay10b29sdGlwLWFycm93LXNpemU6NXB4fS5jay5jay10b29sdGlwe2xlZnQ6NTAlO3RvcDowO3RyYW5zaXRpb246b3BhY2l0eSAuMnMgZWFzZS1pbi1vdXQgLjJzfS5jay5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0e2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0LC5jay5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0LmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0e2ZvbnQtc2l6ZTouOWVtO2xpbmUtaGVpZ2h0OjEuNTtjb2xvcjp2YXIoLS1jay1jb2xvci10b29sdGlwLXRleHQpO3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1zbWFsbCkgdmFyKC0tY2stc3BhY2luZy1tZWRpdW0pO2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItdG9vbHRpcC1iYWNrZ3JvdW5kKTtwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0Oi01MCV9LmNrLmNrLXRvb2x0aXAgLmNrLXRvb2x0aXBfX3RleHQ6YWZ0ZXJ7dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyBlYXNlLWluLW91dCAuMnM7Ym9yZGVyLXN0eWxlOnNvbGlkO2xlZnQ6NTAlfS5jay5jay10b29sdGlwLmNrLXRvb2x0aXBfc3tib3R0b206Y2FsYygtMSp2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAlKX0uY2suY2stdG9vbHRpcC5jay10b29sdGlwX3MgLmNrLXRvb2x0aXBfX3RleHQ6YWZ0ZXJ7dG9wOmNhbGMoLTEqdmFyKC0tY2stdG9vbHRpcC1hcnJvdy1zaXplKSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7Ym9yZGVyLWxlZnQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1jay1jb2xvci10b29sdGlwLWJhY2tncm91bmQpO2JvcmRlci1yaWdodC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItdG9wLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1sZWZ0LXdpZHRoOnZhcigtLWNrLXRvb2x0aXAtYXJyb3ctc2l6ZSk7Ym9yZGVyLWJvdHRvbS13aWR0aDp2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpO2JvcmRlci1yaWdodC13aWR0aDp2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpO2JvcmRlci10b3Atd2lkdGg6MH0uY2suY2stdG9vbHRpcC5jay10b29sdGlwX257dG9wOmNhbGMoLTEqdmFyKC0tY2stdG9vbHRpcC1hcnJvdy1zaXplKSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMCUpfS5jay5jay10b29sdGlwLmNrLXRvb2x0aXBfbiAuY2stdG9vbHRpcF9fdGV4dDphZnRlcntib3R0b206Y2FsYygtMSp2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTtib3JkZXItbGVmdC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItYm90dG9tLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1yaWdodC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItdG9wLWNvbG9yOnZhcigtLWNrLWNvbG9yLXRvb2x0aXAtYmFja2dyb3VuZCk7Ym9yZGVyLWxlZnQtd2lkdGg6dmFyKC0tY2stdG9vbHRpcC1hcnJvdy1zaXplKTtib3JkZXItYm90dG9tLXdpZHRoOjA7Ym9yZGVyLXJpZ2h0LXdpZHRoOnZhcigtLWNrLXRvb2x0aXAtYXJyb3ctc2l6ZSk7Ym9yZGVyLXRvcC13aWR0aDp2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpfSd9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoMjQpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1idXR0b24sYS5jay5jay1idXR0b257LW1vei11c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5jay5jay1idXR0b24gLmNrLXRvb2x0aXAsYS5jay5jay1idXR0b24gLmNrLXRvb2x0aXB7ZGlzcGxheTpibG9ja31AbWVkaWEgKGhvdmVyOm5vbmUpey5jay5jay1idXR0b24gLmNrLXRvb2x0aXAsYS5jay5jay1idXR0b24gLmNrLXRvb2x0aXB7ZGlzcGxheTpub25lfX0uY2suY2stYnV0dG9uLGEuY2suY2stYnV0dG9ue3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpsZWZ0fS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWwsYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7ZGlzcGxheTpub25lfS5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dCAuY2stYnV0dG9uX19sYWJlbCxhLmNrLmNrLWJ1dHRvbi5jay1idXR0b25fd2l0aC10ZXh0IC5jay1idXR0b25fX2xhYmVse2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5jay5jay1idXR0b246bm90KC5jay1idXR0b25fd2l0aC10ZXh0KSxhLmNrLmNrLWJ1dHRvbjpub3QoLmNrLWJ1dHRvbl93aXRoLXRleHQpe2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmNrLmNrLWJ1dHRvbjpob3ZlciAuY2stdG9vbHRpcCxhLmNrLmNrLWJ1dHRvbjpob3ZlciAuY2stdG9vbHRpcHt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxfS5jay5jay1idXR0b246Zm9jdXM6bm90KDpob3ZlcikgLmNrLXRvb2x0aXAsYS5jay5jay1idXR0b246Zm9jdXM6bm90KDpob3ZlcikgLmNrLXRvb2x0aXB7ZGlzcGxheTpub25lfS5jay5jay1idXR0b24sYS5jay5jay1idXR0b257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1iYWNrZ3JvdW5kKX0uY2suY2stYnV0dG9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVyLGEuY2suY2stYnV0dG9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtaG92ZXItYmFja2dyb3VuZCl9LmNrLmNrLWJ1dHRvbjpub3QoLmNrLWRpc2FibGVkKTphY3RpdmUsYS5jay5jay1idXR0b246bm90KC5jay1kaXNhYmxlZCk6YWN0aXZle2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtYWN0aXZlLWJhY2tncm91bmQpO2JveC1zaGFkb3c6aW5zZXQgMCAycHggMnB4IHZhcigtLWNrLWNvbG9yLWJ1dHRvbi1kZWZhdWx0LWFjdGl2ZS1zaGFkb3cpfS5jay5jay1idXR0b24uY2stZGlzYWJsZWQsYS5jay5jay1idXR0b24uY2stZGlzYWJsZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1kaXNhYmxlZC1iYWNrZ3JvdW5kKX0uY2suY2stYnV0dG9uLGEuY2suY2stYnV0dG9ue2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1idXR0b24sLmNrLXJvdW5kZWQtY29ybmVycyBhLmNrLmNrLWJ1dHRvbiwuY2suY2stYnV0dG9uLmNrLXJvdW5kZWQtY29ybmVycyxhLmNrLmNrLWJ1dHRvbi5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX0uY2suY2stYnV0dG9uLGEuY2suY2stYnV0dG9ue3doaXRlLXNwYWNlOm5vd3JhcDtjdXJzb3I6ZGVmYXVsdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7cGFkZGluZzp2YXIoLS1jay1zcGFjaW5nLXRpbnkpO3RleHQtYWxpZ246Y2VudGVyO21pbi13aWR0aDp2YXIoLS1jay11aS1jb21wb25lbnQtbWluLWhlaWdodCk7bWluLWhlaWdodDp2YXIoLS1jay11aS1jb21wb25lbnQtbWluLWhlaWdodCk7bGluZS1oZWlnaHQ6MTtmb250LXNpemU6aW5oZXJpdDtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O3RyYW5zaXRpb246Ym94LXNoYWRvdyAuMnMgZWFzZS1pbi1vdXQsYm9yZGVyIC4ycyBlYXNlLWluLW91dDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZX0uY2suY2stYnV0dG9uOmFjdGl2ZSwuY2suY2stYnV0dG9uOmZvY3VzLGEuY2suY2stYnV0dG9uOmFjdGl2ZSxhLmNrLmNrLWJ1dHRvbjpmb2N1c3tvdXRsaW5lOm5vbmU7Ym9yZGVyOnZhcigtLWNrLWZvY3VzLXJpbmcpO2JveC1zaGFkb3c6dmFyKC0tY2stZm9jdXMtb3V0ZXItc2hhZG93KSwwIDB9LmNrLmNrLWJ1dHRvbiAuY2stYnV0dG9uX19pY29uIHVzZSwuY2suY2stYnV0dG9uIC5jay1idXR0b25fX2ljb24gdXNlICosYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9faWNvbiB1c2UsYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9faWNvbiB1c2UgKntjb2xvcjppbmhlcml0fS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWwsYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7Zm9udC1zaXplOmluaGVyaXQ7Zm9udC13ZWlnaHQ6aW5oZXJpdDtjb2xvcjppbmhlcml0O2N1cnNvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX1bZGlyPWx0cl0gLmNrLmNrLWJ1dHRvbiAuY2stYnV0dG9uX19sYWJlbCxbZGlyPWx0cl0gYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7dGV4dC1hbGlnbjpsZWZ0fVtkaXI9cnRsXSAuY2suY2stYnV0dG9uIC5jay1idXR0b25fX2xhYmVsLFtkaXI9cnRsXSBhLmNrLmNrLWJ1dHRvbiAuY2stYnV0dG9uX19sYWJlbHt0ZXh0LWFsaWduOnJpZ2h0fS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fa2V5c3Ryb2tlLGEuY2suY2stYnV0dG9uIC5jay1idXR0b25fX2tleXN0cm9rZXtjb2xvcjppbmhlcml0fVtkaXI9bHRyXSAuY2suY2stYnV0dG9uIC5jay1idXR0b25fX2tleXN0cm9rZSxbZGlyPWx0cl0gYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fa2V5c3Ryb2tle21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctbGFyZ2UpfVtkaXI9cnRsXSAuY2suY2stYnV0dG9uIC5jay1idXR0b25fX2tleXN0cm9rZSxbZGlyPXJ0bF0gYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fa2V5c3Ryb2tle21hcmdpbi1yaWdodDp2YXIoLS1jay1zcGFjaW5nLWxhcmdlKX0uY2suY2stYnV0dG9uIC5jay1idXR0b25fX2tleXN0cm9rZSxhLmNrLmNrLWJ1dHRvbiAuY2stYnV0dG9uX19rZXlzdHJva2V7Zm9udC13ZWlnaHQ6NzAwO29wYWNpdHk6Ljd9LmNrLmNrLWJ1dHRvbi5jay1kaXNhYmxlZDphY3RpdmUsLmNrLmNrLWJ1dHRvbi5jay1kaXNhYmxlZDpmb2N1cyxhLmNrLmNrLWJ1dHRvbi5jay1kaXNhYmxlZDphY3RpdmUsYS5jay5jay1idXR0b24uY2stZGlzYWJsZWQ6Zm9jdXN7Ym94LXNoYWRvdzp2YXIoLS1jay1mb2N1cy1kaXNhYmxlZC1vdXRlci1zaGFkb3cpLDAgMH0uY2suY2stYnV0dG9uLmNrLWRpc2FibGVkIC5jay1idXR0b25fX2ljb24sYS5jay5jay1idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9faWNvbntvcGFjaXR5OnZhcigtLWNrLWRpc2FibGVkLW9wYWNpdHkpfS5jay5jay1idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9fbGFiZWwsYS5jay5jay1idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9fbGFiZWx7b3BhY2l0eTp2YXIoLS1jay1kaXNhYmxlZC1vcGFjaXR5KX0uY2suY2stYnV0dG9uLmNrLWRpc2FibGVkIC5jay1idXR0b25fX2tleXN0cm9rZSxhLmNrLmNrLWJ1dHRvbi5jay1kaXNhYmxlZCAuY2stYnV0dG9uX19rZXlzdHJva2V7b3BhY2l0eTouM30uY2suY2stYnV0dG9uLmNrLWJ1dHRvbl93aXRoLXRleHQsYS5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dHtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctdGlueSkgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCl9W2Rpcj1sdHJdIC5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dCAuY2stYnV0dG9uX19pY29uLFtkaXI9bHRyXSBhLmNrLmNrLWJ1dHRvbi5jay1idXR0b25fd2l0aC10ZXh0IC5jay1idXR0b25fX2ljb257bWFyZ2luLWxlZnQ6Y2FsYygtMSp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKSk7bWFyZ2luLXJpZ2h0OnZhcigtLWNrLXNwYWNpbmctc21hbGwpfVtkaXI9cnRsXSAuY2suY2stYnV0dG9uLmNrLWJ1dHRvbl93aXRoLXRleHQgLmNrLWJ1dHRvbl9faWNvbixbZGlyPXJ0bF0gYS5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dCAuY2stYnV0dG9uX19pY29ue21hcmdpbi1yaWdodDpjYWxjKC0xKnZhcigtLWNrLXNwYWNpbmctc21hbGwpKTttYXJnaW4tbGVmdDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX0uY2suY2stYnV0dG9uLmNrLWJ1dHRvbl93aXRoLWtleXN0cm9rZSAuY2stYnV0dG9uX19sYWJlbCxhLmNrLmNrLWJ1dHRvbi5jay1idXR0b25fd2l0aC1rZXlzdHJva2UgLmNrLWJ1dHRvbl9fbGFiZWx7ZmxleC1ncm93OjF9LmNrLmNrLWJ1dHRvbi5jay1vbixhLmNrLmNrLWJ1dHRvbi5jay1vbntiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJ1dHRvbi1vbi1iYWNrZ3JvdW5kKX0uY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVyLGEuY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLW9uLWhvdmVyLWJhY2tncm91bmQpfS5jay5jay1idXR0b24uY2stb246bm90KC5jay1kaXNhYmxlZCk6YWN0aXZlLGEuY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJ1dHRvbi1vbi1hY3RpdmUtYmFja2dyb3VuZCk7Ym94LXNoYWRvdzppbnNldCAwIDJweCAycHggdmFyKC0tY2stY29sb3ItYnV0dG9uLW9uLWFjdGl2ZS1zaGFkb3cpfS5jay5jay1idXR0b24uY2stb24uY2stZGlzYWJsZWQsYS5jay5jay1idXR0b24uY2stb24uY2stZGlzYWJsZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tb24tZGlzYWJsZWQtYmFja2dyb3VuZCl9LmNrLmNrLWJ1dHRvbi5jay1idXR0b24tc2F2ZSxhLmNrLmNrLWJ1dHRvbi5jay1idXR0b24tc2F2ZXtjb2xvcjp2YXIoLS1jay1jb2xvci1idXR0b24tc2F2ZSl9LmNrLmNrLWJ1dHRvbi5jay1idXR0b24tY2FuY2VsLGEuY2suY2stYnV0dG9uLmNrLWJ1dHRvbi1jYW5jZWx7Y29sb3I6dmFyKC0tY2stY29sb3ItYnV0dG9uLWNhbmNlbCl9LmNrLmNrLWJ1dHRvbi1hY3Rpb24sYS5jay5jay1idXR0b24tYWN0aW9ue2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1iYWNrZ3JvdW5kKX0uY2suY2stYnV0dG9uLWFjdGlvbjpub3QoLmNrLWRpc2FibGVkKTpob3ZlcixhLmNrLmNrLWJ1dHRvbi1hY3Rpb246bm90KC5jay1kaXNhYmxlZCk6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLWhvdmVyLWJhY2tncm91bmQpfS5jay5jay1idXR0b24tYWN0aW9uOm5vdCguY2stZGlzYWJsZWQpOmFjdGl2ZSxhLmNrLmNrLWJ1dHRvbi1hY3Rpb246bm90KC5jay1kaXNhYmxlZCk6YWN0aXZle2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1hY3RpdmUtYmFja2dyb3VuZCk7Ym94LXNoYWRvdzppbnNldCAwIDJweCAycHggdmFyKC0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1hY3RpdmUtc2hhZG93KX0uY2suY2stYnV0dG9uLWFjdGlvbi5jay1kaXNhYmxlZCxhLmNrLmNrLWJ1dHRvbi1hY3Rpb24uY2stZGlzYWJsZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLWRpc2FibGVkLWJhY2tncm91bmQpfS5jay5jay1idXR0b24tYWN0aW9uLGEuY2suY2stYnV0dG9uLWFjdGlvbntjb2xvcjp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLXRleHQpfS5jay5jay1idXR0b24tYm9sZCxhLmNrLmNrLWJ1dHRvbi1ib2xke2ZvbnQtd2VpZ2h0OjcwMH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSgyNik7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrIC5jay1iYWxsb29uLXJvdGF0b3JfX25hdmlnYXRpb257ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5jayAuY2stYmFsbG9vbi1yb3RhdG9yX19jb250ZW50IC5jay10b29sYmFye2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmNrIC5jay1iYWxsb29uLXJvdGF0b3JfX25hdmlnYXRpb257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci10b29sYmFyLWJhY2tncm91bmQpO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXRvb2xiYXItYm9yZGVyKTtwYWRkaW5nOjAgdmFyKC0tY2stc3BhY2luZy1zbWFsbCl9LmNrIC5jay1iYWxsb29uLXJvdGF0b3JfX25hdmlnYXRpb24+KnttYXJnaW4tcmlnaHQ6dmFyKC0tY2stc3BhY2luZy1zbWFsbCk7bWFyZ2luLXRvcDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKTttYXJnaW4tYm90dG9tOnZhcigtLWNrLXNwYWNpbmctc21hbGwpfS5jayAuY2stYmFsbG9vbi1yb3RhdG9yX19uYXZpZ2F0aW9uIC5jay1iYWxsb29uLXJvdGF0b3JfX2NvdW50ZXJ7bWFyZ2luLXJpZ2h0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpO21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctc21hbGwpfS5jayAuY2stYmFsbG9vbi1yb3RhdG9yX19jb250ZW50IC5jay5jay1hbm5vdGF0aW9uLXdyYXBwZXJ7Ym94LXNoYWRvdzpub25lfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDI4KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2sgLmNrLWZha2UtcGFuZWx7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDpjYWxjKHZhcigtLWNrLXotbW9kYWwpIC0gMSl9LmNrIC5jay1mYWtlLXBhbmVsIGRpdntwb3NpdGlvbjphYnNvbHV0ZX0uY2sgLmNrLWZha2UtcGFuZWwgZGl2OmZpcnN0LWNoaWxke3otaW5kZXg6Mn0uY2sgLmNrLWZha2UtcGFuZWwgZGl2Om50aC1jaGlsZCgyKXt6LWluZGV4OjF9OnJvb3R7LS1jay1iYWxsb29uLWZha2UtcGFuZWwtb2Zmc2V0LWhvcml6b250YWw6NnB4Oy0tY2stYmFsbG9vbi1mYWtlLXBhbmVsLW9mZnNldC12ZXJ0aWNhbDo2cHh9LmNrIC5jay1mYWtlLXBhbmVsIGRpdntib3gtc2hhZG93OnZhcigtLWNrLWRyb3Atc2hhZG93KSwwIDA7bWluLWhlaWdodDoxNXB4O2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItcGFuZWwtYmFja2dyb3VuZCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1wYW5lbC1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyk7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uY2sgLmNrLWZha2UtcGFuZWwgZGl2OmZpcnN0LWNoaWxke21hcmdpbi1sZWZ0OnZhcigtLWNrLWJhbGxvb24tZmFrZS1wYW5lbC1vZmZzZXQtaG9yaXpvbnRhbCk7bWFyZ2luLXRvcDp2YXIoLS1jay1iYWxsb29uLWZha2UtcGFuZWwtb2Zmc2V0LXZlcnRpY2FsKX0uY2sgLmNrLWZha2UtcGFuZWwgZGl2Om50aC1jaGlsZCgyKXttYXJnaW4tbGVmdDpjYWxjKHZhcigtLWNrLWJhbGxvb24tZmFrZS1wYW5lbC1vZmZzZXQtaG9yaXpvbnRhbCkqMik7bWFyZ2luLXRvcDpjYWxjKHZhcigtLWNrLWJhbGxvb24tZmFrZS1wYW5lbC1vZmZzZXQtdmVydGljYWwpKjIpfS5jayAuY2stZmFrZS1wYW5lbCBkaXY6bnRoLWNoaWxkKDMpe21hcmdpbi1sZWZ0OmNhbGModmFyKC0tY2stYmFsbG9vbi1mYWtlLXBhbmVsLW9mZnNldC1ob3Jpem9udGFsKSozKTttYXJnaW4tdG9wOmNhbGModmFyKC0tY2stYmFsbG9vbi1mYWtlLXBhbmVsLW9mZnNldC12ZXJ0aWNhbCkqMyl9LmNrIC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3MrLmNrLWZha2UtcGFuZWwsLmNrIC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3NlKy5jay1mYWtlLXBhbmVsLC5jayAuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19zdysuY2stZmFrZS1wYW5lbHstLWNrLWJhbGxvb24tZmFrZS1wYW5lbC1vZmZzZXQtdmVydGljYWw6LTZweH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSgzMCk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLWRyb3Bkb3due2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlfS5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX2Fycm93e3BvaW50ZXItZXZlbnRzOm5vbmU7ei1pbmRleDp2YXIoLS1jay16LWRlZmF1bHQpfS5jay5jay1kcm9wZG93biAuY2stYnV0dG9uLmNrLWRyb3Bkb3duX19idXR0b257d2lkdGg6MTAwJX0uY2suY2stZHJvcGRvd24gLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9uLmNrLW9uIC5jay10b29sdGlwe2Rpc3BsYXk6bm9uZX0uY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbHstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2Rpc3BsYXk6bm9uZTt6LWluZGV4OnZhcigtLWNrLXotbW9kYWwpO3Bvc2l0aW9uOmFic29sdXRlfS5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsLmNrLWRyb3Bkb3duX19wYW5lbC12aXNpYmxle2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsLmNrLWRyb3Bkb3duX19wYW5lbF9uZSwuY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbC5jay1kcm9wZG93bl9fcGFuZWxfbnd7Ym90dG9tOjEwMCV9LmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwuY2stZHJvcGRvd25fX3BhbmVsX3NlLC5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsLmNrLWRyb3Bkb3duX19wYW5lbF9zd3t0b3A6MTAwJTtib3R0b206YXV0b30uY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbC5jay1kcm9wZG93bl9fcGFuZWxfbmUsLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwuY2stZHJvcGRvd25fX3BhbmVsX3Nle2xlZnQ6MH0uY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbC5jay1kcm9wZG93bl9fcGFuZWxfbncsLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwuY2stZHJvcGRvd25fX3BhbmVsX3N3e3JpZ2h0OjB9OnJvb3R7LS1jay1kcm9wZG93bi1hcnJvdy1zaXplOmNhbGMoMC41KnZhcigtLWNrLWljb24tc2l6ZSkpfS5jay5jay1kcm9wZG93bntmb250LXNpemU6aW5oZXJpdH0uY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19hcnJvd3t3aWR0aDp2YXIoLS1jay1kcm9wZG93bi1hcnJvdy1zaXplKX1bZGlyPWx0cl0gLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fYXJyb3d7cmlnaHQ6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7bWFyZ2luLWxlZnQ6dmFyKC0tY2stc3BhY2luZy1zbWFsbCl9W2Rpcj1ydGxdIC5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX2Fycm93e2xlZnQ6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7bWFyZ2luLXJpZ2h0OnZhcigtLWNrLXNwYWNpbmctc21hbGwpfS5jay5jay1kcm9wZG93bi5jay1kaXNhYmxlZCAuY2stZHJvcGRvd25fX2Fycm93e29wYWNpdHk6dmFyKC0tY2stZGlzYWJsZWQtb3BhY2l0eSl9W2Rpcj1sdHJdIC5jay5jay1kcm9wZG93biAuY2stYnV0dG9uLmNrLWRyb3Bkb3duX19idXR0b246bm90KC5jay1idXR0b25fd2l0aC10ZXh0KXtwYWRkaW5nLWxlZnQ6dmFyKC0tY2stc3BhY2luZy1zbWFsbCl9W2Rpcj1ydGxdIC5jay5jay1kcm9wZG93biAuY2stYnV0dG9uLmNrLWRyb3Bkb3duX19idXR0b246bm90KC5jay1idXR0b25fd2l0aC10ZXh0KXtwYWRkaW5nLXJpZ2h0OnZhcigtLWNrLXNwYWNpbmctc21hbGwpfS5jay5jay1kcm9wZG93biAuY2stYnV0dG9uLmNrLWRyb3Bkb3duX19idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7d2lkdGg6N2VtO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzfS5jay5jay1kcm9wZG93biAuY2stYnV0dG9uLmNrLWRyb3Bkb3duX19idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9fbGFiZWx7b3BhY2l0eTp2YXIoLS1jay1kaXNhYmxlZC1vcGFjaXR5KX0uY2suY2stZHJvcGRvd24gLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9uLmNrLW9ue2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5jay5jay1kcm9wZG93bl9fcGFuZWx7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWRyb3Bkb3duX19wYW5lbCwuY2suY2stZHJvcGRvd25fX3BhbmVsLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay1kcm9wZG93bl9fcGFuZWx7Ym94LXNoYWRvdzp2YXIoLS1jay1kcm9wLXNoYWRvdyksMCAwO2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItZHJvcGRvd24tcGFuZWwtYmFja2dyb3VuZCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1kcm9wZG93bi1wYW5lbC1ib3JkZXIpO2JvdHRvbTowO21pbi13aWR0aDoxMDAlfS5jay5jay1kcm9wZG93bl9fcGFuZWwuY2stZHJvcGRvd25fX3BhbmVsX3Nle2JvcmRlci10b3AtbGVmdC1yYWRpdXM6MH0uY2suY2stZHJvcGRvd25fX3BhbmVsLmNrLWRyb3Bkb3duX19wYW5lbF9zd3tib3JkZXItdG9wLXJpZ2h0LXJhZGl1czowfS5jay5jay1kcm9wZG93bl9fcGFuZWwuY2stZHJvcGRvd25fX3BhbmVsX25le2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0uY2suY2stZHJvcGRvd25fX3BhbmVsLmNrLWRyb3Bkb3duX19wYW5lbF9ud3tib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDMyKTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stbGlzdHstbW96LXVzZXItc2VsZWN0Om5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uY2suY2stbGlzdCAuY2stbGlzdF9faXRlbSwuY2suY2stbGlzdCAuY2stbGlzdF9fc2VwYXJhdG9ye2Rpc3BsYXk6YmxvY2t9LmNrLmNrLWxpc3QgLmNrLWxpc3RfX2l0ZW0+OmZvY3Vze3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6dmFyKC0tY2stei1kZWZhdWx0KX0uY2suY2stbGlzdHtib3JkZXItcmFkaXVzOjB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stbGlzdCwuY2suY2stbGlzdC5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX0uY2suY2stbGlzdHtsaXN0LXN0eWxlLXR5cGU6bm9uZTtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWxpc3QtYmFja2dyb3VuZCl9LmNrLmNrLWxpc3RfX2l0ZW17Y3Vyc29yOmRlZmF1bHQ7bWluLXdpZHRoOjEyZW19LmNrLmNrLWxpc3RfX2l0ZW0gLmNrLWJ1dHRvbnttaW4taGVpZ2h0OnVuc2V0O3dpZHRoOjEwMCU7dGV4dC1hbGlnbjpsZWZ0O2JvcmRlci1yYWRpdXM6MDtwYWRkaW5nOmNhbGMoMC4yKnZhcigtLWNrLWxpbmUtaGVpZ2h0LWJhc2UpKnZhcigtLWNrLWZvbnQtc2l6ZS1iYXNlKSkgY2FsYygwLjQqdmFyKC0tY2stbGluZS1oZWlnaHQtYmFzZSkqdmFyKC0tY2stZm9udC1zaXplLWJhc2UpKX0uY2suY2stbGlzdF9faXRlbSAuY2stYnV0dG9uIC5jay1idXR0b25fX2xhYmVse2xpbmUtaGVpZ2h0OmNhbGMoMS4yKnZhcigtLWNrLWxpbmUtaGVpZ2h0LWJhc2UpKnZhcigtLWNrLWZvbnQtc2l6ZS1iYXNlKSl9LmNrLmNrLWxpc3RfX2l0ZW0gLmNrLWJ1dHRvbjphY3RpdmV7Ym94LXNoYWRvdzpub25lfS5jay5jay1saXN0X19pdGVtIC5jay1idXR0b24uY2stb257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1saXN0LWJ1dHRvbi1vbi1iYWNrZ3JvdW5kKTtjb2xvcjp2YXIoLS1jay1jb2xvci1saXN0LWJ1dHRvbi1vbi10ZXh0KX0uY2suY2stbGlzdF9faXRlbSAuY2stYnV0dG9uLmNrLW9uOmFjdGl2ZXtib3gtc2hhZG93Om5vbmV9LmNrLmNrLWxpc3RfX2l0ZW0gLmNrLWJ1dHRvbi5jay1vbjpob3Zlcjpub3QoLmNrLWRpc2FibGVkKXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWxpc3QtYnV0dG9uLW9uLWJhY2tncm91bmQtZm9jdXMpfS5jay5jay1saXN0X19pdGVtIC5jay1idXR0b24uY2stb246Zm9jdXM6bm90KC5jay1kaXNhYmxlZCl7Ym9yZGVyLWNvbG9yOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCl9LmNrLmNrLWxpc3RfX2l0ZW0gLmNrLWJ1dHRvbjpob3Zlcjpub3QoLmNrLWRpc2FibGVkKXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWxpc3QtYnV0dG9uLWhvdmVyLWJhY2tncm91bmQpfS5jay5jay1saXN0X19pdGVtIC5jay1zd2l0Y2hidXR0b24uY2stb257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1saXN0LWJhY2tncm91bmQpO2NvbG9yOmluaGVyaXR9LmNrLmNrLWxpc3RfX2l0ZW0gLmNrLXN3aXRjaGJ1dHRvbi5jay1vbjpob3Zlcjpub3QoLmNrLWRpc2FibGVkKXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWxpc3QtYnV0dG9uLWhvdmVyLWJhY2tncm91bmQpO2NvbG9yOmluaGVyaXR9LmNrLmNrLWxpc3RfX3NlcGFyYXRvcntoZWlnaHQ6MXB4O3dpZHRoOjEwMCU7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoMzQpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZSwuY2suY2stYnV0dG9uLmNrLXN3aXRjaGJ1dHRvbiAuY2stYnV0dG9uX190b2dnbGUgLmNrLWJ1dHRvbl9fdG9nZ2xlX19pbm5lcntkaXNwbGF5OmJsb2NrfTpyb290ey0tY2stc3dpdGNoLWJ1dHRvbi10b2dnbGUtd2lkdGg6Mi42MTUzODQ2MTU0ZW07LS1jay1zd2l0Y2gtYnV0dG9uLXRvZ2dsZS1pbm5lci1zaXplOjEuMDc2OTIzMDc2OWVtOy0tY2stc3dpdGNoLWJ1dHRvbi10b2dnbGUtc3BhY2luZzoxcHg7LS1jay1zd2l0Y2gtYnV0dG9uLXRyYW5zbGF0aW9uOjEuMzg0NjE1Mzg0N2VtfVtkaXI9bHRyXSAuY2suY2stYnV0dG9uLmNrLXN3aXRjaGJ1dHRvbiAuY2stYnV0dG9uX19sYWJlbHttYXJnaW4tcmlnaHQ6Y2FsYygyKnZhcigtLWNrLXNwYWNpbmctbGFyZ2UpKX1bZGlyPXJ0bF0gLmNrLmNrLWJ1dHRvbi5jay1zd2l0Y2hidXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7bWFyZ2luLWxlZnQ6Y2FsYygyKnZhcigtLWNrLXNwYWNpbmctbGFyZ2UpKX0uY2suY2stYnV0dG9uLmNrLXN3aXRjaGJ1dHRvbiAuY2stYnV0dG9uX190b2dnbGV7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWJ1dHRvbi5jay1zd2l0Y2hidXR0b24gLmNrLWJ1dHRvbl9fdG9nZ2xlLC5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZS5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX1bZGlyPWx0cl0gLmNrLmNrLWJ1dHRvbi5jay1zd2l0Y2hidXR0b24gLmNrLWJ1dHRvbl9fdG9nZ2xle21hcmdpbi1sZWZ0OmF1dG99W2Rpcj1ydGxdIC5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZXttYXJnaW4tcmlnaHQ6YXV0b30uY2suY2stYnV0dG9uLmNrLXN3aXRjaGJ1dHRvbiAuY2stYnV0dG9uX190b2dnbGV7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40cyBlYXNlO3dpZHRoOnZhcigtLWNrLXN3aXRjaC1idXR0b24tdG9nZ2xlLXdpZHRoKTtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLXN3aXRjaC1idXR0b24tb2ZmLWJhY2tncm91bmQpfS5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZSAuY2stYnV0dG9uX190b2dnbGVfX2lubmVye2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZSAuY2stYnV0dG9uX190b2dnbGVfX2lubmVyLC5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZSAuY2stYnV0dG9uX190b2dnbGVfX2lubmVyLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpO2JvcmRlci1yYWRpdXM6Y2FsYygwLjUqdmFyKC0tY2stYm9yZGVyLXJhZGl1cykpfS5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZSAuY2stYnV0dG9uX190b2dnbGVfX2lubmVye21hcmdpbjp2YXIoLS1jay1zd2l0Y2gtYnV0dG9uLXRvZ2dsZS1zcGFjaW5nKTt3aWR0aDp2YXIoLS1jay1zd2l0Y2gtYnV0dG9uLXRvZ2dsZS1pbm5lci1zaXplKTtoZWlnaHQ6dmFyKC0tY2stc3dpdGNoLWJ1dHRvbi10b2dnbGUtaW5uZXItc2l6ZSk7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1zd2l0Y2gtYnV0dG9uLWlubmVyLWJhY2tncm91bmQpO3RyYW5zaXRpb246YWxsIC4zcyBlYXNlfS5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZTpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLXN3aXRjaC1idXR0b24tb2ZmLWhvdmVyLWJhY2tncm91bmQpfS5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uIC5jay1idXR0b25fX3RvZ2dsZTpob3ZlciAuY2stYnV0dG9uX190b2dnbGVfX2lubmVye2JveC1zaGFkb3c6MCAwIDAgNXB4IHZhcigtLWNrLWNvbG9yLXN3aXRjaC1idXR0b24taW5uZXItc2hhZG93KX0uY2suY2stYnV0dG9uLmNrLXN3aXRjaGJ1dHRvbi5jay1kaXNhYmxlZCAuY2stYnV0dG9uX190b2dnbGV7b3BhY2l0eTp2YXIoLS1jay1kaXNhYmxlZC1vcGFjaXR5KX0uY2suY2stYnV0dG9uLmNrLXN3aXRjaGJ1dHRvbi5jay1vbiAuY2stYnV0dG9uX190b2dnbGV7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1zd2l0Y2gtYnV0dG9uLW9uLWJhY2tncm91bmQpfS5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uLmNrLW9uIC5jay1idXR0b25fX3RvZ2dsZTpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLXN3aXRjaC1idXR0b24tb24taG92ZXItYmFja2dyb3VuZCl9W2Rpcj1sdHJdIC5jay5jay1idXR0b24uY2stc3dpdGNoYnV0dG9uLmNrLW9uIC5jay1idXR0b25fX3RvZ2dsZSAuY2stYnV0dG9uX190b2dnbGVfX2lubmVye3RyYW5zZm9ybTp0cmFuc2xhdGVYKHZhcigtLWNrLXN3aXRjaC1idXR0b24tdHJhbnNsYXRpb24pKX1bZGlyPXJ0bF0gLmNrLmNrLWJ1dHRvbi5jay1zd2l0Y2hidXR0b24uY2stb24gLmNrLWJ1dHRvbl9fdG9nZ2xlIC5jay1idXR0b25fX3RvZ2dsZV9faW5uZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoY2FsYygtMSp2YXIoLS1jay1zd2l0Y2gtYnV0dG9uLXRyYW5zbGF0aW9uKSkpfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDM2KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stdG9vbGJhci1kcm9wZG93biAuY2suY2stdG9vbGJhciAuY2suY2stdG9vbGJhcl9faXRlbXN7ZmxleC13cmFwOm5vd3JhcH0uY2suY2stdG9vbGJhci1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsIC5jay1idXR0b246Zm9jdXN7ei1pbmRleDpjYWxjKHZhcigtLWNrLXotZGVmYXVsdCkgKyAxKX0uY2suY2stdG9vbGJhci1kcm9wZG93biAuY2stdG9vbGJhcntib3JkZXI6MH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSgzOCk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3R7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3QsLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3QuY2stcm91bmRlZC1jb3JuZXJze2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyk7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowfS5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsIC5jay1saXN0IC5jay1saXN0X19pdGVtOmZpcnN0LWNoaWxkIC5jay1idXR0b257Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3QgLmNrLWxpc3RfX2l0ZW06Zmlyc3QtY2hpbGQgLmNrLWJ1dHRvbiwuY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbCAuY2stbGlzdCAuY2stbGlzdF9faXRlbTpmaXJzdC1jaGlsZCAuY2stYnV0dG9uLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpO2JvcmRlci10b3AtbGVmdC1yYWRpdXM6MDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MH0uY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbCAuY2stbGlzdCAuY2stbGlzdF9faXRlbTpsYXN0LWNoaWxkIC5jay1idXR0b257Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3QgLmNrLWxpc3RfX2l0ZW06bGFzdC1jaGlsZCAuY2stYnV0dG9uLC5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsIC5jay1saXN0IC5jay1saXN0X19pdGVtOmxhc3QtY2hpbGQgLmNrLWJ1dHRvbi5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKTtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg0MCk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLXRvb2xiYXJ7LW1vei11c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IG5vd3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9LmNrLmNrLXRvb2xiYXI+LmNrLXRvb2xiYXJfX2l0ZW1ze2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IHdyYXA7YWxpZ24taXRlbXM6Y2VudGVyO2ZsZXgtZ3JvdzoxfS5jay5jay10b29sYmFyIC5jay5jay10b29sYmFyX19zZXBhcmF0b3J7ZGlzcGxheTppbmxpbmUtYmxvY2t9LmNrLmNrLXRvb2xiYXIgLmNrLmNrLXRvb2xiYXJfX3NlcGFyYXRvcjpmaXJzdC1jaGlsZCwuY2suY2stdG9vbGJhciAuY2suY2stdG9vbGJhcl9fc2VwYXJhdG9yOmxhc3QtY2hpbGR7ZGlzcGxheTpub25lfS5jay5jay10b29sYmFyLmNrLXRvb2xiYXJfZ3JvdXBpbmc+LmNrLXRvb2xiYXJfX2l0ZW1ze2ZsZXgtd3JhcDpub3dyYXB9LmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl92ZXJ0aWNhbD4uY2stdG9vbGJhcl9faXRlbXN7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5jay5jay10b29sYmFyLmNrLXRvb2xiYXJfZmxvYXRpbmc+LmNrLXRvb2xiYXJfX2l0ZW1ze2ZsZXgtd3JhcDpub3dyYXB9LmNrLmNrLXRvb2xiYXI+LmNrLmNrLXRvb2xiYXJfX2dyb3VwZWQtZHJvcGRvd24+LmNrLWRyb3Bkb3duX19idXR0b24gLmNrLWRyb3Bkb3duX19hcnJvd3tkaXNwbGF5Om5vbmV9LmNrLmNrLXRvb2xiYXJ7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLXRvb2xiYXIsLmNrLmNrLXRvb2xiYXIuY2stcm91bmRlZC1jb3JuZXJze2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyl9LmNrLmNrLXRvb2xiYXJ7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci10b29sYmFyLWJhY2tncm91bmQpO3BhZGRpbmc6MCB2YXIoLS1jay1zcGFjaW5nLXNtYWxsKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXRvb2xiYXItYm9yZGVyKX0uY2suY2stdG9vbGJhciAuY2suY2stdG9vbGJhcl9fc2VwYXJhdG9ye2FsaWduLXNlbGY6c3RyZXRjaDt3aWR0aDoxcHg7bWluLXdpZHRoOjFweDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItdG9vbGJhci1ib3JkZXIpfS5jay5jay10b29sYmFyPi5jay10b29sYmFyX19pdGVtcz4qe21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1zbWFsbCk7bWFyZ2luLWJvdHRvbTp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKTttYXJnaW4tcmlnaHQ6dmFyKC0tY2stc3BhY2luZy1zbWFsbCl9LmNrLmNrLXRvb2xiYXI+LmNrLXRvb2xiYXJfX2l0ZW1zOmVtcHR5Ky5jay5jay10b29sYmFyX19zZXBhcmF0b3J7ZGlzcGxheTpub25lfS5jay5jay10b29sYmFyPi5jay10b29sYmFyX19pdGVtcz4qLC5jay5jay10b29sYmFyPi5jay5jay10b29sYmFyX19ncm91cGVkLWRyb3Bkb3due21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1zbWFsbCk7bWFyZ2luLWJvdHRvbTp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX0uY2suY2stdG9vbGJhci5jay10b29sYmFyX3ZlcnRpY2Fse3BhZGRpbmc6MH0uY2suY2stdG9vbGJhci5jay10b29sYmFyX3ZlcnRpY2FsPi5jay10b29sYmFyX19pdGVtcz4uY2t7d2lkdGg6MTAwJTttYXJnaW46MDtib3JkZXItcmFkaXVzOjA7Ym9yZGVyOjB9LmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl9jb21wYWN0e3BhZGRpbmc6MH0uY2suY2stdG9vbGJhci5jay10b29sYmFyX2NvbXBhY3Q+LmNrLXRvb2xiYXJfX2l0ZW1zPip7bWFyZ2luOjB9LmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl9jb21wYWN0Pi5jay10b29sYmFyX19pdGVtcz46bm90KDpmaXJzdC1jaGlsZCk6bm90KDpsYXN0LWNoaWxkKXtib3JkZXItcmFkaXVzOjB9LmNrLmNrLXRvb2xiYXI+LmNrLmNrLXRvb2xiYXJfX2dyb3VwZWQtZHJvcGRvd24+LmNrLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9ue3BhZGRpbmctbGVmdDp2YXIoLS1jay1zcGFjaW5nLXRpbnkpfS5jay10b29sYmFyLWNvbnRhaW5lciAuY2suY2stdG9vbGJhcntib3JkZXI6MH0uY2suY2stdG9vbGJhcltkaXI9cnRsXT4uY2stdG9vbGJhcl9faXRlbXM+LmNrLFtkaXI9cnRsXSAuY2suY2stdG9vbGJhcj4uY2stdG9vbGJhcl9faXRlbXM+LmNre21hcmdpbi1yaWdodDowfS5jay5jay10b29sYmFyW2Rpcj1ydGxdOm5vdCguY2stdG9vbGJhcl9jb21wYWN0KT4uY2stdG9vbGJhcl9faXRlbXM+LmNrLFtkaXI9cnRsXSAuY2suY2stdG9vbGJhcjpub3QoLmNrLXRvb2xiYXJfY29tcGFjdCk+LmNrLXRvb2xiYXJfX2l0ZW1zPi5ja3ttYXJnaW4tbGVmdDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX0uY2suY2stdG9vbGJhcltkaXI9cnRsXT4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmxhc3QtY2hpbGQsW2Rpcj1ydGxdIC5jay5jay10b29sYmFyPi5jay10b29sYmFyX19pdGVtcz4uY2s6bGFzdC1jaGlsZHttYXJnaW4tbGVmdDowfS5jay5jay10b29sYmFyW2Rpcj1ydGxdLmNrLXRvb2xiYXJfY29tcGFjdD4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmZpcnN0LWNoaWxkLFtkaXI9cnRsXSAuY2suY2stdG9vbGJhci5jay10b29sYmFyX2NvbXBhY3Q+LmNrLXRvb2xiYXJfX2l0ZW1zPi5jazpmaXJzdC1jaGlsZHtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowfS5jay5jay10b29sYmFyW2Rpcj1ydGxdLmNrLXRvb2xiYXJfY29tcGFjdD4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmxhc3QtY2hpbGQsW2Rpcj1ydGxdIC5jay5jay10b29sYmFyLmNrLXRvb2xiYXJfY29tcGFjdD4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmxhc3QtY2hpbGR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5jay5jay10b29sYmFyW2Rpcj1ydGxdPi5jay5jay10b29sYmFyX19zZXBhcmF0b3IsW2Rpcj1ydGxdIC5jay5jay10b29sYmFyPi5jay5jay10b29sYmFyX19zZXBhcmF0b3J7bWFyZ2luLWxlZnQ6dmFyKC0tY2stc3BhY2luZy1zbWFsbCl9LmNrLmNrLXRvb2xiYXJbZGlyPXJ0bF0uY2stdG9vbGJhcl9ncm91cGluZz4uY2stdG9vbGJhcl9faXRlbXM6bm90KDplbXB0eSk6bm90KDpvbmx5LWNoaWxkKSxbZGlyPXJ0bF0gLmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl9ncm91cGluZz4uY2stdG9vbGJhcl9faXRlbXM6bm90KDplbXB0eSk6bm90KDpvbmx5LWNoaWxkKXttYXJnaW4tbGVmdDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX0uY2suY2stdG9vbGJhcltkaXI9bHRyXT4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmxhc3QtY2hpbGQsW2Rpcj1sdHJdIC5jay5jay10b29sYmFyPi5jay10b29sYmFyX19pdGVtcz4uY2s6bGFzdC1jaGlsZHttYXJnaW4tcmlnaHQ6MH0uY2suY2stdG9vbGJhcltkaXI9bHRyXS5jay10b29sYmFyX2NvbXBhY3Q+LmNrLXRvb2xiYXJfX2l0ZW1zPi5jazpmaXJzdC1jaGlsZCxbZGlyPWx0cl0gLmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl9jb21wYWN0Pi5jay10b29sYmFyX19pdGVtcz4uY2s6Zmlyc3QtY2hpbGR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5jay5jay10b29sYmFyW2Rpcj1sdHJdLmNrLXRvb2xiYXJfY29tcGFjdD4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmxhc3QtY2hpbGQsW2Rpcj1sdHJdIC5jay5jay10b29sYmFyLmNrLXRvb2xiYXJfY29tcGFjdD4uY2stdG9vbGJhcl9faXRlbXM+LmNrOmxhc3QtY2hpbGR7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0uY2suY2stdG9vbGJhcltkaXI9bHRyXT4uY2suY2stdG9vbGJhcl9fc2VwYXJhdG9yLFtkaXI9bHRyXSAuY2suY2stdG9vbGJhcj4uY2suY2stdG9vbGJhcl9fc2VwYXJhdG9ye21hcmdpbi1yaWdodDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX0uY2suY2stdG9vbGJhcltkaXI9bHRyXS5jay10b29sYmFyX2dyb3VwaW5nPi5jay10b29sYmFyX19pdGVtczpub3QoOmVtcHR5KTpub3QoOm9ubHktY2hpbGQpLFtkaXI9bHRyXSAuY2suY2stdG9vbGJhci5jay10b29sYmFyX2dyb3VwaW5nPi5jay10b29sYmFyX19pdGVtczpub3QoOmVtcHR5KTpub3QoOm9ubHktY2hpbGQpe21hcmdpbi1yaWdodDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg0Mik7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLXBsYWNlaG9sZGVyOmJlZm9yZSwuY2sgLmNrLXBsYWNlaG9sZGVyOmJlZm9yZXtjb250ZW50OmF0dHIoZGF0YS1wbGFjZWhvbGRlcik7cG9pbnRlci1ldmVudHM6bm9uZX0uY2suY2stcmVhZC1vbmx5IC5jay1wbGFjZWhvbGRlcjpiZWZvcmV7ZGlzcGxheTpub25lfS5jay5jay1wbGFjZWhvbGRlcjpiZWZvcmUsLmNrIC5jay1wbGFjZWhvbGRlcjpiZWZvcmV7Y3Vyc29yOnRleHQ7Y29sb3I6dmFyKC0tY2stY29sb3ItZW5naW5lLXBsYWNlaG9sZGVyLXRleHQpfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDQ0KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKXtib3JkZXItcmFkaXVzOjB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKSwuY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKS5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX0uY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKS5jay1mb2N1c2Vke291dGxpbmU6bm9uZTtib3JkZXI6dmFyKC0tY2stZm9jdXMtcmluZyk7Ym94LXNoYWRvdzp2YXIoLS1jay1pbm5lci1zaGFkb3cpLDAgMH0uY2suY2stZWRpdG9yX19lZGl0YWJsZV9pbmxpbmV7b3ZlcmZsb3c6YXV0bztwYWRkaW5nOjAgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudH0uY2suY2stZWRpdG9yX19lZGl0YWJsZV9pbmxpbmVbZGlyPWx0cl17dGV4dC1hbGlnbjpsZWZ0fS5jay5jay1lZGl0b3JfX2VkaXRhYmxlX2lubGluZVtkaXI9cnRsXXt0ZXh0LWFsaWduOnJpZ2h0fS5jay5jay1lZGl0b3JfX2VkaXRhYmxlX2lubGluZT46Zmlyc3QtY2hpbGR7bWFyZ2luLXRvcDp2YXIoLS1jay1zcGFjaW5nLWxhcmdlKX0uY2suY2stZWRpdG9yX19lZGl0YWJsZV9pbmxpbmU+Omxhc3QtY2hpbGR7bWFyZ2luLWJvdHRvbTp2YXIoLS1jay1zcGFjaW5nLWxhcmdlKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay10b29sYmFyLWNvbnRhaW5lcltjbGFzcyo9YXJyb3dfbl06YWZ0ZXJ7Ym9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1jay1jb2xvci1iYXNlLWZvcmVncm91bmQpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLXRvb2xiYXItY29udGFpbmVyW2NsYXNzKj1hcnJvd19zXTphZnRlcntib3JkZXItdG9wLWNvbG9yOnZhcigtLWNrLWNvbG9yLWJhc2UtZm9yZWdyb3VuZCl9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoNDYpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay1jb250ZW50IGJsb2NrcXVvdGV7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmctcmlnaHQ6MS41ZW07cGFkZGluZy1sZWZ0OjEuNWVtO21hcmdpbi1sZWZ0OjA7bWFyZ2luLXJpZ2h0OjA7Zm9udC1zdHlsZTppdGFsaWM7Ym9yZGVyLWxlZnQ6NXB4IHNvbGlkICNjY2N9LmNrLWNvbnRlbnRbZGlyPXJ0bF0gYmxvY2txdW90ZXtib3JkZXItbGVmdDowO2JvcmRlci1yaWdodDo1cHggc29saWQgI2NjY31cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg0OCk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLWNvbG9yLWdyaWR7ZGlzcGxheTpncmlkfTpyb290ey0tY2stY29sb3ItZ3JpZC10aWxlLXNpemU6MjRweDstLWNrLWNvbG9yLWNvbG9yLWdyaWQtY2hlY2staWNvbjojMDAwfS5jay5jay1jb2xvci1ncmlke2dyaWQtZ2FwOjVweDtwYWRkaW5nOjhweH0uY2suY2stY29sb3ItZ3JpZF9fdGlsZXt3aWR0aDp2YXIoLS1jay1jb2xvci1ncmlkLXRpbGUtc2l6ZSk7aGVpZ2h0OnZhcigtLWNrLWNvbG9yLWdyaWQtdGlsZS1zaXplKTttaW4td2lkdGg6dmFyKC0tY2stY29sb3ItZ3JpZC10aWxlLXNpemUpO21pbi1oZWlnaHQ6dmFyKC0tY2stY29sb3ItZ3JpZC10aWxlLXNpemUpO3BhZGRpbmc6MDt0cmFuc2l0aW9uOmJveC1zaGFkb3cgLjJzIGVhc2U7Ym9yZGVyOjB9LmNrLmNrLWNvbG9yLWdyaWRfX3RpbGUuY2stZGlzYWJsZWR7Y3Vyc29yOnVuc2V0O3RyYW5zaXRpb246dW5zZXR9LmNrLmNrLWNvbG9yLWdyaWRfX3RpbGUuY2stY29sb3ItdGFibGVfX2NvbG9yLXRpbGVfYm9yZGVyZWR7Ym94LXNoYWRvdzowIDAgMCAxcHggdmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpfS5jay5jay1jb2xvci1ncmlkX190aWxlIC5jay5jay1pY29ue2Rpc3BsYXk6bm9uZTtjb2xvcjp2YXIoLS1jay1jb2xvci1jb2xvci1ncmlkLWNoZWNrLWljb24pfS5jay5jay1jb2xvci1ncmlkX190aWxlLmNrLW9ue2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgMXB4IHZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCksMCAwIDAgMnB4IHZhcigtLWNrLWNvbG9yLWJhc2UtdGV4dCl9LmNrLmNrLWNvbG9yLWdyaWRfX3RpbGUuY2stb24gLmNrLmNrLWljb257ZGlzcGxheTpibG9ja30uY2suY2stY29sb3ItZ3JpZF9fdGlsZS5jay1vbiwuY2suY2stY29sb3ItZ3JpZF9fdGlsZTpmb2N1czpub3QoLmNrLWRpc2FibGVkKSwuY2suY2stY29sb3ItZ3JpZF9fdGlsZTpob3Zlcjpub3QoLmNrLWRpc2FibGVkKXtib3JkZXI6MH0uY2suY2stY29sb3ItZ3JpZF9fdGlsZTpmb2N1czpub3QoLmNrLWRpc2FibGVkKSwuY2suY2stY29sb3ItZ3JpZF9fdGlsZTpob3Zlcjpub3QoLmNrLWRpc2FibGVkKXtib3gtc2hhZG93Omluc2V0IDAgMCAwIDFweCB2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpLDAgMCAwIDJweCB2YXIoLS1jay1jb2xvci1mb2N1cy1ib3JkZXIpfS5jay5jay1jb2xvci1ncmlkX19sYWJlbHtwYWRkaW5nOjAgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCl9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoNTApO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1sYWJlbHtkaXNwbGF5OmJsb2NrfS5jay5jay12b2ljZS1sYWJlbHtkaXNwbGF5Om5vbmV9LmNrLmNrLWxhYmVse2ZvbnQtd2VpZ2h0OjcwMH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg1Mik7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrIC5jay1idXR0b24uY2stY29sb3ItdGFibGVfX3JlbW92ZS1jb2xvcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOjEwMCV9bGFiZWwuY2suY2stY29sb3ItZ3JpZF9fbGFiZWx7Zm9udC13ZWlnaHQ6dW5zZXR9LmNrIC5jay1idXR0b24uY2stY29sb3ItdGFibGVfX3JlbW92ZS1jb2xvcntwYWRkaW5nOmNhbGModmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCkvMikgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjB9LmNrIC5jay1idXR0b24uY2stY29sb3ItdGFibGVfX3JlbW92ZS1jb2xvcjpub3QoOmZvY3VzKXtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9W2Rpcj1sdHJdIC5jayAuY2stYnV0dG9uLmNrLWNvbG9yLXRhYmxlX19yZW1vdmUtY29sb3IgLmNrLmNrLWljb257bWFyZ2luLXJpZ2h0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfVtkaXI9cnRsXSAuY2sgLmNrLWJ1dHRvbi5jay1jb2xvci10YWJsZV9fcmVtb3ZlLWNvbG9yIC5jay5jay1pY29ue21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDU0KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIudGV4dC10aW55e2ZvbnQtc2l6ZTouN2VtfS50ZXh0LXNtYWxse2ZvbnQtc2l6ZTouODVlbX0udGV4dC1iaWd7Zm9udC1zaXplOjEuNGVtfS50ZXh0LWh1Z2V7Zm9udC1zaXplOjEuOGVtfVwifSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1oZWFkaW5nX2hlYWRpbmcxe2ZvbnQtc2l6ZToyMHB4fS5jay5jay1oZWFkaW5nX2hlYWRpbmcye2ZvbnQtc2l6ZToxN3B4fS5jay5jay1oZWFkaW5nX2hlYWRpbmcze2ZvbnQtc2l6ZToxNHB4fS5ja1tjbGFzcyo9Y2staGVhZGluZ19oZWFkaW5nXXtmb250LXdlaWdodDo3MDB9LmNrLmNrLWRyb3Bkb3duLmNrLWhlYWRpbmctZHJvcGRvd24gLmNrLWRyb3Bkb3duX19idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7d2lkdGg6OGVtfS5jay5jay1kcm9wZG93bi5jay1oZWFkaW5nLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3RfX2l0ZW17bWluLXdpZHRoOjE4ZW19XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoNTcpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay1lZGl0b3JfX2VkaXRhYmxlIC5jay1ob3Jpem9udGFsLWxpbmV7b3ZlcmZsb3c6aGlkZGVufS5jay1jb250ZW50IGhye2JvcmRlcjpzb2xpZCAjNWU1ZTVlO2JvcmRlci13aWR0aDoxcHggMCAwO21hcmdpbjowfS5jay1lZGl0b3JfX2VkaXRhYmxlIC5jay1ob3Jpem9udGFsLWxpbmV7cGFkZGluZzo1cHggMH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg1OSk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiOnJvb3R7LS1jay1jb2xvci1yZXNpemVyOnZhcigtLWNrLWNvbG9yLWZvY3VzLWJvcmRlcik7LS1jay1yZXNpemVyLXNpemU6MTBweDstLWNrLXJlc2l6ZXItYm9yZGVyLXdpZHRoOjFweDstLWNrLXJlc2l6ZXItYm9yZGVyLXJhZGl1czoycHg7LS1jay1yZXNpemVyLW9mZnNldDpjYWxjKHZhcigtLWNrLXJlc2l6ZXItc2l6ZSkvLTIgLSAycHgpOy0tY2stcmVzaXplci10b29sdGlwLW9mZnNldDoxMHB4Oy0tY2stY29sb3ItcmVzaXplci10b29sdGlwLWJhY2tncm91bmQ6IzI2MjYyNjstLWNrLWNvbG9yLXJlc2l6ZXItdG9vbHRpcC10ZXh0OiNmMmYyZjJ9LmNrIC5jay13aWRnZXQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZXtwb3NpdGlvbjpyZWxhdGl2ZX0uY2sgLmNrLXdpZGdldC5jay13aWRnZXRfd2l0aC1zZWxlY3Rpb24taGFuZGxlIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGV9LmNrIC5jay13aWRnZXQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZSAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlIC5jay1pY29ue2Rpc3BsYXk6YmxvY2t9LmNrIC5jay13aWRnZXQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZS5jay13aWRnZXRfc2VsZWN0ZWQgLmNrLXdpZGdldF9fc2VsZWN0aW9uLWhhbmRsZSwuY2sgLmNrLXdpZGdldC5jay13aWRnZXRfd2l0aC1zZWxlY3Rpb24taGFuZGxlOmhvdmVyIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGV7dmlzaWJpbGl0eTp2aXNpYmxlfS5jayAuY2stc2l6ZS12aWV3e2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItcmVzaXplci10b29sdGlwLWJhY2tncm91bmQpO2NvbG9yOnZhcigtLWNrLWNvbG9yLXJlc2l6ZXItdG9vbHRpcC10ZXh0KTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXJlc2l6ZXItdG9vbHRpcC10ZXh0KTtib3JkZXItcmFkaXVzOnZhcigtLWNrLXJlc2l6ZXItYm9yZGVyLXJhZGl1cyk7Zm9udC1zaXplOnZhcigtLWNrLWZvbnQtc2l6ZS10aW55KTtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1zbWFsbCl9LmNrIC5jay1zaXplLXZpZXcuY2stb3JpZW50YXRpb24tYm90dG9tLWxlZnQsLmNrIC5jay1zaXplLXZpZXcuY2stb3JpZW50YXRpb24tYm90dG9tLXJpZ2h0LC5jayAuY2stc2l6ZS12aWV3LmNrLW9yaWVudGF0aW9uLXRvcC1sZWZ0LC5jayAuY2stc2l6ZS12aWV3LmNrLW9yaWVudGF0aW9uLXRvcC1yaWdodHtwb3NpdGlvbjphYnNvbHV0ZX0uY2sgLmNrLXNpemUtdmlldy5jay1vcmllbnRhdGlvbi10b3AtbGVmdHt0b3A6dmFyKC0tY2stcmVzaXplci10b29sdGlwLW9mZnNldCk7bGVmdDp2YXIoLS1jay1yZXNpemVyLXRvb2x0aXAtb2Zmc2V0KX0uY2sgLmNrLXNpemUtdmlldy5jay1vcmllbnRhdGlvbi10b3AtcmlnaHR7dG9wOnZhcigtLWNrLXJlc2l6ZXItdG9vbHRpcC1vZmZzZXQpO3JpZ2h0OnZhcigtLWNrLXJlc2l6ZXItdG9vbHRpcC1vZmZzZXQpfS5jayAuY2stc2l6ZS12aWV3LmNrLW9yaWVudGF0aW9uLWJvdHRvbS1yaWdodHtib3R0b206dmFyKC0tY2stcmVzaXplci10b29sdGlwLW9mZnNldCk7cmlnaHQ6dmFyKC0tY2stcmVzaXplci10b29sdGlwLW9mZnNldCl9LmNrIC5jay1zaXplLXZpZXcuY2stb3JpZW50YXRpb24tYm90dG9tLWxlZnR7Ym90dG9tOnZhcigtLWNrLXJlc2l6ZXItdG9vbHRpcC1vZmZzZXQpO2xlZnQ6dmFyKC0tY2stcmVzaXplci10b29sdGlwLW9mZnNldCl9OnJvb3R7LS1jay13aWRnZXQtb3V0bGluZS10aGlja25lc3M6M3B4Oy0tY2std2lkZ2V0LWhhbmRsZXItaWNvbi1zaXplOjE2cHg7LS1jay13aWRnZXQtaGFuZGxlci1hbmltYXRpb24tZHVyYXRpb246MjAwbXM7LS1jay13aWRnZXQtaGFuZGxlci1hbmltYXRpb24tY3VydmU6ZWFzZTstLWNrLWNvbG9yLXdpZGdldC1ibHVycmVkLWJvcmRlcjojZGVkZWRlOy0tY2stY29sb3Itd2lkZ2V0LWhvdmVyLWJvcmRlcjojZmZjODNkOy0tY2stY29sb3Itd2lkZ2V0LWVkaXRhYmxlLWZvY3VzLWJhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYmFzZS1iYWNrZ3JvdW5kKTstLWNrLWNvbG9yLXdpZGdldC1kcmFnLWhhbmRsZXItaWNvbi1jb2xvcjp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpfS5jayAuY2std2lkZ2V0e291dGxpbmUtd2lkdGg6dmFyKC0tY2std2lkZ2V0LW91dGxpbmUtdGhpY2tuZXNzKTtvdXRsaW5lLXN0eWxlOnNvbGlkO291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnQ7dHJhbnNpdGlvbjpvdXRsaW5lLWNvbG9yIHZhcigtLWNrLXdpZGdldC1oYW5kbGVyLWFuaW1hdGlvbi1kdXJhdGlvbikgdmFyKC0tY2std2lkZ2V0LWhhbmRsZXItYW5pbWF0aW9uLWN1cnZlKX0uY2sgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQsLmNrIC5jay13aWRnZXQuY2std2lkZ2V0X3NlbGVjdGVkOmhvdmVye291dGxpbmU6dmFyKC0tY2std2lkZ2V0LW91dGxpbmUtdGhpY2tuZXNzKSBzb2xpZCB2YXIoLS1jay1jb2xvci1mb2N1cy1ib3JkZXIpfS5jayAuY2std2lkZ2V0OmhvdmVye291dGxpbmUtY29sb3I6dmFyKC0tY2stY29sb3Itd2lkZ2V0LWhvdmVyLWJvcmRlcil9LmNrIC5jay1lZGl0b3JfX25lc3RlZC1lZGl0YWJsZXtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50fS5jayAuY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGUuY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGVfZm9jdXNlZCwuY2sgLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlOmZvY3Vze291dGxpbmU6bm9uZTtib3JkZXI6dmFyKC0tY2stZm9jdXMtcmluZyk7Ym94LXNoYWRvdzp2YXIoLS1jay1pbm5lci1zaGFkb3cpLDAgMDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNrLWNvbG9yLXdpZGdldC1lZGl0YWJsZS1mb2N1cy1iYWNrZ3JvdW5kKX0uY2sgLmNrLXdpZGdldC5jay13aWRnZXRfd2l0aC1zZWxlY3Rpb24taGFuZGxlIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGV7cGFkZGluZzo0cHg7Ym94LXNpemluZzpib3JkZXItYm94O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7b3BhY2l0eTowO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciB2YXIoLS1jay13aWRnZXQtaGFuZGxlci1hbmltYXRpb24tZHVyYXRpb24pIHZhcigtLWNrLXdpZGdldC1oYW5kbGVyLWFuaW1hdGlvbi1jdXJ2ZSksdmlzaWJpbGl0eSB2YXIoLS1jay13aWRnZXQtaGFuZGxlci1hbmltYXRpb24tZHVyYXRpb24pIHZhcigtLWNrLXdpZGdldC1oYW5kbGVyLWFuaW1hdGlvbi1jdXJ2ZSksb3BhY2l0eSB2YXIoLS1jay13aWRnZXQtaGFuZGxlci1hbmltYXRpb24tZHVyYXRpb24pIHZhcigtLWNrLXdpZGdldC1oYW5kbGVyLWFuaW1hdGlvbi1jdXJ2ZSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKSB2YXIoLS1jay1ib3JkZXItcmFkaXVzKSAwIDA7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMCUpO2xlZnQ6Y2FsYygwcHggLSB2YXIoLS1jay13aWRnZXQtb3V0bGluZS10aGlja25lc3MpKX0uY2sgLmNrLXdpZGdldC5jay13aWRnZXRfd2l0aC1zZWxlY3Rpb24taGFuZGxlIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGUgLmNrLWljb257d2lkdGg6dmFyKC0tY2std2lkZ2V0LWhhbmRsZXItaWNvbi1zaXplKTtoZWlnaHQ6dmFyKC0tY2std2lkZ2V0LWhhbmRsZXItaWNvbi1zaXplKTtjb2xvcjp2YXIoLS1jay1jb2xvci13aWRnZXQtZHJhZy1oYW5kbGVyLWljb24tY29sb3IpfS5jayAuY2std2lkZ2V0LmNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGUgLmNrLXdpZGdldF9fc2VsZWN0aW9uLWhhbmRsZSAuY2staWNvbiAuY2staWNvbl9fc2VsZWN0ZWQtaW5kaWNhdG9ye29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjNzIHZhcigtLWNrLXdpZGdldC1oYW5kbGVyLWFuaW1hdGlvbi1jdXJ2ZSl9LmNrIC5jay13aWRnZXQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZSAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlOmhvdmVyIC5jay1pY29uIC5jay1pY29uX19zZWxlY3RlZC1pbmRpY2F0b3J7b3BhY2l0eToxfS5jayAuY2std2lkZ2V0LmNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGU6aG92ZXIgLmNrLXdpZGdldF9fc2VsZWN0aW9uLWhhbmRsZXtvcGFjaXR5OjE7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jay1jb2xvci13aWRnZXQtaG92ZXItYm9yZGVyKX0uY2sgLmNrLXdpZGdldC5jay13aWRnZXRfd2l0aC1zZWxlY3Rpb24taGFuZGxlLmNrLXdpZGdldF9zZWxlY3RlZCAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlLC5jayAuY2std2lkZ2V0LmNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGUuY2std2lkZ2V0X3NlbGVjdGVkOmhvdmVyIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGV7b3BhY2l0eToxO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2stY29sb3ItZm9jdXMtYm9yZGVyKX0uY2sgLmNrLXdpZGdldC5jay13aWRnZXRfd2l0aC1zZWxlY3Rpb24taGFuZGxlLmNrLXdpZGdldF9zZWxlY3RlZCAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlIC5jay1pY29uIC5jay1pY29uX19zZWxlY3RlZC1pbmRpY2F0b3IsLmNrIC5jay13aWRnZXQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZS5jay13aWRnZXRfc2VsZWN0ZWQ6aG92ZXIgLmNrLXdpZGdldF9fc2VsZWN0aW9uLWhhbmRsZSAuY2staWNvbiAuY2staWNvbl9fc2VsZWN0ZWQtaW5kaWNhdG9ye29wYWNpdHk6MX0uY2stZWRpdG9yX19lZGl0YWJsZT4uY2std2lkZ2V0LmNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGU6Zmlyc3QtY2hpbGQsLmNrLWVkaXRvcl9fZWRpdGFibGUgYmxvY2txdW90ZT4uY2std2lkZ2V0LmNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGU6Zmlyc3QtY2hpbGR7bWFyZ2luLXRvcDpjYWxjKDFlbSArIHZhcigtLWNrLXdpZGdldC1oYW5kbGVyLWljb24tc2l6ZSkpfS5ja1tkaXI9cnRsXSAuY2std2lkZ2V0LmNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGUgLmNrLXdpZGdldF9fc2VsZWN0aW9uLWhhbmRsZXtsZWZ0OmF1dG87cmlnaHQ6Y2FsYygwcHggLSB2YXIoLS1jay13aWRnZXQtb3V0bGluZS10aGlja25lc3MpKX0uY2stZWRpdG9yX19lZGl0YWJsZS5jay1ibHVycmVkIC5jay13aWRnZXQuY2std2lkZ2V0X3NlbGVjdGVkLC5jay1lZGl0b3JfX2VkaXRhYmxlLmNrLWJsdXJyZWQgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQ6aG92ZXJ7b3V0bGluZS1jb2xvcjp2YXIoLS1jay1jb2xvci13aWRnZXQtYmx1cnJlZC1ib3JkZXIpfS5jay1lZGl0b3JfX2VkaXRhYmxlLmNrLWJsdXJyZWQgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZSAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlLC5jay1lZGl0b3JfX2VkaXRhYmxlLmNrLWJsdXJyZWQgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZSAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlOmhvdmVyLC5jay1lZGl0b3JfX2VkaXRhYmxlLmNrLWJsdXJyZWQgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQ6aG92ZXIuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZSAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlLC5jay1lZGl0b3JfX2VkaXRhYmxlLmNrLWJsdXJyZWQgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQ6aG92ZXIuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZSAuY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3Itd2lkZ2V0LWJsdXJyZWQtYm9yZGVyKX0uY2stZWRpdG9yX19lZGl0YWJsZS5jay1yZWFkLW9ubHkgLmNrLXdpZGdldHstLWNrLXdpZGdldC1vdXRsaW5lLXRoaWNrbmVzczowfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDYxKTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stbGFiZWxlZC1pbnB1dCAuY2stbGFiZWxlZC1pbnB1dF9fc3RhdHVze2ZvbnQtc2l6ZTp2YXIoLS1jay1mb250LXNpemUtc21hbGwpO21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1zbWFsbCk7d2hpdGUtc3BhY2U6bm9ybWFsfS5jay5jay1sYWJlbGVkLWlucHV0IC5jay1sYWJlbGVkLWlucHV0X19zdGF0dXNfZXJyb3J7Y29sb3I6dmFyKC0tY2stY29sb3ItYmFzZS1lcnJvcil9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoNjMpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIjpyb290ey0tY2staW5wdXQtdGV4dC13aWR0aDoxOGVtfS5jay5jay1pbnB1dC10ZXh0e2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1pbnB1dC10ZXh0LC5jay5jay1pbnB1dC10ZXh0LmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay1pbnB1dC10ZXh0e2JveC1zaGFkb3c6dmFyKC0tY2staW5uZXItc2hhZG93KSwwIDA7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1pbnB1dC1iYWNrZ3JvdW5kKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWlucHV0LWJvcmRlcik7cGFkZGluZzp2YXIoLS1jay1zcGFjaW5nLWV4dHJhLXRpbnkpIHZhcigtLWNrLXNwYWNpbmctbWVkaXVtKTttaW4td2lkdGg6dmFyKC0tY2staW5wdXQtdGV4dC13aWR0aCk7bWluLWhlaWdodDp2YXIoLS1jay11aS1jb21wb25lbnQtbWluLWhlaWdodCk7dHJhbnNpdGlvbjpib3gtc2hhZG93IC4ycyBlYXNlLWluLW91dCxib3JkZXIgLjJzIGVhc2UtaW4tb3V0fS5jay5jay1pbnB1dC10ZXh0OmZvY3Vze291dGxpbmU6bm9uZTtib3JkZXI6dmFyKC0tY2stZm9jdXMtcmluZyk7Ym94LXNoYWRvdzp2YXIoLS1jay1mb2N1cy1vdXRlci1zaGFkb3cpLHZhcigtLWNrLWlubmVyLXNoYWRvdyl9LmNrLmNrLWlucHV0LXRleHRbcmVhZG9ubHlde2JvcmRlcjoxcHggc29saWQgdmFyKC0tY2stY29sb3ItaW5wdXQtZGlzYWJsZWQtYm9yZGVyKTtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWlucHV0LWRpc2FibGVkLWJhY2tncm91bmQpO2NvbG9yOnZhcigtLWNrLWNvbG9yLWlucHV0LWRpc2FibGVkLXRleHQpfS5jay5jay1pbnB1dC10ZXh0W3JlYWRvbmx5XTpmb2N1c3tib3gtc2hhZG93OnZhcigtLWNrLWZvY3VzLWRpc2FibGVkLW91dGVyLXNoYWRvdyksdmFyKC0tY2staW5uZXItc2hhZG93KX0uY2suY2staW5wdXQtdGV4dC5jay1lcnJvcntib3JkZXItY29sb3I6dmFyKC0tY2stY29sb3ItaW5wdXQtZXJyb3ItYm9yZGVyKTthbmltYXRpb246Y2stdGV4dC1pbnB1dC1zaGFrZSAuM3MgZWFzZSBib3RofS5jay5jay1pbnB1dC10ZXh0LmNrLWVycm9yOmZvY3Vze2JveC1zaGFkb3c6dmFyKC0tY2stZm9jdXMtZXJyb3Itb3V0ZXItc2hhZG93KSx2YXIoLS1jay1pbm5lci1zaGFkb3cpfUBrZXlmcmFtZXMgY2stdGV4dC1pbnB1dC1zaGFrZXsyMCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTJweCl9NDAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKDJweCl9NjAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xcHgpfTgwJXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxcHgpfX1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg2NSk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybXtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtd3JhcDpub3dyYXB9LmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybSAuY2stbGFiZWxlZC1pbnB1dHtkaXNwbGF5OmlubGluZS1ibG9ja30uY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtIC5jay1sYWJlbHtkaXNwbGF5Om5vbmV9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo2MDBweCl7LmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybXtmbGV4LXdyYXA6d3JhcH0uY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtIC5jay1sYWJlbGVkLWlucHV0e2ZsZXgtYmFzaXM6MTAwJX0uY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtIC5jay1idXR0b257ZmxleC1iYXNpczo1MCV9fS5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm17cGFkZGluZzp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKX0uY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtOmZvY3Vze291dGxpbmU6bm9uZX1bZGlyPWx0cl0gLmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybT46bm90KDpmaXJzdC1jaGlsZCksW2Rpcj1ydGxdIC5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm0+Om5vdCg6bGFzdC1jaGlsZCl7bWFyZ2luLWxlZnQ6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCl9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo2MDBweCl7LmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybXtwYWRkaW5nOjA7d2lkdGg6Y2FsYygwLjgqdmFyKC0tY2staW5wdXQtdGV4dC13aWR0aCkpfS5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm0gLmNrLWxhYmVsZWQtaW5wdXR7bWFyZ2luOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpIHZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpIDB9LmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybSAuY2stbGFiZWxlZC1pbnB1dCAuY2staW5wdXQtdGV4dHttaW4td2lkdGg6MDt3aWR0aDoxMDAlfS5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm0gLmNrLWJ1dHRvbntwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpO21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7Ym9yZGVyLXJhZGl1czowO2JvcmRlcjowO2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX1bZGlyPWx0cl0gLmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybSAuY2stYnV0dG9ue21hcmdpbi1sZWZ0OjB9W2Rpcj1sdHJdIC5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm0gLmNrLWJ1dHRvbjpmaXJzdC1vZi10eXBle2JvcmRlci1yaWdodDoxcHggc29saWQgdmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpfVtkaXI9cnRsXSAuY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtIC5jay1idXR0b257bWFyZ2luLWxlZnQ6MH1bZGlyPXJ0bF0gLmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybSAuY2stYnV0dG9uOmxhc3Qtb2YtdHlwZXtib3JkZXItcmlnaHQ6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX19XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoNjcpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay1jb250ZW50IC5pbWFnZXtkaXNwbGF5OnRhYmxlO2NsZWFyOmJvdGg7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luOjFlbSBhdXRvfS5jay1jb250ZW50IC5pbWFnZT5pbWd7ZGlzcGxheTpibG9jazttYXJnaW46MCBhdXRvO21heC13aWR0aDoxMDAlO21pbi13aWR0aDo1MHB4fVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDY5KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCI6cm9vdHstLWNrLWltYWdlLXN0eWxlLXNwYWNpbmc6MS41ZW19LmNrLWNvbnRlbnQgLmltYWdlLXN0eWxlLWFsaWduLWNlbnRlciwuY2stY29udGVudCAuaW1hZ2Utc3R5bGUtYWxpZ24tbGVmdCwuY2stY29udGVudCAuaW1hZ2Utc3R5bGUtYWxpZ24tcmlnaHQsLmNrLWNvbnRlbnQgLmltYWdlLXN0eWxlLXNpZGV7bWF4LXdpZHRoOjUwJX0uY2stY29udGVudCAuaW1hZ2Utc3R5bGUtc2lkZXtmbG9hdDpyaWdodDttYXJnaW4tbGVmdDp2YXIoLS1jay1pbWFnZS1zdHlsZS1zcGFjaW5nKX0uY2stY29udGVudCAuaW1hZ2Utc3R5bGUtYWxpZ24tbGVmdHtmbG9hdDpsZWZ0O21hcmdpbi1yaWdodDp2YXIoLS1jay1pbWFnZS1zdHlsZS1zcGFjaW5nKX0uY2stY29udGVudCAuaW1hZ2Utc3R5bGUtYWxpZ24tY2VudGVye21hcmdpbi1sZWZ0OmF1dG87bWFyZ2luLXJpZ2h0OmF1dG99LmNrLWNvbnRlbnQgLmltYWdlLXN0eWxlLWFsaWduLXJpZ2h0e2Zsb2F0OnJpZ2h0O21hcmdpbi1sZWZ0OnZhcigtLWNrLWltYWdlLXN0eWxlLXNwYWNpbmcpfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDcxKTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2sgLmNrLXdpZGdldF93aXRoLXJlc2l6ZXJ7cG9zaXRpb246cmVsYXRpdmV9LmNrIC5jay13aWRnZXRfX3Jlc2l6ZXJ7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmFic29sdXRlO3BvaW50ZXItZXZlbnRzOm5vbmU7bGVmdDowO3RvcDowO291dGxpbmU6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXJlc2l6ZXIpfS5jay1mb2N1c2VkIC5jay13aWRnZXRfd2l0aC1yZXNpemVyLmNrLXdpZGdldF9zZWxlY3RlZD4uY2std2lkZ2V0X19yZXNpemVye2Rpc3BsYXk6YmxvY2t9LmNrIC5jay13aWRnZXRfX3Jlc2l6ZXJfX2hhbmRsZXtwb3NpdGlvbjphYnNvbHV0ZTtwb2ludGVyLWV2ZW50czphbGw7d2lkdGg6dmFyKC0tY2stcmVzaXplci1zaXplKTtoZWlnaHQ6dmFyKC0tY2stcmVzaXplci1zaXplKTtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWZvY3VzLWJvcmRlcik7Ym9yZGVyOnZhcigtLWNrLXJlc2l6ZXItYm9yZGVyLXdpZHRoKSBzb2xpZCAjZmZmO2JvcmRlci1yYWRpdXM6dmFyKC0tY2stcmVzaXplci1ib3JkZXItcmFkaXVzKX0uY2sgLmNrLXdpZGdldF9fcmVzaXplcl9faGFuZGxlLmNrLXdpZGdldF9fcmVzaXplcl9faGFuZGxlLXRvcC1sZWZ0e3RvcDp2YXIoLS1jay1yZXNpemVyLW9mZnNldCk7bGVmdDp2YXIoLS1jay1yZXNpemVyLW9mZnNldCk7Y3Vyc29yOm53c2UtcmVzaXplfS5jayAuY2std2lkZ2V0X19yZXNpemVyX19oYW5kbGUuY2std2lkZ2V0X19yZXNpemVyX19oYW5kbGUtdG9wLXJpZ2h0e3RvcDp2YXIoLS1jay1yZXNpemVyLW9mZnNldCk7cmlnaHQ6dmFyKC0tY2stcmVzaXplci1vZmZzZXQpO2N1cnNvcjpuZXN3LXJlc2l6ZX0uY2sgLmNrLXdpZGdldF9fcmVzaXplcl9faGFuZGxlLmNrLXdpZGdldF9fcmVzaXplcl9faGFuZGxlLWJvdHRvbS1yaWdodHtib3R0b206dmFyKC0tY2stcmVzaXplci1vZmZzZXQpO3JpZ2h0OnZhcigtLWNrLXJlc2l6ZXItb2Zmc2V0KTtjdXJzb3I6bndzZS1yZXNpemV9LmNrIC5jay13aWRnZXRfX3Jlc2l6ZXJfX2hhbmRsZS5jay13aWRnZXRfX3Jlc2l6ZXJfX2hhbmRsZS1ib3R0b20tbGVmdHtib3R0b206dmFyKC0tY2stcmVzaXplci1vZmZzZXQpO2xlZnQ6dmFyKC0tY2stcmVzaXplci1vZmZzZXQpO2N1cnNvcjpuZXN3LXJlc2l6ZX1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg3Myk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLWNvbnRlbnQgLmltYWdlLmltYWdlX3Jlc2l6ZWR7bWF4LXdpZHRoOjEwMCU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3h9LmNrLWNvbnRlbnQgLmltYWdlLmltYWdlX3Jlc2l6ZWQgaW1ne3dpZHRoOjEwMCV9LmNrLWNvbnRlbnQgLmltYWdlLmltYWdlX3Jlc2l6ZWQ+ZmlnY2FwdGlvbntkaXNwbGF5OmJsb2NrfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDc1KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stZWRpdG9yX19lZGl0YWJsZSAuaW1hZ2V7cG9zaXRpb246cmVsYXRpdmV9LmNrLmNrLWVkaXRvcl9fZWRpdGFibGUgLmltYWdlIC5jay1wcm9ncmVzcy1iYXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowfS5jay5jay1lZGl0b3JfX2VkaXRhYmxlIC5pbWFnZS5jay1hcHBlYXJ7YW5pbWF0aW9uOmZhZGVJbiAuN3N9LmNrLmNrLWVkaXRvcl9fZWRpdGFibGUgLmltYWdlIC5jay1wcm9ncmVzcy1iYXJ7aGVpZ2h0OjJweDt3aWR0aDowO2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItdXBsb2FkLWJhci1iYWNrZ3JvdW5kKTt0cmFuc2l0aW9uOndpZHRoIC4xc31Aa2V5ZnJhbWVzIGZhZGVJbnswJXtvcGFjaXR5OjB9dG97b3BhY2l0eToxfX1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg3Nyk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPScuY2staW1hZ2UtdXBsb2FkLWNvbXBsZXRlLWljb257ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTBweDtyaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6NTAlfS5jay1pbWFnZS11cGxvYWQtY29tcGxldGUtaWNvbjphZnRlcntjb250ZW50OlwiXCI7cG9zaXRpb246YWJzb2x1dGV9OnJvb3R7LS1jay1jb2xvci1pbWFnZS11cGxvYWQtaWNvbjojZmZmOy0tY2stY29sb3ItaW1hZ2UtdXBsb2FkLWljb24tYmFja2dyb3VuZDojMDA4YTAwOy0tY2staW1hZ2UtdXBsb2FkLWljb24tc2l6ZToyMHB4Oy0tY2staW1hZ2UtdXBsb2FkLWljb24td2lkdGg6MnB4fS5jay1pbWFnZS11cGxvYWQtY29tcGxldGUtaWNvbnt3aWR0aDp2YXIoLS1jay1pbWFnZS11cGxvYWQtaWNvbi1zaXplKTtoZWlnaHQ6dmFyKC0tY2staW1hZ2UtdXBsb2FkLWljb24tc2l6ZSk7b3BhY2l0eTowO2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItaW1hZ2UtdXBsb2FkLWljb24tYmFja2dyb3VuZCk7YW5pbWF0aW9uLW5hbWU6Y2stdXBsb2FkLWNvbXBsZXRlLWljb24tc2hvdyxjay11cGxvYWQtY29tcGxldGUtaWNvbi1oaWRlO2FuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHMsZm9yd2FyZHM7YW5pbWF0aW9uLWR1cmF0aW9uOi41cywuNXM7Zm9udC1zaXplOnZhcigtLWNrLWltYWdlLXVwbG9hZC1pY29uLXNpemUpO2FuaW1hdGlvbi1kZWxheTowbXMsM3N9LmNrLWltYWdlLXVwbG9hZC1jb21wbGV0ZS1pY29uOmFmdGVye2xlZnQ6MjUlO3RvcDo1MCU7b3BhY2l0eTowO2hlaWdodDowO3dpZHRoOjA7dHJhbnNmb3JtOnNjYWxlWCgtMSkgcm90YXRlKDEzNWRlZyk7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0IHRvcDtib3JkZXItdG9wOnZhcigtLWNrLWltYWdlLXVwbG9hZC1pY29uLXdpZHRoKSBzb2xpZCB2YXIoLS1jay1jb2xvci1pbWFnZS11cGxvYWQtaWNvbik7Ym9yZGVyLXJpZ2h0OnZhcigtLWNrLWltYWdlLXVwbG9hZC1pY29uLXdpZHRoKSBzb2xpZCB2YXIoLS1jay1jb2xvci1pbWFnZS11cGxvYWQtaWNvbik7YW5pbWF0aW9uLW5hbWU6Y2stdXBsb2FkLWNvbXBsZXRlLWljb24tY2hlY2s7YW5pbWF0aW9uLWR1cmF0aW9uOi41czthbmltYXRpb24tZGVsYXk6LjVzO2FuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHM7Ym94LXNpemluZzpib3JkZXItYm94fUBrZXlmcmFtZXMgY2stdXBsb2FkLWNvbXBsZXRlLWljb24tc2hvd3swJXtvcGFjaXR5OjB9dG97b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGNrLXVwbG9hZC1jb21wbGV0ZS1pY29uLWhpZGV7MCV7b3BhY2l0eToxfXRve29wYWNpdHk6MH19QGtleWZyYW1lcyBjay11cGxvYWQtY29tcGxldGUtaWNvbi1jaGVja3swJXtvcGFjaXR5OjE7d2lkdGg6MDtoZWlnaHQ6MH0zMyV7d2lkdGg6LjNlbTtoZWlnaHQ6MH10b3tvcGFjaXR5OjE7d2lkdGg6LjNlbTtoZWlnaHQ6LjQ1ZW19fSd9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoNzkpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0nLmNrIC5jay11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVye3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt0b3A6MDtsZWZ0OjB9LmNrIC5jay11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVyOmJlZm9yZXtjb250ZW50OlwiXCI7cG9zaXRpb246cmVsYXRpdmV9OnJvb3R7LS1jay1jb2xvci11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVyOiNiM2IzYjM7LS1jay11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVyLXNpemU6MzJweH0uY2sgLmNrLWltYWdlLXVwbG9hZC1wbGFjZWhvbGRlcnt3aWR0aDoxMDAlO21hcmdpbjowfS5jayAuY2stdXBsb2FkLXBsYWNlaG9sZGVyLWxvYWRlcnt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5jayAuY2stdXBsb2FkLXBsYWNlaG9sZGVyLWxvYWRlcjpiZWZvcmV7d2lkdGg6dmFyKC0tY2stdXBsb2FkLXBsYWNlaG9sZGVyLWxvYWRlci1zaXplKTtoZWlnaHQ6dmFyKC0tY2stdXBsb2FkLXBsYWNlaG9sZGVyLWxvYWRlci1zaXplKTtib3JkZXItcmFkaXVzOjUwJTtib3JkZXItdG9wOjNweCBzb2xpZCB2YXIoLS1jay1jb2xvci11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVyKTtib3JkZXItcmlnaHQ6MnB4IHNvbGlkIHRyYW5zcGFyZW50O2FuaW1hdGlvbjpjay11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVyIDFzIGxpbmVhciBpbmZpbml0ZX1Aa2V5ZnJhbWVzIGNrLXVwbG9hZC1wbGFjZWhvbGRlci1sb2FkZXJ7dG97dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fSd9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoODEpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jayAuY2stbGlua19zZWxlY3RlZHtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWxpbmstc2VsZWN0ZWQtYmFja2dyb3VuZCl9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoODMpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1saW5rLWZvcm17ZGlzcGxheTpmbGV4fS5jay5jay1saW5rLWZvcm0gLmNrLWxhYmVse2Rpc3BsYXk6bm9uZX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjYwMHB4KXsuY2suY2stbGluay1mb3Jte2ZsZXgtd3JhcDp3cmFwfS5jay5jay1saW5rLWZvcm0gLmNrLWxhYmVsZWQtaW5wdXR7ZmxleC1iYXNpczoxMDAlfS5jay5jay1saW5rLWZvcm0gLmNrLWJ1dHRvbntmbGV4LWJhc2lzOjUwJX19LmNrLmNrLWxpbmstZm9ybV9sYXlvdXQtdmVydGljYWx7ZGlzcGxheTpibG9ja30uY2suY2stbGluay1mb3Jte3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCl9LmNrLmNrLWxpbmstZm9ybTpmb2N1c3tvdXRsaW5lOm5vbmV9W2Rpcj1sdHJdIC5jay5jay1saW5rLWZvcm0+Om5vdCg6Zmlyc3QtY2hpbGQpLFtkaXI9cnRsXSAuY2suY2stbGluay1mb3JtPjpub3QoOmxhc3QtY2hpbGQpe21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NjAwcHgpey5jay5jay1saW5rLWZvcm17cGFkZGluZzowO3dpZHRoOmNhbGMoMC44KnZhcigtLWNrLWlucHV0LXRleHQtd2lkdGgpKX0uY2suY2stbGluay1mb3JtIC5jay1sYWJlbGVkLWlucHV0e21hcmdpbjp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKSB2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKSAwfS5jay5jay1saW5rLWZvcm0gLmNrLWxhYmVsZWQtaW5wdXQgLmNrLWlucHV0LXRleHR7bWluLXdpZHRoOjA7d2lkdGg6MTAwJX0uY2suY2stbGluay1mb3JtIC5jay1idXR0b257cGFkZGluZzp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKTttYXJnaW4tdG9wOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpO2JvcmRlci1yYWRpdXM6MDtib3JkZXI6MDtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9W2Rpcj1sdHJdIC5jay5jay1saW5rLWZvcm0gLmNrLWJ1dHRvbnttYXJnaW4tbGVmdDowfVtkaXI9bHRyXSAuY2suY2stbGluay1mb3JtIC5jay1idXR0b246Zmlyc3Qtb2YtdHlwZXtib3JkZXItcmlnaHQ6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX1bZGlyPXJ0bF0gLmNrLmNrLWxpbmstZm9ybSAuY2stYnV0dG9ue21hcmdpbi1sZWZ0OjB9W2Rpcj1ydGxdIC5jay5jay1saW5rLWZvcm0gLmNrLWJ1dHRvbjpsYXN0LW9mLXR5cGV7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9fS5jay5jay1saW5rLWZvcm1fbGF5b3V0LXZlcnRpY2Fse3BhZGRpbmc6MDttaW4td2lkdGg6dmFyKC0tY2staW5wdXQtdGV4dC13aWR0aCl9LmNrLmNrLWxpbmstZm9ybV9sYXlvdXQtdmVydGljYWwgLmNrLWxhYmVsZWQtaW5wdXR7bWFyZ2luOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpIHZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpIHZhcigtLWNrLXNwYWNpbmctc21hbGwpfS5jay5jay1saW5rLWZvcm1fbGF5b3V0LXZlcnRpY2FsIC5jay1sYWJlbGVkLWlucHV0IC5jay1pbnB1dC10ZXh0e21pbi13aWR0aDowO3dpZHRoOjEwMCV9LmNrLmNrLWxpbmstZm9ybV9sYXlvdXQtdmVydGljYWwgLmNrLWJ1dHRvbntwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpO21hcmdpbjowO2JvcmRlci1yYWRpdXM6MDtib3JkZXI6MDtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcik7d2lkdGg6NTAlfVtkaXI9bHRyXSAuY2suY2stbGluay1mb3JtX2xheW91dC12ZXJ0aWNhbCAuY2stYnV0dG9ue21hcmdpbi1sZWZ0OjB9W2Rpcj1sdHJdIC5jay5jay1saW5rLWZvcm1fbGF5b3V0LXZlcnRpY2FsIC5jay1idXR0b246Zmlyc3Qtb2YtdHlwZXtib3JkZXItcmlnaHQ6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX1bZGlyPXJ0bF0gLmNrLmNrLWxpbmstZm9ybV9sYXlvdXQtdmVydGljYWwgLmNrLWJ1dHRvbnttYXJnaW4tbGVmdDowfVtkaXI9cnRsXSAuY2suY2stbGluay1mb3JtX2xheW91dC12ZXJ0aWNhbCAuY2stYnV0dG9uOmxhc3Qtb2YtdHlwZXtib3JkZXItcmlnaHQ6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX0uY2suY2stbGluay1mb3JtX2xheW91dC12ZXJ0aWNhbCAuY2suY2stbGlzdHttYXJnaW4tbGVmdDowfS5jay5jay1saW5rLWZvcm1fbGF5b3V0LXZlcnRpY2FsIC5jay5jay1saXN0IC5jay1idXR0b24uY2stc3dpdGNoYnV0dG9ue2JvcmRlcjowO3dpZHRoOjEwMCV9LmNrLmNrLWxpbmstZm9ybV9sYXlvdXQtdmVydGljYWwgLmNrLmNrLWxpc3QgLmNrLWJ1dHRvbi5jay1zd2l0Y2hidXR0b246aG92ZXJ7YmFja2dyb3VuZDpub25lfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDg1KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stbGluay1hY3Rpb25ze2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC13cmFwOm5vd3JhcH0uY2suY2stbGluay1hY3Rpb25zIC5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXd7ZGlzcGxheTppbmxpbmUtYmxvY2t9LmNrLmNrLWxpbmstYWN0aW9ucyAuY2stbGluay1hY3Rpb25zX19wcmV2aWV3IC5jay1idXR0b25fX2xhYmVse292ZXJmbG93OmhpZGRlbn1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjYwMHB4KXsuY2suY2stbGluay1hY3Rpb25ze2ZsZXgtd3JhcDp3cmFwfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWxpbmstYWN0aW9uc19fcHJldmlld3tmbGV4LWJhc2lzOjEwMCV9LmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uOm5vdCguY2stbGluay1hY3Rpb25zX19wcmV2aWV3KXtmbGV4LWJhc2lzOjUwJX19LmNrLmNrLWxpbmstYWN0aW9uc3twYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXd7cGFkZGluZy1sZWZ0OjA7cGFkZGluZy1yaWdodDowfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXcgLmNrLWJ1dHRvbl9fbGFiZWx7cGFkZGluZzowIHZhcigtLWNrLXNwYWNpbmctbWVkaXVtKTtjb2xvcjp2YXIoLS1jay1jb2xvci1saW5rLWRlZmF1bHQpO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7Y3Vyc29yOnBvaW50ZXI7bWF4LXdpZHRoOnZhcigtLWNrLWlucHV0LXRleHQtd2lkdGgpO21pbi13aWR0aDozZW07dGV4dC1hbGlnbjpjZW50ZXJ9LmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldyAuY2stYnV0dG9uX19sYWJlbDpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXcsLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldzphY3RpdmUsLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldzpmb2N1cywuY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b24uY2stbGluay1hY3Rpb25zX19wcmV2aWV3OmhvdmVye2JhY2tncm91bmQ6bm9uZX0uY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b24uY2stbGluay1hY3Rpb25zX19wcmV2aWV3OmFjdGl2ZXtib3gtc2hhZG93Om5vbmV9LmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldzpmb2N1cyAuY2stYnV0dG9uX19sYWJlbHt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5jay5jay1saW5rLWFjdGlvbnM6Zm9jdXN7b3V0bGluZTpub25lfVtkaXI9bHRyXSAuY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b246bm90KDpmaXJzdC1jaGlsZCksW2Rpcj1ydGxdIC5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbjpub3QoOmxhc3QtY2hpbGQpe21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NjAwcHgpey5jay5jay1saW5rLWFjdGlvbnN7cGFkZGluZzowO3dpZHRoOmNhbGMoMC44KnZhcigtLWNrLWlucHV0LXRleHQtd2lkdGgpKX0uY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b24uY2stbGluay1hY3Rpb25zX19wcmV2aWV3e21hcmdpbjp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKSB2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKSAwfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXcgLmNrLWJ1dHRvbl9fbGFiZWx7bWluLXdpZHRoOjA7bWF4LXdpZHRoOjEwMCV9LmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uOm5vdCguY2stbGluay1hY3Rpb25zX19wcmV2aWV3KXtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpO21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7Ym9yZGVyLXJhZGl1czowO2JvcmRlcjowO2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX1bZGlyPWx0cl0gLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uOm5vdCguY2stbGluay1hY3Rpb25zX19wcmV2aWV3KXttYXJnaW4tbGVmdDowfVtkaXI9bHRyXSAuY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b246bm90KC5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXcpOmZpcnN0LW9mLXR5cGV7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9W2Rpcj1ydGxdIC5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbjpub3QoLmNrLWxpbmstYWN0aW9uc19fcHJldmlldyl7bWFyZ2luLWxlZnQ6MH1bZGlyPXJ0bF0gLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uOm5vdCguY2stbGluay1hY3Rpb25zX19wcmV2aWV3KTpsYXN0LW9mLXR5cGV7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9fVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDg3KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stY2hhcmFjdGVyLWdyaWQgLmNrLWNoYXJhY3Rlci1ncmlkX190aWxlc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgxMCwxZnIpfTpyb290ey0tY2stY2hhcmFjdGVyLWdyaWQtdGlsZS1zaXplOjI0cHh9LmNrLmNrLWNoYXJhY3Rlci1ncmlke292ZXJmbG93LXk6YXV0bztvdmVyZmxvdy14OmhpZGRlbjt3aWR0aDozNTBweDttYXgtaGVpZ2h0OjIwMHB4fS5jay5jay1jaGFyYWN0ZXItZ3JpZCAuY2stY2hhcmFjdGVyLWdyaWRfX3RpbGVze21hcmdpbjp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKTtncmlkLWdhcDp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKX0uY2suY2stY2hhcmFjdGVyLWdyaWQgLmNrLWNoYXJhY3Rlci1ncmlkX190aWxle3dpZHRoOnZhcigtLWNrLWNoYXJhY3Rlci1ncmlkLXRpbGUtc2l6ZSk7aGVpZ2h0OnZhcigtLWNrLWNoYXJhY3Rlci1ncmlkLXRpbGUtc2l6ZSk7bWluLXdpZHRoOnZhcigtLWNrLWNoYXJhY3Rlci1ncmlkLXRpbGUtc2l6ZSk7bWluLWhlaWdodDp2YXIoLS1jay1jaGFyYWN0ZXItZ3JpZC10aWxlLXNpemUpO2ZvbnQtc2l6ZToxLjJlbTtwYWRkaW5nOjA7dHJhbnNpdGlvbjpib3gtc2hhZG93IC4ycyBlYXNlO2JvcmRlcjowfS5jay5jay1jaGFyYWN0ZXItZ3JpZCAuY2stY2hhcmFjdGVyLWdyaWRfX3RpbGU6Zm9jdXM6bm90KC5jay1kaXNhYmxlZCksLmNrLmNrLWNoYXJhY3Rlci1ncmlkIC5jay1jaGFyYWN0ZXItZ3JpZF9fdGlsZTpob3Zlcjpub3QoLmNrLWRpc2FibGVkKXtib3JkZXI6MDtib3gtc2hhZG93Omluc2V0IDAgMCAwIDFweCB2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpLDAgMCAwIDJweCB2YXIoLS1jay1jb2xvci1mb2N1cy1ib3JkZXIpfS5jay5jay1jaGFyYWN0ZXItZ3JpZCAuY2stY2hhcmFjdGVyLWdyaWRfX3RpbGUgLmNrLWJ1dHRvbl9fbGFiZWx7bGluZS1oZWlnaHQ6dmFyKC0tY2stY2hhcmFjdGVyLWdyaWQtdGlsZS1zaXplKTt3aWR0aDoxMDAlO3RleHQtYWxpZ246Y2VudGVyfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDg5KTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stY2hhcmFjdGVyLWluZm97ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1zbWFsbCkgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7Ym9yZGVyLXRvcDoxcHggc29saWQgdmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpfS5jay5jay1jaGFyYWN0ZXItaW5mbz4qe3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtmb250LXNpemU6dmFyKC0tY2stZm9udC1zaXplLXNtYWxsKX0uY2suY2stY2hhcmFjdGVyLWluZm8gLmNrLWNoYXJhY3Rlci1pbmZvX19uYW1le21heC13aWR0aDoyODBweDt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO292ZXJmbG93OmhpZGRlbn0uY2suY2stY2hhcmFjdGVyLWluZm8gLmNrLWNoYXJhY3Rlci1pbmZvX19jb2Rle29wYWNpdHk6LjZ9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoOTEpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1zcGVjaWFsLWNoYXJhY3RlcnMtbmF2aWdhdGlvbntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtd3JhcDpub3dyYXA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKTtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfVtkaXI9bHRyXSAuY2suY2stc3BlY2lhbC1jaGFyYWN0ZXJzLW5hdmlnYXRpb257cGFkZGluZy1sZWZ0OnZhcigtLWNrLXNwYWNpbmctbGFyZ2UpfVtkaXI9cnRsXSAuY2suY2stc3BlY2lhbC1jaGFyYWN0ZXJzLW5hdmlnYXRpb257cGFkZGluZy1yaWdodDp2YXIoLS1jay1zcGFjaW5nLWxhcmdlKX0uY2suY2stc3BlY2lhbC1jaGFyYWN0ZXJzLW5hdmlnYXRpb24+LmNrLWxhYmVse21heC13aWR0aDoxNjBweDt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO292ZXJmbG93OmhpZGRlbn0uY2suY2stc3BlY2lhbC1jaGFyYWN0ZXJzLW5hdmlnYXRpb24+LmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWx7bWF4LWhlaWdodDoyNTBweDtvdmVyZmxvdy15OmF1dG87b3ZlcmZsb3cteDpoaWRkZW59XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoOTMpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIjpyb290ey0tY2stY29sb3ItdGFibGUtZm9jdXNlZC1jZWxsLWJhY2tncm91bmQ6cmdiYSgxNTgsMjA3LDI1MCwwLjMpfS5jay13aWRnZXQudGFibGUgdGQuY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGUuY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGVfZm9jdXNlZCwuY2std2lkZ2V0LnRhYmxlIHRkLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlOmZvY3VzLC5jay13aWRnZXQudGFibGUgdGguY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGUuY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGVfZm9jdXNlZCwuY2std2lkZ2V0LnRhYmxlIHRoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlOmZvY3Vze2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItdGFibGUtZm9jdXNlZC1jZWxsLWJhY2tncm91bmQpO2JvcmRlci1zdHlsZTpub25lO291dGxpbmU6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWZvY3VzLWJvcmRlcik7b3V0bGluZS1vZmZzZXQ6LTFweH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg5NSk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrIC5jay1pbnNlcnQtdGFibGUtZHJvcGRvd25fX2dyaWR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LXdyYXA6d3JhcH06cm9vdHstLWNrLWluc2VydC10YWJsZS1kcm9wZG93bi1wYWRkaW5nOjEwcHg7LS1jay1pbnNlcnQtdGFibGUtZHJvcGRvd24tYm94LWhlaWdodDoxMXB4Oy0tY2staW5zZXJ0LXRhYmxlLWRyb3Bkb3duLWJveC13aWR0aDoxMnB4Oy0tY2staW5zZXJ0LXRhYmxlLWRyb3Bkb3duLWJveC1tYXJnaW46MXB4fS5jayAuY2staW5zZXJ0LXRhYmxlLWRyb3Bkb3duX19ncmlke3dpZHRoOmNhbGModmFyKC0tY2staW5zZXJ0LXRhYmxlLWRyb3Bkb3duLWJveC13aWR0aCkqMTAgKyB2YXIoLS1jay1pbnNlcnQtdGFibGUtZHJvcGRvd24tYm94LW1hcmdpbikqMjAgKyB2YXIoLS1jay1pbnNlcnQtdGFibGUtZHJvcGRvd24tcGFkZGluZykqMik7cGFkZGluZzp2YXIoLS1jay1pbnNlcnQtdGFibGUtZHJvcGRvd24tcGFkZGluZykgdmFyKC0tY2staW5zZXJ0LXRhYmxlLWRyb3Bkb3duLXBhZGRpbmcpIDB9LmNrIC5jay1pbnNlcnQtdGFibGUtZHJvcGRvd25fX2xhYmVse3RleHQtYWxpZ246Y2VudGVyfS5jayAuY2staW5zZXJ0LXRhYmxlLWRyb3Bkb3duLWdyaWQtYm94e3dpZHRoOnZhcigtLWNrLWluc2VydC10YWJsZS1kcm9wZG93bi1ib3gtd2lkdGgpO2hlaWdodDp2YXIoLS1jay1pbnNlcnQtdGFibGUtZHJvcGRvd24tYm94LWhlaWdodCk7bWFyZ2luOnZhcigtLWNrLWluc2VydC10YWJsZS1kcm9wZG93bi1ib3gtbWFyZ2luKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKTtib3JkZXItcmFkaXVzOjFweH0uY2sgLmNrLWluc2VydC10YWJsZS1kcm9wZG93bi1ncmlkLWJveC5jay1vbntib3JkZXItY29sb3I6dmFyKC0tY2stY29sb3ItZm9jdXMtYm9yZGVyKTtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWZvY3VzLW91dGVyLXNoYWRvdyl9XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoOTcpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIjpyb290ey0tY2stdGFibGUtc2VsZWN0ZWQtY2VsbC1iYWNrZ3JvdW5kOiNjZWU1ZmR9LmNrLmNrLWVkaXRvcl9fZWRpdGFibGUgLnRhYmxlIHRhYmxlIHRkLmNrLWVkaXRvcl9fZWRpdGFibGVfc2VsZWN0ZWQsLmNrLmNrLWVkaXRvcl9fZWRpdGFibGUgLnRhYmxlIHRhYmxlIHRoLmNrLWVkaXRvcl9fZWRpdGFibGVfc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jay10YWJsZS1zZWxlY3RlZC1jZWxsLWJhY2tncm91bmQpIWltcG9ydGFudDtjYXJldC1jb2xvcjp0cmFuc3BhcmVudDtvdXRsaW5lOnVuc2V0O2JveC1zaGFkb3c6dW5zZXR9LmNrLmNrLWVkaXRvcl9fZWRpdGFibGUgLnRhYmxlIHRhYmxlIHRkLmNrLWVkaXRvcl9fZWRpdGFibGVfc2VsZWN0ZWQgOjpzZWxlY3Rpb24sLmNrLmNrLWVkaXRvcl9fZWRpdGFibGUgLnRhYmxlIHRhYmxlIHRoLmNrLWVkaXRvcl9fZWRpdGFibGVfc2VsZWN0ZWQgOjpzZWxlY3Rpb257YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0uY2suY2stZWRpdG9yX19lZGl0YWJsZSAudGFibGUgdGFibGUgdGQuY2stZWRpdG9yX19lZGl0YWJsZV9zZWxlY3RlZCAuY2std2lkZ2V0X3NlbGVjdGVkLC5jay5jay1lZGl0b3JfX2VkaXRhYmxlIC50YWJsZSB0YWJsZSB0aC5jay1lZGl0b3JfX2VkaXRhYmxlX3NlbGVjdGVkIC5jay13aWRnZXRfc2VsZWN0ZWR7b3V0bGluZTp1bnNldH1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSg5OSk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLWNvbnRlbnQgLnRhYmxle21hcmdpbjoxZW0gYXV0bztkaXNwbGF5OnRhYmxlfS5jay1jb250ZW50IC50YWJsZSB0YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ym9yZGVyLXNwYWNpbmc6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjoxcHggZG91YmxlICNiM2IzYjN9LmNrLWNvbnRlbnQgLnRhYmxlIHRhYmxlIHRkLC5jay1jb250ZW50IC50YWJsZSB0YWJsZSB0aHttaW4td2lkdGg6MmVtO3BhZGRpbmc6LjRlbTtib3JkZXItY29sb3I6I2JmYmZiZn0uY2stY29udGVudCAudGFibGUgdGFibGUgdGh7Zm9udC13ZWlnaHQ6NzAwO2JhY2tncm91bmQ6aHNsYSgwLDAlLDAlLDUlKX1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSgxMDEpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIi5jay5jay1sYWJlbGVkLXZpZXcgLmNrLWxhYmVsZWQtdmlld19fc3RhdHVze2ZvbnQtc2l6ZTp2YXIoLS1jay1mb250LXNpemUtc21hbGwpO21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1zbWFsbCk7d2hpdGUtc3BhY2U6bm9ybWFsfS5jay5jay1sYWJlbGVkLXZpZXcgLmNrLWxhYmVsZWQtdmlld19fc3RhdHVzX2Vycm9ye2NvbG9yOnZhcigtLWNrLWNvbG9yLWJhc2UtZXJyb3IpfS5jay5jay1sYWJlbGVkLXZpZXc+LmNrLmNrLWxhYmVse3dpZHRoOjEwMCU7dGV4dC1vdmVyZmxvdzplbGxpcHNpcztvdmVyZmxvdzpoaWRkZW59XCJ9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoMTAzKTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2staW5wdXQtY29sb3J7d2lkdGg6MTAwJTtkaXNwbGF5OmZsZXh9LmNrLmNrLWlucHV0LWNvbG9yPmlucHV0LmNrLmNrLWlucHV0LXRleHR7bWluLXdpZHRoOmF1dG87ZmxleC1ncm93OjF9LmNrLmNrLWlucHV0LWNvbG9yPmlucHV0LmNrLmNrLWlucHV0LXRleHQ6YWN0aXZlLC5jay5jay1pbnB1dC1jb2xvcj5pbnB1dC5jay5jay1pbnB1dC10ZXh0OmZvY3Vze3otaW5kZXg6dmFyKC0tY2stei1kZWZhdWx0KX0uY2suY2staW5wdXQtY29sb3I+ZGl2LmNrLmNrLWRyb3Bkb3due21pbi13aWR0aDphdXRvfS5jay5jay1pbnB1dC1jb2xvcj5kaXYuY2suY2stZHJvcGRvd24+LmNrLWlucHV0LWNvbG9yX19idXR0b24gLmNrLWRyb3Bkb3duX19hcnJvd3tkaXNwbGF5Om5vbmV9LmNrLmNrLWlucHV0LWNvbG9yIC5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9uIC5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9uX19wcmV2aWV3e3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbn0uY2suY2staW5wdXQtY29sb3IgLmNrLmNrLWlucHV0LWNvbG9yX19idXR0b24gLmNrLmNrLWlucHV0LWNvbG9yX19idXR0b25fX3ByZXZpZXc+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b25fX3ByZXZpZXdfX25vLWNvbG9yLWluZGljYXRvcntwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrfVtkaXI9bHRyXSAuY2suY2staW5wdXQtY29sb3I+LmNrLmNrLWlucHV0LXRleHR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfVtkaXI9cnRsXSAuY2suY2staW5wdXQtY29sb3I+LmNrLmNrLWlucHV0LXRleHR7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MH0uY2suY2staW5wdXQtY29sb3I+LmNrLmNrLWRyb3Bkb3duPi5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9ue3BhZGRpbmc6MH1bZGlyPWx0cl0gLmNrLmNrLWlucHV0LWNvbG9yPi5jay5jay1kcm9wZG93bj4uY2suY2staW5wdXQtY29sb3JfX2J1dHRvbntib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowO21hcmdpbi1sZWZ0Oi0xcHh9W2Rpcj1ydGxdIC5jay5jay1pbnB1dC1jb2xvcj4uY2suY2stZHJvcGRvd24+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b257Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowO21hcmdpbi1yaWdodDotMXB4fS5jay5jay1pbnB1dC1jb2xvcj4uY2suY2stZHJvcGRvd24+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b24uY2stZGlzYWJsZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC1iYWNrZ3JvdW5kKX0uY2suY2staW5wdXQtY29sb3I+LmNrLmNrLWRyb3Bkb3duPi5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9uPi5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9uX19wcmV2aWV3e2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1pbnB1dC1jb2xvcj4uY2suY2stZHJvcGRvd24+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b24+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b25fX3ByZXZpZXcsLmNrLmNrLWlucHV0LWNvbG9yPi5jay5jay1kcm9wZG93bj4uY2suY2staW5wdXQtY29sb3JfX2J1dHRvbj4uY2suY2staW5wdXQtY29sb3JfX2J1dHRvbl9fcHJldmlldy5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX0uY2suY2staW5wdXQtY29sb3I+LmNrLmNrLWRyb3Bkb3duPi5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9uPi5jay5jay1pbnB1dC1jb2xvcl9fYnV0dG9uX19wcmV2aWV3e3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1pbnB1dC1ib3JkZXIpfS5jay5jay1pbnB1dC1jb2xvcj4uY2suY2stZHJvcGRvd24+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b24+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b25fX3ByZXZpZXc+LmNrLmNrLWlucHV0LWNvbG9yX19idXR0b25fX3ByZXZpZXdfX25vLWNvbG9yLWluZGljYXRvcnt0b3A6LTMwJTtsZWZ0OjUwJTtoZWlnaHQ6MTUwJTt3aWR0aDo4JTtiYWNrZ3JvdW5kOnJlZDtib3JkZXItcmFkaXVzOjJweDt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTt0cmFuc2Zvcm0tb3JpZ2luOjUwJX0uY2suY2staW5wdXQtY29sb3IgLmNrLmNrLWlucHV0LWNvbG9yX19yZW1vdmUtY29sb3J7d2lkdGg6MTAwJTtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1pbnB1dC1ib3JkZXIpO3BhZGRpbmc6Y2FsYyh2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKS8yKSB2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MH1bZGlyPWx0cl0gLmNrLmNrLWlucHV0LWNvbG9yIC5jay5jay1pbnB1dC1jb2xvcl9fcmVtb3ZlLWNvbG9ye2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjB9W2Rpcj1ydGxdIC5jay5jay1pbnB1dC1jb2xvciAuY2suY2staW5wdXQtY29sb3JfX3JlbW92ZS1jb2xvcntib3JkZXItdG9wLWxlZnQtcmFkaXVzOjB9LmNrLmNrLWlucHV0LWNvbG9yIC5jay5jay1pbnB1dC1jb2xvcl9fcmVtb3ZlLWNvbG9yIC5jay5jay1pY29ue21hcmdpbi1yaWdodDp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKX1bZGlyPXJ0bF0gLmNrLmNrLWlucHV0LWNvbG9yIC5jay5jay1pbnB1dC1jb2xvcl9fcmVtb3ZlLWNvbG9yIC5jay5jay1pY29ue21hcmdpbi1yaWdodDowO21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDEwNSk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLWZvcm1fX3Jvd3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtd3JhcDpub3dyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59LmNrLmNrLWZvcm1fX3Jvdz46bm90KC5jay1sYWJlbCl7ZmxleC1ncm93OjF9LmNrLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19hY3Rpb24tcm93IC5jay1idXR0b24tY2FuY2VsLC5jay5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fYWN0aW9uLXJvdyAuY2stYnV0dG9uLXNhdmV7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uY2suY2stZm9ybV9fcm93e3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCkgdmFyKC0tY2stc3BhY2luZy1sYXJnZSkgMH1bZGlyPWx0cl0gLmNrLmNrLWZvcm1fX3Jvdz46bm90KC5jay1sYWJlbCkrKnttYXJnaW4tbGVmdDp2YXIoLS1jay1zcGFjaW5nLWxhcmdlKX1bZGlyPXJ0bF0gLmNrLmNrLWZvcm1fX3Jvdz46bm90KC5jay1sYWJlbCkrKnttYXJnaW4tcmlnaHQ6dmFyKC0tY2stc3BhY2luZy1sYXJnZSl9LmNrLmNrLWZvcm1fX3Jvdz4uY2stbGFiZWx7d2lkdGg6MTAwJTttaW4td2lkdGg6MTAwJX0uY2suY2stZm9ybV9fcm93LmNrLXRhYmxlLWZvcm1fX2FjdGlvbi1yb3d7bWFyZ2luLXRvcDp2YXIoLS1jay1zcGFjaW5nLWxhcmdlKX0uY2suY2stZm9ybV9fcm93LmNrLXRhYmxlLWZvcm1fX2FjdGlvbi1yb3cgLmNrLWJ1dHRvbiAuY2stYnV0dG9uX19sYWJlbHtjb2xvcjp2YXIoLS1jay1jb2xvci10ZXh0KX1cIn0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMSk7dmFyIG89aSgxMDcpO289by5fX2VzTW9kdWxlP28uZGVmYXVsdDpvO2lmKHR5cGVvZiBvPT09XCJzdHJpbmdcIil7bz1bW3QuaSxvLFwiXCJdXX12YXIgcj17aW5qZWN0VHlwZTpcInNpbmdsZXRvblN0eWxlVGFnXCJ9O3IuaW5zZXJ0PVwiaGVhZFwiO3Iuc2luZ2xldG9uPXRydWU7dmFyIHM9bihvLHIpO3ZhciBhPW8ubG9jYWxzP28ubG9jYWxzOnt9O3QuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cIjpyb290ey0tY2stdGFibGUtZm9ybS1oZWFkZXItaGVpZ2h0OjM4cHh9LmNrLmNrLWZvcm1fX2hlYWRlcntwYWRkaW5nOjAgdmFyKC0tY2stc3BhY2luZy1sYXJnZSk7aGVpZ2h0OnZhcigtLWNrLXRhYmxlLWZvcm0taGVhZGVyLWhlaWdodCk7bGluZS1oZWlnaHQ6dmFyKC0tY2stdGFibGUtZm9ybS1oZWFkZXItaGVpZ2h0KTtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcil9LmNrLmNrLWZvcm1fX2hlYWRlciAuY2stZm9ybV9faGVhZGVyX19sYWJlbHtmb250LXdlaWdodDo3MDB9XCJ9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLWZvcm17cGFkZGluZzowIDAgdmFyKC0tY2stc3BhY2luZy1sYXJnZSl9LmNrLmNrLWZvcm06Zm9jdXN7b3V0bGluZTpub25lfS5jay5jay1mb3JtIC5jay5jay1pbnB1dC10ZXh0e21pbi13aWR0aDoxMDAlO3dpZHRoOjB9LmNrLmNrLWZvcm0gLmNrLmNrLWRyb3Bkb3due21pbi13aWR0aDoxMDAlfS5jay5jay1mb3JtIC5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX2J1dHRvbjpub3QoOmZvY3VzKXtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWJhc2UtYm9yZGVyKX0uY2suY2stZm9ybSAuY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7d2lkdGg6MTAwJX1cIn0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9Jy5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fYm9yZGVyLXJvd3tmbGV4LXdyYXA6d3JhcH0uY2suY2stdGFibGUtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLWZvcm1fX2JvcmRlci1yb3cgLmNrLWxhYmVsZWQtdmlld3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2V9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19ib3JkZXItcm93IC5jay1sYWJlbGVkLXZpZXcgLmNrLmNrLWRyb3Bkb3duLC5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fYm9yZGVyLXJvdyAuY2stdGFibGUtZm9ybV9fYm9yZGVyLXN0eWxlLC5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fYm9yZGVyLXJvdyAuY2stdGFibGUtZm9ybV9fYm9yZGVyLXdpZHRoe2ZsZXgtZ3JvdzowfS5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3d7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyfS5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3cgLmNrLWxhYmVsZWQtdmlld3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uLXJldmVyc2U7YWxpZ24taXRlbXM6Y2VudGVyfS5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3cgLmNrLWxhYmVsZWQtdmlldyAuY2suY2stZHJvcGRvd24sLmNrLmNrLXRhYmxlLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19kaW1lbnNpb25zLXJvdyAuY2stdGFibGUtZm9ybV9fZGltZW5zaW9uLW9wZXJhdG9ye2ZsZXgtZ3JvdzowfS5jay5jay10YWJsZS1mb3JtIC5jay5jay1sYWJlbGVkLXZpZXd7cG9zaXRpb246cmVsYXRpdmV9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLmNrLWxhYmVsZWQtdmlldyAuY2suY2stbGFiZWxlZC12aWV3X19zdGF0dXN7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo1MCU7Ym90dG9tOmNhbGMoLTEqdmFyKC0tY2stdGFibGUtcHJvcGVydGllcy1lcnJvci1hcnJvdy1zaXplKSk7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLDEwMCUpO3otaW5kZXg6MX0uY2suY2stdGFibGUtZm9ybSAuY2suY2stbGFiZWxlZC12aWV3IC5jay5jay1sYWJlbGVkLXZpZXdfX3N0YXR1czphZnRlcntjb250ZW50OlwiXCI7cG9zaXRpb246YWJzb2x1dGU7dG9wOmNhbGMoLTEqdmFyKC0tY2stdGFibGUtcHJvcGVydGllcy1lcnJvci1hcnJvdy1zaXplKSk7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSl9OnJvb3R7LS1jay10YWJsZS1wcm9wZXJ0aWVzLWVycm9yLWFycm93LXNpemU6NnB4Oy0tY2stdGFibGUtcHJvcGVydGllcy1taW4tZXJyb3Itd2lkdGg6MTUwcHh9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19ib3JkZXItcm93IC5jay1sYWJlbGVkLXZpZXc+LmNrLWxhYmVse2ZvbnQtc2l6ZTp2YXIoLS1jay1mb250LXNpemUtdGlueSk7dGV4dC1hbGlnbjpjZW50ZXJ9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19ib3JkZXItcm93IC5jay10YWJsZS1mb3JtX19ib3JkZXItc3R5bGV7d2lkdGg6ODBweDttaW4td2lkdGg6ODBweH0uY2suY2stdGFibGUtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLWZvcm1fX2JvcmRlci1yb3cgLmNrLXRhYmxlLWZvcm1fX2JvcmRlci13aWR0aHt3aWR0aDo1MHB4O21pbi13aWR0aDo1MHB4fS5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3d7cGFkZGluZzowfS5jay5jay10YWJsZS1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3cgLmNrLWxhYmVsZWQtdmlldz4uY2stbGFiZWx7Zm9udC1zaXplOjEwcHg7dGV4dC1hbGlnbjpjZW50ZXJ9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19kaW1lbnNpb25zLXJvdyAuY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3dfX2hlaWdodCwuY2suY2stdGFibGUtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLWZvcm1fX2RpbWVuc2lvbnMtcm93IC5jay10YWJsZS1mb3JtX19kaW1lbnNpb25zLXJvd19fd2lkdGh7bWFyZ2luOjB9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1mb3JtX19kaW1lbnNpb25zLXJvdyAuY2stdGFibGUtZm9ybV9fZGltZW5zaW9uLW9wZXJhdG9ye2FsaWduLXNlbGY6c3RhcnQ7ZGlzcGxheTppbmxpbmUtYmxvY2s7aGVpZ2h0OnZhcigtLWNrLXVpLWNvbXBvbmVudC1taW4taGVpZ2h0KTtsaW5lLWhlaWdodDp2YXIoLS1jay11aS1jb21wb25lbnQtbWluLWhlaWdodCk7bWFyZ2luOjAgdmFyKC0tY2stc3BhY2luZy1zbWFsbCl9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLmNrLWxhYmVsZWQtdmlldyAuY2suY2stbGFiZWxlZC12aWV3X19zdGF0dXN7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLXRhYmxlLWZvcm0gLmNrLmNrLWxhYmVsZWQtdmlldyAuY2suY2stbGFiZWxlZC12aWV3X19zdGF0dXMsLmNrLmNrLXRhYmxlLWZvcm0gLmNrLmNrLWxhYmVsZWQtdmlldyAuY2suY2stbGFiZWxlZC12aWV3X19zdGF0dXMuY2stcm91bmRlZC1jb3JuZXJze2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyl9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLmNrLWxhYmVsZWQtdmlldyAuY2suY2stbGFiZWxlZC12aWV3X19zdGF0dXN7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWVycm9yKTtjb2xvcjp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpO3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1zbWFsbCkgdmFyKC0tY2stc3BhY2luZy1tZWRpdW0pO21pbi13aWR0aDp2YXIoLS1jay10YWJsZS1wcm9wZXJ0aWVzLW1pbi1lcnJvci13aWR0aCk7dGV4dC1hbGlnbjpjZW50ZXJ9LmNrLmNrLXRhYmxlLWZvcm0gLmNrLmNrLWxhYmVsZWQtdmlldyAuY2suY2stbGFiZWxlZC12aWV3X19zdGF0dXM6YWZ0ZXJ7Ym9yZGVyLWxlZnQ6dmFyKC0tY2stdGFibGUtcHJvcGVydGllcy1lcnJvci1hcnJvdy1zaXplKSBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOnZhcigtLWNrLXRhYmxlLXByb3BlcnRpZXMtZXJyb3ItYXJyb3ctc2l6ZSkgc29saWQgdmFyKC0tY2stY29sb3ItYmFzZS1lcnJvcik7Ym9yZGVyLXJpZ2h0OnZhcigtLWNrLXRhYmxlLXByb3BlcnRpZXMtZXJyb3ItYXJyb3ctc2l6ZSkgc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXRvcDowIHNvbGlkIHRyYW5zcGFyZW50fS5jay5jay10YWJsZS1mb3JtIC5jay5jay1sYWJlbGVkLXZpZXcgLmNrLmNrLWxhYmVsZWQtdmlld19fc3RhdHVze2FuaW1hdGlvbjpjay10YWJsZS1mb3JtLWxhYmVsZWQtdmlldy1zdGF0dXMtYXBwZWFyIC4xNXMgZWFzZSBib3RofS5jay5jay10YWJsZS1mb3JtIC5jay5jay1sYWJlbGVkLXZpZXcgLmNrLWlucHV0LmNrLWVycm9yOm5vdCg6Zm9jdXMpKy5jay5jay1sYWJlbGVkLXZpZXdfX3N0YXR1c3tkaXNwbGF5Om5vbmV9QGtleWZyYW1lcyBjay10YWJsZS1mb3JtLWxhYmVsZWQtdmlldy1zdGF0dXMtYXBwZWFyezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fSd9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pKDEpO3ZhciBvPWkoMTExKTtvPW8uX19lc01vZHVsZT9vLmRlZmF1bHQ6bztpZih0eXBlb2Ygbz09PVwic3RyaW5nXCIpe289W1t0LmksbyxcIlwiXV19dmFyIHI9e2luamVjdFR5cGU6XCJzaW5nbGV0b25TdHlsZVRhZ1wifTtyLmluc2VydD1cImhlYWRcIjtyLnNpbmdsZXRvbj10cnVlO3ZhciBzPW4obyxyKTt2YXIgYT1vLmxvY2Fscz9vLmxvY2Fsczp7fTt0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCIuY2suY2stdGFibGUtY2VsbC1wcm9wZXJ0aWVzLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1jZWxsLXByb3BlcnRpZXMtZm9ybV9fYWxpZ25tZW50LXJvd3tmbGV4LXdyYXA6d3JhcH0uY2suY2stdGFibGUtY2VsbC1wcm9wZXJ0aWVzLWZvcm0gLmNrLWZvcm1fX3Jvdy5jay10YWJsZS1jZWxsLXByb3BlcnRpZXMtZm9ybV9fYWxpZ25tZW50LXJvdyAuY2suY2stdG9vbGJhcntmbGV4LWdyb3c6MH0uY2suY2stdGFibGUtY2VsbC1wcm9wZXJ0aWVzLWZvcm17d2lkdGg6MzIwcHh9LmNrLmNrLXRhYmxlLWNlbGwtcHJvcGVydGllcy1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtY2VsbC1wcm9wZXJ0aWVzLWZvcm1fX3BhZGRpbmctcm93e3BhZGRpbmc6MDt3aWR0aDozNSV9LmNrLmNrLXRhYmxlLWNlbGwtcHJvcGVydGllcy1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtY2VsbC1wcm9wZXJ0aWVzLWZvcm1fX2FsaWdubWVudC1yb3cgLmNrLmNrLXRvb2xiYXJ7YmFja2dyb3VuZDpub25lfVwifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49aSgxKTt2YXIgbz1pKDExMyk7bz1vLl9fZXNNb2R1bGU/by5kZWZhdWx0Om87aWYodHlwZW9mIG89PT1cInN0cmluZ1wiKXtvPVtbdC5pLG8sXCJcIl1dfXZhciByPXtpbmplY3RUeXBlOlwic2luZ2xldG9uU3R5bGVUYWdcIn07ci5pbnNlcnQ9XCJoZWFkXCI7ci5zaW5nbGV0b249dHJ1ZTt2YXIgcz1uKG8scik7dmFyIGE9by5sb2NhbHM/by5sb2NhbHM6e307dC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiLmNrLmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybV9fYWxpZ25tZW50LXJvd3tmbGV4LXdyYXA6d3JhcDtmbGV4LWJhc2lzOjA7YWxpZ24tY29udGVudDpiYXNlbGluZX0uY2suY2stdGFibGUtcHJvcGVydGllcy1mb3JtIC5jay1mb3JtX19yb3cuY2stdGFibGUtcHJvcGVydGllcy1mb3JtX19hbGlnbm1lbnQtcm93IC5jay5jay10b29sYmFyIC5jay10b29sYmFyX19pdGVtc3tmbGV4LXdyYXA6bm93cmFwfS5jay5jay10YWJsZS1wcm9wZXJ0aWVzLWZvcm17d2lkdGg6MzIwcHh9LmNrLmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybV9fYWxpZ25tZW50LXJvd3twYWRkaW5nOjB9LmNrLmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybV9fYWxpZ25tZW50LXJvdyAuY2suY2stdG9vbGJhcntiYWNrZ3JvdW5kOm5vbmV9LmNrLmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybSAuY2stZm9ybV9fcm93LmNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybV9fYWxpZ25tZW50LXJvdyAuY2suY2stdG9vbGJhciAuY2stdG9vbGJhcl9faXRlbXM+Knt3aWR0aDo0MHB4fVwifSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO2kuZChlLFwiZGVmYXVsdFwiLChmdW5jdGlvbigpe3JldHVybiBfSX0pKTt2YXIgbj1pKDMpO3ZhciBvPW5bXCJhXCJdLlN5bWJvbDt2YXIgcj1vO3ZhciBzPU9iamVjdC5wcm90b3R5cGU7dmFyIGE9cy5oYXNPd25Qcm9wZXJ0eTt2YXIgYz1zLnRvU3RyaW5nO3ZhciBsPXI/ci50b1N0cmluZ1RhZzp1bmRlZmluZWQ7ZnVuY3Rpb24gZCh0KXt2YXIgZT1hLmNhbGwodCxsKSxpPXRbbF07dHJ5e3RbbF09dW5kZWZpbmVkO3ZhciBuPXRydWV9Y2F0Y2godCl7fXZhciBvPWMuY2FsbCh0KTtpZihuKXtpZihlKXt0W2xdPWl9ZWxzZXtkZWxldGUgdFtsXX19cmV0dXJuIG99dmFyIHU9ZDt2YXIgaD1PYmplY3QucHJvdG90eXBlO3ZhciBmPWgudG9TdHJpbmc7ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZi5jYWxsKHQpfXZhciBtPWc7dmFyIHA9XCJbb2JqZWN0IE51bGxdXCIsYj1cIltvYmplY3QgVW5kZWZpbmVkXVwiO3ZhciB3PXI/ci50b1N0cmluZ1RhZzp1bmRlZmluZWQ7ZnVuY3Rpb24gayh0KXtpZih0PT1udWxsKXtyZXR1cm4gdD09PXVuZGVmaW5lZD9iOnB9cmV0dXJuIHcmJncgaW4gT2JqZWN0KHQpP3UodCk6bSh0KX12YXIgXz1rO2Z1bmN0aW9uIHYodCxlKXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIHQoZShpKSl9fXZhciB5PXY7dmFyIHg9eShPYmplY3QuZ2V0UHJvdG90eXBlT2YsT2JqZWN0KTt2YXIgQz14O2Z1bmN0aW9uIEEodCl7cmV0dXJuIHQhPW51bGwmJnR5cGVvZiB0PT1cIm9iamVjdFwifXZhciBUPUE7dmFyIFA9XCJbb2JqZWN0IE9iamVjdF1cIjt2YXIgUz1GdW5jdGlvbi5wcm90b3R5cGUsRT1PYmplY3QucHJvdG90eXBlO3ZhciBSPVMudG9TdHJpbmc7dmFyIE89RS5oYXNPd25Qcm9wZXJ0eTt2YXIgST1SLmNhbGwoT2JqZWN0KTtmdW5jdGlvbiBWKHQpe2lmKCFUKHQpfHxfKHQpIT1QKXtyZXR1cm4gZmFsc2V9dmFyIGU9Qyh0KTtpZihlPT09bnVsbCl7cmV0dXJuIHRydWV9dmFyIGk9Ty5jYWxsKGUsXCJjb25zdHJ1Y3RvclwiKSYmZS5jb25zdHJ1Y3RvcjtyZXR1cm4gdHlwZW9mIGk9PVwiZnVuY3Rpb25cIiYmaSBpbnN0YW5jZW9mIGkmJlIuY2FsbChpKT09SX12YXIgTj1WO2Z1bmN0aW9uIE0oKXt0aGlzLl9fZGF0YV9fPVtdO3RoaXMuc2l6ZT0wfXZhciBCPU07ZnVuY3Rpb24geih0LGUpe3JldHVybiB0PT09ZXx8dCE9PXQmJmUhPT1lfXZhciBMPXo7ZnVuY3Rpb24gRih0LGUpe3ZhciBpPXQubGVuZ3RoO3doaWxlKGktLSl7aWYoTCh0W2ldWzBdLGUpKXtyZXR1cm4gaX19cmV0dXJuLTF9dmFyIEQ9Rjt2YXIgaj1BcnJheS5wcm90b3R5cGU7dmFyIEg9ai5zcGxpY2U7ZnVuY3Rpb24gVyh0KXt2YXIgZT10aGlzLl9fZGF0YV9fLGk9RChlLHQpO2lmKGk8MCl7cmV0dXJuIGZhbHNlfXZhciBuPWUubGVuZ3RoLTE7aWYoaT09bil7ZS5wb3AoKX1lbHNle0guY2FsbChlLGksMSl9LS10aGlzLnNpemU7cmV0dXJuIHRydWV9dmFyIHE9VztmdW5jdGlvbiBVKHQpe3ZhciBlPXRoaXMuX19kYXRhX18saT1EKGUsdCk7cmV0dXJuIGk8MD91bmRlZmluZWQ6ZVtpXVsxXX12YXIgJD1VO2Z1bmN0aW9uIEcodCl7cmV0dXJuIEQodGhpcy5fX2RhdGFfXyx0KT4tMX12YXIgSz1HO2Z1bmN0aW9uIEoodCxlKXt2YXIgaT10aGlzLl9fZGF0YV9fLG49RChpLHQpO2lmKG48MCl7Kyt0aGlzLnNpemU7aS5wdXNoKFt0LGVdKX1lbHNle2lbbl1bMV09ZX1yZXR1cm4gdGhpc312YXIgWT1KO2Z1bmN0aW9uIFEodCl7dmFyIGU9LTEsaT10PT1udWxsPzA6dC5sZW5ndGg7dGhpcy5jbGVhcigpO3doaWxlKCsrZTxpKXt2YXIgbj10W2VdO3RoaXMuc2V0KG5bMF0sblsxXSl9fVEucHJvdG90eXBlLmNsZWFyPUI7US5wcm90b3R5cGVbXCJkZWxldGVcIl09cTtRLnByb3RvdHlwZS5nZXQ9JDtRLnByb3RvdHlwZS5oYXM9SztRLnByb3RvdHlwZS5zZXQ9WTt2YXIgWD1RO2Z1bmN0aW9uIFooKXt0aGlzLl9fZGF0YV9fPW5ldyBYO3RoaXMuc2l6ZT0wfXZhciB0dD1aO2Z1bmN0aW9uIGV0KHQpe3ZhciBlPXRoaXMuX19kYXRhX18saT1lW1wiZGVsZXRlXCJdKHQpO3RoaXMuc2l6ZT1lLnNpemU7cmV0dXJuIGl9dmFyIGl0PWV0O2Z1bmN0aW9uIG50KHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmdldCh0KX12YXIgb3Q9bnQ7ZnVuY3Rpb24gcnQodCl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHQpfXZhciBzdD1ydDtmdW5jdGlvbiBhdCh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gdCE9bnVsbCYmKGU9PVwib2JqZWN0XCJ8fGU9PVwiZnVuY3Rpb25cIil9dmFyIGN0PWF0O3ZhciBsdD1cIltvYmplY3QgQXN5bmNGdW5jdGlvbl1cIixkdD1cIltvYmplY3QgRnVuY3Rpb25dXCIsdXQ9XCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXVwiLGh0PVwiW29iamVjdCBQcm94eV1cIjtmdW5jdGlvbiBmdCh0KXtpZighY3QodCkpe3JldHVybiBmYWxzZX12YXIgZT1fKHQpO3JldHVybiBlPT1kdHx8ZT09dXR8fGU9PWx0fHxlPT1odH12YXIgZ3Q9ZnQ7dmFyIG10PW5bXCJhXCJdW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdO3ZhciBwdD1tdDt2YXIgYnQ9ZnVuY3Rpb24oKXt2YXIgdD0vW14uXSskLy5leGVjKHB0JiZwdC5rZXlzJiZwdC5rZXlzLklFX1BST1RPfHxcIlwiKTtyZXR1cm4gdD9cIlN5bWJvbChzcmMpXzEuXCIrdDpcIlwifSgpO2Z1bmN0aW9uIHd0KHQpe3JldHVybiEhYnQmJmJ0IGluIHR9dmFyIGt0PXd0O3ZhciBfdD1GdW5jdGlvbi5wcm90b3R5cGU7dmFyIHZ0PV90LnRvU3RyaW5nO2Z1bmN0aW9uIHl0KHQpe2lmKHQhPW51bGwpe3RyeXtyZXR1cm4gdnQuY2FsbCh0KX1jYXRjaCh0KXt9dHJ5e3JldHVybiB0K1wiXCJ9Y2F0Y2godCl7fX1yZXR1cm5cIlwifXZhciB4dD15dDt2YXIgQ3Q9L1tcXFxcXiQuKis/KClbXFxde318XS9nO3ZhciBBdD0vXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO3ZhciBUdD1GdW5jdGlvbi5wcm90b3R5cGUsUHQ9T2JqZWN0LnByb3RvdHlwZTt2YXIgU3Q9VHQudG9TdHJpbmc7dmFyIEV0PVB0Lmhhc093blByb3BlcnR5O3ZhciBSdD1SZWdFeHAoXCJeXCIrU3QuY2FsbChFdCkucmVwbGFjZShDdCxcIlxcXFwkJlwiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikrXCIkXCIpO2Z1bmN0aW9uIE90KHQpe2lmKCFjdCh0KXx8a3QodCkpe3JldHVybiBmYWxzZX12YXIgZT1ndCh0KT9SdDpBdDtyZXR1cm4gZS50ZXN0KHh0KHQpKX12YXIgSXQ9T3Q7ZnVuY3Rpb24gVnQodCxlKXtyZXR1cm4gdD09bnVsbD91bmRlZmluZWQ6dFtlXX12YXIgTnQ9VnQ7ZnVuY3Rpb24gTXQodCxlKXt2YXIgaT1OdCh0LGUpO3JldHVybiBJdChpKT9pOnVuZGVmaW5lZH12YXIgQnQ9TXQ7dmFyIHp0PUJ0KG5bXCJhXCJdLFwiTWFwXCIpO3ZhciBMdD16dDt2YXIgRnQ9QnQoT2JqZWN0LFwiY3JlYXRlXCIpO3ZhciBEdD1GdDtmdW5jdGlvbiBqdCgpe3RoaXMuX19kYXRhX189RHQ/RHQobnVsbCk6e307dGhpcy5zaXplPTB9dmFyIEh0PWp0O2Z1bmN0aW9uIFd0KHQpe3ZhciBlPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTt0aGlzLnNpemUtPWU/MTowO3JldHVybiBlfXZhciBxdD1XdDt2YXIgVXQ9XCJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fXCI7dmFyICR0PU9iamVjdC5wcm90b3R5cGU7dmFyIEd0PSR0Lmhhc093blByb3BlcnR5O2Z1bmN0aW9uIEt0KHQpe3ZhciBlPXRoaXMuX19kYXRhX187aWYoRHQpe3ZhciBpPWVbdF07cmV0dXJuIGk9PT1VdD91bmRlZmluZWQ6aX1yZXR1cm4gR3QuY2FsbChlLHQpP2VbdF06dW5kZWZpbmVkfXZhciBKdD1LdDt2YXIgWXQ9T2JqZWN0LnByb3RvdHlwZTt2YXIgUXQ9WXQuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gWHQodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gRHQ/ZVt0XSE9PXVuZGVmaW5lZDpRdC5jYWxsKGUsdCl9dmFyIFp0PVh0O3ZhciB0ZT1cIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX19cIjtmdW5jdGlvbiBlZSh0LGUpe3ZhciBpPXRoaXMuX19kYXRhX187dGhpcy5zaXplKz10aGlzLmhhcyh0KT8wOjE7aVt0XT1EdCYmZT09PXVuZGVmaW5lZD90ZTplO3JldHVybiB0aGlzfXZhciBpZT1lZTtmdW5jdGlvbiBuZSh0KXt2YXIgZT0tMSxpPXQ9PW51bGw/MDp0Lmxlbmd0aDt0aGlzLmNsZWFyKCk7d2hpbGUoKytlPGkpe3ZhciBuPXRbZV07dGhpcy5zZXQoblswXSxuWzFdKX19bmUucHJvdG90eXBlLmNsZWFyPUh0O25lLnByb3RvdHlwZVtcImRlbGV0ZVwiXT1xdDtuZS5wcm90b3R5cGUuZ2V0PUp0O25lLnByb3RvdHlwZS5oYXM9WnQ7bmUucHJvdG90eXBlLnNldD1pZTt2YXIgb2U9bmU7ZnVuY3Rpb24gcmUoKXt0aGlzLnNpemU9MDt0aGlzLl9fZGF0YV9fPXtoYXNoOm5ldyBvZSxtYXA6bmV3KEx0fHxYKSxzdHJpbmc6bmV3IG9lfX12YXIgc2U9cmU7ZnVuY3Rpb24gYWUodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIGU9PVwic3RyaW5nXCJ8fGU9PVwibnVtYmVyXCJ8fGU9PVwic3ltYm9sXCJ8fGU9PVwiYm9vbGVhblwiP3QhPT1cIl9fcHJvdG9fX1wiOnQ9PT1udWxsfXZhciBjZT1hZTtmdW5jdGlvbiBsZSh0LGUpe3ZhciBpPXQuX19kYXRhX187cmV0dXJuIGNlKGUpP2lbdHlwZW9mIGU9PVwic3RyaW5nXCI/XCJzdHJpbmdcIjpcImhhc2hcIl06aS5tYXB9dmFyIGRlPWxlO2Z1bmN0aW9uIHVlKHQpe3ZhciBlPWRlKHRoaXMsdClbXCJkZWxldGVcIl0odCk7dGhpcy5zaXplLT1lPzE6MDtyZXR1cm4gZX12YXIgaGU9dWU7ZnVuY3Rpb24gZmUodCl7cmV0dXJuIGRlKHRoaXMsdCkuZ2V0KHQpfXZhciBnZT1mZTtmdW5jdGlvbiBtZSh0KXtyZXR1cm4gZGUodGhpcyx0KS5oYXModCl9dmFyIHBlPW1lO2Z1bmN0aW9uIGJlKHQsZSl7dmFyIGk9ZGUodGhpcyx0KSxuPWkuc2l6ZTtpLnNldCh0LGUpO3RoaXMuc2l6ZSs9aS5zaXplPT1uPzA6MTtyZXR1cm4gdGhpc312YXIgd2U9YmU7ZnVuY3Rpb24ga2UodCl7dmFyIGU9LTEsaT10PT1udWxsPzA6dC5sZW5ndGg7dGhpcy5jbGVhcigpO3doaWxlKCsrZTxpKXt2YXIgbj10W2VdO3RoaXMuc2V0KG5bMF0sblsxXSl9fWtlLnByb3RvdHlwZS5jbGVhcj1zZTtrZS5wcm90b3R5cGVbXCJkZWxldGVcIl09aGU7a2UucHJvdG90eXBlLmdldD1nZTtrZS5wcm90b3R5cGUuaGFzPXBlO2tlLnByb3RvdHlwZS5zZXQ9d2U7dmFyIF9lPWtlO3ZhciB2ZT0yMDA7ZnVuY3Rpb24geWUodCxlKXt2YXIgaT10aGlzLl9fZGF0YV9fO2lmKGkgaW5zdGFuY2VvZiBYKXt2YXIgbj1pLl9fZGF0YV9fO2lmKCFMdHx8bi5sZW5ndGg8dmUtMSl7bi5wdXNoKFt0LGVdKTt0aGlzLnNpemU9KytpLnNpemU7cmV0dXJuIHRoaXN9aT10aGlzLl9fZGF0YV9fPW5ldyBfZShuKX1pLnNldCh0LGUpO3RoaXMuc2l6ZT1pLnNpemU7cmV0dXJuIHRoaXN9dmFyIHhlPXllO2Z1bmN0aW9uIENlKHQpe3ZhciBlPXRoaXMuX19kYXRhX189bmV3IFgodCk7dGhpcy5zaXplPWUuc2l6ZX1DZS5wcm90b3R5cGUuY2xlYXI9dHQ7Q2UucHJvdG90eXBlW1wiZGVsZXRlXCJdPWl0O0NlLnByb3RvdHlwZS5nZXQ9b3Q7Q2UucHJvdG90eXBlLmhhcz1zdDtDZS5wcm90b3R5cGUuc2V0PXhlO3ZhciBBZT1DZTtmdW5jdGlvbiBUZSh0LGUpe3ZhciBpPS0xLG49dD09bnVsbD8wOnQubGVuZ3RoO3doaWxlKCsraTxuKXtpZihlKHRbaV0saSx0KT09PWZhbHNlKXticmVha319cmV0dXJuIHR9dmFyIFBlPVRlO3ZhciBTZT1mdW5jdGlvbigpe3RyeXt2YXIgdD1CdChPYmplY3QsXCJkZWZpbmVQcm9wZXJ0eVwiKTt0KHt9LFwiXCIse30pO3JldHVybiB0fWNhdGNoKHQpe319KCk7dmFyIEVlPVNlO2Z1bmN0aW9uIFJlKHQsZSxpKXtpZihlPT1cIl9fcHJvdG9fX1wiJiZFZSl7RWUodCxlLHtjb25maWd1cmFibGU6dHJ1ZSxlbnVtZXJhYmxlOnRydWUsdmFsdWU6aSx3cml0YWJsZTp0cnVlfSl9ZWxzZXt0W2VdPWl9fXZhciBPZT1SZTt2YXIgSWU9T2JqZWN0LnByb3RvdHlwZTt2YXIgVmU9SWUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gTmUodCxlLGkpe3ZhciBuPXRbZV07aWYoIShWZS5jYWxsKHQsZSkmJkwobixpKSl8fGk9PT11bmRlZmluZWQmJiEoZSBpbiB0KSl7T2UodCxlLGkpfX12YXIgTWU9TmU7ZnVuY3Rpb24gQmUodCxlLGksbil7dmFyIG89IWk7aXx8KGk9e30pO3ZhciByPS0xLHM9ZS5sZW5ndGg7d2hpbGUoKytyPHMpe3ZhciBhPWVbcl07dmFyIGM9bj9uKGlbYV0sdFthXSxhLGksdCk6dW5kZWZpbmVkO2lmKGM9PT11bmRlZmluZWQpe2M9dFthXX1pZihvKXtPZShpLGEsYyl9ZWxzZXtNZShpLGEsYyl9fXJldHVybiBpfXZhciB6ZT1CZTtmdW5jdGlvbiBMZSh0LGUpe3ZhciBpPS0xLG49QXJyYXkodCk7d2hpbGUoKytpPHQpe25baV09ZShpKX1yZXR1cm4gbn12YXIgRmU9TGU7dmFyIERlPVwiW29iamVjdCBBcmd1bWVudHNdXCI7ZnVuY3Rpb24gamUodCl7cmV0dXJuIFQodCkmJl8odCk9PURlfXZhciBIZT1qZTt2YXIgV2U9T2JqZWN0LnByb3RvdHlwZTt2YXIgcWU9V2UuaGFzT3duUHJvcGVydHk7dmFyIFVlPVdlLnByb3BlcnR5SXNFbnVtZXJhYmxlO3ZhciAkZT1IZShmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpP0hlOmZ1bmN0aW9uKHQpe3JldHVybiBUKHQpJiZxZS5jYWxsKHQsXCJjYWxsZWVcIikmJiFVZS5jYWxsKHQsXCJjYWxsZWVcIil9O3ZhciBHZT0kZTt2YXIgS2U9QXJyYXkuaXNBcnJheTt2YXIgSmU9S2U7dmFyIFllPWkoNCk7dmFyIFFlPTkwMDcxOTkyNTQ3NDA5OTE7dmFyIFhlPS9eKD86MHxbMS05XVxcZCopJC87ZnVuY3Rpb24gWmUodCxlKXt2YXIgaT10eXBlb2YgdDtlPWU9PW51bGw/UWU6ZTtyZXR1cm4hIWUmJihpPT1cIm51bWJlclwifHxpIT1cInN5bWJvbFwiJiZYZS50ZXN0KHQpKSYmKHQ+LTEmJnQlMT09MCYmdDxlKX12YXIgdGk9WmU7dmFyIGVpPTkwMDcxOTkyNTQ3NDA5OTE7ZnVuY3Rpb24gaWkodCl7cmV0dXJuIHR5cGVvZiB0PT1cIm51bWJlclwiJiZ0Pi0xJiZ0JTE9PTAmJnQ8PWVpfXZhciBuaT1paTt2YXIgb2k9XCJbb2JqZWN0IEFyZ3VtZW50c11cIixyaT1cIltvYmplY3QgQXJyYXldXCIsc2k9XCJbb2JqZWN0IEJvb2xlYW5dXCIsYWk9XCJbb2JqZWN0IERhdGVdXCIsY2k9XCJbb2JqZWN0IEVycm9yXVwiLGxpPVwiW29iamVjdCBGdW5jdGlvbl1cIixkaT1cIltvYmplY3QgTWFwXVwiLHVpPVwiW29iamVjdCBOdW1iZXJdXCIsaGk9XCJbb2JqZWN0IE9iamVjdF1cIixmaT1cIltvYmplY3QgUmVnRXhwXVwiLGdpPVwiW29iamVjdCBTZXRdXCIsbWk9XCJbb2JqZWN0IFN0cmluZ11cIixwaT1cIltvYmplY3QgV2Vha01hcF1cIjt2YXIgYmk9XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiLHdpPVwiW29iamVjdCBEYXRhVmlld11cIixraT1cIltvYmplY3QgRmxvYXQzMkFycmF5XVwiLF9pPVwiW29iamVjdCBGbG9hdDY0QXJyYXldXCIsdmk9XCJbb2JqZWN0IEludDhBcnJheV1cIix5aT1cIltvYmplY3QgSW50MTZBcnJheV1cIix4aT1cIltvYmplY3QgSW50MzJBcnJheV1cIixDaT1cIltvYmplY3QgVWludDhBcnJheV1cIixBaT1cIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldXCIsVGk9XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLFBpPVwiW29iamVjdCBVaW50MzJBcnJheV1cIjt2YXIgU2k9e307U2lba2ldPVNpW19pXT1TaVt2aV09U2lbeWldPVNpW3hpXT1TaVtDaV09U2lbQWldPVNpW1RpXT1TaVtQaV09dHJ1ZTtTaVtvaV09U2lbcmldPVNpW2JpXT1TaVtzaV09U2lbd2ldPVNpW2FpXT1TaVtjaV09U2lbbGldPVNpW2RpXT1TaVt1aV09U2lbaGldPVNpW2ZpXT1TaVtnaV09U2lbbWldPVNpW3BpXT1mYWxzZTtmdW5jdGlvbiBFaSh0KXtyZXR1cm4gVCh0KSYmbmkodC5sZW5ndGgpJiYhIVNpW18odCldfXZhciBSaT1FaTtmdW5jdGlvbiBPaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9fXZhciBJaT1PaTt2YXIgVmk9aSg1KTt2YXIgTmk9VmlbXCJhXCJdJiZWaVtcImFcIl0uaXNUeXBlZEFycmF5O3ZhciBNaT1OaT9JaShOaSk6Umk7dmFyIEJpPU1pO3ZhciB6aT1PYmplY3QucHJvdG90eXBlO3ZhciBMaT16aS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBGaSh0LGUpe3ZhciBpPUplKHQpLG49IWkmJkdlKHQpLG89IWkmJiFuJiZPYmplY3QoWWVbXCJhXCJdKSh0KSxyPSFpJiYhbiYmIW8mJkJpKHQpLHM9aXx8bnx8b3x8cixhPXM/RmUodC5sZW5ndGgsU3RyaW5nKTpbXSxjPWEubGVuZ3RoO2Zvcih2YXIgbCBpbiB0KXtpZigoZXx8TGkuY2FsbCh0LGwpKSYmIShzJiYobD09XCJsZW5ndGhcInx8byYmKGw9PVwib2Zmc2V0XCJ8fGw9PVwicGFyZW50XCIpfHxyJiYobD09XCJidWZmZXJcInx8bD09XCJieXRlTGVuZ3RoXCJ8fGw9PVwiYnl0ZU9mZnNldFwiKXx8dGkobCxjKSkpKXthLnB1c2gobCl9fXJldHVybiBhfXZhciBEaT1GaTt2YXIgamk9T2JqZWN0LnByb3RvdHlwZTtmdW5jdGlvbiBIaSh0KXt2YXIgZT10JiZ0LmNvbnN0cnVjdG9yLGk9dHlwZW9mIGU9PVwiZnVuY3Rpb25cIiYmZS5wcm90b3R5cGV8fGppO3JldHVybiB0PT09aX12YXIgV2k9SGk7dmFyIHFpPXkoT2JqZWN0LmtleXMsT2JqZWN0KTt2YXIgVWk9cWk7dmFyICRpPU9iamVjdC5wcm90b3R5cGU7dmFyIEdpPSRpLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIEtpKHQpe2lmKCFXaSh0KSl7cmV0dXJuIFVpKHQpfXZhciBlPVtdO2Zvcih2YXIgaSBpbiBPYmplY3QodCkpe2lmKEdpLmNhbGwodCxpKSYmaSE9XCJjb25zdHJ1Y3RvclwiKXtlLnB1c2goaSl9fXJldHVybiBlfXZhciBKaT1LaTtmdW5jdGlvbiBZaSh0KXtyZXR1cm4gdCE9bnVsbCYmbmkodC5sZW5ndGgpJiYhZ3QodCl9dmFyIFFpPVlpO2Z1bmN0aW9uIFhpKHQpe3JldHVybiBRaSh0KT9EaSh0KTpKaSh0KX12YXIgWmk9WGk7ZnVuY3Rpb24gdG4odCxlKXtyZXR1cm4gdCYmemUoZSxaaShlKSx0KX12YXIgZW49dG47ZnVuY3Rpb24gbm4odCl7dmFyIGU9W107aWYodCE9bnVsbCl7Zm9yKHZhciBpIGluIE9iamVjdCh0KSl7ZS5wdXNoKGkpfX1yZXR1cm4gZX12YXIgb249bm47dmFyIHJuPU9iamVjdC5wcm90b3R5cGU7dmFyIHNuPXJuLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIGFuKHQpe2lmKCFjdCh0KSl7cmV0dXJuIG9uKHQpfXZhciBlPVdpKHQpLGk9W107Zm9yKHZhciBuIGluIHQpe2lmKCEobj09XCJjb25zdHJ1Y3RvclwiJiYoZXx8IXNuLmNhbGwodCxuKSkpKXtpLnB1c2gobil9fXJldHVybiBpfXZhciBjbj1hbjtmdW5jdGlvbiBsbih0KXtyZXR1cm4gUWkodCk/RGkodCx0cnVlKTpjbih0KX12YXIgZG49bG47ZnVuY3Rpb24gdW4odCxlKXtyZXR1cm4gdCYmemUoZSxkbihlKSx0KX12YXIgaG49dW47dmFyIGZuPWkoOCk7ZnVuY3Rpb24gZ24odCxlKXt2YXIgaT0tMSxuPXQubGVuZ3RoO2V8fChlPUFycmF5KG4pKTt3aGlsZSgrK2k8bil7ZVtpXT10W2ldfXJldHVybiBlfXZhciBtbj1nbjtmdW5jdGlvbiBwbih0LGUpe3ZhciBpPS0xLG49dD09bnVsbD8wOnQubGVuZ3RoLG89MCxyPVtdO3doaWxlKCsraTxuKXt2YXIgcz10W2ldO2lmKGUocyxpLHQpKXtyW28rK109c319cmV0dXJuIHJ9dmFyIGJuPXBuO2Z1bmN0aW9uIHduKCl7cmV0dXJuW119dmFyIGtuPXduO3ZhciBfbj1PYmplY3QucHJvdG90eXBlO3ZhciB2bj1fbi5wcm9wZXJ0eUlzRW51bWVyYWJsZTt2YXIgeW49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczt2YXIgeG49IXluP2tuOmZ1bmN0aW9uKHQpe2lmKHQ9PW51bGwpe3JldHVybltdfXQ9T2JqZWN0KHQpO3JldHVybiBibih5bih0KSwoZnVuY3Rpb24oZSl7cmV0dXJuIHZuLmNhbGwodCxlKX0pKX07dmFyIENuPXhuO2Z1bmN0aW9uIEFuKHQsZSl7cmV0dXJuIHplKHQsQ24odCksZSl9dmFyIFRuPUFuO2Z1bmN0aW9uIFBuKHQsZSl7dmFyIGk9LTEsbj1lLmxlbmd0aCxvPXQubGVuZ3RoO3doaWxlKCsraTxuKXt0W28raV09ZVtpXX1yZXR1cm4gdH12YXIgU249UG47dmFyIEVuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIFJuPSFFbj9rbjpmdW5jdGlvbih0KXt2YXIgZT1bXTt3aGlsZSh0KXtTbihlLENuKHQpKTt0PUModCl9cmV0dXJuIGV9O3ZhciBPbj1SbjtmdW5jdGlvbiBJbih0LGUpe3JldHVybiB6ZSh0LE9uKHQpLGUpfXZhciBWbj1JbjtmdW5jdGlvbiBObih0LGUsaSl7dmFyIG49ZSh0KTtyZXR1cm4gSmUodCk/bjpTbihuLGkodCkpfXZhciBNbj1ObjtmdW5jdGlvbiBCbih0KXtyZXR1cm4gTW4odCxaaSxDbil9dmFyIHpuPUJuO2Z1bmN0aW9uIExuKHQpe3JldHVybiBNbih0LGRuLE9uKX12YXIgRm49TG47dmFyIERuPUJ0KG5bXCJhXCJdLFwiRGF0YVZpZXdcIik7dmFyIGpuPURuO3ZhciBIbj1CdChuW1wiYVwiXSxcIlByb21pc2VcIik7dmFyIFduPUhuO3ZhciBxbj1CdChuW1wiYVwiXSxcIlNldFwiKTt2YXIgVW49cW47dmFyICRuPUJ0KG5bXCJhXCJdLFwiV2Vha01hcFwiKTt2YXIgR249JG47dmFyIEtuPVwiW29iamVjdCBNYXBdXCIsSm49XCJbb2JqZWN0IE9iamVjdF1cIixZbj1cIltvYmplY3QgUHJvbWlzZV1cIixRbj1cIltvYmplY3QgU2V0XVwiLFhuPVwiW29iamVjdCBXZWFrTWFwXVwiO3ZhciBabj1cIltvYmplY3QgRGF0YVZpZXddXCI7dmFyIHRvPXh0KGpuKSxlbz14dChMdCksaW89eHQoV24pLG5vPXh0KFVuKSxvbz14dChHbik7dmFyIHJvPV87aWYoam4mJnJvKG5ldyBqbihuZXcgQXJyYXlCdWZmZXIoMSkpKSE9Wm58fEx0JiZybyhuZXcgTHQpIT1Lbnx8V24mJnJvKFduLnJlc29sdmUoKSkhPVlufHxVbiYmcm8obmV3IFVuKSE9UW58fEduJiZybyhuZXcgR24pIT1Ybil7cm89ZnVuY3Rpb24odCl7dmFyIGU9Xyh0KSxpPWU9PUpuP3QuY29uc3RydWN0b3I6dW5kZWZpbmVkLG49aT94dChpKTpcIlwiO2lmKG4pe3N3aXRjaChuKXtjYXNlIHRvOnJldHVybiBabjtjYXNlIGVvOnJldHVybiBLbjtjYXNlIGlvOnJldHVybiBZbjtjYXNlIG5vOnJldHVybiBRbjtjYXNlIG9vOnJldHVybiBYbn19cmV0dXJuIGV9fXZhciBzbz1ybzt2YXIgYW89T2JqZWN0LnByb3RvdHlwZTt2YXIgY289YW8uaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gbG8odCl7dmFyIGU9dC5sZW5ndGgsaT1uZXcgdC5jb25zdHJ1Y3RvcihlKTtpZihlJiZ0eXBlb2YgdFswXT09XCJzdHJpbmdcIiYmY28uY2FsbCh0LFwiaW5kZXhcIikpe2kuaW5kZXg9dC5pbmRleDtpLmlucHV0PXQuaW5wdXR9cmV0dXJuIGl9dmFyIHVvPWxvO3ZhciBobz1uW1wiYVwiXS5VaW50OEFycmF5O3ZhciBmbz1obztmdW5jdGlvbiBnbyh0KXt2YXIgZT1uZXcgdC5jb25zdHJ1Y3Rvcih0LmJ5dGVMZW5ndGgpO25ldyBmbyhlKS5zZXQobmV3IGZvKHQpKTtyZXR1cm4gZX12YXIgbW89Z287ZnVuY3Rpb24gcG8odCxlKXt2YXIgaT1lP21vKHQuYnVmZmVyKTp0LmJ1ZmZlcjtyZXR1cm4gbmV3IHQuY29uc3RydWN0b3IoaSx0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKX12YXIgYm89cG87dmFyIHdvPS9cXHcqJC87ZnVuY3Rpb24ga28odCl7dmFyIGU9bmV3IHQuY29uc3RydWN0b3IodC5zb3VyY2Usd28uZXhlYyh0KSk7ZS5sYXN0SW5kZXg9dC5sYXN0SW5kZXg7cmV0dXJuIGV9dmFyIF9vPWtvO3ZhciB2bz1yP3IucHJvdG90eXBlOnVuZGVmaW5lZCx5bz12bz92by52YWx1ZU9mOnVuZGVmaW5lZDtmdW5jdGlvbiB4byh0KXtyZXR1cm4geW8/T2JqZWN0KHlvLmNhbGwodCkpOnt9fXZhciBDbz14bztmdW5jdGlvbiBBbyh0LGUpe3ZhciBpPWU/bW8odC5idWZmZXIpOnQuYnVmZmVyO3JldHVybiBuZXcgdC5jb25zdHJ1Y3RvcihpLHQuYnl0ZU9mZnNldCx0Lmxlbmd0aCl9dmFyIFRvPUFvO3ZhciBQbz1cIltvYmplY3QgQm9vbGVhbl1cIixTbz1cIltvYmplY3QgRGF0ZV1cIixFbz1cIltvYmplY3QgTWFwXVwiLFJvPVwiW29iamVjdCBOdW1iZXJdXCIsT289XCJbb2JqZWN0IFJlZ0V4cF1cIixJbz1cIltvYmplY3QgU2V0XVwiLFZvPVwiW29iamVjdCBTdHJpbmddXCIsTm89XCJbb2JqZWN0IFN5bWJvbF1cIjt2YXIgTW89XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiLEJvPVwiW29iamVjdCBEYXRhVmlld11cIix6bz1cIltvYmplY3QgRmxvYXQzMkFycmF5XVwiLExvPVwiW29iamVjdCBGbG9hdDY0QXJyYXldXCIsRm89XCJbb2JqZWN0IEludDhBcnJheV1cIixEbz1cIltvYmplY3QgSW50MTZBcnJheV1cIixqbz1cIltvYmplY3QgSW50MzJBcnJheV1cIixIbz1cIltvYmplY3QgVWludDhBcnJheV1cIixXbz1cIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldXCIscW89XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLFVvPVwiW29iamVjdCBVaW50MzJBcnJheV1cIjtmdW5jdGlvbiAkbyh0LGUsaSl7dmFyIG49dC5jb25zdHJ1Y3Rvcjtzd2l0Y2goZSl7Y2FzZSBNbzpyZXR1cm4gbW8odCk7Y2FzZSBQbzpjYXNlIFNvOnJldHVybiBuZXcgbigrdCk7Y2FzZSBCbzpyZXR1cm4gYm8odCxpKTtjYXNlIHpvOmNhc2UgTG86Y2FzZSBGbzpjYXNlIERvOmNhc2Ugam86Y2FzZSBIbzpjYXNlIFdvOmNhc2UgcW86Y2FzZSBVbzpyZXR1cm4gVG8odCxpKTtjYXNlIEVvOnJldHVybiBuZXcgbjtjYXNlIFJvOmNhc2UgVm86cmV0dXJuIG5ldyBuKHQpO2Nhc2UgT286cmV0dXJuIF9vKHQpO2Nhc2UgSW86cmV0dXJuIG5ldyBuO2Nhc2UgTm86cmV0dXJuIENvKHQpfX12YXIgR289JG87dmFyIEtvPU9iamVjdC5jcmVhdGU7dmFyIEpvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWN0KGUpKXtyZXR1cm57fX1pZihLbyl7cmV0dXJuIEtvKGUpfXQucHJvdG90eXBlPWU7dmFyIGk9bmV3IHQ7dC5wcm90b3R5cGU9dW5kZWZpbmVkO3JldHVybiBpfX0oKTt2YXIgWW89Sm87ZnVuY3Rpb24gUW8odCl7cmV0dXJuIHR5cGVvZiB0LmNvbnN0cnVjdG9yPT1cImZ1bmN0aW9uXCImJiFXaSh0KT9ZbyhDKHQpKTp7fX12YXIgWG89UW87dmFyIFpvPVwiW29iamVjdCBNYXBdXCI7ZnVuY3Rpb24gdHIodCl7cmV0dXJuIFQodCkmJnNvKHQpPT1ab312YXIgZXI9dHI7dmFyIGlyPVZpW1wiYVwiXSYmVmlbXCJhXCJdLmlzTWFwO3ZhciBucj1pcj9JaShpcik6ZXI7dmFyIG9yPW5yO3ZhciBycj1cIltvYmplY3QgU2V0XVwiO2Z1bmN0aW9uIHNyKHQpe3JldHVybiBUKHQpJiZzbyh0KT09cnJ9dmFyIGFyPXNyO3ZhciBjcj1WaVtcImFcIl0mJlZpW1wiYVwiXS5pc1NldDt2YXIgbHI9Y3I/SWkoY3IpOmFyO3ZhciBkcj1scjt2YXIgdXI9MSxocj0yLGZyPTQ7dmFyIGdyPVwiW29iamVjdCBBcmd1bWVudHNdXCIsbXI9XCJbb2JqZWN0IEFycmF5XVwiLHByPVwiW29iamVjdCBCb29sZWFuXVwiLGJyPVwiW29iamVjdCBEYXRlXVwiLHdyPVwiW29iamVjdCBFcnJvcl1cIixrcj1cIltvYmplY3QgRnVuY3Rpb25dXCIsX3I9XCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXVwiLHZyPVwiW29iamVjdCBNYXBdXCIseXI9XCJbb2JqZWN0IE51bWJlcl1cIix4cj1cIltvYmplY3QgT2JqZWN0XVwiLENyPVwiW29iamVjdCBSZWdFeHBdXCIsQXI9XCJbb2JqZWN0IFNldF1cIixUcj1cIltvYmplY3QgU3RyaW5nXVwiLFByPVwiW29iamVjdCBTeW1ib2xdXCIsU3I9XCJbb2JqZWN0IFdlYWtNYXBdXCI7dmFyIEVyPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixScj1cIltvYmplY3QgRGF0YVZpZXddXCIsT3I9XCJbb2JqZWN0IEZsb2F0MzJBcnJheV1cIixJcj1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLFZyPVwiW29iamVjdCBJbnQ4QXJyYXldXCIsTnI9XCJbb2JqZWN0IEludDE2QXJyYXldXCIsTXI9XCJbb2JqZWN0IEludDMyQXJyYXldXCIsQnI9XCJbb2JqZWN0IFVpbnQ4QXJyYXldXCIsenI9XCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XVwiLExyPVwiW29iamVjdCBVaW50MTZBcnJheV1cIixGcj1cIltvYmplY3QgVWludDMyQXJyYXldXCI7dmFyIERyPXt9O0RyW2dyXT1Eclttcl09RHJbRXJdPURyW1JyXT1Ecltwcl09RHJbYnJdPURyW09yXT1EcltJcl09RHJbVnJdPURyW05yXT1EcltNcl09RHJbdnJdPURyW3lyXT1Eclt4cl09RHJbQ3JdPURyW0FyXT1EcltUcl09RHJbUHJdPURyW0JyXT1Eclt6cl09RHJbTHJdPURyW0ZyXT10cnVlO0RyW3dyXT1Ecltrcl09RHJbU3JdPWZhbHNlO2Z1bmN0aW9uIGpyKHQsZSxpLG4sbyxyKXt2YXIgcyxhPWUmdXIsYz1lJmhyLGw9ZSZmcjtpZihpKXtzPW8/aSh0LG4sbyxyKTppKHQpfWlmKHMhPT11bmRlZmluZWQpe3JldHVybiBzfWlmKCFjdCh0KSl7cmV0dXJuIHR9dmFyIGQ9SmUodCk7aWYoZCl7cz11byh0KTtpZighYSl7cmV0dXJuIG1uKHQscyl9fWVsc2V7dmFyIHU9c28odCksaD11PT1rcnx8dT09X3I7aWYoT2JqZWN0KFllW1wiYVwiXSkodCkpe3JldHVybiBPYmplY3QoZm5bXCJhXCJdKSh0LGEpfWlmKHU9PXhyfHx1PT1ncnx8aCYmIW8pe3M9Y3x8aD97fTpYbyh0KTtpZighYSl7cmV0dXJuIGM/Vm4odCxobihzLHQpKTpUbih0LGVuKHMsdCkpfX1lbHNle2lmKCFEclt1XSl7cmV0dXJuIG8/dDp7fX1zPUdvKHQsdSxhKX19cnx8KHI9bmV3IEFlKTt2YXIgZj1yLmdldCh0KTtpZihmKXtyZXR1cm4gZn1yLnNldCh0LHMpO2lmKGRyKHQpKXt0LmZvckVhY2goKGZ1bmN0aW9uKG4pe3MuYWRkKGpyKG4sZSxpLG4sdCxyKSl9KSl9ZWxzZSBpZihvcih0KSl7dC5mb3JFYWNoKChmdW5jdGlvbihuLG8pe3Muc2V0KG8sanIobixlLGksbyx0LHIpKX0pKX12YXIgZz1sP2M/Rm46em46Yz9rZXlzSW46Wmk7dmFyIG09ZD91bmRlZmluZWQ6Zyh0KTtQZShtfHx0LChmdW5jdGlvbihuLG8pe2lmKG0pe289bjtuPXRbb119TWUocyxvLGpyKG4sZSxpLG8sdCxyKSl9KSk7cmV0dXJuIHN9dmFyIEhyPWpyO3ZhciBXcj0xLHFyPTQ7ZnVuY3Rpb24gVXIodCxlKXtlPXR5cGVvZiBlPT1cImZ1bmN0aW9uXCI/ZTp1bmRlZmluZWQ7cmV0dXJuIEhyKHQsV3J8cXIsZSl9dmFyICRyPVVyO2Z1bmN0aW9uIEdyKHQpe3JldHVybiBUKHQpJiZ0Lm5vZGVUeXBlPT09MSYmIU4odCl9dmFyIEtyPUdyO2NsYXNzIEpye2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5fY29uZmlnPXt9O2lmKGUpe3RoaXMuZGVmaW5lKFlyKGUpKX1pZih0KXt0aGlzLl9zZXRPYmplY3RUb1RhcmdldCh0aGlzLl9jb25maWcsdCl9fXNldCh0LGUpe3RoaXMuX3NldFRvVGFyZ2V0KHRoaXMuX2NvbmZpZyx0LGUpfWRlZmluZSh0LGUpe2NvbnN0IGk9dHJ1ZTt0aGlzLl9zZXRUb1RhcmdldCh0aGlzLl9jb25maWcsdCxlLGkpfWdldCh0KXtyZXR1cm4gdGhpcy5fZ2V0RnJvbVNvdXJjZSh0aGlzLl9jb25maWcsdCl9Km5hbWVzKCl7Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmtleXModGhpcy5fY29uZmlnKSl7eWllbGQgdH19X3NldFRvVGFyZ2V0KHQsZSxpLG49ZmFsc2Upe2lmKE4oZSkpe3RoaXMuX3NldE9iamVjdFRvVGFyZ2V0KHQsZSxuKTtyZXR1cm59Y29uc3Qgbz1lLnNwbGl0KFwiLlwiKTtlPW8ucG9wKCk7Zm9yKGNvbnN0IGUgb2Ygbyl7aWYoIU4odFtlXSkpe3RbZV09e319dD10W2VdfWlmKE4oaSkpe2lmKCFOKHRbZV0pKXt0W2VdPXt9fXQ9dFtlXTt0aGlzLl9zZXRPYmplY3RUb1RhcmdldCh0LGksbik7cmV0dXJufWlmKG4mJnR5cGVvZiB0W2VdIT1cInVuZGVmaW5lZFwiKXtyZXR1cm59dFtlXT1pfV9nZXRGcm9tU291cmNlKHQsZSl7Y29uc3QgaT1lLnNwbGl0KFwiLlwiKTtlPWkucG9wKCk7Zm9yKGNvbnN0IGUgb2YgaSl7aWYoIU4odFtlXSkpe3Q9bnVsbDticmVha310PXRbZV19cmV0dXJuIHQ/WXIodFtlXSk6dW5kZWZpbmVkfV9zZXRPYmplY3RUb1RhcmdldCh0LGUsaSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChuPT57dGhpcy5fc2V0VG9UYXJnZXQodCxuLGVbbl0saSl9KX19ZnVuY3Rpb24gWXIodCl7cmV0dXJuICRyKHQsUXIpfWZ1bmN0aW9uIFFyKHQpe3JldHVybiBLcih0KT90OnVuZGVmaW5lZH1mdW5jdGlvbiBYcigpe3JldHVybiBmdW5jdGlvbiB0KCl7dC5jYWxsZWQ9dHJ1ZX19dmFyIFpyPVhyO2NsYXNzIHRze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5zb3VyY2U9dDt0aGlzLm5hbWU9ZTt0aGlzLnBhdGg9W107dGhpcy5zdG9wPVpyKCk7dGhpcy5vZmY9WnIoKX19Y29uc3QgZXM9bmV3IEFycmF5KDI1NikuZmlsbCgpLm1hcCgodCxlKT0+KFwiMFwiK2UudG9TdHJpbmcoMTYpKS5zbGljZSgtMikpO2Z1bmN0aW9uIGlzKCl7Y29uc3QgdD1NYXRoLnJhbmRvbSgpKjQyOTQ5NjcyOTY+Pj4wO2NvbnN0IGU9TWF0aC5yYW5kb20oKSo0Mjk0OTY3Mjk2Pj4+MDtjb25zdCBpPU1hdGgucmFuZG9tKCkqNDI5NDk2NzI5Nj4+PjA7Y29uc3Qgbj1NYXRoLnJhbmRvbSgpKjQyOTQ5NjcyOTY+Pj4wO3JldHVyblwiZVwiK2VzW3Q+PjAmMjU1XStlc1t0Pj44JjI1NV0rZXNbdD4+MTYmMjU1XStlc1t0Pj4yNCYyNTVdK2VzW2U+PjAmMjU1XStlc1tlPj44JjI1NV0rZXNbZT4+MTYmMjU1XStlc1tlPj4yNCYyNTVdK2VzW2k+PjAmMjU1XStlc1tpPj44JjI1NV0rZXNbaT4+MTYmMjU1XStlc1tpPj4yNCYyNTVdK2VzW24+PjAmMjU1XStlc1tuPj44JjI1NV0rZXNbbj4+MTYmMjU1XStlc1tuPj4yNCYyNTVdfWNvbnN0IG5zPXtnZXQodCl7aWYodHlwZW9mIHQhPVwibnVtYmVyXCIpe3JldHVybiB0aGlzW3RdfHx0aGlzLm5vcm1hbH1lbHNle3JldHVybiB0fX0saGlnaGVzdDoxZTUsaGlnaDoxZTMsbm9ybWFsOjAsbG93Oi0xZTMsbG93ZXN0Oi0xZTV9O3ZhciBvcz1uczt2YXIgcnM9aSg2KTt2YXIgc3M9aSgwKTtjb25zdCBhcz1TeW1ib2woXCJsaXN0ZW5pbmdUb1wiKTtjb25zdCBjcz1TeW1ib2woXCJlbWl0dGVySWRcIik7Y29uc3QgbHM9e29uKHQsZSxpPXt9KXt0aGlzLmxpc3RlblRvKHRoaXMsdCxlLGkpfSxvbmNlKHQsZSxpKXtsZXQgbj1mYWxzZTtjb25zdCBvPWZ1bmN0aW9uKHQsLi4uaSl7aWYoIW4pe249dHJ1ZTt0Lm9mZigpO2UuY2FsbCh0aGlzLHQsLi4uaSl9fTt0aGlzLmxpc3RlblRvKHRoaXMsdCxvLGkpfSxvZmYodCxlKXt0aGlzLnN0b3BMaXN0ZW5pbmcodGhpcyx0LGUpfSxsaXN0ZW5Ubyh0LGUsaSxuPXt9KXtsZXQgbyxyO2lmKCF0aGlzW2FzXSl7dGhpc1thc109e319Y29uc3Qgcz10aGlzW2FzXTtpZighZnModCkpe2hzKHQpfWNvbnN0IGE9ZnModCk7aWYoIShvPXNbYV0pKXtvPXNbYV09e2VtaXR0ZXI6dCxjYWxsYmFja3M6e319fWlmKCEocj1vLmNhbGxiYWNrc1tlXSkpe3I9by5jYWxsYmFja3NbZV09W119ci5wdXNoKGkpO3BzKHQsZSk7Y29uc3QgYz1icyh0LGUpO2NvbnN0IGw9b3MuZ2V0KG4ucHJpb3JpdHkpO2NvbnN0IGQ9e2NhbGxiYWNrOmkscHJpb3JpdHk6bH07Zm9yKGNvbnN0IHQgb2YgYyl7bGV0IGU9ZmFsc2U7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2lmKHRbaV0ucHJpb3JpdHk8bCl7dC5zcGxpY2UoaSwwLGQpO2U9dHJ1ZTticmVha319aWYoIWUpe3QucHVzaChkKX19fSxzdG9wTGlzdGVuaW5nKHQsZSxpKXtjb25zdCBuPXRoaXNbYXNdO2xldCBvPXQmJmZzKHQpO2NvbnN0IHI9biYmbyYmbltvXTtjb25zdCBzPXImJmUmJnIuY2FsbGJhY2tzW2VdO2lmKCFufHx0JiYhcnx8ZSYmIXMpe3JldHVybn1pZihpKXtfcyh0LGUsaSl9ZWxzZSBpZihzKXt3aGlsZShpPXMucG9wKCkpe19zKHQsZSxpKX1kZWxldGUgci5jYWxsYmFja3NbZV19ZWxzZSBpZihyKXtmb3IoZSBpbiByLmNhbGxiYWNrcyl7dGhpcy5zdG9wTGlzdGVuaW5nKHQsZSl9ZGVsZXRlIG5bb119ZWxzZXtmb3IobyBpbiBuKXt0aGlzLnN0b3BMaXN0ZW5pbmcobltvXS5lbWl0dGVyKX1kZWxldGUgdGhpc1thc119fSxmaXJlKHQsLi4uZSl7dHJ5e2NvbnN0IGk9dCBpbnN0YW5jZW9mIHRzP3Q6bmV3IHRzKHRoaXMsdCk7Y29uc3Qgbj1pLm5hbWU7bGV0IG89d3ModGhpcyxuKTtpLnBhdGgucHVzaCh0aGlzKTtpZihvKXtjb25zdCB0PVtpLC4uLmVdO289QXJyYXkuZnJvbShvKTtmb3IobGV0IGU9MDtlPG8ubGVuZ3RoO2UrKyl7b1tlXS5jYWxsYmFjay5hcHBseSh0aGlzLHQpO2lmKGkub2ZmLmNhbGxlZCl7ZGVsZXRlIGkub2ZmLmNhbGxlZDtfcyh0aGlzLG4sb1tlXS5jYWxsYmFjayl9aWYoaS5zdG9wLmNhbGxlZCl7YnJlYWt9fX1pZih0aGlzLl9kZWxlZ2F0aW9ucyl7Y29uc3QgdD10aGlzLl9kZWxlZ2F0aW9ucy5nZXQobik7Y29uc3Qgbz10aGlzLl9kZWxlZ2F0aW9ucy5nZXQoXCIqXCIpO2lmKHQpe2tzKHQsaSxlKX1pZihvKXtrcyhvLGksZSl9fXJldHVybiBpLnJldHVybn1jYXRjaCh0KXtzc1tcImJcIl0ucmV0aHJvd1VuZXhwZWN0ZWRFcnJvcih0LHRoaXMpfX0sZGVsZWdhdGUoLi4udCl7cmV0dXJue3RvOihlLGkpPT57aWYoIXRoaXMuX2RlbGVnYXRpb25zKXt0aGlzLl9kZWxlZ2F0aW9ucz1uZXcgTWFwfXQuZm9yRWFjaCh0PT57Y29uc3Qgbj10aGlzLl9kZWxlZ2F0aW9ucy5nZXQodCk7aWYoIW4pe3RoaXMuX2RlbGVnYXRpb25zLnNldCh0LG5ldyBNYXAoW1tlLGldXSkpfWVsc2V7bi5zZXQoZSxpKX19KX19fSxzdG9wRGVsZWdhdGluZyh0LGUpe2lmKCF0aGlzLl9kZWxlZ2F0aW9ucyl7cmV0dXJufWlmKCF0KXt0aGlzLl9kZWxlZ2F0aW9ucy5jbGVhcigpfWVsc2UgaWYoIWUpe3RoaXMuX2RlbGVnYXRpb25zLmRlbGV0ZSh0KX1lbHNle2NvbnN0IGk9dGhpcy5fZGVsZWdhdGlvbnMuZ2V0KHQpO2lmKGkpe2kuZGVsZXRlKGUpfX19fTt2YXIgZHM9bHM7ZnVuY3Rpb24gdXModCxlKXtpZih0W2FzXSYmdFthc11bZV0pe3JldHVybiB0W2FzXVtlXS5lbWl0dGVyfXJldHVybiBudWxsfWZ1bmN0aW9uIGhzKHQsZSl7aWYoIXRbY3NdKXt0W2NzXT1lfHxpcygpfX1mdW5jdGlvbiBmcyh0KXtyZXR1cm4gdFtjc119ZnVuY3Rpb24gZ3ModCl7aWYoIXQuX2V2ZW50cyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfZXZlbnRzXCIse3ZhbHVlOnt9fSl9cmV0dXJuIHQuX2V2ZW50c31mdW5jdGlvbiBtcygpe3JldHVybntjYWxsYmFja3M6W10sY2hpbGRFdmVudHM6W119fWZ1bmN0aW9uIHBzKHQsZSl7Y29uc3QgaT1ncyh0KTtpZihpW2VdKXtyZXR1cm59bGV0IG49ZTtsZXQgbz1udWxsO2NvbnN0IHI9W107d2hpbGUobiE9PVwiXCIpe2lmKGlbbl0pe2JyZWFrfWlbbl09bXMoKTtyLnB1c2goaVtuXSk7aWYobyl7aVtuXS5jaGlsZEV2ZW50cy5wdXNoKG8pfW89bjtuPW4uc3Vic3RyKDAsbi5sYXN0SW5kZXhPZihcIjpcIikpfWlmKG4hPT1cIlwiKXtmb3IoY29uc3QgdCBvZiByKXt0LmNhbGxiYWNrcz1pW25dLmNhbGxiYWNrcy5zbGljZSgpfWlbbl0uY2hpbGRFdmVudHMucHVzaChvKX19ZnVuY3Rpb24gYnModCxlKXtjb25zdCBpPWdzKHQpW2VdO2lmKCFpKXtyZXR1cm5bXX1sZXQgbj1baS5jYWxsYmFja3NdO2ZvcihsZXQgZT0wO2U8aS5jaGlsZEV2ZW50cy5sZW5ndGg7ZSsrKXtjb25zdCBvPWJzKHQsaS5jaGlsZEV2ZW50c1tlXSk7bj1uLmNvbmNhdChvKX1yZXR1cm4gbn1mdW5jdGlvbiB3cyh0LGUpe2xldCBpO2lmKCF0Ll9ldmVudHN8fCEoaT10Ll9ldmVudHNbZV0pfHwhaS5jYWxsYmFja3MubGVuZ3RoKXtpZihlLmluZGV4T2YoXCI6XCIpPi0xKXtyZXR1cm4gd3ModCxlLnN1YnN0cigwLGUubGFzdEluZGV4T2YoXCI6XCIpKSl9ZWxzZXtyZXR1cm4gbnVsbH19cmV0dXJuIGkuY2FsbGJhY2tzfWZ1bmN0aW9uIGtzKHQsZSxpKXtmb3IobGV0W24sb11vZiB0KXtpZighbyl7bz1lLm5hbWV9ZWxzZSBpZih0eXBlb2Ygbz09XCJmdW5jdGlvblwiKXtvPW8oZS5uYW1lKX1jb25zdCB0PW5ldyB0cyhlLnNvdXJjZSxvKTt0LnBhdGg9Wy4uLmUucGF0aF07bi5maXJlKHQsLi4uaSl9fWZ1bmN0aW9uIF9zKHQsZSxpKXtjb25zdCBuPWJzKHQsZSk7Zm9yKGNvbnN0IHQgb2Ygbil7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2lmKHRbZV0uY2FsbGJhY2s9PWkpe3Quc3BsaWNlKGUsMSk7ZS0tfX19fWZ1bmN0aW9uIHZzKHQsLi4uZSl7ZS5mb3JFYWNoKGU9PntPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSkuZm9yRWFjaChpPT57aWYoaSBpbiB0LnByb3RvdHlwZSl7cmV0dXJufWNvbnN0IG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpO24uZW51bWVyYWJsZT1mYWxzZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsaSxuKX0pfSl9Y2xhc3MgeXN7Y29uc3RydWN0b3IodD17fSl7dGhpcy5faXRlbXM9W107dGhpcy5faXRlbU1hcD1uZXcgTWFwO3RoaXMuX2lkUHJvcGVydHk9dC5pZFByb3BlcnR5fHxcImlkXCI7dGhpcy5fYmluZFRvRXh0ZXJuYWxUb0ludGVybmFsTWFwPW5ldyBXZWFrTWFwO3RoaXMuX2JpbmRUb0ludGVybmFsVG9FeHRlcm5hbE1hcD1uZXcgV2Vha01hcDt0aGlzLl9za2lwcGVkSW5kZXhlc0Zyb21FeHRlcm5hbD1bXX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aH1nZXQgZmlyc3QoKXtyZXR1cm4gdGhpcy5faXRlbXNbMF18fG51bGx9Z2V0IGxhc3QoKXtyZXR1cm4gdGhpcy5faXRlbXNbdGhpcy5sZW5ndGgtMV18fG51bGx9YWRkKHQsZSl7bGV0IGk7Y29uc3Qgbj10aGlzLl9pZFByb3BlcnR5O2lmKG4gaW4gdCl7aT10W25dO2lmKHR5cGVvZiBpIT1cInN0cmluZ1wiKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiY29sbGVjdGlvbi1hZGQtaW52YWxpZC1pZFwiLHRoaXMpfWlmKHRoaXMuZ2V0KGkpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiY29sbGVjdGlvbi1hZGQtaXRlbS1hbHJlYWR5LWV4aXN0c1wiLHRoaXMpfX1lbHNle3Rbbl09aT1pcygpfWlmKGU9PT11bmRlZmluZWQpe2U9dGhpcy5faXRlbXMubGVuZ3RofWVsc2UgaWYoZT50aGlzLl9pdGVtcy5sZW5ndGh8fGU8MCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbGxlY3Rpb24tYWRkLWl0ZW0taW52YWxpZC1pbmRleFwiLHRoaXMpfXRoaXMuX2l0ZW1zLnNwbGljZShlLDAsdCk7dGhpcy5faXRlbU1hcC5zZXQoaSx0KTt0aGlzLmZpcmUoXCJhZGRcIix0LGUpO3JldHVybiB0aGlzfWdldCh0KXtsZXQgZTtpZih0eXBlb2YgdD09XCJzdHJpbmdcIil7ZT10aGlzLl9pdGVtTWFwLmdldCh0KX1lbHNlIGlmKHR5cGVvZiB0PT1cIm51bWJlclwiKXtlPXRoaXMuX2l0ZW1zW3RdfWVsc2V7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbGxlY3Rpb24tZ2V0LWludmFsaWQtYXJnOiBJbmRleCBvciBpZCBtdXN0IGJlIGdpdmVuLlwiLHRoaXMpfXJldHVybiBlfHxudWxsfWhhcyh0KXtpZih0eXBlb2YgdD09XCJzdHJpbmdcIil7cmV0dXJuIHRoaXMuX2l0ZW1NYXAuaGFzKHQpfWVsc2V7Y29uc3QgZT10aGlzLl9pZFByb3BlcnR5O2NvbnN0IGk9dFtlXTtyZXR1cm4gdGhpcy5faXRlbU1hcC5oYXMoaSl9fWdldEluZGV4KHQpe2xldCBlO2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtlPXRoaXMuX2l0ZW1NYXAuZ2V0KHQpfWVsc2V7ZT10fXJldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGUpfXJlbW92ZSh0KXtsZXQgZSxpLG47bGV0IG89ZmFsc2U7Y29uc3Qgcj10aGlzLl9pZFByb3BlcnR5O2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtpPXQ7bj10aGlzLl9pdGVtTWFwLmdldChpKTtvPSFuO2lmKG4pe2U9dGhpcy5faXRlbXMuaW5kZXhPZihuKX19ZWxzZSBpZih0eXBlb2YgdD09XCJudW1iZXJcIil7ZT10O249dGhpcy5faXRlbXNbZV07bz0hbjtpZihuKXtpPW5bcl19fWVsc2V7bj10O2k9bltyXTtlPXRoaXMuX2l0ZW1zLmluZGV4T2Yobik7bz1lPT0tMXx8IXRoaXMuX2l0ZW1NYXAuZ2V0KGkpfWlmKG8pe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb2xsZWN0aW9uLXJlbW92ZS00MDQ6IEl0ZW0gbm90IGZvdW5kLlwiLHRoaXMpfXRoaXMuX2l0ZW1zLnNwbGljZShlLDEpO3RoaXMuX2l0ZW1NYXAuZGVsZXRlKGkpO2NvbnN0IHM9dGhpcy5fYmluZFRvSW50ZXJuYWxUb0V4dGVybmFsTWFwLmdldChuKTt0aGlzLl9iaW5kVG9JbnRlcm5hbFRvRXh0ZXJuYWxNYXAuZGVsZXRlKG4pO3RoaXMuX2JpbmRUb0V4dGVybmFsVG9JbnRlcm5hbE1hcC5kZWxldGUocyk7dGhpcy5maXJlKFwicmVtb3ZlXCIsbixlKTtyZXR1cm4gbn1tYXAodCxlKXtyZXR1cm4gdGhpcy5faXRlbXMubWFwKHQsZSl9ZmluZCh0LGUpe3JldHVybiB0aGlzLl9pdGVtcy5maW5kKHQsZSl9ZmlsdGVyKHQsZSl7cmV0dXJuIHRoaXMuX2l0ZW1zLmZpbHRlcih0LGUpfWNsZWFyKCl7aWYodGhpcy5fYmluZFRvQ29sbGVjdGlvbil7dGhpcy5zdG9wTGlzdGVuaW5nKHRoaXMuX2JpbmRUb0NvbGxlY3Rpb24pO3RoaXMuX2JpbmRUb0NvbGxlY3Rpb249bnVsbH13aGlsZSh0aGlzLmxlbmd0aCl7dGhpcy5yZW1vdmUoMCl9fWJpbmRUbyh0KXtpZih0aGlzLl9iaW5kVG9Db2xsZWN0aW9uKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiY29sbGVjdGlvbi1iaW5kLXRvLXJlYmluZDogVGhlIGNvbGxlY3Rpb24gY2Fubm90IGJlIGJvdW5kIG1vcmUgdGhhbiBvbmNlLlwiLHRoaXMpfXRoaXMuX2JpbmRUb0NvbGxlY3Rpb249dDtyZXR1cm57YXM6dD0+e3RoaXMuX3NldFVwQmluZFRvQmluZGluZyhlPT5uZXcgdChlKSl9LHVzaW5nOnQ9PntpZih0eXBlb2YgdD09XCJmdW5jdGlvblwiKXt0aGlzLl9zZXRVcEJpbmRUb0JpbmRpbmcoZT0+dChlKSl9ZWxzZXt0aGlzLl9zZXRVcEJpbmRUb0JpbmRpbmcoZT0+ZVt0XSl9fX19X3NldFVwQmluZFRvQmluZGluZyh0KXtjb25zdCBlPXRoaXMuX2JpbmRUb0NvbGxlY3Rpb247Y29uc3QgaT0oaSxuLG8pPT57Y29uc3Qgcj1lLl9iaW5kVG9Db2xsZWN0aW9uPT10aGlzO2NvbnN0IHM9ZS5fYmluZFRvSW50ZXJuYWxUb0V4dGVybmFsTWFwLmdldChuKTtpZihyJiZzKXt0aGlzLl9iaW5kVG9FeHRlcm5hbFRvSW50ZXJuYWxNYXAuc2V0KG4scyk7dGhpcy5fYmluZFRvSW50ZXJuYWxUb0V4dGVybmFsTWFwLnNldChzLG4pfWVsc2V7Y29uc3QgaT10KG4pO2lmKCFpKXt0aGlzLl9za2lwcGVkSW5kZXhlc0Zyb21FeHRlcm5hbC5wdXNoKG8pO3JldHVybn1sZXQgcj1vO2Zvcihjb25zdCB0IG9mIHRoaXMuX3NraXBwZWRJbmRleGVzRnJvbUV4dGVybmFsKXtpZihvPnQpe3ItLX19Zm9yKGNvbnN0IHQgb2YgZS5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWwpe2lmKHI+PXQpe3IrK319dGhpcy5fYmluZFRvRXh0ZXJuYWxUb0ludGVybmFsTWFwLnNldChuLGkpO3RoaXMuX2JpbmRUb0ludGVybmFsVG9FeHRlcm5hbE1hcC5zZXQoaSxuKTt0aGlzLmFkZChpLHIpO2ZvcihsZXQgdD0wO3Q8ZS5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWwubGVuZ3RoO3QrKyl7aWYocjw9ZS5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWxbdF0pe2UuX3NraXBwZWRJbmRleGVzRnJvbUV4dGVybmFsW3RdKyt9fX19O2Zvcihjb25zdCB0IG9mIGUpe2kobnVsbCx0LGUuZ2V0SW5kZXgodCkpfXRoaXMubGlzdGVuVG8oZSxcImFkZFwiLGkpO3RoaXMubGlzdGVuVG8oZSxcInJlbW92ZVwiLCh0LGUsaSk9Pntjb25zdCBuPXRoaXMuX2JpbmRUb0V4dGVybmFsVG9JbnRlcm5hbE1hcC5nZXQoZSk7aWYobil7dGhpcy5yZW1vdmUobil9dGhpcy5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWw9dGhpcy5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWwucmVkdWNlKCh0LGUpPT57aWYoaTxlKXt0LnB1c2goZS0xKX1pZihpPmUpe3QucHVzaChlKX1yZXR1cm4gdH0sW10pfSl9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5faXRlbXNbU3ltYm9sLml0ZXJhdG9yXSgpfX12cyh5cyxkcyk7Y2xhc3MgeHN7Y29uc3RydWN0b3IodCxlPVtdLGk9W10pe3RoaXMuX2NvbnRleHQ9dDt0aGlzLl9wbHVnaW5zPW5ldyBNYXA7dGhpcy5fYXZhaWxhYmxlUGx1Z2lucz1uZXcgTWFwO2Zvcihjb25zdCB0IG9mIGUpe2lmKHQucGx1Z2luTmFtZSl7dGhpcy5fYXZhaWxhYmxlUGx1Z2lucy5zZXQodC5wbHVnaW5OYW1lLHQpfX10aGlzLl9jb250ZXh0UGx1Z2lucz1uZXcgTWFwO2Zvcihjb25zdFt0LGVdb2YgaSl7dGhpcy5fY29udGV4dFBsdWdpbnMuc2V0KHQsZSk7dGhpcy5fY29udGV4dFBsdWdpbnMuc2V0KGUsdCk7aWYodC5wbHVnaW5OYW1lKXt0aGlzLl9hdmFpbGFibGVQbHVnaW5zLnNldCh0LnBsdWdpbk5hbWUsdCl9fX0qW1N5bWJvbC5pdGVyYXRvcl0oKXtmb3IoY29uc3QgdCBvZiB0aGlzLl9wbHVnaW5zKXtpZih0eXBlb2YgdFswXT09XCJmdW5jdGlvblwiKXt5aWVsZCB0fX19Z2V0KHQpe2NvbnN0IGU9dGhpcy5fcGx1Z2lucy5nZXQodCk7aWYoIWUpe2NvbnN0IGU9XCJwbHVnaW5jb2xsZWN0aW9uLXBsdWdpbi1ub3QtbG9hZGVkOiBUaGUgcmVxdWVzdGVkIHBsdWdpbiBpcyBub3QgbG9hZGVkLlwiO2xldCBpPXQ7aWYodHlwZW9mIHQ9PVwiZnVuY3Rpb25cIil7aT10LnBsdWdpbk5hbWV8fHQubmFtZX10aHJvdyBuZXcgc3NbXCJiXCJdKGUsdGhpcy5fY29udGV4dCx7cGx1Z2luOml9KX1yZXR1cm4gZX1oYXModCl7cmV0dXJuIHRoaXMuX3BsdWdpbnMuaGFzKHQpfWluaXQodCxlPVtdKXtjb25zdCBpPXRoaXM7Y29uc3Qgbj10aGlzLl9jb250ZXh0O2NvbnN0IG89bmV3IFNldDtjb25zdCByPVtdO2NvbnN0IHM9Zyh0KTtjb25zdCBhPWcoZSk7Y29uc3QgYz1mKHQpO2lmKGMpe2NvbnN0IHQ9XCJwbHVnaW5jb2xsZWN0aW9uLXBsdWdpbi1ub3QtZm91bmQ6IFNvbWUgcGx1Z2lucyBhcmUgbm90IGF2YWlsYWJsZSBhbmQgY291bGQgbm90IGJlIGxvYWRlZC5cIjtjb25zb2xlLmVycm9yKE9iamVjdChzc1tcImFcIl0pKHQpLHtwbHVnaW5zOmN9KTtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHNzW1wiYlwiXSh0LG4se3BsdWdpbnM6Y30pKX1yZXR1cm4gUHJvbWlzZS5hbGwocy5tYXAobCkpLnRoZW4oKCk9PmQocixcImluaXRcIikpLnRoZW4oKCk9PmQocixcImFmdGVySW5pdFwiKSkudGhlbigoKT0+cik7ZnVuY3Rpb24gbCh0KXtpZihhLmluY2x1ZGVzKHQpKXtyZXR1cm59aWYoaS5fcGx1Z2lucy5oYXModCl8fG8uaGFzKHQpKXtyZXR1cm59cmV0dXJuIHUodCkuY2F0Y2goZT0+e2NvbnNvbGUuZXJyb3IoT2JqZWN0KHNzW1wiYVwiXSkoXCJwbHVnaW5jb2xsZWN0aW9uLWxvYWQ6IEl0IHdhcyBub3QgcG9zc2libGUgdG8gbG9hZCB0aGUgcGx1Z2luLlwiKSx7cGx1Z2luOnR9KTt0aHJvdyBlfSl9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiB0LnJlZHVjZSgodCxuKT0+e2lmKCFuW2VdKXtyZXR1cm4gdH1pZihpLl9jb250ZXh0UGx1Z2lucy5oYXMobikpe3JldHVybiB0fXJldHVybiB0LnRoZW4obltlXS5iaW5kKG4pKX0sUHJvbWlzZS5yZXNvbHZlKCkpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIG5ldyBQcm9taXNlKHM9PntvLmFkZCh0KTtpZih0LnJlcXVpcmVzKXt0LnJlcXVpcmVzLmZvckVhY2goaT0+e2NvbnN0IG89aChpKTtpZih0LmlzQ29udGV4dFBsdWdpbiYmIW8uaXNDb250ZXh0UGx1Z2luKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwicGx1Z2luY29sbGVjdGlvbi1jb250ZXh0LXJlcXVpcmVkOiBDb250ZXh0IHBsdWdpbiBjYW4gbm90IHJlcXVpcmUgcGx1Z2luIHdoaWNoIGlzIG5vdCBhIGNvbnRleHQgcGx1Z2luXCIsbnVsbCx7cGx1Z2luOm8ubmFtZSxyZXF1aXJlZEJ5OnQubmFtZX0pfWlmKGUuaW5jbHVkZXMobykpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJwbHVnaW5jb2xsZWN0aW9uLXJlcXVpcmVkOiBDYW5ub3QgbG9hZCBhIHBsdWdpbiBiZWNhdXNlIG9uZSBvZiBpdHMgZGVwZW5kZW5jaWVzIGlzIGxpc3RlZCBpblwiK1widGhlIGByZW1vdmVQbHVnaW5zYCBvcHRpb24uXCIsbix7cGx1Z2luOm8ubmFtZSxyZXF1aXJlZEJ5OnQubmFtZX0pfWwobyl9KX1jb25zdCBhPWkuX2NvbnRleHRQbHVnaW5zLmdldCh0KXx8bmV3IHQobik7aS5fYWRkKHQsYSk7ci5wdXNoKGEpO3MoKX0pfWZ1bmN0aW9uIGgodCl7aWYodHlwZW9mIHQ9PVwiZnVuY3Rpb25cIil7cmV0dXJuIHR9cmV0dXJuIGkuX2F2YWlsYWJsZVBsdWdpbnMuZ2V0KHQpfWZ1bmN0aW9uIGYodCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgaSBvZiB0KXtpZighaChpKSl7ZS5wdXNoKGkpfX1yZXR1cm4gZS5sZW5ndGg/ZTpudWxsfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQubWFwKHQ9PmgodCkpLmZpbHRlcih0PT4hIXQpfX1kZXN0cm95KCl7Y29uc3QgdD1bXTtmb3IoY29uc3RbLGVdb2YgdGhpcyl7aWYodHlwZW9mIGUuZGVzdHJveT09XCJmdW5jdGlvblwiJiYhdGhpcy5fY29udGV4dFBsdWdpbnMuaGFzKGUpKXt0LnB1c2goZS5kZXN0cm95KCkpfX1yZXR1cm4gUHJvbWlzZS5hbGwodCl9X2FkZCh0LGUpe3RoaXMuX3BsdWdpbnMuc2V0KHQsZSk7Y29uc3QgaT10LnBsdWdpbk5hbWU7aWYoIWkpe3JldHVybn1pZih0aGlzLl9wbHVnaW5zLmhhcyhpKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInBsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLW5hbWUtY29uZmxpY3Q6IFR3byBwbHVnaW5zIHdpdGggdGhlIHNhbWUgbmFtZSB3ZXJlIGxvYWRlZC5cIixudWxsLHtwbHVnaW5OYW1lOmkscGx1Z2luMTp0aGlzLl9wbHVnaW5zLmdldChpKS5jb25zdHJ1Y3RvcixwbHVnaW4yOnR9KX10aGlzLl9wbHVnaW5zLnNldChpLGUpfX12cyh4cyxkcyk7aWYoIXdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlMpe3dpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlM9e319ZnVuY3Rpb24gQ3ModCxlKXtjb25zdCBpPXdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlNbdF18fCh3aW5kb3cuQ0tFRElUT1JfVFJBTlNMQVRJT05TW3RdPXt9KTtPYmplY3QuYXNzaWduKGksZSl9ZnVuY3Rpb24gQXModCxlKXtjb25zdCBpPVNzKCk7aWYoaT09PTEpe3Q9T2JqZWN0LmtleXMod2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OUylbMF19aWYoaT09PTB8fCFQcyh0LGUpKXtyZXR1cm4gZS5yZXBsYWNlKC8gXFxbY29udGV4dDogW15cXF1dK1xcXSQvLFwiXCIpfWNvbnN0IG49d2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OU1t0XTtyZXR1cm4gbltlXS5yZXBsYWNlKC8gXFxbY29udGV4dDogW15cXF1dK1xcXSQvLFwiXCIpfWZ1bmN0aW9uIFRzKCl7d2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OUz17fX1mdW5jdGlvbiBQcyh0LGUpe3JldHVybiB0IGluIHdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlMmJmUgaW4gd2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OU1t0XX1mdW5jdGlvbiBTcygpe3JldHVybiBPYmplY3Qua2V5cyh3aW5kb3cuQ0tFRElUT1JfVFJBTlNMQVRJT05TKS5sZW5ndGh9Y29uc3QgRXM9W1wiYXJcIixcImZhXCIsXCJoZVwiLFwia3VcIixcInVnXCJdO2NsYXNzIFJze2NvbnN0cnVjdG9yKHQ9e30pe3RoaXMudWlMYW5ndWFnZT10LnVpTGFuZ3VhZ2V8fFwiZW5cIjt0aGlzLmNvbnRlbnRMYW5ndWFnZT10LmNvbnRlbnRMYW5ndWFnZXx8dGhpcy51aUxhbmd1YWdlO3RoaXMudWlMYW5ndWFnZURpcmVjdGlvbj1Pcyh0aGlzLnVpTGFuZ3VhZ2UpO3RoaXMuY29udGVudExhbmd1YWdlRGlyZWN0aW9uPU9zKHRoaXMuY29udGVudExhbmd1YWdlKTt0aGlzLnQ9KC4uLnQpPT50aGlzLl90KC4uLnQpfWdldCBsYW5ndWFnZSgpe2NvbnNvbGUud2FybihcImxvY2FsZS1kZXByZWNhdGVkLWxhbmd1YWdlLXByb3BlcnR5OiBcIitcIlRoZSBMb2NhbGUjbGFuZ3VhZ2UgcHJvcGVydHkgaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZS4gXCIrXCJQbGVhc2UgdXNlICN1aUxhbmd1YWdlIGFuZCAjY29udGVudExhbmd1YWdlIHByb3BlcnRpZXMgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudWlMYW5ndWFnZX1fdCh0LGUpe2xldCBpPUFzKHRoaXMudWlMYW5ndWFnZSx0KTtpZihlKXtpPWkucmVwbGFjZSgvJShcXGQrKS9nLCh0LGkpPT5pPGUubGVuZ3RoP2VbaV06dCl9cmV0dXJuIGl9fWZ1bmN0aW9uIE9zKHQpe3JldHVybiBFcy5pbmNsdWRlcyh0KT9cInJ0bFwiOlwibHRyXCJ9Y2xhc3MgSXN7Y29uc3RydWN0b3IodCl7dGhpcy5jb25maWc9bmV3IEpyKHQsdGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0Q29uZmlnKTtjb25zdCBlPXRoaXMuY29uc3RydWN0b3IuYnVpbHRpblBsdWdpbnM7dGhpcy5jb25maWcuZGVmaW5lKFwicGx1Z2luc1wiLGUpO3RoaXMucGx1Z2lucz1uZXcgeHModGhpcyxlKTtjb25zdCBpPXRoaXMuY29uZmlnLmdldChcImxhbmd1YWdlXCIpfHx7fTt0aGlzLmxvY2FsZT1uZXcgUnMoe3VpTGFuZ3VhZ2U6dHlwZW9mIGk9PT1cInN0cmluZ1wiP2k6aS51aSxjb250ZW50TGFuZ3VhZ2U6dGhpcy5jb25maWcuZ2V0KFwibGFuZ3VhZ2UuY29udGVudFwiKX0pO3RoaXMudD10aGlzLmxvY2FsZS50O3RoaXMuZWRpdG9ycz1uZXcgeXM7dGhpcy5fY29udGV4dE93bmVyPW51bGx9aW5pdFBsdWdpbnMoKXtjb25zdCB0PXRoaXMuY29uZmlnLmdldChcInBsdWdpbnNcIil8fFtdO2Zvcihjb25zdCBlIG9mIHQpe2lmKHR5cGVvZiBlIT1cImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb250ZXh0LWluaXRwbHVnaW5zLWNvbnN0cnVjdG9yLW9ubHk6IE9ubHkgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBpcyBhbGxvd2VkIGFzIGEgY29udGV4dCBwbHVnaW4uXCIsbnVsbCx7UGx1Z2luOmV9KX1pZihlLmlzQ29udGV4dFBsdWdpbiE9PXRydWUpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb250ZXh0LWluaXRwbHVnaW5zLWludmFsaWQtcGx1Z2luOiBPbmx5IGEgcGx1Z2luIG1hcmtlZCBhcyBhIGNvbnRleHQgcGx1Z2luIGlzIGFsbG93ZWQgdG8gYmUgdXNlZCB3aXRoIGEgY29udGV4dC5cIixudWxsLHtQbHVnaW46ZX0pfX1yZXR1cm4gdGhpcy5wbHVnaW5zLmluaXQodCl9ZGVzdHJveSgpe3JldHVybiBQcm9taXNlLmFsbChBcnJheS5mcm9tKHRoaXMuZWRpdG9ycyx0PT50LmRlc3Ryb3koKSkpLnRoZW4oKCk9PnRoaXMucGx1Z2lucy5kZXN0cm95KCkpfV9hZGRFZGl0b3IodCxlKXtpZih0aGlzLl9jb250ZXh0T3duZXIpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb250ZXh0LWFkZEVkaXRvci1wcml2YXRlLWNvbnRleHQ6IENhbm5vdCBhZGQgbXVsdGlwbGUgZWRpdG9ycyB0byB0aGUgY29udGV4dCB3aGljaCBpcyBjcmVhdGVkIGJ5IHRoZSBlZGl0b3IuXCIpfXRoaXMuZWRpdG9ycy5hZGQodCk7aWYoZSl7dGhpcy5fY29udGV4dE93bmVyPXR9fV9yZW1vdmVFZGl0b3IodCl7aWYodGhpcy5lZGl0b3JzLmhhcyh0KSl7dGhpcy5lZGl0b3JzLnJlbW92ZSh0KX1pZih0aGlzLl9jb250ZXh0T3duZXI9PT10KXtyZXR1cm4gdGhpcy5kZXN0cm95KCl9cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfV9nZXRFZGl0b3JDb25maWcoKXtjb25zdCB0PXt9O2Zvcihjb25zdCBlIG9mIHRoaXMuY29uZmlnLm5hbWVzKCkpe2lmKCFbXCJwbHVnaW5zXCIsXCJyZW1vdmVQbHVnaW5zXCIsXCJleHRyYVBsdWdpbnNcIl0uaW5jbHVkZXMoZSkpe3RbZV09dGhpcy5jb25maWcuZ2V0KGUpfX1yZXR1cm4gdH1zdGF0aWMgY3JlYXRlKHQpe3JldHVybiBuZXcgUHJvbWlzZShlPT57Y29uc3QgaT1uZXcgdGhpcyh0KTtlKGkuaW5pdFBsdWdpbnMoKS50aGVuKCgpPT5pKSl9KX19ZnVuY3Rpb24gVnModCxlKXtjb25zdCBpPU1hdGgubWluKHQubGVuZ3RoLGUubGVuZ3RoKTtmb3IobGV0IG49MDtuPGk7bisrKXtpZih0W25dIT1lW25dKXtyZXR1cm4gbn19aWYodC5sZW5ndGg9PWUubGVuZ3RoKXtyZXR1cm5cInNhbWVcIn1lbHNlIGlmKHQubGVuZ3RoPGUubGVuZ3RoKXtyZXR1cm5cInByZWZpeFwifWVsc2V7cmV0dXJuXCJleHRlbnNpb25cIn19dmFyIE5zPTQ7ZnVuY3Rpb24gTXModCl7cmV0dXJuIEhyKHQsTnMpfXZhciBCcz1NcztjbGFzcyB6c3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRvY3VtZW50PXQ7dGhpcy5wYXJlbnQ9bnVsbH1nZXQgaW5kZXgoKXtsZXQgdDtpZighdGhpcy5wYXJlbnQpe3JldHVybiBudWxsfWlmKCh0PXRoaXMucGFyZW50LmdldENoaWxkSW5kZXgodGhpcykpPT0tMSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctbm9kZS1ub3QtZm91bmQtaW4tcGFyZW50OiBUaGUgbm9kZSdzIHBhcmVudCBkb2VzIG5vdCBjb250YWluIHRoaXMgbm9kZS5cIix0aGlzKX1yZXR1cm4gdH1nZXQgbmV4dFNpYmxpbmcoKXtjb25zdCB0PXRoaXMuaW5kZXg7cmV0dXJuIHQhPT1udWxsJiZ0aGlzLnBhcmVudC5nZXRDaGlsZCh0KzEpfHxudWxsfWdldCBwcmV2aW91c1NpYmxpbmcoKXtjb25zdCB0PXRoaXMuaW5kZXg7cmV0dXJuIHQhPT1udWxsJiZ0aGlzLnBhcmVudC5nZXRDaGlsZCh0LTEpfHxudWxsfWdldCByb290KCl7bGV0IHQ9dGhpczt3aGlsZSh0LnBhcmVudCl7dD10LnBhcmVudH1yZXR1cm4gdH1pc0F0dGFjaGVkKCl7cmV0dXJuIHRoaXMucm9vdC5pcyhcInJvb3RFbGVtZW50XCIpfWdldFBhdGgoKXtjb25zdCB0PVtdO2xldCBlPXRoaXM7d2hpbGUoZS5wYXJlbnQpe3QudW5zaGlmdChlLmluZGV4KTtlPWUucGFyZW50fXJldHVybiB0fWdldEFuY2VzdG9ycyh0PXtpbmNsdWRlU2VsZjpmYWxzZSxwYXJlbnRGaXJzdDpmYWxzZX0pe2NvbnN0IGU9W107bGV0IGk9dC5pbmNsdWRlU2VsZj90aGlzOnRoaXMucGFyZW50O3doaWxlKGkpe2VbdC5wYXJlbnRGaXJzdD9cInB1c2hcIjpcInVuc2hpZnRcIl0oaSk7aT1pLnBhcmVudH1yZXR1cm4gZX1nZXRDb21tb25BbmNlc3Rvcih0LGU9e30pe2NvbnN0IGk9dGhpcy5nZXRBbmNlc3RvcnMoZSk7Y29uc3Qgbj10LmdldEFuY2VzdG9ycyhlKTtsZXQgbz0wO3doaWxlKGlbb109PW5bb10mJmlbb10pe28rK31yZXR1cm4gbz09PTA/bnVsbDppW28tMV19aXNCZWZvcmUodCl7aWYodGhpcz09dCl7cmV0dXJuIGZhbHNlfWlmKHRoaXMucm9vdCE9PXQucm9vdCl7cmV0dXJuIGZhbHNlfWNvbnN0IGU9dGhpcy5nZXRQYXRoKCk7Y29uc3QgaT10LmdldFBhdGgoKTtjb25zdCBuPVZzKGUsaSk7c3dpdGNoKG4pe2Nhc2VcInByZWZpeFwiOnJldHVybiB0cnVlO2Nhc2VcImV4dGVuc2lvblwiOnJldHVybiBmYWxzZTtkZWZhdWx0OnJldHVybiBlW25dPGlbbl19fWlzQWZ0ZXIodCl7aWYodGhpcz09dCl7cmV0dXJuIGZhbHNlfWlmKHRoaXMucm9vdCE9PXQucm9vdCl7cmV0dXJuIGZhbHNlfXJldHVybiF0aGlzLmlzQmVmb3JlKHQpfV9yZW1vdmUoKXt0aGlzLnBhcmVudC5fcmVtb3ZlQ2hpbGRyZW4odGhpcy5pbmRleCl9X2ZpcmVDaGFuZ2UodCxlKXt0aGlzLmZpcmUoXCJjaGFuZ2U6XCIrdCxlKTtpZih0aGlzLnBhcmVudCl7dGhpcy5wYXJlbnQuX2ZpcmVDaGFuZ2UodCxlKX19dG9KU09OKCl7Y29uc3QgdD1Ccyh0aGlzKTtkZWxldGUgdC5wYXJlbnQ7cmV0dXJuIHR9aXModCl7cmV0dXJuIHQ9PVwibm9kZVwifHx0PT1cInZpZXc6bm9kZVwifX12cyh6cyxkcyk7Y2xhc3MgTHMgZXh0ZW5kcyB6c3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpO3RoaXMuX3RleHREYXRhPWV9aXModCl7cmV0dXJuIHQ9PVwidGV4dFwifHx0PT1cInZpZXc6dGV4dFwifHxzdXBlci5pcyh0KX1nZXQgZGF0YSgpe3JldHVybiB0aGlzLl90ZXh0RGF0YX1nZXQgX2RhdGEoKXtyZXR1cm4gdGhpcy5kYXRhfXNldCBfZGF0YSh0KXt0aGlzLl9maXJlQ2hhbmdlKFwidGV4dFwiLHRoaXMpO3RoaXMuX3RleHREYXRhPXR9aXNTaW1pbGFyKHQpe2lmKCEodCBpbnN0YW5jZW9mIExzKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0aGlzPT09dHx8dGhpcy5kYXRhPT09dC5kYXRhfV9jbG9uZSgpe3JldHVybiBuZXcgTHModGhpcy5kb2N1bWVudCx0aGlzLmRhdGEpfX1jbGFzcyBGc3tjb25zdHJ1Y3Rvcih0LGUsaSl7dGhpcy50ZXh0Tm9kZT10O2lmKGU8MHx8ZT50LmRhdGEubGVuZ3RoKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy10ZXh0cHJveHktd3Jvbmctb2Zmc2V0aW50ZXh0OiBHaXZlbiBvZmZzZXRJblRleHQgdmFsdWUgaXMgaW5jb3JyZWN0LlwiLHRoaXMpfWlmKGk8MHx8ZStpPnQuZGF0YS5sZW5ndGgpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXRleHRwcm94eS13cm9uZy1sZW5ndGg6IEdpdmVuIGxlbmd0aCB2YWx1ZSBpcyBpbmNvcnJlY3QuXCIsdGhpcyl9dGhpcy5kYXRhPXQuZGF0YS5zdWJzdHJpbmcoZSxlK2kpO3RoaXMub2Zmc2V0SW5UZXh0PWV9Z2V0IG9mZnNldFNpemUoKXtyZXR1cm4gdGhpcy5kYXRhLmxlbmd0aH1nZXQgaXNQYXJ0aWFsKCl7cmV0dXJuIHRoaXMuZGF0YS5sZW5ndGghPT10aGlzLnRleHROb2RlLmRhdGEubGVuZ3RofWdldCBwYXJlbnQoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5wYXJlbnR9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5yb290fWdldCBkb2N1bWVudCgpe3JldHVybiB0aGlzLnRleHROb2RlLmRvY3VtZW50fWlzKHQpe3JldHVybiB0PT1cInRleHRQcm94eVwifHx0PT1cInZpZXc6dGV4dFByb3h5XCJ9Z2V0QW5jZXN0b3JzKHQ9e2luY2x1ZGVTZWxmOmZhbHNlLHBhcmVudEZpcnN0OmZhbHNlfSl7Y29uc3QgZT1bXTtsZXQgaT10LmluY2x1ZGVTZWxmP3RoaXMudGV4dE5vZGU6dGhpcy5wYXJlbnQ7d2hpbGUoaSE9PW51bGwpe2VbdC5wYXJlbnRGaXJzdD9cInB1c2hcIjpcInVuc2hpZnRcIl0oaSk7aT1pLnBhcmVudH1yZXR1cm4gZX19ZnVuY3Rpb24gRHModCl7Y29uc3QgZT1uZXcgTWFwO2Zvcihjb25zdCBpIGluIHQpe2Uuc2V0KGksdFtpXSl9cmV0dXJuIGV9ZnVuY3Rpb24ganModCl7cmV0dXJuISEodCYmdFtTeW1ib2wuaXRlcmF0b3JdKX1mdW5jdGlvbiBIcyh0KXtpZihqcyh0KSl7cmV0dXJuIG5ldyBNYXAodCl9ZWxzZXtyZXR1cm4gRHModCl9fWNsYXNzIFdze2NvbnN0cnVjdG9yKC4uLnQpe3RoaXMuX3BhdHRlcm5zPVtdO3RoaXMuYWRkKC4uLnQpfWFkZCguLi50KXtmb3IobGV0IGUgb2YgdCl7aWYodHlwZW9mIGU9PVwic3RyaW5nXCJ8fGUgaW5zdGFuY2VvZiBSZWdFeHApe2U9e25hbWU6ZX19aWYoZS5jbGFzc2VzJiYodHlwZW9mIGUuY2xhc3Nlcz09XCJzdHJpbmdcInx8ZS5jbGFzc2VzIGluc3RhbmNlb2YgUmVnRXhwKSl7ZS5jbGFzc2VzPVtlLmNsYXNzZXNdfXRoaXMuX3BhdHRlcm5zLnB1c2goZSl9fW1hdGNoKC4uLnQpe2Zvcihjb25zdCBlIG9mIHQpe2Zvcihjb25zdCB0IG9mIHRoaXMuX3BhdHRlcm5zKXtjb25zdCBpPXFzKGUsdCk7aWYoaSl7cmV0dXJue2VsZW1lbnQ6ZSxwYXR0ZXJuOnQsbWF0Y2g6aX19fX1yZXR1cm4gbnVsbH1tYXRjaEFsbCguLi50KXtjb25zdCBlPVtdO2Zvcihjb25zdCBpIG9mIHQpe2Zvcihjb25zdCB0IG9mIHRoaXMuX3BhdHRlcm5zKXtjb25zdCBuPXFzKGksdCk7aWYobil7ZS5wdXNoKHtlbGVtZW50OmkscGF0dGVybjp0LG1hdGNoOm59KX19fXJldHVybiBlLmxlbmd0aD4wP2U6bnVsbH1nZXRFbGVtZW50TmFtZSgpe2lmKHRoaXMuX3BhdHRlcm5zLmxlbmd0aCE9PTEpe3JldHVybiBudWxsfWNvbnN0IHQ9dGhpcy5fcGF0dGVybnNbMF07Y29uc3QgZT10Lm5hbWU7cmV0dXJuIHR5cGVvZiB0IT1cImZ1bmN0aW9uXCImJmUmJiEoZSBpbnN0YW5jZW9mIFJlZ0V4cCk/ZTpudWxsfX1mdW5jdGlvbiBxcyh0LGUpe2lmKHR5cGVvZiBlPT1cImZ1bmN0aW9uXCIpe3JldHVybiBlKHQpfWNvbnN0IGk9e307aWYoZS5uYW1lKXtpLm5hbWU9VXMoZS5uYW1lLHQubmFtZSk7aWYoIWkubmFtZSl7cmV0dXJuIG51bGx9fWlmKGUuYXR0cmlidXRlcyl7aS5hdHRyaWJ1dGVzPSRzKGUuYXR0cmlidXRlcyx0KTtpZighaS5hdHRyaWJ1dGVzKXtyZXR1cm4gbnVsbH19aWYoZS5jbGFzc2VzKXtpLmNsYXNzZXM9R3MoZS5jbGFzc2VzLHQpO2lmKCFpLmNsYXNzZXMpe3JldHVybiBmYWxzZX19aWYoZS5zdHlsZXMpe2kuc3R5bGVzPUtzKGUuc3R5bGVzLHQpO2lmKCFpLnN0eWxlcyl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gaX1mdW5jdGlvbiBVcyh0LGUpe2lmKHQgaW5zdGFuY2VvZiBSZWdFeHApe3JldHVybiB0LnRlc3QoZSl9cmV0dXJuIHQ9PT1lfWZ1bmN0aW9uICRzKHQsZSl7Y29uc3QgaT1bXTtmb3IoY29uc3QgbiBpbiB0KXtjb25zdCBvPXRbbl07aWYoZS5oYXNBdHRyaWJ1dGUobikpe2NvbnN0IHQ9ZS5nZXRBdHRyaWJ1dGUobik7aWYobz09PXRydWUpe2kucHVzaChuKX1lbHNlIGlmKG8gaW5zdGFuY2VvZiBSZWdFeHApe2lmKG8udGVzdCh0KSl7aS5wdXNoKG4pfWVsc2V7cmV0dXJuIG51bGx9fWVsc2UgaWYodD09PW8pe2kucHVzaChuKX1lbHNle3JldHVybiBudWxsfX1lbHNle3JldHVybiBudWxsfX1yZXR1cm4gaX1mdW5jdGlvbiBHcyh0LGUpe2NvbnN0IGk9W107Zm9yKGNvbnN0IG4gb2YgdCl7aWYobiBpbnN0YW5jZW9mIFJlZ0V4cCl7Y29uc3QgdD1lLmdldENsYXNzTmFtZXMoKTtmb3IoY29uc3QgZSBvZiB0KXtpZihuLnRlc3QoZSkpe2kucHVzaChlKX19aWYoaS5sZW5ndGg9PT0wKXtyZXR1cm4gbnVsbH19ZWxzZSBpZihlLmhhc0NsYXNzKG4pKXtpLnB1c2gobil9ZWxzZXtyZXR1cm4gbnVsbH19cmV0dXJuIGl9ZnVuY3Rpb24gS3ModCxlKXtjb25zdCBpPVtdO2Zvcihjb25zdCBuIGluIHQpe2NvbnN0IG89dFtuXTtpZihlLmhhc1N0eWxlKG4pKXtjb25zdCB0PWUuZ2V0U3R5bGUobik7aWYobyBpbnN0YW5jZW9mIFJlZ0V4cCl7aWYoby50ZXN0KHQpKXtpLnB1c2gobil9ZWxzZXtyZXR1cm4gbnVsbH19ZWxzZSBpZih0PT09byl7aS5wdXNoKG4pfWVsc2V7cmV0dXJuIG51bGx9fWVsc2V7cmV0dXJuIG51bGx9fXJldHVybiBpfXZhciBKcz1cIltvYmplY3QgU3ltYm9sXVwiO2Z1bmN0aW9uIFlzKHQpe3JldHVybiB0eXBlb2YgdD09XCJzeW1ib2xcInx8VCh0KSYmXyh0KT09SnN9dmFyIFFzPVlzO3ZhciBYcz0vXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFpzPS9eXFx3KiQvO2Z1bmN0aW9uIHRhKHQsZSl7aWYoSmUodCkpe3JldHVybiBmYWxzZX12YXIgaT10eXBlb2YgdDtpZihpPT1cIm51bWJlclwifHxpPT1cInN5bWJvbFwifHxpPT1cImJvb2xlYW5cInx8dD09bnVsbHx8UXModCkpe3JldHVybiB0cnVlfXJldHVybiBacy50ZXN0KHQpfHwhWHMudGVzdCh0KXx8ZSE9bnVsbCYmdCBpbiBPYmplY3QoZSl9dmFyIGVhPXRhO3ZhciBpYT1cIkV4cGVjdGVkIGEgZnVuY3Rpb25cIjtmdW5jdGlvbiBuYSh0LGUpe2lmKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCJ8fGUhPW51bGwmJnR5cGVvZiBlIT1cImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoaWEpfXZhciBpPWZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLG89ZT9lLmFwcGx5KHRoaXMsbik6blswXSxyPWkuY2FjaGU7aWYoci5oYXMobykpe3JldHVybiByLmdldChvKX12YXIgcz10LmFwcGx5KHRoaXMsbik7aS5jYWNoZT1yLnNldChvLHMpfHxyO3JldHVybiBzfTtpLmNhY2hlPW5ldyhuYS5DYWNoZXx8X2UpO3JldHVybiBpfW5hLkNhY2hlPV9lO3ZhciBvYT1uYTt2YXIgcmE9NTAwO2Z1bmN0aW9uIHNhKHQpe3ZhciBlPW9hKHQsKGZ1bmN0aW9uKHQpe2lmKGkuc2l6ZT09PXJhKXtpLmNsZWFyKCl9cmV0dXJuIHR9KSk7dmFyIGk9ZS5jYWNoZTtyZXR1cm4gZX12YXIgYWE9c2E7dmFyIGNhPS9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdfCg/PSg/OlxcLnxcXFtcXF0pKD86XFwufFxcW1xcXXwkKSkvZzt2YXIgbGE9L1xcXFwoXFxcXCk/L2c7dmFyIGRhPWFhKChmdW5jdGlvbih0KXt2YXIgZT1bXTtpZih0LmNoYXJDb2RlQXQoMCk9PT00Nil7ZS5wdXNoKFwiXCIpfXQucmVwbGFjZShjYSwoZnVuY3Rpb24odCxpLG4sbyl7ZS5wdXNoKG4/by5yZXBsYWNlKGxhLFwiJDFcIik6aXx8dCl9KSk7cmV0dXJuIGV9KSk7dmFyIHVhPWRhO2Z1bmN0aW9uIGhhKHQsZSl7dmFyIGk9LTEsbj10PT1udWxsPzA6dC5sZW5ndGgsbz1BcnJheShuKTt3aGlsZSgrK2k8bil7b1tpXT1lKHRbaV0saSx0KX1yZXR1cm4gb312YXIgZmE9aGE7dmFyIGdhPTEvMDt2YXIgbWE9cj9yLnByb3RvdHlwZTp1bmRlZmluZWQscGE9bWE/bWEudG9TdHJpbmc6dW5kZWZpbmVkO2Z1bmN0aW9uIGJhKHQpe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtyZXR1cm4gdH1pZihKZSh0KSl7cmV0dXJuIGZhKHQsYmEpK1wiXCJ9aWYoUXModCkpe3JldHVybiBwYT9wYS5jYWxsKHQpOlwiXCJ9dmFyIGU9dCtcIlwiO3JldHVybiBlPT1cIjBcIiYmMS90PT0tZ2E/XCItMFwiOmV9dmFyIHdhPWJhO2Z1bmN0aW9uIGthKHQpe3JldHVybiB0PT1udWxsP1wiXCI6d2EodCl9dmFyIF9hPWthO2Z1bmN0aW9uIHZhKHQsZSl7aWYoSmUodCkpe3JldHVybiB0fXJldHVybiBlYSh0LGUpP1t0XTp1YShfYSh0KSl9dmFyIHlhPXZhO2Z1bmN0aW9uIHhhKHQpe3ZhciBlPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4gZT90W2UtMV06dW5kZWZpbmVkfXZhciBDYT14YTt2YXIgQWE9MS8wO2Z1bmN0aW9uIFRhKHQpe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wifHxRcyh0KSl7cmV0dXJuIHR9dmFyIGU9dCtcIlwiO3JldHVybiBlPT1cIjBcIiYmMS90PT0tQWE/XCItMFwiOmV9dmFyIFBhPVRhO2Z1bmN0aW9uIFNhKHQsZSl7ZT15YShlLHQpO3ZhciBpPTAsbj1lLmxlbmd0aDt3aGlsZSh0IT1udWxsJiZpPG4pe3Q9dFtQYShlW2krK10pXX1yZXR1cm4gaSYmaT09bj90OnVuZGVmaW5lZH12YXIgRWE9U2E7ZnVuY3Rpb24gUmEodCxlLGkpe3ZhciBuPS0xLG89dC5sZW5ndGg7aWYoZTwwKXtlPS1lPm8/MDpvK2V9aT1pPm8/bzppO2lmKGk8MCl7aSs9b31vPWU+aT8wOmktZT4+PjA7ZT4+Pj0wO3ZhciByPUFycmF5KG8pO3doaWxlKCsrbjxvKXtyW25dPXRbbitlXX1yZXR1cm4gcn12YXIgT2E9UmE7ZnVuY3Rpb24gSWEodCxlKXtyZXR1cm4gZS5sZW5ndGg8Mj90OkVhKHQsT2EoZSwwLC0xKSl9dmFyIFZhPUlhO2Z1bmN0aW9uIE5hKHQsZSl7ZT15YShlLHQpO3Q9VmEodCxlKTtyZXR1cm4gdD09bnVsbHx8ZGVsZXRlIHRbUGEoQ2EoZSkpXX12YXIgTWE9TmE7ZnVuY3Rpb24gQmEodCxlKXtyZXR1cm4gdD09bnVsbD90cnVlOk1hKHQsZSl9dmFyIHphPUJhO2Z1bmN0aW9uIExhKHQsZSxpKXt2YXIgbj10PT1udWxsP3VuZGVmaW5lZDpFYSh0LGUpO3JldHVybiBuPT09dW5kZWZpbmVkP2k6bn12YXIgRmE9TGE7ZnVuY3Rpb24gRGEodCxlLGkpe2lmKGkhPT11bmRlZmluZWQmJiFMKHRbZV0saSl8fGk9PT11bmRlZmluZWQmJiEoZSBpbiB0KSl7T2UodCxlLGkpfX12YXIgamE9RGE7ZnVuY3Rpb24gSGEodCl7cmV0dXJuIGZ1bmN0aW9uKGUsaSxuKXt2YXIgbz0tMSxyPU9iamVjdChlKSxzPW4oZSksYT1zLmxlbmd0aDt3aGlsZShhLS0pe3ZhciBjPXNbdD9hOisrb107aWYoaShyW2NdLGMscik9PT1mYWxzZSl7YnJlYWt9fXJldHVybiBlfX12YXIgV2E9SGE7dmFyIHFhPVdhKCk7dmFyIFVhPXFhO2Z1bmN0aW9uICRhKHQpe3JldHVybiBUKHQpJiZRaSh0KX12YXIgR2E9JGE7ZnVuY3Rpb24gS2EodCxlKXtpZihlPT09XCJjb25zdHJ1Y3RvclwiJiZ0eXBlb2YgdFtlXT09PVwiZnVuY3Rpb25cIil7cmV0dXJufWlmKGU9PVwiX19wcm90b19fXCIpe3JldHVybn1yZXR1cm4gdFtlXX12YXIgSmE9S2E7ZnVuY3Rpb24gWWEodCl7cmV0dXJuIHplKHQsZG4odCkpfXZhciBRYT1ZYTtmdW5jdGlvbiBYYSh0LGUsaSxuLG8scixzKXt2YXIgYT1KYSh0LGkpLGM9SmEoZSxpKSxsPXMuZ2V0KGMpO2lmKGwpe2phKHQsaSxsKTtyZXR1cm59dmFyIGQ9cj9yKGEsYyxpK1wiXCIsdCxlLHMpOnVuZGVmaW5lZDt2YXIgdT1kPT09dW5kZWZpbmVkO2lmKHUpe3ZhciBoPUplKGMpLGY9IWgmJk9iamVjdChZZVtcImFcIl0pKGMpLGc9IWgmJiFmJiZCaShjKTtkPWM7aWYoaHx8Znx8Zyl7aWYoSmUoYSkpe2Q9YX1lbHNlIGlmKEdhKGEpKXtkPW1uKGEpfWVsc2UgaWYoZil7dT1mYWxzZTtkPU9iamVjdChmbltcImFcIl0pKGMsdHJ1ZSl9ZWxzZSBpZihnKXt1PWZhbHNlO2Q9VG8oYyx0cnVlKX1lbHNle2Q9W119fWVsc2UgaWYoTihjKXx8R2UoYykpe2Q9YTtpZihHZShhKSl7ZD1RYShhKX1lbHNlIGlmKCFjdChhKXx8Z3QoYSkpe2Q9WG8oYyl9fWVsc2V7dT1mYWxzZX19aWYodSl7cy5zZXQoYyxkKTtvKGQsYyxuLHIscyk7c1tcImRlbGV0ZVwiXShjKX1qYSh0LGksZCl9dmFyIFphPVhhO2Z1bmN0aW9uIHRjKHQsZSxpLG4sbyl7aWYodD09PWUpe3JldHVybn1VYShlLChmdW5jdGlvbihyLHMpe298fChvPW5ldyBBZSk7aWYoY3Qocikpe1phKHQsZSxzLGksdGMsbixvKX1lbHNle3ZhciBhPW4/bihKYSh0LHMpLHIscytcIlwiLHQsZSxvKTp1bmRlZmluZWQ7aWYoYT09PXVuZGVmaW5lZCl7YT1yfWphKHQscyxhKX19KSxkbil9dmFyIGVjPXRjO2Z1bmN0aW9uIGljKHQpe3JldHVybiB0fXZhciBuYz1pYztmdW5jdGlvbiBvYyh0LGUsaSl7c3dpdGNoKGkubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHQuY2FsbChlKTtjYXNlIDE6cmV0dXJuIHQuY2FsbChlLGlbMF0pO2Nhc2UgMjpyZXR1cm4gdC5jYWxsKGUsaVswXSxpWzFdKTtjYXNlIDM6cmV0dXJuIHQuY2FsbChlLGlbMF0saVsxXSxpWzJdKX1yZXR1cm4gdC5hcHBseShlLGkpfXZhciByYz1vYzt2YXIgc2M9TWF0aC5tYXg7ZnVuY3Rpb24gYWModCxlLGkpe2U9c2MoZT09PXVuZGVmaW5lZD90Lmxlbmd0aC0xOmUsMCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLG89LTEscj1zYyhuLmxlbmd0aC1lLDApLHM9QXJyYXkocik7d2hpbGUoKytvPHIpe3Nbb109bltlK29dfW89LTE7dmFyIGE9QXJyYXkoZSsxKTt3aGlsZSgrK288ZSl7YVtvXT1uW29dfWFbZV09aShzKTtyZXR1cm4gcmModCx0aGlzLGEpfX12YXIgY2M9YWM7ZnVuY3Rpb24gbGModCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fXZhciBkYz1sYzt2YXIgdWM9IUVlP25jOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIEVlKHQsXCJ0b1N0cmluZ1wiLHtjb25maWd1cmFibGU6dHJ1ZSxlbnVtZXJhYmxlOmZhbHNlLHZhbHVlOmRjKGUpLHdyaXRhYmxlOnRydWV9KX07dmFyIGhjPXVjO3ZhciBmYz04MDAsZ2M9MTY7dmFyIG1jPURhdGUubm93O2Z1bmN0aW9uIHBjKHQpe3ZhciBlPTAsaT0wO3JldHVybiBmdW5jdGlvbigpe3ZhciBuPW1jKCksbz1nYy0obi1pKTtpPW47aWYobz4wKXtpZigrK2U+PWZjKXtyZXR1cm4gYXJndW1lbnRzWzBdfX1lbHNle2U9MH1yZXR1cm4gdC5hcHBseSh1bmRlZmluZWQsYXJndW1lbnRzKX19dmFyIGJjPXBjO3ZhciB3Yz1iYyhoYyk7dmFyIGtjPXdjO2Z1bmN0aW9uIF9jKHQsZSl7cmV0dXJuIGtjKGNjKHQsZSxuYyksdCtcIlwiKX12YXIgdmM9X2M7ZnVuY3Rpb24geWModCxlLGkpe2lmKCFjdChpKSl7cmV0dXJuIGZhbHNlfXZhciBuPXR5cGVvZiBlO2lmKG49PVwibnVtYmVyXCI/UWkoaSkmJnRpKGUsaS5sZW5ndGgpOm49PVwic3RyaW5nXCImJmUgaW4gaSl7cmV0dXJuIEwoaVtlXSx0KX1yZXR1cm4gZmFsc2V9dmFyIHhjPXljO2Z1bmN0aW9uIENjKHQpe3JldHVybiB2YygoZnVuY3Rpb24oZSxpKXt2YXIgbj0tMSxvPWkubGVuZ3RoLHI9bz4xP2lbby0xXTp1bmRlZmluZWQscz1vPjI/aVsyXTp1bmRlZmluZWQ7cj10Lmxlbmd0aD4zJiZ0eXBlb2Ygcj09XCJmdW5jdGlvblwiPyhvLS0scik6dW5kZWZpbmVkO2lmKHMmJnhjKGlbMF0saVsxXSxzKSl7cj1vPDM/dW5kZWZpbmVkOnI7bz0xfWU9T2JqZWN0KGUpO3doaWxlKCsrbjxvKXt2YXIgYT1pW25dO2lmKGEpe3QoZSxhLG4scil9fXJldHVybiBlfSkpfXZhciBBYz1DYzt2YXIgVGM9QWMoKGZ1bmN0aW9uKHQsZSxpKXtlYyh0LGUsaSl9KSk7dmFyIFBjPVRjO2Z1bmN0aW9uIFNjKHQsZSxpLG4pe2lmKCFjdCh0KSl7cmV0dXJuIHR9ZT15YShlLHQpO3ZhciBvPS0xLHI9ZS5sZW5ndGgscz1yLTEsYT10O3doaWxlKGEhPW51bGwmJisrbzxyKXt2YXIgYz1QYShlW29dKSxsPWk7aWYobyE9cyl7dmFyIGQ9YVtjXTtsPW4/bihkLGMsYSk6dW5kZWZpbmVkO2lmKGw9PT11bmRlZmluZWQpe2w9Y3QoZCk/ZDp0aShlW28rMV0pP1tdOnt9fX1NZShhLGMsbCk7YT1hW2NdfXJldHVybiB0fXZhciBFYz1TYztmdW5jdGlvbiBSYyh0LGUsaSl7cmV0dXJuIHQ9PW51bGw/dDpFYyh0LGUsaSl9dmFyIE9jPVJjO2NsYXNzIElje2NvbnN0cnVjdG9yKHQpe3RoaXMuX3N0eWxlcz17fTt0aGlzLl9zdHlsZVByb2Nlc3Nvcj10fWdldCBpc0VtcHR5KCl7Y29uc3QgdD1PYmplY3QuZW50cmllcyh0aGlzLl9zdHlsZXMpO2NvbnN0IGU9QXJyYXkuZnJvbSh0KTtyZXR1cm4hZS5sZW5ndGh9Z2V0IHNpemUoKXtpZih0aGlzLmlzRW1wdHkpe3JldHVybiAwfXJldHVybiB0aGlzLmdldFN0eWxlTmFtZXMoKS5sZW5ndGh9c2V0VG8odCl7dGhpcy5jbGVhcigpO2NvbnN0IGU9QXJyYXkuZnJvbShOYyh0KS5lbnRyaWVzKCkpO2Zvcihjb25zdFt0LGldb2YgZSl7dGhpcy5fc3R5bGVQcm9jZXNzb3IudG9Ob3JtYWxpemVkRm9ybSh0LGksdGhpcy5fc3R5bGVzKX19aGFzKHQpe2lmKHRoaXMuaXNFbXB0eSl7cmV0dXJuIGZhbHNlfWNvbnN0IGU9dGhpcy5fc3R5bGVQcm9jZXNzb3IuZ2V0UmVkdWNlZEZvcm0odCx0aGlzLl9zdHlsZXMpO2NvbnN0IGk9ZS5maW5kKChbZV0pPT5lPT09dCk7cmV0dXJuIEFycmF5LmlzQXJyYXkoaSl9c2V0KHQsZSl7aWYoY3QodCkpe2Zvcihjb25zdFtlLGldb2YgT2JqZWN0LmVudHJpZXModCkpe3RoaXMuX3N0eWxlUHJvY2Vzc29yLnRvTm9ybWFsaXplZEZvcm0oZSxpLHRoaXMuX3N0eWxlcyl9fWVsc2V7dGhpcy5fc3R5bGVQcm9jZXNzb3IudG9Ob3JtYWxpemVkRm9ybSh0LGUsdGhpcy5fc3R5bGVzKX19cmVtb3ZlKHQpe2NvbnN0IGU9TWModCk7emEodGhpcy5fc3R5bGVzLGUpO2RlbGV0ZSB0aGlzLl9zdHlsZXNbdF07dGhpcy5fY2xlYW5FbXB0eU9iamVjdHNPblBhdGgoZSl9Z2V0Tm9ybWFsaXplZCh0KXtyZXR1cm4gdGhpcy5fc3R5bGVQcm9jZXNzb3IuZ2V0Tm9ybWFsaXplZCh0LHRoaXMuX3N0eWxlcyl9dG9TdHJpbmcoKXtpZih0aGlzLmlzRW1wdHkpe3JldHVyblwiXCJ9cmV0dXJuIHRoaXMuX2dldFN0eWxlc0VudHJpZXMoKS5tYXAodD0+dC5qb2luKFwiOlwiKSkuc29ydCgpLmpvaW4oXCI7XCIpK1wiO1wifWdldEFzU3RyaW5nKHQpe2lmKHRoaXMuaXNFbXB0eSl7cmV0dXJufWlmKHRoaXMuX3N0eWxlc1t0XSYmIWN0KHRoaXMuX3N0eWxlc1t0XSkpe3JldHVybiB0aGlzLl9zdHlsZXNbdF19Y29uc3QgZT10aGlzLl9zdHlsZVByb2Nlc3Nvci5nZXRSZWR1Y2VkRm9ybSh0LHRoaXMuX3N0eWxlcyk7Y29uc3QgaT1lLmZpbmQoKFtlXSk9PmU9PT10KTtpZihBcnJheS5pc0FycmF5KGkpKXtyZXR1cm4gaVsxXX19Z2V0U3R5bGVOYW1lcygpe2lmKHRoaXMuaXNFbXB0eSl7cmV0dXJuW119Y29uc3QgdD10aGlzLl9nZXRTdHlsZXNFbnRyaWVzKCk7cmV0dXJuIHQubWFwKChbdF0pPT50KX1jbGVhcigpe3RoaXMuX3N0eWxlcz17fX1fZ2V0U3R5bGVzRW50cmllcygpe2NvbnN0IHQ9W107Y29uc3QgZT1PYmplY3Qua2V5cyh0aGlzLl9zdHlsZXMpO2Zvcihjb25zdCBpIG9mIGUpe3QucHVzaCguLi50aGlzLl9zdHlsZVByb2Nlc3Nvci5nZXRSZWR1Y2VkRm9ybShpLHRoaXMuX3N0eWxlcykpfXJldHVybiB0fV9jbGVhbkVtcHR5T2JqZWN0c09uUGF0aCh0KXtjb25zdCBlPXQuc3BsaXQoXCIuXCIpO2NvbnN0IGk9ZS5sZW5ndGg+MTtpZighaSl7cmV0dXJufWNvbnN0IG49ZS5zcGxpY2UoMCxlLmxlbmd0aC0xKS5qb2luKFwiLlwiKTtjb25zdCBvPUZhKHRoaXMuX3N0eWxlcyxuKTtpZighbyl7cmV0dXJufWNvbnN0IHI9IUFycmF5LmZyb20oT2JqZWN0LmtleXMobykpLmxlbmd0aDtpZihyKXt0aGlzLnJlbW92ZShuKX19fWNsYXNzIFZje2NvbnN0cnVjdG9yKCl7dGhpcy5fbm9ybWFsaXplcnM9bmV3IE1hcDt0aGlzLl9leHRyYWN0b3JzPW5ldyBNYXA7dGhpcy5fcmVkdWNlcnM9bmV3IE1hcDt0aGlzLl9jb25zdW1hYmxlcz1uZXcgTWFwfXRvTm9ybWFsaXplZEZvcm0odCxlLGkpe2lmKGN0KGUpKXtCYyhpLE1jKHQpLGUpO3JldHVybn1pZih0aGlzLl9ub3JtYWxpemVycy5oYXModCkpe2NvbnN0IG49dGhpcy5fbm9ybWFsaXplcnMuZ2V0KHQpO2NvbnN0e3BhdGg6byx2YWx1ZTpyfT1uKGUpO0JjKGksbyxyKX1lbHNle0JjKGksdCxlKX19Z2V0Tm9ybWFsaXplZCh0LGUpe2lmKCF0KXtyZXR1cm4gUGMoe30sZSl9aWYoZVt0XSE9PXVuZGVmaW5lZCl7cmV0dXJuIGVbdF19aWYodGhpcy5fZXh0cmFjdG9ycy5oYXModCkpe2NvbnN0IGk9dGhpcy5fZXh0cmFjdG9ycy5nZXQodCk7aWYodHlwZW9mIGk9PT1cInN0cmluZ1wiKXtyZXR1cm4gRmEoZSxpKX1jb25zdCBuPWkodCxlKTtpZihuKXtyZXR1cm4gbn19cmV0dXJuIEZhKGUsTWModCkpfWdldFJlZHVjZWRGb3JtKHQsZSl7Y29uc3QgaT10aGlzLmdldE5vcm1hbGl6ZWQodCxlKTtpZihpPT09dW5kZWZpbmVkKXtyZXR1cm5bXX1pZih0aGlzLl9yZWR1Y2Vycy5oYXModCkpe2NvbnN0IGU9dGhpcy5fcmVkdWNlcnMuZ2V0KHQpO3JldHVybiBlKGkpfXJldHVybltbdCxpXV19Z2V0UmVsYXRlZFN0eWxlcyh0KXtyZXR1cm4gdGhpcy5fY29uc3VtYWJsZXMuZ2V0KHQpfHxbXX1zZXROb3JtYWxpemVyKHQsZSl7dGhpcy5fbm9ybWFsaXplcnMuc2V0KHQsZSl9c2V0RXh0cmFjdG9yKHQsZSl7dGhpcy5fZXh0cmFjdG9ycy5zZXQodCxlKX1zZXRSZWR1Y2VyKHQsZSl7dGhpcy5fcmVkdWNlcnMuc2V0KHQsZSl9c2V0U3R5bGVSZWxhdGlvbih0LGUpe3RoaXMuX21hcFN0eWxlTmFtZXModCxlKTtmb3IoY29uc3QgaSBvZiBlKXt0aGlzLl9tYXBTdHlsZU5hbWVzKGksW3RdKX19X21hcFN0eWxlTmFtZXModCxlKXtpZighdGhpcy5fY29uc3VtYWJsZXMuaGFzKHQpKXt0aGlzLl9jb25zdW1hYmxlcy5zZXQodCxbXSl9dGhpcy5fY29uc3VtYWJsZXMuZ2V0KHQpLnB1c2goLi4uZSl9fWZ1bmN0aW9uIE5jKHQpe2xldCBlPW51bGw7bGV0IGk9MDtsZXQgbj0wO2xldCBvPW51bGw7Y29uc3Qgcj1uZXcgTWFwO2lmKHQ9PT1cIlwiKXtyZXR1cm4gcn1pZih0LmNoYXJBdCh0Lmxlbmd0aC0xKSE9XCI7XCIpe3Q9dCtcIjtcIn1mb3IobGV0IHM9MDtzPHQubGVuZ3RoO3MrKyl7Y29uc3QgYT10LmNoYXJBdChzKTtpZihlPT09bnVsbCl7c3dpdGNoKGEpe2Nhc2VcIjpcIjppZighbyl7bz10LnN1YnN0cihpLHMtaSk7bj1zKzF9YnJlYWs7Y2FzZSdcIic6Y2FzZVwiJ1wiOmU9YTticmVhaztjYXNlXCI7XCI6e2NvbnN0IGU9dC5zdWJzdHIobixzLW4pO2lmKG8pe3Iuc2V0KG8udHJpbSgpLGUudHJpbSgpKX1vPW51bGw7aT1zKzE7YnJlYWt9fX1lbHNlIGlmKGE9PT1lKXtlPW51bGx9fXJldHVybiByfWZ1bmN0aW9uIE1jKHQpe3JldHVybiB0LnJlcGxhY2UoXCItXCIsXCIuXCIpfWZ1bmN0aW9uIEJjKHQsZSxpKXtsZXQgbj1pO2lmKGN0KGkpKXtuPVBjKHt9LEZhKHQsZSksaSl9T2ModCxlLG4pfWNsYXNzIHpjIGV4dGVuZHMgenN7Y29uc3RydWN0b3IodCxlLGksbil7c3VwZXIodCk7dGhpcy5uYW1lPWU7dGhpcy5fYXR0cnM9TGMoaSk7dGhpcy5fY2hpbGRyZW49W107aWYobil7dGhpcy5faW5zZXJ0Q2hpbGQoMCxuKX10aGlzLl9jbGFzc2VzPW5ldyBTZXQ7aWYodGhpcy5fYXR0cnMuaGFzKFwiY2xhc3NcIikpe2NvbnN0IHQ9dGhpcy5fYXR0cnMuZ2V0KFwiY2xhc3NcIik7RmModGhpcy5fY2xhc3Nlcyx0KTt0aGlzLl9hdHRycy5kZWxldGUoXCJjbGFzc1wiKX10aGlzLl9zdHlsZXM9bmV3IEljKHRoaXMuZG9jdW1lbnQuc3R5bGVzUHJvY2Vzc29yKTtpZih0aGlzLl9hdHRycy5oYXMoXCJzdHlsZVwiKSl7dGhpcy5fc3R5bGVzLnNldFRvKHRoaXMuX2F0dHJzLmdldChcInN0eWxlXCIpKTt0aGlzLl9hdHRycy5kZWxldGUoXCJzdHlsZVwiKX10aGlzLl9jdXN0b21Qcm9wZXJ0aWVzPW5ldyBNYXB9Z2V0IGNoaWxkQ291bnQoKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4ubGVuZ3RofWdldCBpc0VtcHR5KCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmxlbmd0aD09PTB9aXModCxlPW51bGwpe2NvbnN0IGk9dC5yZXBsYWNlKC9edmlldzovLFwiXCIpO2lmKCFlKXtyZXR1cm4gaT09XCJlbGVtZW50XCJ8fGk9PXRoaXMubmFtZXx8c3VwZXIuaXModCl9ZWxzZXtyZXR1cm4gaT09XCJlbGVtZW50XCImJmU9PXRoaXMubmFtZX19Z2V0Q2hpbGQodCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW3RdfWdldENoaWxkSW5kZXgodCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmluZGV4T2YodCl9Z2V0Q2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5bU3ltYm9sLml0ZXJhdG9yXSgpfSpnZXRBdHRyaWJ1dGVLZXlzKCl7aWYodGhpcy5fY2xhc3Nlcy5zaXplPjApe3lpZWxkXCJjbGFzc1wifWlmKCF0aGlzLl9zdHlsZXMuaXNFbXB0eSl7eWllbGRcInN0eWxlXCJ9eWllbGQqdGhpcy5fYXR0cnMua2V5cygpfSpnZXRBdHRyaWJ1dGVzKCl7eWllbGQqdGhpcy5fYXR0cnMuZW50cmllcygpO2lmKHRoaXMuX2NsYXNzZXMuc2l6ZT4wKXt5aWVsZFtcImNsYXNzXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKV19aWYoIXRoaXMuX3N0eWxlcy5pc0VtcHR5KXt5aWVsZFtcInN0eWxlXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKV19fWdldEF0dHJpYnV0ZSh0KXtpZih0PT1cImNsYXNzXCIpe2lmKHRoaXMuX2NsYXNzZXMuc2l6ZT4wKXtyZXR1cm5bLi4udGhpcy5fY2xhc3Nlc10uam9pbihcIiBcIil9cmV0dXJuIHVuZGVmaW5lZH1pZih0PT1cInN0eWxlXCIpe2NvbnN0IHQ9dGhpcy5fc3R5bGVzLnRvU3RyaW5nKCk7cmV0dXJuIHQ9PVwiXCI/dW5kZWZpbmVkOnR9cmV0dXJuIHRoaXMuX2F0dHJzLmdldCh0KX1oYXNBdHRyaWJ1dGUodCl7aWYodD09XCJjbGFzc1wiKXtyZXR1cm4gdGhpcy5fY2xhc3Nlcy5zaXplPjB9aWYodD09XCJzdHlsZVwiKXtyZXR1cm4hdGhpcy5fc3R5bGVzLmlzRW1wdHl9cmV0dXJuIHRoaXMuX2F0dHJzLmhhcyh0KX1pc1NpbWlsYXIodCl7aWYoISh0IGluc3RhbmNlb2YgemMpKXtyZXR1cm4gZmFsc2V9aWYodGhpcz09PXQpe3JldHVybiB0cnVlfWlmKHRoaXMubmFtZSE9dC5uYW1lKXtyZXR1cm4gZmFsc2V9aWYodGhpcy5fYXR0cnMuc2l6ZSE9PXQuX2F0dHJzLnNpemV8fHRoaXMuX2NsYXNzZXMuc2l6ZSE9PXQuX2NsYXNzZXMuc2l6ZXx8dGhpcy5fc3R5bGVzLnNpemUhPT10Ll9zdHlsZXMuc2l6ZSl7cmV0dXJuIGZhbHNlfWZvcihjb25zdFtlLGldb2YgdGhpcy5fYXR0cnMpe2lmKCF0Ll9hdHRycy5oYXMoZSl8fHQuX2F0dHJzLmdldChlKSE9PWkpe3JldHVybiBmYWxzZX19Zm9yKGNvbnN0IGUgb2YgdGhpcy5fY2xhc3Nlcyl7aWYoIXQuX2NsYXNzZXMuaGFzKGUpKXtyZXR1cm4gZmFsc2V9fWZvcihjb25zdCBlIG9mIHRoaXMuX3N0eWxlcy5nZXRTdHlsZU5hbWVzKCkpe2lmKCF0Ll9zdHlsZXMuaGFzKGUpfHx0Ll9zdHlsZXMuZ2V0QXNTdHJpbmcoZSkhPT10aGlzLl9zdHlsZXMuZ2V0QXNTdHJpbmcoZSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9aGFzQ2xhc3MoLi4udCl7Zm9yKGNvbnN0IGUgb2YgdCl7aWYoIXRoaXMuX2NsYXNzZXMuaGFzKGUpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWdldENsYXNzTmFtZXMoKXtyZXR1cm4gdGhpcy5fY2xhc3Nlcy5rZXlzKCl9Z2V0U3R5bGUodCl7cmV0dXJuIHRoaXMuX3N0eWxlcy5nZXRBc1N0cmluZyh0KX1nZXROb3JtYWxpemVkU3R5bGUodCl7cmV0dXJuIHRoaXMuX3N0eWxlcy5nZXROb3JtYWxpemVkKHQpfWdldFN0eWxlTmFtZXMoKXtyZXR1cm4gdGhpcy5fc3R5bGVzLmdldFN0eWxlTmFtZXMoKX1oYXNTdHlsZSguLi50KXtmb3IoY29uc3QgZSBvZiB0KXtpZighdGhpcy5fc3R5bGVzLmhhcyhlKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1maW5kQW5jZXN0b3IoLi4udCl7Y29uc3QgZT1uZXcgV3MoLi4udCk7bGV0IGk9dGhpcy5wYXJlbnQ7d2hpbGUoaSl7aWYoZS5tYXRjaChpKSl7cmV0dXJuIGl9aT1pLnBhcmVudH1yZXR1cm4gbnVsbH1nZXRDdXN0b21Qcm9wZXJ0eSh0KXtyZXR1cm4gdGhpcy5fY3VzdG9tUHJvcGVydGllcy5nZXQodCl9KmdldEN1c3RvbVByb3BlcnRpZXMoKXt5aWVsZCp0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzLmVudHJpZXMoKX1nZXRJZGVudGl0eSgpe2NvbnN0IHQ9QXJyYXkuZnJvbSh0aGlzLl9jbGFzc2VzKS5zb3J0KCkuam9pbihcIixcIik7Y29uc3QgZT10aGlzLl9zdHlsZXMudG9TdHJpbmcoKTtjb25zdCBpPUFycmF5LmZyb20odGhpcy5fYXR0cnMpLm1hcCh0PT5gJHt0WzBdfT1cIiR7dFsxXX1cImApLnNvcnQoKS5qb2luKFwiIFwiKTtyZXR1cm4gdGhpcy5uYW1lKyh0PT1cIlwiP1wiXCI6YCBjbGFzcz1cIiR7dH1cImApKyghZT9cIlwiOmAgc3R5bGU9XCIke2V9XCJgKSsoaT09XCJcIj9cIlwiOmAgJHtpfWApfV9jbG9uZSh0PWZhbHNlKXtjb25zdCBlPVtdO2lmKHQpe2Zvcihjb25zdCBpIG9mIHRoaXMuZ2V0Q2hpbGRyZW4oKSl7ZS5wdXNoKGkuX2Nsb25lKHQpKX19Y29uc3QgaT1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmRvY3VtZW50LHRoaXMubmFtZSx0aGlzLl9hdHRycyxlKTtpLl9jbGFzc2VzPW5ldyBTZXQodGhpcy5fY2xhc3Nlcyk7aS5fc3R5bGVzLnNldCh0aGlzLl9zdHlsZXMuZ2V0Tm9ybWFsaXplZCgpKTtpLl9jdXN0b21Qcm9wZXJ0aWVzPW5ldyBNYXAodGhpcy5fY3VzdG9tUHJvcGVydGllcyk7aS5nZXRGaWxsZXJPZmZzZXQ9dGhpcy5nZXRGaWxsZXJPZmZzZXQ7cmV0dXJuIGl9X2FwcGVuZENoaWxkKHQpe3JldHVybiB0aGlzLl9pbnNlcnRDaGlsZCh0aGlzLmNoaWxkQ291bnQsdCl9X2luc2VydENoaWxkKHQsZSl7dGhpcy5fZmlyZUNoYW5nZShcImNoaWxkcmVuXCIsdGhpcyk7bGV0IGk9MDtjb25zdCBuPURjKHRoaXMuZG9jdW1lbnQsZSk7Zm9yKGNvbnN0IGUgb2Ygbil7aWYoZS5wYXJlbnQhPT1udWxsKXtlLl9yZW1vdmUoKX1lLnBhcmVudD10aGlzO2UuZG9jdW1lbnQ9dGhpcy5kb2N1bWVudDt0aGlzLl9jaGlsZHJlbi5zcGxpY2UodCwwLGUpO3QrKztpKyt9cmV0dXJuIGl9X3JlbW92ZUNoaWxkcmVuKHQsZT0xKXt0aGlzLl9maXJlQ2hhbmdlKFwiY2hpbGRyZW5cIix0aGlzKTtmb3IobGV0IGk9dDtpPHQrZTtpKyspe3RoaXMuX2NoaWxkcmVuW2ldLnBhcmVudD1udWxsfXJldHVybiB0aGlzLl9jaGlsZHJlbi5zcGxpY2UodCxlKX1fc2V0QXR0cmlidXRlKHQsZSl7ZT1TdHJpbmcoZSk7dGhpcy5fZmlyZUNoYW5nZShcImF0dHJpYnV0ZXNcIix0aGlzKTtpZih0PT1cImNsYXNzXCIpe0ZjKHRoaXMuX2NsYXNzZXMsZSl9ZWxzZSBpZih0PT1cInN0eWxlXCIpe3RoaXMuX3N0eWxlcy5zZXRUbyhlKX1lbHNle3RoaXMuX2F0dHJzLnNldCh0LGUpfX1fcmVtb3ZlQXR0cmlidXRlKHQpe3RoaXMuX2ZpcmVDaGFuZ2UoXCJhdHRyaWJ1dGVzXCIsdGhpcyk7aWYodD09XCJjbGFzc1wiKXtpZih0aGlzLl9jbGFzc2VzLnNpemU+MCl7dGhpcy5fY2xhc3Nlcy5jbGVhcigpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1pZih0PT1cInN0eWxlXCIpe2lmKCF0aGlzLl9zdHlsZXMuaXNFbXB0eSl7dGhpcy5fc3R5bGVzLmNsZWFyKCk7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfXJldHVybiB0aGlzLl9hdHRycy5kZWxldGUodCl9X2FkZENsYXNzKHQpe3RoaXMuX2ZpcmVDaGFuZ2UoXCJhdHRyaWJ1dGVzXCIsdGhpcyk7dD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO3QuZm9yRWFjaCh0PT50aGlzLl9jbGFzc2VzLmFkZCh0KSl9X3JlbW92ZUNsYXNzKHQpe3RoaXMuX2ZpcmVDaGFuZ2UoXCJhdHRyaWJ1dGVzXCIsdGhpcyk7dD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO3QuZm9yRWFjaCh0PT50aGlzLl9jbGFzc2VzLmRlbGV0ZSh0KSl9X3NldFN0eWxlKHQsZSl7dGhpcy5fZmlyZUNoYW5nZShcImF0dHJpYnV0ZXNcIix0aGlzKTt0aGlzLl9zdHlsZXMuc2V0KHQsZSl9X3JlbW92ZVN0eWxlKHQpe3RoaXMuX2ZpcmVDaGFuZ2UoXCJhdHRyaWJ1dGVzXCIsdGhpcyk7dD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO3QuZm9yRWFjaCh0PT50aGlzLl9zdHlsZXMucmVtb3ZlKHQpKX1fc2V0Q3VzdG9tUHJvcGVydHkodCxlKXt0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzLnNldCh0LGUpfV9yZW1vdmVDdXN0b21Qcm9wZXJ0eSh0KXtyZXR1cm4gdGhpcy5fY3VzdG9tUHJvcGVydGllcy5kZWxldGUodCl9fWZ1bmN0aW9uIExjKHQpe3Q9SHModCk7Zm9yKGNvbnN0W2UsaV1vZiB0KXtpZihpPT09bnVsbCl7dC5kZWxldGUoZSl9ZWxzZSBpZih0eXBlb2YgaSE9XCJzdHJpbmdcIil7dC5zZXQoZSxTdHJpbmcoaSkpfX1yZXR1cm4gdH1mdW5jdGlvbiBGYyh0LGUpe2NvbnN0IGk9ZS5zcGxpdCgvXFxzKy8pO3QuY2xlYXIoKTtpLmZvckVhY2goZT0+dC5hZGQoZSkpfWZ1bmN0aW9uIERjKHQsZSl7aWYodHlwZW9mIGU9PVwic3RyaW5nXCIpe3JldHVybltuZXcgTHModCxlKV19aWYoIWpzKGUpKXtlPVtlXX1yZXR1cm4gQXJyYXkuZnJvbShlKS5tYXAoZT0+e2lmKHR5cGVvZiBlPT1cInN0cmluZ1wiKXtyZXR1cm4gbmV3IExzKHQsZSl9aWYoZSBpbnN0YW5jZW9mIEZzKXtyZXR1cm4gbmV3IExzKHQsZS5kYXRhKX1yZXR1cm4gZX0pfWNsYXNzIGpjIGV4dGVuZHMgemN7Y29uc3RydWN0b3IodCxlLGksbil7c3VwZXIodCxlLGksbik7dGhpcy5nZXRGaWxsZXJPZmZzZXQ9SGN9aXModCxlPW51bGwpe2NvbnN0IGk9dCYmdC5yZXBsYWNlKC9edmlldzovLFwiXCIpO2lmKCFlKXtyZXR1cm4gaT09XCJjb250YWluZXJFbGVtZW50XCJ8fHN1cGVyLmlzKHQpfWVsc2V7cmV0dXJuIGk9PVwiY29udGFpbmVyRWxlbWVudFwiJiZlPT10aGlzLm5hbWV8fHN1cGVyLmlzKHQsZSl9fX1mdW5jdGlvbiBIYygpe2NvbnN0IHQ9Wy4uLnRoaXMuZ2V0Q2hpbGRyZW4oKV07Y29uc3QgZT10W3RoaXMuY2hpbGRDb3VudC0xXTtpZihlJiZlLmlzKFwiZWxlbWVudFwiLFwiYnJcIikpe3JldHVybiB0aGlzLmNoaWxkQ291bnR9Zm9yKGNvbnN0IGUgb2YgdCl7aWYoIWUuaXMoXCJ1aUVsZW1lbnRcIikpe3JldHVybiBudWxsfX1yZXR1cm4gdGhpcy5jaGlsZENvdW50fXZhciBXYz1BYygoZnVuY3Rpb24odCxlKXt6ZShlLGRuKGUpLHQpfSkpO3ZhciBxYz1XYztjb25zdCBVYz1TeW1ib2woXCJvYnNlcnZhYmxlUHJvcGVydGllc1wiKTtjb25zdCAkYz1TeW1ib2woXCJib3VuZE9ic2VydmFibGVzXCIpO2NvbnN0IEdjPVN5bWJvbChcImJvdW5kUHJvcGVydGllc1wiKTtjb25zdCBLYz17c2V0KHQsZSl7aWYoY3QodCkpe09iamVjdC5rZXlzKHQpLmZvckVhY2goZT0+e3RoaXMuc2V0KGUsdFtlXSl9LHRoaXMpO3JldHVybn1ZYyh0aGlzKTtjb25zdCBpPXRoaXNbVWNdO2lmKHQgaW4gdGhpcyYmIWkuaGFzKHQpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwib2JzZXJ2YWJsZS1zZXQtY2Fubm90LW92ZXJyaWRlOiBDYW5ub3Qgb3ZlcnJpZGUgYW4gZXhpc3RpbmcgcHJvcGVydHkuXCIsdGhpcyl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7ZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLGdldCgpe3JldHVybiBpLmdldCh0KX0sc2V0KGUpe2NvbnN0IG49aS5nZXQodCk7bGV0IG89dGhpcy5maXJlKFwic2V0OlwiK3QsdCxlLG4pO2lmKG89PT11bmRlZmluZWQpe289ZX1pZihuIT09b3x8IWkuaGFzKHQpKXtpLnNldCh0LG8pO3RoaXMuZmlyZShcImNoYW5nZTpcIit0LHQsbyxuKX19fSk7dGhpc1t0XT1lfSxiaW5kKC4uLnQpe2lmKCF0Lmxlbmd0aHx8IXRsKHQpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwib2JzZXJ2YWJsZS1iaW5kLXdyb25nLXByb3BlcnRpZXM6IEFsbCBwcm9wZXJ0aWVzIG11c3QgYmUgc3RyaW5ncy5cIix0aGlzKX1pZihuZXcgU2V0KHQpLnNpemUhPT10Lmxlbmd0aCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm9ic2VydmFibGUtYmluZC1kdXBsaWNhdGUtcHJvcGVydGllczogUHJvcGVydGllcyBtdXN0IGJlIHVuaXF1ZS5cIix0aGlzKX1ZYyh0aGlzKTtjb25zdCBlPXRoaXNbR2NdO3QuZm9yRWFjaCh0PT57aWYoZS5oYXModCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJvYnNlcnZhYmxlLWJpbmQtcmViaW5kOiBDYW5ub3QgYmluZCB0aGUgc2FtZSBwcm9wZXJ0eSBtb3JlIHRoYW4gb25jZS5cIix0aGlzKX19KTtjb25zdCBpPW5ldyBNYXA7dC5mb3JFYWNoKHQ9Pntjb25zdCBuPXtwcm9wZXJ0eTp0LHRvOltdfTtlLnNldCh0LG4pO2kuc2V0KHQsbil9KTtyZXR1cm57dG86UWMsdG9NYW55OlhjLF9vYnNlcnZhYmxlOnRoaXMsX2JpbmRQcm9wZXJ0aWVzOnQsX3RvOltdLF9iaW5kaW5nczppfX0sdW5iaW5kKC4uLnQpe2lmKCEoVWMgaW4gdGhpcykpe3JldHVybn1jb25zdCBlPXRoaXNbR2NdO2NvbnN0IGk9dGhpc1skY107aWYodC5sZW5ndGgpe2lmKCF0bCh0KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm9ic2VydmFibGUtdW5iaW5kLXdyb25nLXByb3BlcnRpZXM6IFByb3BlcnRpZXMgbXVzdCBiZSBzdHJpbmdzLlwiLHRoaXMpfXQuZm9yRWFjaCh0PT57Y29uc3Qgbj1lLmdldCh0KTtpZighbil7cmV0dXJufWxldCBvLHIscyxhO24udG8uZm9yRWFjaCh0PT57bz10WzBdO3I9dFsxXTtzPWkuZ2V0KG8pO2E9c1tyXTthLmRlbGV0ZShuKTtpZighYS5zaXplKXtkZWxldGUgc1tyXX1pZighT2JqZWN0LmtleXMocykubGVuZ3RoKXtpLmRlbGV0ZShvKTt0aGlzLnN0b3BMaXN0ZW5pbmcobyxcImNoYW5nZVwiKX19KTtlLmRlbGV0ZSh0KX0pfWVsc2V7aS5mb3JFYWNoKCh0LGUpPT57dGhpcy5zdG9wTGlzdGVuaW5nKGUsXCJjaGFuZ2VcIil9KTtpLmNsZWFyKCk7ZS5jbGVhcigpfX0sZGVjb3JhdGUodCl7Y29uc3QgZT10aGlzW3RdO2lmKCFlKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwib2JzZXJ2YWJsZW1peGluLWNhbm5vdC1kZWNvcmF0ZS11bmRlZmluZWQ6IENhbm5vdCBkZWNvcmF0ZSBhbiB1bmRlZmluZWQgbWV0aG9kLlwiLHRoaXMse29iamVjdDp0aGlzLG1ldGhvZE5hbWU6dH0pfXRoaXMub24odCwodCxpKT0+e3QucmV0dXJuPWUuYXBwbHkodGhpcyxpKX0pO3RoaXNbdF09ZnVuY3Rpb24oLi4uZSl7cmV0dXJuIHRoaXMuZmlyZSh0LGUpfX19O3FjKEtjLGRzKTt2YXIgSmM9S2M7ZnVuY3Rpb24gWWModCl7aWYoVWMgaW4gdCl7cmV0dXJufU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFVjLHt2YWx1ZTpuZXcgTWFwfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsJGMse3ZhbHVlOm5ldyBNYXB9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxHYyx7dmFsdWU6bmV3IE1hcH0pfWZ1bmN0aW9uIFFjKC4uLnQpe2NvbnN0IGU9ZWwoLi4udCk7Y29uc3QgaT1BcnJheS5mcm9tKHRoaXMuX2JpbmRpbmdzLmtleXMoKSk7Y29uc3Qgbj1pLmxlbmd0aDtpZighZS5jYWxsYmFjayYmZS50by5sZW5ndGg+MSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm9ic2VydmFibGUtYmluZC10by1uby1jYWxsYmFjazogQmluZGluZyBtdWx0aXBsZSBvYnNlcnZhYmxlcyBvbmx5IHBvc3NpYmxlIHdpdGggY2FsbGJhY2suXCIsdGhpcyl9aWYobj4xJiZlLmNhbGxiYWNrKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwib2JzZXJ2YWJsZS1iaW5kLXRvLWV4dHJhLWNhbGxiYWNrOiBDYW5ub3QgYmluZCBtdWx0aXBsZSBwcm9wZXJ0aWVzIGFuZCB1c2UgYSBjYWxsYmFjayBpbiBvbmUgYmluZGluZy5cIix0aGlzKX1lLnRvLmZvckVhY2godD0+e2lmKHQucHJvcGVydGllcy5sZW5ndGgmJnQucHJvcGVydGllcy5sZW5ndGghPT1uKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwib2JzZXJ2YWJsZS1iaW5kLXRvLXByb3BlcnRpZXMtbGVuZ3RoOiBUaGUgbnVtYmVyIG9mIHByb3BlcnRpZXMgbXVzdCBtYXRjaC5cIix0aGlzKX1pZighdC5wcm9wZXJ0aWVzLmxlbmd0aCl7dC5wcm9wZXJ0aWVzPXRoaXMuX2JpbmRQcm9wZXJ0aWVzfX0pO3RoaXMuX3RvPWUudG87aWYoZS5jYWxsYmFjayl7dGhpcy5fYmluZGluZ3MuZ2V0KGlbMF0pLmNhbGxiYWNrPWUuY2FsbGJhY2t9cmwodGhpcy5fb2JzZXJ2YWJsZSx0aGlzLl90byk7bmwodGhpcyk7dGhpcy5fYmluZFByb3BlcnRpZXMuZm9yRWFjaCh0PT57b2wodGhpcy5fb2JzZXJ2YWJsZSx0KX0pfWZ1bmN0aW9uIFhjKHQsZSxpKXtpZih0aGlzLl9iaW5kaW5ncy5zaXplPjEpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJvYnNlcnZhYmxlLWJpbmQtdG8tbWFueS1ub3Qtb25lLWJpbmRpbmc6IENhbm5vdCBiaW5kIG11bHRpcGxlIHByb3BlcnRpZXMgd2l0aCB0b01hbnkoKS5cIix0aGlzKX10aGlzLnRvKC4uLlpjKHQsZSksaSl9ZnVuY3Rpb24gWmModCxlKXtjb25zdCBpPXQubWFwKHQ9Plt0LGVdKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxpKX1mdW5jdGlvbiB0bCh0KXtyZXR1cm4gdC5ldmVyeSh0PT50eXBlb2YgdD09XCJzdHJpbmdcIil9ZnVuY3Rpb24gZWwoLi4udCl7aWYoIXQubGVuZ3RoKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwib2JzZXJ2YWJsZS1iaW5kLXRvLXBhcnNlLWVycm9yOiBJbnZhbGlkIGFyZ3VtZW50IHN5bnRheCBpbiBgdG8oKWAuXCIsbnVsbCl9Y29uc3QgZT17dG86W119O2xldCBpO2lmKHR5cGVvZiB0W3QubGVuZ3RoLTFdPT1cImZ1bmN0aW9uXCIpe2UuY2FsbGJhY2s9dC5wb3AoKX10LmZvckVhY2godD0+e2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtpLnByb3BlcnRpZXMucHVzaCh0KX1lbHNlIGlmKHR5cGVvZiB0PT1cIm9iamVjdFwiKXtpPXtvYnNlcnZhYmxlOnQscHJvcGVydGllczpbXX07ZS50by5wdXNoKGkpfWVsc2V7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm9ic2VydmFibGUtYmluZC10by1wYXJzZS1lcnJvcjogSW52YWxpZCBhcmd1bWVudCBzeW50YXggaW4gYHRvKClgLlwiLG51bGwpfX0pO3JldHVybiBlfWZ1bmN0aW9uIGlsKHQsZSxpLG4pe2NvbnN0IG89dFskY107Y29uc3Qgcj1vLmdldChpKTtjb25zdCBzPXJ8fHt9O2lmKCFzW25dKXtzW25dPW5ldyBTZXR9c1tuXS5hZGQoZSk7aWYoIXIpe28uc2V0KGkscyl9fWZ1bmN0aW9uIG5sKHQpe2xldCBlO3QuX2JpbmRpbmdzLmZvckVhY2goKGksbik9Pnt0Ll90by5mb3JFYWNoKG89PntlPW8ucHJvcGVydGllc1tpLmNhbGxiYWNrPzA6dC5fYmluZFByb3BlcnRpZXMuaW5kZXhPZihuKV07aS50by5wdXNoKFtvLm9ic2VydmFibGUsZV0pO2lsKHQuX29ic2VydmFibGUsaSxvLm9ic2VydmFibGUsZSl9KX0pfWZ1bmN0aW9uIG9sKHQsZSl7Y29uc3QgaT10W0djXTtjb25zdCBuPWkuZ2V0KGUpO2xldCBvO2lmKG4uY2FsbGJhY2spe289bi5jYWxsYmFjay5hcHBseSh0LG4udG8ubWFwKHQ9PnRbMF1bdFsxXV0pKX1lbHNle289bi50b1swXTtvPW9bMF1bb1sxXV19aWYodC5oYXNPd25Qcm9wZXJ0eShlKSl7dFtlXT1vfWVsc2V7dC5zZXQoZSxvKX19ZnVuY3Rpb24gcmwodCxlKXtlLmZvckVhY2goZT0+e2NvbnN0IGk9dFskY107bGV0IG47aWYoIWkuZ2V0KGUub2JzZXJ2YWJsZSkpe3QubGlzdGVuVG8oZS5vYnNlcnZhYmxlLFwiY2hhbmdlXCIsKG8scik9PntuPWkuZ2V0KGUub2JzZXJ2YWJsZSlbcl07aWYobil7bi5mb3JFYWNoKGU9PntvbCh0LGUucHJvcGVydHkpfSl9fSl9fSl9Y2xhc3Mgc2wgZXh0ZW5kcyBqY3tjb25zdHJ1Y3Rvcih0LGUsaSxuKXtzdXBlcih0LGUsaSxuKTt0aGlzLnNldChcImlzUmVhZE9ubHlcIixmYWxzZSk7dGhpcy5zZXQoXCJpc0ZvY3VzZWRcIixmYWxzZSk7dGhpcy5iaW5kKFwiaXNSZWFkT25seVwiKS50byh0KTt0aGlzLmJpbmQoXCJpc0ZvY3VzZWRcIikudG8odCxcImlzRm9jdXNlZFwiLGU9PmUmJnQuc2VsZWN0aW9uLmVkaXRhYmxlRWxlbWVudD09dGhpcyk7dGhpcy5saXN0ZW5Ubyh0LnNlbGVjdGlvbixcImNoYW5nZVwiLCgpPT57dGhpcy5pc0ZvY3VzZWQ9dC5pc0ZvY3VzZWQmJnQuc2VsZWN0aW9uLmVkaXRhYmxlRWxlbWVudD09dGhpc30pfWlzKHQsZT1udWxsKXtjb25zdCBpPXQmJnQucmVwbGFjZSgvXnZpZXc6LyxcIlwiKTtpZighZSl7cmV0dXJuIGk9PVwiZWRpdGFibGVFbGVtZW50XCJ8fHN1cGVyLmlzKHQpfWVsc2V7cmV0dXJuIGk9PVwiZWRpdGFibGVFbGVtZW50XCImJmU9PXRoaXMubmFtZXx8c3VwZXIuaXModCxlKX19ZGVzdHJveSgpe3RoaXMuc3RvcExpc3RlbmluZygpfX12cyhzbCxKYyk7Y29uc3QgYWw9U3ltYm9sKFwicm9vdE5hbWVcIik7Y2xhc3MgY2wgZXh0ZW5kcyBzbHtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQsZSk7dGhpcy5yb290TmFtZT1cIm1haW5cIn1pcyh0LGU9bnVsbCl7Y29uc3QgaT10LnJlcGxhY2UoL152aWV3Oi8sXCJcIik7aWYoIWUpe3JldHVybiBpPT1cInJvb3RFbGVtZW50XCJ8fHN1cGVyLmlzKHQpfWVsc2V7cmV0dXJuIGk9PVwicm9vdEVsZW1lbnRcIiYmZT09dGhpcy5uYW1lfHxzdXBlci5pcyh0LGUpfX1nZXQgcm9vdE5hbWUoKXtyZXR1cm4gdGhpcy5nZXRDdXN0b21Qcm9wZXJ0eShhbCl9c2V0IHJvb3ROYW1lKHQpe3RoaXMuX3NldEN1c3RvbVByb3BlcnR5KGFsLHQpfXNldCBfbmFtZSh0KXt0aGlzLm5hbWU9dH19Y2xhc3MgbGx7Y29uc3RydWN0b3IodD17fSl7aWYoIXQuYm91bmRhcmllcyYmIXQuc3RhcnRQb3NpdGlvbil7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctdHJlZS13YWxrZXItbm8tc3RhcnQtcG9zaXRpb246IE5laXRoZXIgYm91bmRhcmllcyBub3Igc3RhcnRpbmcgcG9zaXRpb24gaGF2ZSBiZWVuIGRlZmluZWQuXCIsbnVsbCl9aWYodC5kaXJlY3Rpb24mJnQuZGlyZWN0aW9uIT1cImZvcndhcmRcIiYmdC5kaXJlY3Rpb24hPVwiYmFja3dhcmRcIil7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctdHJlZS13YWxrZXItdW5rbm93bi1kaXJlY3Rpb246IE9ubHkgYGJhY2t3YXJkYCBhbmQgYGZvcndhcmRgIGRpcmVjdGlvbiBhbGxvd2VkLlwiLHQuc3RhcnRQb3NpdGlvbix7ZGlyZWN0aW9uOnQuZGlyZWN0aW9ufSl9dGhpcy5ib3VuZGFyaWVzPXQuYm91bmRhcmllc3x8bnVsbDtpZih0LnN0YXJ0UG9zaXRpb24pe3RoaXMucG9zaXRpb249ZGwuX2NyZWF0ZUF0KHQuc3RhcnRQb3NpdGlvbil9ZWxzZXt0aGlzLnBvc2l0aW9uPWRsLl9jcmVhdGVBdCh0LmJvdW5kYXJpZXNbdC5kaXJlY3Rpb249PVwiYmFja3dhcmRcIj9cImVuZFwiOlwic3RhcnRcIl0pfXRoaXMuZGlyZWN0aW9uPXQuZGlyZWN0aW9ufHxcImZvcndhcmRcIjt0aGlzLnNpbmdsZUNoYXJhY3RlcnM9ISF0LnNpbmdsZUNoYXJhY3RlcnM7dGhpcy5zaGFsbG93PSEhdC5zaGFsbG93O3RoaXMuaWdub3JlRWxlbWVudEVuZD0hIXQuaWdub3JlRWxlbWVudEVuZDt0aGlzLl9ib3VuZGFyeVN0YXJ0UGFyZW50PXRoaXMuYm91bmRhcmllcz90aGlzLmJvdW5kYXJpZXMuc3RhcnQucGFyZW50Om51bGw7dGhpcy5fYm91bmRhcnlFbmRQYXJlbnQ9dGhpcy5ib3VuZGFyaWVzP3RoaXMuYm91bmRhcmllcy5lbmQucGFyZW50Om51bGx9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpc31za2lwKHQpe2xldCBlLGksbjtkb3tuPXRoaXMucG9zaXRpb247KHtkb25lOmUsdmFsdWU6aX09dGhpcy5uZXh0KCkpfXdoaWxlKCFlJiZ0KGkpKTtpZighZSl7dGhpcy5wb3NpdGlvbj1ufX1uZXh0KCl7aWYodGhpcy5kaXJlY3Rpb249PVwiZm9yd2FyZFwiKXtyZXR1cm4gdGhpcy5fbmV4dCgpfWVsc2V7cmV0dXJuIHRoaXMuX3ByZXZpb3VzKCl9fV9uZXh0KCl7bGV0IHQ9dGhpcy5wb3NpdGlvbi5jbG9uZSgpO2NvbnN0IGU9dGhpcy5wb3NpdGlvbjtjb25zdCBpPXQucGFyZW50O2lmKGkucGFyZW50PT09bnVsbCYmdC5vZmZzZXQ9PT1pLmNoaWxkQ291bnQpe3JldHVybntkb25lOnRydWV9fWlmKGk9PT10aGlzLl9ib3VuZGFyeUVuZFBhcmVudCYmdC5vZmZzZXQ9PXRoaXMuYm91bmRhcmllcy5lbmQub2Zmc2V0KXtyZXR1cm57ZG9uZTp0cnVlfX1sZXQgbjtpZihpIGluc3RhbmNlb2YgTHMpe2lmKHQuaXNBdEVuZCl7dGhpcy5wb3NpdGlvbj1kbC5fY3JlYXRlQWZ0ZXIoaSk7cmV0dXJuIHRoaXMuX25leHQoKX1uPWkuZGF0YVt0Lm9mZnNldF19ZWxzZXtuPWkuZ2V0Q2hpbGQodC5vZmZzZXQpfWlmKG4gaW5zdGFuY2VvZiB6Yyl7aWYoIXRoaXMuc2hhbGxvdyl7dD1uZXcgZGwobiwwKX1lbHNle3Qub2Zmc2V0Kyt9dGhpcy5wb3NpdGlvbj10O3JldHVybiB0aGlzLl9mb3JtYXRSZXR1cm5WYWx1ZShcImVsZW1lbnRTdGFydFwiLG4sZSx0LDEpfWVsc2UgaWYobiBpbnN0YW5jZW9mIExzKXtpZih0aGlzLnNpbmdsZUNoYXJhY3RlcnMpe3Q9bmV3IGRsKG4sMCk7dGhpcy5wb3NpdGlvbj10O3JldHVybiB0aGlzLl9uZXh0KCl9ZWxzZXtsZXQgaT1uLmRhdGEubGVuZ3RoO2xldCBvO2lmKG49PXRoaXMuX2JvdW5kYXJ5RW5kUGFyZW50KXtpPXRoaXMuYm91bmRhcmllcy5lbmQub2Zmc2V0O289bmV3IEZzKG4sMCxpKTt0PWRsLl9jcmVhdGVBZnRlcihvKX1lbHNle289bmV3IEZzKG4sMCxuLmRhdGEubGVuZ3RoKTt0Lm9mZnNldCsrfXRoaXMucG9zaXRpb249dDtyZXR1cm4gdGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoXCJ0ZXh0XCIsbyxlLHQsaSl9fWVsc2UgaWYodHlwZW9mIG49PVwic3RyaW5nXCIpe2xldCBuO2lmKHRoaXMuc2luZ2xlQ2hhcmFjdGVycyl7bj0xfWVsc2V7Y29uc3QgZT1pPT09dGhpcy5fYm91bmRhcnlFbmRQYXJlbnQ/dGhpcy5ib3VuZGFyaWVzLmVuZC5vZmZzZXQ6aS5kYXRhLmxlbmd0aDtuPWUtdC5vZmZzZXR9Y29uc3Qgbz1uZXcgRnMoaSx0Lm9mZnNldCxuKTt0Lm9mZnNldCs9bjt0aGlzLnBvc2l0aW9uPXQ7cmV0dXJuIHRoaXMuX2Zvcm1hdFJldHVyblZhbHVlKFwidGV4dFwiLG8sZSx0LG4pfWVsc2V7dD1kbC5fY3JlYXRlQWZ0ZXIoaSk7dGhpcy5wb3NpdGlvbj10O2lmKHRoaXMuaWdub3JlRWxlbWVudEVuZCl7cmV0dXJuIHRoaXMuX25leHQoKX1lbHNle3JldHVybiB0aGlzLl9mb3JtYXRSZXR1cm5WYWx1ZShcImVsZW1lbnRFbmRcIixpLGUsdCl9fX1fcHJldmlvdXMoKXtsZXQgdD10aGlzLnBvc2l0aW9uLmNsb25lKCk7Y29uc3QgZT10aGlzLnBvc2l0aW9uO2NvbnN0IGk9dC5wYXJlbnQ7aWYoaS5wYXJlbnQ9PT1udWxsJiZ0Lm9mZnNldD09PTApe3JldHVybntkb25lOnRydWV9fWlmKGk9PXRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQmJnQub2Zmc2V0PT10aGlzLmJvdW5kYXJpZXMuc3RhcnQub2Zmc2V0KXtyZXR1cm57ZG9uZTp0cnVlfX1sZXQgbjtpZihpIGluc3RhbmNlb2YgTHMpe2lmKHQuaXNBdFN0YXJ0KXt0aGlzLnBvc2l0aW9uPWRsLl9jcmVhdGVCZWZvcmUoaSk7cmV0dXJuIHRoaXMuX3ByZXZpb3VzKCl9bj1pLmRhdGFbdC5vZmZzZXQtMV19ZWxzZXtuPWkuZ2V0Q2hpbGQodC5vZmZzZXQtMSl9aWYobiBpbnN0YW5jZW9mIHpjKXtpZighdGhpcy5zaGFsbG93KXt0PW5ldyBkbChuLG4uY2hpbGRDb3VudCk7dGhpcy5wb3NpdGlvbj10O2lmKHRoaXMuaWdub3JlRWxlbWVudEVuZCl7cmV0dXJuIHRoaXMuX3ByZXZpb3VzKCl9ZWxzZXtyZXR1cm4gdGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoXCJlbGVtZW50RW5kXCIsbixlLHQpfX1lbHNle3Qub2Zmc2V0LS07dGhpcy5wb3NpdGlvbj10O3JldHVybiB0aGlzLl9mb3JtYXRSZXR1cm5WYWx1ZShcImVsZW1lbnRTdGFydFwiLG4sZSx0LDEpfX1lbHNlIGlmKG4gaW5zdGFuY2VvZiBMcyl7aWYodGhpcy5zaW5nbGVDaGFyYWN0ZXJzKXt0PW5ldyBkbChuLG4uZGF0YS5sZW5ndGgpO3RoaXMucG9zaXRpb249dDtyZXR1cm4gdGhpcy5fcHJldmlvdXMoKX1lbHNle2xldCBpPW4uZGF0YS5sZW5ndGg7bGV0IG87aWYobj09dGhpcy5fYm91bmRhcnlTdGFydFBhcmVudCl7Y29uc3QgZT10aGlzLmJvdW5kYXJpZXMuc3RhcnQub2Zmc2V0O289bmV3IEZzKG4sZSxuLmRhdGEubGVuZ3RoLWUpO2k9by5kYXRhLmxlbmd0aDt0PWRsLl9jcmVhdGVCZWZvcmUobyl9ZWxzZXtvPW5ldyBGcyhuLDAsbi5kYXRhLmxlbmd0aCk7dC5vZmZzZXQtLX10aGlzLnBvc2l0aW9uPXQ7cmV0dXJuIHRoaXMuX2Zvcm1hdFJldHVyblZhbHVlKFwidGV4dFwiLG8sZSx0LGkpfX1lbHNlIGlmKHR5cGVvZiBuPT1cInN0cmluZ1wiKXtsZXQgbjtpZighdGhpcy5zaW5nbGVDaGFyYWN0ZXJzKXtjb25zdCBlPWk9PT10aGlzLl9ib3VuZGFyeVN0YXJ0UGFyZW50P3RoaXMuYm91bmRhcmllcy5zdGFydC5vZmZzZXQ6MDtuPXQub2Zmc2V0LWV9ZWxzZXtuPTF9dC5vZmZzZXQtPW47Y29uc3Qgbz1uZXcgRnMoaSx0Lm9mZnNldCxuKTt0aGlzLnBvc2l0aW9uPXQ7cmV0dXJuIHRoaXMuX2Zvcm1hdFJldHVyblZhbHVlKFwidGV4dFwiLG8sZSx0LG4pfWVsc2V7dD1kbC5fY3JlYXRlQmVmb3JlKGkpO3RoaXMucG9zaXRpb249dDtyZXR1cm4gdGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoXCJlbGVtZW50U3RhcnRcIixpLGUsdCwxKX19X2Zvcm1hdFJldHVyblZhbHVlKHQsZSxpLG4sbyl7aWYoZSBpbnN0YW5jZW9mIEZzKXtpZihlLm9mZnNldEluVGV4dCtlLmRhdGEubGVuZ3RoPT1lLnRleHROb2RlLmRhdGEubGVuZ3RoKXtpZih0aGlzLmRpcmVjdGlvbj09XCJmb3J3YXJkXCImJiEodGhpcy5ib3VuZGFyaWVzJiZ0aGlzLmJvdW5kYXJpZXMuZW5kLmlzRXF1YWwodGhpcy5wb3NpdGlvbikpKXtuPWRsLl9jcmVhdGVBZnRlcihlLnRleHROb2RlKTt0aGlzLnBvc2l0aW9uPW59ZWxzZXtpPWRsLl9jcmVhdGVBZnRlcihlLnRleHROb2RlKX19aWYoZS5vZmZzZXRJblRleHQ9PT0wKXtpZih0aGlzLmRpcmVjdGlvbj09XCJiYWNrd2FyZFwiJiYhKHRoaXMuYm91bmRhcmllcyYmdGhpcy5ib3VuZGFyaWVzLnN0YXJ0LmlzRXF1YWwodGhpcy5wb3NpdGlvbikpKXtuPWRsLl9jcmVhdGVCZWZvcmUoZS50ZXh0Tm9kZSk7dGhpcy5wb3NpdGlvbj1ufWVsc2V7aT1kbC5fY3JlYXRlQmVmb3JlKGUudGV4dE5vZGUpfX19cmV0dXJue2RvbmU6ZmFsc2UsdmFsdWU6e3R5cGU6dCxpdGVtOmUscHJldmlvdXNQb3NpdGlvbjppLG5leHRQb3NpdGlvbjpuLGxlbmd0aDpvfX19fWNsYXNzIGRse2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5wYXJlbnQ9dDt0aGlzLm9mZnNldD1lfWdldCBub2RlQWZ0ZXIoKXtpZih0aGlzLnBhcmVudC5pcyhcInRleHRcIikpe3JldHVybiBudWxsfXJldHVybiB0aGlzLnBhcmVudC5nZXRDaGlsZCh0aGlzLm9mZnNldCl8fG51bGx9Z2V0IG5vZGVCZWZvcmUoKXtpZih0aGlzLnBhcmVudC5pcyhcInRleHRcIikpe3JldHVybiBudWxsfXJldHVybiB0aGlzLnBhcmVudC5nZXRDaGlsZCh0aGlzLm9mZnNldC0xKXx8bnVsbH1nZXQgaXNBdFN0YXJ0KCl7cmV0dXJuIHRoaXMub2Zmc2V0PT09MH1nZXQgaXNBdEVuZCgpe2NvbnN0IHQ9dGhpcy5wYXJlbnQuaXMoXCJ0ZXh0XCIpP3RoaXMucGFyZW50LmRhdGEubGVuZ3RoOnRoaXMucGFyZW50LmNoaWxkQ291bnQ7cmV0dXJuIHRoaXMub2Zmc2V0PT09dH1nZXQgcm9vdCgpe3JldHVybiB0aGlzLnBhcmVudC5yb290fWdldCBlZGl0YWJsZUVsZW1lbnQoKXtsZXQgdD10aGlzLnBhcmVudDt3aGlsZSghKHQgaW5zdGFuY2VvZiBzbCkpe2lmKHQucGFyZW50KXt0PXQucGFyZW50fWVsc2V7cmV0dXJuIG51bGx9fXJldHVybiB0fWdldFNoaWZ0ZWRCeSh0KXtjb25zdCBlPWRsLl9jcmVhdGVBdCh0aGlzKTtjb25zdCBpPWUub2Zmc2V0K3Q7ZS5vZmZzZXQ9aTwwPzA6aTtyZXR1cm4gZX1nZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbih0LGU9e30pe2Uuc3RhcnRQb3NpdGlvbj10aGlzO2NvbnN0IGk9bmV3IGxsKGUpO2kuc2tpcCh0KTtyZXR1cm4gaS5wb3NpdGlvbn1nZXRBbmNlc3RvcnMoKXtpZih0aGlzLnBhcmVudC5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe3JldHVyblt0aGlzLnBhcmVudF19ZWxzZXtyZXR1cm4gdGhpcy5wYXJlbnQuZ2V0QW5jZXN0b3JzKHtpbmNsdWRlU2VsZjp0cnVlfSl9fWdldENvbW1vbkFuY2VzdG9yKHQpe2NvbnN0IGU9dGhpcy5nZXRBbmNlc3RvcnMoKTtjb25zdCBpPXQuZ2V0QW5jZXN0b3JzKCk7bGV0IG49MDt3aGlsZShlW25dPT1pW25dJiZlW25dKXtuKyt9cmV0dXJuIG49PT0wP251bGw6ZVtuLTFdfWlzKHQpe3JldHVybiB0PT1cInBvc2l0aW9uXCJ8fHQ9PVwidmlldzpwb3NpdGlvblwifWlzRXF1YWwodCl7cmV0dXJuIHRoaXMucGFyZW50PT10LnBhcmVudCYmdGhpcy5vZmZzZXQ9PXQub2Zmc2V0fWlzQmVmb3JlKHQpe3JldHVybiB0aGlzLmNvbXBhcmVXaXRoKHQpPT1cImJlZm9yZVwifWlzQWZ0ZXIodCl7cmV0dXJuIHRoaXMuY29tcGFyZVdpdGgodCk9PVwiYWZ0ZXJcIn1jb21wYXJlV2l0aCh0KXtpZih0aGlzLnJvb3QhPT10LnJvb3Qpe3JldHVyblwiZGlmZmVyZW50XCJ9aWYodGhpcy5pc0VxdWFsKHQpKXtyZXR1cm5cInNhbWVcIn1jb25zdCBlPXRoaXMucGFyZW50LmlzKFwibm9kZVwiKT90aGlzLnBhcmVudC5nZXRQYXRoKCk6W107Y29uc3QgaT10LnBhcmVudC5pcyhcIm5vZGVcIik/dC5wYXJlbnQuZ2V0UGF0aCgpOltdO2UucHVzaCh0aGlzLm9mZnNldCk7aS5wdXNoKHQub2Zmc2V0KTtjb25zdCBuPVZzKGUsaSk7c3dpdGNoKG4pe2Nhc2VcInByZWZpeFwiOnJldHVyblwiYmVmb3JlXCI7Y2FzZVwiZXh0ZW5zaW9uXCI6cmV0dXJuXCJhZnRlclwiO2RlZmF1bHQ6cmV0dXJuIGVbbl08aVtuXT9cImJlZm9yZVwiOlwiYWZ0ZXJcIn19Z2V0V2Fsa2VyKHQ9e30pe3Quc3RhcnRQb3NpdGlvbj10aGlzO3JldHVybiBuZXcgbGwodCl9Y2xvbmUoKXtyZXR1cm4gbmV3IGRsKHRoaXMucGFyZW50LHRoaXMub2Zmc2V0KX1zdGF0aWMgX2NyZWF0ZUF0KHQsZSl7aWYodCBpbnN0YW5jZW9mIGRsKXtyZXR1cm4gbmV3IHRoaXModC5wYXJlbnQsdC5vZmZzZXQpfWVsc2V7Y29uc3QgaT10O2lmKGU9PVwiZW5kXCIpe2U9aS5pcyhcInRleHRcIik/aS5kYXRhLmxlbmd0aDppLmNoaWxkQ291bnR9ZWxzZSBpZihlPT1cImJlZm9yZVwiKXtyZXR1cm4gdGhpcy5fY3JlYXRlQmVmb3JlKGkpfWVsc2UgaWYoZT09XCJhZnRlclwiKXtyZXR1cm4gdGhpcy5fY3JlYXRlQWZ0ZXIoaSl9ZWxzZSBpZihlIT09MCYmIWUpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LWNyZWF0ZVBvc2l0aW9uQXQtb2Zmc2V0LXJlcXVpcmVkOiBcIitcIlZpZXcjY3JlYXRlUG9zaXRpb25BdCgpIHJlcXVpcmVzIHRoZSBvZmZzZXQgd2hlbiB0aGUgZmlyc3QgcGFyYW1ldGVyIGlzIGEgdmlldyBpdGVtLlwiLGkpfXJldHVybiBuZXcgZGwoaSxlKX19c3RhdGljIF9jcmVhdGVBZnRlcih0KXtpZih0LmlzKFwidGV4dFByb3h5XCIpKXtyZXR1cm4gbmV3IGRsKHQudGV4dE5vZGUsdC5vZmZzZXRJblRleHQrdC5kYXRhLmxlbmd0aCl9aWYoIXQucGFyZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy1wb3NpdGlvbi1hZnRlci1yb290OiBZb3UgY2FuIG5vdCBtYWtlIHBvc2l0aW9uIGFmdGVyIHJvb3QuXCIsdCx7cm9vdDp0fSl9cmV0dXJuIG5ldyBkbCh0LnBhcmVudCx0LmluZGV4KzEpfXN0YXRpYyBfY3JlYXRlQmVmb3JlKHQpe2lmKHQuaXMoXCJ0ZXh0UHJveHlcIikpe3JldHVybiBuZXcgZGwodC50ZXh0Tm9kZSx0Lm9mZnNldEluVGV4dCl9aWYoIXQucGFyZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy1wb3NpdGlvbi1iZWZvcmUtcm9vdDogWW91IGNhbiBub3QgbWFrZSBwb3NpdGlvbiBiZWZvcmUgcm9vdC5cIix0LHtyb290OnR9KX1yZXR1cm4gbmV3IGRsKHQucGFyZW50LHQuaW5kZXgpfX1jbGFzcyB1bHtjb25zdHJ1Y3Rvcih0LGU9bnVsbCl7dGhpcy5zdGFydD10LmNsb25lKCk7dGhpcy5lbmQ9ZT9lLmNsb25lKCk6dC5jbG9uZSgpfSpbU3ltYm9sLml0ZXJhdG9yXSgpe3lpZWxkKm5ldyBsbCh7Ym91bmRhcmllczp0aGlzLGlnbm9yZUVsZW1lbnRFbmQ6dHJ1ZX0pfWdldCBpc0NvbGxhcHNlZCgpe3JldHVybiB0aGlzLnN0YXJ0LmlzRXF1YWwodGhpcy5lbmQpfWdldCBpc0ZsYXQoKXtyZXR1cm4gdGhpcy5zdGFydC5wYXJlbnQ9PT10aGlzLmVuZC5wYXJlbnR9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy5zdGFydC5yb290fWdldEVubGFyZ2VkKCl7bGV0IHQ9dGhpcy5zdGFydC5nZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbihobCx7ZGlyZWN0aW9uOlwiYmFja3dhcmRcIn0pO2xldCBlPXRoaXMuZW5kLmdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKGhsKTtpZih0LnBhcmVudC5pcyhcInRleHRcIikmJnQuaXNBdFN0YXJ0KXt0PWRsLl9jcmVhdGVCZWZvcmUodC5wYXJlbnQpfWlmKGUucGFyZW50LmlzKFwidGV4dFwiKSYmZS5pc0F0RW5kKXtlPWRsLl9jcmVhdGVBZnRlcihlLnBhcmVudCl9cmV0dXJuIG5ldyB1bCh0LGUpfWdldFRyaW1tZWQoKXtsZXQgdD10aGlzLnN0YXJ0LmdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKGhsKTtpZih0LmlzQWZ0ZXIodGhpcy5lbmQpfHx0LmlzRXF1YWwodGhpcy5lbmQpKXtyZXR1cm4gbmV3IHVsKHQsdCl9bGV0IGU9dGhpcy5lbmQuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oaGwse2RpcmVjdGlvbjpcImJhY2t3YXJkXCJ9KTtjb25zdCBpPXQubm9kZUFmdGVyO2NvbnN0IG49ZS5ub2RlQmVmb3JlO2lmKGkmJmkuaXMoXCJ0ZXh0XCIpKXt0PW5ldyBkbChpLDApfWlmKG4mJm4uaXMoXCJ0ZXh0XCIpKXtlPW5ldyBkbChuLG4uZGF0YS5sZW5ndGgpfXJldHVybiBuZXcgdWwodCxlKX1pc0VxdWFsKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnN0YXJ0LmlzRXF1YWwodC5zdGFydCkmJnRoaXMuZW5kLmlzRXF1YWwodC5lbmQpfWNvbnRhaW5zUG9zaXRpb24odCl7cmV0dXJuIHQuaXNBZnRlcih0aGlzLnN0YXJ0KSYmdC5pc0JlZm9yZSh0aGlzLmVuZCl9Y29udGFpbnNSYW5nZSh0LGU9ZmFsc2Upe2lmKHQuaXNDb2xsYXBzZWQpe2U9ZmFsc2V9Y29uc3QgaT10aGlzLmNvbnRhaW5zUG9zaXRpb24odC5zdGFydCl8fGUmJnRoaXMuc3RhcnQuaXNFcXVhbCh0LnN0YXJ0KTtjb25zdCBuPXRoaXMuY29udGFpbnNQb3NpdGlvbih0LmVuZCl8fGUmJnRoaXMuZW5kLmlzRXF1YWwodC5lbmQpO3JldHVybiBpJiZufWdldERpZmZlcmVuY2UodCl7Y29uc3QgZT1bXTtpZih0aGlzLmlzSW50ZXJzZWN0aW5nKHQpKXtpZih0aGlzLmNvbnRhaW5zUG9zaXRpb24odC5zdGFydCkpe2UucHVzaChuZXcgdWwodGhpcy5zdGFydCx0LnN0YXJ0KSl9aWYodGhpcy5jb250YWluc1Bvc2l0aW9uKHQuZW5kKSl7ZS5wdXNoKG5ldyB1bCh0LmVuZCx0aGlzLmVuZCkpfX1lbHNle2UucHVzaCh0aGlzLmNsb25lKCkpfXJldHVybiBlfWdldEludGVyc2VjdGlvbih0KXtpZih0aGlzLmlzSW50ZXJzZWN0aW5nKHQpKXtsZXQgZT10aGlzLnN0YXJ0O2xldCBpPXRoaXMuZW5kO2lmKHRoaXMuY29udGFpbnNQb3NpdGlvbih0LnN0YXJ0KSl7ZT10LnN0YXJ0fWlmKHRoaXMuY29udGFpbnNQb3NpdGlvbih0LmVuZCkpe2k9dC5lbmR9cmV0dXJuIG5ldyB1bChlLGkpfXJldHVybiBudWxsfWdldFdhbGtlcih0PXt9KXt0LmJvdW5kYXJpZXM9dGhpcztyZXR1cm4gbmV3IGxsKHQpfWdldENvbW1vbkFuY2VzdG9yKCl7cmV0dXJuIHRoaXMuc3RhcnQuZ2V0Q29tbW9uQW5jZXN0b3IodGhpcy5lbmQpfWdldENvbnRhaW5lZEVsZW1lbnQoKXtpZih0aGlzLmlzQ29sbGFwc2VkKXtyZXR1cm4gbnVsbH1sZXQgdD10aGlzLnN0YXJ0Lm5vZGVBZnRlcjtsZXQgZT10aGlzLmVuZC5ub2RlQmVmb3JlO2lmKHRoaXMuc3RhcnQucGFyZW50LmlzKFwidGV4dFwiKSYmdGhpcy5zdGFydC5pc0F0RW5kJiZ0aGlzLnN0YXJ0LnBhcmVudC5uZXh0U2libGluZyl7dD10aGlzLnN0YXJ0LnBhcmVudC5uZXh0U2libGluZ31pZih0aGlzLmVuZC5wYXJlbnQuaXMoXCJ0ZXh0XCIpJiZ0aGlzLmVuZC5pc0F0U3RhcnQmJnRoaXMuZW5kLnBhcmVudC5wcmV2aW91c1NpYmxpbmcpe2U9dGhpcy5lbmQucGFyZW50LnByZXZpb3VzU2libGluZ31pZih0JiZ0LmlzKFwiZWxlbWVudFwiKSYmdD09PWUpe3JldHVybiB0fXJldHVybiBudWxsfWNsb25lKCl7cmV0dXJuIG5ldyB1bCh0aGlzLnN0YXJ0LHRoaXMuZW5kKX0qZ2V0SXRlbXModD17fSl7dC5ib3VuZGFyaWVzPXRoaXM7dC5pZ25vcmVFbGVtZW50RW5kPXRydWU7Y29uc3QgZT1uZXcgbGwodCk7Zm9yKGNvbnN0IHQgb2YgZSl7eWllbGQgdC5pdGVtfX0qZ2V0UG9zaXRpb25zKHQ9e30pe3QuYm91bmRhcmllcz10aGlzO2NvbnN0IGU9bmV3IGxsKHQpO3lpZWxkIGUucG9zaXRpb247Zm9yKGNvbnN0IHQgb2YgZSl7eWllbGQgdC5uZXh0UG9zaXRpb259fWlzKHQpe3JldHVybiB0PT1cInJhbmdlXCJ8fHQ9PVwidmlldzpyYW5nZVwifWlzSW50ZXJzZWN0aW5nKHQpe3JldHVybiB0aGlzLnN0YXJ0LmlzQmVmb3JlKHQuZW5kKSYmdGhpcy5lbmQuaXNBZnRlcih0LnN0YXJ0KX1zdGF0aWMgX2NyZWF0ZUZyb21QYXJlbnRzQW5kT2Zmc2V0cyh0LGUsaSxuKXtyZXR1cm4gbmV3IHRoaXMobmV3IGRsKHQsZSksbmV3IGRsKGksbikpfXN0YXRpYyBfY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodCxlKXtjb25zdCBpPXQ7Y29uc3Qgbj10LmdldFNoaWZ0ZWRCeShlKTtyZXR1cm4gZT4wP25ldyB0aGlzKGksbik6bmV3IHRoaXMobixpKX1zdGF0aWMgX2NyZWF0ZUluKHQpe3JldHVybiB0aGlzLl9jcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHModCwwLHQsdC5jaGlsZENvdW50KX1zdGF0aWMgX2NyZWF0ZU9uKHQpe2NvbnN0IGU9dC5pcyhcInRleHRQcm94eVwiKT90Lm9mZnNldFNpemU6MTtyZXR1cm4gdGhpcy5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZGwuX2NyZWF0ZUJlZm9yZSh0KSxlKX19ZnVuY3Rpb24gaGwodCl7aWYodC5pdGVtLmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKXx8dC5pdGVtLmlzKFwidWlFbGVtZW50XCIpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gZmwodCl7bGV0IGU9MDtmb3IoY29uc3QgaSBvZiB0KXtlKyt9cmV0dXJuIGV9Y2xhc3MgZ2x7Y29uc3RydWN0b3IodD1udWxsLGUsaSl7dGhpcy5fcmFuZ2VzPVtdO3RoaXMuX2xhc3RSYW5nZUJhY2t3YXJkPWZhbHNlO3RoaXMuX2lzRmFrZT1mYWxzZTt0aGlzLl9mYWtlU2VsZWN0aW9uTGFiZWw9XCJcIjt0aGlzLnNldFRvKHQsZSxpKX1nZXQgaXNGYWtlKCl7cmV0dXJuIHRoaXMuX2lzRmFrZX1nZXQgZmFrZVNlbGVjdGlvbkxhYmVsKCl7cmV0dXJuIHRoaXMuX2Zha2VTZWxlY3Rpb25MYWJlbH1nZXQgYW5jaG9yKCl7aWYoIXRoaXMuX3Jhbmdlcy5sZW5ndGgpe3JldHVybiBudWxsfWNvbnN0IHQ9dGhpcy5fcmFuZ2VzW3RoaXMuX3Jhbmdlcy5sZW5ndGgtMV07Y29uc3QgZT10aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD90LmVuZDp0LnN0YXJ0O3JldHVybiBlLmNsb25lKCl9Z2V0IGZvY3VzKCl7aWYoIXRoaXMuX3Jhbmdlcy5sZW5ndGgpe3JldHVybiBudWxsfWNvbnN0IHQ9dGhpcy5fcmFuZ2VzW3RoaXMuX3Jhbmdlcy5sZW5ndGgtMV07Y29uc3QgZT10aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD90LnN0YXJ0OnQuZW5kO3JldHVybiBlLmNsb25lKCl9Z2V0IGlzQ29sbGFwc2VkKCl7cmV0dXJuIHRoaXMucmFuZ2VDb3VudD09PTEmJnRoaXMuX3Jhbmdlc1swXS5pc0NvbGxhcHNlZH1nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9yYW5nZXMubGVuZ3RofWdldCBpc0JhY2t3YXJkKCl7cmV0dXJuIXRoaXMuaXNDb2xsYXBzZWQmJnRoaXMuX2xhc3RSYW5nZUJhY2t3YXJkfWdldCBlZGl0YWJsZUVsZW1lbnQoKXtpZih0aGlzLmFuY2hvcil7cmV0dXJuIHRoaXMuYW5jaG9yLmVkaXRhYmxlRWxlbWVudH1yZXR1cm4gbnVsbH0qZ2V0UmFuZ2VzKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmFuZ2VzKXt5aWVsZCB0LmNsb25lKCl9fWdldEZpcnN0UmFuZ2UoKXtsZXQgdD1udWxsO2Zvcihjb25zdCBlIG9mIHRoaXMuX3Jhbmdlcyl7aWYoIXR8fGUuc3RhcnQuaXNCZWZvcmUodC5zdGFydCkpe3Q9ZX19cmV0dXJuIHQ/dC5jbG9uZSgpOm51bGx9Z2V0TGFzdFJhbmdlKCl7bGV0IHQ9bnVsbDtmb3IoY29uc3QgZSBvZiB0aGlzLl9yYW5nZXMpe2lmKCF0fHxlLmVuZC5pc0FmdGVyKHQuZW5kKSl7dD1lfX1yZXR1cm4gdD90LmNsb25lKCk6bnVsbH1nZXRGaXJzdFBvc2l0aW9uKCl7Y29uc3QgdD10aGlzLmdldEZpcnN0UmFuZ2UoKTtyZXR1cm4gdD90LnN0YXJ0LmNsb25lKCk6bnVsbH1nZXRMYXN0UG9zaXRpb24oKXtjb25zdCB0PXRoaXMuZ2V0TGFzdFJhbmdlKCk7cmV0dXJuIHQ/dC5lbmQuY2xvbmUoKTpudWxsfWlzRXF1YWwodCl7aWYodGhpcy5pc0Zha2UhPXQuaXNGYWtlKXtyZXR1cm4gZmFsc2V9aWYodGhpcy5pc0Zha2UmJnRoaXMuZmFrZVNlbGVjdGlvbkxhYmVsIT10LmZha2VTZWxlY3Rpb25MYWJlbCl7cmV0dXJuIGZhbHNlfWlmKHRoaXMucmFuZ2VDb3VudCE9dC5yYW5nZUNvdW50KXtyZXR1cm4gZmFsc2V9ZWxzZSBpZih0aGlzLnJhbmdlQ291bnQ9PT0wKXtyZXR1cm4gdHJ1ZX1pZighdGhpcy5hbmNob3IuaXNFcXVhbCh0LmFuY2hvcil8fCF0aGlzLmZvY3VzLmlzRXF1YWwodC5mb2N1cykpe3JldHVybiBmYWxzZX1mb3IoY29uc3QgZSBvZiB0aGlzLl9yYW5nZXMpe2xldCBpPWZhbHNlO2Zvcihjb25zdCBuIG9mIHQuX3Jhbmdlcyl7aWYoZS5pc0VxdWFsKG4pKXtpPXRydWU7YnJlYWt9fWlmKCFpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWlzU2ltaWxhcih0KXtpZih0aGlzLmlzQmFja3dhcmQhPXQuaXNCYWNrd2FyZCl7cmV0dXJuIGZhbHNlfWNvbnN0IGU9ZmwodGhpcy5nZXRSYW5nZXMoKSk7Y29uc3QgaT1mbCh0LmdldFJhbmdlcygpKTtpZihlIT1pKXtyZXR1cm4gZmFsc2V9aWYoZT09MCl7cmV0dXJuIHRydWV9Zm9yKGxldCBlIG9mIHRoaXMuZ2V0UmFuZ2VzKCkpe2U9ZS5nZXRUcmltbWVkKCk7bGV0IGk9ZmFsc2U7Zm9yKGxldCBuIG9mIHQuZ2V0UmFuZ2VzKCkpe249bi5nZXRUcmltbWVkKCk7aWYoZS5zdGFydC5pc0VxdWFsKG4uc3RhcnQpJiZlLmVuZC5pc0VxdWFsKG4uZW5kKSl7aT10cnVlO2JyZWFrfX1pZighaSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1nZXRTZWxlY3RlZEVsZW1lbnQoKXtpZih0aGlzLnJhbmdlQ291bnQhPT0xKXtyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5nZXRGaXJzdFJhbmdlKCkuZ2V0Q29udGFpbmVkRWxlbWVudCgpfXNldFRvKHQsZSxpKXtpZih0PT09bnVsbCl7dGhpcy5fc2V0UmFuZ2VzKFtdKTt0aGlzLl9zZXRGYWtlT3B0aW9ucyhlKX1lbHNlIGlmKHQgaW5zdGFuY2VvZiBnbHx8dCBpbnN0YW5jZW9mIG1sKXt0aGlzLl9zZXRSYW5nZXModC5nZXRSYW5nZXMoKSx0LmlzQmFja3dhcmQpO3RoaXMuX3NldEZha2VPcHRpb25zKHtmYWtlOnQuaXNGYWtlLGxhYmVsOnQuZmFrZVNlbGVjdGlvbkxhYmVsfSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgdWwpe3RoaXMuX3NldFJhbmdlcyhbdF0sZSYmZS5iYWNrd2FyZCk7dGhpcy5fc2V0RmFrZU9wdGlvbnMoZSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgZGwpe3RoaXMuX3NldFJhbmdlcyhbbmV3IHVsKHQpXSk7dGhpcy5fc2V0RmFrZU9wdGlvbnMoZSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgenMpe2NvbnN0IG49ISFpJiYhIWkuYmFja3dhcmQ7bGV0IG87aWYoZT09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctc2VsZWN0aW9uLXNldFRvLXJlcXVpcmVkLXNlY29uZC1wYXJhbWV0ZXI6IFwiK1wic2VsZWN0aW9uLnNldFRvIHJlcXVpcmVzIHRoZSBzZWNvbmQgcGFyYW1ldGVyIHdoZW4gdGhlIGZpcnN0IHBhcmFtZXRlciBpcyBhIG5vZGUuXCIsdGhpcyl9ZWxzZSBpZihlPT1cImluXCIpe289dWwuX2NyZWF0ZUluKHQpfWVsc2UgaWYoZT09XCJvblwiKXtvPXVsLl9jcmVhdGVPbih0KX1lbHNle289bmV3IHVsKGRsLl9jcmVhdGVBdCh0LGUpKX10aGlzLl9zZXRSYW5nZXMoW29dLG4pO3RoaXMuX3NldEZha2VPcHRpb25zKGkpfWVsc2UgaWYoanModCkpe3RoaXMuX3NldFJhbmdlcyh0LGUmJmUuYmFja3dhcmQpO3RoaXMuX3NldEZha2VPcHRpb25zKGUpfWVsc2V7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctc2VsZWN0aW9uLXNldFRvLW5vdC1zZWxlY3RhYmxlOiBDYW5ub3Qgc2V0IHNlbGVjdGlvbiB0byBnaXZlbiBwbGFjZS5cIix0aGlzKX10aGlzLmZpcmUoXCJjaGFuZ2VcIil9c2V0Rm9jdXModCxlKXtpZih0aGlzLmFuY2hvcj09PW51bGwpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXNlbGVjdGlvbi1zZXRGb2N1cy1uby1yYW5nZXM6IENhbm5vdCBzZXQgc2VsZWN0aW9uIGZvY3VzIGlmIHRoZXJlIGFyZSBubyByYW5nZXMgaW4gc2VsZWN0aW9uLlwiLHRoaXMpfWNvbnN0IGk9ZGwuX2NyZWF0ZUF0KHQsZSk7aWYoaS5jb21wYXJlV2l0aCh0aGlzLmZvY3VzKT09XCJzYW1lXCIpe3JldHVybn1jb25zdCBuPXRoaXMuYW5jaG9yO3RoaXMuX3Jhbmdlcy5wb3AoKTtpZihpLmNvbXBhcmVXaXRoKG4pPT1cImJlZm9yZVwiKXt0aGlzLl9hZGRSYW5nZShuZXcgdWwoaSxuKSx0cnVlKX1lbHNle3RoaXMuX2FkZFJhbmdlKG5ldyB1bChuLGkpKX10aGlzLmZpcmUoXCJjaGFuZ2VcIil9aXModCl7cmV0dXJuIHQ9PVwic2VsZWN0aW9uXCJ8fHQ9PVwidmlldzpzZWxlY3Rpb25cIn1fc2V0UmFuZ2VzKHQsZT1mYWxzZSl7dD1BcnJheS5mcm9tKHQpO3RoaXMuX3Jhbmdlcz1bXTtmb3IoY29uc3QgZSBvZiB0KXt0aGlzLl9hZGRSYW5nZShlKX10aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD0hIWV9X3NldEZha2VPcHRpb25zKHQ9e30pe3RoaXMuX2lzRmFrZT0hIXQuZmFrZTt0aGlzLl9mYWtlU2VsZWN0aW9uTGFiZWw9dC5mYWtlP3QubGFiZWx8fFwiXCI6XCJcIn1fYWRkUmFuZ2UodCxlPWZhbHNlKXtpZighKHQgaW5zdGFuY2VvZiB1bCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXNlbGVjdGlvbi1hZGQtcmFuZ2Utbm90LXJhbmdlOiBcIitcIlNlbGVjdGlvbiByYW5nZSBzZXQgdG8gYW4gb2JqZWN0IHRoYXQgaXMgbm90IGFuIGluc3RhbmNlIG9mIHZpZXcuUmFuZ2VcIix0aGlzKX10aGlzLl9wdXNoUmFuZ2UodCk7dGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ9ISFlfV9wdXNoUmFuZ2UodCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcmFuZ2VzKXtpZih0LmlzSW50ZXJzZWN0aW5nKGUpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy1zZWxlY3Rpb24tcmFuZ2UtaW50ZXJzZWN0czogVHJ5aW5nIHRvIGFkZCBhIHJhbmdlIHRoYXQgaW50ZXJzZWN0cyB3aXRoIGFub3RoZXIgcmFuZ2UgZnJvbSBzZWxlY3Rpb24uXCIsdGhpcyx7YWRkZWRSYW5nZTp0LGludGVyc2VjdGluZ1JhbmdlOmV9KX19dGhpcy5fcmFuZ2VzLnB1c2gobmV3IHVsKHQuc3RhcnQsdC5lbmQpKX19dnMoZ2wsZHMpO2NsYXNzIG1se2NvbnN0cnVjdG9yKHQ9bnVsbCxlLGkpe3RoaXMuX3NlbGVjdGlvbj1uZXcgZ2w7dGhpcy5fc2VsZWN0aW9uLmRlbGVnYXRlKFwiY2hhbmdlXCIpLnRvKHRoaXMpO3RoaXMuX3NlbGVjdGlvbi5zZXRUbyh0LGUsaSl9Z2V0IGlzRmFrZSgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uaXNGYWtlfWdldCBmYWtlU2VsZWN0aW9uTGFiZWwoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmZha2VTZWxlY3Rpb25MYWJlbH1nZXQgYW5jaG9yKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5hbmNob3J9Z2V0IGZvY3VzKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5mb2N1c31nZXQgaXNDb2xsYXBzZWQoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmlzQ29sbGFwc2VkfWdldCByYW5nZUNvdW50KCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5yYW5nZUNvdW50fWdldCBpc0JhY2t3YXJkKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0JhY2t3YXJkfWdldCBlZGl0YWJsZUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmVkaXRhYmxlRWxlbWVudH1nZXQgX3Jhbmdlcygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uX3Jhbmdlc30qZ2V0UmFuZ2VzKCl7eWllbGQqdGhpcy5fc2VsZWN0aW9uLmdldFJhbmdlcygpfWdldEZpcnN0UmFuZ2UoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKX1nZXRMYXN0UmFuZ2UoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldExhc3RSYW5nZSgpfWdldEZpcnN0UG9zaXRpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldEZpcnN0UG9zaXRpb24oKX1nZXRMYXN0UG9zaXRpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldExhc3RQb3NpdGlvbigpfWdldFNlbGVjdGVkRWxlbWVudCgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCl9aXNFcXVhbCh0KXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmlzRXF1YWwodCl9aXNTaW1pbGFyKHQpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uaXNTaW1pbGFyKHQpfWlzKHQpe3JldHVybiB0PT1cInNlbGVjdGlvblwifHx0PT1cImRvY3VtZW50U2VsZWN0aW9uXCJ8fHQ9PVwidmlldzpzZWxlY3Rpb25cInx8dD09XCJ2aWV3OmRvY3VtZW50U2VsZWN0aW9uXCJ9X3NldFRvKHQsZSxpKXt0aGlzLl9zZWxlY3Rpb24uc2V0VG8odCxlLGkpfV9zZXRGb2N1cyh0LGUpe3RoaXMuX3NlbGVjdGlvbi5zZXRGb2N1cyh0LGUpfX12cyhtbCxkcyk7Y2xhc3MgcGx7Y29uc3RydWN0b3IodCl7dGhpcy5zZWxlY3Rpb249bmV3IG1sO3RoaXMucm9vdHM9bmV3IHlzKHtpZFByb3BlcnR5Olwicm9vdE5hbWVcIn0pO3RoaXMuc3R5bGVzUHJvY2Vzc29yPXQ7dGhpcy5zZXQoXCJpc1JlYWRPbmx5XCIsZmFsc2UpO3RoaXMuc2V0KFwiaXNGb2N1c2VkXCIsZmFsc2UpO3RoaXMuc2V0KFwiaXNDb21wb3NpbmdcIixmYWxzZSk7dGhpcy5fcG9zdEZpeGVycz1uZXcgU2V0fWdldFJvb3QodD1cIm1haW5cIil7cmV0dXJuIHRoaXMucm9vdHMuZ2V0KHQpfXJlZ2lzdGVyUG9zdEZpeGVyKHQpe3RoaXMuX3Bvc3RGaXhlcnMuYWRkKHQpfWRlc3Ryb3koKXt0aGlzLnJvb3RzLm1hcCh0PT50LmRlc3Ryb3koKSk7dGhpcy5zdG9wTGlzdGVuaW5nKCl9X2NhbGxQb3N0Rml4ZXJzKHQpe2xldCBlPWZhbHNlO2Rve2Zvcihjb25zdCBpIG9mIHRoaXMuX3Bvc3RGaXhlcnMpe2U9aSh0KTtpZihlKXticmVha319fXdoaWxlKGUpfX12cyhwbCxKYyk7Y29uc3QgYmw9MTA7Y2xhc3Mgd2wgZXh0ZW5kcyB6Y3tjb25zdHJ1Y3Rvcih0LGUsaSxuKXtzdXBlcih0LGUsaSxuKTt0aGlzLmdldEZpbGxlck9mZnNldD1rbDt0aGlzLl9wcmlvcml0eT1ibDt0aGlzLl9pZD1udWxsO3RoaXMuX2Nsb25lc0dyb3VwPW51bGx9Z2V0IHByaW9yaXR5KCl7cmV0dXJuIHRoaXMuX3ByaW9yaXR5fWdldCBpZCgpe3JldHVybiB0aGlzLl9pZH1nZXRFbGVtZW50c1dpdGhTYW1lSWQoKXtpZih0aGlzLmlkPT09bnVsbCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImF0dHJpYnV0ZS1lbGVtZW50LWdldC1lbGVtZW50cy13aXRoLXNhbWUtaWQtbm8taWQ6IFwiK1wiQ2Fubm90IGdldCBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIGlkIGZvciBhbiBhdHRyaWJ1dGUgZWxlbWVudCB3aXRob3V0IGlkLlwiLHRoaXMpfXJldHVybiBuZXcgU2V0KHRoaXMuX2Nsb25lc0dyb3VwKX1pcyh0LGU9bnVsbCl7Y29uc3QgaT10JiZ0LnJlcGxhY2UoL152aWV3Oi8sXCJcIik7aWYoIWUpe3JldHVybiBpPT1cImF0dHJpYnV0ZUVsZW1lbnRcInx8c3VwZXIuaXModCl9ZWxzZXtyZXR1cm4gaT09XCJhdHRyaWJ1dGVFbGVtZW50XCImJmU9PXRoaXMubmFtZXx8c3VwZXIuaXModCxlKX19aXNTaW1pbGFyKHQpe2lmKHRoaXMuaWQhPT1udWxsfHx0LmlkIT09bnVsbCl7cmV0dXJuIHRoaXMuaWQ9PT10LmlkfXJldHVybiBzdXBlci5pc1NpbWlsYXIodCkmJnRoaXMucHJpb3JpdHk9PXQucHJpb3JpdHl9X2Nsb25lKHQpe2NvbnN0IGU9c3VwZXIuX2Nsb25lKHQpO2UuX3ByaW9yaXR5PXRoaXMuX3ByaW9yaXR5O2UuX2lkPXRoaXMuX2lkO3JldHVybiBlfX13bC5ERUZBVUxUX1BSSU9SSVRZPWJsO2Z1bmN0aW9uIGtsKCl7aWYoX2wodGhpcykpe3JldHVybiBudWxsfWxldCB0PXRoaXMucGFyZW50O3doaWxlKHQmJnQuaXMoXCJhdHRyaWJ1dGVFbGVtZW50XCIpKXtpZihfbCh0KT4xKXtyZXR1cm4gbnVsbH10PXQucGFyZW50fWlmKCF0fHxfbCh0KT4xKXtyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jaGlsZENvdW50fWZ1bmN0aW9uIF9sKHQpe3JldHVybiBBcnJheS5mcm9tKHQuZ2V0Q2hpbGRyZW4oKSkuZmlsdGVyKHQ9PiF0LmlzKFwidWlFbGVtZW50XCIpKS5sZW5ndGh9Y2xhc3MgdmwgZXh0ZW5kcyB6Y3tjb25zdHJ1Y3Rvcih0LGUsaSxuKXtzdXBlcih0LGUsaSxuKTt0aGlzLmdldEZpbGxlck9mZnNldD15bH1pcyh0LGU9bnVsbCl7Y29uc3QgaT10LnJlcGxhY2UoL152aWV3Oi8sXCJcIik7aWYoIWUpe3JldHVybiBpPT1cImVtcHR5RWxlbWVudFwifHxzdXBlci5pcyh0KX1lbHNle3JldHVybiBpPT1cImVtcHR5RWxlbWVudFwiJiZlPT10aGlzLm5hbWV8fHN1cGVyLmlzKHQsZSl9fV9pbnNlcnRDaGlsZCh0LGUpe2lmKGUmJihlIGluc3RhbmNlb2YgenN8fEFycmF5LmZyb20oZSkubGVuZ3RoPjApKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy1lbXB0eWVsZW1lbnQtY2Fubm90LWFkZDogQ2Fubm90IGFkZCBjaGlsZCBub2RlcyB0byBFbXB0eUVsZW1lbnQgaW5zdGFuY2UuXCIsW3RoaXMsZV0pfX19ZnVuY3Rpb24geWwoKXtyZXR1cm4gbnVsbH1jb25zdCB4bD1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7Y29uc3QgQ2w9e2lzTWFjOlRsKHhsKSxpc0VkZ2U6UGwoeGwpLGlzR2Vja286U2woeGwpLGlzU2FmYXJpOkVsKHhsKSxpc0FuZHJvaWQ6UmwoeGwpLGZlYXR1cmVzOntpc1JlZ0V4cFVuaWNvZGVQcm9wZXJ0eVN1cHBvcnRlZDpPbCgpfX07dmFyIEFsPUNsO2Z1bmN0aW9uIFRsKHQpe3JldHVybiB0LmluZGV4T2YoXCJtYWNpbnRvc2hcIik+LTF9ZnVuY3Rpb24gUGwodCl7cmV0dXJuISF0Lm1hdGNoKC9lZGdlXFwvKFxcZCsuP1xcZCopLyl9ZnVuY3Rpb24gU2wodCl7cmV0dXJuISF0Lm1hdGNoKC9nZWNrb1xcL1xcZCsvKX1mdW5jdGlvbiBFbCh0KXtyZXR1cm4gdC5pbmRleE9mKFwiIGFwcGxld2Via2l0L1wiKT4tMSYmdC5pbmRleE9mKFwiY2hyb21lXCIpPT09LTF9ZnVuY3Rpb24gUmwodCl7cmV0dXJuIHQuaW5kZXhPZihcImFuZHJvaWRcIik+LTF9ZnVuY3Rpb24gT2woKXtsZXQgdD1mYWxzZTt0cnl7dD1cIsSHXCIuc2VhcmNoKG5ldyBSZWdFeHAoXCJbXFxcXHB7TH1dXCIsXCJ1XCIpKT09PTB9Y2F0Y2godCl7fXJldHVybiB0fWNvbnN0IElsPXtcIuKMmFwiOlwiY3RybFwiLFwi4oenXCI6XCJzaGlmdFwiLFwi4oylXCI6XCJhbHRcIn07Y29uc3QgVmw9e2N0cmw6XCLijJhcIixzaGlmdDpcIuKHp1wiLGFsdDpcIuKMpVwifTtjb25zdCBObD1MbCgpO2Z1bmN0aW9uIE1sKHQpe2xldCBlO2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtlPU5sW3QudG9Mb3dlckNhc2UoKV07aWYoIWUpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJrZXlib2FyZC11bmtub3duLWtleTogVW5rbm93biBrZXkgbmFtZS5cIixudWxsLHtrZXk6dH0pfX1lbHNle2U9dC5rZXlDb2RlKyh0LmFsdEtleT9ObC5hbHQ6MCkrKHQuY3RybEtleT9ObC5jdHJsOjApKyh0LnNoaWZ0S2V5P05sLnNoaWZ0OjApfXJldHVybiBlfWZ1bmN0aW9uIEJsKHQpe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXt0PUZsKHQpfXJldHVybiB0Lm1hcCh0PT50eXBlb2YgdD09XCJzdHJpbmdcIj9NbCh0KTp0KS5yZWR1Y2UoKHQsZSk9PmUrdCwwKX1mdW5jdGlvbiB6bCh0KXtpZighQWwuaXNNYWMpe3JldHVybiB0fXJldHVybiBGbCh0KS5tYXAodD0+VmxbdC50b0xvd2VyQ2FzZSgpXXx8dCkucmVkdWNlKCh0LGUpPT57aWYodC5zbGljZSgtMSlpbiBJbCl7cmV0dXJuIHQrZX1lbHNle3JldHVybiB0K1wiK1wiK2V9fSl9ZnVuY3Rpb24gTGwoKXtjb25zdCB0PXthcnJvd2xlZnQ6MzcsYXJyb3d1cDozOCxhcnJvd3JpZ2h0OjM5LGFycm93ZG93bjo0MCxiYWNrc3BhY2U6OCxkZWxldGU6NDYsZW50ZXI6MTMsc3BhY2U6MzIsZXNjOjI3LHRhYjo5LGN0cmw6MTExNDExMixjbWQ6MTExNDExMixzaGlmdDoyMjI4MjI0LGFsdDo0NDU2NDQ4fTtmb3IobGV0IGU9NjU7ZTw9OTA7ZSsrKXtjb25zdCBpPVN0cmluZy5mcm9tQ2hhckNvZGUoZSk7dFtpLnRvTG93ZXJDYXNlKCldPWV9Zm9yKGxldCBlPTQ4O2U8PTU3O2UrKyl7dFtlLTQ4XT1lfWZvcihsZXQgZT0xMTI7ZTw9MTIzO2UrKyl7dFtcImZcIisoZS0xMTEpXT1lfXJldHVybiB0fWZ1bmN0aW9uIEZsKHQpe3JldHVybiB0LnNwbGl0KC9cXHMqXFwrXFxzKi8pfWNsYXNzIERsIGV4dGVuZHMgemN7Y29uc3RydWN0b3IodCxlLGksbil7c3VwZXIodCxlLGksbik7dGhpcy5nZXRGaWxsZXJPZmZzZXQ9SGx9aXModCxlPW51bGwpe2NvbnN0IGk9dC5yZXBsYWNlKC9edmlldzovLFwiXCIpO2lmKCFlKXtyZXR1cm4gaT09XCJ1aUVsZW1lbnRcInx8c3VwZXIuaXModCl9ZWxzZXtyZXR1cm4gaT09XCJ1aUVsZW1lbnRcIiYmZT09dGhpcy5uYW1lfHxzdXBlci5pcyh0LGUpfX1faW5zZXJ0Q2hpbGQodCxlKXtpZihlJiYoZSBpbnN0YW5jZW9mIHpzfHxBcnJheS5mcm9tKGUpLmxlbmd0aD4wKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctdWllbGVtZW50LWNhbm5vdC1hZGQ6IENhbm5vdCBhZGQgY2hpbGQgbm9kZXMgdG8gVUlFbGVtZW50IGluc3RhbmNlLlwiLHRoaXMpfX1yZW5kZXIodCl7cmV0dXJuIHRoaXMudG9Eb21FbGVtZW50KHQpfXRvRG9tRWxlbWVudCh0KXtjb25zdCBlPXQuY3JlYXRlRWxlbWVudCh0aGlzLm5hbWUpO2Zvcihjb25zdCB0IG9mIHRoaXMuZ2V0QXR0cmlidXRlS2V5cygpKXtlLnNldEF0dHJpYnV0ZSh0LHRoaXMuZ2V0QXR0cmlidXRlKHQpKX1yZXR1cm4gZX19ZnVuY3Rpb24gamwodCl7dC5kb2N1bWVudC5vbihcImtleWRvd25cIiwoZSxpKT0+V2woZSxpLHQuZG9tQ29udmVydGVyKSl9ZnVuY3Rpb24gSGwoKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiBXbCh0LGUsaSl7aWYoZS5rZXlDb2RlPT1ObC5hcnJvd3JpZ2h0KXtjb25zdCB0PWUuZG9tVGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCk7Y29uc3Qgbj10LnJhbmdlQ291bnQ9PTEmJnQuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQ7aWYobnx8ZS5zaGlmdEtleSl7Y29uc3QgZT10LmZvY3VzTm9kZTtjb25zdCBvPXQuZm9jdXNPZmZzZXQ7Y29uc3Qgcj1pLmRvbVBvc2l0aW9uVG9WaWV3KGUsbyk7aWYocj09PW51bGwpe3JldHVybn1sZXQgcz1mYWxzZTtjb25zdCBhPXIuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24odD0+e2lmKHQuaXRlbS5pcyhcInVpRWxlbWVudFwiKSl7cz10cnVlfWlmKHQuaXRlbS5pcyhcInVpRWxlbWVudFwiKXx8dC5pdGVtLmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKSl7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfSk7aWYocyl7Y29uc3QgZT1pLnZpZXdQb3NpdGlvblRvRG9tKGEpO2lmKG4pe3QuY29sbGFwc2UoZS5wYXJlbnQsZS5vZmZzZXQpfWVsc2V7dC5leHRlbmQoZS5wYXJlbnQsZS5vZmZzZXQpfX19fX1jbGFzcyBxbHtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuZG9jdW1lbnQ9dDt0aGlzLl9jaGlsZHJlbj1bXTtpZihlKXt0aGlzLl9pbnNlcnRDaGlsZCgwLGUpfX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLl9jaGlsZHJlbltTeW1ib2wuaXRlcmF0b3JdKCl9Z2V0IGNoaWxkQ291bnQoKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4ubGVuZ3RofWdldCBpc0VtcHR5KCl7cmV0dXJuIHRoaXMuY2hpbGRDb3VudD09PTB9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpc31nZXQgcGFyZW50KCl7cmV0dXJuIG51bGx9aXModCl7cmV0dXJuIHQ9PVwiZG9jdW1lbnRGcmFnbWVudFwifHx0PT1cInZpZXc6ZG9jdW1lbnRGcmFnbWVudFwifV9hcHBlbmRDaGlsZCh0KXtyZXR1cm4gdGhpcy5faW5zZXJ0Q2hpbGQodGhpcy5jaGlsZENvdW50LHQpfWdldENoaWxkKHQpe3JldHVybiB0aGlzLl9jaGlsZHJlblt0XX1nZXRDaGlsZEluZGV4KHQpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5pbmRleE9mKHQpfWdldENoaWxkcmVuKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKX1faW5zZXJ0Q2hpbGQodCxlKXt0aGlzLl9maXJlQ2hhbmdlKFwiY2hpbGRyZW5cIix0aGlzKTtsZXQgaT0wO2NvbnN0IG49VWwodGhpcy5kb2N1bWVudCxlKTtmb3IoY29uc3QgZSBvZiBuKXtpZihlLnBhcmVudCE9PW51bGwpe2UuX3JlbW92ZSgpfWUucGFyZW50PXRoaXM7dGhpcy5fY2hpbGRyZW4uc3BsaWNlKHQsMCxlKTt0Kys7aSsrfXJldHVybiBpfV9yZW1vdmVDaGlsZHJlbih0LGU9MSl7dGhpcy5fZmlyZUNoYW5nZShcImNoaWxkcmVuXCIsdGhpcyk7Zm9yKGxldCBpPXQ7aTx0K2U7aSsrKXt0aGlzLl9jaGlsZHJlbltpXS5wYXJlbnQ9bnVsbH1yZXR1cm4gdGhpcy5fY2hpbGRyZW4uc3BsaWNlKHQsZSl9X2ZpcmVDaGFuZ2UodCxlKXt0aGlzLmZpcmUoXCJjaGFuZ2U6XCIrdCxlKX19dnMocWwsZHMpO2Z1bmN0aW9uIFVsKHQsZSl7aWYodHlwZW9mIGU9PVwic3RyaW5nXCIpe3JldHVybltuZXcgTHModCxlKV19aWYoIWpzKGUpKXtlPVtlXX1yZXR1cm4gQXJyYXkuZnJvbShlKS5tYXAoZT0+e2lmKHR5cGVvZiBlPT1cInN0cmluZ1wiKXtyZXR1cm4gbmV3IExzKHQsZSl9aWYoZSBpbnN0YW5jZW9mIEZzKXtyZXR1cm4gbmV3IExzKHQsZS5kYXRhKX1yZXR1cm4gZX0pfWNsYXNzICRse2NvbnN0cnVjdG9yKHQpe3RoaXMuZG9jdW1lbnQ9dDt0aGlzLl9jbG9uZUdyb3Vwcz1uZXcgTWFwfXNldFNlbGVjdGlvbih0LGUsaSl7dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24uX3NldFRvKHQsZSxpKX1zZXRTZWxlY3Rpb25Gb2N1cyh0LGUpe3RoaXMuZG9jdW1lbnQuc2VsZWN0aW9uLl9zZXRGb2N1cyh0LGUpfWNyZWF0ZVRleHQodCl7cmV0dXJuIG5ldyBMcyh0aGlzLmRvY3VtZW50LHQpfWNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQodCxlLGk9e30pe2NvbnN0IG49bmV3IHdsKHRoaXMuZG9jdW1lbnQsdCxlKTtpZihpLnByaW9yaXR5KXtuLl9wcmlvcml0eT1pLnByaW9yaXR5fWlmKGkuaWQpe24uX2lkPWkuaWR9cmV0dXJuIG59Y3JlYXRlQ29udGFpbmVyRWxlbWVudCh0LGUpe3JldHVybiBuZXcgamModGhpcy5kb2N1bWVudCx0LGUpfWNyZWF0ZUVkaXRhYmxlRWxlbWVudCh0LGUpe2NvbnN0IGk9bmV3IHNsKHRoaXMuZG9jdW1lbnQsdCxlKTtpLl9kb2N1bWVudD10aGlzLmRvY3VtZW50O3JldHVybiBpfWNyZWF0ZUVtcHR5RWxlbWVudCh0LGUpe3JldHVybiBuZXcgdmwodGhpcy5kb2N1bWVudCx0LGUpfWNyZWF0ZVVJRWxlbWVudCh0LGUsaSl7Y29uc3Qgbj1uZXcgRGwodGhpcy5kb2N1bWVudCx0LGUpO2lmKGkpe24ucmVuZGVyPWl9cmV0dXJuIG59c2V0QXR0cmlidXRlKHQsZSxpKXtpLl9zZXRBdHRyaWJ1dGUodCxlKX1yZW1vdmVBdHRyaWJ1dGUodCxlKXtlLl9yZW1vdmVBdHRyaWJ1dGUodCl9YWRkQ2xhc3ModCxlKXtlLl9hZGRDbGFzcyh0KX1yZW1vdmVDbGFzcyh0LGUpe2UuX3JlbW92ZUNsYXNzKHQpfXNldFN0eWxlKHQsZSxpKXtpZihOKHQpJiZpPT09dW5kZWZpbmVkKXtpPWV9aS5fc2V0U3R5bGUodCxlKX1yZW1vdmVTdHlsZSh0LGUpe2UuX3JlbW92ZVN0eWxlKHQpfXNldEN1c3RvbVByb3BlcnR5KHQsZSxpKXtpLl9zZXRDdXN0b21Qcm9wZXJ0eSh0LGUpfXJlbW92ZUN1c3RvbVByb3BlcnR5KHQsZSl7cmV0dXJuIGUuX3JlbW92ZUN1c3RvbVByb3BlcnR5KHQpfWJyZWFrQXR0cmlidXRlcyh0KXtpZih0IGluc3RhbmNlb2YgZGwpe3JldHVybiB0aGlzLl9icmVha0F0dHJpYnV0ZXModCl9ZWxzZXtyZXR1cm4gdGhpcy5fYnJlYWtBdHRyaWJ1dGVzUmFuZ2UodCl9fWJyZWFrQ29udGFpbmVyKHQpe2NvbnN0IGU9dC5wYXJlbnQ7aWYoIWUuaXMoXCJjb250YWluZXJFbGVtZW50XCIpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy13cml0ZXItYnJlYWstbm9uLWNvbnRhaW5lci1lbGVtZW50OiBUcnlpbmcgdG8gYnJlYWsgYW4gZWxlbWVudCB3aGljaCBpcyBub3QgYSBjb250YWluZXIgZWxlbWVudC5cIix0aGlzLmRvY3VtZW50KX1pZighZS5wYXJlbnQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXdyaXRlci1icmVhay1yb290OiBUcnlpbmcgdG8gYnJlYWsgcm9vdCBlbGVtZW50LlwiLHRoaXMuZG9jdW1lbnQpfWlmKHQuaXNBdFN0YXJ0KXtyZXR1cm4gZGwuX2NyZWF0ZUJlZm9yZShlKX1lbHNlIGlmKCF0LmlzQXRFbmQpe2NvbnN0IGk9ZS5fY2xvbmUoZmFsc2UpO3RoaXMuaW5zZXJ0KGRsLl9jcmVhdGVBZnRlcihlKSxpKTtjb25zdCBuPW5ldyB1bCh0LGRsLl9jcmVhdGVBdChlLFwiZW5kXCIpKTtjb25zdCBvPW5ldyBkbChpLDApO3RoaXMubW92ZShuLG8pfXJldHVybiBkbC5fY3JlYXRlQWZ0ZXIoZSl9bWVyZ2VBdHRyaWJ1dGVzKHQpe2NvbnN0IGU9dC5vZmZzZXQ7Y29uc3QgaT10LnBhcmVudDtpZihpLmlzKFwidGV4dFwiKSl7cmV0dXJuIHR9aWYoaS5pcyhcImF0dHJpYnV0ZUVsZW1lbnRcIikmJmkuY2hpbGRDb3VudD09PTApe2NvbnN0IHQ9aS5wYXJlbnQ7Y29uc3QgZT1pLmluZGV4O2kuX3JlbW92ZSgpO3RoaXMuX3JlbW92ZUZyb21DbG9uZWRFbGVtZW50c0dyb3VwKGkpO3JldHVybiB0aGlzLm1lcmdlQXR0cmlidXRlcyhuZXcgZGwodCxlKSl9Y29uc3Qgbj1pLmdldENoaWxkKGUtMSk7Y29uc3Qgbz1pLmdldENoaWxkKGUpO2lmKCFufHwhbyl7cmV0dXJuIHR9aWYobi5pcyhcInRleHRcIikmJm8uaXMoXCJ0ZXh0XCIpKXtyZXR1cm4gWGwobixvKX1lbHNlIGlmKG4uaXMoXCJhdHRyaWJ1dGVFbGVtZW50XCIpJiZvLmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKSYmbi5pc1NpbWlsYXIobykpe2NvbnN0IHQ9bi5jaGlsZENvdW50O24uX2FwcGVuZENoaWxkKG8uZ2V0Q2hpbGRyZW4oKSk7by5fcmVtb3ZlKCk7dGhpcy5fcmVtb3ZlRnJvbUNsb25lZEVsZW1lbnRzR3JvdXAobyk7cmV0dXJuIHRoaXMubWVyZ2VBdHRyaWJ1dGVzKG5ldyBkbChuLHQpKX1yZXR1cm4gdH1tZXJnZUNvbnRhaW5lcnModCl7Y29uc3QgZT10Lm5vZGVCZWZvcmU7Y29uc3QgaT10Lm5vZGVBZnRlcjtpZighZXx8IWl8fCFlLmlzKFwiY29udGFpbmVyRWxlbWVudFwiKXx8IWkuaXMoXCJjb250YWluZXJFbGVtZW50XCIpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy13cml0ZXItbWVyZ2UtY29udGFpbmVycy1pbnZhbGlkLXBvc2l0aW9uOiBcIitcIkVsZW1lbnQgYmVmb3JlIGFuZCBhZnRlciBnaXZlbiBwb3NpdGlvbiBjYW5ub3QgYmUgbWVyZ2VkLlwiLHRoaXMuZG9jdW1lbnQpfWNvbnN0IG49ZS5nZXRDaGlsZChlLmNoaWxkQ291bnQtMSk7Y29uc3Qgbz1uIGluc3RhbmNlb2YgTHM/ZGwuX2NyZWF0ZUF0KG4sXCJlbmRcIik6ZGwuX2NyZWF0ZUF0KGUsXCJlbmRcIik7dGhpcy5tb3ZlKHVsLl9jcmVhdGVJbihpKSxkbC5fY3JlYXRlQXQoZSxcImVuZFwiKSk7dGhpcy5yZW1vdmUodWwuX2NyZWF0ZU9uKGkpKTtyZXR1cm4gb31pbnNlcnQodCxlKXtlPWpzKGUpP1suLi5lXTpbZV07WmwoZSx0aGlzLmRvY3VtZW50KTtjb25zdCBpPUtsKHQpO2lmKCFpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy13cml0ZXItaW52YWxpZC1wb3NpdGlvbi1jb250YWluZXJcIix0aGlzLmRvY3VtZW50KX1jb25zdCBuPXRoaXMuX2JyZWFrQXR0cmlidXRlcyh0LHRydWUpO2NvbnN0IG89aS5faW5zZXJ0Q2hpbGQobi5vZmZzZXQsZSk7Zm9yKGNvbnN0IHQgb2YgZSl7dGhpcy5fYWRkVG9DbG9uZWRFbGVtZW50c0dyb3VwKHQpfWNvbnN0IHI9bi5nZXRTaGlmdGVkQnkobyk7Y29uc3Qgcz10aGlzLm1lcmdlQXR0cmlidXRlcyhuKTtpZihvPT09MCl7cmV0dXJuIG5ldyB1bChzLHMpfWVsc2V7aWYoIXMuaXNFcXVhbChuKSl7ci5vZmZzZXQtLX1jb25zdCB0PXRoaXMubWVyZ2VBdHRyaWJ1dGVzKHIpO3JldHVybiBuZXcgdWwocyx0KX19cmVtb3ZlKHQpe2NvbnN0IGU9dCBpbnN0YW5jZW9mIHVsP3Q6dWwuX2NyZWF0ZU9uKHQpO2lkKGUsdGhpcy5kb2N1bWVudCk7aWYoZS5pc0NvbGxhcHNlZCl7cmV0dXJuIG5ldyBxbCh0aGlzLmRvY3VtZW50KX1jb25zdHtzdGFydDppLGVuZDpufT10aGlzLl9icmVha0F0dHJpYnV0ZXNSYW5nZShlLHRydWUpO2NvbnN0IG89aS5wYXJlbnQ7Y29uc3Qgcj1uLm9mZnNldC1pLm9mZnNldDtjb25zdCBzPW8uX3JlbW92ZUNoaWxkcmVuKGkub2Zmc2V0LHIpO2Zvcihjb25zdCB0IG9mIHMpe3RoaXMuX3JlbW92ZUZyb21DbG9uZWRFbGVtZW50c0dyb3VwKHQpfWNvbnN0IGE9dGhpcy5tZXJnZUF0dHJpYnV0ZXMoaSk7ZS5zdGFydD1hO2UuZW5kPWEuY2xvbmUoKTtyZXR1cm4gbmV3IHFsKHRoaXMuZG9jdW1lbnQscyl9Y2xlYXIodCxlKXtpZCh0LHRoaXMuZG9jdW1lbnQpO2NvbnN0IGk9dC5nZXRXYWxrZXIoe2RpcmVjdGlvbjpcImJhY2t3YXJkXCIsaWdub3JlRWxlbWVudEVuZDp0cnVlfSk7Zm9yKGNvbnN0IG4gb2YgaSl7Y29uc3QgaT1uLml0ZW07bGV0IG87aWYoaS5pcyhcImVsZW1lbnRcIikmJmUuaXNTaW1pbGFyKGkpKXtvPXVsLl9jcmVhdGVPbihpKX1lbHNlIGlmKCFuLm5leHRQb3NpdGlvbi5pc0FmdGVyKHQuc3RhcnQpJiZpLmlzKFwidGV4dFByb3h5XCIpKXtjb25zdCB0PWkuZ2V0QW5jZXN0b3JzKCkuZmluZCh0PT50LmlzKFwiZWxlbWVudFwiKSYmZS5pc1NpbWlsYXIodCkpO2lmKHQpe289dWwuX2NyZWF0ZUluKHQpfX1pZihvKXtpZihvLmVuZC5pc0FmdGVyKHQuZW5kKSl7by5lbmQ9dC5lbmR9aWYoby5zdGFydC5pc0JlZm9yZSh0LnN0YXJ0KSl7by5zdGFydD10LnN0YXJ0fXRoaXMucmVtb3ZlKG8pfX19bW92ZSh0LGUpe2xldCBpO2lmKGUuaXNBZnRlcih0LmVuZCkpe2U9dGhpcy5fYnJlYWtBdHRyaWJ1dGVzKGUsdHJ1ZSk7Y29uc3Qgbj1lLnBhcmVudDtjb25zdCBvPW4uY2hpbGRDb3VudDt0PXRoaXMuX2JyZWFrQXR0cmlidXRlc1JhbmdlKHQsdHJ1ZSk7aT10aGlzLnJlbW92ZSh0KTtlLm9mZnNldCs9bi5jaGlsZENvdW50LW99ZWxzZXtpPXRoaXMucmVtb3ZlKHQpfXJldHVybiB0aGlzLmluc2VydChlLGkpfXdyYXAodCxlKXtpZighKGUgaW5zdGFuY2VvZiB3bCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXdyaXRlci13cmFwLWludmFsaWQtYXR0cmlidXRlXCIsdGhpcy5kb2N1bWVudCl9aWQodCx0aGlzLmRvY3VtZW50KTtpZighdC5pc0NvbGxhcHNlZCl7cmV0dXJuIHRoaXMuX3dyYXBSYW5nZSh0LGUpfWVsc2V7bGV0IGk9dC5zdGFydDtpZihpLnBhcmVudC5pcyhcImVsZW1lbnRcIikmJiFHbChpLnBhcmVudCkpe2k9aS5nZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbih0PT50Lml0ZW0uaXMoXCJ1aUVsZW1lbnRcIikpfWk9dGhpcy5fd3JhcFBvc2l0aW9uKGksZSk7Y29uc3Qgbj10aGlzLmRvY3VtZW50LnNlbGVjdGlvbjtpZihuLmlzQ29sbGFwc2VkJiZuLmdldEZpcnN0UG9zaXRpb24oKS5pc0VxdWFsKHQuc3RhcnQpKXt0aGlzLnNldFNlbGVjdGlvbihpKX1yZXR1cm4gbmV3IHVsKGkpfX11bndyYXAodCxlKXtpZighKGUgaW5zdGFuY2VvZiB3bCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXdyaXRlci11bndyYXAtaW52YWxpZC1hdHRyaWJ1dGVcIix0aGlzLmRvY3VtZW50KX1pZCh0LHRoaXMuZG9jdW1lbnQpO2lmKHQuaXNDb2xsYXBzZWQpe3JldHVybiB0fWNvbnN0e3N0YXJ0OmksZW5kOm59PXRoaXMuX2JyZWFrQXR0cmlidXRlc1JhbmdlKHQsdHJ1ZSk7Y29uc3Qgbz1pLnBhcmVudDtjb25zdCByPXRoaXMuX3Vud3JhcENoaWxkcmVuKG8saS5vZmZzZXQsbi5vZmZzZXQsZSk7Y29uc3Qgcz10aGlzLm1lcmdlQXR0cmlidXRlcyhyLnN0YXJ0KTtpZighcy5pc0VxdWFsKHIuc3RhcnQpKXtyLmVuZC5vZmZzZXQtLX1jb25zdCBhPXRoaXMubWVyZ2VBdHRyaWJ1dGVzKHIuZW5kKTtyZXR1cm4gbmV3IHVsKHMsYSl9cmVuYW1lKHQsZSl7Y29uc3QgaT1uZXcgamModGhpcy5kb2N1bWVudCx0LGUuZ2V0QXR0cmlidXRlcygpKTt0aGlzLmluc2VydChkbC5fY3JlYXRlQWZ0ZXIoZSksaSk7dGhpcy5tb3ZlKHVsLl9jcmVhdGVJbihlKSxkbC5fY3JlYXRlQXQoaSwwKSk7dGhpcy5yZW1vdmUodWwuX2NyZWF0ZU9uKGUpKTtyZXR1cm4gaX1jbGVhckNsb25lZEVsZW1lbnRzR3JvdXAodCl7dGhpcy5fY2xvbmVHcm91cHMuZGVsZXRlKHQpfWNyZWF0ZVBvc2l0aW9uQXQodCxlKXtyZXR1cm4gZGwuX2NyZWF0ZUF0KHQsZSl9Y3JlYXRlUG9zaXRpb25BZnRlcih0KXtyZXR1cm4gZGwuX2NyZWF0ZUFmdGVyKHQpfWNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpe3JldHVybiBkbC5fY3JlYXRlQmVmb3JlKHQpfWNyZWF0ZVJhbmdlKHQsZSl7cmV0dXJuIG5ldyB1bCh0LGUpfWNyZWF0ZVJhbmdlT24odCl7cmV0dXJuIHVsLl9jcmVhdGVPbih0KX1jcmVhdGVSYW5nZUluKHQpe3JldHVybiB1bC5fY3JlYXRlSW4odCl9Y3JlYXRlU2VsZWN0aW9uKHQsZSxpKXtyZXR1cm4gbmV3IGdsKHQsZSxpKX1fd3JhcENoaWxkcmVuKHQsZSxpLG4pe2xldCBvPWU7Y29uc3Qgcj1bXTt3aGlsZShvPGkpe2NvbnN0IGU9dC5nZXRDaGlsZChvKTtjb25zdCBpPWUuaXMoXCJ0ZXh0XCIpO2NvbnN0IHM9ZS5pcyhcImF0dHJpYnV0ZUVsZW1lbnRcIik7Y29uc3QgYT1lLmlzKFwiZW1wdHlFbGVtZW50XCIpO2NvbnN0IGM9ZS5pcyhcInVpRWxlbWVudFwiKTtpZihzJiZ0aGlzLl93cmFwQXR0cmlidXRlRWxlbWVudChuLGUpKXtyLnB1c2gobmV3IGRsKHQsbykpfWVsc2UgaWYoaXx8YXx8Y3x8cyYmSmwobixlKSl7Y29uc3QgaT1uLl9jbG9uZSgpO2UuX3JlbW92ZSgpO2kuX2FwcGVuZENoaWxkKGUpO3QuX2luc2VydENoaWxkKG8saSk7dGhpcy5fYWRkVG9DbG9uZWRFbGVtZW50c0dyb3VwKGkpO3IucHVzaChuZXcgZGwodCxvKSl9ZWxzZSBpZihzKXt0aGlzLl93cmFwQ2hpbGRyZW4oZSwwLGUuY2hpbGRDb3VudCxuKX1vKyt9bGV0IHM9MDtmb3IoY29uc3QgdCBvZiByKXt0Lm9mZnNldC09cztpZih0Lm9mZnNldD09ZSl7Y29udGludWV9Y29uc3Qgbj10aGlzLm1lcmdlQXR0cmlidXRlcyh0KTtpZighbi5pc0VxdWFsKHQpKXtzKys7aS0tfX1yZXR1cm4gdWwuX2NyZWF0ZUZyb21QYXJlbnRzQW5kT2Zmc2V0cyh0LGUsdCxpKX1fdW53cmFwQ2hpbGRyZW4odCxlLGksbil7bGV0IG89ZTtjb25zdCByPVtdO3doaWxlKG88aSl7Y29uc3QgZT10LmdldENoaWxkKG8pO2lmKCFlLmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKSl7bysrO2NvbnRpbnVlfWlmKGUuaXNTaW1pbGFyKG4pKXtjb25zdCBuPWUuZ2V0Q2hpbGRyZW4oKTtjb25zdCBzPWUuY2hpbGRDb3VudDtlLl9yZW1vdmUoKTt0Ll9pbnNlcnRDaGlsZChvLG4pO3RoaXMuX3JlbW92ZUZyb21DbG9uZWRFbGVtZW50c0dyb3VwKGUpO3IucHVzaChuZXcgZGwodCxvKSxuZXcgZGwodCxvK3MpKTtvKz1zO2krPXMtMTtjb250aW51ZX1pZih0aGlzLl91bndyYXBBdHRyaWJ1dGVFbGVtZW50KG4sZSkpe3IucHVzaChuZXcgZGwodCxvKSxuZXcgZGwodCxvKzEpKTtvKys7Y29udGludWV9dGhpcy5fdW53cmFwQ2hpbGRyZW4oZSwwLGUuY2hpbGRDb3VudCxuKTtvKyt9bGV0IHM9MDtmb3IoY29uc3QgdCBvZiByKXt0Lm9mZnNldC09cztpZih0Lm9mZnNldD09ZXx8dC5vZmZzZXQ9PWkpe2NvbnRpbnVlfWNvbnN0IG49dGhpcy5tZXJnZUF0dHJpYnV0ZXModCk7aWYoIW4uaXNFcXVhbCh0KSl7cysrO2ktLX19cmV0dXJuIHVsLl9jcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHModCxlLHQsaSl9X3dyYXBSYW5nZSh0LGUpe2NvbnN0e3N0YXJ0OmksZW5kOm59PXRoaXMuX2JyZWFrQXR0cmlidXRlc1JhbmdlKHQsdHJ1ZSk7Y29uc3Qgbz1pLnBhcmVudDtjb25zdCByPXRoaXMuX3dyYXBDaGlsZHJlbihvLGkub2Zmc2V0LG4ub2Zmc2V0LGUpO2NvbnN0IHM9dGhpcy5tZXJnZUF0dHJpYnV0ZXMoci5zdGFydCk7aWYoIXMuaXNFcXVhbChyLnN0YXJ0KSl7ci5lbmQub2Zmc2V0LS19Y29uc3QgYT10aGlzLm1lcmdlQXR0cmlidXRlcyhyLmVuZCk7cmV0dXJuIG5ldyB1bChzLGEpfV93cmFwUG9zaXRpb24odCxlKXtpZihlLmlzU2ltaWxhcih0LnBhcmVudCkpe3JldHVybiBZbCh0LmNsb25lKCkpfWlmKHQucGFyZW50LmlzKFwidGV4dFwiKSl7dD1RbCh0KX1jb25zdCBpPXRoaXMuY3JlYXRlQXR0cmlidXRlRWxlbWVudCgpO2kuX3ByaW9yaXR5PU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtpLmlzU2ltaWxhcj0oKT0+ZmFsc2U7dC5wYXJlbnQuX2luc2VydENoaWxkKHQub2Zmc2V0LGkpO2NvbnN0IG49bmV3IHVsKHQsdC5nZXRTaGlmdGVkQnkoMSkpO3RoaXMud3JhcChuLGUpO2NvbnN0IG89bmV3IGRsKGkucGFyZW50LGkuaW5kZXgpO2kuX3JlbW92ZSgpO2NvbnN0IHI9by5ub2RlQmVmb3JlO2NvbnN0IHM9by5ub2RlQWZ0ZXI7aWYociBpbnN0YW5jZW9mIExzJiZzIGluc3RhbmNlb2YgTHMpe3JldHVybiBYbChyLHMpfXJldHVybiBZbChvKX1fd3JhcEF0dHJpYnV0ZUVsZW1lbnQodCxlKXtpZighbmQodCxlKSl7cmV0dXJuIGZhbHNlfWlmKHQubmFtZSE9PWUubmFtZXx8dC5wcmlvcml0eSE9PWUucHJpb3JpdHkpe3JldHVybiBmYWxzZX1mb3IoY29uc3QgaSBvZiB0LmdldEF0dHJpYnV0ZUtleXMoKSl7aWYoaT09PVwiY2xhc3NcInx8aT09PVwic3R5bGVcIil7Y29udGludWV9aWYoZS5oYXNBdHRyaWJ1dGUoaSkmJmUuZ2V0QXR0cmlidXRlKGkpIT09dC5nZXRBdHRyaWJ1dGUoaSkpe3JldHVybiBmYWxzZX19Zm9yKGNvbnN0IGkgb2YgdC5nZXRTdHlsZU5hbWVzKCkpe2lmKGUuaGFzU3R5bGUoaSkmJmUuZ2V0U3R5bGUoaSkhPT10LmdldFN0eWxlKGkpKXtyZXR1cm4gZmFsc2V9fWZvcihjb25zdCBpIG9mIHQuZ2V0QXR0cmlidXRlS2V5cygpKXtpZihpPT09XCJjbGFzc1wifHxpPT09XCJzdHlsZVwiKXtjb250aW51ZX1pZighZS5oYXNBdHRyaWJ1dGUoaSkpe3RoaXMuc2V0QXR0cmlidXRlKGksdC5nZXRBdHRyaWJ1dGUoaSksZSl9fWZvcihjb25zdCBpIG9mIHQuZ2V0U3R5bGVOYW1lcygpKXtpZighZS5oYXNTdHlsZShpKSl7dGhpcy5zZXRTdHlsZShpLHQuZ2V0U3R5bGUoaSksZSl9fWZvcihjb25zdCBpIG9mIHQuZ2V0Q2xhc3NOYW1lcygpKXtpZighZS5oYXNDbGFzcyhpKSl7dGhpcy5hZGRDbGFzcyhpLGUpfX1yZXR1cm4gdHJ1ZX1fdW53cmFwQXR0cmlidXRlRWxlbWVudCh0LGUpe2lmKCFuZCh0LGUpKXtyZXR1cm4gZmFsc2V9aWYodC5uYW1lIT09ZS5uYW1lfHx0LnByaW9yaXR5IT09ZS5wcmlvcml0eSl7cmV0dXJuIGZhbHNlfWZvcihjb25zdCBpIG9mIHQuZ2V0QXR0cmlidXRlS2V5cygpKXtpZihpPT09XCJjbGFzc1wifHxpPT09XCJzdHlsZVwiKXtjb250aW51ZX1pZighZS5oYXNBdHRyaWJ1dGUoaSl8fGUuZ2V0QXR0cmlidXRlKGkpIT09dC5nZXRBdHRyaWJ1dGUoaSkpe3JldHVybiBmYWxzZX19aWYoIWUuaGFzQ2xhc3MoLi4udC5nZXRDbGFzc05hbWVzKCkpKXtyZXR1cm4gZmFsc2V9Zm9yKGNvbnN0IGkgb2YgdC5nZXRTdHlsZU5hbWVzKCkpe2lmKCFlLmhhc1N0eWxlKGkpfHxlLmdldFN0eWxlKGkpIT09dC5nZXRTdHlsZShpKSl7cmV0dXJuIGZhbHNlfX1mb3IoY29uc3QgaSBvZiB0LmdldEF0dHJpYnV0ZUtleXMoKSl7aWYoaT09PVwiY2xhc3NcInx8aT09PVwic3R5bGVcIil7Y29udGludWV9dGhpcy5yZW1vdmVBdHRyaWJ1dGUoaSxlKX10aGlzLnJlbW92ZUNsYXNzKEFycmF5LmZyb20odC5nZXRDbGFzc05hbWVzKCkpLGUpO3RoaXMucmVtb3ZlU3R5bGUoQXJyYXkuZnJvbSh0LmdldFN0eWxlTmFtZXMoKSksZSk7cmV0dXJuIHRydWV9X2JyZWFrQXR0cmlidXRlc1JhbmdlKHQsZT1mYWxzZSl7Y29uc3QgaT10LnN0YXJ0O2NvbnN0IG49dC5lbmQ7aWQodCx0aGlzLmRvY3VtZW50KTtpZih0LmlzQ29sbGFwc2VkKXtjb25zdCBpPXRoaXMuX2JyZWFrQXR0cmlidXRlcyh0LnN0YXJ0LGUpO3JldHVybiBuZXcgdWwoaSxpKX1jb25zdCBvPXRoaXMuX2JyZWFrQXR0cmlidXRlcyhuLGUpO2NvbnN0IHI9by5wYXJlbnQuY2hpbGRDb3VudDtjb25zdCBzPXRoaXMuX2JyZWFrQXR0cmlidXRlcyhpLGUpO28ub2Zmc2V0Kz1vLnBhcmVudC5jaGlsZENvdW50LXI7cmV0dXJuIG5ldyB1bChzLG8pfV9icmVha0F0dHJpYnV0ZXModCxlPWZhbHNlKXtjb25zdCBpPXQub2Zmc2V0O2NvbnN0IG49dC5wYXJlbnQ7aWYodC5wYXJlbnQuaXMoXCJlbXB0eUVsZW1lbnRcIikpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXdyaXRlci1jYW5ub3QtYnJlYWstZW1wdHktZWxlbWVudFwiLHRoaXMuZG9jdW1lbnQpfWlmKHQucGFyZW50LmlzKFwidWlFbGVtZW50XCIpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy13cml0ZXItY2Fubm90LWJyZWFrLXVpLWVsZW1lbnRcIix0aGlzLmRvY3VtZW50KX1pZighZSYmbi5pcyhcInRleHRcIikmJmVkKG4ucGFyZW50KSl7cmV0dXJuIHQuY2xvbmUoKX1pZihlZChuKSl7cmV0dXJuIHQuY2xvbmUoKX1pZihuLmlzKFwidGV4dFwiKSl7cmV0dXJuIHRoaXMuX2JyZWFrQXR0cmlidXRlcyhRbCh0KSxlKX1jb25zdCBvPW4uY2hpbGRDb3VudDtpZihpPT1vKXtjb25zdCB0PW5ldyBkbChuLnBhcmVudCxuLmluZGV4KzEpO3JldHVybiB0aGlzLl9icmVha0F0dHJpYnV0ZXModCxlKX1lbHNle2lmKGk9PT0wKXtjb25zdCB0PW5ldyBkbChuLnBhcmVudCxuLmluZGV4KTtyZXR1cm4gdGhpcy5fYnJlYWtBdHRyaWJ1dGVzKHQsZSl9ZWxzZXtjb25zdCB0PW4uaW5kZXgrMTtjb25zdCBvPW4uX2Nsb25lKCk7bi5wYXJlbnQuX2luc2VydENoaWxkKHQsbyk7dGhpcy5fYWRkVG9DbG9uZWRFbGVtZW50c0dyb3VwKG8pO2NvbnN0IHI9bi5jaGlsZENvdW50LWk7Y29uc3Qgcz1uLl9yZW1vdmVDaGlsZHJlbihpLHIpO28uX2FwcGVuZENoaWxkKHMpO2NvbnN0IGE9bmV3IGRsKG4ucGFyZW50LHQpO3JldHVybiB0aGlzLl9icmVha0F0dHJpYnV0ZXMoYSxlKX19fV9hZGRUb0Nsb25lZEVsZW1lbnRzR3JvdXAodCl7aWYoIXQucm9vdC5pcyhcInJvb3RFbGVtZW50XCIpKXtyZXR1cm59aWYodC5pcyhcImVsZW1lbnRcIikpe2Zvcihjb25zdCBlIG9mIHQuZ2V0Q2hpbGRyZW4oKSl7dGhpcy5fYWRkVG9DbG9uZWRFbGVtZW50c0dyb3VwKGUpfX1jb25zdCBlPXQuaWQ7aWYoIWUpe3JldHVybn1sZXQgaT10aGlzLl9jbG9uZUdyb3Vwcy5nZXQoZSk7aWYoIWkpe2k9bmV3IFNldDt0aGlzLl9jbG9uZUdyb3Vwcy5zZXQoZSxpKX1pLmFkZCh0KTt0Ll9jbG9uZXNHcm91cD1pfV9yZW1vdmVGcm9tQ2xvbmVkRWxlbWVudHNHcm91cCh0KXtpZih0LmlzKFwiZWxlbWVudFwiKSl7Zm9yKGNvbnN0IGUgb2YgdC5nZXRDaGlsZHJlbigpKXt0aGlzLl9yZW1vdmVGcm9tQ2xvbmVkRWxlbWVudHNHcm91cChlKX19Y29uc3QgZT10LmlkO2lmKCFlKXtyZXR1cm59Y29uc3QgaT10aGlzLl9jbG9uZUdyb3Vwcy5nZXQoZSk7aWYoIWkpe3JldHVybn1pLmRlbGV0ZSh0KX19ZnVuY3Rpb24gR2wodCl7cmV0dXJuIEFycmF5LmZyb20odC5nZXRDaGlsZHJlbigpKS5zb21lKHQ9PiF0LmlzKFwidWlFbGVtZW50XCIpKX1mdW5jdGlvbiBLbCh0KXtsZXQgZT10LnBhcmVudDt3aGlsZSghZWQoZSkpe2lmKCFlKXtyZXR1cm4gdW5kZWZpbmVkfWU9ZS5wYXJlbnR9cmV0dXJuIGV9ZnVuY3Rpb24gSmwodCxlKXtpZih0LnByaW9yaXR5PGUucHJpb3JpdHkpe3JldHVybiB0cnVlfWVsc2UgaWYodC5wcmlvcml0eT5lLnByaW9yaXR5KXtyZXR1cm4gZmFsc2V9cmV0dXJuIHQuZ2V0SWRlbnRpdHkoKTxlLmdldElkZW50aXR5KCl9ZnVuY3Rpb24gWWwodCl7Y29uc3QgZT10Lm5vZGVCZWZvcmU7aWYoZSYmZS5pcyhcInRleHRcIikpe3JldHVybiBuZXcgZGwoZSxlLmRhdGEubGVuZ3RoKX1jb25zdCBpPXQubm9kZUFmdGVyO2lmKGkmJmkuaXMoXCJ0ZXh0XCIpKXtyZXR1cm4gbmV3IGRsKGksMCl9cmV0dXJuIHR9ZnVuY3Rpb24gUWwodCl7aWYodC5vZmZzZXQ9PXQucGFyZW50LmRhdGEubGVuZ3RoKXtyZXR1cm4gbmV3IGRsKHQucGFyZW50LnBhcmVudCx0LnBhcmVudC5pbmRleCsxKX1pZih0Lm9mZnNldD09PTApe3JldHVybiBuZXcgZGwodC5wYXJlbnQucGFyZW50LHQucGFyZW50LmluZGV4KX1jb25zdCBlPXQucGFyZW50LmRhdGEuc2xpY2UodC5vZmZzZXQpO3QucGFyZW50Ll9kYXRhPXQucGFyZW50LmRhdGEuc2xpY2UoMCx0Lm9mZnNldCk7dC5wYXJlbnQucGFyZW50Ll9pbnNlcnRDaGlsZCh0LnBhcmVudC5pbmRleCsxLG5ldyBMcyh0LnJvb3QuZG9jdW1lbnQsZSkpO3JldHVybiBuZXcgZGwodC5wYXJlbnQucGFyZW50LHQucGFyZW50LmluZGV4KzEpfWZ1bmN0aW9uIFhsKHQsZSl7Y29uc3QgaT10LmRhdGEubGVuZ3RoO3QuX2RhdGErPWUuZGF0YTtlLl9yZW1vdmUoKTtyZXR1cm4gbmV3IGRsKHQsaSl9ZnVuY3Rpb24gWmwodCxlKXtmb3IoY29uc3QgaSBvZiB0KXtpZighdGQuc29tZSh0PT5pIGluc3RhbmNlb2YgdCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LXdyaXRlci1pbnNlcnQtaW52YWxpZC1ub2RlXCIsZSl9aWYoIWkuaXMoXCJ0ZXh0XCIpKXtabChpLmdldENoaWxkcmVuKCksZSl9fX1jb25zdCB0ZD1bTHMsd2wsamMsdmwsRGxdO2Z1bmN0aW9uIGVkKHQpe3JldHVybiB0JiYodC5pcyhcImNvbnRhaW5lckVsZW1lbnRcIil8fHQuaXMoXCJkb2N1bWVudEZyYWdtZW50XCIpKX1mdW5jdGlvbiBpZCh0LGUpe2NvbnN0IGk9S2wodC5zdGFydCk7Y29uc3Qgbj1LbCh0LmVuZCk7aWYoIWl8fCFufHxpIT09bil7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctd3JpdGVyLWludmFsaWQtcmFuZ2UtY29udGFpbmVyXCIsZSl9fWZ1bmN0aW9uIG5kKHQsZSl7cmV0dXJuIHQuaWQ9PT1udWxsJiZlLmlkPT09bnVsbH1mdW5jdGlvbiBvZCh0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpPT1cIltvYmplY3QgVGV4dF1cIn1jb25zdCByZD10PT50LmNyZWF0ZVRleHROb2RlKFwiwqBcIik7Y29uc3Qgc2Q9dD0+e2NvbnN0IGU9dC5jcmVhdGVFbGVtZW50KFwiYnJcIik7ZS5kYXRhc2V0LmNrZUZpbGxlcj10cnVlO3JldHVybiBlfTtjb25zdCBhZD03O2NvbnN0IGNkPSgoKT0+e2xldCB0PVwiXCI7Zm9yKGxldCBlPTA7ZTxhZDtlKyspe3QrPVwi4oCLXCJ9cmV0dXJuIHR9KSgpO2Z1bmN0aW9uIGxkKHQpe3JldHVybiBvZCh0KSYmdC5kYXRhLnN1YnN0cigwLGFkKT09PWNkfWZ1bmN0aW9uIGRkKHQpe3JldHVybiB0LmRhdGEubGVuZ3RoPT1hZCYmbGQodCl9ZnVuY3Rpb24gdWQodCl7aWYobGQodCkpe3JldHVybiB0LmRhdGEuc2xpY2UoYWQpfWVsc2V7cmV0dXJuIHQuZGF0YX19ZnVuY3Rpb24gaGQodCl7dC5kb2N1bWVudC5vbihcImtleWRvd25cIixmZCl9ZnVuY3Rpb24gZmQodCxlKXtpZihlLmtleUNvZGU9PU5sLmFycm93bGVmdCl7Y29uc3QgdD1lLmRvbVRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldFNlbGVjdGlvbigpO2lmKHQucmFuZ2VDb3VudD09MSYmdC5nZXRSYW5nZUF0KDApLmNvbGxhcHNlZCl7Y29uc3QgZT10LmdldFJhbmdlQXQoMCkuc3RhcnRDb250YWluZXI7Y29uc3QgaT10LmdldFJhbmdlQXQoMCkuc3RhcnRPZmZzZXQ7aWYobGQoZSkmJmk8PWFkKXt0LmNvbGxhcHNlKGUsMCl9fX19ZnVuY3Rpb24gZ2QodCxlLGksbj1mYWxzZSl7aT1pfHxmdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZX07aWYoIUFycmF5LmlzQXJyYXkodCkpe3Q9QXJyYXkuZnJvbSh0KX1pZighQXJyYXkuaXNBcnJheShlKSl7ZT1BcnJheS5mcm9tKGUpfWNvbnN0IG89bWQodCxlLGkpO3JldHVybiBuP2tkKG8sZS5sZW5ndGgpOndkKGUsbyl9ZnVuY3Rpb24gbWQodCxlLGkpe2NvbnN0IG49cGQodCxlLGkpO2lmKG49PT0tMSl7cmV0dXJue2ZpcnN0SW5kZXg6LTEsbGFzdEluZGV4T2xkOi0xLGxhc3RJbmRleE5ldzotMX19Y29uc3Qgbz1iZCh0LG4pO2NvbnN0IHI9YmQoZSxuKTtjb25zdCBzPXBkKG8scixpKTtjb25zdCBhPXQubGVuZ3RoLXM7Y29uc3QgYz1lLmxlbmd0aC1zO3JldHVybntmaXJzdEluZGV4Om4sbGFzdEluZGV4T2xkOmEsbGFzdEluZGV4TmV3OmN9fWZ1bmN0aW9uIHBkKHQsZSxpKXtmb3IobGV0IG49MDtuPE1hdGgubWF4KHQubGVuZ3RoLGUubGVuZ3RoKTtuKyspe2lmKHRbbl09PT11bmRlZmluZWR8fGVbbl09PT11bmRlZmluZWR8fCFpKHRbbl0sZVtuXSkpe3JldHVybiBufX1yZXR1cm4tMX1mdW5jdGlvbiBiZCh0LGUpe3JldHVybiB0LnNsaWNlKGUpLnJldmVyc2UoKX1mdW5jdGlvbiB3ZCh0LGUpe2NvbnN0IGk9W107Y29uc3R7Zmlyc3RJbmRleDpuLGxhc3RJbmRleE9sZDpvLGxhc3RJbmRleE5ldzpyfT1lO2lmKHItbj4wKXtpLnB1c2goe2luZGV4Om4sdHlwZTpcImluc2VydFwiLHZhbHVlczp0LnNsaWNlKG4scil9KX1pZihvLW4+MCl7aS5wdXNoKHtpbmRleDpuKyhyLW4pLHR5cGU6XCJkZWxldGVcIixob3dNYW55Om8tbn0pfXJldHVybiBpfWZ1bmN0aW9uIGtkKHQsZSl7Y29uc3R7Zmlyc3RJbmRleDppLGxhc3RJbmRleE9sZDpuLGxhc3RJbmRleE5ldzpvfT10O2lmKGk9PT0tMSl7cmV0dXJuIEFycmF5KGUpLmZpbGwoXCJlcXVhbFwiKX1sZXQgcj1bXTtpZihpPjApe3I9ci5jb25jYXQoQXJyYXkoaSkuZmlsbChcImVxdWFsXCIpKX1pZihvLWk+MCl7cj1yLmNvbmNhdChBcnJheShvLWkpLmZpbGwoXCJpbnNlcnRcIikpfWlmKG4taT4wKXtyPXIuY29uY2F0KEFycmF5KG4taSkuZmlsbChcImRlbGV0ZVwiKSl9aWYobzxlKXtyPXIuY29uY2F0KEFycmF5KGUtbykuZmlsbChcImVxdWFsXCIpKX1yZXR1cm4gcn1mdW5jdGlvbiBfZCh0LGUsaSl7aT1pfHxmdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZX07Y29uc3Qgbj10Lmxlbmd0aDtjb25zdCBvPWUubGVuZ3RoO2lmKG4+MjAwfHxvPjIwMHx8bitvPjMwMCl7cmV0dXJuIF9kLmZhc3REaWZmKHQsZSxpLHRydWUpfWxldCByLHM7aWYobzxuKXtjb25zdCBpPXQ7dD1lO2U9aTtyPVwiZGVsZXRlXCI7cz1cImluc2VydFwifWVsc2V7cj1cImluc2VydFwiO3M9XCJkZWxldGVcIn1jb25zdCBhPXQubGVuZ3RoO2NvbnN0IGM9ZS5sZW5ndGg7Y29uc3QgbD1jLWE7Y29uc3QgZD17fTtjb25zdCB1PXt9O2Z1bmN0aW9uIGgobil7Y29uc3Qgbz0odVtuLTFdIT09dW5kZWZpbmVkP3Vbbi0xXTotMSkrMTtjb25zdCBsPXVbbisxXSE9PXVuZGVmaW5lZD91W24rMV06LTE7Y29uc3QgaD1vPmw/LTE6MTtpZihkW24raF0pe2Rbbl09ZFtuK2hdLnNsaWNlKDApfWlmKCFkW25dKXtkW25dPVtdfWRbbl0ucHVzaChvPmw/cjpzKTtsZXQgZj1NYXRoLm1heChvLGwpO2xldCBnPWYtbjt3aGlsZShnPGEmJmY8YyYmaSh0W2ddLGVbZl0pKXtnKys7ZisrO2Rbbl0ucHVzaChcImVxdWFsXCIpfXJldHVybiBmfWxldCBmPTA7bGV0IGc7ZG97Zm9yKGc9LWY7ZzxsO2crKyl7dVtnXT1oKGcpfWZvcihnPWwrZjtnPmw7Zy0tKXt1W2ddPWgoZyl9dVtsXT1oKGwpO2YrK313aGlsZSh1W2xdIT09Yyk7cmV0dXJuIGRbbF0uc2xpY2UoMSl9X2QuZmFzdERpZmY9Z2Q7ZnVuY3Rpb24gdmQodCxlLGkpe3QuaW5zZXJ0QmVmb3JlKGksdC5jaGlsZE5vZGVzW2VdfHxudWxsKX1mdW5jdGlvbiB5ZCh0KXtjb25zdCBlPXQucGFyZW50Tm9kZTtpZihlKXtlLnJlbW92ZUNoaWxkKHQpfX1mdW5jdGlvbiB4ZCh0KXtpZih0KXtpZih0LmRlZmF1bHRWaWV3KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHQuZGVmYXVsdFZpZXcuRG9jdW1lbnR9ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJnQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyl7cmV0dXJuIHQgaW5zdGFuY2VvZiB0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuTm9kZX19cmV0dXJuIGZhbHNlfWNsYXNzIENke2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5kb21Eb2N1bWVudHM9bmV3IFNldDt0aGlzLmRvbUNvbnZlcnRlcj10O3RoaXMubWFya2VkQXR0cmlidXRlcz1uZXcgU2V0O3RoaXMubWFya2VkQ2hpbGRyZW49bmV3IFNldDt0aGlzLm1hcmtlZFRleHRzPW5ldyBTZXQ7dGhpcy5zZWxlY3Rpb249ZTt0aGlzLmlzRm9jdXNlZD1mYWxzZTt0aGlzLl9pbmxpbmVGaWxsZXI9bnVsbDt0aGlzLl9mYWtlU2VsZWN0aW9uQ29udGFpbmVyPW51bGx9bWFya1RvU3luYyh0LGUpe2lmKHQ9PT1cInRleHRcIil7aWYodGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKGUucGFyZW50KSl7dGhpcy5tYXJrZWRUZXh0cy5hZGQoZSl9fWVsc2V7aWYoIXRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbShlKSl7cmV0dXJufWlmKHQ9PT1cImF0dHJpYnV0ZXNcIil7dGhpcy5tYXJrZWRBdHRyaWJ1dGVzLmFkZChlKX1lbHNlIGlmKHQ9PT1cImNoaWxkcmVuXCIpe3RoaXMubWFya2VkQ2hpbGRyZW4uYWRkKGUpfWVsc2V7dGhyb3cgbmV3IHNzW1wiYlwiXShcInZpZXctcmVuZGVyZXItdW5rbm93bi10eXBlOiBVbmtub3duIHR5cGUgcGFzc2VkIHRvIFJlbmRlcmVyLm1hcmtUb1N5bmMuXCIsdGhpcyl9fX1yZW5kZXIoKXtsZXQgdDtmb3IoY29uc3QgdCBvZiB0aGlzLm1hcmtlZENoaWxkcmVuKXt0aGlzLl91cGRhdGVDaGlsZHJlbk1hcHBpbmdzKHQpfWlmKHRoaXMuX2lubGluZUZpbGxlciYmIXRoaXMuX2lzU2VsZWN0aW9uSW5JbmxpbmVGaWxsZXIoKSl7dGhpcy5fcmVtb3ZlSW5saW5lRmlsbGVyKCl9aWYodGhpcy5faW5saW5lRmlsbGVyKXt0PXRoaXMuX2dldElubGluZUZpbGxlclBvc2l0aW9uKCl9ZWxzZSBpZih0aGlzLl9uZWVkc0lubGluZUZpbGxlckF0U2VsZWN0aW9uKCkpe3Q9dGhpcy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpO3RoaXMubWFya2VkQ2hpbGRyZW4uYWRkKHQucGFyZW50KX1mb3IoY29uc3QgdCBvZiB0aGlzLm1hcmtlZEF0dHJpYnV0ZXMpe3RoaXMuX3VwZGF0ZUF0dHJzKHQpfWZvcihjb25zdCBlIG9mIHRoaXMubWFya2VkQ2hpbGRyZW4pe3RoaXMuX3VwZGF0ZUNoaWxkcmVuKGUse2lubGluZUZpbGxlclBvc2l0aW9uOnR9KX1mb3IoY29uc3QgZSBvZiB0aGlzLm1hcmtlZFRleHRzKXtpZighdGhpcy5tYXJrZWRDaGlsZHJlbi5oYXMoZS5wYXJlbnQpJiZ0aGlzLmRvbUNvbnZlcnRlci5tYXBWaWV3VG9Eb20oZS5wYXJlbnQpKXt0aGlzLl91cGRhdGVUZXh0KGUse2lubGluZUZpbGxlclBvc2l0aW9uOnR9KX19aWYodCl7Y29uc3QgZT10aGlzLmRvbUNvbnZlcnRlci52aWV3UG9zaXRpb25Ub0RvbSh0KTtjb25zdCBpPWUucGFyZW50Lm93bmVyRG9jdW1lbnQ7aWYoIWxkKGUucGFyZW50KSl7dGhpcy5faW5saW5lRmlsbGVyPVRkKGksZS5wYXJlbnQsZS5vZmZzZXQpfWVsc2V7dGhpcy5faW5saW5lRmlsbGVyPWUucGFyZW50fX1lbHNle3RoaXMuX2lubGluZUZpbGxlcj1udWxsfXRoaXMuX3VwZGF0ZVNlbGVjdGlvbigpO3RoaXMuX3VwZGF0ZUZvY3VzKCk7dGhpcy5tYXJrZWRUZXh0cy5jbGVhcigpO3RoaXMubWFya2VkQXR0cmlidXRlcy5jbGVhcigpO3RoaXMubWFya2VkQ2hpbGRyZW4uY2xlYXIoKX1fdXBkYXRlQ2hpbGRyZW5NYXBwaW5ncyh0KXtjb25zdCBlPXRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbSh0KTtpZighZSl7cmV0dXJufWNvbnN0IGk9dGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKHQpLmNoaWxkTm9kZXM7Y29uc3Qgbj1BcnJheS5mcm9tKHRoaXMuZG9tQ29udmVydGVyLnZpZXdDaGlsZHJlblRvRG9tKHQsZS5vd25lckRvY3VtZW50LHt3aXRoQ2hpbGRyZW46ZmFsc2V9KSk7Y29uc3Qgbz10aGlzLl9kaWZmTm9kZUxpc3RzKGksbik7Y29uc3Qgcj10aGlzLl9maW5kUmVwbGFjZUFjdGlvbnMobyxpLG4pO2lmKHIuaW5kZXhPZihcInJlcGxhY2VcIikhPT0tMSl7Y29uc3QgZT17ZXF1YWw6MCxpbnNlcnQ6MCxkZWxldGU6MH07Zm9yKGNvbnN0IG8gb2Ygcil7aWYobz09PVwicmVwbGFjZVwiKXtjb25zdCBvPWUuZXF1YWwrZS5pbnNlcnQ7Y29uc3Qgcj1lLmVxdWFsK2UuZGVsZXRlO2NvbnN0IHM9dC5nZXRDaGlsZChvKTtpZihzJiYhcy5pcyhcInVpRWxlbWVudFwiKSl7dGhpcy5fdXBkYXRlRWxlbWVudE1hcHBpbmdzKHMsaVtyXSl9eWQobltvXSk7ZS5lcXVhbCsrfWVsc2V7ZVtvXSsrfX19fV91cGRhdGVFbGVtZW50TWFwcGluZ3ModCxlKXt0aGlzLmRvbUNvbnZlcnRlci51bmJpbmREb21FbGVtZW50KGUpO3RoaXMuZG9tQ29udmVydGVyLmJpbmRFbGVtZW50cyhlLHQpO3RoaXMubWFya2VkQ2hpbGRyZW4uYWRkKHQpO3RoaXMubWFya2VkQXR0cmlidXRlcy5hZGQodCl9X2dldElubGluZUZpbGxlclBvc2l0aW9uKCl7Y29uc3QgdD10aGlzLnNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCk7aWYodC5wYXJlbnQuaXMoXCJ0ZXh0XCIpKXtyZXR1cm4gZGwuX2NyZWF0ZUJlZm9yZSh0aGlzLnNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCkucGFyZW50KX1lbHNle3JldHVybiB0fX1faXNTZWxlY3Rpb25JbklubGluZUZpbGxlcigpe2lmKHRoaXMuc2VsZWN0aW9uLnJhbmdlQ291bnQhPTF8fCF0aGlzLnNlbGVjdGlvbi5pc0NvbGxhcHNlZCl7cmV0dXJuIGZhbHNlfWNvbnN0IHQ9dGhpcy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpO2NvbnN0IGU9dGhpcy5kb21Db252ZXJ0ZXIudmlld1Bvc2l0aW9uVG9Eb20odCk7aWYoZSYmb2QoZS5wYXJlbnQpJiZsZChlLnBhcmVudCkpe3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1fcmVtb3ZlSW5saW5lRmlsbGVyKCl7Y29uc3QgdD10aGlzLl9pbmxpbmVGaWxsZXI7aWYoIWxkKHQpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidmlldy1yZW5kZXJlci1maWxsZXItd2FzLWxvc3Q6IFRoZSBpbmxpbmUgZmlsbGVyIG5vZGUgd2FzIGxvc3QuXCIsdGhpcyl9aWYoZGQodCkpe3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX1lbHNle3QuZGF0YT10LmRhdGEuc3Vic3RyKGFkKX10aGlzLl9pbmxpbmVGaWxsZXI9bnVsbH1fbmVlZHNJbmxpbmVGaWxsZXJBdFNlbGVjdGlvbigpe2lmKHRoaXMuc2VsZWN0aW9uLnJhbmdlQ291bnQhPTF8fCF0aGlzLnNlbGVjdGlvbi5pc0NvbGxhcHNlZCl7cmV0dXJuIGZhbHNlfWNvbnN0IHQ9dGhpcy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpO2NvbnN0IGU9dC5wYXJlbnQ7Y29uc3QgaT10Lm9mZnNldDtpZighdGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKGUucm9vdCkpe3JldHVybiBmYWxzZX1pZighZS5pcyhcImVsZW1lbnRcIikpe3JldHVybiBmYWxzZX1pZighQWQoZSkpe3JldHVybiBmYWxzZX1pZihpPT09ZS5nZXRGaWxsZXJPZmZzZXQoKSl7cmV0dXJuIGZhbHNlfWNvbnN0IG49dC5ub2RlQmVmb3JlO2NvbnN0IG89dC5ub2RlQWZ0ZXI7aWYobiBpbnN0YW5jZW9mIExzfHxvIGluc3RhbmNlb2YgTHMpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX1fdXBkYXRlVGV4dCh0LGUpe2NvbnN0IGk9dGhpcy5kb21Db252ZXJ0ZXIuZmluZENvcnJlc3BvbmRpbmdEb21UZXh0KHQpO2NvbnN0IG49dGhpcy5kb21Db252ZXJ0ZXIudmlld1RvRG9tKHQsaS5vd25lckRvY3VtZW50KTtjb25zdCBvPWkuZGF0YTtsZXQgcj1uLmRhdGE7Y29uc3Qgcz1lLmlubGluZUZpbGxlclBvc2l0aW9uO2lmKHMmJnMucGFyZW50PT10LnBhcmVudCYmcy5vZmZzZXQ9PXQuaW5kZXgpe3I9Y2Qrcn1pZihvIT1yKXtjb25zdCB0PWdkKG8scik7Zm9yKGNvbnN0IGUgb2YgdCl7aWYoZS50eXBlPT09XCJpbnNlcnRcIil7aS5pbnNlcnREYXRhKGUuaW5kZXgsZS52YWx1ZXMuam9pbihcIlwiKSl9ZWxzZXtpLmRlbGV0ZURhdGEoZS5pbmRleCxlLmhvd01hbnkpfX19fV91cGRhdGVBdHRycyh0KXtjb25zdCBlPXRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbSh0KTtpZighZSl7cmV0dXJufWNvbnN0IGk9QXJyYXkuZnJvbShlLmF0dHJpYnV0ZXMpLm1hcCh0PT50Lm5hbWUpO2NvbnN0IG49dC5nZXRBdHRyaWJ1dGVLZXlzKCk7Zm9yKGNvbnN0IGkgb2Ygbil7ZS5zZXRBdHRyaWJ1dGUoaSx0LmdldEF0dHJpYnV0ZShpKSl9Zm9yKGNvbnN0IG4gb2YgaSl7aWYoIXQuaGFzQXR0cmlidXRlKG4pKXtlLnJlbW92ZUF0dHJpYnV0ZShuKX19fV91cGRhdGVDaGlsZHJlbih0LGUpe2NvbnN0IGk9dGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKHQpO2lmKCFpKXtyZXR1cm59Y29uc3Qgbj1lLmlubGluZUZpbGxlclBvc2l0aW9uO2NvbnN0IG89dGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKHQpLmNoaWxkTm9kZXM7Y29uc3Qgcj1BcnJheS5mcm9tKHRoaXMuZG9tQ29udmVydGVyLnZpZXdDaGlsZHJlblRvRG9tKHQsaS5vd25lckRvY3VtZW50LHtiaW5kOnRydWUsaW5saW5lRmlsbGVyUG9zaXRpb246bn0pKTtpZihuJiZuLnBhcmVudD09PXQpe1RkKGkub3duZXJEb2N1bWVudCxyLG4ub2Zmc2V0KX1jb25zdCBzPXRoaXMuX2RpZmZOb2RlTGlzdHMobyxyKTtsZXQgYT0wO2NvbnN0IGM9bmV3IFNldDtmb3IoY29uc3QgdCBvZiBzKXtpZih0PT09XCJkZWxldGVcIil7Yy5hZGQob1thXSk7eWQob1thXSl9ZWxzZSBpZih0PT09XCJlcXVhbFwiKXthKyt9fWE9MDtmb3IoY29uc3QgdCBvZiBzKXtpZih0PT09XCJpbnNlcnRcIil7dmQoaSxhLHJbYV0pO2ErK31lbHNlIGlmKHQ9PT1cImVxdWFsXCIpe3RoaXMuX21hcmtEZXNjZW5kYW50VGV4dFRvU3luYyh0aGlzLmRvbUNvbnZlcnRlci5kb21Ub1ZpZXcoclthXSkpO2ErK319Zm9yKGNvbnN0IHQgb2YgYyl7aWYoIXQucGFyZW50Tm9kZSl7dGhpcy5kb21Db252ZXJ0ZXIudW5iaW5kRG9tRWxlbWVudCh0KX19fV9kaWZmTm9kZUxpc3RzKHQsZSl7dD1SZCh0LHRoaXMuX2Zha2VTZWxlY3Rpb25Db250YWluZXIpO3JldHVybiBfZCh0LGUsU2QuYmluZChudWxsLHRoaXMuZG9tQ29udmVydGVyKSl9X2ZpbmRSZXBsYWNlQWN0aW9ucyh0LGUsaSl7aWYodC5pbmRleE9mKFwiaW5zZXJ0XCIpPT09LTF8fHQuaW5kZXhPZihcImRlbGV0ZVwiKT09PS0xKXtyZXR1cm4gdH1sZXQgbj1bXTtsZXQgbz1bXTtsZXQgcj1bXTtjb25zdCBzPXtlcXVhbDowLGluc2VydDowLGRlbGV0ZTowfTtmb3IoY29uc3QgYSBvZiB0KXtpZihhPT09XCJpbnNlcnRcIil7ci5wdXNoKGlbcy5lcXVhbCtzLmluc2VydF0pfWVsc2UgaWYoYT09PVwiZGVsZXRlXCIpe28ucHVzaChlW3MuZXF1YWwrcy5kZWxldGVdKX1lbHNle249bi5jb25jYXQoX2QobyxyLFBkKS5tYXAodD0+dD09PVwiZXF1YWxcIj9cInJlcGxhY2VcIjp0KSk7bi5wdXNoKFwiZXF1YWxcIik7bz1bXTtyPVtdfXNbYV0rK31yZXR1cm4gbi5jb25jYXQoX2QobyxyLFBkKS5tYXAodD0+dD09PVwiZXF1YWxcIj9cInJlcGxhY2VcIjp0KSl9X21hcmtEZXNjZW5kYW50VGV4dFRvU3luYyh0KXtpZighdCl7cmV0dXJufWlmKHQuaXMoXCJ0ZXh0XCIpKXt0aGlzLm1hcmtlZFRleHRzLmFkZCh0KX1lbHNlIGlmKHQuaXMoXCJlbGVtZW50XCIpKXtmb3IoY29uc3QgZSBvZiB0LmdldENoaWxkcmVuKCkpe3RoaXMuX21hcmtEZXNjZW5kYW50VGV4dFRvU3luYyhlKX19fV91cGRhdGVTZWxlY3Rpb24oKXtpZih0aGlzLnNlbGVjdGlvbi5yYW5nZUNvdW50PT09MCl7dGhpcy5fcmVtb3ZlRG9tU2VsZWN0aW9uKCk7dGhpcy5fcmVtb3ZlRmFrZVNlbGVjdGlvbigpO3JldHVybn1jb25zdCB0PXRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbSh0aGlzLnNlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnQpO2lmKCF0aGlzLmlzRm9jdXNlZHx8IXQpe3JldHVybn1pZih0aGlzLnNlbGVjdGlvbi5pc0Zha2Upe3RoaXMuX3VwZGF0ZUZha2VTZWxlY3Rpb24odCl9ZWxzZXt0aGlzLl9yZW1vdmVGYWtlU2VsZWN0aW9uKCk7dGhpcy5fdXBkYXRlRG9tU2VsZWN0aW9uKHQpfX1fdXBkYXRlRmFrZVNlbGVjdGlvbih0KXtjb25zdCBlPXQub3duZXJEb2N1bWVudDtpZighdGhpcy5fZmFrZVNlbGVjdGlvbkNvbnRhaW5lcil7dGhpcy5fZmFrZVNlbGVjdGlvbkNvbnRhaW5lcj1PZChlKX1jb25zdCBpPXRoaXMuX2Zha2VTZWxlY3Rpb25Db250YWluZXI7dGhpcy5kb21Db252ZXJ0ZXIuYmluZEZha2VTZWxlY3Rpb24oaSx0aGlzLnNlbGVjdGlvbik7aWYoIXRoaXMuX2Zha2VTZWxlY3Rpb25OZWVkc1VwZGF0ZSh0KSl7cmV0dXJufWlmKCFpLnBhcmVudEVsZW1lbnR8fGkucGFyZW50RWxlbWVudCE9dCl7dC5hcHBlbmRDaGlsZChpKX1pLnRleHRDb250ZW50PXRoaXMuc2VsZWN0aW9uLmZha2VTZWxlY3Rpb25MYWJlbHx8XCLCoFwiO2NvbnN0IG49ZS5nZXRTZWxlY3Rpb24oKTtjb25zdCBvPWUuY3JlYXRlUmFuZ2UoKTtuLnJlbW92ZUFsbFJhbmdlcygpO28uc2VsZWN0Tm9kZUNvbnRlbnRzKGkpO24uYWRkUmFuZ2Uobyl9X3VwZGF0ZURvbVNlbGVjdGlvbih0KXtjb25zdCBlPXQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKTtpZighdGhpcy5fZG9tU2VsZWN0aW9uTmVlZHNVcGRhdGUoZSkpe3JldHVybn1jb25zdCBpPXRoaXMuZG9tQ29udmVydGVyLnZpZXdQb3NpdGlvblRvRG9tKHRoaXMuc2VsZWN0aW9uLmFuY2hvcik7Y29uc3Qgbj10aGlzLmRvbUNvbnZlcnRlci52aWV3UG9zaXRpb25Ub0RvbSh0aGlzLnNlbGVjdGlvbi5mb2N1cyk7dC5mb2N1cygpO2UuY29sbGFwc2UoaS5wYXJlbnQsaS5vZmZzZXQpO2UuZXh0ZW5kKG4ucGFyZW50LG4ub2Zmc2V0KTtpZihBbC5pc0dlY2tvKXtFZChuLGUpfX1fZG9tU2VsZWN0aW9uTmVlZHNVcGRhdGUodCl7aWYoIXRoaXMuZG9tQ29udmVydGVyLmlzRG9tU2VsZWN0aW9uQ29ycmVjdCh0KSl7cmV0dXJuIHRydWV9Y29uc3QgZT10JiZ0aGlzLmRvbUNvbnZlcnRlci5kb21TZWxlY3Rpb25Ub1ZpZXcodCk7aWYoZSYmdGhpcy5zZWxlY3Rpb24uaXNFcXVhbChlKSl7cmV0dXJuIGZhbHNlfWlmKCF0aGlzLnNlbGVjdGlvbi5pc0NvbGxhcHNlZCYmdGhpcy5zZWxlY3Rpb24uaXNTaW1pbGFyKGUpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9X2Zha2VTZWxlY3Rpb25OZWVkc1VwZGF0ZSh0KXtjb25zdCBlPXRoaXMuX2Zha2VTZWxlY3Rpb25Db250YWluZXI7Y29uc3QgaT10Lm93bmVyRG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7aWYoIWV8fGUucGFyZW50RWxlbWVudCE9PXQpe3JldHVybiB0cnVlfWlmKGkuYW5jaG9yTm9kZSE9PWUmJiFlLmNvbnRhaW5zKGkuYW5jaG9yTm9kZSkpe3JldHVybiB0cnVlfXJldHVybiBlLnRleHRDb250ZW50IT09dGhpcy5zZWxlY3Rpb24uZmFrZVNlbGVjdGlvbkxhYmVsfV9yZW1vdmVEb21TZWxlY3Rpb24oKXtmb3IoY29uc3QgdCBvZiB0aGlzLmRvbURvY3VtZW50cyl7Y29uc3QgZT10LmdldFNlbGVjdGlvbigpO2lmKGUucmFuZ2VDb3VudCl7Y29uc3QgZT10LmFjdGl2ZUVsZW1lbnQ7Y29uc3QgaT10aGlzLmRvbUNvbnZlcnRlci5tYXBEb21Ub1ZpZXcoZSk7aWYoZSYmaSl7dC5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKX19fX1fcmVtb3ZlRmFrZVNlbGVjdGlvbigpe2NvbnN0IHQ9dGhpcy5fZmFrZVNlbGVjdGlvbkNvbnRhaW5lcjtpZih0KXt0LnJlbW92ZSgpfX1fdXBkYXRlRm9jdXMoKXtpZih0aGlzLmlzRm9jdXNlZCl7Y29uc3QgdD10aGlzLnNlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnQ7aWYodCl7dGhpcy5kb21Db252ZXJ0ZXIuZm9jdXModCl9fX19dnMoQ2QsSmMpO2Z1bmN0aW9uIEFkKHQpe2lmKHQuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpPT1cImZhbHNlXCIpe3JldHVybiBmYWxzZX1jb25zdCBlPXQuZmluZEFuY2VzdG9yKHQ9PnQuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKTtyZXR1cm4hZXx8ZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik9PVwidHJ1ZVwifWZ1bmN0aW9uIFRkKHQsZSxpKXtjb25zdCBuPWUgaW5zdGFuY2VvZiBBcnJheT9lOmUuY2hpbGROb2Rlcztjb25zdCBvPW5baV07aWYob2Qobykpe28uZGF0YT1jZCtvLmRhdGE7cmV0dXJuIG99ZWxzZXtjb25zdCBvPXQuY3JlYXRlVGV4dE5vZGUoY2QpO2lmKEFycmF5LmlzQXJyYXkoZSkpe24uc3BsaWNlKGksMCxvKX1lbHNle3ZkKGUsaSxvKX1yZXR1cm4gb319ZnVuY3Rpb24gUGQodCxlKXtyZXR1cm4geGQodCkmJnhkKGUpJiYhb2QodCkmJiFvZChlKSYmdC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBTZCh0LGUsaSl7aWYoZT09PWkpe3JldHVybiB0cnVlfWVsc2UgaWYob2QoZSkmJm9kKGkpKXtyZXR1cm4gZS5kYXRhPT09aS5kYXRhfWVsc2UgaWYodC5pc0Jsb2NrRmlsbGVyKGUpJiZ0LmlzQmxvY2tGaWxsZXIoaSkpe3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiBFZCh0LGUpe2NvbnN0IGk9dC5wYXJlbnQ7aWYoaS5ub2RlVHlwZSE9Tm9kZS5FTEVNRU5UX05PREV8fHQub2Zmc2V0IT1pLmNoaWxkTm9kZXMubGVuZ3RoLTEpe3JldHVybn1jb25zdCBuPWkuY2hpbGROb2Rlc1t0Lm9mZnNldF07aWYobiYmbi50YWdOYW1lPT1cIkJSXCIpe2UuYWRkUmFuZ2UoZS5nZXRSYW5nZUF0KDApKX19ZnVuY3Rpb24gUmQodCxlKXtjb25zdCBpPUFycmF5LmZyb20odCk7aWYoaS5sZW5ndGg9PTB8fCFlKXtyZXR1cm4gaX1jb25zdCBuPWlbaS5sZW5ndGgtMV07aWYobj09ZSl7aS5wb3AoKX1yZXR1cm4gaX1mdW5jdGlvbiBPZCh0KXtjb25zdCBlPXQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtPYmplY3QuYXNzaWduKGUuc3R5bGUse3Bvc2l0aW9uOlwiZml4ZWRcIix0b3A6MCxsZWZ0OlwiLTk5OTlweFwiLHdpZHRoOlwiNDJweFwifSk7ZS50ZXh0Q29udGVudD1cIsKgXCI7cmV0dXJuIGV9dmFyIElkPXt3aW5kb3c6d2luZG93LGRvY3VtZW50OmRvY3VtZW50fTtmdW5jdGlvbiBWZCh0KXtsZXQgZT0wO3doaWxlKHQucHJldmlvdXNTaWJsaW5nKXt0PXQucHJldmlvdXNTaWJsaW5nO2UrK31yZXR1cm4gZX1mdW5jdGlvbiBOZCh0KXtjb25zdCBlPVtdO3doaWxlKHQmJnQubm9kZVR5cGUhPU5vZGUuRE9DVU1FTlRfTk9ERSl7ZS51bnNoaWZ0KHQpO3Q9dC5wYXJlbnROb2RlfXJldHVybiBlfWZ1bmN0aW9uIE1kKHQsZSl7Y29uc3QgaT1OZCh0KTtjb25zdCBuPU5kKGUpO2xldCBvPTA7d2hpbGUoaVtvXT09bltvXSYmaVtvXSl7bysrfXJldHVybiBvPT09MD9udWxsOmlbby0xXX1jb25zdCBCZD1zZChkb2N1bWVudCk7Y2xhc3MgemR7Y29uc3RydWN0b3IodCxlPXt9KXt0aGlzLmRvY3VtZW50PXQ7dGhpcy5ibG9ja0ZpbGxlck1vZGU9ZS5ibG9ja0ZpbGxlck1vZGV8fFwiYnJcIjt0aGlzLnByZUVsZW1lbnRzPVtcInByZVwiXTt0aGlzLmJsb2NrRWxlbWVudHM9W1wicFwiLFwiZGl2XCIsXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCIsXCJsaVwiLFwiZGRcIixcImR0XCIsXCJmaWdjYXB0aW9uXCJdO3RoaXMuX2Jsb2NrRmlsbGVyPXRoaXMuYmxvY2tGaWxsZXJNb2RlPT1cImJyXCI/c2Q6cmQ7dGhpcy5fZG9tVG9WaWV3TWFwcGluZz1uZXcgV2Vha01hcDt0aGlzLl92aWV3VG9Eb21NYXBwaW5nPW5ldyBXZWFrTWFwO3RoaXMuX2Zha2VTZWxlY3Rpb25NYXBwaW5nPW5ldyBXZWFrTWFwfWJpbmRGYWtlU2VsZWN0aW9uKHQsZSl7dGhpcy5fZmFrZVNlbGVjdGlvbk1hcHBpbmcuc2V0KHQsbmV3IGdsKGUpKX1mYWtlU2VsZWN0aW9uVG9WaWV3KHQpe3JldHVybiB0aGlzLl9mYWtlU2VsZWN0aW9uTWFwcGluZy5nZXQodCl9YmluZEVsZW1lbnRzKHQsZSl7dGhpcy5fZG9tVG9WaWV3TWFwcGluZy5zZXQodCxlKTt0aGlzLl92aWV3VG9Eb21NYXBwaW5nLnNldChlLHQpfXVuYmluZERvbUVsZW1lbnQodCl7Y29uc3QgZT10aGlzLl9kb21Ub1ZpZXdNYXBwaW5nLmdldCh0KTtpZihlKXt0aGlzLl9kb21Ub1ZpZXdNYXBwaW5nLmRlbGV0ZSh0KTt0aGlzLl92aWV3VG9Eb21NYXBwaW5nLmRlbGV0ZShlKTtmb3IoY29uc3QgZSBvZiBBcnJheS5mcm9tKHQuY2hpbGROb2Rlcykpe3RoaXMudW5iaW5kRG9tRWxlbWVudChlKX19fWJpbmREb2N1bWVudEZyYWdtZW50cyh0LGUpe3RoaXMuX2RvbVRvVmlld01hcHBpbmcuc2V0KHQsZSk7dGhpcy5fdmlld1RvRG9tTWFwcGluZy5zZXQoZSx0KX12aWV3VG9Eb20odCxlLGk9e30pe2lmKHQuaXMoXCJ0ZXh0XCIpKXtjb25zdCBpPXRoaXMuX3Byb2Nlc3NEYXRhRnJvbVZpZXdUZXh0KHQpO3JldHVybiBlLmNyZWF0ZVRleHROb2RlKGkpfWVsc2V7aWYodGhpcy5tYXBWaWV3VG9Eb20odCkpe3JldHVybiB0aGlzLm1hcFZpZXdUb0RvbSh0KX1sZXQgbjtpZih0LmlzKFwiZG9jdW1lbnRGcmFnbWVudFwiKSl7bj1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihpLmJpbmQpe3RoaXMuYmluZERvY3VtZW50RnJhZ21lbnRzKG4sdCl9fWVsc2UgaWYodC5pcyhcInVpRWxlbWVudFwiKSl7bj10LnJlbmRlcihlKTtpZihpLmJpbmQpe3RoaXMuYmluZEVsZW1lbnRzKG4sdCl9cmV0dXJuIG59ZWxzZXtpZih0Lmhhc0F0dHJpYnV0ZShcInhtbG5zXCIpKXtuPWUuY3JlYXRlRWxlbWVudE5TKHQuZ2V0QXR0cmlidXRlKFwieG1sbnNcIiksdC5uYW1lKX1lbHNle249ZS5jcmVhdGVFbGVtZW50KHQubmFtZSl9aWYoaS5iaW5kKXt0aGlzLmJpbmRFbGVtZW50cyhuLHQpfWZvcihjb25zdCBlIG9mIHQuZ2V0QXR0cmlidXRlS2V5cygpKXtuLnNldEF0dHJpYnV0ZShlLHQuZ2V0QXR0cmlidXRlKGUpKX19aWYoaS53aXRoQ2hpbGRyZW58fGkud2l0aENoaWxkcmVuPT09dW5kZWZpbmVkKXtmb3IoY29uc3QgbyBvZiB0aGlzLnZpZXdDaGlsZHJlblRvRG9tKHQsZSxpKSl7bi5hcHBlbmRDaGlsZChvKX19cmV0dXJuIG59fSp2aWV3Q2hpbGRyZW5Ub0RvbSh0LGUsaT17fSl7Y29uc3Qgbj10LmdldEZpbGxlck9mZnNldCYmdC5nZXRGaWxsZXJPZmZzZXQoKTtsZXQgbz0wO2Zvcihjb25zdCByIG9mIHQuZ2V0Q2hpbGRyZW4oKSl7aWYobj09PW8pe3lpZWxkIHRoaXMuX2Jsb2NrRmlsbGVyKGUpfXlpZWxkIHRoaXMudmlld1RvRG9tKHIsZSxpKTtvKyt9aWYobj09PW8pe3lpZWxkIHRoaXMuX2Jsb2NrRmlsbGVyKGUpfX12aWV3UmFuZ2VUb0RvbSh0KXtjb25zdCBlPXRoaXMudmlld1Bvc2l0aW9uVG9Eb20odC5zdGFydCk7Y29uc3QgaT10aGlzLnZpZXdQb3NpdGlvblRvRG9tKHQuZW5kKTtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7bi5zZXRTdGFydChlLnBhcmVudCxlLm9mZnNldCk7bi5zZXRFbmQoaS5wYXJlbnQsaS5vZmZzZXQpO3JldHVybiBufXZpZXdQb3NpdGlvblRvRG9tKHQpe2NvbnN0IGU9dC5wYXJlbnQ7aWYoZS5pcyhcInRleHRcIikpe2NvbnN0IGk9dGhpcy5maW5kQ29ycmVzcG9uZGluZ0RvbVRleHQoZSk7aWYoIWkpe3JldHVybiBudWxsfWxldCBuPXQub2Zmc2V0O2lmKGxkKGkpKXtuKz1hZH1yZXR1cm57cGFyZW50Omksb2Zmc2V0Om59fWVsc2V7bGV0IGksbixvO2lmKHQub2Zmc2V0PT09MCl7aT10aGlzLm1hcFZpZXdUb0RvbShlKTtpZighaSl7cmV0dXJuIG51bGx9bz1pLmNoaWxkTm9kZXNbMF19ZWxzZXtjb25zdCBlPXQubm9kZUJlZm9yZTtuPWUuaXMoXCJ0ZXh0XCIpP3RoaXMuZmluZENvcnJlc3BvbmRpbmdEb21UZXh0KGUpOnRoaXMubWFwVmlld1RvRG9tKHQubm9kZUJlZm9yZSk7aWYoIW4pe3JldHVybiBudWxsfWk9bi5wYXJlbnROb2RlO289bi5uZXh0U2libGluZ31pZihvZChvKSYmbGQobykpe3JldHVybntwYXJlbnQ6byxvZmZzZXQ6YWR9fWNvbnN0IHI9bj9WZChuKSsxOjA7cmV0dXJue3BhcmVudDppLG9mZnNldDpyfX19ZG9tVG9WaWV3KHQsZT17fSl7aWYodGhpcy5pc0Jsb2NrRmlsbGVyKHQsdGhpcy5ibG9ja0ZpbGxlck1vZGUpKXtyZXR1cm4gbnVsbH1jb25zdCBpPXRoaXMuZ2V0UGFyZW50VUlFbGVtZW50KHQsdGhpcy5fZG9tVG9WaWV3TWFwcGluZyk7aWYoaSl7cmV0dXJuIGl9aWYob2QodCkpe2lmKGRkKHQpKXtyZXR1cm4gbnVsbH1lbHNle2NvbnN0IGU9dGhpcy5fcHJvY2Vzc0RhdGFGcm9tRG9tVGV4dCh0KTtyZXR1cm4gZT09PVwiXCI/bnVsbDpuZXcgTHModGhpcy5kb2N1bWVudCxlKX19ZWxzZSBpZih0aGlzLmlzQ29tbWVudCh0KSl7cmV0dXJuIG51bGx9ZWxzZXtpZih0aGlzLm1hcERvbVRvVmlldyh0KSl7cmV0dXJuIHRoaXMubWFwRG9tVG9WaWV3KHQpfWxldCBpO2lmKHRoaXMuaXNEb2N1bWVudEZyYWdtZW50KHQpKXtpPW5ldyBxbCh0aGlzLmRvY3VtZW50KTtpZihlLmJpbmQpe3RoaXMuYmluZERvY3VtZW50RnJhZ21lbnRzKHQsaSl9fWVsc2V7Y29uc3Qgbj1lLmtlZXBPcmlnaW5hbENhc2U/dC50YWdOYW1lOnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2k9bmV3IHpjKHRoaXMuZG9jdW1lbnQsbik7aWYoZS5iaW5kKXt0aGlzLmJpbmRFbGVtZW50cyh0LGkpfWNvbnN0IG89dC5hdHRyaWJ1dGVzO2ZvcihsZXQgdD1vLmxlbmd0aC0xO3Q+PTA7dC0tKXtpLl9zZXRBdHRyaWJ1dGUob1t0XS5uYW1lLG9bdF0udmFsdWUpfX1pZihlLndpdGhDaGlsZHJlbnx8ZS53aXRoQ2hpbGRyZW49PT11bmRlZmluZWQpe2Zvcihjb25zdCBuIG9mIHRoaXMuZG9tQ2hpbGRyZW5Ub1ZpZXcodCxlKSl7aS5fYXBwZW5kQ2hpbGQobil9fXJldHVybiBpfX0qZG9tQ2hpbGRyZW5Ub1ZpZXcodCxlPXt9KXtmb3IobGV0IGk9MDtpPHQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXtjb25zdCBuPXQuY2hpbGROb2Rlc1tpXTtjb25zdCBvPXRoaXMuZG9tVG9WaWV3KG4sZSk7aWYobyE9PW51bGwpe3lpZWxkIG99fX1kb21TZWxlY3Rpb25Ub1ZpZXcodCl7aWYodC5yYW5nZUNvdW50PT09MSl7bGV0IGU9dC5nZXRSYW5nZUF0KDApLnN0YXJ0Q29udGFpbmVyO2lmKG9kKGUpKXtlPWUucGFyZW50Tm9kZX1jb25zdCBpPXRoaXMuZmFrZVNlbGVjdGlvblRvVmlldyhlKTtpZihpKXtyZXR1cm4gaX19Y29uc3QgZT10aGlzLmlzRG9tU2VsZWN0aW9uQmFja3dhcmQodCk7Y29uc3QgaT1bXTtmb3IobGV0IGU9MDtlPHQucmFuZ2VDb3VudDtlKyspe2NvbnN0IG49dC5nZXRSYW5nZUF0KGUpO2NvbnN0IG89dGhpcy5kb21SYW5nZVRvVmlldyhuKTtpZihvKXtpLnB1c2gobyl9fXJldHVybiBuZXcgZ2woaSx7YmFja3dhcmQ6ZX0pfWRvbVJhbmdlVG9WaWV3KHQpe2NvbnN0IGU9dGhpcy5kb21Qb3NpdGlvblRvVmlldyh0LnN0YXJ0Q29udGFpbmVyLHQuc3RhcnRPZmZzZXQpO2NvbnN0IGk9dGhpcy5kb21Qb3NpdGlvblRvVmlldyh0LmVuZENvbnRhaW5lcix0LmVuZE9mZnNldCk7aWYoZSYmaSl7cmV0dXJuIG5ldyB1bChlLGkpfXJldHVybiBudWxsfWRvbVBvc2l0aW9uVG9WaWV3KHQsZSl7aWYodGhpcy5pc0Jsb2NrRmlsbGVyKHQsdGhpcy5ibG9ja0ZpbGxlck1vZGUpKXtyZXR1cm4gdGhpcy5kb21Qb3NpdGlvblRvVmlldyh0LnBhcmVudE5vZGUsVmQodCkpfWNvbnN0IGk9dGhpcy5tYXBEb21Ub1ZpZXcodCk7aWYoaSYmaS5pcyhcInVpRWxlbWVudFwiKSl7cmV0dXJuIGRsLl9jcmVhdGVCZWZvcmUoaSl9aWYob2QodCkpe2lmKGRkKHQpKXtyZXR1cm4gdGhpcy5kb21Qb3NpdGlvblRvVmlldyh0LnBhcmVudE5vZGUsVmQodCkpfWNvbnN0IGk9dGhpcy5maW5kQ29ycmVzcG9uZGluZ1ZpZXdUZXh0KHQpO2xldCBuPWU7aWYoIWkpe3JldHVybiBudWxsfWlmKGxkKHQpKXtuLT1hZDtuPW48MD8wOm59cmV0dXJuIG5ldyBkbChpLG4pfWVsc2V7aWYoZT09PTApe2NvbnN0IGU9dGhpcy5tYXBEb21Ub1ZpZXcodCk7aWYoZSl7cmV0dXJuIG5ldyBkbChlLDApfX1lbHNle2NvbnN0IGk9dC5jaGlsZE5vZGVzW2UtMV07Y29uc3Qgbj1vZChpKT90aGlzLmZpbmRDb3JyZXNwb25kaW5nVmlld1RleHQoaSk6dGhpcy5tYXBEb21Ub1ZpZXcoaSk7aWYobiYmbi5wYXJlbnQpe3JldHVybiBuZXcgZGwobi5wYXJlbnQsbi5pbmRleCsxKX19cmV0dXJuIG51bGx9fW1hcERvbVRvVmlldyh0KXtyZXR1cm4gdGhpcy5nZXRQYXJlbnRVSUVsZW1lbnQodCl8fHRoaXMuX2RvbVRvVmlld01hcHBpbmcuZ2V0KHQpfWZpbmRDb3JyZXNwb25kaW5nVmlld1RleHQodCl7aWYoZGQodCkpe3JldHVybiBudWxsfWNvbnN0IGU9dGhpcy5nZXRQYXJlbnRVSUVsZW1lbnQodCk7aWYoZSl7cmV0dXJuIGV9Y29uc3QgaT10LnByZXZpb3VzU2libGluZztpZihpKXtpZighdGhpcy5pc0VsZW1lbnQoaSkpe3JldHVybiBudWxsfWNvbnN0IHQ9dGhpcy5tYXBEb21Ub1ZpZXcoaSk7aWYodCl7Y29uc3QgZT10Lm5leHRTaWJsaW5nO2lmKGUgaW5zdGFuY2VvZiBMcyl7cmV0dXJuIHQubmV4dFNpYmxpbmd9ZWxzZXtyZXR1cm4gbnVsbH19fWVsc2V7Y29uc3QgZT10aGlzLm1hcERvbVRvVmlldyh0LnBhcmVudE5vZGUpO2lmKGUpe2NvbnN0IHQ9ZS5nZXRDaGlsZCgwKTtpZih0IGluc3RhbmNlb2YgTHMpe3JldHVybiB0fWVsc2V7cmV0dXJuIG51bGx9fX1yZXR1cm4gbnVsbH1tYXBWaWV3VG9Eb20odCl7cmV0dXJuIHRoaXMuX3ZpZXdUb0RvbU1hcHBpbmcuZ2V0KHQpfWZpbmRDb3JyZXNwb25kaW5nRG9tVGV4dCh0KXtjb25zdCBlPXQucHJldmlvdXNTaWJsaW5nO2lmKGUmJnRoaXMubWFwVmlld1RvRG9tKGUpKXtyZXR1cm4gdGhpcy5tYXBWaWV3VG9Eb20oZSkubmV4dFNpYmxpbmd9aWYoIWUmJnQucGFyZW50JiZ0aGlzLm1hcFZpZXdUb0RvbSh0LnBhcmVudCkpe3JldHVybiB0aGlzLm1hcFZpZXdUb0RvbSh0LnBhcmVudCkuY2hpbGROb2Rlc1swXX1yZXR1cm4gbnVsbH1mb2N1cyh0KXtjb25zdCBlPXRoaXMubWFwVmlld1RvRG9tKHQpO2lmKGUmJmUub3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50IT09ZSl7Y29uc3R7c2Nyb2xsWDp0LHNjcm9sbFk6aX09SWQud2luZG93O2NvbnN0IG49W107RmQoZSx0PT57Y29uc3R7c2Nyb2xsTGVmdDplLHNjcm9sbFRvcDppfT10O24ucHVzaChbZSxpXSl9KTtlLmZvY3VzKCk7RmQoZSx0PT57Y29uc3RbZSxpXT1uLnNoaWZ0KCk7dC5zY3JvbGxMZWZ0PWU7dC5zY3JvbGxUb3A9aX0pO0lkLndpbmRvdy5zY3JvbGxUbyh0LGkpfX1pc0VsZW1lbnQodCl7cmV0dXJuIHQmJnQubm9kZVR5cGU9PU5vZGUuRUxFTUVOVF9OT0RFfWlzRG9jdW1lbnRGcmFnbWVudCh0KXtyZXR1cm4gdCYmdC5ub2RlVHlwZT09Tm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFfWlzQ29tbWVudCh0KXtyZXR1cm4gdCYmdC5ub2RlVHlwZT09Tm9kZS5DT01NRU5UX05PREV9aXNCbG9ja0ZpbGxlcih0KXtpZih0aGlzLmJsb2NrRmlsbGVyTW9kZT09XCJiclwiKXtyZXR1cm4gdC5pc0VxdWFsTm9kZShCZCl9aWYodC50YWdOYW1lPT09XCJCUlwiJiZqZCh0LHRoaXMuYmxvY2tFbGVtZW50cykmJnQucGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aD09PTEpe3JldHVybiB0cnVlfXJldHVybiBEZCh0LHRoaXMuYmxvY2tFbGVtZW50cyl9aXNEb21TZWxlY3Rpb25CYWNrd2FyZCh0KXtpZih0LmlzQ29sbGFwc2VkKXtyZXR1cm4gZmFsc2V9Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2Uuc2V0U3RhcnQodC5hbmNob3JOb2RlLHQuYW5jaG9yT2Zmc2V0KTtlLnNldEVuZCh0LmZvY3VzTm9kZSx0LmZvY3VzT2Zmc2V0KTtjb25zdCBpPWUuY29sbGFwc2VkO2UuZGV0YWNoKCk7cmV0dXJuIGl9Z2V0UGFyZW50VUlFbGVtZW50KHQpe2NvbnN0IGU9TmQodCk7ZS5wb3AoKTt3aGlsZShlLmxlbmd0aCl7Y29uc3QgdD1lLnBvcCgpO2NvbnN0IGk9dGhpcy5fZG9tVG9WaWV3TWFwcGluZy5nZXQodCk7aWYoaSYmaS5pcyhcInVpRWxlbWVudFwiKSl7cmV0dXJuIGl9fXJldHVybiBudWxsfWlzRG9tU2VsZWN0aW9uQ29ycmVjdCh0KXtyZXR1cm4gdGhpcy5faXNEb21TZWxlY3Rpb25Qb3NpdGlvbkNvcnJlY3QodC5hbmNob3JOb2RlLHQuYW5jaG9yT2Zmc2V0KSYmdGhpcy5faXNEb21TZWxlY3Rpb25Qb3NpdGlvbkNvcnJlY3QodC5mb2N1c05vZGUsdC5mb2N1c09mZnNldCl9X2lzRG9tU2VsZWN0aW9uUG9zaXRpb25Db3JyZWN0KHQsZSl7aWYob2QodCkmJmxkKHQpJiZlPGFkKXtyZXR1cm4gZmFsc2V9aWYodGhpcy5pc0VsZW1lbnQodCkmJmxkKHQuY2hpbGROb2Rlc1tlXSkpe3JldHVybiBmYWxzZX1jb25zdCBpPXRoaXMubWFwRG9tVG9WaWV3KHQpO2lmKGkmJmkuaXMoXCJ1aUVsZW1lbnRcIikpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX1fcHJvY2Vzc0RhdGFGcm9tVmlld1RleHQodCl7bGV0IGU9dC5kYXRhO2lmKHQuZ2V0QW5jZXN0b3JzKCkuc29tZSh0PT50aGlzLnByZUVsZW1lbnRzLmluY2x1ZGVzKHQubmFtZSkpKXtyZXR1cm4gZX1pZihlLmNoYXJBdCgwKT09XCIgXCIpe2NvbnN0IGk9dGhpcy5fZ2V0VG91Y2hpbmdWaWV3VGV4dE5vZGUodCxmYWxzZSk7Y29uc3Qgbj1pJiZ0aGlzLl9ub2RlRW5kc1dpdGhTcGFjZShpKTtpZihufHwhaSl7ZT1cIsKgXCIrZS5zdWJzdHIoMSl9fWlmKGUuY2hhckF0KGUubGVuZ3RoLTEpPT1cIiBcIil7Y29uc3QgaT10aGlzLl9nZXRUb3VjaGluZ1ZpZXdUZXh0Tm9kZSh0LHRydWUpO2lmKGUuY2hhckF0KGUubGVuZ3RoLTIpPT1cIiBcInx8IWl8fGkuZGF0YS5jaGFyQXQoMCk9PVwiIFwiKXtlPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkrXCLCoFwifX1yZXR1cm4gZS5yZXBsYWNlKC8gezJ9L2csXCIgwqBcIil9X25vZGVFbmRzV2l0aFNwYWNlKHQpe2lmKHQuZ2V0QW5jZXN0b3JzKCkuc29tZSh0PT50aGlzLnByZUVsZW1lbnRzLmluY2x1ZGVzKHQubmFtZSkpKXtyZXR1cm4gZmFsc2V9Y29uc3QgZT10aGlzLl9wcm9jZXNzRGF0YUZyb21WaWV3VGV4dCh0KTtyZXR1cm4gZS5jaGFyQXQoZS5sZW5ndGgtMSk9PVwiIFwifV9wcm9jZXNzRGF0YUZyb21Eb21UZXh0KHQpe2xldCBlPXQuZGF0YTtpZihMZCh0LHRoaXMucHJlRWxlbWVudHMpKXtyZXR1cm4gdWQodCl9ZT1lLnJlcGxhY2UoL1sgXFxuXFx0XFxyXXsxLH0vZyxcIiBcIik7Y29uc3QgaT10aGlzLl9nZXRUb3VjaGluZ0lubGluZURvbU5vZGUodCxmYWxzZSk7Y29uc3Qgbj10aGlzLl9nZXRUb3VjaGluZ0lubGluZURvbU5vZGUodCx0cnVlKTtjb25zdCBvPXRoaXMuX2NoZWNrU2hvdWxkTGVmdFRyaW1Eb21UZXh0KGkpO2NvbnN0IHI9dGhpcy5fY2hlY2tTaG91bGRSaWdodFRyaW1Eb21UZXh0KHQsbik7aWYobyl7ZT1lLnJlcGxhY2UoL14gLyxcIlwiKX1pZihyKXtlPWUucmVwbGFjZSgvICQvLFwiXCIpfWU9dWQobmV3IFRleHQoZSkpO2U9ZS5yZXBsYWNlKC8gXFx1MDBBMC9nLFwiICBcIik7aWYoLyggfFxcdTAwQTApXFx1MDBBMCQvLnRlc3QoZSl8fCFufHxuLmRhdGEmJm4uZGF0YS5jaGFyQXQoMCk9PVwiIFwiKXtlPWUucmVwbGFjZSgvXFx1MDBBMCQvLFwiIFwiKX1pZihvKXtlPWUucmVwbGFjZSgvXlxcdTAwQTAvLFwiIFwiKX1yZXR1cm4gZX1fY2hlY2tTaG91bGRMZWZ0VHJpbURvbVRleHQodCl7aWYoIXQpe3JldHVybiB0cnVlfWlmKEtyKHQpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4vW15cXFNcXHUwMEEwXS8udGVzdCh0LmRhdGEuY2hhckF0KHQuZGF0YS5sZW5ndGgtMSkpfV9jaGVja1Nob3VsZFJpZ2h0VHJpbURvbVRleHQodCxlKXtpZihlKXtyZXR1cm4gZmFsc2V9cmV0dXJuIWxkKHQpfV9nZXRUb3VjaGluZ1ZpZXdUZXh0Tm9kZSh0LGUpe2NvbnN0IGk9bmV3IGxsKHtzdGFydFBvc2l0aW9uOmU/ZGwuX2NyZWF0ZUFmdGVyKHQpOmRsLl9jcmVhdGVCZWZvcmUodCksZGlyZWN0aW9uOmU/XCJmb3J3YXJkXCI6XCJiYWNrd2FyZFwifSk7Zm9yKGNvbnN0IHQgb2YgaSl7aWYodC5pdGVtLmlzKFwiY29udGFpbmVyRWxlbWVudFwiKSl7cmV0dXJuIG51bGx9ZWxzZSBpZih0Lml0ZW0uaXMoXCJiclwiKSl7cmV0dXJuIG51bGx9ZWxzZSBpZih0Lml0ZW0uaXMoXCJ0ZXh0UHJveHlcIikpe3JldHVybiB0Lml0ZW19fXJldHVybiBudWxsfV9nZXRUb3VjaGluZ0lubGluZURvbU5vZGUodCxlKXtpZighdC5wYXJlbnROb2RlKXtyZXR1cm4gbnVsbH1jb25zdCBpPWU/XCJuZXh0Tm9kZVwiOlwicHJldmlvdXNOb2RlXCI7Y29uc3Qgbj10Lm93bmVyRG9jdW1lbnQ7Y29uc3Qgbz1OZCh0KVswXTtjb25zdCByPW4uY3JlYXRlVHJlZVdhbGtlcihvLE5vZGVGaWx0ZXIuU0hPV19URVhUfE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5ULHthY2NlcHROb2RlKHQpe2lmKG9kKHQpKXtyZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUfWlmKHQudGFnTmFtZT09XCJCUlwiKXtyZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUfXJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9TS0lQfX0pO3IuY3VycmVudE5vZGU9dDtjb25zdCBzPXJbaV0oKTtpZihzIT09bnVsbCl7Y29uc3QgZT1NZCh0LHMpO2lmKGUmJiFMZCh0LHRoaXMuYmxvY2tFbGVtZW50cyxlKSYmIUxkKHMsdGhpcy5ibG9ja0VsZW1lbnRzLGUpKXtyZXR1cm4gc319cmV0dXJuIG51bGx9fWZ1bmN0aW9uIExkKHQsZSxpKXtsZXQgbj1OZCh0KTtpZihpKXtuPW4uc2xpY2Uobi5pbmRleE9mKGkpKzEpfXJldHVybiBuLnNvbWUodD0+dC50YWdOYW1lJiZlLmluY2x1ZGVzKHQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSl9ZnVuY3Rpb24gRmQodCxlKXt3aGlsZSh0JiZ0IT1JZC5kb2N1bWVudCl7ZSh0KTt0PXQucGFyZW50Tm9kZX19ZnVuY3Rpb24gRGQodCxlKXtjb25zdCBpPW9kKHQpJiZ0LmRhdGE9PVwiwqBcIjtyZXR1cm4gaSYmamQodCxlKSYmdC5wYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoPT09MX1mdW5jdGlvbiBqZCh0LGUpe2NvbnN0IGk9dC5wYXJlbnROb2RlO3JldHVybiBpJiZpLnRhZ05hbWUmJmUuaW5jbHVkZXMoaS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIEhkKHQpe2NvbnN0IGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh0KTtpZihlPT1cIltvYmplY3QgV2luZG93XVwiKXtyZXR1cm4gdHJ1ZX1pZihlPT1cIltvYmplY3QgZ2xvYmFsXVwiKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9Y29uc3QgV2Q9cWMoe30sZHMse2xpc3RlblRvKHQsLi4uZSl7aWYoeGQodCl8fEhkKHQpKXtjb25zdCBpPXRoaXMuX2dldFByb3h5RW1pdHRlcih0KXx8bmV3IFVkKHQpO2kuYXR0YWNoKC4uLmUpO3Q9aX1kcy5saXN0ZW5Uby5jYWxsKHRoaXMsdCwuLi5lKX0sc3RvcExpc3RlbmluZyh0LGUsaSl7aWYoeGQodCl8fEhkKHQpKXtjb25zdCBlPXRoaXMuX2dldFByb3h5RW1pdHRlcih0KTtpZighZSl7cmV0dXJufXQ9ZX1kcy5zdG9wTGlzdGVuaW5nLmNhbGwodGhpcyx0LGUsaSk7aWYodCBpbnN0YW5jZW9mIFVkKXt0LmRldGFjaChlKX19LF9nZXRQcm94eUVtaXR0ZXIodCl7cmV0dXJuIHVzKHRoaXMsJGQodCkpfX0pO3ZhciBxZD1XZDtjbGFzcyBVZHtjb25zdHJ1Y3Rvcih0KXtocyh0aGlzLCRkKHQpKTt0aGlzLl9kb21Ob2RlPXR9fXFjKFVkLnByb3RvdHlwZSxkcyx7YXR0YWNoKHQsZSxpPXt9KXtpZih0aGlzLl9kb21MaXN0ZW5lcnMmJnRoaXMuX2RvbUxpc3RlbmVyc1t0XSl7cmV0dXJufWNvbnN0IG49dGhpcy5fY3JlYXRlRG9tTGlzdGVuZXIodCwhIWkudXNlQ2FwdHVyZSk7dGhpcy5fZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKHQsbiwhIWkudXNlQ2FwdHVyZSk7aWYoIXRoaXMuX2RvbUxpc3RlbmVycyl7dGhpcy5fZG9tTGlzdGVuZXJzPXt9fXRoaXMuX2RvbUxpc3RlbmVyc1t0XT1ufSxkZXRhY2godCl7bGV0IGU7aWYodGhpcy5fZG9tTGlzdGVuZXJzW3RdJiYoIShlPXRoaXMuX2V2ZW50c1t0XSl8fCFlLmNhbGxiYWNrcy5sZW5ndGgpKXt0aGlzLl9kb21MaXN0ZW5lcnNbdF0ucmVtb3ZlTGlzdGVuZXIoKX19LF9jcmVhdGVEb21MaXN0ZW5lcih0LGUpe2NvbnN0IGk9ZT0+e3RoaXMuZmlyZSh0LGUpfTtpLnJlbW92ZUxpc3RlbmVyPSgpPT57dGhpcy5fZG9tTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsaSxlKTtkZWxldGUgdGhpcy5fZG9tTGlzdGVuZXJzW3RdfTtyZXR1cm4gaX19KTtmdW5jdGlvbiAkZCh0KXtyZXR1cm4gdFtcImRhdGEtY2stZXhwYW5kb1wiXXx8KHRbXCJkYXRhLWNrLWV4cGFuZG9cIl09aXMoKSl9Y2xhc3MgR2R7Y29uc3RydWN0b3IodCl7dGhpcy52aWV3PXQ7dGhpcy5kb2N1bWVudD10LmRvY3VtZW50O3RoaXMuaXNFbmFibGVkPWZhbHNlfWVuYWJsZSgpe3RoaXMuaXNFbmFibGVkPXRydWV9ZGlzYWJsZSgpe3RoaXMuaXNFbmFibGVkPWZhbHNlfWRlc3Ryb3koKXt0aGlzLmRpc2FibGUoKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKX19dnMoR2QscWQpO3ZhciBLZD1cIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX19cIjtmdW5jdGlvbiBKZCh0KXt0aGlzLl9fZGF0YV9fLnNldCh0LEtkKTtyZXR1cm4gdGhpc312YXIgWWQ9SmQ7ZnVuY3Rpb24gUWQodCl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHQpfXZhciBYZD1RZDtmdW5jdGlvbiBaZCh0KXt2YXIgZT0tMSxpPXQ9PW51bGw/MDp0Lmxlbmd0aDt0aGlzLl9fZGF0YV9fPW5ldyBfZTt3aGlsZSgrK2U8aSl7dGhpcy5hZGQodFtlXSl9fVpkLnByb3RvdHlwZS5hZGQ9WmQucHJvdG90eXBlLnB1c2g9WWQ7WmQucHJvdG90eXBlLmhhcz1YZDt2YXIgdHU9WmQ7ZnVuY3Rpb24gZXUodCxlKXt2YXIgaT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDt3aGlsZSgrK2k8bil7aWYoZSh0W2ldLGksdCkpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9dmFyIGl1PWV1O2Z1bmN0aW9uIG51KHQsZSl7cmV0dXJuIHQuaGFzKGUpfXZhciBvdT1udTt2YXIgcnU9MSxzdT0yO2Z1bmN0aW9uIGF1KHQsZSxpLG4sbyxyKXt2YXIgcz1pJnJ1LGE9dC5sZW5ndGgsYz1lLmxlbmd0aDtpZihhIT1jJiYhKHMmJmM+YSkpe3JldHVybiBmYWxzZX12YXIgbD1yLmdldCh0KTtpZihsJiZyLmdldChlKSl7cmV0dXJuIGw9PWV9dmFyIGQ9LTEsdT10cnVlLGg9aSZzdT9uZXcgdHU6dW5kZWZpbmVkO3Iuc2V0KHQsZSk7ci5zZXQoZSx0KTt3aGlsZSgrK2Q8YSl7dmFyIGY9dFtkXSxnPWVbZF07aWYobil7dmFyIG09cz9uKGcsZixkLGUsdCxyKTpuKGYsZyxkLHQsZSxyKX1pZihtIT09dW5kZWZpbmVkKXtpZihtKXtjb250aW51ZX11PWZhbHNlO2JyZWFrfWlmKGgpe2lmKCFpdShlLChmdW5jdGlvbih0LGUpe2lmKCFvdShoLGUpJiYoZj09PXR8fG8oZix0LGksbixyKSkpe3JldHVybiBoLnB1c2goZSl9fSkpKXt1PWZhbHNlO2JyZWFrfX1lbHNlIGlmKCEoZj09PWd8fG8oZixnLGksbixyKSkpe3U9ZmFsc2U7YnJlYWt9fXJbXCJkZWxldGVcIl0odCk7cltcImRlbGV0ZVwiXShlKTtyZXR1cm4gdX12YXIgY3U9YXU7ZnVuY3Rpb24gbHUodCl7dmFyIGU9LTEsaT1BcnJheSh0LnNpemUpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXtpWysrZV09W24sdF19KSk7cmV0dXJuIGl9dmFyIGR1PWx1O2Z1bmN0aW9uIHV1KHQpe3ZhciBlPS0xLGk9QXJyYXkodC5zaXplKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lbKytlXT10fSkpO3JldHVybiBpfXZhciBodT11dTt2YXIgZnU9MSxndT0yO3ZhciBtdT1cIltvYmplY3QgQm9vbGVhbl1cIixwdT1cIltvYmplY3QgRGF0ZV1cIixidT1cIltvYmplY3QgRXJyb3JdXCIsd3U9XCJbb2JqZWN0IE1hcF1cIixrdT1cIltvYmplY3QgTnVtYmVyXVwiLF91PVwiW29iamVjdCBSZWdFeHBdXCIsdnU9XCJbb2JqZWN0IFNldF1cIix5dT1cIltvYmplY3QgU3RyaW5nXVwiLHh1PVwiW29iamVjdCBTeW1ib2xdXCI7dmFyIEN1PVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixBdT1cIltvYmplY3QgRGF0YVZpZXddXCI7dmFyIFR1PXI/ci5wcm90b3R5cGU6dW5kZWZpbmVkLFB1PVR1P1R1LnZhbHVlT2Y6dW5kZWZpbmVkO2Z1bmN0aW9uIFN1KHQsZSxpLG4sbyxyLHMpe3N3aXRjaChpKXtjYXNlIEF1OmlmKHQuYnl0ZUxlbmd0aCE9ZS5ieXRlTGVuZ3RofHx0LmJ5dGVPZmZzZXQhPWUuYnl0ZU9mZnNldCl7cmV0dXJuIGZhbHNlfXQ9dC5idWZmZXI7ZT1lLmJ1ZmZlcjtjYXNlIEN1OmlmKHQuYnl0ZUxlbmd0aCE9ZS5ieXRlTGVuZ3RofHwhcihuZXcgZm8odCksbmV3IGZvKGUpKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlO2Nhc2UgbXU6Y2FzZSBwdTpjYXNlIGt1OnJldHVybiBMKCt0LCtlKTtjYXNlIGJ1OnJldHVybiB0Lm5hbWU9PWUubmFtZSYmdC5tZXNzYWdlPT1lLm1lc3NhZ2U7Y2FzZSBfdTpjYXNlIHl1OnJldHVybiB0PT1lK1wiXCI7Y2FzZSB3dTp2YXIgYT1kdTtjYXNlIHZ1OnZhciBjPW4mZnU7YXx8KGE9aHUpO2lmKHQuc2l6ZSE9ZS5zaXplJiYhYyl7cmV0dXJuIGZhbHNlfXZhciBsPXMuZ2V0KHQpO2lmKGwpe3JldHVybiBsPT1lfW58PWd1O3Muc2V0KHQsZSk7dmFyIGQ9Y3UoYSh0KSxhKGUpLG4sbyxyLHMpO3NbXCJkZWxldGVcIl0odCk7cmV0dXJuIGQ7Y2FzZSB4dTppZihQdSl7cmV0dXJuIFB1LmNhbGwodCk9PVB1LmNhbGwoZSl9fXJldHVybiBmYWxzZX12YXIgRXU9U3U7dmFyIFJ1PTE7dmFyIE91PU9iamVjdC5wcm90b3R5cGU7dmFyIEl1PU91Lmhhc093blByb3BlcnR5O2Z1bmN0aW9uIFZ1KHQsZSxpLG4sbyxyKXt2YXIgcz1pJlJ1LGE9em4odCksYz1hLmxlbmd0aCxsPXpuKGUpLGQ9bC5sZW5ndGg7aWYoYyE9ZCYmIXMpe3JldHVybiBmYWxzZX12YXIgdT1jO3doaWxlKHUtLSl7dmFyIGg9YVt1XTtpZighKHM/aCBpbiBlOkl1LmNhbGwoZSxoKSkpe3JldHVybiBmYWxzZX19dmFyIGY9ci5nZXQodCk7aWYoZiYmci5nZXQoZSkpe3JldHVybiBmPT1lfXZhciBnPXRydWU7ci5zZXQodCxlKTtyLnNldChlLHQpO3ZhciBtPXM7d2hpbGUoKyt1PGMpe2g9YVt1XTt2YXIgcD10W2hdLGI9ZVtoXTtpZihuKXt2YXIgdz1zP24oYixwLGgsZSx0LHIpOm4ocCxiLGgsdCxlLHIpfWlmKCEodz09PXVuZGVmaW5lZD9wPT09Ynx8byhwLGIsaSxuLHIpOncpKXtnPWZhbHNlO2JyZWFrfW18fChtPWg9PVwiY29uc3RydWN0b3JcIil9aWYoZyYmIW0pe3ZhciBrPXQuY29uc3RydWN0b3IsXz1lLmNvbnN0cnVjdG9yO2lmKGshPV8mJihcImNvbnN0cnVjdG9yXCJpbiB0JiZcImNvbnN0cnVjdG9yXCJpbiBlKSYmISh0eXBlb2Ygaz09XCJmdW5jdGlvblwiJiZrIGluc3RhbmNlb2YgayYmdHlwZW9mIF89PVwiZnVuY3Rpb25cIiYmXyBpbnN0YW5jZW9mIF8pKXtnPWZhbHNlfX1yW1wiZGVsZXRlXCJdKHQpO3JbXCJkZWxldGVcIl0oZSk7cmV0dXJuIGd9dmFyIE51PVZ1O3ZhciBNdT0xO3ZhciBCdT1cIltvYmplY3QgQXJndW1lbnRzXVwiLHp1PVwiW29iamVjdCBBcnJheV1cIixMdT1cIltvYmplY3QgT2JqZWN0XVwiO3ZhciBGdT1PYmplY3QucHJvdG90eXBlO3ZhciBEdT1GdS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBqdSh0LGUsaSxuLG8scil7dmFyIHM9SmUodCksYT1KZShlKSxjPXM/enU6c28odCksbD1hP3p1OnNvKGUpO2M9Yz09QnU/THU6YztsPWw9PUJ1P0x1Omw7dmFyIGQ9Yz09THUsdT1sPT1MdSxoPWM9PWw7aWYoaCYmT2JqZWN0KFllW1wiYVwiXSkodCkpe2lmKCFPYmplY3QoWWVbXCJhXCJdKShlKSl7cmV0dXJuIGZhbHNlfXM9dHJ1ZTtkPWZhbHNlfWlmKGgmJiFkKXtyfHwocj1uZXcgQWUpO3JldHVybiBzfHxCaSh0KT9jdSh0LGUsaSxuLG8scik6RXUodCxlLGMsaSxuLG8scil9aWYoIShpJk11KSl7dmFyIGY9ZCYmRHUuY2FsbCh0LFwiX193cmFwcGVkX19cIiksZz11JiZEdS5jYWxsKGUsXCJfX3dyYXBwZWRfX1wiKTtpZihmfHxnKXt2YXIgbT1mP3QudmFsdWUoKTp0LHA9Zz9lLnZhbHVlKCk6ZTtyfHwocj1uZXcgQWUpO3JldHVybiBvKG0scCxpLG4scil9fWlmKCFoKXtyZXR1cm4gZmFsc2V9cnx8KHI9bmV3IEFlKTtyZXR1cm4gTnUodCxlLGksbixvLHIpfXZhciBIdT1qdTtmdW5jdGlvbiBXdSh0LGUsaSxuLG8pe2lmKHQ9PT1lKXtyZXR1cm4gdHJ1ZX1pZih0PT1udWxsfHxlPT1udWxsfHwhVCh0KSYmIVQoZSkpe3JldHVybiB0IT09dCYmZSE9PWV9cmV0dXJuIEh1KHQsZSxpLG4sV3Usbyl9dmFyIHF1PVd1O2Z1bmN0aW9uIFV1KHQsZSxpKXtpPXR5cGVvZiBpPT1cImZ1bmN0aW9uXCI/aTp1bmRlZmluZWQ7dmFyIG49aT9pKHQsZSk6dW5kZWZpbmVkO3JldHVybiBuPT09dW5kZWZpbmVkP3F1KHQsZSx1bmRlZmluZWQsaSk6ISFufXZhciAkdT1VdTtjbGFzcyBHdSBleHRlbmRzIEdke2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuX2NvbmZpZz17Y2hpbGRMaXN0OnRydWUsY2hhcmFjdGVyRGF0YTp0cnVlLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTp0cnVlLHN1YnRyZWU6dHJ1ZX07dGhpcy5kb21Db252ZXJ0ZXI9dC5kb21Db252ZXJ0ZXI7dGhpcy5yZW5kZXJlcj10Ll9yZW5kZXJlcjt0aGlzLl9kb21FbGVtZW50cz1bXTt0aGlzLl9tdXRhdGlvbk9ic2VydmVyPW5ldyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcih0aGlzLl9vbk11dGF0aW9ucy5iaW5kKHRoaXMpKX1mbHVzaCgpe3RoaXMuX29uTXV0YXRpb25zKHRoaXMuX211dGF0aW9uT2JzZXJ2ZXIudGFrZVJlY29yZHMoKSl9b2JzZXJ2ZSh0KXt0aGlzLl9kb21FbGVtZW50cy5wdXNoKHQpO2lmKHRoaXMuaXNFbmFibGVkKXt0aGlzLl9tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodCx0aGlzLl9jb25maWcpfX1lbmFibGUoKXtzdXBlci5lbmFibGUoKTtmb3IoY29uc3QgdCBvZiB0aGlzLl9kb21FbGVtZW50cyl7dGhpcy5fbXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHQsdGhpcy5fY29uZmlnKX19ZGlzYWJsZSgpe3N1cGVyLmRpc2FibGUoKTt0aGlzLl9tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpO3RoaXMuX211dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpfV9vbk11dGF0aW9ucyh0KXtpZih0Lmxlbmd0aD09PTApe3JldHVybn1jb25zdCBlPXRoaXMuZG9tQ29udmVydGVyO2NvbnN0IGk9bmV3IE1hcDtjb25zdCBuPW5ldyBTZXQ7Zm9yKGNvbnN0IGkgb2YgdCl7aWYoaS50eXBlPT09XCJjaGlsZExpc3RcIil7Y29uc3QgdD1lLm1hcERvbVRvVmlldyhpLnRhcmdldCk7aWYodCYmdC5pcyhcInVpRWxlbWVudFwiKSl7Y29udGludWV9aWYodCYmIXRoaXMuX2lzQm9ndXNCck11dGF0aW9uKGkpKXtuLmFkZCh0KX19fWZvcihjb25zdCBvIG9mIHQpe2NvbnN0IHQ9ZS5tYXBEb21Ub1ZpZXcoby50YXJnZXQpO2lmKHQmJnQuaXMoXCJ1aUVsZW1lbnRcIikpe2NvbnRpbnVlfWlmKG8udHlwZT09PVwiY2hhcmFjdGVyRGF0YVwiKXtjb25zdCB0PWUuZmluZENvcnJlc3BvbmRpbmdWaWV3VGV4dChvLnRhcmdldCk7aWYodCYmIW4uaGFzKHQucGFyZW50KSl7aS5zZXQodCx7dHlwZTpcInRleHRcIixvbGRUZXh0OnQuZGF0YSxuZXdUZXh0OnVkKG8udGFyZ2V0KSxub2RlOnR9KX1lbHNlIGlmKCF0JiZsZChvLnRhcmdldCkpe24uYWRkKGUubWFwRG9tVG9WaWV3KG8udGFyZ2V0LnBhcmVudE5vZGUpKX19fWNvbnN0IG89W107Zm9yKGNvbnN0IHQgb2YgaS52YWx1ZXMoKSl7dGhpcy5yZW5kZXJlci5tYXJrVG9TeW5jKFwidGV4dFwiLHQubm9kZSk7by5wdXNoKHQpfWZvcihjb25zdCB0IG9mIG4pe2NvbnN0IGk9ZS5tYXBWaWV3VG9Eb20odCk7Y29uc3Qgbj1BcnJheS5mcm9tKHQuZ2V0Q2hpbGRyZW4oKSk7Y29uc3Qgcj1BcnJheS5mcm9tKGUuZG9tQ2hpbGRyZW5Ub1ZpZXcoaSx7d2l0aENoaWxkcmVuOmZhbHNlfSkpO2lmKCEkdShuLHIsYSkpe3RoaXMucmVuZGVyZXIubWFya1RvU3luYyhcImNoaWxkcmVuXCIsdCk7by5wdXNoKHt0eXBlOlwiY2hpbGRyZW5cIixvbGRDaGlsZHJlbjpuLG5ld0NoaWxkcmVuOnIsbm9kZTp0fSl9fWNvbnN0IHI9dFswXS50YXJnZXQub3duZXJEb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtsZXQgcz1udWxsO2lmKHImJnIuYW5jaG9yTm9kZSl7Y29uc3QgdD1lLmRvbVBvc2l0aW9uVG9WaWV3KHIuYW5jaG9yTm9kZSxyLmFuY2hvck9mZnNldCk7Y29uc3QgaT1lLmRvbVBvc2l0aW9uVG9WaWV3KHIuZm9jdXNOb2RlLHIuZm9jdXNPZmZzZXQpO2lmKHQmJmkpe3M9bmV3IGdsKHQpO3Muc2V0Rm9jdXMoaSl9fWlmKG8ubGVuZ3RoKXt0aGlzLmRvY3VtZW50LmZpcmUoXCJtdXRhdGlvbnNcIixvLHMpO3RoaXMudmlldy5mb3JjZVJlbmRlcigpfWZ1bmN0aW9uIGEodCxlKXtpZihBcnJheS5pc0FycmF5KHQpKXtyZXR1cm59aWYodD09PWUpe3JldHVybiB0cnVlfWVsc2UgaWYodC5pcyhcInRleHRcIikmJmUuaXMoXCJ0ZXh0XCIpKXtyZXR1cm4gdC5kYXRhPT09ZS5kYXRhfXJldHVybiBmYWxzZX19X2lzQm9ndXNCck11dGF0aW9uKHQpe2xldCBlPW51bGw7aWYodC5uZXh0U2libGluZz09PW51bGwmJnQucmVtb3ZlZE5vZGVzLmxlbmd0aD09PTAmJnQuYWRkZWROb2Rlcy5sZW5ndGg9PTEpe2U9dGhpcy5kb21Db252ZXJ0ZXIuZG9tVG9WaWV3KHQuYWRkZWROb2Rlc1swXSx7d2l0aENoaWxkcmVuOmZhbHNlfSl9cmV0dXJuIGUmJmUuaXMoXCJlbGVtZW50XCIsXCJiclwiKX19Y2xhc3MgS3V7Y29uc3RydWN0b3IodCxlLGkpe3RoaXMudmlldz10O3RoaXMuZG9jdW1lbnQ9dC5kb2N1bWVudDt0aGlzLmRvbUV2ZW50PWU7dGhpcy5kb21UYXJnZXQ9ZS50YXJnZXQ7cWModGhpcyxpKX1nZXQgdGFyZ2V0KCl7cmV0dXJuIHRoaXMudmlldy5kb21Db252ZXJ0ZXIubWFwRG9tVG9WaWV3KHRoaXMuZG9tVGFyZ2V0KX1wcmV2ZW50RGVmYXVsdCgpe3RoaXMuZG9tRXZlbnQucHJldmVudERlZmF1bHQoKX1zdG9wUHJvcGFnYXRpb24oKXt0aGlzLmRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfX1jbGFzcyBKdSBleHRlbmRzIEdke2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMudXNlQ2FwdHVyZT1mYWxzZX1vYnNlcnZlKHQpe2NvbnN0IGU9dHlwZW9mIHRoaXMuZG9tRXZlbnRUeXBlPT1cInN0cmluZ1wiP1t0aGlzLmRvbUV2ZW50VHlwZV06dGhpcy5kb21FdmVudFR5cGU7ZS5mb3JFYWNoKGU9Pnt0aGlzLmxpc3RlblRvKHQsZSwodCxlKT0+e2lmKHRoaXMuaXNFbmFibGVkKXt0aGlzLm9uRG9tRXZlbnQoZSl9fSx7dXNlQ2FwdHVyZTp0aGlzLnVzZUNhcHR1cmV9KX0pfWZpcmUodCxlLGkpe2lmKHRoaXMuaXNFbmFibGVkKXt0aGlzLmRvY3VtZW50LmZpcmUodCxuZXcgS3UodGhpcy52aWV3LGUsaSkpfX19Y2xhc3MgWXUgZXh0ZW5kcyBKdXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0aGlzLmRvbUV2ZW50VHlwZT1bXCJrZXlkb3duXCIsXCJrZXl1cFwiXX1vbkRvbUV2ZW50KHQpe3RoaXMuZmlyZSh0LnR5cGUsdCx7a2V5Q29kZTp0LmtleUNvZGUsYWx0S2V5OnQuYWx0S2V5LGN0cmxLZXk6dC5jdHJsS2V5fHx0Lm1ldGFLZXksc2hpZnRLZXk6dC5zaGlmdEtleSxnZXQga2V5c3Ryb2tlKCl7cmV0dXJuIE1sKHRoaXMpfX0pfX12YXIgUXU9ZnVuY3Rpb24oKXtyZXR1cm4gbltcImFcIl0uRGF0ZS5ub3coKX07dmFyIFh1PVF1O3ZhciBadT0wLzA7dmFyIHRoPS9eXFxzK3xcXHMrJC9nO3ZhciBlaD0vXlstK10weFswLTlhLWZdKyQvaTt2YXIgaWg9L14wYlswMV0rJC9pO3ZhciBuaD0vXjBvWzAtN10rJC9pO3ZhciBvaD1wYXJzZUludDtmdW5jdGlvbiByaCh0KXtpZih0eXBlb2YgdD09XCJudW1iZXJcIil7cmV0dXJuIHR9aWYoUXModCkpe3JldHVybiBadX1pZihjdCh0KSl7dmFyIGU9dHlwZW9mIHQudmFsdWVPZj09XCJmdW5jdGlvblwiP3QudmFsdWVPZigpOnQ7dD1jdChlKT9lK1wiXCI6ZX1pZih0eXBlb2YgdCE9XCJzdHJpbmdcIil7cmV0dXJuIHQ9PT0wP3Q6K3R9dD10LnJlcGxhY2UodGgsXCJcIik7dmFyIGk9aWgudGVzdCh0KTtyZXR1cm4gaXx8bmgudGVzdCh0KT9vaCh0LnNsaWNlKDIpLGk/Mjo4KTplaC50ZXN0KHQpP1p1Oit0fXZhciBzaD1yaDt2YXIgYWg9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCI7dmFyIGNoPU1hdGgubWF4LGxoPU1hdGgubWluO2Z1bmN0aW9uIGRoKHQsZSxpKXt2YXIgbixvLHIscyxhLGMsbD0wLGQ9ZmFsc2UsdT1mYWxzZSxoPXRydWU7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihhaCl9ZT1zaChlKXx8MDtpZihjdChpKSl7ZD0hIWkubGVhZGluZzt1PVwibWF4V2FpdFwiaW4gaTtyPXU/Y2goc2goaS5tYXhXYWl0KXx8MCxlKTpyO2g9XCJ0cmFpbGluZ1wiaW4gaT8hIWkudHJhaWxpbmc6aH1mdW5jdGlvbiBmKGUpe3ZhciBpPW4scj1vO249bz11bmRlZmluZWQ7bD1lO3M9dC5hcHBseShyLGkpO3JldHVybiBzfWZ1bmN0aW9uIGcodCl7bD10O2E9c2V0VGltZW91dChiLGUpO3JldHVybiBkP2YodCk6c31mdW5jdGlvbiBtKHQpe3ZhciBpPXQtYyxuPXQtbCxvPWUtaTtyZXR1cm4gdT9saChvLHItbik6b31mdW5jdGlvbiBwKHQpe3ZhciBpPXQtYyxuPXQtbDtyZXR1cm4gYz09PXVuZGVmaW5lZHx8aT49ZXx8aTwwfHx1JiZuPj1yfWZ1bmN0aW9uIGIoKXt2YXIgdD1YdSgpO2lmKHAodCkpe3JldHVybiB3KHQpfWE9c2V0VGltZW91dChiLG0odCkpfWZ1bmN0aW9uIHcodCl7YT11bmRlZmluZWQ7aWYoaCYmbil7cmV0dXJuIGYodCl9bj1vPXVuZGVmaW5lZDtyZXR1cm4gc31mdW5jdGlvbiBrKCl7aWYoYSE9PXVuZGVmaW5lZCl7Y2xlYXJUaW1lb3V0KGEpfWw9MDtuPWM9bz1hPXVuZGVmaW5lZH1mdW5jdGlvbiBfKCl7cmV0dXJuIGE9PT11bmRlZmluZWQ/czp3KFh1KCkpfWZ1bmN0aW9uIHYoKXt2YXIgdD1YdSgpLGk9cCh0KTtuPWFyZ3VtZW50cztvPXRoaXM7Yz10O2lmKGkpe2lmKGE9PT11bmRlZmluZWQpe3JldHVybiBnKGMpfWlmKHUpe2NsZWFyVGltZW91dChhKTthPXNldFRpbWVvdXQoYixlKTtyZXR1cm4gZihjKX19aWYoYT09PXVuZGVmaW5lZCl7YT1zZXRUaW1lb3V0KGIsZSl9cmV0dXJuIHN9di5jYW5jZWw9azt2LmZsdXNoPV87cmV0dXJuIHZ9dmFyIHVoPWRoO2NsYXNzIGhoIGV4dGVuZHMgR2R7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQ9dWgodD0+dGhpcy5kb2N1bWVudC5maXJlKFwic2VsZWN0aW9uQ2hhbmdlRG9uZVwiLHQpLDIwMCl9b2JzZXJ2ZSgpe2NvbnN0IHQ9dGhpcy5kb2N1bWVudDt0Lm9uKFwia2V5ZG93blwiLChlLGkpPT57Y29uc3Qgbj10LnNlbGVjdGlvbjtpZihuLmlzRmFrZSYmZmgoaS5rZXlDb2RlKSYmdGhpcy5pc0VuYWJsZWQpe2kucHJldmVudERlZmF1bHQoKTt0aGlzLl9oYW5kbGVTZWxlY3Rpb25Nb3ZlKGkua2V5Q29kZSl9fSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCk7dGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQuY2FuY2VsKCl9X2hhbmRsZVNlbGVjdGlvbk1vdmUodCl7Y29uc3QgZT10aGlzLmRvY3VtZW50LnNlbGVjdGlvbjtjb25zdCBpPW5ldyBnbChlLmdldFJhbmdlcygpLHtiYWNrd2FyZDplLmlzQmFja3dhcmQsZmFrZTpmYWxzZX0pO2lmKHQ9PU5sLmFycm93bGVmdHx8dD09TmwuYXJyb3d1cCl7aS5zZXRUbyhpLmdldEZpcnN0UG9zaXRpb24oKSl9aWYodD09TmwuYXJyb3dyaWdodHx8dD09TmwuYXJyb3dkb3duKXtpLnNldFRvKGkuZ2V0TGFzdFBvc2l0aW9uKCkpfWNvbnN0IG49e29sZFNlbGVjdGlvbjplLG5ld1NlbGVjdGlvbjppLGRvbVNlbGVjdGlvbjpudWxsfTt0aGlzLmRvY3VtZW50LmZpcmUoXCJzZWxlY3Rpb25DaGFuZ2VcIixuKTt0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZChuKX19ZnVuY3Rpb24gZmgodCl7cmV0dXJuIHQ9PU5sLmFycm93cmlnaHR8fHQ9PU5sLmFycm93bGVmdHx8dD09TmwuYXJyb3d1cHx8dD09TmwuYXJyb3dkb3dufWNsYXNzIGdoIGV4dGVuZHMgR2R7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5tdXRhdGlvbk9ic2VydmVyPXQuZ2V0T2JzZXJ2ZXIoR3UpO3RoaXMuc2VsZWN0aW9uPXRoaXMuZG9jdW1lbnQuc2VsZWN0aW9uO3RoaXMuZG9tQ29udmVydGVyPXQuZG9tQ29udmVydGVyO3RoaXMuX2RvY3VtZW50cz1uZXcgV2Vha1NldDt0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZD11aCh0PT50aGlzLmRvY3VtZW50LmZpcmUoXCJzZWxlY3Rpb25DaGFuZ2VEb25lXCIsdCksMjAwKTt0aGlzLl9jbGVhckluZmluaXRlTG9vcEludGVydmFsPXNldEludGVydmFsKCgpPT50aGlzLl9jbGVhckluZmluaXRlTG9vcCgpLDFlMyk7dGhpcy5fbG9vcGJhY2tDb3VudGVyPTB9b2JzZXJ2ZSh0KXtjb25zdCBlPXQub3duZXJEb2N1bWVudDtpZih0aGlzLl9kb2N1bWVudHMuaGFzKGUpKXtyZXR1cm59dGhpcy5saXN0ZW5UbyhlLFwic2VsZWN0aW9uY2hhbmdlXCIsKCk9Pnt0aGlzLl9oYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZSl9KTt0aGlzLl9kb2N1bWVudHMuYWRkKGUpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCk7Y2xlYXJJbnRlcnZhbCh0aGlzLl9jbGVhckluZmluaXRlTG9vcEludGVydmFsKTt0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZC5jYW5jZWwoKX1faGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHQpe2lmKCF0aGlzLmlzRW5hYmxlZCl7cmV0dXJufXRoaXMubXV0YXRpb25PYnNlcnZlci5mbHVzaCgpO2NvbnN0IGU9dC5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKTtjb25zdCBpPXRoaXMuZG9tQ29udmVydGVyLmRvbVNlbGVjdGlvblRvVmlldyhlKTtpZihpLnJhbmdlQ291bnQ9PTApe3JldHVybn1pZih0aGlzLnNlbGVjdGlvbi5pc0VxdWFsKGkpJiZ0aGlzLmRvbUNvbnZlcnRlci5pc0RvbVNlbGVjdGlvbkNvcnJlY3QoZSkpe3JldHVybn1pZigrK3RoaXMuX2xvb3BiYWNrQ291bnRlcj42MCl7cmV0dXJufWlmKHRoaXMuc2VsZWN0aW9uLmlzU2ltaWxhcihpKSl7dGhpcy52aWV3LmZvcmNlUmVuZGVyKCl9ZWxzZXtjb25zdCB0PXtvbGRTZWxlY3Rpb246dGhpcy5zZWxlY3Rpb24sbmV3U2VsZWN0aW9uOmksZG9tU2VsZWN0aW9uOmV9O3RoaXMuZG9jdW1lbnQuZmlyZShcInNlbGVjdGlvbkNoYW5nZVwiLHQpO3RoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEb25lRGVib3VuY2VkKHQpfX1fY2xlYXJJbmZpbml0ZUxvb3AoKXt0aGlzLl9sb29wYmFja0NvdW50ZXI9MH19Y2xhc3MgbWggZXh0ZW5kcyBKdXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0aGlzLmRvbUV2ZW50VHlwZT1bXCJmb2N1c1wiLFwiYmx1clwiXTt0aGlzLnVzZUNhcHR1cmU9dHJ1ZTtjb25zdCBlPXRoaXMuZG9jdW1lbnQ7ZS5vbihcImZvY3VzXCIsKCk9PntlLmlzRm9jdXNlZD10cnVlO3RoaXMuX3JlbmRlclRpbWVvdXRJZD1zZXRUaW1lb3V0KCgpPT50LmZvcmNlUmVuZGVyKCksNTApfSk7ZS5vbihcImJsdXJcIiwoaSxuKT0+e2NvbnN0IG89ZS5zZWxlY3Rpb24uZWRpdGFibGVFbGVtZW50O2lmKG89PT1udWxsfHxvPT09bi50YXJnZXQpe2UuaXNGb2N1c2VkPWZhbHNlO3QuZm9yY2VSZW5kZXIoKX19KX1vbkRvbUV2ZW50KHQpe3RoaXMuZmlyZSh0LnR5cGUsdCl9ZGVzdHJveSgpe2lmKHRoaXMuX3JlbmRlclRpbWVvdXRJZCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3JlbmRlclRpbWVvdXRJZCl9c3VwZXIuZGVzdHJveSgpfX1jbGFzcyBwaCBleHRlbmRzIEp1e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuZG9tRXZlbnRUeXBlPVtcImNvbXBvc2l0aW9uc3RhcnRcIixcImNvbXBvc2l0aW9udXBkYXRlXCIsXCJjb21wb3NpdGlvbmVuZFwiXTtjb25zdCBlPXRoaXMuZG9jdW1lbnQ7ZS5vbihcImNvbXBvc2l0aW9uc3RhcnRcIiwoKT0+e2UuaXNDb21wb3Npbmc9dHJ1ZX0pO2Uub24oXCJjb21wb3NpdGlvbmVuZFwiLCgpPT57ZS5pc0NvbXBvc2luZz1mYWxzZX0pfW9uRG9tRXZlbnQodCl7dGhpcy5maXJlKHQudHlwZSx0KX19Y2xhc3MgYmggZXh0ZW5kcyBKdXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0aGlzLmRvbUV2ZW50VHlwZT1bXCJiZWZvcmVpbnB1dFwiXX1vbkRvbUV2ZW50KHQpe3RoaXMuZmlyZSh0LnR5cGUsdCl9fWZ1bmN0aW9uIHdoKHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHQpPT1cIltvYmplY3QgUmFuZ2VdXCJ9ZnVuY3Rpb24ga2godCl7Y29uc3QgZT10Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0KTtyZXR1cm57dG9wOnBhcnNlSW50KGUuYm9yZGVyVG9wV2lkdGgsMTApLHJpZ2h0OnBhcnNlSW50KGUuYm9yZGVyUmlnaHRXaWR0aCwxMCksYm90dG9tOnBhcnNlSW50KGUuYm9yZGVyQm90dG9tV2lkdGgsMTApLGxlZnQ6cGFyc2VJbnQoZS5ib3JkZXJMZWZ0V2lkdGgsMTApfX1jb25zdCBfaD1bXCJ0b3BcIixcInJpZ2h0XCIsXCJib3R0b21cIixcImxlZnRcIixcIndpZHRoXCIsXCJoZWlnaHRcIl07Y2xhc3Mgdmh7Y29uc3RydWN0b3IodCl7Y29uc3QgZT13aCh0KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcIl9zb3VyY2VcIix7dmFsdWU6dC5fc291cmNlfHx0LHdyaXRhYmxlOnRydWUsZW51bWVyYWJsZTpmYWxzZX0pO2lmKEtyKHQpfHxlKXtpZihlKXt5aCh0aGlzLHZoLmdldERvbVJhbmdlUmVjdHModClbMF0pfWVsc2V7eWgodGhpcyx0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX19ZWxzZSBpZihIZCh0KSl7Y29uc3R7aW5uZXJXaWR0aDplLGlubmVySGVpZ2h0Oml9PXQ7eWgodGhpcyx7dG9wOjAscmlnaHQ6ZSxib3R0b206aSxsZWZ0OjAsd2lkdGg6ZSxoZWlnaHQ6aX0pfWVsc2V7eWgodGhpcyx0KX19Y2xvbmUoKXtyZXR1cm4gbmV3IHZoKHRoaXMpfW1vdmVUbyh0LGUpe3RoaXMudG9wPWU7dGhpcy5yaWdodD10K3RoaXMud2lkdGg7dGhpcy5ib3R0b209ZSt0aGlzLmhlaWdodDt0aGlzLmxlZnQ9dDtyZXR1cm4gdGhpc31tb3ZlQnkodCxlKXt0aGlzLnRvcCs9ZTt0aGlzLnJpZ2h0Kz10O3RoaXMubGVmdCs9dDt0aGlzLmJvdHRvbSs9ZTtyZXR1cm4gdGhpc31nZXRJbnRlcnNlY3Rpb24odCl7Y29uc3QgZT17dG9wOk1hdGgubWF4KHRoaXMudG9wLHQudG9wKSxyaWdodDpNYXRoLm1pbih0aGlzLnJpZ2h0LHQucmlnaHQpLGJvdHRvbTpNYXRoLm1pbih0aGlzLmJvdHRvbSx0LmJvdHRvbSksbGVmdDpNYXRoLm1heCh0aGlzLmxlZnQsdC5sZWZ0KX07ZS53aWR0aD1lLnJpZ2h0LWUubGVmdDtlLmhlaWdodD1lLmJvdHRvbS1lLnRvcDtpZihlLndpZHRoPDB8fGUuaGVpZ2h0PDApe3JldHVybiBudWxsfWVsc2V7cmV0dXJuIG5ldyB2aChlKX19Z2V0SW50ZXJzZWN0aW9uQXJlYSh0KXtjb25zdCBlPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHQpO2lmKGUpe3JldHVybiBlLmdldEFyZWEoKX1lbHNle3JldHVybiAwfX1nZXRBcmVhKCl7cmV0dXJuIHRoaXMud2lkdGgqdGhpcy5oZWlnaHR9Z2V0VmlzaWJsZSgpe2NvbnN0IHQ9dGhpcy5fc291cmNlO2xldCBlPXRoaXMuY2xvbmUoKTtpZigheGgodCkpe2xldCBpPXQucGFyZW50Tm9kZXx8dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcjt3aGlsZShpJiYheGgoaSkpe2NvbnN0IHQ9bmV3IHZoKGkpO2NvbnN0IG49ZS5nZXRJbnRlcnNlY3Rpb24odCk7aWYobil7aWYobi5nZXRBcmVhKCk8ZS5nZXRBcmVhKCkpe2U9bn19ZWxzZXtyZXR1cm4gbnVsbH1pPWkucGFyZW50Tm9kZX19cmV0dXJuIGV9aXNFcXVhbCh0KXtmb3IoY29uc3QgZSBvZiBfaCl7aWYodGhpc1tlXSE9PXRbZV0pe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9Y29udGFpbnModCl7Y29uc3QgZT10aGlzLmdldEludGVyc2VjdGlvbih0KTtyZXR1cm4hIShlJiZlLmlzRXF1YWwodCkpfWV4Y2x1ZGVTY3JvbGxiYXJzQW5kQm9yZGVycygpe2NvbnN0IHQ9dGhpcy5fc291cmNlO2xldCBlLGksbjtpZihIZCh0KSl7ZT10LmlubmVyV2lkdGgtdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7aT10LmlubmVySGVpZ2h0LXQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtuPXQuZ2V0Q29tcHV0ZWRTdHlsZSh0LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuZGlyZWN0aW9ufWVsc2V7Y29uc3Qgbz1raCh0aGlzLl9zb3VyY2UpO2U9dC5vZmZzZXRXaWR0aC10LmNsaWVudFdpZHRoLW8ubGVmdC1vLnJpZ2h0O2k9dC5vZmZzZXRIZWlnaHQtdC5jbGllbnRIZWlnaHQtby50b3Atby5ib3R0b207bj10Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5kaXJlY3Rpb247dGhpcy5sZWZ0Kz1vLmxlZnQ7dGhpcy50b3ArPW8udG9wO3RoaXMucmlnaHQtPW8ucmlnaHQ7dGhpcy5ib3R0b20tPW8uYm90dG9tO3RoaXMud2lkdGg9dGhpcy5yaWdodC10aGlzLmxlZnQ7dGhpcy5oZWlnaHQ9dGhpcy5ib3R0b20tdGhpcy50b3B9dGhpcy53aWR0aC09ZTtpZihuPT09XCJsdHJcIil7dGhpcy5yaWdodC09ZX1lbHNle3RoaXMubGVmdCs9ZX10aGlzLmhlaWdodC09aTt0aGlzLmJvdHRvbS09aTtyZXR1cm4gdGhpc31zdGF0aWMgZ2V0RG9tUmFuZ2VSZWN0cyh0KXtjb25zdCBlPVtdO2NvbnN0IGk9QXJyYXkuZnJvbSh0LmdldENsaWVudFJlY3RzKCkpO2lmKGkubGVuZ3RoKXtmb3IoY29uc3QgdCBvZiBpKXtlLnB1c2gobmV3IHZoKHQpKX19ZWxzZXtsZXQgaT10LnN0YXJ0Q29udGFpbmVyO2lmKG9kKGkpKXtpPWkucGFyZW50Tm9kZX1jb25zdCBuPW5ldyB2aChpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtuLnJpZ2h0PW4ubGVmdDtuLndpZHRoPTA7ZS5wdXNoKG4pfXJldHVybiBlfX1mdW5jdGlvbiB5aCh0LGUpe2Zvcihjb25zdCBpIG9mIF9oKXt0W2ldPWVbaV19fWZ1bmN0aW9uIHhoKHQpe2lmKCFLcih0KSl7cmV0dXJuIGZhbHNlfXJldHVybiB0PT09dC5vd25lckRvY3VtZW50LmJvZHl9Y29uc3QgQ2g9e307ZnVuY3Rpb24gQWgoe3RhcmdldDp0LHZpZXdwb3J0T2Zmc2V0OmU9MH0pe2NvbnN0IGk9VmgodCk7bGV0IG49aTtsZXQgbz1udWxsO3doaWxlKG4pe2xldCByO2lmKG49PWkpe3I9TmgodCl9ZWxzZXtyPU5oKG8pfVNoKHIsKCk9Pk1oKHQsbikpO2NvbnN0IHM9TWgodCxuKTtQaChuLHMsZSk7aWYobi5wYXJlbnQhPW4pe289bi5mcmFtZUVsZW1lbnQ7bj1uLnBhcmVudDtpZighbyl7cmV0dXJufX1lbHNle249bnVsbH19fWZ1bmN0aW9uIFRoKHQpe2NvbnN0IGU9TmgodCk7U2goZSwoKT0+bmV3IHZoKHQpKX1PYmplY3QuYXNzaWduKENoLHtzY3JvbGxWaWV3cG9ydFRvU2hvd1RhcmdldDpBaCxzY3JvbGxBbmNlc3RvcnNUb1Nob3dUYXJnZXQ6VGh9KTtmdW5jdGlvbiBQaCh0LGUsaSl7Y29uc3Qgbj1lLmNsb25lKCkubW92ZUJ5KDAsaSk7Y29uc3Qgbz1lLmNsb25lKCkubW92ZUJ5KDAsLWkpO2NvbnN0IHI9bmV3IHZoKHQpLmV4Y2x1ZGVTY3JvbGxiYXJzQW5kQm9yZGVycygpO2NvbnN0IHM9W28sbl07aWYoIXMuZXZlcnkodD0+ci5jb250YWlucyh0KSkpe2xldHtzY3JvbGxYOnMsc2Nyb2xsWTphfT10O2lmKFJoKG8scikpe2EtPXIudG9wLWUudG9wK2l9ZWxzZSBpZihFaChuLHIpKXthKz1lLmJvdHRvbS1yLmJvdHRvbStpfWlmKE9oKGUscikpe3MtPXIubGVmdC1lLmxlZnQraX1lbHNlIGlmKEloKGUscikpe3MrPWUucmlnaHQtci5yaWdodCtpfXQuc2Nyb2xsVG8ocyxhKX19ZnVuY3Rpb24gU2godCxlKXtjb25zdCBpPVZoKHQpO2xldCBuLG87d2hpbGUodCE9aS5kb2N1bWVudC5ib2R5KXtvPWUoKTtuPW5ldyB2aCh0KS5leGNsdWRlU2Nyb2xsYmFyc0FuZEJvcmRlcnMoKTtpZighbi5jb250YWlucyhvKSl7aWYoUmgobyxuKSl7dC5zY3JvbGxUb3AtPW4udG9wLW8udG9wfWVsc2UgaWYoRWgobyxuKSl7dC5zY3JvbGxUb3ArPW8uYm90dG9tLW4uYm90dG9tfWlmKE9oKG8sbikpe3Quc2Nyb2xsTGVmdC09bi5sZWZ0LW8ubGVmdH1lbHNlIGlmKEloKG8sbikpe3Quc2Nyb2xsTGVmdCs9by5yaWdodC1uLnJpZ2h0fX10PXQucGFyZW50Tm9kZX19ZnVuY3Rpb24gRWgodCxlKXtyZXR1cm4gdC5ib3R0b20+ZS5ib3R0b219ZnVuY3Rpb24gUmgodCxlKXtyZXR1cm4gdC50b3A8ZS50b3B9ZnVuY3Rpb24gT2godCxlKXtyZXR1cm4gdC5sZWZ0PGUubGVmdH1mdW5jdGlvbiBJaCh0LGUpe3JldHVybiB0LnJpZ2h0PmUucmlnaHR9ZnVuY3Rpb24gVmgodCl7aWYod2godCkpe3JldHVybiB0LnN0YXJ0Q29udGFpbmVyLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd9ZWxzZXtyZXR1cm4gdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3fX1mdW5jdGlvbiBOaCh0KXtpZih3aCh0KSl7bGV0IGU9dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtpZihvZChlKSl7ZT1lLnBhcmVudE5vZGV9cmV0dXJuIGV9ZWxzZXtyZXR1cm4gdC5wYXJlbnROb2RlfX1mdW5jdGlvbiBNaCh0LGUpe2NvbnN0IGk9VmgodCk7Y29uc3Qgbj1uZXcgdmgodCk7aWYoaT09PWUpe3JldHVybiBufWVsc2V7bGV0IHQ9aTt3aGlsZSh0IT1lKXtjb25zdCBlPXQuZnJhbWVFbGVtZW50O2NvbnN0IGk9bmV3IHZoKGUpLmV4Y2x1ZGVTY3JvbGxiYXJzQW5kQm9yZGVycygpO24ubW92ZUJ5KGkubGVmdCxpLnRvcCk7dD10LnBhcmVudH19cmV0dXJuIG59Y2xhc3MgQmh7Y29uc3RydWN0b3IodCl7dGhpcy5kb2N1bWVudD1uZXcgcGwodCk7dGhpcy5kb21Db252ZXJ0ZXI9bmV3IHpkKHRoaXMuZG9jdW1lbnQpO3RoaXMuZG9tUm9vdHM9bmV3IE1hcDt0aGlzLnNldChcImlzUmVuZGVyaW5nSW5Qcm9ncmVzc1wiLGZhbHNlKTt0aGlzLl9yZW5kZXJlcj1uZXcgQ2QodGhpcy5kb21Db252ZXJ0ZXIsdGhpcy5kb2N1bWVudC5zZWxlY3Rpb24pO3RoaXMuX3JlbmRlcmVyLmJpbmQoXCJpc0ZvY3VzZWRcIikudG8odGhpcy5kb2N1bWVudCk7dGhpcy5faW5pdGlhbERvbVJvb3RBdHRyaWJ1dGVzPW5ldyBXZWFrTWFwO3RoaXMuX29ic2VydmVycz1uZXcgTWFwO3RoaXMuX29uZ29pbmdDaGFuZ2U9ZmFsc2U7dGhpcy5fcG9zdEZpeGVyc0luUHJvZ3Jlc3M9ZmFsc2U7dGhpcy5fcmVuZGVyaW5nRGlzYWJsZWQ9ZmFsc2U7dGhpcy5faGFzQ2hhbmdlZFNpbmNlVGhlTGFzdFJlbmRlcmluZz1mYWxzZTt0aGlzLl93cml0ZXI9bmV3ICRsKHRoaXMuZG9jdW1lbnQpO3RoaXMuYWRkT2JzZXJ2ZXIoR3UpO3RoaXMuYWRkT2JzZXJ2ZXIoZ2gpO3RoaXMuYWRkT2JzZXJ2ZXIobWgpO3RoaXMuYWRkT2JzZXJ2ZXIoWXUpO3RoaXMuYWRkT2JzZXJ2ZXIoaGgpO3RoaXMuYWRkT2JzZXJ2ZXIocGgpO2lmKEFsLmlzQW5kcm9pZCl7dGhpcy5hZGRPYnNlcnZlcihiaCl9aGQodGhpcyk7amwodGhpcyk7dGhpcy5vbihcInJlbmRlclwiLCgpPT57dGhpcy5fcmVuZGVyKCk7dGhpcy5kb2N1bWVudC5maXJlKFwibGF5b3V0Q2hhbmdlZFwiKTt0aGlzLl9oYXNDaGFuZ2VkU2luY2VUaGVMYXN0UmVuZGVyaW5nPWZhbHNlfSk7dGhpcy5saXN0ZW5Ubyh0aGlzLmRvY3VtZW50LnNlbGVjdGlvbixcImNoYW5nZVwiLCgpPT57dGhpcy5faGFzQ2hhbmdlZFNpbmNlVGhlTGFzdFJlbmRlcmluZz10cnVlfSl9YXR0YWNoRG9tUm9vdCh0LGU9XCJtYWluXCIpe2NvbnN0IGk9dGhpcy5kb2N1bWVudC5nZXRSb290KGUpO2kuX25hbWU9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7Y29uc3Qgbj17fTtmb3IoY29uc3R7bmFtZTplLHZhbHVlOm99b2YgQXJyYXkuZnJvbSh0LmF0dHJpYnV0ZXMpKXtuW2VdPW87aWYoZT09PVwiY2xhc3NcIil7dGhpcy5fd3JpdGVyLmFkZENsYXNzKG8uc3BsaXQoXCIgXCIpLGkpfWVsc2V7dGhpcy5fd3JpdGVyLnNldEF0dHJpYnV0ZShlLG8saSl9fXRoaXMuX2luaXRpYWxEb21Sb290QXR0cmlidXRlcy5zZXQodCxuKTtjb25zdCBvPSgpPT57dGhpcy5fd3JpdGVyLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCFpLmlzUmVhZE9ubHksaSk7aWYoaS5pc1JlYWRPbmx5KXt0aGlzLl93cml0ZXIuYWRkQ2xhc3MoXCJjay1yZWFkLW9ubHlcIixpKX1lbHNle3RoaXMuX3dyaXRlci5yZW1vdmVDbGFzcyhcImNrLXJlYWQtb25seVwiLGkpfX07bygpO3RoaXMuZG9tUm9vdHMuc2V0KGUsdCk7dGhpcy5kb21Db252ZXJ0ZXIuYmluZEVsZW1lbnRzKHQsaSk7dGhpcy5fcmVuZGVyZXIubWFya1RvU3luYyhcImNoaWxkcmVuXCIsaSk7dGhpcy5fcmVuZGVyZXIubWFya1RvU3luYyhcImF0dHJpYnV0ZXNcIixpKTt0aGlzLl9yZW5kZXJlci5kb21Eb2N1bWVudHMuYWRkKHQub3duZXJEb2N1bWVudCk7aS5vbihcImNoYW5nZTpjaGlsZHJlblwiLCh0LGUpPT50aGlzLl9yZW5kZXJlci5tYXJrVG9TeW5jKFwiY2hpbGRyZW5cIixlKSk7aS5vbihcImNoYW5nZTphdHRyaWJ1dGVzXCIsKHQsZSk9PnRoaXMuX3JlbmRlcmVyLm1hcmtUb1N5bmMoXCJhdHRyaWJ1dGVzXCIsZSkpO2kub24oXCJjaGFuZ2U6dGV4dFwiLCh0LGUpPT50aGlzLl9yZW5kZXJlci5tYXJrVG9TeW5jKFwidGV4dFwiLGUpKTtpLm9uKFwiY2hhbmdlOmlzUmVhZE9ubHlcIiwoKT0+dGhpcy5jaGFuZ2UobykpO2kub24oXCJjaGFuZ2VcIiwoKT0+e3RoaXMuX2hhc0NoYW5nZWRTaW5jZVRoZUxhc3RSZW5kZXJpbmc9dHJ1ZX0pO2Zvcihjb25zdCBpIG9mIHRoaXMuX29ic2VydmVycy52YWx1ZXMoKSl7aS5vYnNlcnZlKHQsZSl9fWRldGFjaERvbVJvb3QodCl7Y29uc3QgZT10aGlzLmRvbVJvb3RzLmdldCh0KTtBcnJheS5mcm9tKGUuYXR0cmlidXRlcykuZm9yRWFjaCgoe25hbWU6dH0pPT5lLnJlbW92ZUF0dHJpYnV0ZSh0KSk7Y29uc3QgaT10aGlzLl9pbml0aWFsRG9tUm9vdEF0dHJpYnV0ZXMuZ2V0KGUpO2Zvcihjb25zdCB0IGluIGkpe2Uuc2V0QXR0cmlidXRlKHQsaVt0XSl9dGhpcy5kb21Sb290cy5kZWxldGUodCk7dGhpcy5kb21Db252ZXJ0ZXIudW5iaW5kRG9tRWxlbWVudChlKX1nZXREb21Sb290KHQ9XCJtYWluXCIpe3JldHVybiB0aGlzLmRvbVJvb3RzLmdldCh0KX1hZGRPYnNlcnZlcih0KXtsZXQgZT10aGlzLl9vYnNlcnZlcnMuZ2V0KHQpO2lmKGUpe3JldHVybiBlfWU9bmV3IHQodGhpcyk7dGhpcy5fb2JzZXJ2ZXJzLnNldCh0LGUpO2Zvcihjb25zdFt0LGldb2YgdGhpcy5kb21Sb290cyl7ZS5vYnNlcnZlKGksdCl9ZS5lbmFibGUoKTtyZXR1cm4gZX1nZXRPYnNlcnZlcih0KXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzLmdldCh0KX1kaXNhYmxlT2JzZXJ2ZXJzKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKXt0LmRpc2FibGUoKX19ZW5hYmxlT2JzZXJ2ZXJzKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKXt0LmVuYWJsZSgpfX1zY3JvbGxUb1RoZVNlbGVjdGlvbigpe2NvbnN0IHQ9dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0Rmlyc3RSYW5nZSgpO2lmKHQpe0FoKHt0YXJnZXQ6dGhpcy5kb21Db252ZXJ0ZXIudmlld1JhbmdlVG9Eb20odCksdmlld3BvcnRPZmZzZXQ6MjB9KX19Zm9jdXMoKXtpZighdGhpcy5kb2N1bWVudC5pc0ZvY3VzZWQpe2NvbnN0IHQ9dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24uZWRpdGFibGVFbGVtZW50O2lmKHQpe3RoaXMuZG9tQ29udmVydGVyLmZvY3VzKHQpO3RoaXMuZm9yY2VSZW5kZXIoKX1lbHNle319fWNoYW5nZSh0KXtpZih0aGlzLmlzUmVuZGVyaW5nSW5Qcm9ncmVzc3x8dGhpcy5fcG9zdEZpeGVyc0luUHJvZ3Jlc3Mpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjYW5ub3QtY2hhbmdlLXZpZXctdHJlZTogXCIrXCJBdHRlbXB0aW5nIHRvIG1ha2UgY2hhbmdlcyB0byB0aGUgdmlldyB3aGVuIGl0IGlzIGluIGFuIGluY29ycmVjdCBzdGF0ZTogcmVuZGVyaW5nIG9yIHBvc3QtZml4ZXJzIGFyZSBpbiBwcm9ncmVzcy4gXCIrXCJUaGlzIG1heSBjYXVzZSBzb21lIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIGluY29uc2lzdGVuY3kgYmV0d2VlbiB0aGUgRE9NIGFuZCB0aGUgdmlldy5cIix0aGlzKX10cnl7aWYodGhpcy5fb25nb2luZ0NoYW5nZSl7cmV0dXJuIHQodGhpcy5fd3JpdGVyKX10aGlzLl9vbmdvaW5nQ2hhbmdlPXRydWU7Y29uc3QgZT10KHRoaXMuX3dyaXRlcik7dGhpcy5fb25nb2luZ0NoYW5nZT1mYWxzZTtpZighdGhpcy5fcmVuZGVyaW5nRGlzYWJsZWQmJnRoaXMuX2hhc0NoYW5nZWRTaW5jZVRoZUxhc3RSZW5kZXJpbmcpe3RoaXMuX3Bvc3RGaXhlcnNJblByb2dyZXNzPXRydWU7dGhpcy5kb2N1bWVudC5fY2FsbFBvc3RGaXhlcnModGhpcy5fd3JpdGVyKTt0aGlzLl9wb3N0Rml4ZXJzSW5Qcm9ncmVzcz1mYWxzZTt0aGlzLmZpcmUoXCJyZW5kZXJcIil9cmV0dXJuIGV9Y2F0Y2godCl7c3NbXCJiXCJdLnJldGhyb3dVbmV4cGVjdGVkRXJyb3IodCx0aGlzKX19Zm9yY2VSZW5kZXIoKXt0aGlzLl9oYXNDaGFuZ2VkU2luY2VUaGVMYXN0UmVuZGVyaW5nPXRydWU7dGhpcy5jaGFuZ2UoKCk9Pnt9KX1kZXN0cm95KCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKXt0LmRlc3Ryb3koKX10aGlzLmRvY3VtZW50LmRlc3Ryb3koKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1jcmVhdGVQb3NpdGlvbkF0KHQsZSl7cmV0dXJuIGRsLl9jcmVhdGVBdCh0LGUpfWNyZWF0ZVBvc2l0aW9uQWZ0ZXIodCl7cmV0dXJuIGRsLl9jcmVhdGVBZnRlcih0KX1jcmVhdGVQb3NpdGlvbkJlZm9yZSh0KXtyZXR1cm4gZGwuX2NyZWF0ZUJlZm9yZSh0KX1jcmVhdGVSYW5nZSh0LGUpe3JldHVybiBuZXcgdWwodCxlKX1jcmVhdGVSYW5nZU9uKHQpe3JldHVybiB1bC5fY3JlYXRlT24odCl9Y3JlYXRlUmFuZ2VJbih0KXtyZXR1cm4gdWwuX2NyZWF0ZUluKHQpfWNyZWF0ZVNlbGVjdGlvbih0LGUsaSl7cmV0dXJuIG5ldyBnbCh0LGUsaSl9X2Rpc2FibGVSZW5kZXJpbmcodCl7dGhpcy5fcmVuZGVyaW5nRGlzYWJsZWQ9dDtpZih0PT1mYWxzZSl7dGhpcy5jaGFuZ2UoKCk9Pnt9KX19X3JlbmRlcigpe3RoaXMuaXNSZW5kZXJpbmdJblByb2dyZXNzPXRydWU7dGhpcy5kaXNhYmxlT2JzZXJ2ZXJzKCk7dGhpcy5fcmVuZGVyZXIucmVuZGVyKCk7dGhpcy5lbmFibGVPYnNlcnZlcnMoKTt0aGlzLmlzUmVuZGVyaW5nSW5Qcm9ncmVzcz1mYWxzZX19dnMoQmgsSmMpO2NsYXNzIHpoe2NvbnN0cnVjdG9yKHQpe3RoaXMucGFyZW50PW51bGw7dGhpcy5fYXR0cnM9SHModCl9Z2V0IGluZGV4KCl7bGV0IHQ7aWYoIXRoaXMucGFyZW50KXtyZXR1cm4gbnVsbH1pZigodD10aGlzLnBhcmVudC5nZXRDaGlsZEluZGV4KHRoaXMpKT09PW51bGwpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb2RlbC1ub2RlLW5vdC1mb3VuZC1pbi1wYXJlbnQ6IFRoZSBub2RlJ3MgcGFyZW50IGRvZXMgbm90IGNvbnRhaW4gdGhpcyBub2RlLlwiLHRoaXMpfXJldHVybiB0fWdldCBzdGFydE9mZnNldCgpe2xldCB0O2lmKCF0aGlzLnBhcmVudCl7cmV0dXJuIG51bGx9aWYoKHQ9dGhpcy5wYXJlbnQuZ2V0Q2hpbGRTdGFydE9mZnNldCh0aGlzKSk9PT1udWxsKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtbm9kZS1ub3QtZm91bmQtaW4tcGFyZW50OiBUaGUgbm9kZSdzIHBhcmVudCBkb2VzIG5vdCBjb250YWluIHRoaXMgbm9kZS5cIix0aGlzKX1yZXR1cm4gdH1nZXQgb2Zmc2V0U2l6ZSgpe3JldHVybiAxfWdldCBlbmRPZmZzZXQoKXtpZighdGhpcy5wYXJlbnQpe3JldHVybiBudWxsfXJldHVybiB0aGlzLnN0YXJ0T2Zmc2V0K3RoaXMub2Zmc2V0U2l6ZX1nZXQgbmV4dFNpYmxpbmcoKXtjb25zdCB0PXRoaXMuaW5kZXg7cmV0dXJuIHQhPT1udWxsJiZ0aGlzLnBhcmVudC5nZXRDaGlsZCh0KzEpfHxudWxsfWdldCBwcmV2aW91c1NpYmxpbmcoKXtjb25zdCB0PXRoaXMuaW5kZXg7cmV0dXJuIHQhPT1udWxsJiZ0aGlzLnBhcmVudC5nZXRDaGlsZCh0LTEpfHxudWxsfWdldCByb290KCl7bGV0IHQ9dGhpczt3aGlsZSh0LnBhcmVudCl7dD10LnBhcmVudH1yZXR1cm4gdH1pc0F0dGFjaGVkKCl7cmV0dXJuIHRoaXMucm9vdC5pcyhcInJvb3RFbGVtZW50XCIpfWdldFBhdGgoKXtjb25zdCB0PVtdO2xldCBlPXRoaXM7d2hpbGUoZS5wYXJlbnQpe3QudW5zaGlmdChlLnN0YXJ0T2Zmc2V0KTtlPWUucGFyZW50fXJldHVybiB0fWdldEFuY2VzdG9ycyh0PXtpbmNsdWRlU2VsZjpmYWxzZSxwYXJlbnRGaXJzdDpmYWxzZX0pe2NvbnN0IGU9W107bGV0IGk9dC5pbmNsdWRlU2VsZj90aGlzOnRoaXMucGFyZW50O3doaWxlKGkpe2VbdC5wYXJlbnRGaXJzdD9cInB1c2hcIjpcInVuc2hpZnRcIl0oaSk7aT1pLnBhcmVudH1yZXR1cm4gZX1nZXRDb21tb25BbmNlc3Rvcih0LGU9e30pe2NvbnN0IGk9dGhpcy5nZXRBbmNlc3RvcnMoZSk7Y29uc3Qgbj10LmdldEFuY2VzdG9ycyhlKTtsZXQgbz0wO3doaWxlKGlbb109PW5bb10mJmlbb10pe28rK31yZXR1cm4gbz09PTA/bnVsbDppW28tMV19aXNCZWZvcmUodCl7aWYodGhpcz09dCl7cmV0dXJuIGZhbHNlfWlmKHRoaXMucm9vdCE9PXQucm9vdCl7cmV0dXJuIGZhbHNlfWNvbnN0IGU9dGhpcy5nZXRQYXRoKCk7Y29uc3QgaT10LmdldFBhdGgoKTtjb25zdCBuPVZzKGUsaSk7c3dpdGNoKG4pe2Nhc2VcInByZWZpeFwiOnJldHVybiB0cnVlO2Nhc2VcImV4dGVuc2lvblwiOnJldHVybiBmYWxzZTtkZWZhdWx0OnJldHVybiBlW25dPGlbbl19fWlzQWZ0ZXIodCl7aWYodGhpcz09dCl7cmV0dXJuIGZhbHNlfWlmKHRoaXMucm9vdCE9PXQucm9vdCl7cmV0dXJuIGZhbHNlfXJldHVybiF0aGlzLmlzQmVmb3JlKHQpfWhhc0F0dHJpYnV0ZSh0KXtyZXR1cm4gdGhpcy5fYXR0cnMuaGFzKHQpfWdldEF0dHJpYnV0ZSh0KXtyZXR1cm4gdGhpcy5fYXR0cnMuZ2V0KHQpfWdldEF0dHJpYnV0ZXMoKXtyZXR1cm4gdGhpcy5fYXR0cnMuZW50cmllcygpfWdldEF0dHJpYnV0ZUtleXMoKXtyZXR1cm4gdGhpcy5fYXR0cnMua2V5cygpfXRvSlNPTigpe2NvbnN0IHQ9e307aWYodGhpcy5fYXR0cnMuc2l6ZSl7dC5hdHRyaWJ1dGVzPUFycmF5LmZyb20odGhpcy5fYXR0cnMpLnJlZHVjZSgodCxlKT0+e3RbZVswXV09ZVsxXTtyZXR1cm4gdH0se30pfXJldHVybiB0fWlzKHQpe3JldHVybiB0PT1cIm5vZGVcInx8dD09XCJtb2RlbDpub2RlXCJ9X2Nsb25lKCl7cmV0dXJuIG5ldyB6aCh0aGlzLl9hdHRycyl9X3JlbW92ZSgpe3RoaXMucGFyZW50Ll9yZW1vdmVDaGlsZHJlbih0aGlzLmluZGV4KX1fc2V0QXR0cmlidXRlKHQsZSl7dGhpcy5fYXR0cnMuc2V0KHQsZSl9X3NldEF0dHJpYnV0ZXNUbyh0KXt0aGlzLl9hdHRycz1Icyh0KX1fcmVtb3ZlQXR0cmlidXRlKHQpe3JldHVybiB0aGlzLl9hdHRycy5kZWxldGUodCl9X2NsZWFyQXR0cmlidXRlcygpe3RoaXMuX2F0dHJzLmNsZWFyKCl9fWNsYXNzIExoIGV4dGVuZHMgemh7Y29uc3RydWN0b3IodCxlKXtzdXBlcihlKTt0aGlzLl9kYXRhPXR8fFwiXCJ9Z2V0IG9mZnNldFNpemUoKXtyZXR1cm4gdGhpcy5kYXRhLmxlbmd0aH1nZXQgZGF0YSgpe3JldHVybiB0aGlzLl9kYXRhfWlzKHQpe3JldHVybiB0PT1cInRleHRcInx8dD09XCJtb2RlbDp0ZXh0XCJ8fHN1cGVyLmlzKHQpfXRvSlNPTigpe2NvbnN0IHQ9c3VwZXIudG9KU09OKCk7dC5kYXRhPXRoaXMuZGF0YTtyZXR1cm4gdH1fY2xvbmUoKXtyZXR1cm4gbmV3IExoKHRoaXMuZGF0YSx0aGlzLmdldEF0dHJpYnV0ZXMoKSl9c3RhdGljIGZyb21KU09OKHQpe3JldHVybiBuZXcgTGgodC5kYXRhLHQuYXR0cmlidXRlcyl9fWNsYXNzIEZoe2NvbnN0cnVjdG9yKHQsZSxpKXt0aGlzLnRleHROb2RlPXQ7aWYoZTwwfHxlPnQub2Zmc2V0U2l6ZSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLXRleHRwcm94eS13cm9uZy1vZmZzZXRpbnRleHQ6IEdpdmVuIG9mZnNldEluVGV4dCB2YWx1ZSBpcyBpbmNvcnJlY3QuXCIsdGhpcyl9aWYoaTwwfHxlK2k+dC5vZmZzZXRTaXplKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtdGV4dHByb3h5LXdyb25nLWxlbmd0aDogR2l2ZW4gbGVuZ3RoIHZhbHVlIGlzIGluY29ycmVjdC5cIix0aGlzKX10aGlzLmRhdGE9dC5kYXRhLnN1YnN0cmluZyhlLGUraSk7dGhpcy5vZmZzZXRJblRleHQ9ZX1nZXQgc3RhcnRPZmZzZXQoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5zdGFydE9mZnNldCE9PW51bGw/dGhpcy50ZXh0Tm9kZS5zdGFydE9mZnNldCt0aGlzLm9mZnNldEluVGV4dDpudWxsfWdldCBvZmZzZXRTaXplKCl7cmV0dXJuIHRoaXMuZGF0YS5sZW5ndGh9Z2V0IGVuZE9mZnNldCgpe3JldHVybiB0aGlzLnN0YXJ0T2Zmc2V0IT09bnVsbD90aGlzLnN0YXJ0T2Zmc2V0K3RoaXMub2Zmc2V0U2l6ZTpudWxsfWdldCBpc1BhcnRpYWwoKXtyZXR1cm4gdGhpcy5vZmZzZXRTaXplIT09dGhpcy50ZXh0Tm9kZS5vZmZzZXRTaXplfWdldCBwYXJlbnQoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5wYXJlbnR9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5yb290fWlzKHQpe3JldHVybiB0PT1cInRleHRQcm94eVwifHx0PT1cIm1vZGVsOnRleHRQcm94eVwifWdldFBhdGgoKXtjb25zdCB0PXRoaXMudGV4dE5vZGUuZ2V0UGF0aCgpO2lmKHQubGVuZ3RoPjApe3RbdC5sZW5ndGgtMV0rPXRoaXMub2Zmc2V0SW5UZXh0fXJldHVybiB0fWdldEFuY2VzdG9ycyh0PXtpbmNsdWRlU2VsZjpmYWxzZSxwYXJlbnRGaXJzdDpmYWxzZX0pe2NvbnN0IGU9W107bGV0IGk9dC5pbmNsdWRlU2VsZj90aGlzOnRoaXMucGFyZW50O3doaWxlKGkpe2VbdC5wYXJlbnRGaXJzdD9cInB1c2hcIjpcInVuc2hpZnRcIl0oaSk7aT1pLnBhcmVudH1yZXR1cm4gZX1oYXNBdHRyaWJ1dGUodCl7cmV0dXJuIHRoaXMudGV4dE5vZGUuaGFzQXR0cmlidXRlKHQpfWdldEF0dHJpYnV0ZSh0KXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5nZXRBdHRyaWJ1dGUodCl9Z2V0QXR0cmlidXRlcygpe3JldHVybiB0aGlzLnRleHROb2RlLmdldEF0dHJpYnV0ZXMoKX1nZXRBdHRyaWJ1dGVLZXlzKCl7cmV0dXJuIHRoaXMudGV4dE5vZGUuZ2V0QXR0cmlidXRlS2V5cygpfX1jbGFzcyBEaHtjb25zdHJ1Y3Rvcih0KXt0aGlzLl9ub2Rlcz1bXTtpZih0KXt0aGlzLl9pbnNlcnROb2RlcygwLHQpfX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLl9ub2Rlc1tTeW1ib2wuaXRlcmF0b3JdKCl9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9ub2Rlcy5sZW5ndGh9Z2V0IG1heE9mZnNldCgpe3JldHVybiB0aGlzLl9ub2Rlcy5yZWR1Y2UoKHQsZSk9PnQrZS5vZmZzZXRTaXplLDApfWdldE5vZGUodCl7cmV0dXJuIHRoaXMuX25vZGVzW3RdfHxudWxsfWdldE5vZGVJbmRleCh0KXtjb25zdCBlPXRoaXMuX25vZGVzLmluZGV4T2YodCk7cmV0dXJuIGU9PS0xP251bGw6ZX1nZXROb2RlU3RhcnRPZmZzZXQodCl7Y29uc3QgZT10aGlzLmdldE5vZGVJbmRleCh0KTtyZXR1cm4gZT09PW51bGw/bnVsbDp0aGlzLl9ub2Rlcy5zbGljZSgwLGUpLnJlZHVjZSgodCxlKT0+dCtlLm9mZnNldFNpemUsMCl9aW5kZXhUb09mZnNldCh0KXtpZih0PT10aGlzLl9ub2Rlcy5sZW5ndGgpe3JldHVybiB0aGlzLm1heE9mZnNldH1jb25zdCBlPXRoaXMuX25vZGVzW3RdO2lmKCFlKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtbm9kZWxpc3QtaW5kZXgtb3V0LW9mLWJvdW5kczogR2l2ZW4gaW5kZXggY2Fubm90IGJlIGZvdW5kIGluIHRoZSBub2RlIGxpc3QuXCIsdGhpcyl9cmV0dXJuIHRoaXMuZ2V0Tm9kZVN0YXJ0T2Zmc2V0KGUpfW9mZnNldFRvSW5kZXgodCl7bGV0IGU9MDtmb3IoY29uc3QgaSBvZiB0aGlzLl9ub2Rlcyl7aWYodD49ZSYmdDxlK2kub2Zmc2V0U2l6ZSl7cmV0dXJuIHRoaXMuZ2V0Tm9kZUluZGV4KGkpfWUrPWkub2Zmc2V0U2l6ZX1pZihlIT10KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtbm9kZWxpc3Qtb2Zmc2V0LW91dC1vZi1ib3VuZHM6IEdpdmVuIG9mZnNldCBjYW5ub3QgYmUgZm91bmQgaW4gdGhlIG5vZGUgbGlzdC5cIix0aGlzLHtvZmZzZXQ6dCxub2RlTGlzdDp0aGlzfSl9cmV0dXJuIHRoaXMubGVuZ3RofV9pbnNlcnROb2Rlcyh0LGUpe2Zvcihjb25zdCB0IG9mIGUpe2lmKCEodCBpbnN0YW5jZW9mIHpoKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLW5vZGVsaXN0LWluc2VydE5vZGVzLW5vdC1ub2RlOiBUcnlpbmcgdG8gaW5zZXJ0IGFuIG9iamVjdCB3aGljaCBpcyBub3QgYSBOb2RlIGluc3RhbmNlLlwiLHRoaXMpfX10aGlzLl9ub2Rlcy5zcGxpY2UodCwwLC4uLmUpfV9yZW1vdmVOb2Rlcyh0LGU9MSl7cmV0dXJuIHRoaXMuX25vZGVzLnNwbGljZSh0LGUpfXRvSlNPTigpe3JldHVybiB0aGlzLl9ub2Rlcy5tYXAodD0+dC50b0pTT04oKSl9fWNsYXNzIGpoIGV4dGVuZHMgemh7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKGUpO3RoaXMubmFtZT10O3RoaXMuX2NoaWxkcmVuPW5ldyBEaDtpZihpKXt0aGlzLl9pbnNlcnRDaGlsZCgwLGkpfX1nZXQgY2hpbGRDb3VudCgpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5sZW5ndGh9Z2V0IG1heE9mZnNldCgpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5tYXhPZmZzZXR9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gdGhpcy5jaGlsZENvdW50PT09MH1pcyh0LGU9bnVsbCl7Y29uc3QgaT10LnJlcGxhY2UoL15tb2RlbDovLFwiXCIpO2lmKCFlKXtyZXR1cm4gaT09XCJlbGVtZW50XCJ8fGk9PXRoaXMubmFtZXx8c3VwZXIuaXModCl9ZWxzZXtyZXR1cm4gaT09XCJlbGVtZW50XCImJmU9PXRoaXMubmFtZX19Z2V0Q2hpbGQodCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmdldE5vZGUodCl9Z2V0Q2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5bU3ltYm9sLml0ZXJhdG9yXSgpfWdldENoaWxkSW5kZXgodCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmdldE5vZGVJbmRleCh0KX1nZXRDaGlsZFN0YXJ0T2Zmc2V0KHQpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5nZXROb2RlU3RhcnRPZmZzZXQodCl9b2Zmc2V0VG9JbmRleCh0KXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4ub2Zmc2V0VG9JbmRleCh0KX1nZXROb2RlQnlQYXRoKHQpe2xldCBlPXRoaXM7Zm9yKGNvbnN0IGkgb2YgdCl7ZT1lLmdldENoaWxkKGUub2Zmc2V0VG9JbmRleChpKSl9cmV0dXJuIGV9dG9KU09OKCl7Y29uc3QgdD1zdXBlci50b0pTT04oKTt0Lm5hbWU9dGhpcy5uYW1lO2lmKHRoaXMuX2NoaWxkcmVuLmxlbmd0aD4wKXt0LmNoaWxkcmVuPVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuX2NoaWxkcmVuKXt0LmNoaWxkcmVuLnB1c2goZS50b0pTT04oKSl9fXJldHVybiB0fV9jbG9uZSh0PWZhbHNlKXtjb25zdCBlPXQ/QXJyYXkuZnJvbSh0aGlzLl9jaGlsZHJlbikubWFwKHQ9PnQuX2Nsb25lKHRydWUpKTpudWxsO3JldHVybiBuZXcgamgodGhpcy5uYW1lLHRoaXMuZ2V0QXR0cmlidXRlcygpLGUpfV9hcHBlbmRDaGlsZCh0KXt0aGlzLl9pbnNlcnRDaGlsZCh0aGlzLmNoaWxkQ291bnQsdCl9X2luc2VydENoaWxkKHQsZSl7Y29uc3QgaT1IaChlKTtmb3IoY29uc3QgdCBvZiBpKXtpZih0LnBhcmVudCE9PW51bGwpe3QuX3JlbW92ZSgpfXQucGFyZW50PXRoaXN9dGhpcy5fY2hpbGRyZW4uX2luc2VydE5vZGVzKHQsaSl9X3JlbW92ZUNoaWxkcmVuKHQsZT0xKXtjb25zdCBpPXRoaXMuX2NoaWxkcmVuLl9yZW1vdmVOb2Rlcyh0LGUpO2Zvcihjb25zdCB0IG9mIGkpe3QucGFyZW50PW51bGx9cmV0dXJuIGl9c3RhdGljIGZyb21KU09OKHQpe2xldCBlPW51bGw7aWYodC5jaGlsZHJlbil7ZT1bXTtmb3IoY29uc3QgaSBvZiB0LmNoaWxkcmVuKXtpZihpLm5hbWUpe2UucHVzaChqaC5mcm9tSlNPTihpKSl9ZWxzZXtlLnB1c2goTGguZnJvbUpTT04oaSkpfX19cmV0dXJuIG5ldyBqaCh0Lm5hbWUsdC5hdHRyaWJ1dGVzLGUpfX1mdW5jdGlvbiBIaCh0KXtpZih0eXBlb2YgdD09XCJzdHJpbmdcIil7cmV0dXJuW25ldyBMaCh0KV19aWYoIWpzKHQpKXt0PVt0XX1yZXR1cm4gQXJyYXkuZnJvbSh0KS5tYXAodD0+e2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtyZXR1cm4gbmV3IExoKHQpfWlmKHQgaW5zdGFuY2VvZiBGaCl7cmV0dXJuIG5ldyBMaCh0LmRhdGEsdC5nZXRBdHRyaWJ1dGVzKCkpfXJldHVybiB0fSl9Y2xhc3MgV2h7Y29uc3RydWN0b3IodD17fSl7aWYoIXQuYm91bmRhcmllcyYmIXQuc3RhcnRQb3NpdGlvbil7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLXRyZWUtd2Fsa2VyLW5vLXN0YXJ0LXBvc2l0aW9uOiBOZWl0aGVyIGJvdW5kYXJpZXMgbm9yIHN0YXJ0aW5nIHBvc2l0aW9uIGhhdmUgYmVlbiBkZWZpbmVkLlwiLG51bGwpfWNvbnN0IGU9dC5kaXJlY3Rpb258fFwiZm9yd2FyZFwiO2lmKGUhPVwiZm9yd2FyZFwiJiZlIT1cImJhY2t3YXJkXCIpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb2RlbC10cmVlLXdhbGtlci11bmtub3duLWRpcmVjdGlvbjogT25seSBgYmFja3dhcmRgIGFuZCBgZm9yd2FyZGAgZGlyZWN0aW9uIGFsbG93ZWQuXCIsdCx7ZGlyZWN0aW9uOmV9KX10aGlzLmRpcmVjdGlvbj1lO3RoaXMuYm91bmRhcmllcz10LmJvdW5kYXJpZXN8fG51bGw7aWYodC5zdGFydFBvc2l0aW9uKXt0aGlzLnBvc2l0aW9uPXQuc3RhcnRQb3NpdGlvbi5jbG9uZSgpfWVsc2V7dGhpcy5wb3NpdGlvbj1VaC5fY3JlYXRlQXQodGhpcy5ib3VuZGFyaWVzW3RoaXMuZGlyZWN0aW9uPT1cImJhY2t3YXJkXCI/XCJlbmRcIjpcInN0YXJ0XCJdKX10aGlzLnBvc2l0aW9uLnN0aWNraW5lc3M9XCJ0b05vbmVcIjt0aGlzLnNpbmdsZUNoYXJhY3RlcnM9ISF0LnNpbmdsZUNoYXJhY3RlcnM7dGhpcy5zaGFsbG93PSEhdC5zaGFsbG93O3RoaXMuaWdub3JlRWxlbWVudEVuZD0hIXQuaWdub3JlRWxlbWVudEVuZDt0aGlzLl9ib3VuZGFyeVN0YXJ0UGFyZW50PXRoaXMuYm91bmRhcmllcz90aGlzLmJvdW5kYXJpZXMuc3RhcnQucGFyZW50Om51bGw7dGhpcy5fYm91bmRhcnlFbmRQYXJlbnQ9dGhpcy5ib3VuZGFyaWVzP3RoaXMuYm91bmRhcmllcy5lbmQucGFyZW50Om51bGw7dGhpcy5fdmlzaXRlZFBhcmVudD10aGlzLnBvc2l0aW9uLnBhcmVudH1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzfXNraXAodCl7bGV0IGUsaSxuLG87ZG97bj10aGlzLnBvc2l0aW9uO289dGhpcy5fdmlzaXRlZFBhcmVudDsoe2RvbmU6ZSx2YWx1ZTppfT10aGlzLm5leHQoKSl9d2hpbGUoIWUmJnQoaSkpO2lmKCFlKXt0aGlzLnBvc2l0aW9uPW47dGhpcy5fdmlzaXRlZFBhcmVudD1vfX1uZXh0KCl7aWYodGhpcy5kaXJlY3Rpb249PVwiZm9yd2FyZFwiKXtyZXR1cm4gdGhpcy5fbmV4dCgpfWVsc2V7cmV0dXJuIHRoaXMuX3ByZXZpb3VzKCl9fV9uZXh0KCl7Y29uc3QgdD10aGlzLnBvc2l0aW9uO2NvbnN0IGU9dGhpcy5wb3NpdGlvbi5jbG9uZSgpO2NvbnN0IGk9dGhpcy5fdmlzaXRlZFBhcmVudDtpZihpLnBhcmVudD09PW51bGwmJmUub2Zmc2V0PT09aS5tYXhPZmZzZXQpe3JldHVybntkb25lOnRydWV9fWlmKGk9PT10aGlzLl9ib3VuZGFyeUVuZFBhcmVudCYmZS5vZmZzZXQ9PXRoaXMuYm91bmRhcmllcy5lbmQub2Zmc2V0KXtyZXR1cm57ZG9uZTp0cnVlfX1jb25zdCBuPWUudGV4dE5vZGU/ZS50ZXh0Tm9kZTplLm5vZGVBZnRlcjtpZihuIGluc3RhbmNlb2Ygamgpe2lmKCF0aGlzLnNoYWxsb3cpe2UucGF0aC5wdXNoKDApO3RoaXMuX3Zpc2l0ZWRQYXJlbnQ9bn1lbHNle2Uub2Zmc2V0Kyt9dGhpcy5wb3NpdGlvbj1lO3JldHVybiBxaChcImVsZW1lbnRTdGFydFwiLG4sdCxlLDEpfWVsc2UgaWYobiBpbnN0YW5jZW9mIExoKXtsZXQgbztpZih0aGlzLnNpbmdsZUNoYXJhY3RlcnMpe289MX1lbHNle2xldCB0PW4uZW5kT2Zmc2V0O2lmKHRoaXMuX2JvdW5kYXJ5RW5kUGFyZW50PT1pJiZ0aGlzLmJvdW5kYXJpZXMuZW5kLm9mZnNldDx0KXt0PXRoaXMuYm91bmRhcmllcy5lbmQub2Zmc2V0fW89dC1lLm9mZnNldH1jb25zdCByPWUub2Zmc2V0LW4uc3RhcnRPZmZzZXQ7Y29uc3Qgcz1uZXcgRmgobixyLG8pO2Uub2Zmc2V0Kz1vO3RoaXMucG9zaXRpb249ZTtyZXR1cm4gcWgoXCJ0ZXh0XCIscyx0LGUsbyl9ZWxzZXtlLnBhdGgucG9wKCk7ZS5vZmZzZXQrKzt0aGlzLnBvc2l0aW9uPWU7dGhpcy5fdmlzaXRlZFBhcmVudD1pLnBhcmVudDtpZih0aGlzLmlnbm9yZUVsZW1lbnRFbmQpe3JldHVybiB0aGlzLl9uZXh0KCl9ZWxzZXtyZXR1cm4gcWgoXCJlbGVtZW50RW5kXCIsaSx0LGUpfX19X3ByZXZpb3VzKCl7Y29uc3QgdD10aGlzLnBvc2l0aW9uO2NvbnN0IGU9dGhpcy5wb3NpdGlvbi5jbG9uZSgpO2NvbnN0IGk9dGhpcy5fdmlzaXRlZFBhcmVudDtpZihpLnBhcmVudD09PW51bGwmJmUub2Zmc2V0PT09MCl7cmV0dXJue2RvbmU6dHJ1ZX19aWYoaT09dGhpcy5fYm91bmRhcnlTdGFydFBhcmVudCYmZS5vZmZzZXQ9PXRoaXMuYm91bmRhcmllcy5zdGFydC5vZmZzZXQpe3JldHVybntkb25lOnRydWV9fWNvbnN0IG49ZS50ZXh0Tm9kZT9lLnRleHROb2RlOmUubm9kZUJlZm9yZTtpZihuIGluc3RhbmNlb2Ygamgpe2Uub2Zmc2V0LS07aWYoIXRoaXMuc2hhbGxvdyl7ZS5wYXRoLnB1c2gobi5tYXhPZmZzZXQpO3RoaXMucG9zaXRpb249ZTt0aGlzLl92aXNpdGVkUGFyZW50PW47aWYodGhpcy5pZ25vcmVFbGVtZW50RW5kKXtyZXR1cm4gdGhpcy5fcHJldmlvdXMoKX1lbHNle3JldHVybiBxaChcImVsZW1lbnRFbmRcIixuLHQsZSl9fWVsc2V7dGhpcy5wb3NpdGlvbj1lO3JldHVybiBxaChcImVsZW1lbnRTdGFydFwiLG4sdCxlLDEpfX1lbHNlIGlmKG4gaW5zdGFuY2VvZiBMaCl7bGV0IG87aWYodGhpcy5zaW5nbGVDaGFyYWN0ZXJzKXtvPTF9ZWxzZXtsZXQgdD1uLnN0YXJ0T2Zmc2V0O2lmKHRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQ9PWkmJnRoaXMuYm91bmRhcmllcy5zdGFydC5vZmZzZXQ+dCl7dD10aGlzLmJvdW5kYXJpZXMuc3RhcnQub2Zmc2V0fW89ZS5vZmZzZXQtdH1jb25zdCByPWUub2Zmc2V0LW4uc3RhcnRPZmZzZXQ7Y29uc3Qgcz1uZXcgRmgobixyLW8sbyk7ZS5vZmZzZXQtPW87dGhpcy5wb3NpdGlvbj1lO3JldHVybiBxaChcInRleHRcIixzLHQsZSxvKX1lbHNle2UucGF0aC5wb3AoKTt0aGlzLnBvc2l0aW9uPWU7dGhpcy5fdmlzaXRlZFBhcmVudD1pLnBhcmVudDtyZXR1cm4gcWgoXCJlbGVtZW50U3RhcnRcIixpLHQsZSwxKX19fWZ1bmN0aW9uIHFoKHQsZSxpLG4sbyl7cmV0dXJue2RvbmU6ZmFsc2UsdmFsdWU6e3R5cGU6dCxpdGVtOmUscHJldmlvdXNQb3NpdGlvbjppLG5leHRQb3NpdGlvbjpuLGxlbmd0aDpvfX19Y2xhc3MgVWh7Y29uc3RydWN0b3IodCxlLGk9XCJ0b05vbmVcIil7aWYoIXQuaXMoXCJlbGVtZW50XCIpJiYhdC5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb2RlbC1wb3NpdGlvbi1yb290LWludmFsaWQ6IFBvc2l0aW9uIHJvb3QgaW52YWxpZC5cIix0KX1pZighKGUgaW5zdGFuY2VvZiBBcnJheSl8fGUubGVuZ3RoPT09MCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLXBvc2l0aW9uLXBhdGgtaW5jb3JyZWN0LWZvcm1hdDogUG9zaXRpb24gcGF0aCBtdXN0IGJlIGFuIGFycmF5IHdpdGggYXQgbGVhc3Qgb25lIGl0ZW0uXCIsdCx7cGF0aDplfSl9ZT10LmdldFBhdGgoKS5jb25jYXQoZSk7dD10LnJvb3Q7dGhpcy5yb290PXQ7dGhpcy5wYXRoPWU7dGhpcy5zdGlja2luZXNzPWl9Z2V0IG9mZnNldCgpe3JldHVybiBDYSh0aGlzLnBhdGgpfXNldCBvZmZzZXQodCl7dGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV09dH1nZXQgcGFyZW50KCl7bGV0IHQ9dGhpcy5yb290O2ZvcihsZXQgZT0wO2U8dGhpcy5wYXRoLmxlbmd0aC0xO2UrKyl7dD10LmdldENoaWxkKHQub2Zmc2V0VG9JbmRleCh0aGlzLnBhdGhbZV0pKTtpZighdCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLXBvc2l0aW9uLXBhdGgtaW5jb3JyZWN0OiBUaGUgcG9zaXRpb24ncyBwYXRoIGlzIGluY29ycmVjdC5cIix0aGlzLHtwb3NpdGlvbjp0aGlzfSl9fWlmKHQuaXMoXCJ0ZXh0XCIpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtcG9zaXRpb24tcGF0aC1pbmNvcnJlY3Q6IFRoZSBwb3NpdGlvbidzIHBhdGggaXMgaW5jb3JyZWN0LlwiLHRoaXMse3Bvc2l0aW9uOnRoaXN9KX1yZXR1cm4gdH1nZXQgaW5kZXgoKXtyZXR1cm4gdGhpcy5wYXJlbnQub2Zmc2V0VG9JbmRleCh0aGlzLm9mZnNldCl9Z2V0IHRleHROb2RlKCl7Y29uc3QgdD10aGlzLnBhcmVudC5nZXRDaGlsZCh0aGlzLmluZGV4KTtyZXR1cm4gdCBpbnN0YW5jZW9mIExoJiZ0LnN0YXJ0T2Zmc2V0PHRoaXMub2Zmc2V0P3Q6bnVsbH1nZXQgbm9kZUFmdGVyKCl7cmV0dXJuIHRoaXMudGV4dE5vZGU9PT1udWxsP3RoaXMucGFyZW50LmdldENoaWxkKHRoaXMuaW5kZXgpOm51bGx9Z2V0IG5vZGVCZWZvcmUoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZT09PW51bGw/dGhpcy5wYXJlbnQuZ2V0Q2hpbGQodGhpcy5pbmRleC0xKTpudWxsfWdldCBpc0F0U3RhcnQoKXtyZXR1cm4gdGhpcy5vZmZzZXQ9PT0wfWdldCBpc0F0RW5kKCl7cmV0dXJuIHRoaXMub2Zmc2V0PT10aGlzLnBhcmVudC5tYXhPZmZzZXR9Y29tcGFyZVdpdGgodCl7aWYodGhpcy5yb290IT10LnJvb3Qpe3JldHVyblwiZGlmZmVyZW50XCJ9Y29uc3QgZT1Wcyh0aGlzLnBhdGgsdC5wYXRoKTtzd2l0Y2goZSl7Y2FzZVwic2FtZVwiOnJldHVyblwic2FtZVwiO2Nhc2VcInByZWZpeFwiOnJldHVyblwiYmVmb3JlXCI7Y2FzZVwiZXh0ZW5zaW9uXCI6cmV0dXJuXCJhZnRlclwiO2RlZmF1bHQ6cmV0dXJuIHRoaXMucGF0aFtlXTx0LnBhdGhbZV0/XCJiZWZvcmVcIjpcImFmdGVyXCJ9fWdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKHQsZT17fSl7ZS5zdGFydFBvc2l0aW9uPXRoaXM7Y29uc3QgaT1uZXcgV2goZSk7aS5za2lwKHQpO3JldHVybiBpLnBvc2l0aW9ufWdldFBhcmVudFBhdGgoKXtyZXR1cm4gdGhpcy5wYXRoLnNsaWNlKDAsLTEpfWdldEFuY2VzdG9ycygpe2lmKHRoaXMucGFyZW50LmlzKFwiZG9jdW1lbnRGcmFnbWVudFwiKSl7cmV0dXJuW3RoaXMucGFyZW50XX1lbHNle3JldHVybiB0aGlzLnBhcmVudC5nZXRBbmNlc3RvcnMoe2luY2x1ZGVTZWxmOnRydWV9KX19Z2V0Q29tbW9uUGF0aCh0KXtpZih0aGlzLnJvb3QhPXQucm9vdCl7cmV0dXJuW119Y29uc3QgZT1Wcyh0aGlzLnBhdGgsdC5wYXRoKTtjb25zdCBpPXR5cGVvZiBlPT1cInN0cmluZ1wiP01hdGgubWluKHRoaXMucGF0aC5sZW5ndGgsdC5wYXRoLmxlbmd0aCk6ZTtyZXR1cm4gdGhpcy5wYXRoLnNsaWNlKDAsaSl9Z2V0Q29tbW9uQW5jZXN0b3IodCl7Y29uc3QgZT10aGlzLmdldEFuY2VzdG9ycygpO2NvbnN0IGk9dC5nZXRBbmNlc3RvcnMoKTtsZXQgbj0wO3doaWxlKGVbbl09PWlbbl0mJmVbbl0pe24rK31yZXR1cm4gbj09PTA/bnVsbDplW24tMV19Z2V0U2hpZnRlZEJ5KHQpe2NvbnN0IGU9dGhpcy5jbG9uZSgpO2NvbnN0IGk9ZS5vZmZzZXQrdDtlLm9mZnNldD1pPDA/MDppO3JldHVybiBlfWlzQWZ0ZXIodCl7cmV0dXJuIHRoaXMuY29tcGFyZVdpdGgodCk9PVwiYWZ0ZXJcIn1pc0JlZm9yZSh0KXtyZXR1cm4gdGhpcy5jb21wYXJlV2l0aCh0KT09XCJiZWZvcmVcIn1pc0VxdWFsKHQpe3JldHVybiB0aGlzLmNvbXBhcmVXaXRoKHQpPT1cInNhbWVcIn1pc1RvdWNoaW5nKHQpe2xldCBlPW51bGw7bGV0IGk9bnVsbDtjb25zdCBuPXRoaXMuY29tcGFyZVdpdGgodCk7c3dpdGNoKG4pe2Nhc2VcInNhbWVcIjpyZXR1cm4gdHJ1ZTtjYXNlXCJiZWZvcmVcIjplPVVoLl9jcmVhdGVBdCh0aGlzKTtpPVVoLl9jcmVhdGVBdCh0KTticmVhaztjYXNlXCJhZnRlclwiOmU9VWguX2NyZWF0ZUF0KHQpO2k9VWguX2NyZWF0ZUF0KHRoaXMpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfWxldCBvPWUucGFyZW50O3doaWxlKGUucGF0aC5sZW5ndGgraS5wYXRoLmxlbmd0aCl7aWYoZS5pc0VxdWFsKGkpKXtyZXR1cm4gdHJ1ZX1pZihlLnBhdGgubGVuZ3RoPmkucGF0aC5sZW5ndGgpe2lmKGUub2Zmc2V0IT09by5tYXhPZmZzZXQpe3JldHVybiBmYWxzZX1lLnBhdGg9ZS5wYXRoLnNsaWNlKDAsLTEpO289by5wYXJlbnQ7ZS5vZmZzZXQrK31lbHNle2lmKGkub2Zmc2V0IT09MCl7cmV0dXJuIGZhbHNlfWkucGF0aD1pLnBhdGguc2xpY2UoMCwtMSl9fX1pcyh0KXtyZXR1cm4gdD09XCJwb3NpdGlvblwifHx0PT1cIm1vZGVsOnBvc2l0aW9uXCJ9aGFzU2FtZVBhcmVudEFzKHQpe2lmKHRoaXMucm9vdCE9PXQucm9vdCl7cmV0dXJuIGZhbHNlfWNvbnN0IGU9dGhpcy5nZXRQYXJlbnRQYXRoKCk7Y29uc3QgaT10LmdldFBhcmVudFBhdGgoKTtyZXR1cm4gVnMoZSxpKT09XCJzYW1lXCJ9Z2V0VHJhbnNmb3JtZWRCeU9wZXJhdGlvbih0KXtsZXQgZTtzd2l0Y2godC50eXBlKXtjYXNlXCJpbnNlcnRcIjplPXRoaXMuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRPcGVyYXRpb24odCk7YnJlYWs7Y2FzZVwibW92ZVwiOmNhc2VcInJlbW92ZVwiOmNhc2VcInJlaW5zZXJ0XCI6ZT10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbih0KTticmVhaztjYXNlXCJzcGxpdFwiOmU9dGhpcy5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKHQpO2JyZWFrO2Nhc2VcIm1lcmdlXCI6ZT10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24odCk7YnJlYWs7ZGVmYXVsdDplPVVoLl9jcmVhdGVBdCh0aGlzKTticmVha31yZXR1cm4gZX1fZ2V0VHJhbnNmb3JtZWRCeUluc2VydE9wZXJhdGlvbih0KXtyZXR1cm4gdGhpcy5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LnBvc2l0aW9uLHQuaG93TWFueSl9X2dldFRyYW5zZm9ybWVkQnlNb3ZlT3BlcmF0aW9uKHQpe3JldHVybiB0aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZSh0LnNvdXJjZVBvc2l0aW9uLHQudGFyZ2V0UG9zaXRpb24sdC5ob3dNYW55KX1fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKHQpe2NvbnN0IGU9dC5tb3ZlZFJhbmdlO2NvbnN0IGk9ZS5jb250YWluc1Bvc2l0aW9uKHRoaXMpfHxlLnN0YXJ0LmlzRXF1YWwodGhpcykmJnRoaXMuc3RpY2tpbmVzcz09XCJ0b05leHRcIjtpZihpKXtyZXR1cm4gdGhpcy5fZ2V0Q29tYmluZWQodC5zcGxpdFBvc2l0aW9uLHQubW92ZVRhcmdldFBvc2l0aW9uKX1lbHNle2lmKHQuZ3JhdmV5YXJkUG9zaXRpb24pe3JldHVybiB0aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZSh0LmdyYXZleWFyZFBvc2l0aW9uLHQuaW5zZXJ0aW9uUG9zaXRpb24sMSl9ZWxzZXtyZXR1cm4gdGhpcy5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0Lmluc2VydGlvblBvc2l0aW9uLDEpfX19X2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbih0KXtjb25zdCBlPXQubW92ZWRSYW5nZTtjb25zdCBpPWUuY29udGFpbnNQb3NpdGlvbih0aGlzKXx8ZS5zdGFydC5pc0VxdWFsKHRoaXMpO2xldCBuO2lmKGkpe249dGhpcy5fZ2V0Q29tYmluZWQodC5zb3VyY2VQb3NpdGlvbix0LnRhcmdldFBvc2l0aW9uKTtpZih0LnNvdXJjZVBvc2l0aW9uLmlzQmVmb3JlKHQudGFyZ2V0UG9zaXRpb24pKXtuPW4uX2dldFRyYW5zZm9ybWVkQnlEZWxldGlvbih0LmRlbGV0aW9uUG9zaXRpb24sMSl9fWVsc2UgaWYodGhpcy5pc0VxdWFsKHQuZGVsZXRpb25Qb3NpdGlvbikpe249VWguX2NyZWF0ZUF0KHQuZGVsZXRpb25Qb3NpdGlvbil9ZWxzZXtuPXRoaXMuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQuZGVsZXRpb25Qb3NpdGlvbix0LmdyYXZleWFyZFBvc2l0aW9uLDEpfXJldHVybiBufV9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odCxlKXtjb25zdCBpPVVoLl9jcmVhdGVBdCh0aGlzKTtpZih0aGlzLnJvb3QhPXQucm9vdCl7cmV0dXJuIGl9aWYoVnModC5nZXRQYXJlbnRQYXRoKCksdGhpcy5nZXRQYXJlbnRQYXRoKCkpPT1cInNhbWVcIil7aWYodC5vZmZzZXQ8dGhpcy5vZmZzZXQpe2lmKHQub2Zmc2V0K2U+dGhpcy5vZmZzZXQpe3JldHVybiBudWxsfWVsc2V7aS5vZmZzZXQtPWV9fX1lbHNlIGlmKFZzKHQuZ2V0UGFyZW50UGF0aCgpLHRoaXMuZ2V0UGFyZW50UGF0aCgpKT09XCJwcmVmaXhcIil7Y29uc3Qgbj10LnBhdGgubGVuZ3RoLTE7aWYodC5vZmZzZXQ8PXRoaXMucGF0aFtuXSl7aWYodC5vZmZzZXQrZT50aGlzLnBhdGhbbl0pe3JldHVybiBudWxsfWVsc2V7aS5wYXRoW25dLT1lfX19cmV0dXJuIGl9X2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24odCxlKXtjb25zdCBpPVVoLl9jcmVhdGVBdCh0aGlzKTtpZih0aGlzLnJvb3QhPXQucm9vdCl7cmV0dXJuIGl9aWYoVnModC5nZXRQYXJlbnRQYXRoKCksdGhpcy5nZXRQYXJlbnRQYXRoKCkpPT1cInNhbWVcIil7aWYodC5vZmZzZXQ8dGhpcy5vZmZzZXR8fHQub2Zmc2V0PT10aGlzLm9mZnNldCYmdGhpcy5zdGlja2luZXNzIT1cInRvUHJldmlvdXNcIil7aS5vZmZzZXQrPWV9fWVsc2UgaWYoVnModC5nZXRQYXJlbnRQYXRoKCksdGhpcy5nZXRQYXJlbnRQYXRoKCkpPT1cInByZWZpeFwiKXtjb25zdCBuPXQucGF0aC5sZW5ndGgtMTtpZih0Lm9mZnNldDw9dGhpcy5wYXRoW25dKXtpLnBhdGhbbl0rPWV9fXJldHVybiBpfV9nZXRUcmFuc2Zvcm1lZEJ5TW92ZSh0LGUsaSl7ZT1lLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odCxpKTtpZih0LmlzRXF1YWwoZSkpe3JldHVybiBVaC5fY3JlYXRlQXQodGhpcyl9Y29uc3Qgbj10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odCxpKTtjb25zdCBvPW49PT1udWxsfHx0LmlzRXF1YWwodGhpcykmJnRoaXMuc3RpY2tpbmVzcz09XCJ0b05leHRcInx8dC5nZXRTaGlmdGVkQnkoaSkuaXNFcXVhbCh0aGlzKSYmdGhpcy5zdGlja2luZXNzPT1cInRvUHJldmlvdXNcIjtpZihvKXtyZXR1cm4gdGhpcy5fZ2V0Q29tYmluZWQodCxlKX1lbHNle3JldHVybiBuLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKGUsaSl9fV9nZXRDb21iaW5lZCh0LGUpe2NvbnN0IGk9dC5wYXRoLmxlbmd0aC0xO2NvbnN0IG49VWguX2NyZWF0ZUF0KGUpO24uc3RpY2tpbmVzcz10aGlzLnN0aWNraW5lc3M7bi5vZmZzZXQ9bi5vZmZzZXQrdGhpcy5wYXRoW2ldLXQub2Zmc2V0O24ucGF0aD1uLnBhdGguY29uY2F0KHRoaXMucGF0aC5zbGljZShpKzEpKTtyZXR1cm4gbn10b0pTT04oKXtyZXR1cm57cm9vdDp0aGlzLnJvb3QudG9KU09OKCkscGF0aDpBcnJheS5mcm9tKHRoaXMucGF0aCksc3RpY2tpbmVzczp0aGlzLnN0aWNraW5lc3N9fWNsb25lKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMucm9vdCx0aGlzLnBhdGgsdGhpcy5zdGlja2luZXNzKX1zdGF0aWMgX2NyZWF0ZUF0KHQsZSxpPVwidG9Ob25lXCIpe2lmKHQgaW5zdGFuY2VvZiBVaCl7cmV0dXJuIG5ldyBVaCh0LnJvb3QsdC5wYXRoLHQuc3RpY2tpbmVzcyl9ZWxzZXtjb25zdCBuPXQ7aWYoZT09XCJlbmRcIil7ZT1uLm1heE9mZnNldH1lbHNlIGlmKGU9PVwiYmVmb3JlXCIpe3JldHVybiB0aGlzLl9jcmVhdGVCZWZvcmUobixpKX1lbHNlIGlmKGU9PVwiYWZ0ZXJcIil7cmV0dXJuIHRoaXMuX2NyZWF0ZUFmdGVyKG4saSl9ZWxzZSBpZihlIT09MCYmIWUpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb2RlbC1jcmVhdGVQb3NpdGlvbkF0LW9mZnNldC1yZXF1aXJlZDogXCIrXCJNb2RlbCNjcmVhdGVQb3NpdGlvbkF0KCkgcmVxdWlyZXMgdGhlIG9mZnNldCB3aGVuIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBtb2RlbCBpdGVtLlwiLFt0aGlzLHRdKX1pZighbi5pcyhcImVsZW1lbnRcIikmJiFuLmlzKFwiZG9jdW1lbnRGcmFnbWVudFwiKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLXBvc2l0aW9uLXBhcmVudC1pbmNvcnJlY3Q6IFBvc2l0aW9uIHBhcmVudCBoYXZlIHRvIGJlIGEgZWxlbWVudCBvciBkb2N1bWVudCBmcmFnbWVudC5cIixbdGhpcyx0XSl9Y29uc3Qgbz1uLmdldFBhdGgoKTtvLnB1c2goZSk7cmV0dXJuIG5ldyB0aGlzKG4ucm9vdCxvLGkpfX1zdGF0aWMgX2NyZWF0ZUFmdGVyKHQsZSl7aWYoIXQucGFyZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtcG9zaXRpb24tYWZ0ZXItcm9vdDogWW91IGNhbm5vdCBtYWtlIGEgcG9zaXRpb24gYWZ0ZXIgcm9vdC5cIixbdGhpcyx0XSx7cm9vdDp0fSl9cmV0dXJuIHRoaXMuX2NyZWF0ZUF0KHQucGFyZW50LHQuZW5kT2Zmc2V0LGUpfXN0YXRpYyBfY3JlYXRlQmVmb3JlKHQsZSl7aWYoIXQucGFyZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtcG9zaXRpb24tYmVmb3JlLXJvb3Q6IFlvdSBjYW5ub3QgbWFrZSBhIHBvc2l0aW9uIGJlZm9yZSByb290LlwiLHQse3Jvb3Q6dH0pfXJldHVybiB0aGlzLl9jcmVhdGVBdCh0LnBhcmVudCx0LnN0YXJ0T2Zmc2V0LGUpfXN0YXRpYyBmcm9tSlNPTih0LGUpe2lmKHQucm9vdD09PVwiJGdyYXZleWFyZFwiKXtjb25zdCBpPW5ldyBVaChlLmdyYXZleWFyZCx0LnBhdGgpO2kuc3RpY2tpbmVzcz10LnN0aWNraW5lc3M7cmV0dXJuIGl9aWYoIWUuZ2V0Um9vdCh0LnJvb3QpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtcG9zaXRpb24tZnJvbWpzb24tbm8tcm9vdDogQ2Fubm90IGNyZWF0ZSBwb3NpdGlvbiBmb3IgZG9jdW1lbnQuIFJvb3Qgd2l0aCBzcGVjaWZpZWQgbmFtZSBkb2VzIG5vdCBleGlzdC5cIixlLHtyb290TmFtZTp0LnJvb3R9KX1yZXR1cm4gbmV3IFVoKGUuZ2V0Um9vdCh0LnJvb3QpLHQucGF0aCx0LnN0aWNraW5lc3MpfX1jbGFzcyAkaHtjb25zdHJ1Y3Rvcih0LGU9bnVsbCl7dGhpcy5zdGFydD1VaC5fY3JlYXRlQXQodCk7dGhpcy5lbmQ9ZT9VaC5fY3JlYXRlQXQoZSk6VWguX2NyZWF0ZUF0KHQpO3RoaXMuc3RhcnQuc3RpY2tpbmVzcz10aGlzLmlzQ29sbGFwc2VkP1widG9Ob25lXCI6XCJ0b05leHRcIjt0aGlzLmVuZC5zdGlja2luZXNzPXRoaXMuaXNDb2xsYXBzZWQ/XCJ0b05vbmVcIjpcInRvUHJldmlvdXNcIn0qW1N5bWJvbC5pdGVyYXRvcl0oKXt5aWVsZCpuZXcgV2goe2JvdW5kYXJpZXM6dGhpcyxpZ25vcmVFbGVtZW50RW5kOnRydWV9KX1nZXQgaXNDb2xsYXBzZWQoKXtyZXR1cm4gdGhpcy5zdGFydC5pc0VxdWFsKHRoaXMuZW5kKX1nZXQgaXNGbGF0KCl7Y29uc3QgdD10aGlzLnN0YXJ0LmdldFBhcmVudFBhdGgoKTtjb25zdCBlPXRoaXMuZW5kLmdldFBhcmVudFBhdGgoKTtyZXR1cm4gVnModCxlKT09XCJzYW1lXCJ9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy5zdGFydC5yb290fWNvbnRhaW5zUG9zaXRpb24odCl7cmV0dXJuIHQuaXNBZnRlcih0aGlzLnN0YXJ0KSYmdC5pc0JlZm9yZSh0aGlzLmVuZCl9Y29udGFpbnNSYW5nZSh0LGU9ZmFsc2Upe2lmKHQuaXNDb2xsYXBzZWQpe2U9ZmFsc2V9Y29uc3QgaT10aGlzLmNvbnRhaW5zUG9zaXRpb24odC5zdGFydCl8fGUmJnRoaXMuc3RhcnQuaXNFcXVhbCh0LnN0YXJ0KTtjb25zdCBuPXRoaXMuY29udGFpbnNQb3NpdGlvbih0LmVuZCl8fGUmJnRoaXMuZW5kLmlzRXF1YWwodC5lbmQpO3JldHVybiBpJiZufWNvbnRhaW5zSXRlbSh0KXtjb25zdCBlPVVoLl9jcmVhdGVCZWZvcmUodCk7cmV0dXJuIHRoaXMuY29udGFpbnNQb3NpdGlvbihlKXx8dGhpcy5zdGFydC5pc0VxdWFsKGUpfWlzKHQpe3JldHVybiB0PT1cInJhbmdlXCJ8fHQ9PVwibW9kZWw6cmFuZ2VcIn1pc0VxdWFsKHQpe3JldHVybiB0aGlzLnN0YXJ0LmlzRXF1YWwodC5zdGFydCkmJnRoaXMuZW5kLmlzRXF1YWwodC5lbmQpfWlzSW50ZXJzZWN0aW5nKHQpe3JldHVybiB0aGlzLnN0YXJ0LmlzQmVmb3JlKHQuZW5kKSYmdGhpcy5lbmQuaXNBZnRlcih0LnN0YXJ0KX1nZXREaWZmZXJlbmNlKHQpe2NvbnN0IGU9W107aWYodGhpcy5pc0ludGVyc2VjdGluZyh0KSl7aWYodGhpcy5jb250YWluc1Bvc2l0aW9uKHQuc3RhcnQpKXtlLnB1c2gobmV3ICRoKHRoaXMuc3RhcnQsdC5zdGFydCkpfWlmKHRoaXMuY29udGFpbnNQb3NpdGlvbih0LmVuZCkpe2UucHVzaChuZXcgJGgodC5lbmQsdGhpcy5lbmQpKX19ZWxzZXtlLnB1c2gobmV3ICRoKHRoaXMuc3RhcnQsdGhpcy5lbmQpKX1yZXR1cm4gZX1nZXRJbnRlcnNlY3Rpb24odCl7aWYodGhpcy5pc0ludGVyc2VjdGluZyh0KSl7bGV0IGU9dGhpcy5zdGFydDtsZXQgaT10aGlzLmVuZDtpZih0aGlzLmNvbnRhaW5zUG9zaXRpb24odC5zdGFydCkpe2U9dC5zdGFydH1pZih0aGlzLmNvbnRhaW5zUG9zaXRpb24odC5lbmQpKXtpPXQuZW5kfXJldHVybiBuZXcgJGgoZSxpKX1yZXR1cm4gbnVsbH1nZXRNaW5pbWFsRmxhdFJhbmdlcygpe2NvbnN0IHQ9W107Y29uc3QgZT10aGlzLnN0YXJ0LmdldENvbW1vblBhdGgodGhpcy5lbmQpLmxlbmd0aDtjb25zdCBpPVVoLl9jcmVhdGVBdCh0aGlzLnN0YXJ0KTtsZXQgbj1pLnBhcmVudDt3aGlsZShpLnBhdGgubGVuZ3RoPmUrMSl7Y29uc3QgZT1uLm1heE9mZnNldC1pLm9mZnNldDtpZihlIT09MCl7dC5wdXNoKG5ldyAkaChpLGkuZ2V0U2hpZnRlZEJ5KGUpKSl9aS5wYXRoPWkucGF0aC5zbGljZSgwLC0xKTtpLm9mZnNldCsrO249bi5wYXJlbnR9d2hpbGUoaS5wYXRoLmxlbmd0aDw9dGhpcy5lbmQucGF0aC5sZW5ndGgpe2NvbnN0IGU9dGhpcy5lbmQucGF0aFtpLnBhdGgubGVuZ3RoLTFdO2NvbnN0IG49ZS1pLm9mZnNldDtpZihuIT09MCl7dC5wdXNoKG5ldyAkaChpLGkuZ2V0U2hpZnRlZEJ5KG4pKSl9aS5vZmZzZXQ9ZTtpLnBhdGgucHVzaCgwKX1yZXR1cm4gdH1nZXRXYWxrZXIodD17fSl7dC5ib3VuZGFyaWVzPXRoaXM7cmV0dXJuIG5ldyBXaCh0KX0qZ2V0SXRlbXModD17fSl7dC5ib3VuZGFyaWVzPXRoaXM7dC5pZ25vcmVFbGVtZW50RW5kPXRydWU7Y29uc3QgZT1uZXcgV2godCk7Zm9yKGNvbnN0IHQgb2YgZSl7eWllbGQgdC5pdGVtfX0qZ2V0UG9zaXRpb25zKHQ9e30pe3QuYm91bmRhcmllcz10aGlzO2NvbnN0IGU9bmV3IFdoKHQpO3lpZWxkIGUucG9zaXRpb247Zm9yKGNvbnN0IHQgb2YgZSl7eWllbGQgdC5uZXh0UG9zaXRpb259fWdldFRyYW5zZm9ybWVkQnlPcGVyYXRpb24odCl7c3dpdGNoKHQudHlwZSl7Y2FzZVwiaW5zZXJ0XCI6cmV0dXJuIHRoaXMuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRPcGVyYXRpb24odCk7Y2FzZVwibW92ZVwiOmNhc2VcInJlbW92ZVwiOmNhc2VcInJlaW5zZXJ0XCI6cmV0dXJuIHRoaXMuX2dldFRyYW5zZm9ybWVkQnlNb3ZlT3BlcmF0aW9uKHQpO2Nhc2VcInNwbGl0XCI6cmV0dXJuW3RoaXMuX2dldFRyYW5zZm9ybWVkQnlTcGxpdE9wZXJhdGlvbih0KV07Y2FzZVwibWVyZ2VcIjpyZXR1cm5bdGhpcy5fZ2V0VHJhbnNmb3JtZWRCeU1lcmdlT3BlcmF0aW9uKHQpXX1yZXR1cm5bbmV3ICRoKHRoaXMuc3RhcnQsdGhpcy5lbmQpXX1nZXRUcmFuc2Zvcm1lZEJ5T3BlcmF0aW9ucyh0KXtjb25zdCBlPVtuZXcgJGgodGhpcy5zdGFydCx0aGlzLmVuZCldO2Zvcihjb25zdCBpIG9mIHQpe2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBuPWVbdF0uZ2V0VHJhbnNmb3JtZWRCeU9wZXJhdGlvbihpKTtlLnNwbGljZSh0LDEsLi4ubik7dCs9bi5sZW5ndGgtMX19Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IGk9ZVt0XTtmb3IobGV0IG49dCsxO248ZS5sZW5ndGg7bisrKXtjb25zdCB0PWVbbl07aWYoaS5jb250YWluc1JhbmdlKHQpfHx0LmNvbnRhaW5zUmFuZ2UoaSl8fGkuaXNFcXVhbCh0KSl7ZS5zcGxpY2UobiwxKX19fXJldHVybiBlfWdldENvbW1vbkFuY2VzdG9yKCl7cmV0dXJuIHRoaXMuc3RhcnQuZ2V0Q29tbW9uQW5jZXN0b3IodGhpcy5lbmQpfWdldENvbnRhaW5lZEVsZW1lbnQoKXtpZih0aGlzLmlzQ29sbGFwc2VkKXtyZXR1cm4gbnVsbH1jb25zdCB0PXRoaXMuc3RhcnQubm9kZUFmdGVyO2NvbnN0IGU9dGhpcy5lbmQubm9kZUJlZm9yZTtpZih0JiZ0LmlzKFwiZWxlbWVudFwiKSYmdD09PWUpe3JldHVybiB0fXJldHVybiBudWxsfXRvSlNPTigpe3JldHVybntzdGFydDp0aGlzLnN0YXJ0LnRvSlNPTigpLGVuZDp0aGlzLmVuZC50b0pTT04oKX19Y2xvbmUoKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5zdGFydCx0aGlzLmVuZCl9X2dldFRyYW5zZm9ybWVkQnlJbnNlcnRPcGVyYXRpb24odCxlPWZhbHNlKXtyZXR1cm4gdGhpcy5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LnBvc2l0aW9uLHQuaG93TWFueSxlKX1fZ2V0VHJhbnNmb3JtZWRCeU1vdmVPcGVyYXRpb24odCxlPWZhbHNlKXtjb25zdCBpPXQuc291cmNlUG9zaXRpb247Y29uc3Qgbj10Lmhvd01hbnk7Y29uc3Qgbz10LnRhcmdldFBvc2l0aW9uO3JldHVybiB0aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShpLG8sbixlKX1fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKHQpe2NvbnN0IGU9dGhpcy5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKHQpO2xldCBpPXRoaXMuZW5kLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24odCk7aWYodGhpcy5lbmQuaXNFcXVhbCh0Lmluc2VydGlvblBvc2l0aW9uKSl7aT10aGlzLmVuZC5nZXRTaGlmdGVkQnkoMSl9aWYoZS5yb290IT1pLnJvb3Qpe2k9dGhpcy5lbmQuZ2V0U2hpZnRlZEJ5KC0xKX1yZXR1cm4gbmV3ICRoKGUsaSl9X2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbih0KXtpZih0aGlzLnN0YXJ0LmlzRXF1YWwodC50YXJnZXRQb3NpdGlvbikmJnRoaXMuZW5kLmlzRXF1YWwodC5kZWxldGlvblBvc2l0aW9uKSl7cmV0dXJuIG5ldyAkaCh0aGlzLnN0YXJ0KX1sZXQgZT10aGlzLnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24odCk7bGV0IGk9dGhpcy5lbmQuX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbih0KTtpZihlLnJvb3QhPWkucm9vdCl7aT10aGlzLmVuZC5nZXRTaGlmdGVkQnkoLTEpfWlmKGUuaXNBZnRlcihpKSl7aWYodC5zb3VyY2VQb3NpdGlvbi5pc0JlZm9yZSh0LnRhcmdldFBvc2l0aW9uKSl7ZT1VaC5fY3JlYXRlQXQoaSk7ZS5vZmZzZXQ9MH1lbHNle2lmKCF0LmRlbGV0aW9uUG9zaXRpb24uaXNFcXVhbChlKSl7aT10LmRlbGV0aW9uUG9zaXRpb259ZT10LnRhcmdldFBvc2l0aW9ufXJldHVybiBuZXcgJGgoZSxpKX1yZXR1cm4gbmV3ICRoKGUsaSl9X2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24odCxlLGk9ZmFsc2Upe2lmKGkmJnRoaXMuY29udGFpbnNQb3NpdGlvbih0KSl7cmV0dXJuW25ldyAkaCh0aGlzLnN0YXJ0LHQpLG5ldyAkaCh0LmdldFNoaWZ0ZWRCeShlKSx0aGlzLmVuZC5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LGUpKV19ZWxzZXtjb25zdCBpPW5ldyAkaCh0aGlzLnN0YXJ0LHRoaXMuZW5kKTtpLnN0YXJ0PWkuc3RhcnQuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24odCxlKTtpLmVuZD1pLmVuZC5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LGUpO3JldHVybltpXX19X2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQsZSxpLG49ZmFsc2Upe2lmKHRoaXMuaXNDb2xsYXBzZWQpe2NvbnN0IG49dGhpcy5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodCxlLGkpO3JldHVybltuZXcgJGgobildfWNvbnN0IG89JGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KHQsaSk7Y29uc3Qgcj1lLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odCxpKTtpZih0aGlzLmNvbnRhaW5zUG9zaXRpb24oZSkmJiFuKXtpZihvLmNvbnRhaW5zUG9zaXRpb24odGhpcy5zdGFydCl8fG8uY29udGFpbnNQb3NpdGlvbih0aGlzLmVuZCkpe2NvbnN0IG49dGhpcy5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodCxlLGkpO2NvbnN0IG89dGhpcy5lbmQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQsZSxpKTtyZXR1cm5bbmV3ICRoKG4sbyldfX1sZXQgcztjb25zdCBhPXRoaXMuZ2V0RGlmZmVyZW5jZShvKTtsZXQgYz1udWxsO2NvbnN0IGw9dGhpcy5nZXRJbnRlcnNlY3Rpb24obyk7aWYoYS5sZW5ndGg9PTEpe2M9bmV3ICRoKGFbMF0uc3RhcnQuX2dldFRyYW5zZm9ybWVkQnlEZWxldGlvbih0LGkpLGFbMF0uZW5kLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odCxpKSl9ZWxzZSBpZihhLmxlbmd0aD09Mil7Yz1uZXcgJGgodGhpcy5zdGFydCx0aGlzLmVuZC5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKHQsaSkpfWlmKGMpe3M9Yy5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbihyLGksbCE9PW51bGx8fG4pfWVsc2V7cz1bXX1pZihsKXtjb25zdCB0PW5ldyAkaChsLnN0YXJ0Ll9nZXRDb21iaW5lZChvLnN0YXJ0LHIpLGwuZW5kLl9nZXRDb21iaW5lZChvLnN0YXJ0LHIpKTtpZihzLmxlbmd0aD09Mil7cy5zcGxpY2UoMSwwLHQpfWVsc2V7cy5wdXNoKHQpfX1yZXR1cm4gc31fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKHQsZSl7bGV0IGk9dGhpcy5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKHQsZSk7bGV0IG49dGhpcy5lbmQuX2dldFRyYW5zZm9ybWVkQnlEZWxldGlvbih0LGUpO2lmKGk9PW51bGwmJm49PW51bGwpe3JldHVybiBudWxsfWlmKGk9PW51bGwpe2k9dH1pZihuPT1udWxsKXtuPXR9cmV0dXJuIG5ldyAkaChpLG4pfXN0YXRpYyBfY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodCxlKXtjb25zdCBpPXQ7Y29uc3Qgbj10LmdldFNoaWZ0ZWRCeShlKTtyZXR1cm4gZT4wP25ldyB0aGlzKGksbik6bmV3IHRoaXMobixpKX1zdGF0aWMgX2NyZWF0ZUluKHQpe3JldHVybiBuZXcgdGhpcyhVaC5fY3JlYXRlQXQodCwwKSxVaC5fY3JlYXRlQXQodCx0Lm1heE9mZnNldCkpfXN0YXRpYyBfY3JlYXRlT24odCl7cmV0dXJuIHRoaXMuX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KFVoLl9jcmVhdGVCZWZvcmUodCksdC5vZmZzZXRTaXplKX1zdGF0aWMgX2NyZWF0ZUZyb21SYW5nZXModCl7aWYodC5sZW5ndGg9PT0wKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwicmFuZ2UtY3JlYXRlLWZyb20tcmFuZ2VzLWVtcHR5LWFycmF5OiBBdCBsZWFzdCBvbmUgcmFuZ2UgaGFzIHRvIGJlIHBhc3NlZC5cIixudWxsKX1lbHNlIGlmKHQubGVuZ3RoPT0xKXtyZXR1cm4gdFswXS5jbG9uZSgpfWNvbnN0IGU9dFswXTt0LnNvcnQoKHQsZSk9PnQuc3RhcnQuaXNBZnRlcihlLnN0YXJ0KT8xOi0xKTtjb25zdCBpPXQuaW5kZXhPZihlKTtjb25zdCBuPW5ldyB0aGlzKGUuc3RhcnQsZS5lbmQpO2lmKGk+MCl7Zm9yKGxldCBlPWktMTt0cnVlO2UrKyl7aWYodFtlXS5lbmQuaXNFcXVhbChuLnN0YXJ0KSl7bi5zdGFydD1VaC5fY3JlYXRlQXQodFtlXS5zdGFydCl9ZWxzZXticmVha319fWZvcihsZXQgZT1pKzE7ZTx0Lmxlbmd0aDtlKyspe2lmKHRbZV0uc3RhcnQuaXNFcXVhbChuLmVuZCkpe24uZW5kPVVoLl9jcmVhdGVBdCh0W2VdLmVuZCl9ZWxzZXticmVha319cmV0dXJuIG59c3RhdGljIGZyb21KU09OKHQsZSl7cmV0dXJuIG5ldyB0aGlzKFVoLmZyb21KU09OKHQuc3RhcnQsZSksVWguZnJvbUpTT04odC5lbmQsZSkpfX1jbGFzcyBHaHtjb25zdHJ1Y3Rvcigpe3RoaXMuX21vZGVsVG9WaWV3TWFwcGluZz1uZXcgV2Vha01hcDt0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmc9bmV3IFdlYWtNYXA7dGhpcy5fdmlld1RvTW9kZWxMZW5ndGhDYWxsYmFja3M9bmV3IE1hcDt0aGlzLl9tYXJrZXJOYW1lVG9FbGVtZW50cz1uZXcgTWFwO3RoaXMuX2VsZW1lbnRUb01hcmtlck5hbWVzPW5ldyBNYXA7dGhpcy5fdW5ib3VuZE1hcmtlck5hbWVzPW5ldyBTZXQ7dGhpcy5vbihcIm1vZGVsVG9WaWV3UG9zaXRpb25cIiwodCxlKT0+e2lmKGUudmlld1Bvc2l0aW9uKXtyZXR1cm59Y29uc3QgaT10aGlzLl9tb2RlbFRvVmlld01hcHBpbmcuZ2V0KGUubW9kZWxQb3NpdGlvbi5wYXJlbnQpO2Uudmlld1Bvc2l0aW9uPXRoaXMuX2ZpbmRQb3NpdGlvbkluKGksZS5tb2RlbFBvc2l0aW9uLm9mZnNldCl9LHtwcmlvcml0eTpcImxvd1wifSk7dGhpcy5vbihcInZpZXdUb01vZGVsUG9zaXRpb25cIiwodCxlKT0+e2lmKGUubW9kZWxQb3NpdGlvbil7cmV0dXJufWNvbnN0IGk9dGhpcy5maW5kTWFwcGVkVmlld0FuY2VzdG9yKGUudmlld1Bvc2l0aW9uKTtjb25zdCBuPXRoaXMuX3ZpZXdUb01vZGVsTWFwcGluZy5nZXQoaSk7Y29uc3Qgbz10aGlzLl90b01vZGVsT2Zmc2V0KGUudmlld1Bvc2l0aW9uLnBhcmVudCxlLnZpZXdQb3NpdGlvbi5vZmZzZXQsaSk7ZS5tb2RlbFBvc2l0aW9uPVVoLl9jcmVhdGVBdChuLG8pfSx7cHJpb3JpdHk6XCJsb3dcIn0pfWJpbmRFbGVtZW50cyh0LGUpe3RoaXMuX21vZGVsVG9WaWV3TWFwcGluZy5zZXQodCxlKTt0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuc2V0KGUsdCl9dW5iaW5kVmlld0VsZW1lbnQodCl7Y29uc3QgZT10aGlzLnRvTW9kZWxFbGVtZW50KHQpO3RoaXMuX3ZpZXdUb01vZGVsTWFwcGluZy5kZWxldGUodCk7aWYodGhpcy5fZWxlbWVudFRvTWFya2VyTmFtZXMuaGFzKHQpKXtmb3IoY29uc3QgZSBvZiB0aGlzLl9lbGVtZW50VG9NYXJrZXJOYW1lcy5nZXQodCkpe3RoaXMuX3VuYm91bmRNYXJrZXJOYW1lcy5hZGQoZSl9fWlmKHRoaXMuX21vZGVsVG9WaWV3TWFwcGluZy5nZXQoZSk9PXQpe3RoaXMuX21vZGVsVG9WaWV3TWFwcGluZy5kZWxldGUoZSl9fXVuYmluZE1vZGVsRWxlbWVudCh0KXtjb25zdCBlPXRoaXMudG9WaWV3RWxlbWVudCh0KTt0aGlzLl9tb2RlbFRvVmlld01hcHBpbmcuZGVsZXRlKHQpO2lmKHRoaXMuX3ZpZXdUb01vZGVsTWFwcGluZy5nZXQoZSk9PXQpe3RoaXMuX3ZpZXdUb01vZGVsTWFwcGluZy5kZWxldGUoZSl9fWJpbmRFbGVtZW50VG9NYXJrZXIodCxlKXtjb25zdCBpPXRoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzLmdldChlKXx8bmV3IFNldDtpLmFkZCh0KTtjb25zdCBuPXRoaXMuX2VsZW1lbnRUb01hcmtlck5hbWVzLmdldCh0KXx8bmV3IFNldDtuLmFkZChlKTt0aGlzLl9tYXJrZXJOYW1lVG9FbGVtZW50cy5zZXQoZSxpKTt0aGlzLl9lbGVtZW50VG9NYXJrZXJOYW1lcy5zZXQodCxuKX11bmJpbmRFbGVtZW50RnJvbU1hcmtlck5hbWUodCxlKXtjb25zdCBpPXRoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzLmdldChlKTtpZihpKXtpLmRlbGV0ZSh0KTtpZihpLnNpemU9PTApe3RoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzLmRlbGV0ZShlKX19Y29uc3Qgbj10aGlzLl9lbGVtZW50VG9NYXJrZXJOYW1lcy5nZXQodCk7aWYobil7bi5kZWxldGUoZSk7aWYobi5zaXplPT0wKXt0aGlzLl9lbGVtZW50VG9NYXJrZXJOYW1lcy5kZWxldGUodCl9fX1mbHVzaFVuYm91bmRNYXJrZXJOYW1lcygpe2NvbnN0IHQ9QXJyYXkuZnJvbSh0aGlzLl91bmJvdW5kTWFya2VyTmFtZXMpO3RoaXMuX3VuYm91bmRNYXJrZXJOYW1lcy5jbGVhcigpO3JldHVybiB0fWNsZWFyQmluZGluZ3MoKXt0aGlzLl9tb2RlbFRvVmlld01hcHBpbmc9bmV3IFdlYWtNYXA7dGhpcy5fdmlld1RvTW9kZWxNYXBwaW5nPW5ldyBXZWFrTWFwO3RoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzPW5ldyBNYXA7dGhpcy5fZWxlbWVudFRvTWFya2VyTmFtZXM9bmV3IE1hcDt0aGlzLl91bmJvdW5kTWFya2VyTmFtZXM9bmV3IFNldH10b01vZGVsRWxlbWVudCh0KXtyZXR1cm4gdGhpcy5fdmlld1RvTW9kZWxNYXBwaW5nLmdldCh0KX10b1ZpZXdFbGVtZW50KHQpe3JldHVybiB0aGlzLl9tb2RlbFRvVmlld01hcHBpbmcuZ2V0KHQpfXRvTW9kZWxSYW5nZSh0KXtyZXR1cm4gbmV3ICRoKHRoaXMudG9Nb2RlbFBvc2l0aW9uKHQuc3RhcnQpLHRoaXMudG9Nb2RlbFBvc2l0aW9uKHQuZW5kKSl9dG9WaWV3UmFuZ2UodCl7cmV0dXJuIG5ldyB1bCh0aGlzLnRvVmlld1Bvc2l0aW9uKHQuc3RhcnQpLHRoaXMudG9WaWV3UG9zaXRpb24odC5lbmQpKX10b01vZGVsUG9zaXRpb24odCl7Y29uc3QgZT17dmlld1Bvc2l0aW9uOnQsbWFwcGVyOnRoaXN9O3RoaXMuZmlyZShcInZpZXdUb01vZGVsUG9zaXRpb25cIixlKTtyZXR1cm4gZS5tb2RlbFBvc2l0aW9ufXRvVmlld1Bvc2l0aW9uKHQsZT17aXNQaGFudG9tOmZhbHNlfSl7Y29uc3QgaT17bW9kZWxQb3NpdGlvbjp0LG1hcHBlcjp0aGlzLGlzUGhhbnRvbTplLmlzUGhhbnRvbX07dGhpcy5maXJlKFwibW9kZWxUb1ZpZXdQb3NpdGlvblwiLGkpO3JldHVybiBpLnZpZXdQb3NpdGlvbn1tYXJrZXJOYW1lVG9FbGVtZW50cyh0KXtjb25zdCBlPXRoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzLmdldCh0KTtpZighZSl7cmV0dXJuIG51bGx9Y29uc3QgaT1uZXcgU2V0O2Zvcihjb25zdCB0IG9mIGUpe2lmKHQuaXMoXCJhdHRyaWJ1dGVFbGVtZW50XCIpKXtmb3IoY29uc3QgZSBvZiB0LmdldEVsZW1lbnRzV2l0aFNhbWVJZCgpKXtpLmFkZChlKX19ZWxzZXtpLmFkZCh0KX19cmV0dXJuIGl9cmVnaXN0ZXJWaWV3VG9Nb2RlbExlbmd0aCh0LGUpe3RoaXMuX3ZpZXdUb01vZGVsTGVuZ3RoQ2FsbGJhY2tzLnNldCh0LGUpfWZpbmRNYXBwZWRWaWV3QW5jZXN0b3IodCl7bGV0IGU9dC5wYXJlbnQ7d2hpbGUoIXRoaXMuX3ZpZXdUb01vZGVsTWFwcGluZy5oYXMoZSkpe2U9ZS5wYXJlbnR9cmV0dXJuIGV9X3RvTW9kZWxPZmZzZXQodCxlLGkpe2lmKGkhPXQpe2NvbnN0IG49dGhpcy5fdG9Nb2RlbE9mZnNldCh0LnBhcmVudCx0LmluZGV4LGkpO2NvbnN0IG89dGhpcy5fdG9Nb2RlbE9mZnNldCh0LGUsdCk7cmV0dXJuIG4rb31pZih0LmlzKFwidGV4dFwiKSl7cmV0dXJuIGV9bGV0IG49MDtmb3IobGV0IGk9MDtpPGU7aSsrKXtuKz10aGlzLmdldE1vZGVsTGVuZ3RoKHQuZ2V0Q2hpbGQoaSkpfXJldHVybiBufWdldE1vZGVsTGVuZ3RoKHQpe2lmKHRoaXMuX3ZpZXdUb01vZGVsTGVuZ3RoQ2FsbGJhY2tzLmdldCh0Lm5hbWUpKXtjb25zdCBlPXRoaXMuX3ZpZXdUb01vZGVsTGVuZ3RoQ2FsbGJhY2tzLmdldCh0Lm5hbWUpO3JldHVybiBlKHQpfWVsc2UgaWYodGhpcy5fdmlld1RvTW9kZWxNYXBwaW5nLmhhcyh0KSl7cmV0dXJuIDF9ZWxzZSBpZih0LmlzKFwidGV4dFwiKSl7cmV0dXJuIHQuZGF0YS5sZW5ndGh9ZWxzZSBpZih0LmlzKFwidWlFbGVtZW50XCIpKXtyZXR1cm4gMH1lbHNle2xldCBlPTA7Zm9yKGNvbnN0IGkgb2YgdC5nZXRDaGlsZHJlbigpKXtlKz10aGlzLmdldE1vZGVsTGVuZ3RoKGkpfXJldHVybiBlfX1fZmluZFBvc2l0aW9uSW4odCxlKXtsZXQgaTtsZXQgbj0wO2xldCBvPTA7bGV0IHI9MDtpZih0LmlzKFwidGV4dFwiKSl7cmV0dXJuIG5ldyBkbCh0LGUpfXdoaWxlKG88ZSl7aT10LmdldENoaWxkKHIpO249dGhpcy5nZXRNb2RlbExlbmd0aChpKTtvKz1uO3IrK31pZihvPT1lKXtyZXR1cm4gdGhpcy5fbW92ZVZpZXdQb3NpdGlvblRvVGV4dE5vZGUobmV3IGRsKHQscikpfWVsc2V7cmV0dXJuIHRoaXMuX2ZpbmRQb3NpdGlvbkluKGksZS0oby1uKSl9fV9tb3ZlVmlld1Bvc2l0aW9uVG9UZXh0Tm9kZSh0KXtjb25zdCBlPXQubm9kZUJlZm9yZTtjb25zdCBpPXQubm9kZUFmdGVyO2lmKGUgaW5zdGFuY2VvZiBMcyl7cmV0dXJuIG5ldyBkbChlLGUuZGF0YS5sZW5ndGgpfWVsc2UgaWYoaSBpbnN0YW5jZW9mIExzKXtyZXR1cm4gbmV3IGRsKGksMCl9cmV0dXJuIHR9fXZzKEdoLGRzKTtjbGFzcyBLaHtjb25zdHJ1Y3Rvcigpe3RoaXMuX2NvbnN1bWFibGU9bmV3IE1hcDt0aGlzLl90ZXh0UHJveHlSZWdpc3RyeT1uZXcgTWFwfWFkZCh0LGUpe2U9SmgoZSk7aWYodCBpbnN0YW5jZW9mIEZoKXt0PXRoaXMuX2dldFN5bWJvbEZvclRleHRQcm94eSh0KX1pZighdGhpcy5fY29uc3VtYWJsZS5oYXModCkpe3RoaXMuX2NvbnN1bWFibGUuc2V0KHQsbmV3IE1hcCl9dGhpcy5fY29uc3VtYWJsZS5nZXQodCkuc2V0KGUsdHJ1ZSl9Y29uc3VtZSh0LGUpe2U9SmgoZSk7aWYodCBpbnN0YW5jZW9mIEZoKXt0PXRoaXMuX2dldFN5bWJvbEZvclRleHRQcm94eSh0KX1pZih0aGlzLnRlc3QodCxlKSl7dGhpcy5fY29uc3VtYWJsZS5nZXQodCkuc2V0KGUsZmFsc2UpO3JldHVybiB0cnVlfWVsc2V7cmV0dXJuIGZhbHNlfX10ZXN0KHQsZSl7ZT1KaChlKTtpZih0IGluc3RhbmNlb2YgRmgpe3Q9dGhpcy5fZ2V0U3ltYm9sRm9yVGV4dFByb3h5KHQpfWNvbnN0IGk9dGhpcy5fY29uc3VtYWJsZS5nZXQodCk7aWYoaT09PXVuZGVmaW5lZCl7cmV0dXJuIG51bGx9Y29uc3Qgbj1pLmdldChlKTtpZihuPT09dW5kZWZpbmVkKXtyZXR1cm4gbnVsbH1yZXR1cm4gbn1yZXZlcnQodCxlKXtlPUpoKGUpO2lmKHQgaW5zdGFuY2VvZiBGaCl7dD10aGlzLl9nZXRTeW1ib2xGb3JUZXh0UHJveHkodCl9Y29uc3QgaT10aGlzLnRlc3QodCxlKTtpZihpPT09ZmFsc2Upe3RoaXMuX2NvbnN1bWFibGUuZ2V0KHQpLnNldChlLHRydWUpO3JldHVybiB0cnVlfWVsc2UgaWYoaT09PXRydWUpe3JldHVybiBmYWxzZX1yZXR1cm4gbnVsbH1fZ2V0U3ltYm9sRm9yVGV4dFByb3h5KHQpe2xldCBlPW51bGw7Y29uc3QgaT10aGlzLl90ZXh0UHJveHlSZWdpc3RyeS5nZXQodC5zdGFydE9mZnNldCk7aWYoaSl7Y29uc3Qgbj1pLmdldCh0LmVuZE9mZnNldCk7aWYobil7ZT1uLmdldCh0LnBhcmVudCl9fWlmKCFlKXtlPXRoaXMuX2FkZFN5bWJvbEZvclRleHRQcm94eSh0LnN0YXJ0T2Zmc2V0LHQuZW5kT2Zmc2V0LHQucGFyZW50KX1yZXR1cm4gZX1fYWRkU3ltYm9sRm9yVGV4dFByb3h5KHQsZSxpKXtjb25zdCBuPVN5bWJvbChcInRleHRQcm94eVN5bWJvbFwiKTtsZXQgbyxyO289dGhpcy5fdGV4dFByb3h5UmVnaXN0cnkuZ2V0KHQpO2lmKCFvKXtvPW5ldyBNYXA7dGhpcy5fdGV4dFByb3h5UmVnaXN0cnkuc2V0KHQsbyl9cj1vLmdldChlKTtpZighcil7cj1uZXcgTWFwO28uc2V0KGUscil9ci5zZXQoaSxuKTtyZXR1cm4gbn19ZnVuY3Rpb24gSmgodCl7Y29uc3QgZT10LnNwbGl0KFwiOlwiKTtyZXR1cm4gZS5sZW5ndGg+MT9lWzBdK1wiOlwiK2VbMV06ZVswXX1jbGFzcyBZaHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmNvbnZlcnNpb25BcGk9cWMoe2Rpc3BhdGNoZXI6dGhpc30sdCl9Y29udmVydENoYW5nZXModCxlLGkpe2Zvcihjb25zdCBlIG9mIHQuZ2V0TWFya2Vyc1RvUmVtb3ZlKCkpe3RoaXMuY29udmVydE1hcmtlclJlbW92ZShlLm5hbWUsZS5yYW5nZSxpKX1mb3IoY29uc3QgZSBvZiB0LmdldENoYW5nZXMoKSl7aWYoZS50eXBlPT1cImluc2VydFwiKXt0aGlzLmNvbnZlcnRJbnNlcnQoJGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUucG9zaXRpb24sZS5sZW5ndGgpLGkpfWVsc2UgaWYoZS50eXBlPT1cInJlbW92ZVwiKXt0aGlzLmNvbnZlcnRSZW1vdmUoZS5wb3NpdGlvbixlLmxlbmd0aCxlLm5hbWUsaSl9ZWxzZXt0aGlzLmNvbnZlcnRBdHRyaWJ1dGUoZS5yYW5nZSxlLmF0dHJpYnV0ZUtleSxlLmF0dHJpYnV0ZU9sZFZhbHVlLGUuYXR0cmlidXRlTmV3VmFsdWUsaSl9fWZvcihjb25zdCB0IG9mIHRoaXMuY29udmVyc2lvbkFwaS5tYXBwZXIuZmx1c2hVbmJvdW5kTWFya2VyTmFtZXMoKSl7Y29uc3Qgbj1lLmdldCh0KS5nZXRSYW5nZSgpO3RoaXMuY29udmVydE1hcmtlclJlbW92ZSh0LG4saSk7dGhpcy5jb252ZXJ0TWFya2VyQWRkKHQsbixpKX1mb3IoY29uc3QgZSBvZiB0LmdldE1hcmtlcnNUb0FkZCgpKXt0aGlzLmNvbnZlcnRNYXJrZXJBZGQoZS5uYW1lLGUucmFuZ2UsaSl9fWNvbnZlcnRJbnNlcnQodCxlKXt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyPWU7dGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGU9dGhpcy5fY3JlYXRlSW5zZXJ0Q29uc3VtYWJsZSh0KTtmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PWUuaXRlbTtjb25zdCBpPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLnByZXZpb3VzUG9zaXRpb24sZS5sZW5ndGgpO2NvbnN0IG49e2l0ZW06dCxyYW5nZTppfTt0aGlzLl90ZXN0QW5kRmlyZShcImluc2VydFwiLG4pO2Zvcihjb25zdCBlIG9mIHQuZ2V0QXR0cmlidXRlS2V5cygpKXtuLmF0dHJpYnV0ZUtleT1lO24uYXR0cmlidXRlT2xkVmFsdWU9bnVsbDtuLmF0dHJpYnV0ZU5ld1ZhbHVlPXQuZ2V0QXR0cmlidXRlKGUpO3RoaXMuX3Rlc3RBbmRGaXJlKGBhdHRyaWJ1dGU6JHtlfWAsbil9fXRoaXMuX2NsZWFyQ29udmVyc2lvbkFwaSgpfWNvbnZlcnRSZW1vdmUodCxlLGksbil7dGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcj1uO3RoaXMuZmlyZShcInJlbW92ZTpcIitpLHtwb3NpdGlvbjp0LGxlbmd0aDplfSx0aGlzLmNvbnZlcnNpb25BcGkpO3RoaXMuX2NsZWFyQ29udmVyc2lvbkFwaSgpfWNvbnZlcnRBdHRyaWJ1dGUodCxlLGksbixvKXt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyPW87dGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGU9dGhpcy5fY3JlYXRlQ29uc3VtYWJsZUZvclJhbmdlKHQsYGF0dHJpYnV0ZToke2V9YCk7Zm9yKGNvbnN0IG8gb2YgdCl7Y29uc3QgdD1vLml0ZW07Y29uc3Qgcj0kaC5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoby5wcmV2aW91c1Bvc2l0aW9uLG8ubGVuZ3RoKTtjb25zdCBzPXtpdGVtOnQscmFuZ2U6cixhdHRyaWJ1dGVLZXk6ZSxhdHRyaWJ1dGVPbGRWYWx1ZTppLGF0dHJpYnV0ZU5ld1ZhbHVlOm59O3RoaXMuX3Rlc3RBbmRGaXJlKGBhdHRyaWJ1dGU6JHtlfWAscyl9dGhpcy5fY2xlYXJDb252ZXJzaW9uQXBpKCl9Y29udmVydFNlbGVjdGlvbih0LGUsaSl7Y29uc3Qgbj1BcnJheS5mcm9tKGUuZ2V0TWFya2Vyc0F0UG9zaXRpb24odC5nZXRGaXJzdFBvc2l0aW9uKCkpKTt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyPWk7dGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGU9dGhpcy5fY3JlYXRlU2VsZWN0aW9uQ29uc3VtYWJsZSh0LG4pO3RoaXMuZmlyZShcInNlbGVjdGlvblwiLHtzZWxlY3Rpb246dH0sdGhpcy5jb252ZXJzaW9uQXBpKTtpZighdC5pc0NvbGxhcHNlZCl7cmV0dXJufWZvcihjb25zdCBlIG9mIG4pe2NvbnN0IGk9ZS5nZXRSYW5nZSgpO2lmKCFRaCh0LmdldEZpcnN0UG9zaXRpb24oKSxlLHRoaXMuY29udmVyc2lvbkFwaS5tYXBwZXIpKXtjb250aW51ZX1jb25zdCBuPXtpdGVtOnQsbWFya2VyTmFtZTplLm5hbWUsbWFya2VyUmFuZ2U6aX07aWYodGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGUudGVzdCh0LFwiYWRkTWFya2VyOlwiK2UubmFtZSkpe3RoaXMuZmlyZShcImFkZE1hcmtlcjpcIitlLm5hbWUsbix0aGlzLmNvbnZlcnNpb25BcGkpfX1mb3IoY29uc3QgZSBvZiB0LmdldEF0dHJpYnV0ZUtleXMoKSl7Y29uc3QgaT17aXRlbTp0LHJhbmdlOnQuZ2V0Rmlyc3RSYW5nZSgpLGF0dHJpYnV0ZUtleTplLGF0dHJpYnV0ZU9sZFZhbHVlOm51bGwsYXR0cmlidXRlTmV3VmFsdWU6dC5nZXRBdHRyaWJ1dGUoZSl9O2lmKHRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlLnRlc3QodCxcImF0dHJpYnV0ZTpcIitpLmF0dHJpYnV0ZUtleSkpe3RoaXMuZmlyZShcImF0dHJpYnV0ZTpcIitpLmF0dHJpYnV0ZUtleStcIjokdGV4dFwiLGksdGhpcy5jb252ZXJzaW9uQXBpKX19dGhpcy5fY2xlYXJDb252ZXJzaW9uQXBpKCl9Y29udmVydE1hcmtlckFkZCh0LGUsaSl7aWYoIWUucm9vdC5kb2N1bWVudHx8ZS5yb290LnJvb3ROYW1lPT1cIiRncmF2ZXlhcmRcIil7cmV0dXJufXRoaXMuY29udmVyc2lvbkFwaS53cml0ZXI9aTtjb25zdCBuPVwiYWRkTWFya2VyOlwiK3Q7Y29uc3Qgbz1uZXcgS2g7by5hZGQoZSxuKTt0aGlzLmNvbnZlcnNpb25BcGkuY29uc3VtYWJsZT1vO3RoaXMuZmlyZShuLHttYXJrZXJOYW1lOnQsbWFya2VyUmFuZ2U6ZX0sdGhpcy5jb252ZXJzaW9uQXBpKTtpZighby50ZXN0KGUsbikpe3JldHVybn10aGlzLmNvbnZlcnNpb25BcGkuY29uc3VtYWJsZT10aGlzLl9jcmVhdGVDb25zdW1hYmxlRm9yUmFuZ2UoZSxuKTtmb3IoY29uc3QgaSBvZiBlLmdldEl0ZW1zKCkpe2lmKCF0aGlzLmNvbnZlcnNpb25BcGkuY29uc3VtYWJsZS50ZXN0KGksbikpe2NvbnRpbnVlfWNvbnN0IG89e2l0ZW06aSxyYW5nZTokaC5fY3JlYXRlT24oaSksbWFya2VyTmFtZTp0LG1hcmtlclJhbmdlOmV9O3RoaXMuZmlyZShuLG8sdGhpcy5jb252ZXJzaW9uQXBpKX10aGlzLl9jbGVhckNvbnZlcnNpb25BcGkoKX1jb252ZXJ0TWFya2VyUmVtb3ZlKHQsZSxpKXtpZighZS5yb290LmRvY3VtZW50fHxlLnJvb3Qucm9vdE5hbWU9PVwiJGdyYXZleWFyZFwiKXtyZXR1cm59dGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcj1pO3RoaXMuZmlyZShcInJlbW92ZU1hcmtlcjpcIit0LHttYXJrZXJOYW1lOnQsbWFya2VyUmFuZ2U6ZX0sdGhpcy5jb252ZXJzaW9uQXBpKTt0aGlzLl9jbGVhckNvbnZlcnNpb25BcGkoKX1fY3JlYXRlSW5zZXJ0Q29uc3VtYWJsZSh0KXtjb25zdCBlPW5ldyBLaDtmb3IoY29uc3QgaSBvZiB0KXtjb25zdCB0PWkuaXRlbTtlLmFkZCh0LFwiaW5zZXJ0XCIpO2Zvcihjb25zdCBpIG9mIHQuZ2V0QXR0cmlidXRlS2V5cygpKXtlLmFkZCh0LFwiYXR0cmlidXRlOlwiK2kpfX1yZXR1cm4gZX1fY3JlYXRlQ29uc3VtYWJsZUZvclJhbmdlKHQsZSl7Y29uc3QgaT1uZXcgS2g7Zm9yKGNvbnN0IG4gb2YgdC5nZXRJdGVtcygpKXtpLmFkZChuLGUpfXJldHVybiBpfV9jcmVhdGVTZWxlY3Rpb25Db25zdW1hYmxlKHQsZSl7Y29uc3QgaT1uZXcgS2g7aS5hZGQodCxcInNlbGVjdGlvblwiKTtmb3IoY29uc3QgbiBvZiBlKXtpLmFkZCh0LFwiYWRkTWFya2VyOlwiK24ubmFtZSl9Zm9yKGNvbnN0IGUgb2YgdC5nZXRBdHRyaWJ1dGVLZXlzKCkpe2kuYWRkKHQsXCJhdHRyaWJ1dGU6XCIrZSl9cmV0dXJuIGl9X3Rlc3RBbmRGaXJlKHQsZSl7aWYoIXRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlLnRlc3QoZS5pdGVtLHQpKXtyZXR1cm59Y29uc3QgaT1lLml0ZW0ubmFtZXx8XCIkdGV4dFwiO3RoaXMuZmlyZSh0K1wiOlwiK2ksZSx0aGlzLmNvbnZlcnNpb25BcGkpfV9jbGVhckNvbnZlcnNpb25BcGkoKXtkZWxldGUgdGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcjtkZWxldGUgdGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGV9fXZzKFloLGRzKTtmdW5jdGlvbiBRaCh0LGUsaSl7Y29uc3Qgbj1lLmdldFJhbmdlKCk7Y29uc3Qgbz1BcnJheS5mcm9tKHQuZ2V0QW5jZXN0b3JzKCkpO28uc2hpZnQoKTtvLnJldmVyc2UoKTtjb25zdCByPW8uc29tZSh0PT57aWYobi5jb250YWluc0l0ZW0odCkpe2NvbnN0IGU9aS50b1ZpZXdFbGVtZW50KHQpO3JldHVybiEhZS5nZXRDdXN0b21Qcm9wZXJ0eShcImFkZEhpZ2hsaWdodFwiKX19KTtyZXR1cm4hcn1jbGFzcyBYaHtjb25zdHJ1Y3Rvcih0LGUsaSl7dGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ9ZmFsc2U7dGhpcy5fcmFuZ2VzPVtdO3RoaXMuX2F0dHJzPW5ldyBNYXA7aWYodCl7dGhpcy5zZXRUbyh0LGUsaSl9fWdldCBhbmNob3IoKXtpZih0aGlzLl9yYW5nZXMubGVuZ3RoPjApe2NvbnN0IHQ9dGhpcy5fcmFuZ2VzW3RoaXMuX3Jhbmdlcy5sZW5ndGgtMV07cmV0dXJuIHRoaXMuX2xhc3RSYW5nZUJhY2t3YXJkP3QuZW5kOnQuc3RhcnR9cmV0dXJuIG51bGx9Z2V0IGZvY3VzKCl7aWYodGhpcy5fcmFuZ2VzLmxlbmd0aD4wKXtjb25zdCB0PXRoaXMuX3Jhbmdlc1t0aGlzLl9yYW5nZXMubGVuZ3RoLTFdO3JldHVybiB0aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD90LnN0YXJ0OnQuZW5kfXJldHVybiBudWxsfWdldCBpc0NvbGxhcHNlZCgpe2NvbnN0IHQ9dGhpcy5fcmFuZ2VzLmxlbmd0aDtpZih0PT09MSl7cmV0dXJuIHRoaXMuX3Jhbmdlc1swXS5pc0NvbGxhcHNlZH1lbHNle3JldHVybiBmYWxzZX19Z2V0IHJhbmdlQ291bnQoKXtyZXR1cm4gdGhpcy5fcmFuZ2VzLmxlbmd0aH1nZXQgaXNCYWNrd2FyZCgpe3JldHVybiF0aGlzLmlzQ29sbGFwc2VkJiZ0aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZH1pc0VxdWFsKHQpe2lmKHRoaXMucmFuZ2VDb3VudCE9dC5yYW5nZUNvdW50KXtyZXR1cm4gZmFsc2V9ZWxzZSBpZih0aGlzLnJhbmdlQ291bnQ9PT0wKXtyZXR1cm4gdHJ1ZX1pZighdGhpcy5hbmNob3IuaXNFcXVhbCh0LmFuY2hvcil8fCF0aGlzLmZvY3VzLmlzRXF1YWwodC5mb2N1cykpe3JldHVybiBmYWxzZX1mb3IoY29uc3QgZSBvZiB0aGlzLl9yYW5nZXMpe2xldCBpPWZhbHNlO2Zvcihjb25zdCBuIG9mIHQuX3Jhbmdlcyl7aWYoZS5pc0VxdWFsKG4pKXtpPXRydWU7YnJlYWt9fWlmKCFpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSpnZXRSYW5nZXMoKXtmb3IoY29uc3QgdCBvZiB0aGlzLl9yYW5nZXMpe3lpZWxkIG5ldyAkaCh0LnN0YXJ0LHQuZW5kKX19Z2V0Rmlyc3RSYW5nZSgpe2xldCB0PW51bGw7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcmFuZ2VzKXtpZighdHx8ZS5zdGFydC5pc0JlZm9yZSh0LnN0YXJ0KSl7dD1lfX1yZXR1cm4gdD9uZXcgJGgodC5zdGFydCx0LmVuZCk6bnVsbH1nZXRMYXN0UmFuZ2UoKXtsZXQgdD1udWxsO2Zvcihjb25zdCBlIG9mIHRoaXMuX3Jhbmdlcyl7aWYoIXR8fGUuZW5kLmlzQWZ0ZXIodC5lbmQpKXt0PWV9fXJldHVybiB0P25ldyAkaCh0LnN0YXJ0LHQuZW5kKTpudWxsfWdldEZpcnN0UG9zaXRpb24oKXtjb25zdCB0PXRoaXMuZ2V0Rmlyc3RSYW5nZSgpO3JldHVybiB0P3Quc3RhcnQuY2xvbmUoKTpudWxsfWdldExhc3RQb3NpdGlvbigpe2NvbnN0IHQ9dGhpcy5nZXRMYXN0UmFuZ2UoKTtyZXR1cm4gdD90LmVuZC5jbG9uZSgpOm51bGx9c2V0VG8odCxlLGkpe2lmKHQ9PT1udWxsKXt0aGlzLl9zZXRSYW5nZXMoW10pfWVsc2UgaWYodCBpbnN0YW5jZW9mIFhoKXt0aGlzLl9zZXRSYW5nZXModC5nZXRSYW5nZXMoKSx0LmlzQmFja3dhcmQpfWVsc2UgaWYodCYmdHlwZW9mIHQuZ2V0UmFuZ2VzPT1cImZ1bmN0aW9uXCIpe3RoaXMuX3NldFJhbmdlcyh0LmdldFJhbmdlcygpLHQuaXNCYWNrd2FyZCl9ZWxzZSBpZih0IGluc3RhbmNlb2YgJGgpe3RoaXMuX3NldFJhbmdlcyhbdF0sISFlJiYhIWUuYmFja3dhcmQpfWVsc2UgaWYodCBpbnN0YW5jZW9mIFVoKXt0aGlzLl9zZXRSYW5nZXMoW25ldyAkaCh0KV0pfWVsc2UgaWYodCBpbnN0YW5jZW9mIHpoKXtjb25zdCBuPSEhaSYmISFpLmJhY2t3YXJkO2xldCBvO2lmKGU9PVwiaW5cIil7bz0kaC5fY3JlYXRlSW4odCl9ZWxzZSBpZihlPT1cIm9uXCIpe289JGguX2NyZWF0ZU9uKHQpfWVsc2UgaWYoZSE9PXVuZGVmaW5lZCl7bz1uZXcgJGgoVWguX2NyZWF0ZUF0KHQsZSkpfWVsc2V7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLXNlbGVjdGlvbi1zZXRUby1yZXF1aXJlZC1zZWNvbmQtcGFyYW1ldGVyOiBcIitcInNlbGVjdGlvbi5zZXRUbyByZXF1aXJlcyB0aGUgc2Vjb25kIHBhcmFtZXRlciB3aGVuIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBub2RlLlwiLFt0aGlzLHRdKX10aGlzLl9zZXRSYW5nZXMoW29dLG4pfWVsc2UgaWYoanModCkpe3RoaXMuX3NldFJhbmdlcyh0LGUmJiEhZS5iYWNrd2FyZCl9ZWxzZXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtc2VsZWN0aW9uLXNldFRvLW5vdC1zZWxlY3RhYmxlOiBDYW5ub3Qgc2V0IHRoZSBzZWxlY3Rpb24gdG8gdGhlIGdpdmVuIHBsYWNlLlwiLFt0aGlzLHRdKX19X3NldFJhbmdlcyh0LGU9ZmFsc2Upe3Q9QXJyYXkuZnJvbSh0KTtjb25zdCBpPXQuc29tZShlPT57aWYoIShlIGluc3RhbmNlb2YgJGgpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtc2VsZWN0aW9uLXNldC1yYW5nZXMtbm90LXJhbmdlOiBcIitcIlNlbGVjdGlvbiByYW5nZSBzZXQgdG8gYW4gb2JqZWN0IHRoYXQgaXMgbm90IGFuIGluc3RhbmNlIG9mIG1vZGVsLlJhbmdlLlwiLFt0aGlzLHRdKX1yZXR1cm4gdGhpcy5fcmFuZ2VzLmV2ZXJ5KHQ9PiF0LmlzRXF1YWwoZSkpfSk7aWYodC5sZW5ndGg9PT10aGlzLl9yYW5nZXMubGVuZ3RoJiYhaSl7cmV0dXJufXRoaXMuX3JlbW92ZUFsbFJhbmdlcygpO2Zvcihjb25zdCBlIG9mIHQpe3RoaXMuX3B1c2hSYW5nZShlKX10aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD0hIWU7dGhpcy5maXJlKFwiY2hhbmdlOnJhbmdlXCIse2RpcmVjdENoYW5nZTp0cnVlfSl9c2V0Rm9jdXModCxlKXtpZih0aGlzLmFuY2hvcj09PW51bGwpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb2RlbC1zZWxlY3Rpb24tc2V0Rm9jdXMtbm8tcmFuZ2VzOiBDYW5ub3Qgc2V0IHNlbGVjdGlvbiBmb2N1cyBpZiB0aGVyZSBhcmUgbm8gcmFuZ2VzIGluIHNlbGVjdGlvbi5cIixbdGhpcyx0XSl9Y29uc3QgaT1VaC5fY3JlYXRlQXQodCxlKTtpZihpLmNvbXBhcmVXaXRoKHRoaXMuZm9jdXMpPT1cInNhbWVcIil7cmV0dXJufWNvbnN0IG49dGhpcy5hbmNob3I7aWYodGhpcy5fcmFuZ2VzLmxlbmd0aCl7dGhpcy5fcG9wUmFuZ2UoKX1pZihpLmNvbXBhcmVXaXRoKG4pPT1cImJlZm9yZVwiKXt0aGlzLl9wdXNoUmFuZ2UobmV3ICRoKGksbikpO3RoaXMuX2xhc3RSYW5nZUJhY2t3YXJkPXRydWV9ZWxzZXt0aGlzLl9wdXNoUmFuZ2UobmV3ICRoKG4saSkpO3RoaXMuX2xhc3RSYW5nZUJhY2t3YXJkPWZhbHNlfXRoaXMuZmlyZShcImNoYW5nZTpyYW5nZVwiLHtkaXJlY3RDaGFuZ2U6dHJ1ZX0pfWdldEF0dHJpYnV0ZSh0KXtyZXR1cm4gdGhpcy5fYXR0cnMuZ2V0KHQpfWdldEF0dHJpYnV0ZXMoKXtyZXR1cm4gdGhpcy5fYXR0cnMuZW50cmllcygpfWdldEF0dHJpYnV0ZUtleXMoKXtyZXR1cm4gdGhpcy5fYXR0cnMua2V5cygpfWhhc0F0dHJpYnV0ZSh0KXtyZXR1cm4gdGhpcy5fYXR0cnMuaGFzKHQpfXJlbW92ZUF0dHJpYnV0ZSh0KXtpZih0aGlzLmhhc0F0dHJpYnV0ZSh0KSl7dGhpcy5fYXR0cnMuZGVsZXRlKHQpO3RoaXMuZmlyZShcImNoYW5nZTphdHRyaWJ1dGVcIix7YXR0cmlidXRlS2V5czpbdF0sZGlyZWN0Q2hhbmdlOnRydWV9KX19c2V0QXR0cmlidXRlKHQsZSl7aWYodGhpcy5nZXRBdHRyaWJ1dGUodCkhPT1lKXt0aGlzLl9hdHRycy5zZXQodCxlKTt0aGlzLmZpcmUoXCJjaGFuZ2U6YXR0cmlidXRlXCIse2F0dHJpYnV0ZUtleXM6W3RdLGRpcmVjdENoYW5nZTp0cnVlfSl9fWdldFNlbGVjdGVkRWxlbWVudCgpe2lmKHRoaXMucmFuZ2VDb3VudCE9PTEpe3JldHVybiBudWxsfXJldHVybiB0aGlzLmdldEZpcnN0UmFuZ2UoKS5nZXRDb250YWluZWRFbGVtZW50KCl9aXModCl7cmV0dXJuIHQ9PVwic2VsZWN0aW9uXCJ8fHQ9PVwibW9kZWw6c2VsZWN0aW9uXCJ9KmdldFNlbGVjdGVkQmxvY2tzKCl7Y29uc3QgdD1uZXcgV2Vha1NldDtmb3IoY29uc3QgZSBvZiB0aGlzLmdldFJhbmdlcygpKXtjb25zdCBpPWVmKGUuc3RhcnQsdCk7aWYoaSYmbmYoaSxlKSl7eWllbGQgaX1mb3IoY29uc3QgaSBvZiBlLmdldFdhbGtlcigpKXtjb25zdCBuPWkuaXRlbTtpZihpLnR5cGU9PVwiZWxlbWVudEVuZFwiJiZ0ZihuLHQsZSkpe3lpZWxkIG59fWNvbnN0IG49ZWYoZS5lbmQsdCk7aWYobiYmIWUuZW5kLmlzVG91Y2hpbmcoVWguX2NyZWF0ZUF0KG4sMCkpJiZuZihuLGUpKXt5aWVsZCBufX19Y29udGFpbnNFbnRpcmVDb250ZW50KHQ9dGhpcy5hbmNob3Iucm9vdCl7Y29uc3QgZT1VaC5fY3JlYXRlQXQodCwwKTtjb25zdCBpPVVoLl9jcmVhdGVBdCh0LFwiZW5kXCIpO3JldHVybiBlLmlzVG91Y2hpbmcodGhpcy5nZXRGaXJzdFBvc2l0aW9uKCkpJiZpLmlzVG91Y2hpbmcodGhpcy5nZXRMYXN0UG9zaXRpb24oKSl9X3B1c2hSYW5nZSh0KXt0aGlzLl9jaGVja1JhbmdlKHQpO3RoaXMuX3Jhbmdlcy5wdXNoKG5ldyAkaCh0LnN0YXJ0LHQuZW5kKSl9X2NoZWNrUmFuZ2UodCl7Zm9yKGxldCBlPTA7ZTx0aGlzLl9yYW5nZXMubGVuZ3RoO2UrKyl7aWYodC5pc0ludGVyc2VjdGluZyh0aGlzLl9yYW5nZXNbZV0pKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtc2VsZWN0aW9uLXJhbmdlLWludGVyc2VjdHM6IFRyeWluZyB0byBhZGQgYSByYW5nZSB0aGF0IGludGVyc2VjdHMgd2l0aCBhbm90aGVyIHJhbmdlIGluIHRoZSBzZWxlY3Rpb24uXCIsW3RoaXMsdF0se2FkZGVkUmFuZ2U6dCxpbnRlcnNlY3RpbmdSYW5nZTp0aGlzLl9yYW5nZXNbZV19KX19fV9yZW1vdmVBbGxSYW5nZXMoKXt3aGlsZSh0aGlzLl9yYW5nZXMubGVuZ3RoPjApe3RoaXMuX3BvcFJhbmdlKCl9fV9wb3BSYW5nZSgpe3RoaXMuX3Jhbmdlcy5wb3AoKX19dnMoWGgsZHMpO2Z1bmN0aW9uIFpoKHQsZSl7aWYoZS5oYXModCkpe3JldHVybiBmYWxzZX1lLmFkZCh0KTtyZXR1cm4gdC5yb290LmRvY3VtZW50Lm1vZGVsLnNjaGVtYS5pc0Jsb2NrKHQpJiZ0LnBhcmVudH1mdW5jdGlvbiB0Zih0LGUsaSl7cmV0dXJuIFpoKHQsZSkmJm5mKHQsaSl9ZnVuY3Rpb24gZWYodCxlKXtjb25zdCBpPXQucGFyZW50O2NvbnN0IG49aS5yb290LmRvY3VtZW50Lm1vZGVsLnNjaGVtYTtjb25zdCBvPXQucGFyZW50LmdldEFuY2VzdG9ycyh7cGFyZW50Rmlyc3Q6dHJ1ZSxpbmNsdWRlU2VsZjp0cnVlfSk7bGV0IHI9ZmFsc2U7Y29uc3Qgcz1vLmZpbmQodD0+e2lmKHIpe3JldHVybiBmYWxzZX1yPW4uaXNMaW1pdCh0KTtyZXR1cm4hciYmWmgodCxlKX0pO28uZm9yRWFjaCh0PT5lLmFkZCh0KSk7cmV0dXJuIHN9ZnVuY3Rpb24gbmYodCxlKXtjb25zdCBpPW9mKHQpO2lmKCFpKXtyZXR1cm4gdHJ1ZX1jb25zdCBuPWUuY29udGFpbnNSYW5nZSgkaC5fY3JlYXRlT24oaSksdHJ1ZSk7cmV0dXJuIW59ZnVuY3Rpb24gb2YodCl7Y29uc3QgZT10LnJvb3QuZG9jdW1lbnQubW9kZWwuc2NoZW1hO2xldCBpPXQucGFyZW50O3doaWxlKGkpe2lmKGUuaXNCbG9jayhpKSl7cmV0dXJuIGl9aT1pLnBhcmVudH19Y2xhc3MgcmYgZXh0ZW5kcyAkaHtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQsZSk7c2YuY2FsbCh0aGlzKX1kZXRhY2goKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1pcyh0KXtyZXR1cm4gdD09XCJsaXZlUmFuZ2VcInx8dD09XCJtb2RlbDpsaXZlUmFuZ2VcInx8c3VwZXIuaXModCl9dG9SYW5nZSgpe3JldHVybiBuZXcgJGgodGhpcy5zdGFydCx0aGlzLmVuZCl9c3RhdGljIGZyb21SYW5nZSh0KXtyZXR1cm4gbmV3IHJmKHQuc3RhcnQsdC5lbmQpfX1mdW5jdGlvbiBzZigpe3RoaXMubGlzdGVuVG8odGhpcy5yb290LmRvY3VtZW50Lm1vZGVsLFwiYXBwbHlPcGVyYXRpb25cIiwodCxlKT0+e2NvbnN0IGk9ZVswXTtpZighaS5pc0RvY3VtZW50T3BlcmF0aW9uKXtyZXR1cm59YWYuY2FsbCh0aGlzLGkpfSx7cHJpb3JpdHk6XCJsb3dcIn0pfWZ1bmN0aW9uIGFmKHQpe2NvbnN0IGU9dGhpcy5nZXRUcmFuc2Zvcm1lZEJ5T3BlcmF0aW9uKHQpO2NvbnN0IGk9JGguX2NyZWF0ZUZyb21SYW5nZXMoZSk7Y29uc3Qgbj0haS5pc0VxdWFsKHRoaXMpO2NvbnN0IG89Y2YodGhpcyx0KTtsZXQgcj1udWxsO2lmKG4pe2lmKGkucm9vdC5yb290TmFtZT09XCIkZ3JhdmV5YXJkXCIpe2lmKHQudHlwZT09XCJyZW1vdmVcIil7cj10LnNvdXJjZVBvc2l0aW9ufWVsc2V7cj10LmRlbGV0aW9uUG9zaXRpb259fWNvbnN0IGU9dGhpcy50b1JhbmdlKCk7dGhpcy5zdGFydD1pLnN0YXJ0O3RoaXMuZW5kPWkuZW5kO3RoaXMuZmlyZShcImNoYW5nZTpyYW5nZVwiLGUse2RlbGV0aW9uUG9zaXRpb246cn0pfWVsc2UgaWYobyl7dGhpcy5maXJlKFwiY2hhbmdlOmNvbnRlbnRcIix0aGlzLnRvUmFuZ2UoKSx7ZGVsZXRpb25Qb3NpdGlvbjpyfSl9fWZ1bmN0aW9uIGNmKHQsZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwiaW5zZXJ0XCI6cmV0dXJuIHQuY29udGFpbnNQb3NpdGlvbihlLnBvc2l0aW9uKTtjYXNlXCJtb3ZlXCI6Y2FzZVwicmVtb3ZlXCI6Y2FzZVwicmVpbnNlcnRcIjpjYXNlXCJtZXJnZVwiOnJldHVybiB0LmNvbnRhaW5zUG9zaXRpb24oZS5zb3VyY2VQb3NpdGlvbil8fHQuc3RhcnQuaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKXx8dC5jb250YWluc1Bvc2l0aW9uKGUudGFyZ2V0UG9zaXRpb24pO2Nhc2VcInNwbGl0XCI6cmV0dXJuIHQuY29udGFpbnNQb3NpdGlvbihlLnNwbGl0UG9zaXRpb24pfHx0LmNvbnRhaW5zUG9zaXRpb24oZS5pbnNlcnRpb25Qb3NpdGlvbil9cmV0dXJuIGZhbHNlfXZzKHJmLGRzKTtjb25zdCBsZj1cInNlbGVjdGlvbjpcIjtjbGFzcyBkZntjb25zdHJ1Y3Rvcih0KXt0aGlzLl9zZWxlY3Rpb249bmV3IHVmKHQpO3RoaXMuX3NlbGVjdGlvbi5kZWxlZ2F0ZShcImNoYW5nZTpyYW5nZVwiKS50byh0aGlzKTt0aGlzLl9zZWxlY3Rpb24uZGVsZWdhdGUoXCJjaGFuZ2U6YXR0cmlidXRlXCIpLnRvKHRoaXMpO3RoaXMuX3NlbGVjdGlvbi5kZWxlZ2F0ZShcImNoYW5nZTptYXJrZXJcIikudG8odGhpcyl9Z2V0IGlzQ29sbGFwc2VkKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0NvbGxhcHNlZH1nZXQgYW5jaG9yKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5hbmNob3J9Z2V0IGZvY3VzKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5mb2N1c31nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24ucmFuZ2VDb3VudH1nZXQgaGFzT3duUmFuZ2UoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmhhc093blJhbmdlfWdldCBpc0JhY2t3YXJkKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0JhY2t3YXJkfWdldCBpc0dyYXZpdHlPdmVycmlkZGVuKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0dyYXZpdHlPdmVycmlkZGVufWdldCBtYXJrZXJzKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5tYXJrZXJzfWdldCBfcmFuZ2VzKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5fcmFuZ2VzfWdldFJhbmdlcygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0UmFuZ2VzKCl9Z2V0Rmlyc3RQb3NpdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpfWdldExhc3RQb3NpdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0TGFzdFBvc2l0aW9uKCl9Z2V0Rmlyc3RSYW5nZSgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0Rmlyc3RSYW5nZSgpfWdldExhc3RSYW5nZSgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0TGFzdFJhbmdlKCl9Z2V0U2VsZWN0ZWRCbG9ja3MoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCl9Z2V0U2VsZWN0ZWRFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKX1jb250YWluc0VudGlyZUNvbnRlbnQodCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5jb250YWluc0VudGlyZUNvbnRlbnQodCl9ZGVzdHJveSgpe3RoaXMuX3NlbGVjdGlvbi5kZXN0cm95KCl9Z2V0QXR0cmlidXRlS2V5cygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0QXR0cmlidXRlS2V5cygpfWdldEF0dHJpYnV0ZXMoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldEF0dHJpYnV0ZXMoKX1nZXRBdHRyaWJ1dGUodCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRBdHRyaWJ1dGUodCl9aGFzQXR0cmlidXRlKHQpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uaGFzQXR0cmlidXRlKHQpfXJlZnJlc2goKXt0aGlzLl9zZWxlY3Rpb24uX3VwZGF0ZU1hcmtlcnMoKTt0aGlzLl9zZWxlY3Rpb24uX3VwZGF0ZUF0dHJpYnV0ZXMoZmFsc2UpfWlzKHQpe3JldHVybiB0PT1cInNlbGVjdGlvblwifHx0PT1cIm1vZGVsOnNlbGVjdGlvblwifHx0PT1cImRvY3VtZW50U2VsZWN0aW9uXCJ8fHQ9PVwibW9kZWw6ZG9jdW1lbnRTZWxlY3Rpb25cIn1fc2V0Rm9jdXModCxlKXt0aGlzLl9zZWxlY3Rpb24uc2V0Rm9jdXModCxlKX1fc2V0VG8odCxlLGkpe3RoaXMuX3NlbGVjdGlvbi5zZXRUbyh0LGUsaSl9X3NldEF0dHJpYnV0ZSh0LGUpe3RoaXMuX3NlbGVjdGlvbi5zZXRBdHRyaWJ1dGUodCxlKX1fcmVtb3ZlQXR0cmlidXRlKHQpe3RoaXMuX3NlbGVjdGlvbi5yZW1vdmVBdHRyaWJ1dGUodCl9X2dldFN0b3JlZEF0dHJpYnV0ZXMoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLl9nZXRTdG9yZWRBdHRyaWJ1dGVzKCl9X292ZXJyaWRlR3Jhdml0eSgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24ub3ZlcnJpZGVHcmF2aXR5KCl9X3Jlc3RvcmVHcmF2aXR5KHQpe3RoaXMuX3NlbGVjdGlvbi5yZXN0b3JlR3Jhdml0eSh0KX1zdGF0aWMgX2dldFN0b3JlQXR0cmlidXRlS2V5KHQpe3JldHVybiBsZit0fXN0YXRpYyBfaXNTdG9yZUF0dHJpYnV0ZUtleSh0KXtyZXR1cm4gdC5zdGFydHNXaXRoKGxmKX19dnMoZGYsZHMpO2NsYXNzIHVmIGV4dGVuZHMgWGh7Y29uc3RydWN0b3IodCl7c3VwZXIoKTt0aGlzLm1hcmtlcnM9bmV3IHlzKHtpZFByb3BlcnR5OlwibmFtZVwifSk7dGhpcy5fbW9kZWw9dC5tb2RlbDt0aGlzLl9kb2N1bWVudD10O3RoaXMuX2F0dHJpYnV0ZVByaW9yaXR5PW5ldyBNYXA7dGhpcy5fZml4R3JhdmV5YXJkUmFuZ2VzRGF0YT1bXTt0aGlzLl9oYXNDaGFuZ2VkUmFuZ2U9ZmFsc2U7dGhpcy5fb3ZlcnJpZGRlbkdyYXZpdHlSZWdpc3Rlcj1uZXcgU2V0O3RoaXMubGlzdGVuVG8odGhpcy5fbW9kZWwsXCJhcHBseU9wZXJhdGlvblwiLCh0LGUpPT57Y29uc3QgaT1lWzBdO2lmKCFpLmlzRG9jdW1lbnRPcGVyYXRpb258fGkudHlwZT09XCJtYXJrZXJcInx8aS50eXBlPT1cInJlbmFtZVwifHxpLnR5cGU9PVwibm9vcFwiKXtyZXR1cm59d2hpbGUodGhpcy5fZml4R3JhdmV5YXJkUmFuZ2VzRGF0YS5sZW5ndGgpe2NvbnN0e2xpdmVSYW5nZTp0LHNvdXJjZVBvc2l0aW9uOmV9PXRoaXMuX2ZpeEdyYXZleWFyZFJhbmdlc0RhdGEuc2hpZnQoKTt0aGlzLl9maXhHcmF2ZXlhcmRTZWxlY3Rpb24odCxlKX1pZih0aGlzLl9oYXNDaGFuZ2VkUmFuZ2Upe3RoaXMuX2hhc0NoYW5nZWRSYW5nZT1mYWxzZTt0aGlzLmZpcmUoXCJjaGFuZ2U6cmFuZ2VcIix7ZGlyZWN0Q2hhbmdlOmZhbHNlfSl9fSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO3RoaXMub24oXCJjaGFuZ2U6cmFuZ2VcIiwoKT0+e2Zvcihjb25zdCB0IG9mIHRoaXMuZ2V0UmFuZ2VzKCkpe2lmKCF0aGlzLl9kb2N1bWVudC5fdmFsaWRhdGVTZWxlY3Rpb25SYW5nZSh0KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImRvY3VtZW50LXNlbGVjdGlvbi13cm9uZy1wb3NpdGlvbjogUmFuZ2UgZnJvbSBkb2N1bWVudCBzZWxlY3Rpb24gc3RhcnRzIG9yIGVuZHMgYXQgaW5jb3JyZWN0IHBvc2l0aW9uLlwiLHRoaXMse3JhbmdlOnR9KX19fSk7dGhpcy5saXN0ZW5Ubyh0aGlzLl9tb2RlbC5tYXJrZXJzLFwidXBkYXRlXCIsKCk9PnRoaXMuX3VwZGF0ZU1hcmtlcnMoKSk7dGhpcy5saXN0ZW5Ubyh0aGlzLl9kb2N1bWVudCxcImNoYW5nZVwiLCh0LGUpPT57ZmYodGhpcy5fbW9kZWwsZSl9KX1nZXQgaXNDb2xsYXBzZWQoKXtjb25zdCB0PXRoaXMuX3Jhbmdlcy5sZW5ndGg7cmV0dXJuIHQ9PT0wP3RoaXMuX2RvY3VtZW50Ll9nZXREZWZhdWx0UmFuZ2UoKS5pc0NvbGxhcHNlZDpzdXBlci5pc0NvbGxhcHNlZH1nZXQgYW5jaG9yKCl7cmV0dXJuIHN1cGVyLmFuY2hvcnx8dGhpcy5fZG9jdW1lbnQuX2dldERlZmF1bHRSYW5nZSgpLnN0YXJ0fWdldCBmb2N1cygpe3JldHVybiBzdXBlci5mb2N1c3x8dGhpcy5fZG9jdW1lbnQuX2dldERlZmF1bHRSYW5nZSgpLmVuZH1nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9yYW5nZXMubGVuZ3RoP3RoaXMuX3Jhbmdlcy5sZW5ndGg6MX1nZXQgaGFzT3duUmFuZ2UoKXtyZXR1cm4gdGhpcy5fcmFuZ2VzLmxlbmd0aD4wfWdldCBpc0dyYXZpdHlPdmVycmlkZGVuKCl7cmV0dXJuISF0aGlzLl9vdmVycmlkZGVuR3Jhdml0eVJlZ2lzdGVyLnNpemV9ZGVzdHJveSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5fcmFuZ2VzLmxlbmd0aDt0Kyspe3RoaXMuX3Jhbmdlc1t0XS5kZXRhY2goKX10aGlzLnN0b3BMaXN0ZW5pbmcoKX0qZ2V0UmFuZ2VzKCl7aWYodGhpcy5fcmFuZ2VzLmxlbmd0aCl7eWllbGQqc3VwZXIuZ2V0UmFuZ2VzKCl9ZWxzZXt5aWVsZCB0aGlzLl9kb2N1bWVudC5fZ2V0RGVmYXVsdFJhbmdlKCl9fWdldEZpcnN0UmFuZ2UoKXtyZXR1cm4gc3VwZXIuZ2V0Rmlyc3RSYW5nZSgpfHx0aGlzLl9kb2N1bWVudC5fZ2V0RGVmYXVsdFJhbmdlKCl9Z2V0TGFzdFJhbmdlKCl7cmV0dXJuIHN1cGVyLmdldExhc3RSYW5nZSgpfHx0aGlzLl9kb2N1bWVudC5fZ2V0RGVmYXVsdFJhbmdlKCl9c2V0VG8odCxlLGkpe3N1cGVyLnNldFRvKHQsZSxpKTt0aGlzLl91cGRhdGVBdHRyaWJ1dGVzKHRydWUpO3RoaXMuX3VwZGF0ZU1hcmtlcnMoKX1zZXRGb2N1cyh0LGUpe3N1cGVyLnNldEZvY3VzKHQsZSk7dGhpcy5fdXBkYXRlQXR0cmlidXRlcyh0cnVlKTt0aGlzLl91cGRhdGVNYXJrZXJzKCl9c2V0QXR0cmlidXRlKHQsZSl7aWYodGhpcy5fc2V0QXR0cmlidXRlKHQsZSkpe2NvbnN0IGU9W3RdO3RoaXMuZmlyZShcImNoYW5nZTphdHRyaWJ1dGVcIix7YXR0cmlidXRlS2V5czplLGRpcmVjdENoYW5nZTp0cnVlfSl9fXJlbW92ZUF0dHJpYnV0ZSh0KXtpZih0aGlzLl9yZW1vdmVBdHRyaWJ1dGUodCkpe2NvbnN0IGU9W3RdO3RoaXMuZmlyZShcImNoYW5nZTphdHRyaWJ1dGVcIix7YXR0cmlidXRlS2V5czplLGRpcmVjdENoYW5nZTp0cnVlfSl9fW92ZXJyaWRlR3Jhdml0eSgpe2NvbnN0IHQ9aXMoKTt0aGlzLl9vdmVycmlkZGVuR3Jhdml0eVJlZ2lzdGVyLmFkZCh0KTtpZih0aGlzLl9vdmVycmlkZGVuR3Jhdml0eVJlZ2lzdGVyLnNpemU9PT0xKXt0aGlzLl91cGRhdGVBdHRyaWJ1dGVzKHRydWUpfXJldHVybiB0fXJlc3RvcmVHcmF2aXR5KHQpe2lmKCF0aGlzLl9vdmVycmlkZGVuR3Jhdml0eVJlZ2lzdGVyLmhhcyh0KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImRvY3VtZW50LXNlbGVjdGlvbi1ncmF2aXR5LXdyb25nLXJlc3RvcmU6IEF0dGVtcHRpbmcgdG8gcmVzdG9yZSB0aGUgc2VsZWN0aW9uIGdyYXZpdHkgZm9yIGFuIHVua25vd24gVUlELlwiLHRoaXMse3VpZDp0fSl9dGhpcy5fb3ZlcnJpZGRlbkdyYXZpdHlSZWdpc3Rlci5kZWxldGUodCk7aWYoIXRoaXMuaXNHcmF2aXR5T3ZlcnJpZGRlbil7dGhpcy5fdXBkYXRlQXR0cmlidXRlcyh0cnVlKX19X3BvcFJhbmdlKCl7dGhpcy5fcmFuZ2VzLnBvcCgpLmRldGFjaCgpfV9wdXNoUmFuZ2UodCl7Y29uc3QgZT10aGlzLl9wcmVwYXJlUmFuZ2UodCk7aWYoZSl7dGhpcy5fcmFuZ2VzLnB1c2goZSl9fV9wcmVwYXJlUmFuZ2UodCl7dGhpcy5fY2hlY2tSYW5nZSh0KTtpZih0LnJvb3Q9PXRoaXMuX2RvY3VtZW50LmdyYXZleWFyZCl7cmV0dXJufWNvbnN0IGU9cmYuZnJvbVJhbmdlKHQpO2Uub24oXCJjaGFuZ2U6cmFuZ2VcIiwodCxpLG4pPT57dGhpcy5faGFzQ2hhbmdlZFJhbmdlPXRydWU7aWYoZS5yb290PT10aGlzLl9kb2N1bWVudC5ncmF2ZXlhcmQpe3RoaXMuX2ZpeEdyYXZleWFyZFJhbmdlc0RhdGEucHVzaCh7bGl2ZVJhbmdlOmUsc291cmNlUG9zaXRpb246bi5kZWxldGlvblBvc2l0aW9ufSl9fSk7cmV0dXJuIGV9X3VwZGF0ZU1hcmtlcnMoKXtjb25zdCB0PVtdO2xldCBlPWZhbHNlO2Zvcihjb25zdCBlIG9mIHRoaXMuX21vZGVsLm1hcmtlcnMpe2NvbnN0IGk9ZS5nZXRSYW5nZSgpO2Zvcihjb25zdCBuIG9mIHRoaXMuZ2V0UmFuZ2VzKCkpe2lmKGkuY29udGFpbnNSYW5nZShuLCFuLmlzQ29sbGFwc2VkKSl7dC5wdXNoKGUpfX19Y29uc3QgaT1BcnJheS5mcm9tKHRoaXMubWFya2Vycyk7Zm9yKGNvbnN0IGkgb2YgdCl7aWYoIXRoaXMubWFya2Vycy5oYXMoaSkpe3RoaXMubWFya2Vycy5hZGQoaSk7ZT10cnVlfX1mb3IoY29uc3QgaSBvZiBBcnJheS5mcm9tKHRoaXMubWFya2Vycykpe2lmKCF0LmluY2x1ZGVzKGkpKXt0aGlzLm1hcmtlcnMucmVtb3ZlKGkpO2U9dHJ1ZX19aWYoZSl7dGhpcy5maXJlKFwiY2hhbmdlOm1hcmtlclwiLHtvbGRNYXJrZXJzOmksZGlyZWN0Q2hhbmdlOmZhbHNlfSl9fV91cGRhdGVBdHRyaWJ1dGVzKHQpe2NvbnN0IGU9SHModGhpcy5fZ2V0U3Vycm91bmRpbmdBdHRyaWJ1dGVzKCkpO2NvbnN0IGk9SHModGhpcy5nZXRBdHRyaWJ1dGVzKCkpO2lmKHQpe3RoaXMuX2F0dHJpYnV0ZVByaW9yaXR5PW5ldyBNYXA7dGhpcy5fYXR0cnM9bmV3IE1hcH1lbHNle2Zvcihjb25zdFt0LGVdb2YgdGhpcy5fYXR0cmlidXRlUHJpb3JpdHkpe2lmKGU9PVwibG93XCIpe3RoaXMuX2F0dHJzLmRlbGV0ZSh0KTt0aGlzLl9hdHRyaWJ1dGVQcmlvcml0eS5kZWxldGUodCl9fX10aGlzLl9zZXRBdHRyaWJ1dGVzVG8oZSk7Y29uc3Qgbj1bXTtmb3IoY29uc3RbdCxlXW9mIHRoaXMuZ2V0QXR0cmlidXRlcygpKXtpZighaS5oYXModCl8fGkuZ2V0KHQpIT09ZSl7bi5wdXNoKHQpfX1mb3IoY29uc3RbdF1vZiBpKXtpZighdGhpcy5oYXNBdHRyaWJ1dGUodCkpe24ucHVzaCh0KX19aWYobi5sZW5ndGg+MCl7dGhpcy5maXJlKFwiY2hhbmdlOmF0dHJpYnV0ZVwiLHthdHRyaWJ1dGVLZXlzOm4sZGlyZWN0Q2hhbmdlOmZhbHNlfSl9fV9zZXRBdHRyaWJ1dGUodCxlLGk9dHJ1ZSl7Y29uc3Qgbj1pP1wibm9ybWFsXCI6XCJsb3dcIjtpZihuPT1cImxvd1wiJiZ0aGlzLl9hdHRyaWJ1dGVQcmlvcml0eS5nZXQodCk9PVwibm9ybWFsXCIpe3JldHVybiBmYWxzZX1jb25zdCBvPXN1cGVyLmdldEF0dHJpYnV0ZSh0KTtpZihvPT09ZSl7cmV0dXJuIGZhbHNlfXRoaXMuX2F0dHJzLnNldCh0LGUpO3RoaXMuX2F0dHJpYnV0ZVByaW9yaXR5LnNldCh0LG4pO3JldHVybiB0cnVlfV9yZW1vdmVBdHRyaWJ1dGUodCxlPXRydWUpe2NvbnN0IGk9ZT9cIm5vcm1hbFwiOlwibG93XCI7aWYoaT09XCJsb3dcIiYmdGhpcy5fYXR0cmlidXRlUHJpb3JpdHkuZ2V0KHQpPT1cIm5vcm1hbFwiKXtyZXR1cm4gZmFsc2V9dGhpcy5fYXR0cmlidXRlUHJpb3JpdHkuc2V0KHQsaSk7aWYoIXN1cGVyLmhhc0F0dHJpYnV0ZSh0KSl7cmV0dXJuIGZhbHNlfXRoaXMuX2F0dHJzLmRlbGV0ZSh0KTtyZXR1cm4gdHJ1ZX1fc2V0QXR0cmlidXRlc1RvKHQpe2NvbnN0IGU9bmV3IFNldDtmb3IoY29uc3RbZSxpXW9mIHRoaXMuZ2V0QXR0cmlidXRlcygpKXtpZih0LmdldChlKT09PWkpe2NvbnRpbnVlfXRoaXMuX3JlbW92ZUF0dHJpYnV0ZShlLGZhbHNlKX1mb3IoY29uc3RbaSxuXW9mIHQpe2NvbnN0IHQ9dGhpcy5fc2V0QXR0cmlidXRlKGksbixmYWxzZSk7aWYodCl7ZS5hZGQoaSl9fXJldHVybiBlfSpfZ2V0U3RvcmVkQXR0cmlidXRlcygpe2NvbnN0IHQ9dGhpcy5nZXRGaXJzdFBvc2l0aW9uKCkucGFyZW50O2lmKHRoaXMuaXNDb2xsYXBzZWQmJnQuaXNFbXB0eSl7Zm9yKGNvbnN0IGUgb2YgdC5nZXRBdHRyaWJ1dGVLZXlzKCkpe2lmKGUuc3RhcnRzV2l0aChsZikpe2NvbnN0IGk9ZS5zdWJzdHIobGYubGVuZ3RoKTt5aWVsZFtpLHQuZ2V0QXR0cmlidXRlKGUpXX19fX1fZ2V0U3Vycm91bmRpbmdBdHRyaWJ1dGVzKCl7Y29uc3QgdD10aGlzLmdldEZpcnN0UG9zaXRpb24oKTtjb25zdCBlPXRoaXMuX21vZGVsLnNjaGVtYTtsZXQgaT1udWxsO2lmKCF0aGlzLmlzQ29sbGFwc2VkKXtjb25zdCB0PXRoaXMuZ2V0Rmlyc3RSYW5nZSgpO2Zvcihjb25zdCBuIG9mIHQpe2lmKG4uaXRlbS5pcyhcImVsZW1lbnRcIikmJmUuaXNPYmplY3Qobi5pdGVtKSl7YnJlYWt9aWYobi50eXBlPT1cInRleHRcIil7aT1uLml0ZW0uZ2V0QXR0cmlidXRlcygpO2JyZWFrfX19ZWxzZXtjb25zdCBlPXQudGV4dE5vZGU/dC50ZXh0Tm9kZTp0Lm5vZGVCZWZvcmU7Y29uc3Qgbj10LnRleHROb2RlP3QudGV4dE5vZGU6dC5ub2RlQWZ0ZXI7aWYoIXRoaXMuaXNHcmF2aXR5T3ZlcnJpZGRlbil7aT1oZihlKX1pZighaSl7aT1oZihuKX1pZighdGhpcy5pc0dyYXZpdHlPdmVycmlkZGVuJiYhaSl7bGV0IHQ9ZTt3aGlsZSh0JiYhaSl7dD10LnByZXZpb3VzU2libGluZztpPWhmKHQpfX1pZighaSl7bGV0IHQ9bjt3aGlsZSh0JiYhaSl7dD10Lm5leHRTaWJsaW5nO2k9aGYodCl9fWlmKCFpKXtpPXRoaXMuX2dldFN0b3JlZEF0dHJpYnV0ZXMoKX19cmV0dXJuIGl9X2ZpeEdyYXZleWFyZFNlbGVjdGlvbih0LGUpe2NvbnN0IGk9ZS5jbG9uZSgpO2NvbnN0IG49dGhpcy5fbW9kZWwuc2NoZW1hLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShpKTtjb25zdCBvPXRoaXMuX3Jhbmdlcy5pbmRleE9mKHQpO3RoaXMuX3Jhbmdlcy5zcGxpY2UobywxKTt0LmRldGFjaCgpO2lmKG4pe2NvbnN0IHQ9dGhpcy5fcHJlcGFyZVJhbmdlKG4pO3RoaXMuX3Jhbmdlcy5zcGxpY2UobywwLHQpfX19ZnVuY3Rpb24gaGYodCl7aWYodCBpbnN0YW5jZW9mIEZofHx0IGluc3RhbmNlb2YgTGgpe3JldHVybiB0LmdldEF0dHJpYnV0ZXMoKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBmZih0LGUpe2NvbnN0IGk9dC5kb2N1bWVudC5kaWZmZXI7Zm9yKGNvbnN0IG4gb2YgaS5nZXRDaGFuZ2VzKCkpe2lmKG4udHlwZSE9XCJpbnNlcnRcIil7Y29udGludWV9Y29uc3QgaT1uLnBvc2l0aW9uLnBhcmVudDtjb25zdCBvPW4ubGVuZ3RoPT09aS5tYXhPZmZzZXQ7aWYobyl7dC5lbnF1ZXVlQ2hhbmdlKGUsdD0+e2NvbnN0IGU9QXJyYXkuZnJvbShpLmdldEF0dHJpYnV0ZUtleXMoKSkuZmlsdGVyKHQ9PnQuc3RhcnRzV2l0aChsZikpO2Zvcihjb25zdCBuIG9mIGUpe3QucmVtb3ZlQXR0cmlidXRlKG4saSl9fSl9fX1jbGFzcyBnZntjb25zdHJ1Y3Rvcih0KXt0aGlzLl9kaXNwYXRjaGVycz10fWFkZCh0KXtmb3IoY29uc3QgZSBvZiB0aGlzLl9kaXNwYXRjaGVycyl7dChlKX1yZXR1cm4gdGhpc319dmFyIG1mPTEscGY9NDtmdW5jdGlvbiBiZih0KXtyZXR1cm4gSHIodCxtZnxwZil9dmFyIHdmPWJmO2NsYXNzIGtmIGV4dGVuZHMgZ2Z7ZWxlbWVudFRvRWxlbWVudCh0KXtyZXR1cm4gdGhpcy5hZGQoTmYodCkpfWF0dHJpYnV0ZVRvRWxlbWVudCh0KXtyZXR1cm4gdGhpcy5hZGQoTWYodCkpfWF0dHJpYnV0ZVRvQXR0cmlidXRlKHQpe3JldHVybiB0aGlzLmFkZChCZih0KSl9bWFya2VyVG9FbGVtZW50KHQpe3JldHVybiB0aGlzLmFkZCh6Zih0KSl9bWFya2VyVG9IaWdobGlnaHQodCl7cmV0dXJuIHRoaXMuYWRkKExmKHQpKX19ZnVuY3Rpb24gX2YoKXtyZXR1cm4odCxlLGkpPT57aWYoIWkuY29uc3VtYWJsZS5jb25zdW1lKGUuaXRlbSxcImluc2VydFwiKSl7cmV0dXJufWNvbnN0IG49aS53cml0ZXI7Y29uc3Qgbz1pLm1hcHBlci50b1ZpZXdQb3NpdGlvbihlLnJhbmdlLnN0YXJ0KTtjb25zdCByPW4uY3JlYXRlVGV4dChlLml0ZW0uZGF0YSk7bi5pbnNlcnQobyxyKX19ZnVuY3Rpb24gdmYoKXtyZXR1cm4odCxlLGkpPT57Y29uc3Qgbj1pLm1hcHBlci50b1ZpZXdQb3NpdGlvbihlLnBvc2l0aW9uKTtjb25zdCBvPWUucG9zaXRpb24uZ2V0U2hpZnRlZEJ5KGUubGVuZ3RoKTtjb25zdCByPWkubWFwcGVyLnRvVmlld1Bvc2l0aW9uKG8se2lzUGhhbnRvbTp0cnVlfSk7Y29uc3Qgcz1pLndyaXRlci5jcmVhdGVSYW5nZShuLHIpO2NvbnN0IGE9aS53cml0ZXIucmVtb3ZlKHMuZ2V0VHJpbW1lZCgpKTtmb3IoY29uc3QgdCBvZiBpLndyaXRlci5jcmVhdGVSYW5nZUluKGEpLmdldEl0ZW1zKCkpe2kubWFwcGVyLnVuYmluZFZpZXdFbGVtZW50KHQpfX19ZnVuY3Rpb24geWYodCxlKXtjb25zdCBpPXQuY3JlYXRlQXR0cmlidXRlRWxlbWVudChcInNwYW5cIixlLmF0dHJpYnV0ZXMpO2lmKGUuY2xhc3Nlcyl7aS5fYWRkQ2xhc3MoZS5jbGFzc2VzKX1pZihlLnByaW9yaXR5KXtpLl9wcmlvcml0eT1lLnByaW9yaXR5fWkuX2lkPWUuaWQ7cmV0dXJuIGl9ZnVuY3Rpb24geGYoKXtyZXR1cm4odCxlLGkpPT57Y29uc3Qgbj1lLnNlbGVjdGlvbjtpZihuLmlzQ29sbGFwc2VkKXtyZXR1cm59aWYoIWkuY29uc3VtYWJsZS5jb25zdW1lKG4sXCJzZWxlY3Rpb25cIikpe3JldHVybn1jb25zdCBvPVtdO2Zvcihjb25zdCB0IG9mIG4uZ2V0UmFuZ2VzKCkpe2NvbnN0IGU9aS5tYXBwZXIudG9WaWV3UmFuZ2UodCk7by5wdXNoKGUpfWkud3JpdGVyLnNldFNlbGVjdGlvbihvLHtiYWNrd2FyZDpuLmlzQmFja3dhcmR9KX19ZnVuY3Rpb24gQ2YoKXtyZXR1cm4odCxlLGkpPT57Y29uc3Qgbj1lLnNlbGVjdGlvbjtpZighbi5pc0NvbGxhcHNlZCl7cmV0dXJufWlmKCFpLmNvbnN1bWFibGUuY29uc3VtZShuLFwic2VsZWN0aW9uXCIpKXtyZXR1cm59Y29uc3Qgbz1pLndyaXRlcjtjb25zdCByPW4uZ2V0Rmlyc3RQb3NpdGlvbigpO2NvbnN0IHM9aS5tYXBwZXIudG9WaWV3UG9zaXRpb24ocik7Y29uc3QgYT1vLmJyZWFrQXR0cmlidXRlcyhzKTtvLnNldFNlbGVjdGlvbihhKX19ZnVuY3Rpb24gQWYoKXtyZXR1cm4odCxlLGkpPT57Y29uc3Qgbj1pLndyaXRlcjtjb25zdCBvPW4uZG9jdW1lbnQuc2VsZWN0aW9uO2Zvcihjb25zdCB0IG9mIG8uZ2V0UmFuZ2VzKCkpe2lmKHQuaXNDb2xsYXBzZWQpe2lmKHQuZW5kLnBhcmVudC5pc0F0dGFjaGVkKCkpe2kud3JpdGVyLm1lcmdlQXR0cmlidXRlcyh0LnN0YXJ0KX19fW4uc2V0U2VsZWN0aW9uKG51bGwpfX1mdW5jdGlvbiBUZih0KXtyZXR1cm4oZSxpLG4pPT57Y29uc3Qgbz10KGkuYXR0cmlidXRlT2xkVmFsdWUsbi53cml0ZXIpO2NvbnN0IHI9dChpLmF0dHJpYnV0ZU5ld1ZhbHVlLG4ud3JpdGVyKTtpZighbyYmIXIpe3JldHVybn1pZighbi5jb25zdW1hYmxlLmNvbnN1bWUoaS5pdGVtLGUubmFtZSkpe3JldHVybn1jb25zdCBzPW4ud3JpdGVyO2NvbnN0IGE9cy5kb2N1bWVudC5zZWxlY3Rpb247aWYoaS5pdGVtIGluc3RhbmNlb2YgWGh8fGkuaXRlbSBpbnN0YW5jZW9mIGRmKXtzLndyYXAoYS5nZXRGaXJzdFJhbmdlKCkscil9ZWxzZXtsZXQgdD1uLm1hcHBlci50b1ZpZXdSYW5nZShpLnJhbmdlKTtpZihpLmF0dHJpYnV0ZU9sZFZhbHVlIT09bnVsbCYmbyl7dD1zLnVud3JhcCh0LG8pfWlmKGkuYXR0cmlidXRlTmV3VmFsdWUhPT1udWxsJiZyKXtzLndyYXAodCxyKX19fX1mdW5jdGlvbiBQZih0KXtyZXR1cm4oZSxpLG4pPT57Y29uc3Qgbz10KGkuaXRlbSxuLndyaXRlcik7aWYoIW8pe3JldHVybn1pZighbi5jb25zdW1hYmxlLmNvbnN1bWUoaS5pdGVtLFwiaW5zZXJ0XCIpKXtyZXR1cm59Y29uc3Qgcj1uLm1hcHBlci50b1ZpZXdQb3NpdGlvbihpLnJhbmdlLnN0YXJ0KTtuLm1hcHBlci5iaW5kRWxlbWVudHMoaS5pdGVtLG8pO24ud3JpdGVyLmluc2VydChyLG8pfX1mdW5jdGlvbiBTZih0KXtyZXR1cm4oZSxpLG4pPT57aS5pc09wZW5pbmc9dHJ1ZTtjb25zdCBvPXQoaSxuLndyaXRlcik7aS5pc09wZW5pbmc9ZmFsc2U7Y29uc3Qgcj10KGksbi53cml0ZXIpO2lmKCFvfHwhcil7cmV0dXJufWNvbnN0IHM9aS5tYXJrZXJSYW5nZTtpZihzLmlzQ29sbGFwc2VkJiYhbi5jb25zdW1hYmxlLmNvbnN1bWUocyxlLm5hbWUpKXtyZXR1cm59Zm9yKGNvbnN0IHQgb2Ygcyl7aWYoIW4uY29uc3VtYWJsZS5jb25zdW1lKHQuaXRlbSxlLm5hbWUpKXtyZXR1cm59fWNvbnN0IGE9bi5tYXBwZXI7Y29uc3QgYz1uLndyaXRlcjtjLmluc2VydChhLnRvVmlld1Bvc2l0aW9uKHMuc3RhcnQpLG8pO24ubWFwcGVyLmJpbmRFbGVtZW50VG9NYXJrZXIobyxpLm1hcmtlck5hbWUpO2lmKCFzLmlzQ29sbGFwc2VkKXtjLmluc2VydChhLnRvVmlld1Bvc2l0aW9uKHMuZW5kKSxyKTtuLm1hcHBlci5iaW5kRWxlbWVudFRvTWFya2VyKHIsaS5tYXJrZXJOYW1lKX1lLnN0b3AoKX19ZnVuY3Rpb24gRWYoKXtyZXR1cm4odCxlLGkpPT57Y29uc3Qgbj1pLm1hcHBlci5tYXJrZXJOYW1lVG9FbGVtZW50cyhlLm1hcmtlck5hbWUpO2lmKCFuKXtyZXR1cm59Zm9yKGNvbnN0IHQgb2Ygbil7aS5tYXBwZXIudW5iaW5kRWxlbWVudEZyb21NYXJrZXJOYW1lKHQsZS5tYXJrZXJOYW1lKTtpLndyaXRlci5jbGVhcihpLndyaXRlci5jcmVhdGVSYW5nZU9uKHQpLHQpfWkud3JpdGVyLmNsZWFyQ2xvbmVkRWxlbWVudHNHcm91cChlLm1hcmtlck5hbWUpO3Quc3RvcCgpfX1mdW5jdGlvbiBSZih0KXtyZXR1cm4oZSxpLG4pPT57Y29uc3Qgbz10KGkuYXR0cmlidXRlT2xkVmFsdWUsaSk7Y29uc3Qgcj10KGkuYXR0cmlidXRlTmV3VmFsdWUsaSk7aWYoIW8mJiFyKXtyZXR1cm59aWYoIW4uY29uc3VtYWJsZS5jb25zdW1lKGkuaXRlbSxlLm5hbWUpKXtyZXR1cm59Y29uc3Qgcz1uLm1hcHBlci50b1ZpZXdFbGVtZW50KGkuaXRlbSk7Y29uc3QgYT1uLndyaXRlcjtpZighcyl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbnZlcnNpb24tYXR0cmlidXRlLXRvLWF0dHJpYnV0ZS1vbi10ZXh0OiBcIitcIlRyeWluZyB0byBjb252ZXJ0IHRleHQgbm9kZSdzIGF0dHJpYnV0ZSB3aXRoIGF0dHJpYnV0ZS10by1hdHRyaWJ1dGUgY29udmVydGVyLlwiLFtpLG5dKX1pZihpLmF0dHJpYnV0ZU9sZFZhbHVlIT09bnVsbCYmbyl7aWYoby5rZXk9PVwiY2xhc3NcIil7Y29uc3QgdD1BcnJheS5pc0FycmF5KG8udmFsdWUpP28udmFsdWU6W28udmFsdWVdO2Zvcihjb25zdCBlIG9mIHQpe2EucmVtb3ZlQ2xhc3MoZSxzKX19ZWxzZSBpZihvLmtleT09XCJzdHlsZVwiKXtjb25zdCB0PU9iamVjdC5rZXlzKG8udmFsdWUpO2Zvcihjb25zdCBlIG9mIHQpe2EucmVtb3ZlU3R5bGUoZSxzKX19ZWxzZXthLnJlbW92ZUF0dHJpYnV0ZShvLmtleSxzKX19aWYoaS5hdHRyaWJ1dGVOZXdWYWx1ZSE9PW51bGwmJnIpe2lmKHIua2V5PT1cImNsYXNzXCIpe2NvbnN0IHQ9QXJyYXkuaXNBcnJheShyLnZhbHVlKT9yLnZhbHVlOltyLnZhbHVlXTtmb3IoY29uc3QgZSBvZiB0KXthLmFkZENsYXNzKGUscyl9fWVsc2UgaWYoci5rZXk9PVwic3R5bGVcIil7Y29uc3QgdD1PYmplY3Qua2V5cyhyLnZhbHVlKTtmb3IoY29uc3QgZSBvZiB0KXthLnNldFN0eWxlKGUsci52YWx1ZVtlXSxzKX19ZWxzZXthLnNldEF0dHJpYnV0ZShyLmtleSxyLnZhbHVlLHMpfX19fWZ1bmN0aW9uIE9mKHQpe3JldHVybihlLGksbik9PntpZighaS5pdGVtKXtyZXR1cm59aWYoIShpLml0ZW0gaW5zdGFuY2VvZiBYaHx8aS5pdGVtIGluc3RhbmNlb2YgZGYpJiYhaS5pdGVtLmlzKFwidGV4dFByb3h5XCIpKXtyZXR1cm59Y29uc3Qgbz1XZih0LGksbik7aWYoIW8pe3JldHVybn1pZighbi5jb25zdW1hYmxlLmNvbnN1bWUoaS5pdGVtLGUubmFtZSkpe3JldHVybn1jb25zdCByPW4ud3JpdGVyO2NvbnN0IHM9eWYocixvKTtjb25zdCBhPXIuZG9jdW1lbnQuc2VsZWN0aW9uO2lmKGkuaXRlbSBpbnN0YW5jZW9mIFhofHxpLml0ZW0gaW5zdGFuY2VvZiBkZil7ci53cmFwKGEuZ2V0Rmlyc3RSYW5nZSgpLHMsYSl9ZWxzZXtjb25zdCB0PW4ubWFwcGVyLnRvVmlld1JhbmdlKGkucmFuZ2UpO2NvbnN0IGU9ci53cmFwKHQscyk7Zm9yKGNvbnN0IHQgb2YgZS5nZXRJdGVtcygpKXtpZih0LmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKSYmdC5pc1NpbWlsYXIocykpe24ubWFwcGVyLmJpbmRFbGVtZW50VG9NYXJrZXIodCxpLm1hcmtlck5hbWUpO2JyZWFrfX19fX1mdW5jdGlvbiBJZih0KXtyZXR1cm4oZSxpLG4pPT57aWYoIWkuaXRlbSl7cmV0dXJufWlmKCEoaS5pdGVtIGluc3RhbmNlb2YgamgpKXtyZXR1cm59Y29uc3Qgbz1XZih0LGksbik7aWYoIW8pe3JldHVybn1pZighbi5jb25zdW1hYmxlLnRlc3QoaS5pdGVtLGUubmFtZSkpe3JldHVybn1jb25zdCByPW4ubWFwcGVyLnRvVmlld0VsZW1lbnQoaS5pdGVtKTtpZihyJiZyLmdldEN1c3RvbVByb3BlcnR5KFwiYWRkSGlnaGxpZ2h0XCIpKXtuLmNvbnN1bWFibGUuY29uc3VtZShpLml0ZW0sZS5uYW1lKTtmb3IoY29uc3QgdCBvZiAkaC5fY3JlYXRlSW4oaS5pdGVtKSl7bi5jb25zdW1hYmxlLmNvbnN1bWUodC5pdGVtLGUubmFtZSl9ci5nZXRDdXN0b21Qcm9wZXJ0eShcImFkZEhpZ2hsaWdodFwiKShyLG8sbi53cml0ZXIpO24ubWFwcGVyLmJpbmRFbGVtZW50VG9NYXJrZXIocixpLm1hcmtlck5hbWUpfX19ZnVuY3Rpb24gVmYodCl7cmV0dXJuKGUsaSxuKT0+e2lmKGkubWFya2VyUmFuZ2UuaXNDb2xsYXBzZWQpe3JldHVybn1jb25zdCBvPVdmKHQsaSxuKTtpZighbyl7cmV0dXJufWNvbnN0IHI9eWYobi53cml0ZXIsbyk7Y29uc3Qgcz1uLm1hcHBlci5tYXJrZXJOYW1lVG9FbGVtZW50cyhpLm1hcmtlck5hbWUpO2lmKCFzKXtyZXR1cm59Zm9yKGNvbnN0IHQgb2Ygcyl7bi5tYXBwZXIudW5iaW5kRWxlbWVudEZyb21NYXJrZXJOYW1lKHQsaS5tYXJrZXJOYW1lKTtpZih0LmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKSl7bi53cml0ZXIudW53cmFwKG4ud3JpdGVyLmNyZWF0ZVJhbmdlT24odCkscil9ZWxzZXt0LmdldEN1c3RvbVByb3BlcnR5KFwicmVtb3ZlSGlnaGxpZ2h0XCIpKHQsby5pZCxuLndyaXRlcil9fW4ud3JpdGVyLmNsZWFyQ2xvbmVkRWxlbWVudHNHcm91cChpLm1hcmtlck5hbWUpO2Uuc3RvcCgpfX1mdW5jdGlvbiBOZih0KXt0PXdmKHQpO3Qudmlldz1GZih0LnZpZXcsXCJjb250YWluZXJcIik7cmV0dXJuIGU9PntlLm9uKFwiaW5zZXJ0OlwiK3QubW9kZWwsUGYodC52aWV3KSx7cHJpb3JpdHk6dC5jb252ZXJ0ZXJQcmlvcml0eXx8XCJub3JtYWxcIn0pfX1mdW5jdGlvbiBNZih0KXt0PXdmKHQpO2NvbnN0IGU9dC5tb2RlbC5rZXk/dC5tb2RlbC5rZXk6dC5tb2RlbDtsZXQgaT1cImF0dHJpYnV0ZTpcIitlO2lmKHQubW9kZWwubmFtZSl7aSs9XCI6XCIrdC5tb2RlbC5uYW1lfWlmKHQubW9kZWwudmFsdWVzKXtmb3IoY29uc3QgZSBvZiB0Lm1vZGVsLnZhbHVlcyl7dC52aWV3W2VdPUZmKHQudmlld1tlXSxcImF0dHJpYnV0ZVwiKX19ZWxzZXt0LnZpZXc9RmYodC52aWV3LFwiYXR0cmlidXRlXCIpfWNvbnN0IG49amYodCk7cmV0dXJuIGU9PntlLm9uKGksVGYobikse3ByaW9yaXR5OnQuY29udmVydGVyUHJpb3JpdHl8fFwibm9ybWFsXCJ9KX19ZnVuY3Rpb24gQmYodCl7dD13Zih0KTtjb25zdCBlPXQubW9kZWwua2V5P3QubW9kZWwua2V5OnQubW9kZWw7bGV0IGk9XCJhdHRyaWJ1dGU6XCIrZTtpZih0Lm1vZGVsLm5hbWUpe2krPVwiOlwiK3QubW9kZWwubmFtZX1pZih0Lm1vZGVsLnZhbHVlcyl7Zm9yKGNvbnN0IGUgb2YgdC5tb2RlbC52YWx1ZXMpe3Qudmlld1tlXT1IZih0LnZpZXdbZV0pfX1lbHNle3Qudmlldz1IZih0LnZpZXcpfWNvbnN0IG49amYodCk7cmV0dXJuIGU9PntlLm9uKGksUmYobikse3ByaW9yaXR5OnQuY29udmVydGVyUHJpb3JpdHl8fFwibm9ybWFsXCJ9KX19ZnVuY3Rpb24gemYodCl7dD13Zih0KTt0LnZpZXc9RmYodC52aWV3LFwidWlcIik7cmV0dXJuIGU9PntlLm9uKFwiYWRkTWFya2VyOlwiK3QubW9kZWwsU2YodC52aWV3KSx7cHJpb3JpdHk6dC5jb252ZXJ0ZXJQcmlvcml0eXx8XCJub3JtYWxcIn0pO2Uub24oXCJyZW1vdmVNYXJrZXI6XCIrdC5tb2RlbCxFZih0LnZpZXcpLHtwcmlvcml0eTp0LmNvbnZlcnRlclByaW9yaXR5fHxcIm5vcm1hbFwifSl9fWZ1bmN0aW9uIExmKHQpe3JldHVybiBlPT57ZS5vbihcImFkZE1hcmtlcjpcIit0Lm1vZGVsLE9mKHQudmlldykse3ByaW9yaXR5OnQuY29udmVydGVyUHJpb3JpdHl8fFwibm9ybWFsXCJ9KTtlLm9uKFwiYWRkTWFya2VyOlwiK3QubW9kZWwsSWYodC52aWV3KSx7cHJpb3JpdHk6dC5jb252ZXJ0ZXJQcmlvcml0eXx8XCJub3JtYWxcIn0pO2Uub24oXCJyZW1vdmVNYXJrZXI6XCIrdC5tb2RlbCxWZih0LnZpZXcpLHtwcmlvcml0eTp0LmNvbnZlcnRlclByaW9yaXR5fHxcIm5vcm1hbFwifSl9fWZ1bmN0aW9uIEZmKHQsZSl7aWYodHlwZW9mIHQ9PVwiZnVuY3Rpb25cIil7cmV0dXJuIHR9cmV0dXJuKGksbik9PkRmKHQsbixlKX1mdW5jdGlvbiBEZih0LGUsaSl7aWYodHlwZW9mIHQ9PVwic3RyaW5nXCIpe3Q9e25hbWU6dH19bGV0IG47Y29uc3Qgbz1PYmplY3QuYXNzaWduKHt9LHQuYXR0cmlidXRlcyk7aWYoaT09XCJjb250YWluZXJcIil7bj1lLmNyZWF0ZUNvbnRhaW5lckVsZW1lbnQodC5uYW1lLG8pfWVsc2UgaWYoaT09XCJhdHRyaWJ1dGVcIil7Y29uc3QgaT17cHJpb3JpdHk6dC5wcmlvcml0eXx8d2wuREVGQVVMVF9QUklPUklUWX07bj1lLmNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQodC5uYW1lLG8saSl9ZWxzZXtuPWUuY3JlYXRlVUlFbGVtZW50KHQubmFtZSxvKX1pZih0LnN0eWxlcyl7Y29uc3QgaT1PYmplY3Qua2V5cyh0LnN0eWxlcyk7Zm9yKGNvbnN0IG8gb2YgaSl7ZS5zZXRTdHlsZShvLHQuc3R5bGVzW29dLG4pfX1pZih0LmNsYXNzZXMpe2NvbnN0IGk9dC5jbGFzc2VzO2lmKHR5cGVvZiBpPT1cInN0cmluZ1wiKXtlLmFkZENsYXNzKGksbil9ZWxzZXtmb3IoY29uc3QgdCBvZiBpKXtlLmFkZENsYXNzKHQsbil9fX1yZXR1cm4gbn1mdW5jdGlvbiBqZih0KXtpZih0Lm1vZGVsLnZhbHVlcyl7cmV0dXJuKGUsaSk9Pntjb25zdCBuPXQudmlld1tlXTtpZihuKXtyZXR1cm4gbihlLGkpfXJldHVybiBudWxsfX1lbHNle3JldHVybiB0LnZpZXd9fWZ1bmN0aW9uIEhmKHQpe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtyZXR1cm4gZT0+KHtrZXk6dCx2YWx1ZTplfSl9ZWxzZSBpZih0eXBlb2YgdD09XCJvYmplY3RcIil7aWYodC52YWx1ZSl7cmV0dXJuKCk9PnR9ZWxzZXtyZXR1cm4gZT0+KHtrZXk6dC5rZXksdmFsdWU6ZX0pfX1lbHNle3JldHVybiB0fX1mdW5jdGlvbiBXZih0LGUsaSl7Y29uc3Qgbj10eXBlb2YgdD09XCJmdW5jdGlvblwiP3QoZSxpKTp0O2lmKCFuKXtyZXR1cm4gbnVsbH1pZighbi5wcmlvcml0eSl7bi5wcmlvcml0eT0xMH1pZighbi5pZCl7bi5pZD1lLm1hcmtlck5hbWV9cmV0dXJuIG59Y2xhc3MgcWYgZXh0ZW5kcyBnZntlbGVtZW50VG9FbGVtZW50KHQpe3JldHVybiB0aGlzLmFkZChLZih0KSl9ZWxlbWVudFRvQXR0cmlidXRlKHQpe3JldHVybiB0aGlzLmFkZChKZih0KSl9YXR0cmlidXRlVG9BdHRyaWJ1dGUodCl7cmV0dXJuIHRoaXMuYWRkKFlmKHQpKX1lbGVtZW50VG9NYXJrZXIodCl7cmV0dXJuIHRoaXMuYWRkKFFmKHQpKX19ZnVuY3Rpb24gVWYoKXtyZXR1cm4odCxlLGkpPT57aWYoIWUubW9kZWxSYW5nZSYmaS5jb25zdW1hYmxlLmNvbnN1bWUoZS52aWV3SXRlbSx7bmFtZTp0cnVlfSkpe2NvbnN0e21vZGVsUmFuZ2U6dCxtb2RlbEN1cnNvcjpufT1pLmNvbnZlcnRDaGlsZHJlbihlLnZpZXdJdGVtLGUubW9kZWxDdXJzb3IpO2UubW9kZWxSYW5nZT10O2UubW9kZWxDdXJzb3I9bn19fWZ1bmN0aW9uICRmKCl7cmV0dXJuKHQsZSxpKT0+e2lmKGkuc2NoZW1hLmNoZWNrQ2hpbGQoZS5tb2RlbEN1cnNvcixcIiR0ZXh0XCIpKXtpZihpLmNvbnN1bWFibGUuY29uc3VtZShlLnZpZXdJdGVtKSl7Y29uc3QgdD1pLndyaXRlci5jcmVhdGVUZXh0KGUudmlld0l0ZW0uZGF0YSk7aS53cml0ZXIuaW5zZXJ0KHQsZS5tb2RlbEN1cnNvcik7ZS5tb2RlbFJhbmdlPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLm1vZGVsQ3Vyc29yLHQub2Zmc2V0U2l6ZSk7ZS5tb2RlbEN1cnNvcj1lLm1vZGVsUmFuZ2UuZW5kfX19fWZ1bmN0aW9uIEdmKHQsZSl7cmV0dXJuKGksbik9Pntjb25zdCBvPW4ubmV3U2VsZWN0aW9uO2NvbnN0IHI9bmV3IFhoO2NvbnN0IHM9W107Zm9yKGNvbnN0IHQgb2Ygby5nZXRSYW5nZXMoKSl7cy5wdXNoKGUudG9Nb2RlbFJhbmdlKHQpKX1yLnNldFRvKHMse2JhY2t3YXJkOm8uaXNCYWNrd2FyZH0pO2lmKCFyLmlzRXF1YWwodC5kb2N1bWVudC5zZWxlY3Rpb24pKXt0LmNoYW5nZSh0PT57dC5zZXRTZWxlY3Rpb24ocil9KX19fWZ1bmN0aW9uIEtmKHQpe3Q9d2YodCk7Y29uc3QgZT1aZih0KTtjb25zdCBpPVhmKHQudmlldyk7Y29uc3Qgbj1pP1wiZWxlbWVudDpcIitpOlwiZWxlbWVudFwiO3JldHVybiBpPT57aS5vbihuLGUse3ByaW9yaXR5OnQuY29udmVydGVyUHJpb3JpdHl8fFwibm9ybWFsXCJ9KX19ZnVuY3Rpb24gSmYodCl7dD13Zih0KTtpZyh0KTtjb25zdCBlPW5nKHQsZmFsc2UpO2NvbnN0IGk9WGYodC52aWV3KTtjb25zdCBuPWk/XCJlbGVtZW50OlwiK2k6XCJlbGVtZW50XCI7cmV0dXJuIGk9PntpLm9uKG4sZSx7cHJpb3JpdHk6dC5jb252ZXJ0ZXJQcmlvcml0eXx8XCJsb3dcIn0pfX1mdW5jdGlvbiBZZih0KXt0PXdmKHQpO2xldCBlPW51bGw7aWYodHlwZW9mIHQudmlldz09XCJzdHJpbmdcInx8dC52aWV3LmtleSl7ZT1lZyh0KX1pZyh0LGUpO2NvbnN0IGk9bmcodCx0cnVlKTtyZXR1cm4gZT0+e2Uub24oXCJlbGVtZW50XCIsaSx7cHJpb3JpdHk6dC5jb252ZXJ0ZXJQcmlvcml0eXx8XCJsb3dcIn0pfX1mdW5jdGlvbiBRZih0KXt0PXdmKHQpO3NnKHQpO3JldHVybiBLZih0KX1mdW5jdGlvbiBYZih0KXtpZih0eXBlb2YgdD09XCJzdHJpbmdcIil7cmV0dXJuIHR9aWYodHlwZW9mIHQ9PVwib2JqZWN0XCImJnR5cGVvZiB0Lm5hbWU9PVwic3RyaW5nXCIpe3JldHVybiB0Lm5hbWV9cmV0dXJuIG51bGx9ZnVuY3Rpb24gWmYodCl7Y29uc3QgZT10LnZpZXc/bmV3IFdzKHQudmlldyk6bnVsbDtyZXR1cm4oaSxuLG8pPT57bGV0IHI9e307aWYoZSl7Y29uc3QgdD1lLm1hdGNoKG4udmlld0l0ZW0pO2lmKCF0KXtyZXR1cm59cj10Lm1hdGNofXIubmFtZT10cnVlO2NvbnN0IHM9dGcodC5tb2RlbCxuLnZpZXdJdGVtLG8ud3JpdGVyKTtpZighcyl7cmV0dXJufWlmKCFvLmNvbnN1bWFibGUudGVzdChuLnZpZXdJdGVtLHIpKXtyZXR1cm59Y29uc3QgYT1vLnNwbGl0VG9BbGxvd2VkUGFyZW50KHMsbi5tb2RlbEN1cnNvcik7aWYoIWEpe3JldHVybn1vLndyaXRlci5pbnNlcnQocyxhLnBvc2l0aW9uKTtvLmNvbnZlcnRDaGlsZHJlbihuLnZpZXdJdGVtLG8ud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQocywwKSk7by5jb25zdW1hYmxlLmNvbnN1bWUobi52aWV3SXRlbSxyKTtjb25zdCBjPW8uZ2V0U3BsaXRQYXJ0cyhzKTtuLm1vZGVsUmFuZ2U9bmV3ICRoKG8ud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHMpLG8ud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIoY1tjLmxlbmd0aC0xXSkpO2lmKGEuY3Vyc29yUGFyZW50KXtuLm1vZGVsQ3Vyc29yPW8ud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoYS5jdXJzb3JQYXJlbnQsMCl9ZWxzZXtuLm1vZGVsQ3Vyc29yPW4ubW9kZWxSYW5nZS5lbmR9fX1mdW5jdGlvbiB0Zyh0LGUsaSl7aWYodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXtyZXR1cm4gdChlLGkpfWVsc2V7cmV0dXJuIGkuY3JlYXRlRWxlbWVudCh0KX19ZnVuY3Rpb24gZWcodCl7aWYodHlwZW9mIHQudmlldz09XCJzdHJpbmdcIil7dC52aWV3PXtrZXk6dC52aWV3fX1jb25zdCBlPXQudmlldy5rZXk7bGV0IGk7aWYoZT09XCJjbGFzc1wifHxlPT1cInN0eWxlXCIpe2NvbnN0IG49ZT09XCJjbGFzc1wiP1wiY2xhc3Nlc1wiOlwic3R5bGVzXCI7aT17W25dOnQudmlldy52YWx1ZX19ZWxzZXtjb25zdCBuPXR5cGVvZiB0LnZpZXcudmFsdWU9PVwidW5kZWZpbmVkXCI/L1tcXHNcXFNdKi86dC52aWV3LnZhbHVlO2k9e2F0dHJpYnV0ZXM6e1tlXTpufX19aWYodC52aWV3Lm5hbWUpe2kubmFtZT10LnZpZXcubmFtZX10LnZpZXc9aTtyZXR1cm4gZX1mdW5jdGlvbiBpZyh0LGU9bnVsbCl7Y29uc3QgaT1lPT09bnVsbD90cnVlOnQ9PnQuZ2V0QXR0cmlidXRlKGUpO2NvbnN0IG49dHlwZW9mIHQubW9kZWwhPVwib2JqZWN0XCI/dC5tb2RlbDp0Lm1vZGVsLmtleTtjb25zdCBvPXR5cGVvZiB0Lm1vZGVsIT1cIm9iamVjdFwifHx0eXBlb2YgdC5tb2RlbC52YWx1ZT09XCJ1bmRlZmluZWRcIj9pOnQubW9kZWwudmFsdWU7dC5tb2RlbD17a2V5Om4sdmFsdWU6b319ZnVuY3Rpb24gbmcodCxlKXtjb25zdCBpPW5ldyBXcyh0LnZpZXcpO3JldHVybihuLG8scik9Pntjb25zdCBzPWkubWF0Y2goby52aWV3SXRlbSk7aWYoIXMpe3JldHVybn1jb25zdCBhPXQubW9kZWwua2V5O2NvbnN0IGM9dHlwZW9mIHQubW9kZWwudmFsdWU9PVwiZnVuY3Rpb25cIj90Lm1vZGVsLnZhbHVlKG8udmlld0l0ZW0pOnQubW9kZWwudmFsdWU7aWYoYz09PW51bGwpe3JldHVybn1pZihvZyh0LnZpZXcsby52aWV3SXRlbSkpe3MubWF0Y2gubmFtZT10cnVlfWVsc2V7ZGVsZXRlIHMubWF0Y2gubmFtZX1pZighci5jb25zdW1hYmxlLnRlc3Qoby52aWV3SXRlbSxzLm1hdGNoKSl7cmV0dXJufWlmKCFvLm1vZGVsUmFuZ2Upe289T2JqZWN0LmFzc2lnbihvLHIuY29udmVydENoaWxkcmVuKG8udmlld0l0ZW0sby5tb2RlbEN1cnNvcikpfWNvbnN0IGw9cmcoby5tb2RlbFJhbmdlLHtrZXk6YSx2YWx1ZTpjfSxlLHIpO2lmKGwpe3IuY29uc3VtYWJsZS5jb25zdW1lKG8udmlld0l0ZW0scy5tYXRjaCl9fX1mdW5jdGlvbiBvZyh0LGUpe2NvbnN0IGk9dHlwZW9mIHQ9PVwiZnVuY3Rpb25cIj90KGUpOnQ7aWYodHlwZW9mIGk9PVwib2JqZWN0XCImJiFYZihpKSl7cmV0dXJuIGZhbHNlfXJldHVybiFpLmNsYXNzZXMmJiFpLmF0dHJpYnV0ZXMmJiFpLnN0eWxlc31mdW5jdGlvbiByZyh0LGUsaSxuKXtsZXQgbz1mYWxzZTtmb3IoY29uc3QgciBvZiBBcnJheS5mcm9tKHQuZ2V0SXRlbXMoe3NoYWxsb3c6aX0pKSl7aWYobi5zY2hlbWEuY2hlY2tBdHRyaWJ1dGUocixlLmtleSkpe24ud3JpdGVyLnNldEF0dHJpYnV0ZShlLmtleSxlLnZhbHVlLHIpO289dHJ1ZX19cmV0dXJuIG99ZnVuY3Rpb24gc2codCl7Y29uc3QgZT10Lm1vZGVsO3QubW9kZWw9KHQsaSk9Pntjb25zdCBuPXR5cGVvZiBlPT1cInN0cmluZ1wiP2U6ZSh0KTtyZXR1cm4gaS5jcmVhdGVFbGVtZW50KFwiJG1hcmtlclwiLHtcImRhdGEtbmFtZVwiOm59KX19Y2xhc3MgYWd7Y29uc3RydWN0b3IodCxlKXt0aGlzLm1vZGVsPXQ7dGhpcy52aWV3PW5ldyBCaChlKTt0aGlzLm1hcHBlcj1uZXcgR2g7dGhpcy5kb3duY2FzdERpc3BhdGNoZXI9bmV3IFloKHttYXBwZXI6dGhpcy5tYXBwZXJ9KTtjb25zdCBpPXRoaXMubW9kZWwuZG9jdW1lbnQ7Y29uc3Qgbj1pLnNlbGVjdGlvbjtjb25zdCBvPXRoaXMubW9kZWwubWFya2Vyczt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsXCJfYmVmb3JlQ2hhbmdlc1wiLCgpPT57dGhpcy52aWV3Ll9kaXNhYmxlUmVuZGVyaW5nKHRydWUpfSx7cHJpb3JpdHk6XCJoaWdoZXN0XCJ9KTt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsXCJfYWZ0ZXJDaGFuZ2VzXCIsKCk9Pnt0aGlzLnZpZXcuX2Rpc2FibGVSZW5kZXJpbmcoZmFsc2UpfSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO3RoaXMubGlzdGVuVG8oaSxcImNoYW5nZVwiLCgpPT57dGhpcy52aWV3LmNoYW5nZSh0PT57dGhpcy5kb3duY2FzdERpc3BhdGNoZXIuY29udmVydENoYW5nZXMoaS5kaWZmZXIsbyx0KTt0aGlzLmRvd25jYXN0RGlzcGF0Y2hlci5jb252ZXJ0U2VsZWN0aW9uKG4sbyx0KX0pfSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMubGlzdGVuVG8odGhpcy52aWV3LmRvY3VtZW50LFwic2VsZWN0aW9uQ2hhbmdlXCIsR2YodGhpcy5tb2RlbCx0aGlzLm1hcHBlcikpO3RoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwiaW5zZXJ0OiR0ZXh0XCIsX2YoKSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO3RoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwicmVtb3ZlXCIsdmYoKSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwic2VsZWN0aW9uXCIsQWYoKSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwic2VsZWN0aW9uXCIseGYoKSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwic2VsZWN0aW9uXCIsQ2YoKSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMudmlldy5kb2N1bWVudC5yb290cy5iaW5kVG8odGhpcy5tb2RlbC5kb2N1bWVudC5yb290cykudXNpbmcodD0+e2lmKHQucm9vdE5hbWU9PVwiJGdyYXZleWFyZFwiKXtyZXR1cm4gbnVsbH1jb25zdCBlPW5ldyBjbCh0aGlzLnZpZXcuZG9jdW1lbnQsdC5uYW1lKTtlLnJvb3ROYW1lPXQucm9vdE5hbWU7dGhpcy5tYXBwZXIuYmluZEVsZW1lbnRzKHQsZSk7cmV0dXJuIGV9KX1kZXN0cm95KCl7dGhpcy52aWV3LmRlc3Ryb3koKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKX19dnMoYWcsSmMpO2NsYXNzIGNne2NvbnN0cnVjdG9yKCl7dGhpcy5fY29tbWFuZHM9bmV3IE1hcH1hZGQodCxlKXt0aGlzLl9jb21tYW5kcy5zZXQodCxlKX1nZXQodCl7cmV0dXJuIHRoaXMuX2NvbW1hbmRzLmdldCh0KX1leGVjdXRlKHQsLi4uZSl7Y29uc3QgaT10aGlzLmdldCh0KTtpZighaSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbW1hbmRjb2xsZWN0aW9uLWNvbW1hbmQtbm90LWZvdW5kOiBDb21tYW5kIGRvZXMgbm90IGV4aXN0LlwiLHRoaXMse2NvbW1hbmROYW1lOnR9KX1pLmV4ZWN1dGUoLi4uZSl9Km5hbWVzKCl7eWllbGQqdGhpcy5fY29tbWFuZHMua2V5cygpfSpjb21tYW5kcygpe3lpZWxkKnRoaXMuX2NvbW1hbmRzLnZhbHVlcygpfVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXMuX2NvbW1hbmRzW1N5bWJvbC5pdGVyYXRvcl0oKX1kZXN0cm95KCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jb21tYW5kcygpKXt0LmRlc3Ryb3koKX19fWNsYXNzIGxne2NvbnN0cnVjdG9yKCl7dGhpcy5fY29uc3VtYWJsZXM9bmV3IE1hcH1hZGQodCxlKXtsZXQgaTtpZih0LmlzKFwidGV4dFwiKXx8dC5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe3RoaXMuX2NvbnN1bWFibGVzLnNldCh0LHRydWUpO3JldHVybn1pZighdGhpcy5fY29uc3VtYWJsZXMuaGFzKHQpKXtpPW5ldyBkZyh0KTt0aGlzLl9jb25zdW1hYmxlcy5zZXQodCxpKX1lbHNle2k9dGhpcy5fY29uc3VtYWJsZXMuZ2V0KHQpfWkuYWRkKGUpfXRlc3QodCxlKXtjb25zdCBpPXRoaXMuX2NvbnN1bWFibGVzLmdldCh0KTtpZihpPT09dW5kZWZpbmVkKXtyZXR1cm4gbnVsbH1pZih0LmlzKFwidGV4dFwiKXx8dC5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe3JldHVybiBpfXJldHVybiBpLnRlc3QoZSl9Y29uc3VtZSh0LGUpe2lmKHRoaXMudGVzdCh0LGUpKXtpZih0LmlzKFwidGV4dFwiKXx8dC5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe3RoaXMuX2NvbnN1bWFibGVzLnNldCh0LGZhbHNlKX1lbHNle3RoaXMuX2NvbnN1bWFibGVzLmdldCh0KS5jb25zdW1lKGUpfXJldHVybiB0cnVlfXJldHVybiBmYWxzZX1yZXZlcnQodCxlKXtjb25zdCBpPXRoaXMuX2NvbnN1bWFibGVzLmdldCh0KTtpZihpIT09dW5kZWZpbmVkKXtpZih0LmlzKFwidGV4dFwiKXx8dC5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe3RoaXMuX2NvbnN1bWFibGVzLnNldCh0LHRydWUpfWVsc2V7aS5yZXZlcnQoZSl9fX1zdGF0aWMgY29uc3VtYWJsZXNGcm9tRWxlbWVudCh0KXtjb25zdCBlPXtlbGVtZW50OnQsbmFtZTp0cnVlLGF0dHJpYnV0ZXM6W10sY2xhc3NlczpbXSxzdHlsZXM6W119O2NvbnN0IGk9dC5nZXRBdHRyaWJ1dGVLZXlzKCk7Zm9yKGNvbnN0IHQgb2YgaSl7aWYodD09XCJzdHlsZVwifHx0PT1cImNsYXNzXCIpe2NvbnRpbnVlfWUuYXR0cmlidXRlcy5wdXNoKHQpfWNvbnN0IG49dC5nZXRDbGFzc05hbWVzKCk7Zm9yKGNvbnN0IHQgb2Ygbil7ZS5jbGFzc2VzLnB1c2godCl9Y29uc3Qgbz10LmdldFN0eWxlTmFtZXMoKTtmb3IoY29uc3QgdCBvZiBvKXtlLnN0eWxlcy5wdXNoKHQpfXJldHVybiBlfXN0YXRpYyBjcmVhdGVGcm9tKHQsZSl7aWYoIWUpe2U9bmV3IGxnKHQpfWlmKHQuaXMoXCJ0ZXh0XCIpKXtlLmFkZCh0KTtyZXR1cm4gZX1pZih0LmlzKFwiZWxlbWVudFwiKSl7ZS5hZGQodCxsZy5jb25zdW1hYmxlc0Zyb21FbGVtZW50KHQpKX1pZih0LmlzKFwiZG9jdW1lbnRGcmFnbWVudFwiKSl7ZS5hZGQodCl9Zm9yKGNvbnN0IGkgb2YgdC5nZXRDaGlsZHJlbigpKXtlPWxnLmNyZWF0ZUZyb20oaSxlKX1yZXR1cm4gZX19Y2xhc3MgZGd7Y29uc3RydWN0b3IodCl7dGhpcy5lbGVtZW50PXQ7dGhpcy5fY2FuQ29uc3VtZU5hbWU9bnVsbDt0aGlzLl9jb25zdW1hYmxlcz17YXR0cmlidXRlczpuZXcgTWFwLHN0eWxlczpuZXcgTWFwLGNsYXNzZXM6bmV3IE1hcH19YWRkKHQpe2lmKHQubmFtZSl7dGhpcy5fY2FuQ29uc3VtZU5hbWU9dHJ1ZX1mb3IoY29uc3QgZSBpbiB0aGlzLl9jb25zdW1hYmxlcyl7aWYoZSBpbiB0KXt0aGlzLl9hZGQoZSx0W2VdKX19fXRlc3QodCl7aWYodC5uYW1lJiYhdGhpcy5fY2FuQ29uc3VtZU5hbWUpe3JldHVybiB0aGlzLl9jYW5Db25zdW1lTmFtZX1mb3IoY29uc3QgZSBpbiB0aGlzLl9jb25zdW1hYmxlcyl7aWYoZSBpbiB0KXtjb25zdCBpPXRoaXMuX3Rlc3QoZSx0W2VdKTtpZihpIT09dHJ1ZSl7cmV0dXJuIGl9fX1yZXR1cm4gdHJ1ZX1jb25zdW1lKHQpe2lmKHQubmFtZSl7dGhpcy5fY2FuQ29uc3VtZU5hbWU9ZmFsc2V9Zm9yKGNvbnN0IGUgaW4gdGhpcy5fY29uc3VtYWJsZXMpe2lmKGUgaW4gdCl7dGhpcy5fY29uc3VtZShlLHRbZV0pfX19cmV2ZXJ0KHQpe2lmKHQubmFtZSl7dGhpcy5fY2FuQ29uc3VtZU5hbWU9dHJ1ZX1mb3IoY29uc3QgZSBpbiB0aGlzLl9jb25zdW1hYmxlcyl7aWYoZSBpbiB0KXt0aGlzLl9yZXZlcnQoZSx0W2VdKX19fV9hZGQodCxlKXtjb25zdCBpPUplKGUpP2U6W2VdO2NvbnN0IG49dGhpcy5fY29uc3VtYWJsZXNbdF07Zm9yKGNvbnN0IGUgb2YgaSl7aWYodD09PVwiYXR0cmlidXRlc1wiJiYoZT09PVwiY2xhc3NcInx8ZT09PVwic3R5bGVcIikpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3Y29uc3VtYWJsZS1pbnZhbGlkLWF0dHJpYnV0ZTogQ2xhc3NlcyBhbmQgc3R5bGVzIHNob3VsZCBiZSBoYW5kbGVkIHNlcGFyYXRlbHkuXCIsdGhpcyl9bi5zZXQoZSx0cnVlKTtpZih0PT09XCJzdHlsZXNcIil7Zm9yKGNvbnN0IHQgb2YgdGhpcy5lbGVtZW50LmRvY3VtZW50LnN0eWxlc1Byb2Nlc3Nvci5nZXRSZWxhdGVkU3R5bGVzKGUpKXtuLnNldCh0LHRydWUpfX19fV90ZXN0KHQsZSl7Y29uc3QgaT1KZShlKT9lOltlXTtjb25zdCBuPXRoaXMuX2NvbnN1bWFibGVzW3RdO2Zvcihjb25zdCBlIG9mIGkpe2lmKHQ9PT1cImF0dHJpYnV0ZXNcIiYmKGU9PT1cImNsYXNzXCJ8fGU9PT1cInN0eWxlXCIpKXtjb25zdCB0PWU9PVwiY2xhc3NcIj9cImNsYXNzZXNcIjpcInN0eWxlc1wiO2NvbnN0IGk9dGhpcy5fdGVzdCh0LFsuLi50aGlzLl9jb25zdW1hYmxlc1t0XS5rZXlzKCldKTtpZihpIT09dHJ1ZSl7cmV0dXJuIGl9fWVsc2V7Y29uc3QgdD1uLmdldChlKTtpZih0PT09dW5kZWZpbmVkKXtyZXR1cm4gbnVsbH1pZighdCl7cmV0dXJuIGZhbHNlfX19cmV0dXJuIHRydWV9X2NvbnN1bWUodCxlKXtjb25zdCBpPUplKGUpP2U6W2VdO2NvbnN0IG49dGhpcy5fY29uc3VtYWJsZXNbdF07Zm9yKGNvbnN0IGUgb2YgaSl7aWYodD09PVwiYXR0cmlidXRlc1wiJiYoZT09PVwiY2xhc3NcInx8ZT09PVwic3R5bGVcIikpe2NvbnN0IHQ9ZT09XCJjbGFzc1wiP1wiY2xhc3Nlc1wiOlwic3R5bGVzXCI7dGhpcy5fY29uc3VtZSh0LFsuLi50aGlzLl9jb25zdW1hYmxlc1t0XS5rZXlzKCldKX1lbHNle24uc2V0KGUsZmFsc2UpO2lmKHQ9PVwic3R5bGVzXCIpe2Zvcihjb25zdCB0IG9mIHRoaXMuZWxlbWVudC5kb2N1bWVudC5zdHlsZXNQcm9jZXNzb3IuZ2V0UmVsYXRlZFN0eWxlcyhlKSl7bi5zZXQodCxmYWxzZSl9fX19fV9yZXZlcnQodCxlKXtjb25zdCBpPUplKGUpP2U6W2VdO2NvbnN0IG49dGhpcy5fY29uc3VtYWJsZXNbdF07Zm9yKGNvbnN0IGUgb2YgaSl7aWYodD09PVwiYXR0cmlidXRlc1wiJiYoZT09PVwiY2xhc3NcInx8ZT09PVwic3R5bGVcIikpe2NvbnN0IHQ9ZT09XCJjbGFzc1wiP1wiY2xhc3Nlc1wiOlwic3R5bGVzXCI7dGhpcy5fcmV2ZXJ0KHQsWy4uLnRoaXMuX2NvbnN1bWFibGVzW3RdLmtleXMoKV0pfWVsc2V7Y29uc3QgdD1uLmdldChlKTtpZih0PT09ZmFsc2Upe24uc2V0KGUsdHJ1ZSl9fX19fWNsYXNzIHVne2NvbnN0cnVjdG9yKCl7dGhpcy5fc291cmNlRGVmaW5pdGlvbnM9e307dGhpcy5fYXR0cmlidXRlUHJvcGVydGllcz17fTt0aGlzLmRlY29yYXRlKFwiY2hlY2tDaGlsZFwiKTt0aGlzLmRlY29yYXRlKFwiY2hlY2tBdHRyaWJ1dGVcIik7dGhpcy5vbihcImNoZWNrQXR0cmlidXRlXCIsKHQsZSk9PntlWzBdPW5ldyBoZyhlWzBdKX0se3ByaW9yaXR5OlwiaGlnaGVzdFwifSk7dGhpcy5vbihcImNoZWNrQ2hpbGRcIiwodCxlKT0+e2VbMF09bmV3IGhnKGVbMF0pO2VbMV09dGhpcy5nZXREZWZpbml0aW9uKGVbMV0pfSx7cHJpb3JpdHk6XCJoaWdoZXN0XCJ9KX1yZWdpc3Rlcih0LGUpe2lmKHRoaXMuX3NvdXJjZURlZmluaXRpb25zW3RdKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwic2NoZW1hLWNhbm5vdC1yZWdpc3Rlci1pdGVtLXR3aWNlOiBBIHNpbmdsZSBpdGVtIGNhbm5vdCBiZSByZWdpc3RlcmVkIHR3aWNlIGluIHRoZSBzY2hlbWEuXCIsdGhpcyx7aXRlbU5hbWU6dH0pfXRoaXMuX3NvdXJjZURlZmluaXRpb25zW3RdPVtPYmplY3QuYXNzaWduKHt9LGUpXTt0aGlzLl9jbGVhckNhY2hlKCl9ZXh0ZW5kKHQsZSl7aWYoIXRoaXMuX3NvdXJjZURlZmluaXRpb25zW3RdKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwic2NoZW1hLWNhbm5vdC1leHRlbmQtbWlzc2luZy1pdGVtOiBDYW5ub3QgZXh0ZW5kIGFuIGl0ZW0gd2hpY2ggd2FzIG5vdCByZWdpc3RlcmVkIHlldC5cIix0aGlzLHtpdGVtTmFtZTp0fSl9dGhpcy5fc291cmNlRGVmaW5pdGlvbnNbdF0ucHVzaChPYmplY3QuYXNzaWduKHt9LGUpKTt0aGlzLl9jbGVhckNhY2hlKCl9Z2V0RGVmaW5pdGlvbnMoKXtpZighdGhpcy5fY29tcGlsZWREZWZpbml0aW9ucyl7dGhpcy5fY29tcGlsZSgpfXJldHVybiB0aGlzLl9jb21waWxlZERlZmluaXRpb25zfWdldERlZmluaXRpb24odCl7bGV0IGU7aWYodHlwZW9mIHQ9PVwic3RyaW5nXCIpe2U9dH1lbHNlIGlmKHQuaXMmJih0LmlzKFwidGV4dFwiKXx8dC5pcyhcInRleHRQcm94eVwiKSkpe2U9XCIkdGV4dFwifWVsc2V7ZT10Lm5hbWV9cmV0dXJuIHRoaXMuZ2V0RGVmaW5pdGlvbnMoKVtlXX1pc1JlZ2lzdGVyZWQodCl7cmV0dXJuISF0aGlzLmdldERlZmluaXRpb24odCl9aXNCbG9jayh0KXtjb25zdCBlPXRoaXMuZ2V0RGVmaW5pdGlvbih0KTtyZXR1cm4hIShlJiZlLmlzQmxvY2spfWlzTGltaXQodCl7Y29uc3QgZT10aGlzLmdldERlZmluaXRpb24odCk7aWYoIWUpe3JldHVybiBmYWxzZX1yZXR1cm4hIShlLmlzTGltaXR8fGUuaXNPYmplY3QpfWlzT2JqZWN0KHQpe2NvbnN0IGU9dGhpcy5nZXREZWZpbml0aW9uKHQpO3JldHVybiEhKGUmJmUuaXNPYmplY3QpfWlzSW5saW5lKHQpe2NvbnN0IGU9dGhpcy5nZXREZWZpbml0aW9uKHQpO3JldHVybiEhKGUmJmUuaXNJbmxpbmUpfWNoZWNrQ2hpbGQodCxlKXtpZighZSl7cmV0dXJuIGZhbHNlfXJldHVybiB0aGlzLl9jaGVja0NvbnRleHRNYXRjaChlLHQpfWNoZWNrQXR0cmlidXRlKHQsZSl7Y29uc3QgaT10aGlzLmdldERlZmluaXRpb24odC5sYXN0KTtpZighaSl7cmV0dXJuIGZhbHNlfXJldHVybiBpLmFsbG93QXR0cmlidXRlcy5pbmNsdWRlcyhlKX1jaGVja01lcmdlKHQsZT1udWxsKXtpZih0IGluc3RhbmNlb2YgVWgpe2NvbnN0IGU9dC5ub2RlQmVmb3JlO2NvbnN0IGk9dC5ub2RlQWZ0ZXI7aWYoIShlIGluc3RhbmNlb2YgamgpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwic2NoZW1hLWNoZWNrLW1lcmdlLW5vLWVsZW1lbnQtYmVmb3JlOiBUaGUgbm9kZSBiZWZvcmUgdGhlIG1lcmdlIHBvc2l0aW9uIG11c3QgYmUgYW4gZWxlbWVudC5cIix0aGlzKX1pZighKGkgaW5zdGFuY2VvZiBqaCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJzY2hlbWEtY2hlY2stbWVyZ2Utbm8tZWxlbWVudC1hZnRlcjogVGhlIG5vZGUgYWZ0ZXIgdGhlIG1lcmdlIHBvc2l0aW9uIG11c3QgYmUgYW4gZWxlbWVudC5cIix0aGlzKX1yZXR1cm4gdGhpcy5jaGVja01lcmdlKGUsaSl9Zm9yKGNvbnN0IGkgb2YgZS5nZXRDaGlsZHJlbigpKXtpZighdGhpcy5jaGVja0NoaWxkKHQsaSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9YWRkQ2hpbGRDaGVjayh0KXt0aGlzLm9uKFwiY2hlY2tDaGlsZFwiLChlLFtpLG5dKT0+e2lmKCFuKXtyZXR1cm59Y29uc3Qgbz10KGksbik7aWYodHlwZW9mIG89PVwiYm9vbGVhblwiKXtlLnN0b3AoKTtlLnJldHVybj1vfX0se3ByaW9yaXR5OlwiaGlnaFwifSl9YWRkQXR0cmlidXRlQ2hlY2sodCl7dGhpcy5vbihcImNoZWNrQXR0cmlidXRlXCIsKGUsW2ksbl0pPT57Y29uc3Qgbz10KGksbik7aWYodHlwZW9mIG89PVwiYm9vbGVhblwiKXtlLnN0b3AoKTtlLnJldHVybj1vfX0se3ByaW9yaXR5OlwiaGlnaFwifSl9c2V0QXR0cmlidXRlUHJvcGVydGllcyh0LGUpe3RoaXMuX2F0dHJpYnV0ZVByb3BlcnRpZXNbdF09T2JqZWN0LmFzc2lnbih0aGlzLmdldEF0dHJpYnV0ZVByb3BlcnRpZXModCksZSl9Z2V0QXR0cmlidXRlUHJvcGVydGllcyh0KXtyZXR1cm4gdGhpcy5fYXR0cmlidXRlUHJvcGVydGllc1t0XXx8e319Z2V0TGltaXRFbGVtZW50KHQpe2xldCBlO2lmKHQgaW5zdGFuY2VvZiBVaCl7ZT10LnBhcmVudH1lbHNle2NvbnN0IGk9dCBpbnN0YW5jZW9mICRoP1t0XTpBcnJheS5mcm9tKHQuZ2V0UmFuZ2VzKCkpO2U9aS5yZWR1Y2UoKHQsZSk9Pntjb25zdCBpPWUuZ2V0Q29tbW9uQW5jZXN0b3IoKTtpZighdCl7cmV0dXJuIGl9cmV0dXJuIHQuZ2V0Q29tbW9uQW5jZXN0b3IoaSx7aW5jbHVkZVNlbGY6dHJ1ZX0pfSxudWxsKX13aGlsZSghdGhpcy5pc0xpbWl0KGUpKXtpZihlLnBhcmVudCl7ZT1lLnBhcmVudH1lbHNle2JyZWFrfX1yZXR1cm4gZX1jaGVja0F0dHJpYnV0ZUluU2VsZWN0aW9uKHQsZSl7aWYodC5pc0NvbGxhcHNlZCl7Y29uc3QgaT10LmdldEZpcnN0UG9zaXRpb24oKTtjb25zdCBuPVsuLi5pLmdldEFuY2VzdG9ycygpLG5ldyBMaChcIlwiLHQuZ2V0QXR0cmlidXRlcygpKV07cmV0dXJuIHRoaXMuY2hlY2tBdHRyaWJ1dGUobixlKX1lbHNle2NvbnN0IGk9dC5nZXRSYW5nZXMoKTtmb3IoY29uc3QgdCBvZiBpKXtmb3IoY29uc3QgaSBvZiB0KXtpZih0aGlzLmNoZWNrQXR0cmlidXRlKGkuaXRlbSxlKSl7cmV0dXJuIHRydWV9fX19cmV0dXJuIGZhbHNlfSpnZXRWYWxpZFJhbmdlcyh0LGUpe3Q9UGcodCk7Zm9yKGNvbnN0IGkgb2YgdCl7eWllbGQqdGhpcy5fZ2V0VmFsaWRSYW5nZXNGb3JSYW5nZShpLGUpfX1nZXROZWFyZXN0U2VsZWN0aW9uUmFuZ2UodCxlPVwiYm90aFwiKXtpZih0aGlzLmNoZWNrQ2hpbGQodCxcIiR0ZXh0XCIpKXtyZXR1cm4gbmV3ICRoKHQpfWxldCBpLG47Y29uc3Qgbz10LmdldEFuY2VzdG9ycygpLnJldmVyc2UoKS5maW5kKHQ9PnRoaXMuaXNMaW1pdCh0KSl8fHQucm9vdDtpZihlPT1cImJvdGhcInx8ZT09XCJiYWNrd2FyZFwiKXtpPW5ldyBXaCh7Ym91bmRhcmllczokaC5fY3JlYXRlSW4obyksc3RhcnRQb3NpdGlvbjp0LGRpcmVjdGlvbjpcImJhY2t3YXJkXCJ9KX1pZihlPT1cImJvdGhcInx8ZT09XCJmb3J3YXJkXCIpe249bmV3IFdoKHtib3VuZGFyaWVzOiRoLl9jcmVhdGVJbihvKSxzdGFydFBvc2l0aW9uOnR9KX1mb3IoY29uc3QgdCBvZiBUZyhpLG4pKXtjb25zdCBlPXQud2Fsa2VyPT1pP1wiZWxlbWVudEVuZFwiOlwiZWxlbWVudFN0YXJ0XCI7Y29uc3Qgbj10LnZhbHVlO2lmKG4udHlwZT09ZSYmdGhpcy5pc09iamVjdChuLml0ZW0pKXtyZXR1cm4gJGguX2NyZWF0ZU9uKG4uaXRlbSl9aWYodGhpcy5jaGVja0NoaWxkKG4ubmV4dFBvc2l0aW9uLFwiJHRleHRcIikpe3JldHVybiBuZXcgJGgobi5uZXh0UG9zaXRpb24pfX1yZXR1cm4gbnVsbH1maW5kQWxsb3dlZFBhcmVudCh0LGUpe2xldCBpPXQucGFyZW50O3doaWxlKGkpe2lmKHRoaXMuY2hlY2tDaGlsZChpLGUpKXtyZXR1cm4gaX1pZih0aGlzLmlzTGltaXQoaSkpe3JldHVybiBudWxsfWk9aS5wYXJlbnR9cmV0dXJuIG51bGx9cmVtb3ZlRGlzYWxsb3dlZEF0dHJpYnV0ZXModCxlKXtmb3IoY29uc3QgaSBvZiB0KXtpZihpLmlzKFwidGV4dFwiKSl7U2codGhpcyxpLGUpfWVsc2V7Y29uc3QgdD0kaC5fY3JlYXRlSW4oaSk7Y29uc3Qgbj10LmdldFBvc2l0aW9ucygpO2Zvcihjb25zdCB0IG9mIG4pe2NvbnN0IGk9dC5ub2RlQmVmb3JlfHx0LnBhcmVudDtTZyh0aGlzLGksZSl9fX19Y3JlYXRlQ29udGV4dCh0KXtyZXR1cm4gbmV3IGhnKHQpfV9jbGVhckNhY2hlKCl7dGhpcy5fY29tcGlsZWREZWZpbml0aW9ucz1udWxsfV9jb21waWxlKCl7Y29uc3QgdD17fTtjb25zdCBlPXRoaXMuX3NvdXJjZURlZmluaXRpb25zO2NvbnN0IGk9T2JqZWN0LmtleXMoZSk7Zm9yKGNvbnN0IG4gb2YgaSl7dFtuXT1mZyhlW25dLG4pfWZvcihjb25zdCBlIG9mIGkpe2dnKHQsZSl9Zm9yKGNvbnN0IGUgb2YgaSl7bWcodCxlKX1mb3IoY29uc3QgZSBvZiBpKXtwZyh0LGUpO2JnKHQsZSl9Zm9yKGNvbnN0IGUgb2YgaSl7d2codCxlKTtrZyh0LGUpfXRoaXMuX2NvbXBpbGVkRGVmaW5pdGlvbnM9dH1fY2hlY2tDb250ZXh0TWF0Y2godCxlLGk9ZS5sZW5ndGgtMSl7Y29uc3Qgbj1lLmdldEl0ZW0oaSk7aWYodC5hbGxvd0luLmluY2x1ZGVzKG4ubmFtZSkpe2lmKGk9PTApe3JldHVybiB0cnVlfWVsc2V7Y29uc3QgdD10aGlzLmdldERlZmluaXRpb24obik7cmV0dXJuIHRoaXMuX2NoZWNrQ29udGV4dE1hdGNoKHQsZSxpLTEpfX1lbHNle3JldHVybiBmYWxzZX19Kl9nZXRWYWxpZFJhbmdlc0ZvclJhbmdlKHQsZSl7bGV0IGk9dC5zdGFydDtsZXQgbj10LnN0YXJ0O2Zvcihjb25zdCBvIG9mIHQuZ2V0SXRlbXMoe3NoYWxsb3c6dHJ1ZX0pKXtpZihvLmlzKFwiZWxlbWVudFwiKSl7eWllbGQqdGhpcy5fZ2V0VmFsaWRSYW5nZXNGb3JSYW5nZSgkaC5fY3JlYXRlSW4obyksZSl9aWYoIXRoaXMuY2hlY2tBdHRyaWJ1dGUobyxlKSl7aWYoIWkuaXNFcXVhbChuKSl7eWllbGQgbmV3ICRoKGksbil9aT1VaC5fY3JlYXRlQWZ0ZXIobyl9bj1VaC5fY3JlYXRlQWZ0ZXIobyl9aWYoIWkuaXNFcXVhbChuKSl7eWllbGQgbmV3ICRoKGksbil9fX12cyh1ZyxKYyk7Y2xhc3MgaGd7Y29uc3RydWN0b3IodCl7aWYodCBpbnN0YW5jZW9mIGhnKXtyZXR1cm4gdH1pZih0eXBlb2YgdD09XCJzdHJpbmdcIil7dD1bdF19ZWxzZSBpZighQXJyYXkuaXNBcnJheSh0KSl7dD10LmdldEFuY2VzdG9ycyh7aW5jbHVkZVNlbGY6dHJ1ZX0pfWlmKHRbMF0mJnR5cGVvZiB0WzBdIT1cInN0cmluZ1wiJiZ0WzBdLmlzKFwiZG9jdW1lbnRGcmFnbWVudFwiKSl7dC5zaGlmdCgpfXRoaXMuX2l0ZW1zPXQubWFwKEFnKX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aH1nZXQgbGFzdCgpe3JldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGgtMV19W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5faXRlbXNbU3ltYm9sLml0ZXJhdG9yXSgpfXB1c2godCl7Y29uc3QgZT1uZXcgaGcoW3RdKTtlLl9pdGVtcz1bLi4udGhpcy5faXRlbXMsLi4uZS5faXRlbXNdO3JldHVybiBlfWdldEl0ZW0odCl7cmV0dXJuIHRoaXMuX2l0ZW1zW3RdfSpnZXROYW1lcygpe3lpZWxkKnRoaXMuX2l0ZW1zLm1hcCh0PT50Lm5hbWUpfWVuZHNXaXRoKHQpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuZ2V0TmFtZXMoKSkuam9pbihcIiBcIikuZW5kc1dpdGgodCl9c3RhcnRzV2l0aCh0KXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdldE5hbWVzKCkpLmpvaW4oXCIgXCIpLnN0YXJ0c1dpdGgodCl9fWZ1bmN0aW9uIGZnKHQsZSl7Y29uc3QgaT17bmFtZTplLGFsbG93SW46W10sYWxsb3dDb250ZW50T2Y6W10sYWxsb3dXaGVyZTpbXSxhbGxvd0F0dHJpYnV0ZXM6W10sYWxsb3dBdHRyaWJ1dGVzT2Y6W10saW5oZXJpdFR5cGVzRnJvbTpbXX07X2codCxpKTt2Zyh0LGksXCJhbGxvd0luXCIpO3ZnKHQsaSxcImFsbG93Q29udGVudE9mXCIpO3ZnKHQsaSxcImFsbG93V2hlcmVcIik7dmcodCxpLFwiYWxsb3dBdHRyaWJ1dGVzXCIpO3ZnKHQsaSxcImFsbG93QXR0cmlidXRlc09mXCIpO3ZnKHQsaSxcImluaGVyaXRUeXBlc0Zyb21cIik7eWcodCxpKTtyZXR1cm4gaX1mdW5jdGlvbiBnZyh0LGUpe2Zvcihjb25zdCBpIG9mIHRbZV0uYWxsb3dDb250ZW50T2Ype2lmKHRbaV0pe2NvbnN0IG49eGcodCxpKTtuLmZvckVhY2godD0+e3QuYWxsb3dJbi5wdXNoKGUpfSl9fWRlbGV0ZSB0W2VdLmFsbG93Q29udGVudE9mfWZ1bmN0aW9uIG1nKHQsZSl7Zm9yKGNvbnN0IGkgb2YgdFtlXS5hbGxvd1doZXJlKXtjb25zdCBuPXRbaV07aWYobil7Y29uc3QgaT1uLmFsbG93SW47dFtlXS5hbGxvd0luLnB1c2goLi4uaSl9fWRlbGV0ZSB0W2VdLmFsbG93V2hlcmV9ZnVuY3Rpb24gcGcodCxlKXtmb3IoY29uc3QgaSBvZiB0W2VdLmFsbG93QXR0cmlidXRlc09mKXtjb25zdCBuPXRbaV07aWYobil7Y29uc3QgaT1uLmFsbG93QXR0cmlidXRlczt0W2VdLmFsbG93QXR0cmlidXRlcy5wdXNoKC4uLmkpfX1kZWxldGUgdFtlXS5hbGxvd0F0dHJpYnV0ZXNPZn1mdW5jdGlvbiBiZyh0LGUpe2NvbnN0IGk9dFtlXTtmb3IoY29uc3QgZSBvZiBpLmluaGVyaXRUeXBlc0Zyb20pe2NvbnN0IG49dFtlXTtpZihuKXtjb25zdCB0PU9iamVjdC5rZXlzKG4pLmZpbHRlcih0PT50LnN0YXJ0c1dpdGgoXCJpc1wiKSk7Zm9yKGNvbnN0IGUgb2YgdCl7aWYoIShlIGluIGkpKXtpW2VdPW5bZV19fX19ZGVsZXRlIGkuaW5oZXJpdFR5cGVzRnJvbX1mdW5jdGlvbiB3Zyh0LGUpe2NvbnN0IGk9dFtlXTtjb25zdCBuPWkuYWxsb3dJbi5maWx0ZXIoZT0+dFtlXSk7aS5hbGxvd0luPUFycmF5LmZyb20obmV3IFNldChuKSl9ZnVuY3Rpb24ga2codCxlKXtjb25zdCBpPXRbZV07aS5hbGxvd0F0dHJpYnV0ZXM9QXJyYXkuZnJvbShuZXcgU2V0KGkuYWxsb3dBdHRyaWJ1dGVzKSl9ZnVuY3Rpb24gX2codCxlKXtmb3IoY29uc3QgaSBvZiB0KXtjb25zdCB0PU9iamVjdC5rZXlzKGkpLmZpbHRlcih0PT50LnN0YXJ0c1dpdGgoXCJpc1wiKSk7Zm9yKGNvbnN0IG4gb2YgdCl7ZVtuXT1pW25dfX19ZnVuY3Rpb24gdmcodCxlLGkpe2Zvcihjb25zdCBuIG9mIHQpe2lmKHR5cGVvZiBuW2ldPT1cInN0cmluZ1wiKXtlW2ldLnB1c2gobltpXSl9ZWxzZSBpZihBcnJheS5pc0FycmF5KG5baV0pKXtlW2ldLnB1c2goLi4ubltpXSl9fX1mdW5jdGlvbiB5Zyh0LGUpe2Zvcihjb25zdCBpIG9mIHQpe2NvbnN0IHQ9aS5pbmhlcml0QWxsRnJvbTtpZih0KXtlLmFsbG93Q29udGVudE9mLnB1c2godCk7ZS5hbGxvd1doZXJlLnB1c2godCk7ZS5hbGxvd0F0dHJpYnV0ZXNPZi5wdXNoKHQpO2UuaW5oZXJpdFR5cGVzRnJvbS5wdXNoKHQpfX19ZnVuY3Rpb24geGcodCxlKXtjb25zdCBpPXRbZV07cmV0dXJuIENnKHQpLmZpbHRlcih0PT50LmFsbG93SW4uaW5jbHVkZXMoaS5uYW1lKSl9ZnVuY3Rpb24gQ2codCl7cmV0dXJuIE9iamVjdC5rZXlzKHQpLm1hcChlPT50W2VdKX1mdW5jdGlvbiBBZyh0KXtpZih0eXBlb2YgdD09XCJzdHJpbmdcIil7cmV0dXJue25hbWU6dCwqZ2V0QXR0cmlidXRlS2V5cygpe30sZ2V0QXR0cmlidXRlKCl7fX19ZWxzZXtyZXR1cm57bmFtZTp0LmlzKFwiZWxlbWVudFwiKT90Lm5hbWU6XCIkdGV4dFwiLCpnZXRBdHRyaWJ1dGVLZXlzKCl7eWllbGQqdC5nZXRBdHRyaWJ1dGVLZXlzKCl9LGdldEF0dHJpYnV0ZShlKXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoZSl9fX19ZnVuY3Rpb24qVGcodCxlKXtsZXQgaT1mYWxzZTt3aGlsZSghaSl7aT10cnVlO2lmKHQpe2NvbnN0IGU9dC5uZXh0KCk7aWYoIWUuZG9uZSl7aT1mYWxzZTt5aWVsZHt3YWxrZXI6dCx2YWx1ZTplLnZhbHVlfX19aWYoZSl7Y29uc3QgdD1lLm5leHQoKTtpZighdC5kb25lKXtpPWZhbHNlO3lpZWxke3dhbGtlcjplLHZhbHVlOnQudmFsdWV9fX19fWZ1bmN0aW9uKlBnKHQpe2Zvcihjb25zdCBlIG9mIHQpe3lpZWxkKmUuZ2V0TWluaW1hbEZsYXRSYW5nZXMoKX19ZnVuY3Rpb24gU2codCxlLGkpe2Zvcihjb25zdCBuIG9mIGUuZ2V0QXR0cmlidXRlS2V5cygpKXtpZighdC5jaGVja0F0dHJpYnV0ZShlLG4pKXtpLnJlbW92ZUF0dHJpYnV0ZShuLGUpfX19Y2xhc3MgRWd7Y29uc3RydWN0b3IodD17fSl7dGhpcy5fc3BsaXRQYXJ0cz1uZXcgTWFwO3RoaXMuX21vZGVsQ3Vyc29yPW51bGw7dGhpcy5jb252ZXJzaW9uQXBpPU9iamVjdC5hc3NpZ24oe30sdCk7dGhpcy5jb252ZXJzaW9uQXBpLmNvbnZlcnRJdGVtPXRoaXMuX2NvbnZlcnRJdGVtLmJpbmQodGhpcyk7dGhpcy5jb252ZXJzaW9uQXBpLmNvbnZlcnRDaGlsZHJlbj10aGlzLl9jb252ZXJ0Q2hpbGRyZW4uYmluZCh0aGlzKTt0aGlzLmNvbnZlcnNpb25BcGkuc3BsaXRUb0FsbG93ZWRQYXJlbnQ9dGhpcy5fc3BsaXRUb0FsbG93ZWRQYXJlbnQuYmluZCh0aGlzKTt0aGlzLmNvbnZlcnNpb25BcGkuZ2V0U3BsaXRQYXJ0cz10aGlzLl9nZXRTcGxpdFBhcnRzLmJpbmQodGhpcyl9Y29udmVydCh0LGUsaT1bXCIkcm9vdFwiXSl7dGhpcy5maXJlKFwidmlld0NsZWFudXBcIix0KTt0aGlzLl9tb2RlbEN1cnNvcj1PZyhpLGUpO3RoaXMuY29udmVyc2lvbkFwaS53cml0ZXI9ZTt0aGlzLmNvbnZlcnNpb25BcGkuY29uc3VtYWJsZT1sZy5jcmVhdGVGcm9tKHQpO3RoaXMuY29udmVyc2lvbkFwaS5zdG9yZT17fTtjb25zdHttb2RlbFJhbmdlOm59PXRoaXMuX2NvbnZlcnRJdGVtKHQsdGhpcy5fbW9kZWxDdXJzb3IpO2NvbnN0IG89ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYobil7dGhpcy5fcmVtb3ZlRW1wdHlFbGVtZW50cygpO2Zvcihjb25zdCB0IG9mIEFycmF5LmZyb20odGhpcy5fbW9kZWxDdXJzb3IucGFyZW50LmdldENoaWxkcmVuKCkpKXtlLmFwcGVuZCh0LG8pfW8ubWFya2Vycz1SZyhvLGUpfXRoaXMuX21vZGVsQ3Vyc29yPW51bGw7dGhpcy5fc3BsaXRQYXJ0cy5jbGVhcigpO3RoaXMuY29udmVyc2lvbkFwaS53cml0ZXI9bnVsbDt0aGlzLmNvbnZlcnNpb25BcGkuc3RvcmU9bnVsbDtyZXR1cm4gb31fY29udmVydEl0ZW0odCxlKXtjb25zdCBpPU9iamVjdC5hc3NpZ24oe3ZpZXdJdGVtOnQsbW9kZWxDdXJzb3I6ZSxtb2RlbFJhbmdlOm51bGx9KTtpZih0LmlzKFwiZWxlbWVudFwiKSl7dGhpcy5maXJlKFwiZWxlbWVudDpcIit0Lm5hbWUsaSx0aGlzLmNvbnZlcnNpb25BcGkpfWVsc2UgaWYodC5pcyhcInRleHRcIikpe3RoaXMuZmlyZShcInRleHRcIixpLHRoaXMuY29udmVyc2lvbkFwaSl9ZWxzZXt0aGlzLmZpcmUoXCJkb2N1bWVudEZyYWdtZW50XCIsaSx0aGlzLmNvbnZlcnNpb25BcGkpfWlmKGkubW9kZWxSYW5nZSYmIShpLm1vZGVsUmFuZ2UgaW5zdGFuY2VvZiAkaCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ2aWV3LWNvbnZlcnNpb24tZGlzcGF0Y2hlci1pbmNvcnJlY3QtcmVzdWx0OiBJbmNvcnJlY3QgY29udmVyc2lvbiByZXN1bHQgd2FzIGRyb3BwZWQuXCIsdGhpcyl9cmV0dXJue21vZGVsUmFuZ2U6aS5tb2RlbFJhbmdlLG1vZGVsQ3Vyc29yOmkubW9kZWxDdXJzb3J9fV9jb252ZXJ0Q2hpbGRyZW4odCxlKXtjb25zdCBpPW5ldyAkaChlKTtsZXQgbj1lO2Zvcihjb25zdCBlIG9mIEFycmF5LmZyb20odC5nZXRDaGlsZHJlbigpKSl7Y29uc3QgdD10aGlzLl9jb252ZXJ0SXRlbShlLG4pO2lmKHQubW9kZWxSYW5nZSBpbnN0YW5jZW9mICRoKXtpLmVuZD10Lm1vZGVsUmFuZ2UuZW5kO249dC5tb2RlbEN1cnNvcn19cmV0dXJue21vZGVsUmFuZ2U6aSxtb2RlbEN1cnNvcjpufX1fc3BsaXRUb0FsbG93ZWRQYXJlbnQodCxlKXtjb25zdCBpPXRoaXMuY29udmVyc2lvbkFwaS5zY2hlbWEuZmluZEFsbG93ZWRQYXJlbnQoZSx0KTtpZighaSl7cmV0dXJuIG51bGx9aWYoaT09PWUucGFyZW50KXtyZXR1cm57cG9zaXRpb246ZX19aWYodGhpcy5fbW9kZWxDdXJzb3IucGFyZW50LmdldEFuY2VzdG9ycygpLmluY2x1ZGVzKGkpKXtyZXR1cm4gbnVsbH1jb25zdCBuPXRoaXMuY29udmVyc2lvbkFwaS53cml0ZXIuc3BsaXQoZSxpKTtjb25zdCBvPVtdO2Zvcihjb25zdCB0IG9mIG4ucmFuZ2UuZ2V0V2Fsa2VyKCkpe2lmKHQudHlwZT09XCJlbGVtZW50RW5kXCIpe28ucHVzaCh0Lml0ZW0pfWVsc2V7Y29uc3QgZT1vLnBvcCgpO2NvbnN0IGk9dC5pdGVtO3RoaXMuX3JlZ2lzdGVyU3BsaXRQYWlyKGUsaSl9fXJldHVybntwb3NpdGlvbjpuLnBvc2l0aW9uLGN1cnNvclBhcmVudDpuLnJhbmdlLmVuZC5wYXJlbnR9fV9yZWdpc3RlclNwbGl0UGFpcih0LGUpe2lmKCF0aGlzLl9zcGxpdFBhcnRzLmhhcyh0KSl7dGhpcy5fc3BsaXRQYXJ0cy5zZXQodCxbdF0pfWNvbnN0IGk9dGhpcy5fc3BsaXRQYXJ0cy5nZXQodCk7dGhpcy5fc3BsaXRQYXJ0cy5zZXQoZSxpKTtpLnB1c2goZSl9X2dldFNwbGl0UGFydHModCl7bGV0IGU7aWYoIXRoaXMuX3NwbGl0UGFydHMuaGFzKHQpKXtlPVt0XX1lbHNle2U9dGhpcy5fc3BsaXRQYXJ0cy5nZXQodCl9cmV0dXJuIGV9X3JlbW92ZUVtcHR5RWxlbWVudHMoKXtsZXQgdD1mYWxzZTtmb3IoY29uc3QgZSBvZiB0aGlzLl9zcGxpdFBhcnRzLmtleXMoKSl7aWYoZS5pc0VtcHR5KXt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyLnJlbW92ZShlKTt0aGlzLl9zcGxpdFBhcnRzLmRlbGV0ZShlKTt0PXRydWV9fWlmKHQpe3RoaXMuX3JlbW92ZUVtcHR5RWxlbWVudHMoKX19fXZzKEVnLGRzKTtmdW5jdGlvbiBSZyh0LGUpe2NvbnN0IGk9bmV3IFNldDtjb25zdCBuPW5ldyBNYXA7Y29uc3Qgbz0kaC5fY3JlYXRlSW4odCkuZ2V0SXRlbXMoKTtmb3IoY29uc3QgdCBvZiBvKXtpZih0Lm5hbWU9PVwiJG1hcmtlclwiKXtpLmFkZCh0KX19Zm9yKGNvbnN0IHQgb2YgaSl7Y29uc3QgaT10LmdldEF0dHJpYnV0ZShcImRhdGEtbmFtZVwiKTtjb25zdCBvPWUuY3JlYXRlUG9zaXRpb25CZWZvcmUodCk7aWYoIW4uaGFzKGkpKXtuLnNldChpLG5ldyAkaChvLmNsb25lKCkpKX1lbHNle24uZ2V0KGkpLmVuZD1vLmNsb25lKCl9ZS5yZW1vdmUodCl9cmV0dXJuIG59ZnVuY3Rpb24gT2codCxlKXtsZXQgaTtmb3IoY29uc3QgbiBvZiBuZXcgaGcodCkpe2NvbnN0IHQ9e307Zm9yKGNvbnN0IGUgb2Ygbi5nZXRBdHRyaWJ1dGVLZXlzKCkpe3RbZV09bi5nZXRBdHRyaWJ1dGUoZSl9Y29uc3Qgbz1lLmNyZWF0ZUVsZW1lbnQobi5uYW1lLHQpO2lmKGkpe2UuYXBwZW5kKG8saSl9aT1VaC5fY3JlYXRlQXQobywwKX1yZXR1cm4gaX1jbGFzcyBJZ3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMubW9kZWw9dDt0aGlzLnN0eWxlc1Byb2Nlc3Nvcj1lO3RoaXMucHJvY2Vzc29yO3RoaXMubWFwcGVyPW5ldyBHaDt0aGlzLmRvd25jYXN0RGlzcGF0Y2hlcj1uZXcgWWgoe21hcHBlcjp0aGlzLm1hcHBlcn0pO3RoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwiaW5zZXJ0OiR0ZXh0XCIsX2YoKSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO3RoaXMudXBjYXN0RGlzcGF0Y2hlcj1uZXcgRWcoe3NjaGVtYTp0LnNjaGVtYX0pO3RoaXMudmlld0RvY3VtZW50PW5ldyBwbChlKTt0aGlzLl92aWV3V3JpdGVyPW5ldyAkbCh0aGlzLnZpZXdEb2N1bWVudCk7dGhpcy51cGNhc3REaXNwYXRjaGVyLm9uKFwidGV4dFwiLCRmKCkse3ByaW9yaXR5OlwibG93ZXN0XCJ9KTt0aGlzLnVwY2FzdERpc3BhdGNoZXIub24oXCJlbGVtZW50XCIsVWYoKSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO3RoaXMudXBjYXN0RGlzcGF0Y2hlci5vbihcImRvY3VtZW50RnJhZ21lbnRcIixVZigpLHtwcmlvcml0eTpcImxvd2VzdFwifSk7dGhpcy5kZWNvcmF0ZShcImluaXRcIik7dGhpcy5vbihcImluaXRcIiwoKT0+e3RoaXMuZmlyZShcInJlYWR5XCIpfSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pfWdldCh0KXtjb25zdHtyb290TmFtZTplPVwibWFpblwiLHRyaW06aT1cImVtcHR5XCJ9PXR8fHt9O2lmKCF0aGlzLl9jaGVja0lmUm9vdHNFeGlzdHMoW2VdKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImRhdGFjb250cm9sbGVyLWdldC1ub24tZXhpc3RlbnQtcm9vdDogQXR0ZW1wdGluZyB0byBnZXQgZGF0YSBmcm9tIGEgbm9uLWV4aXN0aW5nIHJvb3QuXCIsdGhpcyl9Y29uc3Qgbj10aGlzLm1vZGVsLmRvY3VtZW50LmdldFJvb3QoZSk7aWYoaT09PVwiZW1wdHlcIiYmIXRoaXMubW9kZWwuaGFzQ29udGVudChuLHtpZ25vcmVXaGl0ZXNwYWNlczp0cnVlfSkpe3JldHVyblwiXCJ9cmV0dXJuIHRoaXMuc3RyaW5naWZ5KG4pfXN0cmluZ2lmeSh0KXtjb25zdCBlPXRoaXMudG9WaWV3KHQpO3JldHVybiB0aGlzLnByb2Nlc3Nvci50b0RhdGEoZSl9dG9WaWV3KHQpe2NvbnN0IGU9dGhpcy52aWV3RG9jdW1lbnQ7Y29uc3QgaT10aGlzLl92aWV3V3JpdGVyO3RoaXMubWFwcGVyLmNsZWFyQmluZGluZ3MoKTtjb25zdCBuPSRoLl9jcmVhdGVJbih0KTtjb25zdCBvPW5ldyBxbChlKTt0aGlzLm1hcHBlci5iaW5kRWxlbWVudHModCxvKTt0aGlzLmRvd25jYXN0RGlzcGF0Y2hlci5jb252ZXJ0SW5zZXJ0KG4saSk7aWYoIXQuaXMoXCJkb2N1bWVudEZyYWdtZW50XCIpKXtjb25zdCBlPVZnKHQpO2Zvcihjb25zdFt0LG5db2YgZSl7dGhpcy5kb3duY2FzdERpc3BhdGNoZXIuY29udmVydE1hcmtlckFkZCh0LG4saSl9fXJldHVybiBvfWluaXQodCl7aWYodGhpcy5tb2RlbC5kb2N1bWVudC52ZXJzaW9uKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiZGF0YWNvbnRyb2xsZXItaW5pdC1kb2N1bWVudC1ub3QtZW1wdHk6IFRyeWluZyB0byBzZXQgaW5pdGlhbCBkYXRhIHRvIG5vdCBlbXB0eSBkb2N1bWVudC5cIix0aGlzKX1sZXQgZT17fTtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe2UubWFpbj10fWVsc2V7ZT10fWlmKCF0aGlzLl9jaGVja0lmUm9vdHNFeGlzdHMoT2JqZWN0LmtleXMoZSkpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiZGF0YWNvbnRyb2xsZXItaW5pdC1ub24tZXhpc3RlbnQtcm9vdDogQXR0ZW1wdGluZyB0byBpbml0IGRhdGEgb24gYSBub24tZXhpc3Rpbmcgcm9vdC5cIix0aGlzKX10aGlzLm1vZGVsLmVucXVldWVDaGFuZ2UoXCJ0cmFuc3BhcmVudFwiLHQ9Pntmb3IoY29uc3QgaSBvZiBPYmplY3Qua2V5cyhlKSl7Y29uc3Qgbj10aGlzLm1vZGVsLmRvY3VtZW50LmdldFJvb3QoaSk7dC5pbnNlcnQodGhpcy5wYXJzZShlW2ldLG4pLG4sMCl9fSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfXNldCh0KXtsZXQgZT17fTtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe2UubWFpbj10fWVsc2V7ZT10fWlmKCF0aGlzLl9jaGVja0lmUm9vdHNFeGlzdHMoT2JqZWN0LmtleXMoZSkpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiZGF0YWNvbnRyb2xsZXItc2V0LW5vbi1leGlzdGVudC1yb290OiBBdHRlbXB0aW5nIHRvIHNldCBkYXRhIG9uIGEgbm9uLWV4aXN0aW5nIHJvb3QuXCIsdGhpcyl9dGhpcy5tb2RlbC5lbnF1ZXVlQ2hhbmdlKFwidHJhbnNwYXJlbnRcIix0PT57dC5zZXRTZWxlY3Rpb24obnVsbCk7dC5yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0QXR0cmlidXRlS2V5cygpKTtmb3IoY29uc3QgaSBvZiBPYmplY3Qua2V5cyhlKSl7Y29uc3Qgbj10aGlzLm1vZGVsLmRvY3VtZW50LmdldFJvb3QoaSk7dC5yZW1vdmUodC5jcmVhdGVSYW5nZUluKG4pKTt0Lmluc2VydCh0aGlzLnBhcnNlKGVbaV0sbiksbiwwKX19KX1wYXJzZSh0LGU9XCIkcm9vdFwiKXtjb25zdCBpPXRoaXMucHJvY2Vzc29yLnRvVmlldyh0KTtyZXR1cm4gdGhpcy50b01vZGVsKGksZSl9dG9Nb2RlbCh0LGU9XCIkcm9vdFwiKXtyZXR1cm4gdGhpcy5tb2RlbC5jaGFuZ2UoaT0+dGhpcy51cGNhc3REaXNwYXRjaGVyLmNvbnZlcnQodCxpLGUpKX1hZGRTdHlsZVByb2Nlc3NvclJ1bGVzKHQpe3QodGhpcy5zdHlsZXNQcm9jZXNzb3IpfWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1fY2hlY2tJZlJvb3RzRXhpc3RzKHQpe2Zvcihjb25zdCBlIG9mIHQpe2lmKCF0aGlzLm1vZGVsLmRvY3VtZW50LmdldFJvb3ROYW1lcygpLmluY2x1ZGVzKGUpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfX12cyhJZyxKYyk7ZnVuY3Rpb24gVmcodCl7Y29uc3QgZT1bXTtjb25zdCBpPXQucm9vdC5kb2N1bWVudDtpZighaSl7cmV0dXJuW119Y29uc3Qgbj0kaC5fY3JlYXRlSW4odCk7Zm9yKGNvbnN0IHQgb2YgaS5tb2RlbC5tYXJrZXJzKXtjb25zdCBpPW4uZ2V0SW50ZXJzZWN0aW9uKHQuZ2V0UmFuZ2UoKSk7aWYoaSl7ZS5wdXNoKFt0Lm5hbWUsaV0pfX1yZXR1cm4gZX1jbGFzcyBOZ3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuX2hlbHBlcnM9bmV3IE1hcDt0aGlzLl9kb3duY2FzdD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO3RoaXMuX2NyZWF0ZUNvbnZlcnNpb25IZWxwZXJzKHtuYW1lOlwiZG93bmNhc3RcIixkaXNwYXRjaGVyczp0aGlzLl9kb3duY2FzdCxpc0Rvd25jYXN0OnRydWV9KTt0aGlzLl91cGNhc3Q9QXJyYXkuaXNBcnJheShlKT9lOltlXTt0aGlzLl9jcmVhdGVDb252ZXJzaW9uSGVscGVycyh7bmFtZTpcInVwY2FzdFwiLGRpc3BhdGNoZXJzOnRoaXMuX3VwY2FzdCxpc0Rvd25jYXN0OmZhbHNlfSl9YWRkQWxpYXModCxlKXtjb25zdCBpPXRoaXMuX2Rvd25jYXN0LmluY2x1ZGVzKGUpO2NvbnN0IG49dGhpcy5fdXBjYXN0LmluY2x1ZGVzKGUpO2lmKCFuJiYhaSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbnZlcnNpb24tYWRkLWFsaWFzLWRpc3BhdGNoZXItbm90LXJlZ2lzdGVyZWQ6IFwiK1wiVHJ5aW5nIHRvIHJlZ2lzdGVyIGFuZCBhbGlhcyBmb3IgYSBkaXNwYXRjaGVyIHRoYXQgbmFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXCIsdGhpcyl9dGhpcy5fY3JlYXRlQ29udmVyc2lvbkhlbHBlcnMoe25hbWU6dCxkaXNwYXRjaGVyczpbZV0saXNEb3duY2FzdDppfSl9Zm9yKHQpe2lmKCF0aGlzLl9oZWxwZXJzLmhhcyh0KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbnZlcnNpb24tZm9yLXVua25vd24tZ3JvdXA6IFRyeWluZyB0byBhZGQgYSBjb252ZXJ0ZXIgdG8gYW4gdW5rbm93biBkaXNwYXRjaGVycyBncm91cC5cIix0aGlzKX1yZXR1cm4gdGhpcy5faGVscGVycy5nZXQodCl9ZWxlbWVudFRvRWxlbWVudCh0KXt0aGlzLmZvcihcImRvd25jYXN0XCIpLmVsZW1lbnRUb0VsZW1lbnQodCk7Zm9yKGNvbnN0e21vZGVsOmUsdmlldzppfW9mIE1nKHQpKXt0aGlzLmZvcihcInVwY2FzdFwiKS5lbGVtZW50VG9FbGVtZW50KHttb2RlbDplLHZpZXc6aSxjb252ZXJ0ZXJQcmlvcml0eTp0LmNvbnZlcnRlclByaW9yaXR5fSl9fWF0dHJpYnV0ZVRvRWxlbWVudCh0KXt0aGlzLmZvcihcImRvd25jYXN0XCIpLmF0dHJpYnV0ZVRvRWxlbWVudCh0KTtmb3IoY29uc3R7bW9kZWw6ZSx2aWV3Oml9b2YgTWcodCkpe3RoaXMuZm9yKFwidXBjYXN0XCIpLmVsZW1lbnRUb0F0dHJpYnV0ZSh7dmlldzppLG1vZGVsOmUsY29udmVydGVyUHJpb3JpdHk6dC5jb252ZXJ0ZXJQcmlvcml0eX0pfX1hdHRyaWJ1dGVUb0F0dHJpYnV0ZSh0KXt0aGlzLmZvcihcImRvd25jYXN0XCIpLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHQpO2Zvcihjb25zdHttb2RlbDplLHZpZXc6aX1vZiBNZyh0KSl7dGhpcy5mb3IoXCJ1cGNhc3RcIikuYXR0cmlidXRlVG9BdHRyaWJ1dGUoe3ZpZXc6aSxtb2RlbDplfSl9fV9jcmVhdGVDb252ZXJzaW9uSGVscGVycyh7bmFtZTp0LGRpc3BhdGNoZXJzOmUsaXNEb3duY2FzdDppfSl7aWYodGhpcy5faGVscGVycy5oYXModCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb252ZXJzaW9uLWdyb3VwLWV4aXN0czogVHJ5aW5nIHRvIHJlZ2lzdGVyIGEgZ3JvdXAgbmFtZSB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZC5cIix0aGlzKX1jb25zdCBuPWk/bmV3IGtmKGUpOm5ldyBxZihlKTt0aGlzLl9oZWxwZXJzLnNldCh0LG4pfX1mdW5jdGlvbipNZyh0KXtpZih0Lm1vZGVsLnZhbHVlcyl7Zm9yKGNvbnN0IGUgb2YgdC5tb2RlbC52YWx1ZXMpe2NvbnN0IGk9e2tleTp0Lm1vZGVsLmtleSx2YWx1ZTplfTtjb25zdCBuPXQudmlld1tlXTtjb25zdCBvPXQudXBjYXN0QWxzbz90LnVwY2FzdEFsc29bZV06dW5kZWZpbmVkO3lpZWxkKkJnKGksbixvKX19ZWxzZXt5aWVsZCpCZyh0Lm1vZGVsLHQudmlldyx0LnVwY2FzdEFsc28pfX1mdW5jdGlvbipCZyh0LGUsaSl7eWllbGR7bW9kZWw6dCx2aWV3OmV9O2lmKGkpe2k9QXJyYXkuaXNBcnJheShpKT9pOltpXTtmb3IoY29uc3QgZSBvZiBpKXt5aWVsZHttb2RlbDp0LHZpZXc6ZX19fX1jbGFzcyB6Z3tjb25zdHJ1Y3Rvcih0PVwiZGVmYXVsdFwiKXt0aGlzLm9wZXJhdGlvbnM9W107dGhpcy50eXBlPXR9Z2V0IGJhc2VWZXJzaW9uKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5vcGVyYXRpb25zKXtpZih0LmJhc2VWZXJzaW9uIT09bnVsbCl7cmV0dXJuIHQuYmFzZVZlcnNpb259fXJldHVybiBudWxsfWFkZE9wZXJhdGlvbih0KXt0LmJhdGNoPXRoaXM7dGhpcy5vcGVyYXRpb25zLnB1c2godCk7cmV0dXJuIHR9fWNsYXNzIExne2NvbnN0cnVjdG9yKHQpe3RoaXMuYmFzZVZlcnNpb249dDt0aGlzLmlzRG9jdW1lbnRPcGVyYXRpb249dGhpcy5iYXNlVmVyc2lvbiE9PW51bGw7dGhpcy5iYXRjaD1udWxsfV92YWxpZGF0ZSgpe310b0pTT04oKXtjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sdGhpcyk7dC5fX2NsYXNzTmFtZT10aGlzLmNvbnN0cnVjdG9yLmNsYXNzTmFtZTtkZWxldGUgdC5iYXRjaDtkZWxldGUgdC5pc0RvY3VtZW50T3BlcmF0aW9uO3JldHVybiB0fXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuXCJPcGVyYXRpb25cIn1zdGF0aWMgZnJvbUpTT04odCl7cmV0dXJuIG5ldyB0aGlzKHQuYmFzZVZlcnNpb24pfX1jbGFzcyBGZ3tjb25zdHJ1Y3Rvcih0KXt0aGlzLm1hcmtlcnM9bmV3IE1hcDt0aGlzLl9jaGlsZHJlbj1uZXcgRGg7aWYodCl7dGhpcy5faW5zZXJ0Q2hpbGQoMCx0KX19W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5nZXRDaGlsZHJlbigpfWdldCBjaGlsZENvdW50KCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmxlbmd0aH1nZXQgbWF4T2Zmc2V0KCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLm1heE9mZnNldH1nZXQgaXNFbXB0eSgpe3JldHVybiB0aGlzLmNoaWxkQ291bnQ9PT0wfWdldCByb290KCl7cmV0dXJuIHRoaXN9Z2V0IHBhcmVudCgpe3JldHVybiBudWxsfWlzKHQpe3JldHVybiB0PT1cImRvY3VtZW50RnJhZ21lbnRcInx8dD09XCJtb2RlbDpkb2N1bWVudEZyYWdtZW50XCJ9Z2V0Q2hpbGQodCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmdldE5vZGUodCl9Z2V0Q2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5bU3ltYm9sLml0ZXJhdG9yXSgpfWdldENoaWxkSW5kZXgodCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmdldE5vZGVJbmRleCh0KX1nZXRDaGlsZFN0YXJ0T2Zmc2V0KHQpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5nZXROb2RlU3RhcnRPZmZzZXQodCl9Z2V0UGF0aCgpe3JldHVybltdfWdldE5vZGVCeVBhdGgodCl7bGV0IGU9dGhpcztmb3IoY29uc3QgaSBvZiB0KXtlPWUuZ2V0Q2hpbGQoZS5vZmZzZXRUb0luZGV4KGkpKX1yZXR1cm4gZX1vZmZzZXRUb0luZGV4KHQpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5vZmZzZXRUb0luZGV4KHQpfXRvSlNPTigpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IGUgb2YgdGhpcy5fY2hpbGRyZW4pe3QucHVzaChlLnRvSlNPTigpKX1yZXR1cm4gdH1zdGF0aWMgZnJvbUpTT04odCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgaSBvZiB0KXtpZihpLm5hbWUpe2UucHVzaChqaC5mcm9tSlNPTihpKSl9ZWxzZXtlLnB1c2goTGguZnJvbUpTT04oaSkpfX1yZXR1cm4gbmV3IEZnKGUpfV9hcHBlbmRDaGlsZCh0KXt0aGlzLl9pbnNlcnRDaGlsZCh0aGlzLmNoaWxkQ291bnQsdCl9X2luc2VydENoaWxkKHQsZSl7Y29uc3QgaT1EZyhlKTtmb3IoY29uc3QgdCBvZiBpKXtpZih0LnBhcmVudCE9PW51bGwpe3QuX3JlbW92ZSgpfXQucGFyZW50PXRoaXN9dGhpcy5fY2hpbGRyZW4uX2luc2VydE5vZGVzKHQsaSl9X3JlbW92ZUNoaWxkcmVuKHQsZT0xKXtjb25zdCBpPXRoaXMuX2NoaWxkcmVuLl9yZW1vdmVOb2Rlcyh0LGUpO2Zvcihjb25zdCB0IG9mIGkpe3QucGFyZW50PW51bGx9cmV0dXJuIGl9fWZ1bmN0aW9uIERnKHQpe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXtyZXR1cm5bbmV3IExoKHQpXX1pZighanModCkpe3Q9W3RdfXJldHVybiBBcnJheS5mcm9tKHQpLm1hcCh0PT57aWYodHlwZW9mIHQ9PVwic3RyaW5nXCIpe3JldHVybiBuZXcgTGgodCl9aWYodCBpbnN0YW5jZW9mIEZoKXtyZXR1cm4gbmV3IExoKHQuZGF0YSx0LmdldEF0dHJpYnV0ZXMoKSl9cmV0dXJuIHR9KX1mdW5jdGlvbiBqZyh0LGUpe2U9VWcoZSk7Y29uc3QgaT1lLnJlZHVjZSgodCxlKT0+dCtlLm9mZnNldFNpemUsMCk7Y29uc3Qgbj10LnBhcmVudDtHZyh0KTtjb25zdCBvPXQuaW5kZXg7bi5faW5zZXJ0Q2hpbGQobyxlKTskZyhuLG8rZS5sZW5ndGgpOyRnKG4sbyk7cmV0dXJuIG5ldyAkaCh0LHQuZ2V0U2hpZnRlZEJ5KGkpKX1mdW5jdGlvbiBIZyh0KXtpZighdC5pc0ZsYXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJvcGVyYXRpb24tdXRpbHMtcmVtb3ZlLXJhbmdlLW5vdC1mbGF0OiBcIitcIlRyeWluZyB0byByZW1vdmUgYSByYW5nZSB3aGljaCBzdGFydHMgYW5kIGVuZHMgaW4gZGlmZmVyZW50IGVsZW1lbnQuXCIsdGhpcyl9Y29uc3QgZT10LnN0YXJ0LnBhcmVudDtHZyh0LnN0YXJ0KTtHZyh0LmVuZCk7Y29uc3QgaT1lLl9yZW1vdmVDaGlsZHJlbih0LnN0YXJ0LmluZGV4LHQuZW5kLmluZGV4LXQuc3RhcnQuaW5kZXgpOyRnKGUsdC5zdGFydC5pbmRleCk7cmV0dXJuIGl9ZnVuY3Rpb24gV2codCxlKXtpZighdC5pc0ZsYXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJvcGVyYXRpb24tdXRpbHMtbW92ZS1yYW5nZS1ub3QtZmxhdDogXCIrXCJUcnlpbmcgdG8gbW92ZSBhIHJhbmdlIHdoaWNoIHN0YXJ0cyBhbmQgZW5kcyBpbiBkaWZmZXJlbnQgZWxlbWVudC5cIix0aGlzKX1jb25zdCBpPUhnKHQpO2U9ZS5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKHQuc3RhcnQsdC5lbmQub2Zmc2V0LXQuc3RhcnQub2Zmc2V0KTtyZXR1cm4gamcoZSxpKX1mdW5jdGlvbiBxZyh0LGUsaSl7R2codC5zdGFydCk7R2codC5lbmQpO2Zvcihjb25zdCBuIG9mIHQuZ2V0SXRlbXMoe3NoYWxsb3c6dHJ1ZX0pKXtjb25zdCB0PW4uaXMoXCJ0ZXh0UHJveHlcIik/bi50ZXh0Tm9kZTpuO2lmKGkhPT1udWxsKXt0Ll9zZXRBdHRyaWJ1dGUoZSxpKX1lbHNle3QuX3JlbW92ZUF0dHJpYnV0ZShlKX0kZyh0LnBhcmVudCx0LmluZGV4KX0kZyh0LmVuZC5wYXJlbnQsdC5lbmQuaW5kZXgpfWZ1bmN0aW9uIFVnKHQpe2NvbnN0IGU9W107aWYoISh0IGluc3RhbmNlb2YgQXJyYXkpKXt0PVt0XX1mb3IobGV0IGk9MDtpPHQubGVuZ3RoO2krKyl7aWYodHlwZW9mIHRbaV09PVwic3RyaW5nXCIpe2UucHVzaChuZXcgTGgodFtpXSkpfWVsc2UgaWYodFtpXWluc3RhbmNlb2YgRmgpe2UucHVzaChuZXcgTGgodFtpXS5kYXRhLHRbaV0uZ2V0QXR0cmlidXRlcygpKSl9ZWxzZSBpZih0W2ldaW5zdGFuY2VvZiBGZ3x8dFtpXWluc3RhbmNlb2YgRGgpe2Zvcihjb25zdCBuIG9mIHRbaV0pe2UucHVzaChuKX19ZWxzZSBpZih0W2ldaW5zdGFuY2VvZiB6aCl7ZS5wdXNoKHRbaV0pfX1mb3IobGV0IHQ9MTt0PGUubGVuZ3RoO3QrKyl7Y29uc3QgaT1lW3RdO2NvbnN0IG49ZVt0LTFdO2lmKGkgaW5zdGFuY2VvZiBMaCYmbiBpbnN0YW5jZW9mIExoJiZLZyhpLG4pKXtlLnNwbGljZSh0LTEsMixuZXcgTGgobi5kYXRhK2kuZGF0YSxuLmdldEF0dHJpYnV0ZXMoKSkpO3QtLX19cmV0dXJuIGV9ZnVuY3Rpb24gJGcodCxlKXtjb25zdCBpPXQuZ2V0Q2hpbGQoZS0xKTtjb25zdCBuPXQuZ2V0Q2hpbGQoZSk7aWYoaSYmbiYmaS5pcyhcInRleHRcIikmJm4uaXMoXCJ0ZXh0XCIpJiZLZyhpLG4pKXtjb25zdCBvPW5ldyBMaChpLmRhdGErbi5kYXRhLGkuZ2V0QXR0cmlidXRlcygpKTt0Ll9yZW1vdmVDaGlsZHJlbihlLTEsMik7dC5faW5zZXJ0Q2hpbGQoZS0xLG8pfX1mdW5jdGlvbiBHZyh0KXtjb25zdCBlPXQudGV4dE5vZGU7Y29uc3QgaT10LnBhcmVudDtpZihlKXtjb25zdCBuPXQub2Zmc2V0LWUuc3RhcnRPZmZzZXQ7Y29uc3Qgbz1lLmluZGV4O2kuX3JlbW92ZUNoaWxkcmVuKG8sMSk7Y29uc3Qgcj1uZXcgTGgoZS5kYXRhLnN1YnN0cigwLG4pLGUuZ2V0QXR0cmlidXRlcygpKTtjb25zdCBzPW5ldyBMaChlLmRhdGEuc3Vic3RyKG4pLGUuZ2V0QXR0cmlidXRlcygpKTtpLl9pbnNlcnRDaGlsZChvLFtyLHNdKX19ZnVuY3Rpb24gS2codCxlKXtjb25zdCBpPXQuZ2V0QXR0cmlidXRlcygpO2NvbnN0IG49ZS5nZXRBdHRyaWJ1dGVzKCk7Zm9yKGNvbnN0IHQgb2YgaSl7aWYodFsxXSE9PWUuZ2V0QXR0cmlidXRlKHRbMF0pKXtyZXR1cm4gZmFsc2V9bi5uZXh0KCl9cmV0dXJuIG4ubmV4dCgpLmRvbmV9ZnVuY3Rpb24gSmcodCxlKXtyZXR1cm4gcXUodCxlKX12YXIgWWc9Smc7Y2xhc3MgUWcgZXh0ZW5kcyBMZ3tjb25zdHJ1Y3Rvcih0LGUsaSxuLG8pe3N1cGVyKG8pO3RoaXMucmFuZ2U9dC5jbG9uZSgpO3RoaXMua2V5PWU7dGhpcy5vbGRWYWx1ZT1pPT09dW5kZWZpbmVkP251bGw6aTt0aGlzLm5ld1ZhbHVlPW49PT11bmRlZmluZWQ/bnVsbDpufWdldCB0eXBlKCl7aWYodGhpcy5vbGRWYWx1ZT09PW51bGwpe3JldHVyblwiYWRkQXR0cmlidXRlXCJ9ZWxzZSBpZih0aGlzLm5ld1ZhbHVlPT09bnVsbCl7cmV0dXJuXCJyZW1vdmVBdHRyaWJ1dGVcIn1lbHNle3JldHVyblwiY2hhbmdlQXR0cmlidXRlXCJ9fWNsb25lKCl7cmV0dXJuIG5ldyBRZyh0aGlzLnJhbmdlLHRoaXMua2V5LHRoaXMub2xkVmFsdWUsdGhpcy5uZXdWYWx1ZSx0aGlzLmJhc2VWZXJzaW9uKX1nZXRSZXZlcnNlZCgpe3JldHVybiBuZXcgUWcodGhpcy5yYW5nZSx0aGlzLmtleSx0aGlzLm5ld1ZhbHVlLHRoaXMub2xkVmFsdWUsdGhpcy5iYXNlVmVyc2lvbisxKX10b0pTT04oKXtjb25zdCB0PXN1cGVyLnRvSlNPTigpO3QucmFuZ2U9dGhpcy5yYW5nZS50b0pTT04oKTtyZXR1cm4gdH1fdmFsaWRhdGUoKXtpZighdGhpcy5yYW5nZS5pc0ZsYXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJhdHRyaWJ1dGUtb3BlcmF0aW9uLXJhbmdlLW5vdC1mbGF0OiBUaGUgcmFuZ2UgdG8gY2hhbmdlIGlzIG5vdCBmbGF0LlwiLHRoaXMpfWZvcihjb25zdCB0IG9mIHRoaXMucmFuZ2UuZ2V0SXRlbXMoe3NoYWxsb3c6dHJ1ZX0pKXtpZih0aGlzLm9sZFZhbHVlIT09bnVsbCYmIVlnKHQuZ2V0QXR0cmlidXRlKHRoaXMua2V5KSx0aGlzLm9sZFZhbHVlKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImF0dHJpYnV0ZS1vcGVyYXRpb24td3Jvbmctb2xkLXZhbHVlOiBDaGFuZ2VkIG5vZGUgaGFzIGRpZmZlcmVudCBhdHRyaWJ1dGUgdmFsdWUgdGhhbiBvcGVyYXRpb24ncyBcIitcIm9sZCBhdHRyaWJ1dGUgdmFsdWUuXCIsdGhpcyx7aXRlbTp0LGtleTp0aGlzLmtleSx2YWx1ZTp0aGlzLm9sZFZhbHVlfSl9aWYodGhpcy5vbGRWYWx1ZT09PW51bGwmJnRoaXMubmV3VmFsdWUhPT1udWxsJiZ0Lmhhc0F0dHJpYnV0ZSh0aGlzLmtleSkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJhdHRyaWJ1dGUtb3BlcmF0aW9uLWF0dHJpYnV0ZS1leGlzdHM6IFRoZSBhdHRyaWJ1dGUgd2l0aCBnaXZlbiBrZXkgYWxyZWFkeSBleGlzdHMuXCIsdGhpcyx7bm9kZTp0LGtleTp0aGlzLmtleX0pfX19X2V4ZWN1dGUoKXtpZighWWcodGhpcy5vbGRWYWx1ZSx0aGlzLm5ld1ZhbHVlKSl7cWcodGhpcy5yYW5nZSx0aGlzLmtleSx0aGlzLm5ld1ZhbHVlKX19c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm5cIkF0dHJpYnV0ZU9wZXJhdGlvblwifXN0YXRpYyBmcm9tSlNPTih0LGUpe3JldHVybiBuZXcgUWcoJGguZnJvbUpTT04odC5yYW5nZSxlKSx0LmtleSx0Lm9sZFZhbHVlLHQubmV3VmFsdWUsdC5iYXNlVmVyc2lvbil9fWNsYXNzIFhnIGV4dGVuZHMgTGd7Y29uc3RydWN0b3IodCxlKXtzdXBlcihudWxsKTt0aGlzLnNvdXJjZVBvc2l0aW9uPXQuY2xvbmUoKTt0aGlzLmhvd01hbnk9ZX1nZXQgdHlwZSgpe3JldHVyblwiZGV0YWNoXCJ9dG9KU09OKCl7Y29uc3QgdD1zdXBlci50b0pTT04oKTt0LnNvdXJjZVBvc2l0aW9uPXRoaXMuc291cmNlUG9zaXRpb24udG9KU09OKCk7cmV0dXJuIHR9X3ZhbGlkYXRlKCl7aWYodGhpcy5zb3VyY2VQb3NpdGlvbi5yb290LmRvY3VtZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiZGV0YWNoLW9wZXJhdGlvbi1vbi1kb2N1bWVudC1ub2RlOiBDYW5ub3QgZGV0YWNoIGRvY3VtZW50IG5vZGUuXCIsdGhpcyl9fV9leGVjdXRlKCl7SGcoJGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KHRoaXMuc291cmNlUG9zaXRpb24sdGhpcy5ob3dNYW55KSl9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm5cIkRldGFjaE9wZXJhdGlvblwifX1jbGFzcyBaZyBleHRlbmRzIExne2NvbnN0cnVjdG9yKHQsZSxpLG4pe3N1cGVyKG4pO3RoaXMuc291cmNlUG9zaXRpb249dC5jbG9uZSgpO3RoaXMuc291cmNlUG9zaXRpb24uc3RpY2tpbmVzcz1cInRvTmV4dFwiO3RoaXMuaG93TWFueT1lO3RoaXMudGFyZ2V0UG9zaXRpb249aS5jbG9uZSgpO3RoaXMudGFyZ2V0UG9zaXRpb24uc3RpY2tpbmVzcz1cInRvTm9uZVwifWdldCB0eXBlKCl7aWYodGhpcy50YXJnZXRQb3NpdGlvbi5yb290LnJvb3ROYW1lPT1cIiRncmF2ZXlhcmRcIil7cmV0dXJuXCJyZW1vdmVcIn1lbHNlIGlmKHRoaXMuc291cmNlUG9zaXRpb24ucm9vdC5yb290TmFtZT09XCIkZ3JhdmV5YXJkXCIpe3JldHVyblwicmVpbnNlcnRcIn1yZXR1cm5cIm1vdmVcIn1jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnNvdXJjZVBvc2l0aW9uLHRoaXMuaG93TWFueSx0aGlzLnRhcmdldFBvc2l0aW9uLHRoaXMuYmFzZVZlcnNpb24pfWdldE1vdmVkUmFuZ2VTdGFydCgpe3JldHVybiB0aGlzLnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odGhpcy5zb3VyY2VQb3NpdGlvbix0aGlzLmhvd01hbnkpfWdldFJldmVyc2VkKCl7Y29uc3QgdD10aGlzLnNvdXJjZVBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHRoaXMudGFyZ2V0UG9zaXRpb24sdGhpcy5ob3dNYW55KTtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZXRNb3ZlZFJhbmdlU3RhcnQoKSx0aGlzLmhvd01hbnksdCx0aGlzLmJhc2VWZXJzaW9uKzEpfV92YWxpZGF0ZSgpe2NvbnN0IHQ9dGhpcy5zb3VyY2VQb3NpdGlvbi5wYXJlbnQ7Y29uc3QgZT10aGlzLnRhcmdldFBvc2l0aW9uLnBhcmVudDtjb25zdCBpPXRoaXMuc291cmNlUG9zaXRpb24ub2Zmc2V0O2NvbnN0IG49dGhpcy50YXJnZXRQb3NpdGlvbi5vZmZzZXQ7aWYoaSt0aGlzLmhvd01hbnk+dC5tYXhPZmZzZXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb3ZlLW9wZXJhdGlvbi1ub2Rlcy1kby1ub3QtZXhpc3Q6IFRoZSBub2RlcyB3aGljaCBzaG91bGQgYmUgbW92ZWQgZG8gbm90IGV4aXN0LlwiLHRoaXMpfWVsc2UgaWYodD09PWUmJmk8biYmbjxpK3RoaXMuaG93TWFueSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vdmUtb3BlcmF0aW9uLXJhbmdlLWludG8taXRzZWxmOiBUcnlpbmcgdG8gbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHRvIHRoZSBpbnNpZGUgb2YgdGhhdCByYW5nZS5cIix0aGlzKX1lbHNlIGlmKHRoaXMuc291cmNlUG9zaXRpb24ucm9vdD09dGhpcy50YXJnZXRQb3NpdGlvbi5yb290KXtpZihWcyh0aGlzLnNvdXJjZVBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSx0aGlzLnRhcmdldFBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSk9PVwicHJlZml4XCIpe2NvbnN0IHQ9dGhpcy5zb3VyY2VQb3NpdGlvbi5wYXRoLmxlbmd0aC0xO2lmKHRoaXMudGFyZ2V0UG9zaXRpb24ucGF0aFt0XT49aSYmdGhpcy50YXJnZXRQb3NpdGlvbi5wYXRoW3RdPGkrdGhpcy5ob3dNYW55KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW92ZS1vcGVyYXRpb24tbm9kZS1pbnRvLWl0c2VsZjogVHJ5aW5nIHRvIG1vdmUgYSByYW5nZSBvZiBub2RlcyBpbnRvIG9uZSBvZiBub2RlcyBmcm9tIHRoYXQgcmFuZ2UuXCIsdGhpcyl9fX19X2V4ZWN1dGUoKXtXZygkaC5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodGhpcy5zb3VyY2VQb3NpdGlvbix0aGlzLmhvd01hbnkpLHRoaXMudGFyZ2V0UG9zaXRpb24pfXRvSlNPTigpe2NvbnN0IHQ9c3VwZXIudG9KU09OKCk7dC5zb3VyY2VQb3NpdGlvbj10aGlzLnNvdXJjZVBvc2l0aW9uLnRvSlNPTigpO3QudGFyZ2V0UG9zaXRpb249dGhpcy50YXJnZXRQb3NpdGlvbi50b0pTT04oKTtyZXR1cm4gdH1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVyblwiTW92ZU9wZXJhdGlvblwifXN0YXRpYyBmcm9tSlNPTih0LGUpe2NvbnN0IGk9VWguZnJvbUpTT04odC5zb3VyY2VQb3NpdGlvbixlKTtjb25zdCBuPVVoLmZyb21KU09OKHQudGFyZ2V0UG9zaXRpb24sZSk7cmV0dXJuIG5ldyB0aGlzKGksdC5ob3dNYW55LG4sdC5iYXNlVmVyc2lvbil9fWNsYXNzIHRtIGV4dGVuZHMgTGd7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKGkpO3RoaXMucG9zaXRpb249dC5jbG9uZSgpO3RoaXMucG9zaXRpb24uc3RpY2tpbmVzcz1cInRvTm9uZVwiO3RoaXMubm9kZXM9bmV3IERoKFVnKGUpKTt0aGlzLnNob3VsZFJlY2VpdmVBdHRyaWJ1dGVzPWZhbHNlfWdldCB0eXBlKCl7cmV0dXJuXCJpbnNlcnRcIn1nZXQgaG93TWFueSgpe3JldHVybiB0aGlzLm5vZGVzLm1heE9mZnNldH1jbG9uZSgpe2NvbnN0IHQ9bmV3IERoKFsuLi50aGlzLm5vZGVzXS5tYXAodD0+dC5fY2xvbmUodHJ1ZSkpKTtjb25zdCBlPW5ldyB0bSh0aGlzLnBvc2l0aW9uLHQsdGhpcy5iYXNlVmVyc2lvbik7ZS5zaG91bGRSZWNlaXZlQXR0cmlidXRlcz10aGlzLnNob3VsZFJlY2VpdmVBdHRyaWJ1dGVzO3JldHVybiBlfWdldFJldmVyc2VkKCl7Y29uc3QgdD10aGlzLnBvc2l0aW9uLnJvb3QuZG9jdW1lbnQuZ3JhdmV5YXJkO2NvbnN0IGU9bmV3IFVoKHQsWzBdKTtyZXR1cm4gbmV3IFpnKHRoaXMucG9zaXRpb24sdGhpcy5ub2Rlcy5tYXhPZmZzZXQsZSx0aGlzLmJhc2VWZXJzaW9uKzEpfV92YWxpZGF0ZSgpe2NvbnN0IHQ9dGhpcy5wb3NpdGlvbi5wYXJlbnQ7aWYoIXR8fHQubWF4T2Zmc2V0PHRoaXMucG9zaXRpb24ub2Zmc2V0KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiaW5zZXJ0LW9wZXJhdGlvbi1wb3NpdGlvbi1pbnZhbGlkOiBJbnNlcnRpb24gcG9zaXRpb24gaXMgaW52YWxpZC5cIix0aGlzKX19X2V4ZWN1dGUoKXtjb25zdCB0PXRoaXMubm9kZXM7dGhpcy5ub2Rlcz1uZXcgRGgoWy4uLnRdLm1hcCh0PT50Ll9jbG9uZSh0cnVlKSkpO2pnKHRoaXMucG9zaXRpb24sdCl9dG9KU09OKCl7Y29uc3QgdD1zdXBlci50b0pTT04oKTt0LnBvc2l0aW9uPXRoaXMucG9zaXRpb24udG9KU09OKCk7dC5ub2Rlcz10aGlzLm5vZGVzLnRvSlNPTigpO3JldHVybiB0fXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuXCJJbnNlcnRPcGVyYXRpb25cIn1zdGF0aWMgZnJvbUpTT04odCxlKXtjb25zdCBpPVtdO2Zvcihjb25zdCBlIG9mIHQubm9kZXMpe2lmKGUubmFtZSl7aS5wdXNoKGpoLmZyb21KU09OKGUpKX1lbHNle2kucHVzaChMaC5mcm9tSlNPTihlKSl9fWNvbnN0IG49bmV3IHRtKFVoLmZyb21KU09OKHQucG9zaXRpb24sZSksaSx0LmJhc2VWZXJzaW9uKTtuLnNob3VsZFJlY2VpdmVBdHRyaWJ1dGVzPXQuc2hvdWxkUmVjZWl2ZUF0dHJpYnV0ZXM7cmV0dXJuIG59fWNsYXNzIGVtIGV4dGVuZHMgTGd7Y29uc3RydWN0b3IodCxlLGksbixvLHIpe3N1cGVyKHIpO3RoaXMubmFtZT10O3RoaXMub2xkUmFuZ2U9ZT9lLmNsb25lKCk6bnVsbDt0aGlzLm5ld1JhbmdlPWk/aS5jbG9uZSgpOm51bGw7dGhpcy5hZmZlY3RzRGF0YT1vO3RoaXMuX21hcmtlcnM9bn1nZXQgdHlwZSgpe3JldHVyblwibWFya2VyXCJ9Y2xvbmUoKXtyZXR1cm4gbmV3IGVtKHRoaXMubmFtZSx0aGlzLm9sZFJhbmdlLHRoaXMubmV3UmFuZ2UsdGhpcy5fbWFya2Vycyx0aGlzLmFmZmVjdHNEYXRhLHRoaXMuYmFzZVZlcnNpb24pfWdldFJldmVyc2VkKCl7cmV0dXJuIG5ldyBlbSh0aGlzLm5hbWUsdGhpcy5uZXdSYW5nZSx0aGlzLm9sZFJhbmdlLHRoaXMuX21hcmtlcnMsdGhpcy5hZmZlY3RzRGF0YSx0aGlzLmJhc2VWZXJzaW9uKzEpfV9leGVjdXRlKCl7Y29uc3QgdD10aGlzLm5ld1JhbmdlP1wiX3NldFwiOlwiX3JlbW92ZVwiO3RoaXMuX21hcmtlcnNbdF0odGhpcy5uYW1lLHRoaXMubmV3UmFuZ2UsdHJ1ZSx0aGlzLmFmZmVjdHNEYXRhKX10b0pTT04oKXtjb25zdCB0PXN1cGVyLnRvSlNPTigpO2lmKHRoaXMub2xkUmFuZ2Upe3Qub2xkUmFuZ2U9dGhpcy5vbGRSYW5nZS50b0pTT04oKX1pZih0aGlzLm5ld1JhbmdlKXt0Lm5ld1JhbmdlPXRoaXMubmV3UmFuZ2UudG9KU09OKCl9ZGVsZXRlIHQuX21hcmtlcnM7cmV0dXJuIHR9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm5cIk1hcmtlck9wZXJhdGlvblwifXN0YXRpYyBmcm9tSlNPTih0LGUpe3JldHVybiBuZXcgZW0odC5uYW1lLHQub2xkUmFuZ2U/JGguZnJvbUpTT04odC5vbGRSYW5nZSxlKTpudWxsLHQubmV3UmFuZ2U/JGguZnJvbUpTT04odC5uZXdSYW5nZSxlKTpudWxsLGUubW9kZWwubWFya2Vycyx0LmFmZmVjdHNEYXRhLHQuYmFzZVZlcnNpb24pfX1jbGFzcyBpbSBleHRlbmRzIExne2NvbnN0cnVjdG9yKHQsZSxpLG4pe3N1cGVyKG4pO3RoaXMucG9zaXRpb249dDt0aGlzLnBvc2l0aW9uLnN0aWNraW5lc3M9XCJ0b05leHRcIjt0aGlzLm9sZE5hbWU9ZTt0aGlzLm5ld05hbWU9aX1nZXQgdHlwZSgpe3JldHVyblwicmVuYW1lXCJ9Y2xvbmUoKXtyZXR1cm4gbmV3IGltKHRoaXMucG9zaXRpb24uY2xvbmUoKSx0aGlzLm9sZE5hbWUsdGhpcy5uZXdOYW1lLHRoaXMuYmFzZVZlcnNpb24pfWdldFJldmVyc2VkKCl7cmV0dXJuIG5ldyBpbSh0aGlzLnBvc2l0aW9uLmNsb25lKCksdGhpcy5uZXdOYW1lLHRoaXMub2xkTmFtZSx0aGlzLmJhc2VWZXJzaW9uKzEpfV92YWxpZGF0ZSgpe2NvbnN0IHQ9dGhpcy5wb3NpdGlvbi5ub2RlQWZ0ZXI7aWYoISh0IGluc3RhbmNlb2YgamgpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwicmVuYW1lLW9wZXJhdGlvbi13cm9uZy1wb3NpdGlvbjogR2l2ZW4gcG9zaXRpb24gaXMgaW52YWxpZCBvciBub2RlIGFmdGVyIGl0IGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBFbGVtZW50LlwiLHRoaXMpfWVsc2UgaWYodC5uYW1lIT09dGhpcy5vbGROYW1lKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwicmVuYW1lLW9wZXJhdGlvbi13cm9uZy1uYW1lOiBFbGVtZW50IHRvIGNoYW5nZSBoYXMgZGlmZmVyZW50IG5hbWUgdGhhbiBvcGVyYXRpb24ncyBvbGQgbmFtZS5cIix0aGlzKX19X2V4ZWN1dGUoKXtjb25zdCB0PXRoaXMucG9zaXRpb24ubm9kZUFmdGVyO3QubmFtZT10aGlzLm5ld05hbWV9dG9KU09OKCl7Y29uc3QgdD1zdXBlci50b0pTT04oKTt0LnBvc2l0aW9uPXRoaXMucG9zaXRpb24udG9KU09OKCk7cmV0dXJuIHR9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm5cIlJlbmFtZU9wZXJhdGlvblwifXN0YXRpYyBmcm9tSlNPTih0LGUpe3JldHVybiBuZXcgaW0oVWguZnJvbUpTT04odC5wb3NpdGlvbixlKSx0Lm9sZE5hbWUsdC5uZXdOYW1lLHQuYmFzZVZlcnNpb24pfX1jbGFzcyBubSBleHRlbmRzIExne2NvbnN0cnVjdG9yKHQsZSxpLG4sbyl7c3VwZXIobyk7dGhpcy5yb290PXQ7dGhpcy5rZXk9ZTt0aGlzLm9sZFZhbHVlPWk7dGhpcy5uZXdWYWx1ZT1ufWdldCB0eXBlKCl7aWYodGhpcy5vbGRWYWx1ZT09PW51bGwpe3JldHVyblwiYWRkUm9vdEF0dHJpYnV0ZVwifWVsc2UgaWYodGhpcy5uZXdWYWx1ZT09PW51bGwpe3JldHVyblwicmVtb3ZlUm9vdEF0dHJpYnV0ZVwifWVsc2V7cmV0dXJuXCJjaGFuZ2VSb290QXR0cmlidXRlXCJ9fWNsb25lKCl7cmV0dXJuIG5ldyBubSh0aGlzLnJvb3QsdGhpcy5rZXksdGhpcy5vbGRWYWx1ZSx0aGlzLm5ld1ZhbHVlLHRoaXMuYmFzZVZlcnNpb24pfWdldFJldmVyc2VkKCl7cmV0dXJuIG5ldyBubSh0aGlzLnJvb3QsdGhpcy5rZXksdGhpcy5uZXdWYWx1ZSx0aGlzLm9sZFZhbHVlLHRoaXMuYmFzZVZlcnNpb24rMSl9X3ZhbGlkYXRlKCl7aWYodGhpcy5yb290IT10aGlzLnJvb3Qucm9vdHx8dGhpcy5yb290LmlzKFwiZG9jdW1lbnRGcmFnbWVudFwiKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInJvb3RhdHRyaWJ1dGUtb3BlcmF0aW9uLW5vdC1hLXJvb3Q6IFRoZSBlbGVtZW50IHRvIGNoYW5nZSBpcyBub3QgYSByb290IGVsZW1lbnQuXCIsdGhpcyx7cm9vdDp0aGlzLnJvb3Qsa2V5OnRoaXMua2V5fSl9aWYodGhpcy5vbGRWYWx1ZSE9PW51bGwmJnRoaXMucm9vdC5nZXRBdHRyaWJ1dGUodGhpcy5rZXkpIT09dGhpcy5vbGRWYWx1ZSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInJvb3RhdHRyaWJ1dGUtb3BlcmF0aW9uLXdyb25nLW9sZC12YWx1ZTogQ2hhbmdlZCBub2RlIGhhcyBkaWZmZXJlbnQgYXR0cmlidXRlIHZhbHVlIHRoYW4gb3BlcmF0aW9uJ3MgXCIrXCJvbGQgYXR0cmlidXRlIHZhbHVlLlwiLHRoaXMse3Jvb3Q6dGhpcy5yb290LGtleTp0aGlzLmtleX0pfWlmKHRoaXMub2xkVmFsdWU9PT1udWxsJiZ0aGlzLm5ld1ZhbHVlIT09bnVsbCYmdGhpcy5yb290Lmhhc0F0dHJpYnV0ZSh0aGlzLmtleSkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJyb290YXR0cmlidXRlLW9wZXJhdGlvbi1hdHRyaWJ1dGUtZXhpc3RzOiBUaGUgYXR0cmlidXRlIHdpdGggZ2l2ZW4ga2V5IGFscmVhZHkgZXhpc3RzLlwiLHRoaXMse3Jvb3Q6dGhpcy5yb290LGtleTp0aGlzLmtleX0pfX1fZXhlY3V0ZSgpe2lmKHRoaXMubmV3VmFsdWUhPT1udWxsKXt0aGlzLnJvb3QuX3NldEF0dHJpYnV0ZSh0aGlzLmtleSx0aGlzLm5ld1ZhbHVlKX1lbHNle3RoaXMucm9vdC5fcmVtb3ZlQXR0cmlidXRlKHRoaXMua2V5KX19dG9KU09OKCl7Y29uc3QgdD1zdXBlci50b0pTT04oKTt0LnJvb3Q9dGhpcy5yb290LnRvSlNPTigpO3JldHVybiB0fXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuXCJSb290QXR0cmlidXRlT3BlcmF0aW9uXCJ9c3RhdGljIGZyb21KU09OKHQsZSl7aWYoIWUuZ2V0Um9vdCh0LnJvb3QpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwicm9vdGF0dHJpYnV0ZS1vcGVyYXRpb24tZnJvbWpzb24tbm8tcm9vdDogQ2Fubm90IGNyZWF0ZSBSb290QXR0cmlidXRlT3BlcmF0aW9uLiBSb290IHdpdGggc3BlY2lmaWVkIG5hbWUgZG9lcyBub3QgZXhpc3QuXCIsdGhpcyx7cm9vdE5hbWU6dC5yb290fSl9cmV0dXJuIG5ldyBubShlLmdldFJvb3QodC5yb290KSx0LmtleSx0Lm9sZFZhbHVlLHQubmV3VmFsdWUsdC5iYXNlVmVyc2lvbil9fWNsYXNzIG9tIGV4dGVuZHMgTGd7Y29uc3RydWN0b3IodCxlLGksbixvKXtzdXBlcihvKTt0aGlzLnNvdXJjZVBvc2l0aW9uPXQuY2xvbmUoKTt0aGlzLnNvdXJjZVBvc2l0aW9uLnN0aWNraW5lc3M9XCJ0b1ByZXZpb3VzXCI7dGhpcy5ob3dNYW55PWU7dGhpcy50YXJnZXRQb3NpdGlvbj1pLmNsb25lKCk7dGhpcy50YXJnZXRQb3NpdGlvbi5zdGlja2luZXNzPVwidG9OZXh0XCI7dGhpcy5ncmF2ZXlhcmRQb3NpdGlvbj1uLmNsb25lKCl9Z2V0IHR5cGUoKXtyZXR1cm5cIm1lcmdlXCJ9Z2V0IGRlbGV0aW9uUG9zaXRpb24oKXtyZXR1cm4gbmV3IFVoKHRoaXMuc291cmNlUG9zaXRpb24ucm9vdCx0aGlzLnNvdXJjZVBvc2l0aW9uLnBhdGguc2xpY2UoMCwtMSkpfWdldCBtb3ZlZFJhbmdlKCl7Y29uc3QgdD10aGlzLnNvdXJjZVBvc2l0aW9uLmdldFNoaWZ0ZWRCeShOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO3JldHVybiBuZXcgJGgodGhpcy5zb3VyY2VQb3NpdGlvbix0KX1jbG9uZSgpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnNvdXJjZVBvc2l0aW9uLHRoaXMuaG93TWFueSx0aGlzLnRhcmdldFBvc2l0aW9uLHRoaXMuZ3JhdmV5YXJkUG9zaXRpb24sdGhpcy5iYXNlVmVyc2lvbil9Z2V0UmV2ZXJzZWQoKXtjb25zdCB0PXRoaXMudGFyZ2V0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbih0aGlzKTtjb25zdCBlPXRoaXMuc291cmNlUG9zaXRpb24ucGF0aC5zbGljZSgwLC0xKTtjb25zdCBpPW5ldyBVaCh0aGlzLnNvdXJjZVBvc2l0aW9uLnJvb3QsZSkuX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbih0aGlzKTtjb25zdCBuPW5ldyBybSh0LHRoaXMuaG93TWFueSx0aGlzLmdyYXZleWFyZFBvc2l0aW9uLHRoaXMuYmFzZVZlcnNpb24rMSk7bi5pbnNlcnRpb25Qb3NpdGlvbj1pO3JldHVybiBufV92YWxpZGF0ZSgpe2NvbnN0IHQ9dGhpcy5zb3VyY2VQb3NpdGlvbi5wYXJlbnQ7Y29uc3QgZT10aGlzLnRhcmdldFBvc2l0aW9uLnBhcmVudDtpZighdC5wYXJlbnQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtZXJnZS1vcGVyYXRpb24tc291cmNlLXBvc2l0aW9uLWludmFsaWQ6IE1lcmdlIHNvdXJjZSBwb3NpdGlvbiBpcyBpbnZhbGlkLlwiLHRoaXMpfWVsc2UgaWYoIWUucGFyZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibWVyZ2Utb3BlcmF0aW9uLXRhcmdldC1wb3NpdGlvbi1pbnZhbGlkOiBNZXJnZSB0YXJnZXQgcG9zaXRpb24gaXMgaW52YWxpZC5cIix0aGlzKX1lbHNlIGlmKHRoaXMuaG93TWFueSE9dC5tYXhPZmZzZXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtZXJnZS1vcGVyYXRpb24taG93LW1hbnktaW52YWxpZDogTWVyZ2Ugb3BlcmF0aW9uIHNwZWNpZmllcyB3cm9uZyBudW1iZXIgb2Ygbm9kZXMgdG8gbW92ZS5cIix0aGlzKX19X2V4ZWN1dGUoKXtjb25zdCB0PXRoaXMuc291cmNlUG9zaXRpb24ucGFyZW50O2NvbnN0IGU9JGguX2NyZWF0ZUluKHQpO1dnKGUsdGhpcy50YXJnZXRQb3NpdGlvbik7V2coJGguX2NyZWF0ZU9uKHQpLHRoaXMuZ3JhdmV5YXJkUG9zaXRpb24pfXRvSlNPTigpe2NvbnN0IHQ9c3VwZXIudG9KU09OKCk7dC5zb3VyY2VQb3NpdGlvbj10LnNvdXJjZVBvc2l0aW9uLnRvSlNPTigpO3QudGFyZ2V0UG9zaXRpb249dC50YXJnZXRQb3NpdGlvbi50b0pTT04oKTt0LmdyYXZleWFyZFBvc2l0aW9uPXQuZ3JhdmV5YXJkUG9zaXRpb24udG9KU09OKCk7cmV0dXJuIHR9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm5cIk1lcmdlT3BlcmF0aW9uXCJ9c3RhdGljIGZyb21KU09OKHQsZSl7Y29uc3QgaT1VaC5mcm9tSlNPTih0LnNvdXJjZVBvc2l0aW9uLGUpO2NvbnN0IG49VWguZnJvbUpTT04odC50YXJnZXRQb3NpdGlvbixlKTtjb25zdCBvPVVoLmZyb21KU09OKHQuZ3JhdmV5YXJkUG9zaXRpb24sZSk7cmV0dXJuIG5ldyB0aGlzKGksdC5ob3dNYW55LG4sbyx0LmJhc2VWZXJzaW9uKX19Y2xhc3Mgcm0gZXh0ZW5kcyBMZ3tjb25zdHJ1Y3Rvcih0LGUsaSxuKXtzdXBlcihuKTt0aGlzLnNwbGl0UG9zaXRpb249dC5jbG9uZSgpO3RoaXMuc3BsaXRQb3NpdGlvbi5zdGlja2luZXNzPVwidG9OZXh0XCI7dGhpcy5ob3dNYW55PWU7dGhpcy5pbnNlcnRpb25Qb3NpdGlvbj1ybS5nZXRJbnNlcnRpb25Qb3NpdGlvbih0KTt0aGlzLmluc2VydGlvblBvc2l0aW9uLnN0aWNraW5lc3M9XCJ0b05vbmVcIjt0aGlzLmdyYXZleWFyZFBvc2l0aW9uPWk/aS5jbG9uZSgpOm51bGw7aWYodGhpcy5ncmF2ZXlhcmRQb3NpdGlvbil7dGhpcy5ncmF2ZXlhcmRQb3NpdGlvbi5zdGlja2luZXNzPVwidG9OZXh0XCJ9fWdldCB0eXBlKCl7cmV0dXJuXCJzcGxpdFwifWdldCBtb3ZlVGFyZ2V0UG9zaXRpb24oKXtjb25zdCB0PXRoaXMuaW5zZXJ0aW9uUG9zaXRpb24ucGF0aC5zbGljZSgpO3QucHVzaCgwKTtyZXR1cm4gbmV3IFVoKHRoaXMuaW5zZXJ0aW9uUG9zaXRpb24ucm9vdCx0KX1nZXQgbW92ZWRSYW5nZSgpe2NvbnN0IHQ9dGhpcy5zcGxpdFBvc2l0aW9uLmdldFNoaWZ0ZWRCeShOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO3JldHVybiBuZXcgJGgodGhpcy5zcGxpdFBvc2l0aW9uLHQpfWNsb25lKCl7Y29uc3QgdD1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnNwbGl0UG9zaXRpb24sdGhpcy5ob3dNYW55LHRoaXMuZ3JhdmV5YXJkUG9zaXRpb24sdGhpcy5iYXNlVmVyc2lvbik7dC5pbnNlcnRpb25Qb3NpdGlvbj10aGlzLmluc2VydGlvblBvc2l0aW9uO3JldHVybiB0fWdldFJldmVyc2VkKCl7Y29uc3QgdD10aGlzLnNwbGl0UG9zaXRpb24ucm9vdC5kb2N1bWVudC5ncmF2ZXlhcmQ7Y29uc3QgZT1uZXcgVWgodCxbMF0pO3JldHVybiBuZXcgb20odGhpcy5tb3ZlVGFyZ2V0UG9zaXRpb24sdGhpcy5ob3dNYW55LHRoaXMuc3BsaXRQb3NpdGlvbixlLHRoaXMuYmFzZVZlcnNpb24rMSl9X3ZhbGlkYXRlKCl7Y29uc3QgdD10aGlzLnNwbGl0UG9zaXRpb24ucGFyZW50O2NvbnN0IGU9dGhpcy5zcGxpdFBvc2l0aW9uLm9mZnNldDtpZighdHx8dC5tYXhPZmZzZXQ8ZSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcInNwbGl0LW9wZXJhdGlvbi1wb3NpdGlvbi1pbnZhbGlkOiBTcGxpdCBwb3NpdGlvbiBpcyBpbnZhbGlkLlwiLHRoaXMpfWVsc2UgaWYoIXQucGFyZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwic3BsaXQtb3BlcmF0aW9uLXNwbGl0LWluLXJvb3Q6IENhbm5vdCBzcGxpdCByb290IGVsZW1lbnQuXCIsdGhpcyl9ZWxzZSBpZih0aGlzLmhvd01hbnkhPXQubWF4T2Zmc2V0LXRoaXMuc3BsaXRQb3NpdGlvbi5vZmZzZXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJzcGxpdC1vcGVyYXRpb24taG93LW1hbnktaW52YWxpZDogU3BsaXQgb3BlcmF0aW9uIHNwZWNpZmllcyB3cm9uZyBudW1iZXIgb2Ygbm9kZXMgdG8gbW92ZS5cIix0aGlzKX1lbHNlIGlmKHRoaXMuZ3JhdmV5YXJkUG9zaXRpb24mJiF0aGlzLmdyYXZleWFyZFBvc2l0aW9uLm5vZGVBZnRlcil7dGhyb3cgbmV3IHNzW1wiYlwiXShcInNwbGl0LW9wZXJhdGlvbi1ncmF2ZXlhcmQtcG9zaXRpb24taW52YWxpZDogR3JhdmV5YXJkIHBvc2l0aW9uIGludmFsaWQuXCIsdGhpcyl9fV9leGVjdXRlKCl7Y29uc3QgdD10aGlzLnNwbGl0UG9zaXRpb24ucGFyZW50O2lmKHRoaXMuZ3JhdmV5YXJkUG9zaXRpb24pe1dnKCRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0aGlzLmdyYXZleWFyZFBvc2l0aW9uLDEpLHRoaXMuaW5zZXJ0aW9uUG9zaXRpb24pfWVsc2V7Y29uc3QgZT10Ll9jbG9uZSgpO2pnKHRoaXMuaW5zZXJ0aW9uUG9zaXRpb24sZSl9Y29uc3QgZT1uZXcgJGgoVWguX2NyZWF0ZUF0KHQsdGhpcy5zcGxpdFBvc2l0aW9uLm9mZnNldCksVWguX2NyZWF0ZUF0KHQsdC5tYXhPZmZzZXQpKTtXZyhlLHRoaXMubW92ZVRhcmdldFBvc2l0aW9uKX10b0pTT04oKXtjb25zdCB0PXN1cGVyLnRvSlNPTigpO3Quc3BsaXRQb3NpdGlvbj10aGlzLnNwbGl0UG9zaXRpb24udG9KU09OKCk7dC5pbnNlcnRpb25Qb3NpdGlvbj10aGlzLmluc2VydGlvblBvc2l0aW9uLnRvSlNPTigpO2lmKHRoaXMuZ3JhdmV5YXJkUG9zaXRpb24pe3QuZ3JhdmV5YXJkUG9zaXRpb249dGhpcy5ncmF2ZXlhcmRQb3NpdGlvbi50b0pTT04oKX1yZXR1cm4gdH1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVyblwiU3BsaXRPcGVyYXRpb25cIn1zdGF0aWMgZ2V0SW5zZXJ0aW9uUG9zaXRpb24odCl7Y29uc3QgZT10LnBhdGguc2xpY2UoMCwtMSk7ZVtlLmxlbmd0aC0xXSsrO3JldHVybiBuZXcgVWgodC5yb290LGUpfXN0YXRpYyBmcm9tSlNPTih0LGUpe2NvbnN0IGk9VWguZnJvbUpTT04odC5zcGxpdFBvc2l0aW9uLGUpO2NvbnN0IG49VWguZnJvbUpTT04odC5pbnNlcnRpb25Qb3NpdGlvbixlKTtjb25zdCBvPXQuZ3JhdmV5YXJkUG9zaXRpb24/VWguZnJvbUpTT04odC5ncmF2ZXlhcmRQb3NpdGlvbixlKTpudWxsO2NvbnN0IHI9bmV3IHRoaXMoaSx0Lmhvd01hbnksbyx0LmJhc2VWZXJzaW9uKTtyLmluc2VydGlvblBvc2l0aW9uPW47cmV0dXJuIHJ9fWNsYXNzIHNtIGV4dGVuZHMgamh7Y29uc3RydWN0b3IodCxlLGk9XCJtYWluXCIpe3N1cGVyKGUpO3RoaXMuX2RvY3VtZW50PXQ7dGhpcy5yb290TmFtZT1pfWdldCBkb2N1bWVudCgpe3JldHVybiB0aGlzLl9kb2N1bWVudH1pcyh0LGUpe2NvbnN0IGk9dC5yZXBsYWNlKFwibW9kZWw6XCIsXCJcIik7aWYoIWUpe3JldHVybiBpPT1cInJvb3RFbGVtZW50XCJ8fHN1cGVyLmlzKHQpfWVsc2V7cmV0dXJuIGk9PVwicm9vdEVsZW1lbnRcIiYmZT09dGhpcy5uYW1lfHxzdXBlci5pcyh0LGUpfX10b0pTT04oKXtyZXR1cm4gdGhpcy5yb290TmFtZX19Y2xhc3MgYW17Y29uc3RydWN0b3IodCxlKXt0aGlzLm1vZGVsPXQ7dGhpcy5iYXRjaD1lfWNyZWF0ZVRleHQodCxlKXtyZXR1cm4gbmV3IExoKHQsZSl9Y3JlYXRlRWxlbWVudCh0LGUpe3JldHVybiBuZXcgamgodCxlKX1jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl7cmV0dXJuIG5ldyBGZ31pbnNlcnQodCxlLGk9MCl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2lmKHQgaW5zdGFuY2VvZiBMaCYmdC5kYXRhPT1cIlwiKXtyZXR1cm59Y29uc3Qgbj1VaC5fY3JlYXRlQXQoZSxpKTtpZih0LnBhcmVudCl7aWYoaG0odC5yb290LG4ucm9vdCkpe3RoaXMubW92ZSgkaC5fY3JlYXRlT24odCksbik7cmV0dXJufWVsc2V7aWYodC5yb290LmRvY3VtZW50KXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtd3JpdGVyLWluc2VydC1mb3JiaWRkZW4tbW92ZTogXCIrXCJDYW5ub3QgbW92ZSBhIG5vZGUgZnJvbSBhIGRvY3VtZW50IHRvIGEgZGlmZmVyZW50IHRyZWUuIFwiK1wiSXQgaXMgZm9yYmlkZGVuIHRvIG1vdmUgYSBub2RlIHRoYXQgd2FzIGFscmVhZHkgaW4gYSBkb2N1bWVudCBvdXRzaWRlIG9mIGl0LlwiLHRoaXMpfWVsc2V7dGhpcy5yZW1vdmUodCl9fX1jb25zdCBvPW4ucm9vdC5kb2N1bWVudD9uLnJvb3QuZG9jdW1lbnQudmVyc2lvbjpudWxsO2NvbnN0IHI9bmV3IHRtKG4sdCxvKTtpZih0IGluc3RhbmNlb2YgTGgpe3Iuc2hvdWxkUmVjZWl2ZUF0dHJpYnV0ZXM9dHJ1ZX10aGlzLmJhdGNoLmFkZE9wZXJhdGlvbihyKTt0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKHIpO2lmKHQgaW5zdGFuY2VvZiBGZyl7Zm9yKGNvbnN0W2UsaV1vZiB0Lm1hcmtlcnMpe2NvbnN0IHQ9VWguX2NyZWF0ZUF0KGkucm9vdCwwKTtjb25zdCBvPW5ldyAkaChpLnN0YXJ0Ll9nZXRDb21iaW5lZCh0LG4pLGkuZW5kLl9nZXRDb21iaW5lZCh0LG4pKTtjb25zdCByPXtyYW5nZTpvLHVzaW5nT3BlcmF0aW9uOnRydWUsYWZmZWN0c0RhdGE6dHJ1ZX07aWYodGhpcy5tb2RlbC5tYXJrZXJzLmhhcyhlKSl7dGhpcy51cGRhdGVNYXJrZXIoZSxyKX1lbHNle3RoaXMuYWRkTWFya2VyKGUscil9fX19aW5zZXJ0VGV4dCh0LGUsaSxuKXtpZihlIGluc3RhbmNlb2YgRmd8fGUgaW5zdGFuY2VvZiBqaHx8ZSBpbnN0YW5jZW9mIFVoKXt0aGlzLmluc2VydCh0aGlzLmNyZWF0ZVRleHQodCksZSxpKX1lbHNle3RoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlVGV4dCh0LGUpLGksbil9fWluc2VydEVsZW1lbnQodCxlLGksbil7aWYoZSBpbnN0YW5jZW9mIEZnfHxlIGluc3RhbmNlb2Ygamh8fGUgaW5zdGFuY2VvZiBVaCl7dGhpcy5pbnNlcnQodGhpcy5jcmVhdGVFbGVtZW50KHQpLGUsaSl9ZWxzZXt0aGlzLmluc2VydCh0aGlzLmNyZWF0ZUVsZW1lbnQodCxlKSxpLG4pfX1hcHBlbmQodCxlKXt0aGlzLmluc2VydCh0LGUsXCJlbmRcIil9YXBwZW5kVGV4dCh0LGUsaSl7aWYoZSBpbnN0YW5jZW9mIEZnfHxlIGluc3RhbmNlb2Ygamgpe3RoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlVGV4dCh0KSxlLFwiZW5kXCIpfWVsc2V7dGhpcy5pbnNlcnQodGhpcy5jcmVhdGVUZXh0KHQsZSksaSxcImVuZFwiKX19YXBwZW5kRWxlbWVudCh0LGUsaSl7aWYoZSBpbnN0YW5jZW9mIEZnfHxlIGluc3RhbmNlb2Ygamgpe3RoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlRWxlbWVudCh0KSxlLFwiZW5kXCIpfWVsc2V7dGhpcy5pbnNlcnQodGhpcy5jcmVhdGVFbGVtZW50KHQsZSksaSxcImVuZFwiKX19c2V0QXR0cmlidXRlKHQsZSxpKXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7aWYoaSBpbnN0YW5jZW9mICRoKXtjb25zdCBuPWkuZ2V0TWluaW1hbEZsYXRSYW5nZXMoKTtmb3IoY29uc3QgaSBvZiBuKXtjbSh0aGlzLHQsZSxpKX19ZWxzZXtsbSh0aGlzLHQsZSxpKX19c2V0QXR0cmlidXRlcyh0LGUpe2Zvcihjb25zdFtpLG5db2YgSHModCkpe3RoaXMuc2V0QXR0cmlidXRlKGksbixlKX19cmVtb3ZlQXR0cmlidXRlKHQsZSl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2lmKGUgaW5zdGFuY2VvZiAkaCl7Y29uc3QgaT1lLmdldE1pbmltYWxGbGF0UmFuZ2VzKCk7Zm9yKGNvbnN0IGUgb2YgaSl7Y20odGhpcyx0LG51bGwsZSl9fWVsc2V7bG0odGhpcyx0LG51bGwsZSl9fWNsZWFyQXR0cmlidXRlcyh0KXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7Y29uc3QgZT10PT57Zm9yKGNvbnN0IGUgb2YgdC5nZXRBdHRyaWJ1dGVLZXlzKCkpe3RoaXMucmVtb3ZlQXR0cmlidXRlKGUsdCl9fTtpZighKHQgaW5zdGFuY2VvZiAkaCkpe2UodCl9ZWxzZXtmb3IoY29uc3QgaSBvZiB0LmdldEl0ZW1zKCkpe2UoaSl9fX1tb3ZlKHQsZSxpKXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7aWYoISh0IGluc3RhbmNlb2YgJGgpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwid3JpdGVyLW1vdmUtaW52YWxpZC1yYW5nZTogSW52YWxpZCByYW5nZSB0byBtb3ZlLlwiLHRoaXMpfWlmKCF0LmlzRmxhdCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci1tb3ZlLXJhbmdlLW5vdC1mbGF0OiBSYW5nZSB0byBtb3ZlIGlzIG5vdCBmbGF0LlwiLHRoaXMpfWNvbnN0IG49VWguX2NyZWF0ZUF0KGUsaSk7aWYobi5pc0VxdWFsKHQuc3RhcnQpKXtyZXR1cm59dGhpcy5fYWRkT3BlcmF0aW9uRm9yQWZmZWN0ZWRNYXJrZXJzKFwibW92ZVwiLHQpO2lmKCFobSh0LnJvb3Qsbi5yb290KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci1tb3ZlLWRpZmZlcmVudC1kb2N1bWVudDogUmFuZ2UgaXMgZ29pbmcgdG8gYmUgbW92ZWQgYmV0d2VlbiBkaWZmZXJlbnQgZG9jdW1lbnRzLlwiLHRoaXMpfWNvbnN0IG89dC5yb290LmRvY3VtZW50P3Qucm9vdC5kb2N1bWVudC52ZXJzaW9uOm51bGw7Y29uc3Qgcj1uZXcgWmcodC5zdGFydCx0LmVuZC5vZmZzZXQtdC5zdGFydC5vZmZzZXQsbixvKTt0aGlzLmJhdGNoLmFkZE9wZXJhdGlvbihyKTt0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKHIpfXJlbW92ZSh0KXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7Y29uc3QgZT10IGluc3RhbmNlb2YgJGg/dDokaC5fY3JlYXRlT24odCk7Y29uc3QgaT1lLmdldE1pbmltYWxGbGF0UmFuZ2VzKCkucmV2ZXJzZSgpO2Zvcihjb25zdCB0IG9mIGkpe3RoaXMuX2FkZE9wZXJhdGlvbkZvckFmZmVjdGVkTWFya2VycyhcIm1vdmVcIix0KTt1bSh0LnN0YXJ0LHQuZW5kLm9mZnNldC10LnN0YXJ0Lm9mZnNldCx0aGlzLmJhdGNoLHRoaXMubW9kZWwpfX1tZXJnZSh0KXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7Y29uc3QgZT10Lm5vZGVCZWZvcmU7Y29uc3QgaT10Lm5vZGVBZnRlcjt0aGlzLl9hZGRPcGVyYXRpb25Gb3JBZmZlY3RlZE1hcmtlcnMoXCJtZXJnZVwiLHQpO2lmKCEoZSBpbnN0YW5jZW9mIGpoKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci1tZXJnZS1uby1lbGVtZW50LWJlZm9yZTogTm9kZSBiZWZvcmUgbWVyZ2UgcG9zaXRpb24gbXVzdCBiZSBhbiBlbGVtZW50LlwiLHRoaXMpfWlmKCEoaSBpbnN0YW5jZW9mIGpoKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci1tZXJnZS1uby1lbGVtZW50LWFmdGVyOiBOb2RlIGFmdGVyIG1lcmdlIHBvc2l0aW9uIG11c3QgYmUgYW4gZWxlbWVudC5cIix0aGlzKX1pZighdC5yb290LmRvY3VtZW50KXt0aGlzLl9tZXJnZURldGFjaGVkKHQpfWVsc2V7dGhpcy5fbWVyZ2UodCl9fWNyZWF0ZVBvc2l0aW9uRnJvbVBhdGgodCxlLGkpe3JldHVybiB0aGlzLm1vZGVsLmNyZWF0ZVBvc2l0aW9uRnJvbVBhdGgodCxlLGkpfWNyZWF0ZVBvc2l0aW9uQXQodCxlKXtyZXR1cm4gdGhpcy5tb2RlbC5jcmVhdGVQb3NpdGlvbkF0KHQsZSl9Y3JlYXRlUG9zaXRpb25BZnRlcih0KXtyZXR1cm4gdGhpcy5tb2RlbC5jcmVhdGVQb3NpdGlvbkFmdGVyKHQpfWNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpe3JldHVybiB0aGlzLm1vZGVsLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpfWNyZWF0ZVJhbmdlKHQsZSl7cmV0dXJuIHRoaXMubW9kZWwuY3JlYXRlUmFuZ2UodCxlKX1jcmVhdGVSYW5nZUluKHQpe3JldHVybiB0aGlzLm1vZGVsLmNyZWF0ZVJhbmdlSW4odCl9Y3JlYXRlUmFuZ2VPbih0KXtyZXR1cm4gdGhpcy5tb2RlbC5jcmVhdGVSYW5nZU9uKHQpfWNyZWF0ZVNlbGVjdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMubW9kZWwuY3JlYXRlU2VsZWN0aW9uKHQsZSxpKX1fbWVyZ2VEZXRhY2hlZCh0KXtjb25zdCBlPXQubm9kZUJlZm9yZTtjb25zdCBpPXQubm9kZUFmdGVyO3RoaXMubW92ZSgkaC5fY3JlYXRlSW4oaSksVWguX2NyZWF0ZUF0KGUsXCJlbmRcIikpO3RoaXMucmVtb3ZlKGkpfV9tZXJnZSh0KXtjb25zdCBlPVVoLl9jcmVhdGVBdCh0Lm5vZGVCZWZvcmUsXCJlbmRcIik7Y29uc3QgaT1VaC5fY3JlYXRlQXQodC5ub2RlQWZ0ZXIsMCk7Y29uc3Qgbj10LnJvb3QuZG9jdW1lbnQuZ3JhdmV5YXJkO2NvbnN0IG89bmV3IFVoKG4sWzBdKTtjb25zdCByPXQucm9vdC5kb2N1bWVudC52ZXJzaW9uO2NvbnN0IHM9bmV3IG9tKGksdC5ub2RlQWZ0ZXIubWF4T2Zmc2V0LGUsbyxyKTt0aGlzLmJhdGNoLmFkZE9wZXJhdGlvbihzKTt0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKHMpfXJlbmFtZSh0LGUpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtpZighKHQgaW5zdGFuY2VvZiBqaCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3cml0ZXItcmVuYW1lLW5vdC1lbGVtZW50LWluc3RhbmNlOiBUcnlpbmcgdG8gcmVuYW1lIGFuIG9iamVjdCB3aGljaCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgRWxlbWVudC5cIix0aGlzKX1jb25zdCBpPXQucm9vdC5kb2N1bWVudD90LnJvb3QuZG9jdW1lbnQudmVyc2lvbjpudWxsO2NvbnN0IG49bmV3IGltKFVoLl9jcmVhdGVCZWZvcmUodCksdC5uYW1lLGUsaSk7dGhpcy5iYXRjaC5hZGRPcGVyYXRpb24obik7dGhpcy5tb2RlbC5hcHBseU9wZXJhdGlvbihuKX1zcGxpdCh0LGUpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtsZXQgaT10LnBhcmVudDtpZighaS5wYXJlbnQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3cml0ZXItc3BsaXQtZWxlbWVudC1uby1wYXJlbnQ6IEVsZW1lbnQgd2l0aCBubyBwYXJlbnQgY2FuIG5vdCBiZSBzcGxpdC5cIix0aGlzKX1pZighZSl7ZT1pLnBhcmVudH1pZighdC5wYXJlbnQuZ2V0QW5jZXN0b3JzKHtpbmNsdWRlU2VsZjp0cnVlfSkuaW5jbHVkZXMoZSkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3cml0ZXItc3BsaXQtaW52YWxpZC1saW1pdC1lbGVtZW50OiBMaW1pdCBlbGVtZW50IGlzIG5vdCBhIHBvc2l0aW9uIGFuY2VzdG9yLlwiLHRoaXMpfWxldCBuLG87ZG97Y29uc3QgZT1pLnJvb3QuZG9jdW1lbnQ/aS5yb290LmRvY3VtZW50LnZlcnNpb246bnVsbDtjb25zdCByPWkubWF4T2Zmc2V0LXQub2Zmc2V0O2NvbnN0IHM9bmV3IHJtKHQscixudWxsLGUpO3RoaXMuYmF0Y2guYWRkT3BlcmF0aW9uKHMpO3RoaXMubW9kZWwuYXBwbHlPcGVyYXRpb24ocyk7aWYoIW4mJiFvKXtuPWk7bz10LnBhcmVudC5uZXh0U2libGluZ310PXRoaXMuY3JlYXRlUG9zaXRpb25BZnRlcih0LnBhcmVudCk7aT10LnBhcmVudH13aGlsZShpIT09ZSk7cmV0dXJue3Bvc2l0aW9uOnQscmFuZ2U6bmV3ICRoKFVoLl9jcmVhdGVBdChuLFwiZW5kXCIpLFVoLl9jcmVhdGVBdChvLDApKX19d3JhcCh0LGUpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtpZighdC5pc0ZsYXQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3cml0ZXItd3JhcC1yYW5nZS1ub3QtZmxhdDogUmFuZ2UgdG8gd3JhcCBpcyBub3QgZmxhdC5cIix0aGlzKX1jb25zdCBpPWUgaW5zdGFuY2VvZiBqaD9lOm5ldyBqaChlKTtpZihpLmNoaWxkQ291bnQ+MCl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci13cmFwLWVsZW1lbnQtbm90LWVtcHR5OiBFbGVtZW50IHRvIHdyYXAgd2l0aCBpcyBub3QgZW1wdHkuXCIsdGhpcyl9aWYoaS5wYXJlbnQhPT1udWxsKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwid3JpdGVyLXdyYXAtZWxlbWVudC1hdHRhY2hlZDogRWxlbWVudCB0byB3cmFwIHdpdGggaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0cmVlIG1vZGVsLlwiLHRoaXMpfXRoaXMuaW5zZXJ0KGksdC5zdGFydCk7Y29uc3Qgbj1uZXcgJGgodC5zdGFydC5nZXRTaGlmdGVkQnkoMSksdC5lbmQuZ2V0U2hpZnRlZEJ5KDEpKTt0aGlzLm1vdmUobixVaC5fY3JlYXRlQXQoaSwwKSl9dW53cmFwKHQpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtpZih0LnBhcmVudD09PW51bGwpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3cml0ZXItdW53cmFwLWVsZW1lbnQtbm8tcGFyZW50OiBUcnlpbmcgdG8gdW53cmFwIGFuIGVsZW1lbnQgd2hpY2ggaGFzIG5vIHBhcmVudC5cIix0aGlzKX10aGlzLm1vdmUoJGguX2NyZWF0ZUluKHQpLHRoaXMuY3JlYXRlUG9zaXRpb25BZnRlcih0KSk7dGhpcy5yZW1vdmUodCl9YWRkTWFya2VyKHQsZSl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2lmKCFlfHx0eXBlb2YgZS51c2luZ09wZXJhdGlvbiE9XCJib29sZWFuXCIpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3cml0ZXItYWRkTWFya2VyLW5vLXVzaW5nT3BlcmF0aW9uOiBUaGUgb3B0aW9ucy51c2luZ09wZXJhdGlvbiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgd2hlbiBhZGRpbmcgYSBuZXcgbWFya2VyLlwiLHRoaXMpfWNvbnN0IGk9ZS51c2luZ09wZXJhdGlvbjtjb25zdCBuPWUucmFuZ2U7Y29uc3Qgbz1lLmFmZmVjdHNEYXRhPT09dW5kZWZpbmVkP2ZhbHNlOmUuYWZmZWN0c0RhdGE7aWYodGhpcy5tb2RlbC5tYXJrZXJzLmhhcyh0KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci1hZGRNYXJrZXItbWFya2VyLWV4aXN0czogTWFya2VyIHdpdGggcHJvdmlkZWQgbmFtZSBhbHJlYWR5IGV4aXN0cy5cIix0aGlzKX1pZighbil7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci1hZGRNYXJrZXItbm8tcmFuZ2U6IFJhbmdlIHBhcmFtZXRlciBpcyByZXF1aXJlZCB3aGVuIGFkZGluZyBhIG5ldyBtYXJrZXIuXCIsdGhpcyl9aWYoIWkpe3JldHVybiB0aGlzLm1vZGVsLm1hcmtlcnMuX3NldCh0LG4saSxvKX1kbSh0aGlzLHQsbnVsbCxuLG8pO3JldHVybiB0aGlzLm1vZGVsLm1hcmtlcnMuZ2V0KHQpfXVwZGF0ZU1hcmtlcih0LGUpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtjb25zdCBpPXR5cGVvZiB0PT1cInN0cmluZ1wiP3Q6dC5uYW1lO2NvbnN0IG49dGhpcy5tb2RlbC5tYXJrZXJzLmdldChpKTtpZighbil7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci11cGRhdGVNYXJrZXItbWFya2VyLW5vdC1leGlzdHM6IE1hcmtlciB3aXRoIHByb3ZpZGVkIG5hbWUgZG9lcyBub3QgZXhpc3RzLlwiLHRoaXMpfWlmKCFlKXt0aGlzLm1vZGVsLm1hcmtlcnMuX3JlZnJlc2gobik7cmV0dXJufWNvbnN0IG89dHlwZW9mIGUudXNpbmdPcGVyYXRpb249PVwiYm9vbGVhblwiO2NvbnN0IHI9dHlwZW9mIGUuYWZmZWN0c0RhdGE9PVwiYm9vbGVhblwiO2NvbnN0IHM9cj9lLmFmZmVjdHNEYXRhOm4uYWZmZWN0c0RhdGE7aWYoIW8mJiFlLnJhbmdlJiYhcil7dGhyb3cgbmV3IHNzW1wiYlwiXShcIndyaXRlci11cGRhdGVNYXJrZXItd3Jvbmctb3B0aW9uczogT25lIG9mIHRoZSBvcHRpb25zIGlzIHJlcXVpcmVkIC0gcHJvdmlkZSByYW5nZSwgdXNpbmdPcGVyYXRpb25zIG9yIGFmZmVjdHNEYXRhLlwiLHRoaXMpfWNvbnN0IGE9bi5nZXRSYW5nZSgpO2NvbnN0IGM9ZS5yYW5nZT9lLnJhbmdlOmE7aWYobyYmZS51c2luZ09wZXJhdGlvbiE9PW4ubWFuYWdlZFVzaW5nT3BlcmF0aW9ucyl7aWYoZS51c2luZ09wZXJhdGlvbil7ZG0odGhpcyxpLG51bGwsYyxzKX1lbHNle2RtKHRoaXMsaSxhLG51bGwscyk7dGhpcy5tb2RlbC5tYXJrZXJzLl9zZXQoaSxjLHVuZGVmaW5lZCxzKX1yZXR1cm59aWYobi5tYW5hZ2VkVXNpbmdPcGVyYXRpb25zKXtkbSh0aGlzLGksYSxjLHMpfWVsc2V7dGhpcy5tb2RlbC5tYXJrZXJzLl9zZXQoaSxjLHVuZGVmaW5lZCxzKX19cmVtb3ZlTWFya2VyKHQpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtjb25zdCBlPXR5cGVvZiB0PT1cInN0cmluZ1wiP3Q6dC5uYW1lO2lmKCF0aGlzLm1vZGVsLm1hcmtlcnMuaGFzKGUpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwid3JpdGVyLXJlbW92ZU1hcmtlci1uby1tYXJrZXI6IFRyeWluZyB0byByZW1vdmUgbWFya2VyIHdoaWNoIGRvZXMgbm90IGV4aXN0LlwiLHRoaXMpfWNvbnN0IGk9dGhpcy5tb2RlbC5tYXJrZXJzLmdldChlKTtpZighaS5tYW5hZ2VkVXNpbmdPcGVyYXRpb25zKXt0aGlzLm1vZGVsLm1hcmtlcnMuX3JlbW92ZShlKTtyZXR1cm59Y29uc3Qgbj1pLmdldFJhbmdlKCk7ZG0odGhpcyxlLG4sbnVsbCxpLmFmZmVjdHNEYXRhKX1zZXRTZWxlY3Rpb24odCxlLGkpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTt0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5fc2V0VG8odCxlLGkpfXNldFNlbGVjdGlvbkZvY3VzKHQsZSl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO3RoaXMubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLl9zZXRGb2N1cyh0LGUpfXNldFNlbGVjdGlvbkF0dHJpYnV0ZSh0LGUpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe3RoaXMuX3NldFNlbGVjdGlvbkF0dHJpYnV0ZSh0LGUpfWVsc2V7Zm9yKGNvbnN0W2UsaV1vZiBIcyh0KSl7dGhpcy5fc2V0U2VsZWN0aW9uQXR0cmlidXRlKGUsaSl9fX1yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodCl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2lmKHR5cGVvZiB0PT09XCJzdHJpbmdcIil7dGhpcy5fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKHQpfWVsc2V7Zm9yKGNvbnN0IGUgb2YgdCl7dGhpcy5fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKGUpfX19b3ZlcnJpZGVTZWxlY3Rpb25HcmF2aXR5KCl7cmV0dXJuIHRoaXMubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLl9vdmVycmlkZUdyYXZpdHkoKX1yZXN0b3JlU2VsZWN0aW9uR3Jhdml0eSh0KXt0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5fcmVzdG9yZUdyYXZpdHkodCl9X3NldFNlbGVjdGlvbkF0dHJpYnV0ZSh0LGUpe2NvbnN0IGk9dGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247aWYoaS5pc0NvbGxhcHNlZCYmaS5hbmNob3IucGFyZW50LmlzRW1wdHkpe2NvbnN0IG49ZGYuX2dldFN0b3JlQXR0cmlidXRlS2V5KHQpO3RoaXMuc2V0QXR0cmlidXRlKG4sZSxpLmFuY2hvci5wYXJlbnQpfWkuX3NldEF0dHJpYnV0ZSh0LGUpfV9yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodCl7Y29uc3QgZT10aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjtpZihlLmlzQ29sbGFwc2VkJiZlLmFuY2hvci5wYXJlbnQuaXNFbXB0eSl7Y29uc3QgaT1kZi5fZ2V0U3RvcmVBdHRyaWJ1dGVLZXkodCk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoaSxlLmFuY2hvci5wYXJlbnQpfWUuX3JlbW92ZUF0dHJpYnV0ZSh0KX1fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpe2lmKHRoaXMubW9kZWwuX2N1cnJlbnRXcml0ZXIhPT10aGlzKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwid3JpdGVyLWluY29ycmVjdC11c2U6IFRyeWluZyB0byB1c2UgYSB3cml0ZXIgb3V0c2lkZSB0aGUgY2hhbmdlKCkgYmxvY2suXCIsdGhpcyl9fV9hZGRPcGVyYXRpb25Gb3JBZmZlY3RlZE1hcmtlcnModCxlKXtmb3IoY29uc3QgaSBvZiB0aGlzLm1vZGVsLm1hcmtlcnMpe2lmKCFpLm1hbmFnZWRVc2luZ09wZXJhdGlvbnMpe2NvbnRpbnVlfWNvbnN0IG49aS5nZXRSYW5nZSgpO2xldCBvPWZhbHNlO2lmKHQ9PVwibW92ZVwiKXtvPWUuY29udGFpbnNQb3NpdGlvbihuLnN0YXJ0KXx8ZS5zdGFydC5pc0VxdWFsKG4uc3RhcnQpfHxlLmNvbnRhaW5zUG9zaXRpb24obi5lbmQpfHxlLmVuZC5pc0VxdWFsKG4uZW5kKX1lbHNle2NvbnN0IHQ9ZS5ub2RlQmVmb3JlO2NvbnN0IGk9ZS5ub2RlQWZ0ZXI7Y29uc3Qgcj1uLnN0YXJ0LnBhcmVudD09dCYmbi5zdGFydC5pc0F0RW5kO2NvbnN0IHM9bi5lbmQucGFyZW50PT1pJiZuLmVuZC5vZmZzZXQ9PTA7Y29uc3QgYT1uLmVuZC5ub2RlQWZ0ZXI9PWk7Y29uc3QgYz1uLnN0YXJ0Lm5vZGVBZnRlcj09aTtvPXJ8fHN8fGF8fGN9aWYobyl7dGhpcy51cGRhdGVNYXJrZXIoaS5uYW1lLHtyYW5nZTpufSl9fX19ZnVuY3Rpb24gY20odCxlLGksbil7Y29uc3Qgbz10Lm1vZGVsO2NvbnN0IHI9by5kb2N1bWVudDtsZXQgcz1uLnN0YXJ0O2xldCBhO2xldCBjO2xldCBsO2Zvcihjb25zdCB0IG9mIG4uZ2V0V2Fsa2VyKHtzaGFsbG93OnRydWV9KSl7bD10Lml0ZW0uZ2V0QXR0cmlidXRlKGUpO2lmKGEmJmMhPWwpe2lmKGMhPWkpe2QoKX1zPWF9YT10Lm5leHRQb3NpdGlvbjtjPWx9aWYoYSBpbnN0YW5jZW9mIFVoJiZhIT1zJiZjIT1pKXtkKCl9ZnVuY3Rpb24gZCgpe2NvbnN0IG49bmV3ICRoKHMsYSk7Y29uc3QgbD1uLnJvb3QuZG9jdW1lbnQ/ci52ZXJzaW9uOm51bGw7Y29uc3QgZD1uZXcgUWcobixlLGMsaSxsKTt0LmJhdGNoLmFkZE9wZXJhdGlvbihkKTtvLmFwcGx5T3BlcmF0aW9uKGQpfX1mdW5jdGlvbiBsbSh0LGUsaSxuKXtjb25zdCBvPXQubW9kZWw7Y29uc3Qgcj1vLmRvY3VtZW50O2NvbnN0IHM9bi5nZXRBdHRyaWJ1dGUoZSk7bGV0IGEsYztpZihzIT1pKXtjb25zdCBsPW4ucm9vdD09PW47aWYobCl7Y29uc3QgdD1uLmRvY3VtZW50P3IudmVyc2lvbjpudWxsO2M9bmV3IG5tKG4sZSxzLGksdCl9ZWxzZXthPW5ldyAkaChVaC5fY3JlYXRlQmVmb3JlKG4pLHQuY3JlYXRlUG9zaXRpb25BZnRlcihuKSk7Y29uc3Qgbz1hLnJvb3QuZG9jdW1lbnQ/ci52ZXJzaW9uOm51bGw7Yz1uZXcgUWcoYSxlLHMsaSxvKX10LmJhdGNoLmFkZE9wZXJhdGlvbihjKTtvLmFwcGx5T3BlcmF0aW9uKGMpfX1mdW5jdGlvbiBkbSh0LGUsaSxuLG8pe2NvbnN0IHI9dC5tb2RlbDtjb25zdCBzPXIuZG9jdW1lbnQ7Y29uc3QgYT1uZXcgZW0oZSxpLG4sci5tYXJrZXJzLG8scy52ZXJzaW9uKTt0LmJhdGNoLmFkZE9wZXJhdGlvbihhKTtyLmFwcGx5T3BlcmF0aW9uKGEpfWZ1bmN0aW9uIHVtKHQsZSxpLG4pe2xldCBvO2lmKHQucm9vdC5kb2N1bWVudCl7Y29uc3QgaT1uLmRvY3VtZW50O2NvbnN0IHI9bmV3IFVoKGkuZ3JhdmV5YXJkLFswXSk7bz1uZXcgWmcodCxlLHIsaS52ZXJzaW9uKX1lbHNle289bmV3IFhnKHQsZSl9aS5hZGRPcGVyYXRpb24obyk7bi5hcHBseU9wZXJhdGlvbihvKX1mdW5jdGlvbiBobSh0LGUpe2lmKHQ9PT1lKXtyZXR1cm4gdHJ1ZX1pZih0IGluc3RhbmNlb2Ygc20mJmUgaW5zdGFuY2VvZiBzbSl7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfWNsYXNzIGZte2NvbnN0cnVjdG9yKHQpe3RoaXMuX21hcmtlckNvbGxlY3Rpb249dDt0aGlzLl9jaGFuZ2VzSW5FbGVtZW50PW5ldyBNYXA7dGhpcy5fZWxlbWVudFNuYXBzaG90cz1uZXcgTWFwO3RoaXMuX2NoYW5nZWRNYXJrZXJzPW5ldyBNYXA7dGhpcy5fY2hhbmdlQ291bnQ9MDt0aGlzLl9jYWNoZWRDaGFuZ2VzPW51bGw7dGhpcy5fY2FjaGVkQ2hhbmdlc1dpdGhHcmF2ZXlhcmQ9bnVsbH1nZXQgaXNFbXB0eSgpe3JldHVybiB0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LnNpemU9PTAmJnRoaXMuX2NoYW5nZWRNYXJrZXJzLnNpemU9PTB9cmVmcmVzaEl0ZW0odCl7aWYodGhpcy5faXNJbkluc2VydGVkRWxlbWVudCh0LnBhcmVudCkpe3JldHVybn10aGlzLl9tYXJrUmVtb3ZlKHQucGFyZW50LHQuc3RhcnRPZmZzZXQsdC5vZmZzZXRTaXplKTt0aGlzLl9tYXJrSW5zZXJ0KHQucGFyZW50LHQuc3RhcnRPZmZzZXQsdC5vZmZzZXRTaXplKTtjb25zdCBlPSRoLl9jcmVhdGVPbih0KTtmb3IoY29uc3QgdCBvZiB0aGlzLl9tYXJrZXJDb2xsZWN0aW9uLmdldE1hcmtlcnNJbnRlcnNlY3RpbmdSYW5nZShlKSl7Y29uc3QgZT10LmdldFJhbmdlKCk7dGhpcy5idWZmZXJNYXJrZXJDaGFuZ2UodC5uYW1lLGUsZSx0LmFmZmVjdHNEYXRhKX10aGlzLl9jYWNoZWRDaGFuZ2VzPW51bGx9YnVmZmVyT3BlcmF0aW9uKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2VcImluc2VydFwiOntpZih0aGlzLl9pc0luSW5zZXJ0ZWRFbGVtZW50KHQucG9zaXRpb24ucGFyZW50KSl7cmV0dXJufXRoaXMuX21hcmtJbnNlcnQodC5wb3NpdGlvbi5wYXJlbnQsdC5wb3NpdGlvbi5vZmZzZXQsdC5ub2Rlcy5tYXhPZmZzZXQpO2JyZWFrfWNhc2VcImFkZEF0dHJpYnV0ZVwiOmNhc2VcInJlbW92ZUF0dHJpYnV0ZVwiOmNhc2VcImNoYW5nZUF0dHJpYnV0ZVwiOntmb3IoY29uc3QgZSBvZiB0LnJhbmdlLmdldEl0ZW1zKHtzaGFsbG93OnRydWV9KSl7aWYodGhpcy5faXNJbkluc2VydGVkRWxlbWVudChlLnBhcmVudCkpe2NvbnRpbnVlfXRoaXMuX21hcmtBdHRyaWJ1dGUoZSl9YnJlYWt9Y2FzZVwicmVtb3ZlXCI6Y2FzZVwibW92ZVwiOmNhc2VcInJlaW5zZXJ0XCI6e2lmKHQuc291cmNlUG9zaXRpb24uaXNFcXVhbCh0LnRhcmdldFBvc2l0aW9uKXx8dC5zb3VyY2VQb3NpdGlvbi5nZXRTaGlmdGVkQnkodC5ob3dNYW55KS5pc0VxdWFsKHQudGFyZ2V0UG9zaXRpb24pKXtyZXR1cm59Y29uc3QgZT10aGlzLl9pc0luSW5zZXJ0ZWRFbGVtZW50KHQuc291cmNlUG9zaXRpb24ucGFyZW50KTtjb25zdCBpPXRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQodC50YXJnZXRQb3NpdGlvbi5wYXJlbnQpO2lmKCFlKXt0aGlzLl9tYXJrUmVtb3ZlKHQuc291cmNlUG9zaXRpb24ucGFyZW50LHQuc291cmNlUG9zaXRpb24ub2Zmc2V0LHQuaG93TWFueSl9aWYoIWkpe3RoaXMuX21hcmtJbnNlcnQodC50YXJnZXRQb3NpdGlvbi5wYXJlbnQsdC5nZXRNb3ZlZFJhbmdlU3RhcnQoKS5vZmZzZXQsdC5ob3dNYW55KX1icmVha31jYXNlXCJyZW5hbWVcIjp7aWYodGhpcy5faXNJbkluc2VydGVkRWxlbWVudCh0LnBvc2l0aW9uLnBhcmVudCkpe3JldHVybn10aGlzLl9tYXJrUmVtb3ZlKHQucG9zaXRpb24ucGFyZW50LHQucG9zaXRpb24ub2Zmc2V0LDEpO3RoaXMuX21hcmtJbnNlcnQodC5wb3NpdGlvbi5wYXJlbnQsdC5wb3NpdGlvbi5vZmZzZXQsMSk7Y29uc3QgZT0kaC5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodC5wb3NpdGlvbiwxKTtmb3IoY29uc3QgdCBvZiB0aGlzLl9tYXJrZXJDb2xsZWN0aW9uLmdldE1hcmtlcnNJbnRlcnNlY3RpbmdSYW5nZShlKSl7Y29uc3QgZT10LmdldFJhbmdlKCk7dGhpcy5idWZmZXJNYXJrZXJDaGFuZ2UodC5uYW1lLGUsZSx0LmFmZmVjdHNEYXRhKX1icmVha31jYXNlXCJzcGxpdFwiOntjb25zdCBlPXQuc3BsaXRQb3NpdGlvbi5wYXJlbnQ7aWYoIXRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQoZSkpe3RoaXMuX21hcmtSZW1vdmUoZSx0LnNwbGl0UG9zaXRpb24ub2Zmc2V0LHQuaG93TWFueSl9aWYoIXRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQodC5pbnNlcnRpb25Qb3NpdGlvbi5wYXJlbnQpKXt0aGlzLl9tYXJrSW5zZXJ0KHQuaW5zZXJ0aW9uUG9zaXRpb24ucGFyZW50LHQuaW5zZXJ0aW9uUG9zaXRpb24ub2Zmc2V0LDEpfWlmKHQuZ3JhdmV5YXJkUG9zaXRpb24pe3RoaXMuX21hcmtSZW1vdmUodC5ncmF2ZXlhcmRQb3NpdGlvbi5wYXJlbnQsdC5ncmF2ZXlhcmRQb3NpdGlvbi5vZmZzZXQsMSl9YnJlYWt9Y2FzZVwibWVyZ2VcIjp7Y29uc3QgZT10LnNvdXJjZVBvc2l0aW9uLnBhcmVudDtpZighdGhpcy5faXNJbkluc2VydGVkRWxlbWVudChlLnBhcmVudCkpe3RoaXMuX21hcmtSZW1vdmUoZS5wYXJlbnQsZS5zdGFydE9mZnNldCwxKX1jb25zdCBpPXQuZ3JhdmV5YXJkUG9zaXRpb24ucGFyZW50O3RoaXMuX21hcmtJbnNlcnQoaSx0LmdyYXZleWFyZFBvc2l0aW9uLm9mZnNldCwxKTtjb25zdCBuPXQudGFyZ2V0UG9zaXRpb24ucGFyZW50O2lmKCF0aGlzLl9pc0luSW5zZXJ0ZWRFbGVtZW50KG4pKXt0aGlzLl9tYXJrSW5zZXJ0KG4sdC50YXJnZXRQb3NpdGlvbi5vZmZzZXQsZS5tYXhPZmZzZXQpfWJyZWFrfX10aGlzLl9jYWNoZWRDaGFuZ2VzPW51bGx9YnVmZmVyTWFya2VyQ2hhbmdlKHQsZSxpLG4pe2NvbnN0IG89dGhpcy5fY2hhbmdlZE1hcmtlcnMuZ2V0KHQpO2lmKCFvKXt0aGlzLl9jaGFuZ2VkTWFya2Vycy5zZXQodCx7b2xkUmFuZ2U6ZSxuZXdSYW5nZTppLGFmZmVjdHNEYXRhOm59KX1lbHNle28ubmV3UmFuZ2U9aTtvLmFmZmVjdHNEYXRhPW47aWYoby5vbGRSYW5nZT09bnVsbCYmby5uZXdSYW5nZT09bnVsbCl7dGhpcy5fY2hhbmdlZE1hcmtlcnMuZGVsZXRlKHQpfX19Z2V0TWFya2Vyc1RvUmVtb3ZlKCl7Y29uc3QgdD1bXTtmb3IoY29uc3RbZSxpXW9mIHRoaXMuX2NoYW5nZWRNYXJrZXJzKXtpZihpLm9sZFJhbmdlIT1udWxsKXt0LnB1c2goe25hbWU6ZSxyYW5nZTppLm9sZFJhbmdlfSl9fXJldHVybiB0fWdldE1hcmtlcnNUb0FkZCgpe2NvbnN0IHQ9W107Zm9yKGNvbnN0W2UsaV1vZiB0aGlzLl9jaGFuZ2VkTWFya2Vycyl7aWYoaS5uZXdSYW5nZSE9bnVsbCl7dC5wdXNoKHtuYW1lOmUscmFuZ2U6aS5uZXdSYW5nZX0pfX1yZXR1cm4gdH1nZXRDaGFuZ2VkTWFya2Vycygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuX2NoYW5nZWRNYXJrZXJzKS5tYXAodD0+KHtuYW1lOnRbMF0sZGF0YTp7b2xkUmFuZ2U6dFsxXS5vbGRSYW5nZSxuZXdSYW5nZTp0WzFdLm5ld1JhbmdlfX0pKX1oYXNEYXRhQ2hhbmdlcygpe2Zvcihjb25zdFssdF1vZiB0aGlzLl9jaGFuZ2VkTWFya2Vycyl7aWYodC5hZmZlY3RzRGF0YSl7cmV0dXJuIHRydWV9fXJldHVybiB0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LnNpemU+MH1nZXRDaGFuZ2VzKHQ9e2luY2x1ZGVDaGFuZ2VzSW5HcmF2ZXlhcmQ6ZmFsc2V9KXtpZih0aGlzLl9jYWNoZWRDaGFuZ2VzKXtpZih0LmluY2x1ZGVDaGFuZ2VzSW5HcmF2ZXlhcmQpe3JldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzV2l0aEdyYXZleWFyZC5zbGljZSgpfWVsc2V7cmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMuc2xpY2UoKX19Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiB0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmtleXMoKSl7Y29uc3QgaT10aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmdldCh0KS5zb3J0KCh0LGUpPT57aWYodC5vZmZzZXQ9PT1lLm9mZnNldCl7aWYodC50eXBlIT1lLnR5cGUpe3JldHVybiB0LnR5cGU9PVwicmVtb3ZlXCI/LTE6MX1yZXR1cm4gMH1yZXR1cm4gdC5vZmZzZXQ8ZS5vZmZzZXQ/LTE6MX0pO2NvbnN0IG49dGhpcy5fZWxlbWVudFNuYXBzaG90cy5nZXQodCk7Y29uc3Qgbz1nbSh0LmdldENoaWxkcmVuKCkpO2NvbnN0IHI9bW0obi5sZW5ndGgsaSk7bGV0IHM9MDtsZXQgYT0wO2Zvcihjb25zdCBpIG9mIHIpe2lmKGk9PT1cImlcIil7ZS5wdXNoKHRoaXMuX2dldEluc2VydERpZmYodCxzLG9bc10ubmFtZSkpO3MrK31lbHNlIGlmKGk9PT1cInJcIil7ZS5wdXNoKHRoaXMuX2dldFJlbW92ZURpZmYodCxzLG5bYV0ubmFtZSkpO2ErK31lbHNlIGlmKGk9PT1cImFcIil7Y29uc3QgaT1vW3NdLmF0dHJpYnV0ZXM7Y29uc3Qgcj1uW2FdLmF0dHJpYnV0ZXM7bGV0IGM7aWYob1tzXS5uYW1lPT1cIiR0ZXh0XCIpe2M9bmV3ICRoKFVoLl9jcmVhdGVBdCh0LHMpLFVoLl9jcmVhdGVBdCh0LHMrMSkpfWVsc2V7Y29uc3QgZT10Lm9mZnNldFRvSW5kZXgocyk7Yz1uZXcgJGgoVWguX2NyZWF0ZUF0KHQscyksVWguX2NyZWF0ZUF0KHQuZ2V0Q2hpbGQoZSksMCkpfWUucHVzaCguLi50aGlzLl9nZXRBdHRyaWJ1dGVzRGlmZihjLHIsaSkpO3MrKzthKyt9ZWxzZXtzKys7YSsrfX19ZS5zb3J0KCh0LGUpPT57aWYodC5wb3NpdGlvbi5yb290IT1lLnBvc2l0aW9uLnJvb3Qpe3JldHVybiB0LnBvc2l0aW9uLnJvb3Qucm9vdE5hbWU8ZS5wb3NpdGlvbi5yb290LnJvb3ROYW1lPy0xOjF9aWYodC5wb3NpdGlvbi5pc0VxdWFsKGUucG9zaXRpb24pKXtyZXR1cm4gdC5jaGFuZ2VDb3VudC1lLmNoYW5nZUNvdW50fXJldHVybiB0LnBvc2l0aW9uLmlzQmVmb3JlKGUucG9zaXRpb24pPy0xOjF9KTtmb3IobGV0IHQ9MTt0PGUubGVuZ3RoO3QrKyl7Y29uc3QgaT1lW3QtMV07Y29uc3Qgbj1lW3RdO2NvbnN0IG89aS50eXBlPT1cInJlbW92ZVwiJiZuLnR5cGU9PVwicmVtb3ZlXCImJmkubmFtZT09XCIkdGV4dFwiJiZuLm5hbWU9PVwiJHRleHRcIiYmaS5wb3NpdGlvbi5pc0VxdWFsKG4ucG9zaXRpb24pO2NvbnN0IHI9aS50eXBlPT1cImluc2VydFwiJiZuLnR5cGU9PVwiaW5zZXJ0XCImJmkubmFtZT09XCIkdGV4dFwiJiZuLm5hbWU9PVwiJHRleHRcIiYmaS5wb3NpdGlvbi5wYXJlbnQ9PW4ucG9zaXRpb24ucGFyZW50JiZpLnBvc2l0aW9uLm9mZnNldCtpLmxlbmd0aD09bi5wb3NpdGlvbi5vZmZzZXQ7Y29uc3Qgcz1pLnR5cGU9PVwiYXR0cmlidXRlXCImJm4udHlwZT09XCJhdHRyaWJ1dGVcIiYmaS5wb3NpdGlvbi5wYXJlbnQ9PW4ucG9zaXRpb24ucGFyZW50JiZpLnJhbmdlLmlzRmxhdCYmbi5yYW5nZS5pc0ZsYXQmJmkucG9zaXRpb24ub2Zmc2V0K2kubGVuZ3RoPT1uLnBvc2l0aW9uLm9mZnNldCYmaS5hdHRyaWJ1dGVLZXk9PW4uYXR0cmlidXRlS2V5JiZpLmF0dHJpYnV0ZU9sZFZhbHVlPT1uLmF0dHJpYnV0ZU9sZFZhbHVlJiZpLmF0dHJpYnV0ZU5ld1ZhbHVlPT1uLmF0dHJpYnV0ZU5ld1ZhbHVlO2lmKG98fHJ8fHMpe2VbdC0xXS5sZW5ndGgrKztpZihzKXtlW3QtMV0ucmFuZ2UuZW5kPWVbdC0xXS5yYW5nZS5lbmQuZ2V0U2hpZnRlZEJ5KDEpfWUuc3BsaWNlKHQsMSk7dC0tfX1mb3IoY29uc3QgdCBvZiBlKXtkZWxldGUgdC5jaGFuZ2VDb3VudDtpZih0LnR5cGU9PVwiYXR0cmlidXRlXCIpe2RlbGV0ZSB0LnBvc2l0aW9uO2RlbGV0ZSB0Lmxlbmd0aH19dGhpcy5fY2hhbmdlQ291bnQ9MDt0aGlzLl9jYWNoZWRDaGFuZ2VzV2l0aEdyYXZleWFyZD1lLnNsaWNlKCk7dGhpcy5fY2FjaGVkQ2hhbmdlcz1lLnNsaWNlKCkuZmlsdGVyKHBtKTtpZih0LmluY2x1ZGVDaGFuZ2VzSW5HcmF2ZXlhcmQpe3JldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzV2l0aEdyYXZleWFyZH1lbHNle3JldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzfX1yZXNldCgpe3RoaXMuX2NoYW5nZXNJbkVsZW1lbnQuY2xlYXIoKTt0aGlzLl9lbGVtZW50U25hcHNob3RzLmNsZWFyKCk7dGhpcy5fY2hhbmdlZE1hcmtlcnMuY2xlYXIoKTt0aGlzLl9jYWNoZWRDaGFuZ2VzPW51bGx9X21hcmtJbnNlcnQodCxlLGkpe2NvbnN0IG49e3R5cGU6XCJpbnNlcnRcIixvZmZzZXQ6ZSxob3dNYW55OmksY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK307dGhpcy5fbWFya0NoYW5nZSh0LG4pfV9tYXJrUmVtb3ZlKHQsZSxpKXtjb25zdCBuPXt0eXBlOlwicmVtb3ZlXCIsb2Zmc2V0OmUsaG93TWFueTppLGNvdW50OnRoaXMuX2NoYW5nZUNvdW50Kyt9O3RoaXMuX21hcmtDaGFuZ2UodCxuKTt0aGlzLl9yZW1vdmVBbGxOZXN0ZWRDaGFuZ2VzKHQsZSxpKX1fbWFya0F0dHJpYnV0ZSh0KXtjb25zdCBlPXt0eXBlOlwiYXR0cmlidXRlXCIsb2Zmc2V0OnQuc3RhcnRPZmZzZXQsaG93TWFueTp0Lm9mZnNldFNpemUsY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK307dGhpcy5fbWFya0NoYW5nZSh0LnBhcmVudCxlKX1fbWFya0NoYW5nZSh0LGUpe3RoaXMuX21ha2VTbmFwc2hvdCh0KTtjb25zdCBpPXRoaXMuX2dldENoYW5nZXNGb3JFbGVtZW50KHQpO3RoaXMuX2hhbmRsZUNoYW5nZShlLGkpO2kucHVzaChlKTtmb3IobGV0IHQ9MDt0PGkubGVuZ3RoO3QrKyl7aWYoaVt0XS5ob3dNYW55PDEpe2kuc3BsaWNlKHQsMSk7dC0tfX19X2dldENoYW5nZXNGb3JFbGVtZW50KHQpe2xldCBlO2lmKHRoaXMuX2NoYW5nZXNJbkVsZW1lbnQuaGFzKHQpKXtlPXRoaXMuX2NoYW5nZXNJbkVsZW1lbnQuZ2V0KHQpfWVsc2V7ZT1bXTt0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LnNldCh0LGUpfXJldHVybiBlfV9tYWtlU25hcHNob3QodCl7aWYoIXRoaXMuX2VsZW1lbnRTbmFwc2hvdHMuaGFzKHQpKXt0aGlzLl9lbGVtZW50U25hcHNob3RzLnNldCh0LGdtKHQuZ2V0Q2hpbGRyZW4oKSkpfX1faGFuZGxlQ2hhbmdlKHQsZSl7dC5ub2Rlc1RvSGFuZGxlPXQuaG93TWFueTtmb3IoY29uc3QgaSBvZiBlKXtjb25zdCBuPXQub2Zmc2V0K3QuaG93TWFueTtjb25zdCBvPWkub2Zmc2V0K2kuaG93TWFueTtpZih0LnR5cGU9PVwiaW5zZXJ0XCIpe2lmKGkudHlwZT09XCJpbnNlcnRcIil7aWYodC5vZmZzZXQ8PWkub2Zmc2V0KXtpLm9mZnNldCs9dC5ob3dNYW55fWVsc2UgaWYodC5vZmZzZXQ8byl7aS5ob3dNYW55Kz10Lm5vZGVzVG9IYW5kbGU7dC5ub2Rlc1RvSGFuZGxlPTB9fWlmKGkudHlwZT09XCJyZW1vdmVcIil7aWYodC5vZmZzZXQ8aS5vZmZzZXQpe2kub2Zmc2V0Kz10Lmhvd01hbnl9fWlmKGkudHlwZT09XCJhdHRyaWJ1dGVcIil7aWYodC5vZmZzZXQ8PWkub2Zmc2V0KXtpLm9mZnNldCs9dC5ob3dNYW55fWVsc2UgaWYodC5vZmZzZXQ8byl7Y29uc3Qgbz1pLmhvd01hbnk7aS5ob3dNYW55PXQub2Zmc2V0LWkub2Zmc2V0O2UudW5zaGlmdCh7dHlwZTpcImF0dHJpYnV0ZVwiLG9mZnNldDpuLGhvd01hbnk6by1pLmhvd01hbnksY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK30pfX19aWYodC50eXBlPT1cInJlbW92ZVwiKXtpZihpLnR5cGU9PVwiaW5zZXJ0XCIpe2lmKG48PWkub2Zmc2V0KXtpLm9mZnNldC09dC5ob3dNYW55fWVsc2UgaWYobjw9byl7aWYodC5vZmZzZXQ8aS5vZmZzZXQpe2NvbnN0IGU9bi1pLm9mZnNldDtpLm9mZnNldD10Lm9mZnNldDtpLmhvd01hbnktPWU7dC5ub2Rlc1RvSGFuZGxlLT1lfWVsc2V7aS5ob3dNYW55LT10Lm5vZGVzVG9IYW5kbGU7dC5ub2Rlc1RvSGFuZGxlPTB9fWVsc2V7aWYodC5vZmZzZXQ8PWkub2Zmc2V0KXt0Lm5vZGVzVG9IYW5kbGUtPWkuaG93TWFueTtpLmhvd01hbnk9MH1lbHNlIGlmKHQub2Zmc2V0PG8pe2NvbnN0IGU9by10Lm9mZnNldDtpLmhvd01hbnktPWU7dC5ub2Rlc1RvSGFuZGxlLT1lfX19aWYoaS50eXBlPT1cInJlbW92ZVwiKXtpZihuPD1pLm9mZnNldCl7aS5vZmZzZXQtPXQuaG93TWFueX1lbHNlIGlmKHQub2Zmc2V0PGkub2Zmc2V0KXt0Lm5vZGVzVG9IYW5kbGUrPWkuaG93TWFueTtpLmhvd01hbnk9MH19aWYoaS50eXBlPT1cImF0dHJpYnV0ZVwiKXtpZihuPD1pLm9mZnNldCl7aS5vZmZzZXQtPXQuaG93TWFueX1lbHNlIGlmKHQub2Zmc2V0PGkub2Zmc2V0KXtjb25zdCBlPW4taS5vZmZzZXQ7aS5vZmZzZXQ9dC5vZmZzZXQ7aS5ob3dNYW55LT1lfWVsc2UgaWYodC5vZmZzZXQ8byl7aWYobjw9byl7Y29uc3Qgbj1pLmhvd01hbnk7aS5ob3dNYW55PXQub2Zmc2V0LWkub2Zmc2V0O2NvbnN0IG89bi1pLmhvd01hbnktdC5ub2Rlc1RvSGFuZGxlO2UudW5zaGlmdCh7dHlwZTpcImF0dHJpYnV0ZVwiLG9mZnNldDp0Lm9mZnNldCxob3dNYW55Om8sY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK30pfWVsc2V7aS5ob3dNYW55LT1vLXQub2Zmc2V0fX19fWlmKHQudHlwZT09XCJhdHRyaWJ1dGVcIil7aWYoaS50eXBlPT1cImluc2VydFwiKXtpZih0Lm9mZnNldDxpLm9mZnNldCYmbj5pLm9mZnNldCl7aWYobj5vKXtjb25zdCB0PXt0eXBlOlwiYXR0cmlidXRlXCIsb2Zmc2V0Om8saG93TWFueTpuLW8sY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK307dGhpcy5faGFuZGxlQ2hhbmdlKHQsZSk7ZS5wdXNoKHQpfXQubm9kZXNUb0hhbmRsZT1pLm9mZnNldC10Lm9mZnNldDt0Lmhvd01hbnk9dC5ub2Rlc1RvSGFuZGxlfWVsc2UgaWYodC5vZmZzZXQ+PWkub2Zmc2V0JiZ0Lm9mZnNldDxvKXtpZihuPm8pe3Qubm9kZXNUb0hhbmRsZT1uLW87dC5vZmZzZXQ9b31lbHNle3Qubm9kZXNUb0hhbmRsZT0wfX19aWYoaS50eXBlPT1cInJlbW92ZVwiKXtpZih0Lm9mZnNldDxpLm9mZnNldCYmbj5pLm9mZnNldCl7Y29uc3Qgbz17dHlwZTpcImF0dHJpYnV0ZVwiLG9mZnNldDppLm9mZnNldCxob3dNYW55Om4taS5vZmZzZXQsY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK307dGhpcy5faGFuZGxlQ2hhbmdlKG8sZSk7ZS5wdXNoKG8pO3Qubm9kZXNUb0hhbmRsZT1pLm9mZnNldC10Lm9mZnNldDt0Lmhvd01hbnk9dC5ub2Rlc1RvSGFuZGxlfX1pZihpLnR5cGU9PVwiYXR0cmlidXRlXCIpe2lmKHQub2Zmc2V0Pj1pLm9mZnNldCYmbjw9byl7dC5ub2Rlc1RvSGFuZGxlPTA7dC5ob3dNYW55PTA7dC5vZmZzZXQ9MH1lbHNlIGlmKHQub2Zmc2V0PD1pLm9mZnNldCYmbj49byl7aS5ob3dNYW55PTB9fX19dC5ob3dNYW55PXQubm9kZXNUb0hhbmRsZTtkZWxldGUgdC5ub2Rlc1RvSGFuZGxlfV9nZXRJbnNlcnREaWZmKHQsZSxpKXtyZXR1cm57dHlwZTpcImluc2VydFwiLHBvc2l0aW9uOlVoLl9jcmVhdGVBdCh0LGUpLG5hbWU6aSxsZW5ndGg6MSxjaGFuZ2VDb3VudDp0aGlzLl9jaGFuZ2VDb3VudCsrfX1fZ2V0UmVtb3ZlRGlmZih0LGUsaSl7cmV0dXJue3R5cGU6XCJyZW1vdmVcIixwb3NpdGlvbjpVaC5fY3JlYXRlQXQodCxlKSxuYW1lOmksbGVuZ3RoOjEsY2hhbmdlQ291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK319X2dldEF0dHJpYnV0ZXNEaWZmKHQsZSxpKXtjb25zdCBuPVtdO2k9bmV3IE1hcChpKTtmb3IoY29uc3RbbyxyXW9mIGUpe2NvbnN0IGU9aS5oYXMobyk/aS5nZXQobyk6bnVsbDtpZihlIT09cil7bi5wdXNoKHt0eXBlOlwiYXR0cmlidXRlXCIscG9zaXRpb246dC5zdGFydCxyYW5nZTp0LmNsb25lKCksbGVuZ3RoOjEsYXR0cmlidXRlS2V5Om8sYXR0cmlidXRlT2xkVmFsdWU6cixhdHRyaWJ1dGVOZXdWYWx1ZTplLGNoYW5nZUNvdW50OnRoaXMuX2NoYW5nZUNvdW50Kyt9KX1pLmRlbGV0ZShvKX1mb3IoY29uc3RbZSxvXW9mIGkpe24ucHVzaCh7dHlwZTpcImF0dHJpYnV0ZVwiLHBvc2l0aW9uOnQuc3RhcnQscmFuZ2U6dC5jbG9uZSgpLGxlbmd0aDoxLGF0dHJpYnV0ZUtleTplLGF0dHJpYnV0ZU9sZFZhbHVlOm51bGwsYXR0cmlidXRlTmV3VmFsdWU6byxjaGFuZ2VDb3VudDp0aGlzLl9jaGFuZ2VDb3VudCsrfSl9cmV0dXJuIG59X2lzSW5JbnNlcnRlZEVsZW1lbnQodCl7Y29uc3QgZT10LnBhcmVudDtpZighZSl7cmV0dXJuIGZhbHNlfWNvbnN0IGk9dGhpcy5fY2hhbmdlc0luRWxlbWVudC5nZXQoZSk7Y29uc3Qgbj10LnN0YXJ0T2Zmc2V0O2lmKGkpe2Zvcihjb25zdCB0IG9mIGkpe2lmKHQudHlwZT09XCJpbnNlcnRcIiYmbj49dC5vZmZzZXQmJm48dC5vZmZzZXQrdC5ob3dNYW55KXtyZXR1cm4gdHJ1ZX19fXJldHVybiB0aGlzLl9pc0luSW5zZXJ0ZWRFbGVtZW50KGUpfV9yZW1vdmVBbGxOZXN0ZWRDaGFuZ2VzKHQsZSxpKXtjb25zdCBuPW5ldyAkaChVaC5fY3JlYXRlQXQodCxlKSxVaC5fY3JlYXRlQXQodCxlK2kpKTtmb3IoY29uc3QgdCBvZiBuLmdldEl0ZW1zKHtzaGFsbG93OnRydWV9KSl7aWYodC5pcyhcImVsZW1lbnRcIikpe3RoaXMuX2VsZW1lbnRTbmFwc2hvdHMuZGVsZXRlKHQpO3RoaXMuX2NoYW5nZXNJbkVsZW1lbnQuZGVsZXRlKHQpO3RoaXMuX3JlbW92ZUFsbE5lc3RlZENoYW5nZXModCwwLHQubWF4T2Zmc2V0KX19fX1mdW5jdGlvbiBnbSh0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBpIG9mIHQpe2lmKGkuaXMoXCJ0ZXh0XCIpKXtmb3IobGV0IHQ9MDt0PGkuZGF0YS5sZW5ndGg7dCsrKXtlLnB1c2goe25hbWU6XCIkdGV4dFwiLGF0dHJpYnV0ZXM6bmV3IE1hcChpLmdldEF0dHJpYnV0ZXMoKSl9KX19ZWxzZXtlLnB1c2goe25hbWU6aS5uYW1lLGF0dHJpYnV0ZXM6bmV3IE1hcChpLmdldEF0dHJpYnV0ZXMoKSl9KX19cmV0dXJuIGV9ZnVuY3Rpb24gbW0odCxlKXtjb25zdCBpPVtdO2xldCBuPTA7bGV0IG89MDtmb3IoY29uc3QgdCBvZiBlKXtpZih0Lm9mZnNldD5uKXtmb3IobGV0IGU9MDtlPHQub2Zmc2V0LW47ZSsrKXtpLnB1c2goXCJlXCIpfW8rPXQub2Zmc2V0LW59aWYodC50eXBlPT1cImluc2VydFwiKXtmb3IobGV0IGU9MDtlPHQuaG93TWFueTtlKyspe2kucHVzaChcImlcIil9bj10Lm9mZnNldCt0Lmhvd01hbnl9ZWxzZSBpZih0LnR5cGU9PVwicmVtb3ZlXCIpe2ZvcihsZXQgZT0wO2U8dC5ob3dNYW55O2UrKyl7aS5wdXNoKFwiclwiKX1uPXQub2Zmc2V0O28rPXQuaG93TWFueX1lbHNle2kucHVzaCguLi5cImFcIi5yZXBlYXQodC5ob3dNYW55KS5zcGxpdChcIlwiKSk7bj10Lm9mZnNldCt0Lmhvd01hbnk7bys9dC5ob3dNYW55fX1pZihvPHQpe2ZvcihsZXQgZT0wO2U8dC1vLW47ZSsrKXtpLnB1c2goXCJlXCIpfX1yZXR1cm4gaX1mdW5jdGlvbiBwbSh0KXtjb25zdCBlPXQucG9zaXRpb24mJnQucG9zaXRpb24ucm9vdC5yb290TmFtZT09XCIkZ3JhdmV5YXJkXCI7Y29uc3QgaT10LnJhbmdlJiZ0LnJhbmdlLnJvb3Qucm9vdE5hbWU9PVwiJGdyYXZleWFyZFwiO3JldHVybiFlJiYhaX1jbGFzcyBibXtjb25zdHJ1Y3Rvcigpe3RoaXMuX29wZXJhdGlvbnM9W107dGhpcy5fdW5kb1BhaXJzPW5ldyBNYXA7dGhpcy5fdW5kb25lT3BlcmF0aW9ucz1uZXcgU2V0fWFkZE9wZXJhdGlvbih0KXtpZih0aGlzLl9vcGVyYXRpb25zLmluY2x1ZGVzKHQpKXtyZXR1cm59dGhpcy5fb3BlcmF0aW9ucy5wdXNoKHQpfWdldE9wZXJhdGlvbnModD0wLGU9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKXtpZih0PDApe3JldHVybltdfXJldHVybiB0aGlzLl9vcGVyYXRpb25zLnNsaWNlKHQsZSl9Z2V0T3BlcmF0aW9uKHQpe3JldHVybiB0aGlzLl9vcGVyYXRpb25zW3RdfXNldE9wZXJhdGlvbkFzVW5kb25lKHQsZSl7dGhpcy5fdW5kb1BhaXJzLnNldChlLHQpO3RoaXMuX3VuZG9uZU9wZXJhdGlvbnMuYWRkKHQpfWlzVW5kb2luZ09wZXJhdGlvbih0KXtyZXR1cm4gdGhpcy5fdW5kb1BhaXJzLmhhcyh0KX1pc1VuZG9uZU9wZXJhdGlvbih0KXtyZXR1cm4gdGhpcy5fdW5kb25lT3BlcmF0aW9ucy5oYXModCl9Z2V0VW5kb25lT3BlcmF0aW9uKHQpe3JldHVybiB0aGlzLl91bmRvUGFpcnMuZ2V0KHQpfX1mdW5jdGlvbiB3bSh0KXtyZXR1cm4hIXQmJnQubGVuZ3RoPT0xJiYvW1xcdTAzMDAtXFx1MDM2ZlxcdTFhYjAtXFx1MWFmZlxcdTFkYzAtXFx1MWRmZlxcdTIwZDAtXFx1MjBmZlxcdWZlMjAtXFx1ZmUyZl0vLnRlc3QodCl9ZnVuY3Rpb24ga20odCl7cmV0dXJuISF0JiZ0Lmxlbmd0aD09MSYmL1tcXHVkODAwLVxcdWRiZmZdLy50ZXN0KHQpfWZ1bmN0aW9uIF9tKHQpe3JldHVybiEhdCYmdC5sZW5ndGg9PTEmJi9bXFx1ZGMwMC1cXHVkZmZmXS8udGVzdCh0KX1mdW5jdGlvbiB2bSh0LGUpe3JldHVybiBrbSh0LmNoYXJBdChlLTEpKSYmX20odC5jaGFyQXQoZSkpfWZ1bmN0aW9uIHltKHQsZSl7cmV0dXJuIHdtKHQuY2hhckF0KGUpKX1jb25zdCB4bT1cIiRncmF2ZXlhcmRcIjtjbGFzcyBDbXtjb25zdHJ1Y3Rvcih0KXt0aGlzLm1vZGVsPXQ7dGhpcy52ZXJzaW9uPTA7dGhpcy5oaXN0b3J5PW5ldyBibSh0aGlzKTt0aGlzLnNlbGVjdGlvbj1uZXcgZGYodGhpcyk7dGhpcy5yb290cz1uZXcgeXMoe2lkUHJvcGVydHk6XCJyb290TmFtZVwifSk7dGhpcy5kaWZmZXI9bmV3IGZtKHQubWFya2Vycyk7dGhpcy5fcG9zdEZpeGVycz1uZXcgU2V0O3RoaXMuX2hhc1NlbGVjdGlvbkNoYW5nZWRGcm9tVGhlTGFzdENoYW5nZUJsb2NrPWZhbHNlO3RoaXMuY3JlYXRlUm9vdChcIiRyb290XCIseG0pO3RoaXMubGlzdGVuVG8odCxcImFwcGx5T3BlcmF0aW9uXCIsKHQsZSk9Pntjb25zdCBpPWVbMF07aWYoaS5pc0RvY3VtZW50T3BlcmF0aW9uJiZpLmJhc2VWZXJzaW9uIT09dGhpcy52ZXJzaW9uKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibW9kZWwtZG9jdW1lbnQtYXBwbHlPcGVyYXRpb24td3JvbmctdmVyc2lvbjogT25seSBvcGVyYXRpb25zIHdpdGggbWF0Y2hpbmcgdmVyc2lvbnMgY2FuIGJlIGFwcGxpZWQuXCIsdGhpcyx7b3BlcmF0aW9uOml9KX19LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO3RoaXMubGlzdGVuVG8odCxcImFwcGx5T3BlcmF0aW9uXCIsKHQsZSk9Pntjb25zdCBpPWVbMF07aWYoaS5pc0RvY3VtZW50T3BlcmF0aW9uKXt0aGlzLmRpZmZlci5idWZmZXJPcGVyYXRpb24oaSl9fSx7cHJpb3JpdHk6XCJoaWdoXCJ9KTt0aGlzLmxpc3RlblRvKHQsXCJhcHBseU9wZXJhdGlvblwiLCh0LGUpPT57Y29uc3QgaT1lWzBdO2lmKGkuaXNEb2N1bWVudE9wZXJhdGlvbil7dGhpcy52ZXJzaW9uKys7dGhpcy5oaXN0b3J5LmFkZE9wZXJhdGlvbihpKX19LHtwcmlvcml0eTpcImxvd1wifSk7dGhpcy5saXN0ZW5Ubyh0aGlzLnNlbGVjdGlvbixcImNoYW5nZVwiLCgpPT57dGhpcy5faGFzU2VsZWN0aW9uQ2hhbmdlZEZyb21UaGVMYXN0Q2hhbmdlQmxvY2s9dHJ1ZX0pO3RoaXMubGlzdGVuVG8odC5tYXJrZXJzLFwidXBkYXRlXCIsKHQsZSxpLG4pPT57dGhpcy5kaWZmZXIuYnVmZmVyTWFya2VyQ2hhbmdlKGUubmFtZSxpLG4sZS5hZmZlY3RzRGF0YSk7aWYoaT09PW51bGwpe2Uub24oXCJjaGFuZ2VcIiwodCxpKT0+e3RoaXMuZGlmZmVyLmJ1ZmZlck1hcmtlckNoYW5nZShlLm5hbWUsaSxlLmdldFJhbmdlKCksZS5hZmZlY3RzRGF0YSl9KX19KX1nZXQgZ3JhdmV5YXJkKCl7cmV0dXJuIHRoaXMuZ2V0Um9vdCh4bSl9Y3JlYXRlUm9vdCh0PVwiJHJvb3RcIixlPVwibWFpblwiKXtpZih0aGlzLnJvb3RzLmdldChlKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1vZGVsLWRvY3VtZW50LWNyZWF0ZVJvb3QtbmFtZS1leGlzdHM6IFJvb3Qgd2l0aCBzcGVjaWZpZWQgbmFtZSBhbHJlYWR5IGV4aXN0cy5cIix0aGlzLHtuYW1lOmV9KX1jb25zdCBpPW5ldyBzbSh0aGlzLHQsZSk7dGhpcy5yb290cy5hZGQoaSk7cmV0dXJuIGl9ZGVzdHJveSgpe3RoaXMuc2VsZWN0aW9uLmRlc3Ryb3koKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1nZXRSb290KHQ9XCJtYWluXCIpe3JldHVybiB0aGlzLnJvb3RzLmdldCh0KX1nZXRSb290TmFtZXMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnJvb3RzLHQ9PnQucm9vdE5hbWUpLmZpbHRlcih0PT50IT14bSl9cmVnaXN0ZXJQb3N0Rml4ZXIodCl7dGhpcy5fcG9zdEZpeGVycy5hZGQodCl9dG9KU09OKCl7Y29uc3QgdD1Ccyh0aGlzKTt0LnNlbGVjdGlvbj1cIltlbmdpbmUubW9kZWwuRG9jdW1lbnRTZWxlY3Rpb25dXCI7dC5tb2RlbD1cIltlbmdpbmUubW9kZWwuTW9kZWxdXCI7cmV0dXJuIHR9X2hhbmRsZUNoYW5nZUJsb2NrKHQpe2lmKHRoaXMuX2hhc0RvY3VtZW50Q2hhbmdlZEZyb21UaGVMYXN0Q2hhbmdlQmxvY2soKSl7dGhpcy5fY2FsbFBvc3RGaXhlcnModCk7dGhpcy5zZWxlY3Rpb24ucmVmcmVzaCgpO2lmKHRoaXMuZGlmZmVyLmhhc0RhdGFDaGFuZ2VzKCkpe3RoaXMuZmlyZShcImNoYW5nZTpkYXRhXCIsdC5iYXRjaCl9ZWxzZXt0aGlzLmZpcmUoXCJjaGFuZ2VcIix0LmJhdGNoKX10aGlzLnNlbGVjdGlvbi5yZWZyZXNoKCk7dGhpcy5kaWZmZXIucmVzZXQoKX10aGlzLl9oYXNTZWxlY3Rpb25DaGFuZ2VkRnJvbVRoZUxhc3RDaGFuZ2VCbG9jaz1mYWxzZX1faGFzRG9jdW1lbnRDaGFuZ2VkRnJvbVRoZUxhc3RDaGFuZ2VCbG9jaygpe3JldHVybiF0aGlzLmRpZmZlci5pc0VtcHR5fHx0aGlzLl9oYXNTZWxlY3Rpb25DaGFuZ2VkRnJvbVRoZUxhc3RDaGFuZ2VCbG9ja31fZ2V0RGVmYXVsdFJvb3QoKXtmb3IoY29uc3QgdCBvZiB0aGlzLnJvb3RzKXtpZih0IT09dGhpcy5ncmF2ZXlhcmQpe3JldHVybiB0fX1yZXR1cm4gdGhpcy5ncmF2ZXlhcmR9X2dldERlZmF1bHRSYW5nZSgpe2NvbnN0IHQ9dGhpcy5fZ2V0RGVmYXVsdFJvb3QoKTtjb25zdCBlPXRoaXMubW9kZWw7Y29uc3QgaT1lLnNjaGVtYTtjb25zdCBuPWUuY3JlYXRlUG9zaXRpb25Gcm9tUGF0aCh0LFswXSk7Y29uc3Qgbz1pLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShuKTtyZXR1cm4gb3x8ZS5jcmVhdGVSYW5nZShuKX1fdmFsaWRhdGVTZWxlY3Rpb25SYW5nZSh0KXtyZXR1cm4gQW0odC5zdGFydCkmJkFtKHQuZW5kKX1fY2FsbFBvc3RGaXhlcnModCl7bGV0IGU9ZmFsc2U7ZG97Zm9yKGNvbnN0IGkgb2YgdGhpcy5fcG9zdEZpeGVycyl7dGhpcy5zZWxlY3Rpb24ucmVmcmVzaCgpO2U9aSh0KTtpZihlKXticmVha319fXdoaWxlKGUpfX12cyhDbSxkcyk7ZnVuY3Rpb24gQW0odCl7Y29uc3QgZT10LnRleHROb2RlO2lmKGUpe2NvbnN0IGk9ZS5kYXRhO2NvbnN0IG49dC5vZmZzZXQtZS5zdGFydE9mZnNldDtyZXR1cm4hdm0oaSxuKSYmIXltKGksbil9cmV0dXJuIHRydWV9Y2xhc3MgVG17Y29uc3RydWN0b3IoKXt0aGlzLl9tYXJrZXJzPW5ldyBNYXB9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5fbWFya2Vycy52YWx1ZXMoKX1oYXModCl7cmV0dXJuIHRoaXMuX21hcmtlcnMuaGFzKHQpfWdldCh0KXtyZXR1cm4gdGhpcy5fbWFya2Vycy5nZXQodCl8fG51bGx9X3NldCh0LGUsaT1mYWxzZSxuPWZhbHNlKXtjb25zdCBvPXQgaW5zdGFuY2VvZiBQbT90Lm5hbWU6dDtjb25zdCByPXRoaXMuX21hcmtlcnMuZ2V0KG8pO2lmKHIpe2NvbnN0IHQ9ci5nZXRSYW5nZSgpO2xldCBzPWZhbHNlO2lmKCF0LmlzRXF1YWwoZSkpe3IuX2F0dGFjaExpdmVSYW5nZShyZi5mcm9tUmFuZ2UoZSkpO3M9dHJ1ZX1pZihpIT1yLm1hbmFnZWRVc2luZ09wZXJhdGlvbnMpe3IuX21hbmFnZWRVc2luZ09wZXJhdGlvbnM9aTtzPXRydWV9aWYodHlwZW9mIG49PT1cImJvb2xlYW5cIiYmbiE9ci5hZmZlY3RzRGF0YSl7ci5fYWZmZWN0c0RhdGE9bjtzPXRydWV9aWYocyl7dGhpcy5maXJlKFwidXBkYXRlOlwiK28scix0LGUpfXJldHVybiByfWNvbnN0IHM9cmYuZnJvbVJhbmdlKGUpO2NvbnN0IGE9bmV3IFBtKG8scyxpLG4pO3RoaXMuX21hcmtlcnMuc2V0KG8sYSk7dGhpcy5maXJlKFwidXBkYXRlOlwiK28sYSxudWxsLGUpO3JldHVybiBhfV9yZW1vdmUodCl7Y29uc3QgZT10IGluc3RhbmNlb2YgUG0/dC5uYW1lOnQ7Y29uc3QgaT10aGlzLl9tYXJrZXJzLmdldChlKTtpZihpKXt0aGlzLl9tYXJrZXJzLmRlbGV0ZShlKTt0aGlzLmZpcmUoXCJ1cGRhdGU6XCIrZSxpLGkuZ2V0UmFuZ2UoKSxudWxsKTt0aGlzLl9kZXN0cm95TWFya2VyKGkpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1fcmVmcmVzaCh0KXtjb25zdCBlPXQgaW5zdGFuY2VvZiBQbT90Lm5hbWU6dDtjb25zdCBpPXRoaXMuX21hcmtlcnMuZ2V0KGUpO2lmKCFpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibWFya2VyY29sbGVjdGlvbi1yZWZyZXNoLW1hcmtlci1ub3QtZXhpc3RzOiBNYXJrZXIgd2l0aCBwcm92aWRlZCBuYW1lIGRvZXMgbm90IGV4aXN0cy5cIix0aGlzKX1jb25zdCBuPWkuZ2V0UmFuZ2UoKTt0aGlzLmZpcmUoXCJ1cGRhdGU6XCIrZSxpLG4sbixpLm1hbmFnZWRVc2luZ09wZXJhdGlvbnMsaS5hZmZlY3RzRGF0YSl9KmdldE1hcmtlcnNBdFBvc2l0aW9uKHQpe2Zvcihjb25zdCBlIG9mIHRoaXMpe2lmKGUuZ2V0UmFuZ2UoKS5jb250YWluc1Bvc2l0aW9uKHQpKXt5aWVsZCBlfX19KmdldE1hcmtlcnNJbnRlcnNlY3RpbmdSYW5nZSh0KXtmb3IoY29uc3QgZSBvZiB0aGlzKXtpZihlLmdldFJhbmdlKCkuZ2V0SW50ZXJzZWN0aW9uKHQpIT09bnVsbCl7eWllbGQgZX19fWRlc3Ryb3koKXtmb3IoY29uc3QgdCBvZiB0aGlzLl9tYXJrZXJzLnZhbHVlcygpKXt0aGlzLl9kZXN0cm95TWFya2VyKHQpfXRoaXMuX21hcmtlcnM9bnVsbDt0aGlzLnN0b3BMaXN0ZW5pbmcoKX0qZ2V0TWFya2Vyc0dyb3VwKHQpe2Zvcihjb25zdCBlIG9mIHRoaXMuX21hcmtlcnMudmFsdWVzKCkpe2lmKGUubmFtZS5zdGFydHNXaXRoKHQrXCI6XCIpKXt5aWVsZCBlfX19X2Rlc3Ryb3lNYXJrZXIodCl7dC5zdG9wTGlzdGVuaW5nKCk7dC5fZGV0YWNoTGl2ZVJhbmdlKCl9fXZzKFRtLGRzKTtjbGFzcyBQbXtjb25zdHJ1Y3Rvcih0LGUsaSxuKXt0aGlzLm5hbWU9dDt0aGlzLl9saXZlUmFuZ2U9dGhpcy5fYXR0YWNoTGl2ZVJhbmdlKGUpO3RoaXMuX21hbmFnZWRVc2luZ09wZXJhdGlvbnM9aTt0aGlzLl9hZmZlY3RzRGF0YT1ufWdldCBtYW5hZ2VkVXNpbmdPcGVyYXRpb25zKCl7aWYoIXRoaXMuX2xpdmVSYW5nZSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1hcmtlci1kZXN0cm95ZWQ6IENhbm5vdCB1c2UgYSBkZXN0cm95ZWQgbWFya2VyIGluc3RhbmNlLlwiLHRoaXMpfXJldHVybiB0aGlzLl9tYW5hZ2VkVXNpbmdPcGVyYXRpb25zfWdldCBhZmZlY3RzRGF0YSgpe2lmKCF0aGlzLl9saXZlUmFuZ2Upe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtYXJrZXItZGVzdHJveWVkOiBDYW5ub3QgdXNlIGEgZGVzdHJveWVkIG1hcmtlciBpbnN0YW5jZS5cIix0aGlzKX1yZXR1cm4gdGhpcy5fYWZmZWN0c0RhdGF9Z2V0U3RhcnQoKXtpZighdGhpcy5fbGl2ZVJhbmdlKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwibWFya2VyLWRlc3Ryb3llZDogQ2Fubm90IHVzZSBhIGRlc3Ryb3llZCBtYXJrZXIgaW5zdGFuY2UuXCIsdGhpcyl9cmV0dXJuIHRoaXMuX2xpdmVSYW5nZS5zdGFydC5jbG9uZSgpfWdldEVuZCgpe2lmKCF0aGlzLl9saXZlUmFuZ2Upe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtYXJrZXItZGVzdHJveWVkOiBDYW5ub3QgdXNlIGEgZGVzdHJveWVkIG1hcmtlciBpbnN0YW5jZS5cIix0aGlzKX1yZXR1cm4gdGhpcy5fbGl2ZVJhbmdlLmVuZC5jbG9uZSgpfWdldFJhbmdlKCl7aWYoIXRoaXMuX2xpdmVSYW5nZSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcIm1hcmtlci1kZXN0cm95ZWQ6IENhbm5vdCB1c2UgYSBkZXN0cm95ZWQgbWFya2VyIGluc3RhbmNlLlwiLHRoaXMpfXJldHVybiB0aGlzLl9saXZlUmFuZ2UudG9SYW5nZSgpfWlzKHQpe3JldHVybiB0PT1cIm1hcmtlclwifHx0PT1cIm1vZGVsOm1hcmtlclwifV9hdHRhY2hMaXZlUmFuZ2UodCl7aWYodGhpcy5fbGl2ZVJhbmdlKXt0aGlzLl9kZXRhY2hMaXZlUmFuZ2UoKX10LmRlbGVnYXRlKFwiY2hhbmdlOnJhbmdlXCIpLnRvKHRoaXMpO3QuZGVsZWdhdGUoXCJjaGFuZ2U6Y29udGVudFwiKS50byh0aGlzKTt0aGlzLl9saXZlUmFuZ2U9dDtyZXR1cm4gdH1fZGV0YWNoTGl2ZVJhbmdlKCl7dGhpcy5fbGl2ZVJhbmdlLnN0b3BEZWxlZ2F0aW5nKFwiY2hhbmdlOnJhbmdlXCIsdGhpcyk7dGhpcy5fbGl2ZVJhbmdlLnN0b3BEZWxlZ2F0aW5nKFwiY2hhbmdlOmNvbnRlbnRcIix0aGlzKTt0aGlzLl9saXZlUmFuZ2UuZGV0YWNoKCk7dGhpcy5fbGl2ZVJhbmdlPW51bGx9fXZzKFBtLGRzKTtjbGFzcyBTbSBleHRlbmRzIExne2dldCB0eXBlKCl7cmV0dXJuXCJub29wXCJ9Y2xvbmUoKXtyZXR1cm4gbmV3IFNtKHRoaXMuYmFzZVZlcnNpb24pfWdldFJldmVyc2VkKCl7cmV0dXJuIG5ldyBTbSh0aGlzLmJhc2VWZXJzaW9uKzEpfV9leGVjdXRlKCl7fXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuXCJOb09wZXJhdGlvblwifX1jb25zdCBFbT17fTtFbVtRZy5jbGFzc05hbWVdPVFnO0VtW3RtLmNsYXNzTmFtZV09dG07RW1bZW0uY2xhc3NOYW1lXT1lbTtFbVtaZy5jbGFzc05hbWVdPVpnO0VtW1NtLmNsYXNzTmFtZV09U207RW1bTGcuY2xhc3NOYW1lXT1MZztFbVtpbS5jbGFzc05hbWVdPWltO0VtW25tLmNsYXNzTmFtZV09bm07RW1bcm0uY2xhc3NOYW1lXT1ybTtFbVtvbS5jbGFzc05hbWVdPW9tO2NsYXNzIFJte3N0YXRpYyBmcm9tSlNPTih0LGUpe3JldHVybiBFbVt0Ll9fY2xhc3NOYW1lXS5mcm9tSlNPTih0LGUpfX1jbGFzcyBPbSBleHRlbmRzIFVoe2NvbnN0cnVjdG9yKHQsZSxpPVwidG9Ob25lXCIpe3N1cGVyKHQsZSxpKTtpZighdGhpcy5yb290LmlzKFwicm9vdEVsZW1lbnRcIikpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJtb2RlbC1saXZlcG9zaXRpb24tcm9vdC1ub3Qtcm9vdGVsZW1lbnQ6IExpdmVQb3NpdGlvbidzIHJvb3QgaGFzIHRvIGJlIGFuIGluc3RhbmNlIG9mIFJvb3RFbGVtZW50LlwiLHQpfUltLmNhbGwodGhpcyl9ZGV0YWNoKCl7dGhpcy5zdG9wTGlzdGVuaW5nKCl9aXModCl7cmV0dXJuIHQ9PVwibGl2ZVBvc2l0aW9uXCJ8fHQ9PVwibW9kZWw6bGl2ZVBvc2l0aW9uXCJ8fHN1cGVyLmlzKHQpfXRvUG9zaXRpb24oKXtyZXR1cm4gbmV3IFVoKHRoaXMucm9vdCx0aGlzLnBhdGguc2xpY2UoKSx0aGlzLnN0aWNraW5lc3MpfXN0YXRpYyBmcm9tUG9zaXRpb24odCxlKXtyZXR1cm4gbmV3IHRoaXModC5yb290LHQucGF0aC5zbGljZSgpLGU/ZTp0LnN0aWNraW5lc3MpfX1mdW5jdGlvbiBJbSgpe3RoaXMubGlzdGVuVG8odGhpcy5yb290LmRvY3VtZW50Lm1vZGVsLFwiYXBwbHlPcGVyYXRpb25cIiwodCxlKT0+e2NvbnN0IGk9ZVswXTtpZighaS5pc0RvY3VtZW50T3BlcmF0aW9uKXtyZXR1cm59Vm0uY2FsbCh0aGlzLGkpfSx7cHJpb3JpdHk6XCJsb3dcIn0pfWZ1bmN0aW9uIFZtKHQpe2NvbnN0IGU9dGhpcy5nZXRUcmFuc2Zvcm1lZEJ5T3BlcmF0aW9uKHQpO2lmKCF0aGlzLmlzRXF1YWwoZSkpe2NvbnN0IHQ9dGhpcy50b1Bvc2l0aW9uKCk7dGhpcy5wYXRoPWUucGF0aDt0aGlzLnJvb3Q9ZS5yb290O3RoaXMuZmlyZShcImNoYW5nZVwiLHQpfX12cyhPbSxkcyk7ZnVuY3Rpb24gTm0odCxlLGksbil7cmV0dXJuIHQuY2hhbmdlKG89PntsZXQgcjtpZighaSl7cj10LmRvY3VtZW50LnNlbGVjdGlvbn1lbHNlIGlmKGkgaW5zdGFuY2VvZiBYaHx8aSBpbnN0YW5jZW9mIGRmKXtyPWl9ZWxzZXtyPW8uY3JlYXRlU2VsZWN0aW9uKGksbil9aWYoIXIuaXNDb2xsYXBzZWQpe3QuZGVsZXRlQ29udGVudChyLHtkb05vdEF1dG9wYXJhZ3JhcGg6dHJ1ZX0pfWNvbnN0IHM9bmV3IE1tKHQsbyxyLmFuY2hvcik7bGV0IGE7aWYoZS5pcyhcImRvY3VtZW50RnJhZ21lbnRcIikpe2E9ZS5nZXRDaGlsZHJlbigpfWVsc2V7YT1bZV19cy5oYW5kbGVOb2RlcyhhLHtpc0ZpcnN0OnRydWUsaXNMYXN0OnRydWV9KTtjb25zdCBjPXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtpZihjKXtpZihyIGluc3RhbmNlb2YgZGYpe28uc2V0U2VsZWN0aW9uKGMpfWVsc2V7ci5zZXRUbyhjKX19ZWxzZXt9Y29uc3QgbD1zLmdldEFmZmVjdGVkUmFuZ2UoKXx8dC5jcmVhdGVSYW5nZShyLmFuY2hvcik7cy5kZXN0cm95KCk7cmV0dXJuIGx9KX1jbGFzcyBNbXtjb25zdHJ1Y3Rvcih0LGUsaSl7dGhpcy5tb2RlbD10O3RoaXMud3JpdGVyPWU7dGhpcy5wb3NpdGlvbj1pO3RoaXMuY2FuTWVyZ2VXaXRoPW5ldyBTZXQoW3RoaXMucG9zaXRpb24ucGFyZW50XSk7dGhpcy5zY2hlbWE9dC5zY2hlbWE7dGhpcy5fZmlsdGVyQXR0cmlidXRlc09mPVtdO3RoaXMuX2FmZmVjdGVkU3RhcnQ9bnVsbDt0aGlzLl9hZmZlY3RlZEVuZD1udWxsfWhhbmRsZU5vZGVzKHQsZSl7dD1BcnJheS5mcm9tKHQpO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKXtjb25zdCBuPXRbaV07dGhpcy5faGFuZGxlTm9kZShuLHtpc0ZpcnN0Omk9PT0wJiZlLmlzRmlyc3QsaXNMYXN0Omk9PT10Lmxlbmd0aC0xJiZlLmlzTGFzdH0pfXRoaXMuc2NoZW1hLnJlbW92ZURpc2FsbG93ZWRBdHRyaWJ1dGVzKHRoaXMuX2ZpbHRlckF0dHJpYnV0ZXNPZix0aGlzLndyaXRlcik7dGhpcy5fZmlsdGVyQXR0cmlidXRlc09mPVtdfWdldFNlbGVjdGlvblJhbmdlKCl7aWYodGhpcy5ub2RlVG9TZWxlY3Qpe3JldHVybiAkaC5fY3JlYXRlT24odGhpcy5ub2RlVG9TZWxlY3QpfXJldHVybiB0aGlzLm1vZGVsLnNjaGVtYS5nZXROZWFyZXN0U2VsZWN0aW9uUmFuZ2UodGhpcy5wb3NpdGlvbil9Z2V0QWZmZWN0ZWRSYW5nZSgpe2lmKCF0aGlzLl9hZmZlY3RlZFN0YXJ0KXtyZXR1cm4gbnVsbH1yZXR1cm4gbmV3ICRoKHRoaXMuX2FmZmVjdGVkU3RhcnQsdGhpcy5fYWZmZWN0ZWRFbmQpfWRlc3Ryb3koKXtpZih0aGlzLl9hZmZlY3RlZFN0YXJ0KXt0aGlzLl9hZmZlY3RlZFN0YXJ0LmRldGFjaCgpfWlmKHRoaXMuX2FmZmVjdGVkRW5kKXt0aGlzLl9hZmZlY3RlZEVuZC5kZXRhY2goKX19X2hhbmRsZU5vZGUodCxlKXtpZih0aGlzLnNjaGVtYS5pc09iamVjdCh0KSl7dGhpcy5faGFuZGxlT2JqZWN0KHQsZSk7cmV0dXJufWNvbnN0IGk9dGhpcy5fY2hlY2tBbmRTcGxpdFRvQWxsb3dlZFBvc2l0aW9uKHQsZSk7aWYoIWkpe3RoaXMuX2hhbmRsZURpc2FsbG93ZWROb2RlKHQsZSk7cmV0dXJufXRoaXMuX2luc2VydCh0KTt0aGlzLl9tZXJnZVNpYmxpbmdzT2YodCxlKX1faGFuZGxlT2JqZWN0KHQsZSl7aWYodGhpcy5fY2hlY2tBbmRTcGxpdFRvQWxsb3dlZFBvc2l0aW9uKHQpKXt0aGlzLl9pbnNlcnQodCl9ZWxzZXt0aGlzLl90cnlBdXRvcGFyYWdyYXBoaW5nKHQsZSl9fV9oYW5kbGVEaXNhbGxvd2VkTm9kZSh0LGUpe2lmKHQuaXMoXCJlbGVtZW50XCIpKXt0aGlzLmhhbmRsZU5vZGVzKHQuZ2V0Q2hpbGRyZW4oKSxlKX1lbHNle3RoaXMuX3RyeUF1dG9wYXJhZ3JhcGhpbmcodCxlKX19X2luc2VydCh0KXtpZighdGhpcy5zY2hlbWEuY2hlY2tDaGlsZCh0aGlzLnBvc2l0aW9uLHQpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiaW5zZXJ0Y29udGVudC13cm9uZy1wb3NpdGlvbjogR2l2ZW4gbm9kZSBjYW5ub3QgYmUgaW5zZXJ0ZWQgb24gdGhlIGdpdmVuIHBvc2l0aW9uLlwiLHRoaXMse25vZGU6dCxwb3NpdGlvbjp0aGlzLnBvc2l0aW9ufSl9Y29uc3QgZT1PbS5mcm9tUG9zaXRpb24odGhpcy5wb3NpdGlvbixcInRvTmV4dFwiKTt0aGlzLl9zZXRBZmZlY3RlZEJvdW5kYXJpZXModGhpcy5wb3NpdGlvbik7dGhpcy53cml0ZXIuaW5zZXJ0KHQsdGhpcy5wb3NpdGlvbik7dGhpcy5wb3NpdGlvbj1lLnRvUG9zaXRpb24oKTtlLmRldGFjaCgpO2lmKHRoaXMuc2NoZW1hLmlzT2JqZWN0KHQpJiYhdGhpcy5zY2hlbWEuY2hlY2tDaGlsZCh0aGlzLnBvc2l0aW9uLFwiJHRleHRcIikpe3RoaXMubm9kZVRvU2VsZWN0PXR9ZWxzZXt0aGlzLm5vZGVUb1NlbGVjdD1udWxsfXRoaXMuX2ZpbHRlckF0dHJpYnV0ZXNPZi5wdXNoKHQpfV9zZXRBZmZlY3RlZEJvdW5kYXJpZXModCl7aWYoIXRoaXMuX2FmZmVjdGVkU3RhcnQpe3RoaXMuX2FmZmVjdGVkU3RhcnQ9T20uZnJvbVBvc2l0aW9uKHQsXCJ0b1ByZXZpb3VzXCIpfWlmKCF0aGlzLl9hZmZlY3RlZEVuZHx8dGhpcy5fYWZmZWN0ZWRFbmQuaXNCZWZvcmUodCkpe2lmKHRoaXMuX2FmZmVjdGVkRW5kKXt0aGlzLl9hZmZlY3RlZEVuZC5kZXRhY2goKX10aGlzLl9hZmZlY3RlZEVuZD1PbS5mcm9tUG9zaXRpb24odCxcInRvTmV4dFwiKX19X21lcmdlU2libGluZ3NPZih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGpoKSl7cmV0dXJufWNvbnN0IGk9dGhpcy5fY2FuTWVyZ2VMZWZ0KHQsZSk7Y29uc3Qgbj10aGlzLl9jYW5NZXJnZVJpZ2h0KHQsZSk7Y29uc3Qgbz1PbS5fY3JlYXRlQmVmb3JlKHQpO28uc3RpY2tpbmVzcz1cInRvTmV4dFwiO2NvbnN0IHI9T20uX2NyZWF0ZUFmdGVyKHQpO3Iuc3RpY2tpbmVzcz1cInRvTmV4dFwiO2lmKGkpe2NvbnN0IHQ9T20uZnJvbVBvc2l0aW9uKHRoaXMucG9zaXRpb24pO3Quc3RpY2tpbmVzcz1cInRvTmV4dFwiO2lmKHRoaXMuX2FmZmVjdGVkU3RhcnQuaXNFcXVhbChvKSl7dGhpcy5fYWZmZWN0ZWRTdGFydC5kZXRhY2goKTt0aGlzLl9hZmZlY3RlZFN0YXJ0PU9tLl9jcmVhdGVBdChvLm5vZGVCZWZvcmUsXCJlbmRcIixcInRvUHJldmlvdXNcIil9dGhpcy53cml0ZXIubWVyZ2Uobyk7aWYoby5pc0VxdWFsKHRoaXMuX2FmZmVjdGVkRW5kKSYmZS5pc0xhc3Qpe3RoaXMuX2FmZmVjdGVkRW5kLmRldGFjaCgpO3RoaXMuX2FmZmVjdGVkRW5kPU9tLl9jcmVhdGVBdChvLm5vZGVCZWZvcmUsXCJlbmRcIixcInRvTmV4dFwiKX10aGlzLnBvc2l0aW9uPXQudG9Qb3NpdGlvbigpO3QuZGV0YWNoKCl9aWYobil7aWYoIXRoaXMucG9zaXRpb24uaXNFcXVhbChyKSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImluc2VydGNvbnRlbnQtaW52YWxpZC1pbnNlcnRpb24tcG9zaXRpb25cIix0aGlzKX10aGlzLnBvc2l0aW9uPVVoLl9jcmVhdGVBdChyLm5vZGVCZWZvcmUsXCJlbmRcIik7Y29uc3QgdD1PbS5mcm9tUG9zaXRpb24odGhpcy5wb3NpdGlvbixcInRvUHJldmlvdXNcIik7aWYodGhpcy5fYWZmZWN0ZWRFbmQuaXNFcXVhbChyKSl7dGhpcy5fYWZmZWN0ZWRFbmQuZGV0YWNoKCk7dGhpcy5fYWZmZWN0ZWRFbmQ9T20uX2NyZWF0ZUF0KHIubm9kZUJlZm9yZSxcImVuZFwiLFwidG9OZXh0XCIpfXRoaXMud3JpdGVyLm1lcmdlKHIpO2lmKHIuZ2V0U2hpZnRlZEJ5KC0xKS5pc0VxdWFsKHRoaXMuX2FmZmVjdGVkU3RhcnQpJiZlLmlzRmlyc3Qpe3RoaXMuX2FmZmVjdGVkU3RhcnQuZGV0YWNoKCk7dGhpcy5fYWZmZWN0ZWRTdGFydD1PbS5fY3JlYXRlQXQoci5ub2RlQmVmb3JlLDAsXCJ0b1ByZXZpb3VzXCIpfXRoaXMucG9zaXRpb249dC50b1Bvc2l0aW9uKCk7dC5kZXRhY2goKX1pZihpfHxuKXt0aGlzLl9maWx0ZXJBdHRyaWJ1dGVzT2YucHVzaCh0aGlzLnBvc2l0aW9uLnBhcmVudCl9by5kZXRhY2goKTtyLmRldGFjaCgpfV9jYW5NZXJnZUxlZnQodCxlKXtjb25zdCBpPXQucHJldmlvdXNTaWJsaW5nO3JldHVybiBlLmlzRmlyc3QmJmkgaW5zdGFuY2VvZiBqaCYmdGhpcy5jYW5NZXJnZVdpdGguaGFzKGkpJiZ0aGlzLm1vZGVsLnNjaGVtYS5jaGVja01lcmdlKGksdCl9X2Nhbk1lcmdlUmlnaHQodCxlKXtjb25zdCBpPXQubmV4dFNpYmxpbmc7cmV0dXJuIGUuaXNMYXN0JiZpIGluc3RhbmNlb2YgamgmJnRoaXMuY2FuTWVyZ2VXaXRoLmhhcyhpKSYmdGhpcy5tb2RlbC5zY2hlbWEuY2hlY2tNZXJnZSh0LGkpfV90cnlBdXRvcGFyYWdyYXBoaW5nKHQsZSl7Y29uc3QgaT10aGlzLndyaXRlci5jcmVhdGVFbGVtZW50KFwicGFyYWdyYXBoXCIpO2lmKHRoaXMuX2dldEFsbG93ZWRJbihpLHRoaXMucG9zaXRpb24ucGFyZW50KSYmdGhpcy5zY2hlbWEuY2hlY2tDaGlsZChpLHQpKXtpLl9hcHBlbmRDaGlsZCh0KTt0aGlzLl9oYW5kbGVOb2RlKGksZSl9fV9jaGVja0FuZFNwbGl0VG9BbGxvd2VkUG9zaXRpb24odCl7Y29uc3QgZT10aGlzLl9nZXRBbGxvd2VkSW4odCx0aGlzLnBvc2l0aW9uLnBhcmVudCk7aWYoIWUpe3JldHVybiBmYWxzZX13aGlsZShlIT10aGlzLnBvc2l0aW9uLnBhcmVudCl7aWYodGhpcy5zY2hlbWEuaXNMaW1pdCh0aGlzLnBvc2l0aW9uLnBhcmVudCkpe3JldHVybiBmYWxzZX1pZih0aGlzLnBvc2l0aW9uLmlzQXRTdGFydCl7Y29uc3QgdD10aGlzLnBvc2l0aW9uLnBhcmVudDt0aGlzLnBvc2l0aW9uPXRoaXMud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpO2lmKHQuaXNFbXB0eSYmdC5wYXJlbnQ9PT1lKXt0aGlzLndyaXRlci5yZW1vdmUodCl9fWVsc2UgaWYodGhpcy5wb3NpdGlvbi5pc0F0RW5kKXt0aGlzLnBvc2l0aW9uPXRoaXMud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIodGhpcy5wb3NpdGlvbi5wYXJlbnQpfWVsc2V7Y29uc3QgdD10aGlzLndyaXRlci5jcmVhdGVQb3NpdGlvbkFmdGVyKHRoaXMucG9zaXRpb24ucGFyZW50KTt0aGlzLl9zZXRBZmZlY3RlZEJvdW5kYXJpZXModGhpcy5wb3NpdGlvbik7dGhpcy53cml0ZXIuc3BsaXQodGhpcy5wb3NpdGlvbik7dGhpcy5wb3NpdGlvbj10O3RoaXMuY2FuTWVyZ2VXaXRoLmFkZCh0aGlzLnBvc2l0aW9uLm5vZGVBZnRlcil9fXJldHVybiB0cnVlfV9nZXRBbGxvd2VkSW4odCxlKXtpZih0aGlzLnNjaGVtYS5jaGVja0NoaWxkKGUsdCkpe3JldHVybiBlfWlmKGUucGFyZW50KXtyZXR1cm4gdGhpcy5fZ2V0QWxsb3dlZEluKHQsZS5wYXJlbnQpfXJldHVybiBudWxsfX1mdW5jdGlvbiBCbSh0LGUsaT17fSl7aWYoZS5pc0NvbGxhcHNlZCl7cmV0dXJufWNvbnN0IG49ZS5nZXRGaXJzdFJhbmdlKCk7aWYobi5yb290LnJvb3ROYW1lPT1cIiRncmF2ZXlhcmRcIil7cmV0dXJufWNvbnN0IG89dC5zY2hlbWE7dC5jaGFuZ2UodD0+e2lmKCFpLmRvTm90UmVzZXRFbnRpcmVDb250ZW50JiZIbShvLGUpKXtqbSh0LGUsbyk7cmV0dXJufWNvbnN0IHI9bi5zdGFydDtjb25zdCBzPU9tLmZyb21Qb3NpdGlvbihuLmVuZCxcInRvTmV4dFwiKTtpZighbi5zdGFydC5pc1RvdWNoaW5nKG4uZW5kKSl7dC5yZW1vdmUobil9aWYoIWkubGVhdmVVbm1lcmdlZCl7em0odCxyLHMpO28ucmVtb3ZlRGlzYWxsb3dlZEF0dHJpYnV0ZXMoci5wYXJlbnQuZ2V0Q2hpbGRyZW4oKSx0KX1XbSh0LGUscik7aWYoIWkuZG9Ob3RBdXRvcGFyYWdyYXBoJiZMbShvLHIpKXtEbSh0LHIsZSl9cy5kZXRhY2goKX0pfWZ1bmN0aW9uIHptKHQsZSxpKXtjb25zdCBuPWUucGFyZW50O2NvbnN0IG89aS5wYXJlbnQ7aWYobj09byl7cmV0dXJufWlmKHQubW9kZWwuc2NoZW1hLmlzTGltaXQobil8fHQubW9kZWwuc2NoZW1hLmlzTGltaXQobykpe3JldHVybn1pZighRm0oZSxpLHQubW9kZWwuc2NoZW1hKSl7cmV0dXJufWU9dC5jcmVhdGVQb3NpdGlvbkFmdGVyKG4pO2k9dC5jcmVhdGVQb3NpdGlvbkJlZm9yZShvKTtpZighaS5pc0VxdWFsKGUpKXt0Lmluc2VydChvLGUpfXQubWVyZ2UoZSk7d2hpbGUoaS5wYXJlbnQuaXNFbXB0eSl7Y29uc3QgZT1pLnBhcmVudDtpPXQuY3JlYXRlUG9zaXRpb25CZWZvcmUoZSk7dC5yZW1vdmUoZSl9em0odCxlLGkpfWZ1bmN0aW9uIExtKHQsZSl7Y29uc3QgaT10LmNoZWNrQ2hpbGQoZSxcIiR0ZXh0XCIpO2NvbnN0IG49dC5jaGVja0NoaWxkKGUsXCJwYXJhZ3JhcGhcIik7cmV0dXJuIWkmJm59ZnVuY3Rpb24gRm0odCxlLGkpe2NvbnN0IG49bmV3ICRoKHQsZSk7Zm9yKGNvbnN0IHQgb2Ygbi5nZXRXYWxrZXIoKSl7aWYoaS5pc0xpbWl0KHQuaXRlbSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9ZnVuY3Rpb24gRG0odCxlLGkpe2NvbnN0IG49dC5jcmVhdGVFbGVtZW50KFwicGFyYWdyYXBoXCIpO3QuaW5zZXJ0KG4sZSk7V20odCxpLHQuY3JlYXRlUG9zaXRpb25BdChuLDApKX1mdW5jdGlvbiBqbSh0LGUpe2NvbnN0IGk9dC5tb2RlbC5zY2hlbWEuZ2V0TGltaXRFbGVtZW50KGUpO3QucmVtb3ZlKHQuY3JlYXRlUmFuZ2VJbihpKSk7RG0odCx0LmNyZWF0ZVBvc2l0aW9uQXQoaSwwKSxlKX1mdW5jdGlvbiBIbSh0LGUpe2NvbnN0IGk9dC5nZXRMaW1pdEVsZW1lbnQoZSk7aWYoIWUuY29udGFpbnNFbnRpcmVDb250ZW50KGkpKXtyZXR1cm4gZmFsc2V9Y29uc3Qgbj1lLmdldEZpcnN0UmFuZ2UoKTtpZihuLnN0YXJ0LnBhcmVudD09bi5lbmQucGFyZW50KXtyZXR1cm4gZmFsc2V9cmV0dXJuIHQuY2hlY2tDaGlsZChpLFwicGFyYWdyYXBoXCIpfWZ1bmN0aW9uIFdtKHQsZSxpKXtpZihlIGluc3RhbmNlb2YgZGYpe3Quc2V0U2VsZWN0aW9uKGkpfWVsc2V7ZS5zZXRUbyhpKX19Y29uc3QgcW09JyAsLj8hOjtcIi0oKSc7ZnVuY3Rpb24gVW0odCxlLGk9e30pe2NvbnN0IG49dC5zY2hlbWE7Y29uc3Qgbz1pLmRpcmVjdGlvbiE9XCJiYWNrd2FyZFwiO2NvbnN0IHI9aS51bml0P2kudW5pdDpcImNoYXJhY3RlclwiO2NvbnN0IHM9ZS5mb2N1cztjb25zdCBhPW5ldyBXaCh7Ym91bmRhcmllczpKbShzLG8pLHNpbmdsZUNoYXJhY3RlcnM6dHJ1ZSxkaXJlY3Rpb246bz9cImZvcndhcmRcIjpcImJhY2t3YXJkXCJ9KTtjb25zdCBjPXt3YWxrZXI6YSxzY2hlbWE6bixpc0ZvcndhcmQ6byx1bml0OnJ9O2xldCBsO3doaWxlKGw9YS5uZXh0KCkpe2lmKGwuZG9uZSl7cmV0dXJufWNvbnN0IGk9JG0oYyxsLnZhbHVlKTtpZihpKXtpZihlIGluc3RhbmNlb2YgZGYpe3QuY2hhbmdlKHQ9Pnt0LnNldFNlbGVjdGlvbkZvY3VzKGkpfSl9ZWxzZXtlLnNldEZvY3VzKGkpfXJldHVybn19fWZ1bmN0aW9uICRtKHQsZSl7aWYoZS50eXBlPT1cInRleHRcIil7aWYodC51bml0PT09XCJ3b3JkXCIpe3JldHVybiBLbSh0LndhbGtlcix0LmlzRm9yd2FyZCl9cmV0dXJuIEdtKHQud2Fsa2VyLHQudW5pdCx0LmlzRm9yd2FyZCl9aWYoZS50eXBlPT0odC5pc0ZvcndhcmQ/XCJlbGVtZW50U3RhcnRcIjpcImVsZW1lbnRFbmRcIikpe2lmKHQuc2NoZW1hLmlzT2JqZWN0KGUuaXRlbSkpe3JldHVybiBVaC5fY3JlYXRlQXQoZS5pdGVtLHQuaXNGb3J3YXJkP1wiYWZ0ZXJcIjpcImJlZm9yZVwiKX1pZih0LnNjaGVtYS5jaGVja0NoaWxkKGUubmV4dFBvc2l0aW9uLFwiJHRleHRcIikpe3JldHVybiBlLm5leHRQb3NpdGlvbn19ZWxzZXtpZih0LnNjaGVtYS5pc0xpbWl0KGUuaXRlbSkpe3Qud2Fsa2VyLnNraXAoKCk9PnRydWUpO3JldHVybn1pZih0LnNjaGVtYS5jaGVja0NoaWxkKGUubmV4dFBvc2l0aW9uLFwiJHRleHRcIikpe3JldHVybiBlLm5leHRQb3NpdGlvbn19fWZ1bmN0aW9uIEdtKHQsZSl7Y29uc3QgaT10LnBvc2l0aW9uLnRleHROb2RlO2lmKGkpe2NvbnN0IG49aS5kYXRhO2xldCBvPXQucG9zaXRpb24ub2Zmc2V0LWkuc3RhcnRPZmZzZXQ7d2hpbGUodm0obixvKXx8ZT09XCJjaGFyYWN0ZXJcIiYmeW0obixvKSl7dC5uZXh0KCk7bz10LnBvc2l0aW9uLm9mZnNldC1pLnN0YXJ0T2Zmc2V0fX1yZXR1cm4gdC5wb3NpdGlvbn1mdW5jdGlvbiBLbSh0LGUpe2xldCBpPXQucG9zaXRpb24udGV4dE5vZGU7aWYoaSl7bGV0IG49dC5wb3NpdGlvbi5vZmZzZXQtaS5zdGFydE9mZnNldDt3aGlsZSghWW0oaS5kYXRhLG4sZSkmJiFRbShpLG4sZSkpe3QubmV4dCgpO2NvbnN0IG89ZT90LnBvc2l0aW9uLm5vZGVBZnRlcjp0LnBvc2l0aW9uLm5vZGVCZWZvcmU7aWYobyYmby5pcyhcInRleHRcIikpe2NvbnN0IG49by5kYXRhLmNoYXJBdChlPzA6by5kYXRhLmxlbmd0aC0xKTtpZighcW0uaW5jbHVkZXMobikpe3QubmV4dCgpO2k9dC5wb3NpdGlvbi50ZXh0Tm9kZX19bj10LnBvc2l0aW9uLm9mZnNldC1pLnN0YXJ0T2Zmc2V0fX1yZXR1cm4gdC5wb3NpdGlvbn1mdW5jdGlvbiBKbSh0LGUpe2NvbnN0IGk9dC5yb290O2NvbnN0IG49VWguX2NyZWF0ZUF0KGksZT9cImVuZFwiOjApO2lmKGUpe3JldHVybiBuZXcgJGgodCxuKX1lbHNle3JldHVybiBuZXcgJGgobix0KX19ZnVuY3Rpb24gWW0odCxlLGkpe2NvbnN0IG49ZSsoaT8wOi0xKTtyZXR1cm4gcW0uaW5jbHVkZXModC5jaGFyQXQobikpfWZ1bmN0aW9uIFFtKHQsZSxpKXtyZXR1cm4gZT09PShpP3QuZW5kT2Zmc2V0OjApfWZ1bmN0aW9uIFhtKHQsZSl7cmV0dXJuIHQuY2hhbmdlKHQ9Pntjb25zdCBpPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2NvbnN0IG49ZS5nZXRGaXJzdFJhbmdlKCk7aWYoIW58fG4uaXNDb2xsYXBzZWQpe3JldHVybiBpfWNvbnN0IG89bi5zdGFydC5yb290O2NvbnN0IHI9bi5zdGFydC5nZXRDb21tb25QYXRoKG4uZW5kKTtjb25zdCBzPW8uZ2V0Tm9kZUJ5UGF0aChyKTtsZXQgYTtpZihuLnN0YXJ0LnBhcmVudD09bi5lbmQucGFyZW50KXthPW59ZWxzZXthPXQuY3JlYXRlUmFuZ2UodC5jcmVhdGVQb3NpdGlvbkF0KHMsbi5zdGFydC5wYXRoW3IubGVuZ3RoXSksdC5jcmVhdGVQb3NpdGlvbkF0KHMsbi5lbmQucGF0aFtyLmxlbmd0aF0rMSkpfWNvbnN0IGM9YS5lbmQub2Zmc2V0LWEuc3RhcnQub2Zmc2V0O2Zvcihjb25zdCBlIG9mIGEuZ2V0SXRlbXMoe3NoYWxsb3c6dHJ1ZX0pKXtpZihlLmlzKFwidGV4dFByb3h5XCIpKXt0LmFwcGVuZFRleHQoZS5kYXRhLGUuZ2V0QXR0cmlidXRlcygpLGkpfWVsc2V7dC5hcHBlbmQoZS5fY2xvbmUodHJ1ZSksaSl9fWlmKGEhPW4pe2NvbnN0IGU9bi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoYS5zdGFydCx0LmNyZWF0ZVBvc2l0aW9uQXQoaSwwKSxjKVswXTtjb25zdCBvPXQuY3JlYXRlUmFuZ2UodC5jcmVhdGVQb3NpdGlvbkF0KGksMCksZS5zdGFydCk7Y29uc3Qgcj10LmNyZWF0ZVJhbmdlKGUuZW5kLHQuY3JlYXRlUG9zaXRpb25BdChpLFwiZW5kXCIpKTtabShyLHQpO1ptKG8sdCl9cmV0dXJuIGl9KX1mdW5jdGlvbiBabSh0LGUpe2NvbnN0IGk9W107QXJyYXkuZnJvbSh0LmdldEl0ZW1zKHtkaXJlY3Rpb246XCJiYWNrd2FyZFwifSkpLm1hcCh0PT5lLmNyZWF0ZVJhbmdlT24odCkpLmZpbHRlcihlPT57Y29uc3QgaT0oZS5zdGFydC5pc0FmdGVyKHQuc3RhcnQpfHxlLnN0YXJ0LmlzRXF1YWwodC5zdGFydCkpJiYoZS5lbmQuaXNCZWZvcmUodC5lbmQpfHxlLmVuZC5pc0VxdWFsKHQuZW5kKSk7cmV0dXJuIGl9KS5mb3JFYWNoKHQ9PntpLnB1c2godC5zdGFydC5wYXJlbnQpO2UucmVtb3ZlKHQpfSk7aS5mb3JFYWNoKHQ9PntsZXQgaT10O3doaWxlKGkucGFyZW50JiZpLmlzRW1wdHkpe2NvbnN0IHQ9ZS5jcmVhdGVSYW5nZU9uKGkpO2k9aS5wYXJlbnQ7ZS5yZW1vdmUodCl9fSl9ZnVuY3Rpb24gdHAodCl7dC5kb2N1bWVudC5yZWdpc3RlclBvc3RGaXhlcihlPT5lcChlLHQpKX1mdW5jdGlvbiBlcCh0LGUpe2NvbnN0IGk9ZS5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3Qgbj1lLnNjaGVtYTtjb25zdCBvPVtdO2xldCByPWZhbHNlO2Zvcihjb25zdCB0IG9mIGkuZ2V0UmFuZ2VzKCkpe2NvbnN0IGU9aXAodCxuKTtpZihlKXtvLnB1c2goZSk7cj10cnVlfWVsc2V7by5wdXNoKHQpfX1pZihyKXt0LnNldFNlbGVjdGlvbihhcChvKSx7YmFja3dhcmQ6aS5pc0JhY2t3YXJkfSl9fWZ1bmN0aW9uIGlwKHQsZSl7aWYodC5pc0NvbGxhcHNlZCl7cmV0dXJuIG5wKHQsZSl9cmV0dXJuIG9wKHQsZSl9ZnVuY3Rpb24gbnAodCxlKXtjb25zdCBpPXQuc3RhcnQ7Y29uc3Qgbj1lLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShpKTtpZighbil7cmV0dXJuIG51bGx9aWYoIW4uaXNDb2xsYXBzZWQpe3JldHVybiBufWNvbnN0IG89bi5zdGFydDtpZihpLmlzRXF1YWwobykpe3JldHVybiBudWxsfXJldHVybiBuZXcgJGgobyl9ZnVuY3Rpb24gb3AodCxlKXtjb25zdCBpPXQuc3RhcnQ7Y29uc3Qgbj10LmVuZDtjb25zdCBvPWUuY2hlY2tDaGlsZChpLFwiJHRleHRcIik7Y29uc3Qgcj1lLmNoZWNrQ2hpbGQobixcIiR0ZXh0XCIpO2NvbnN0IHM9ZS5nZXRMaW1pdEVsZW1lbnQoaSk7Y29uc3QgYT1lLmdldExpbWl0RWxlbWVudChuKTtpZihzPT09YSl7aWYobyYmcil7cmV0dXJuIG51bGx9aWYoc3AoaSxuLGUpKXtjb25zdCB0PWkubm9kZUFmdGVyJiZlLmlzT2JqZWN0KGkubm9kZUFmdGVyKTtjb25zdCBvPXQ/bnVsbDplLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShpLFwiZm9yd2FyZFwiKTtjb25zdCByPW4ubm9kZUJlZm9yZSYmZS5pc09iamVjdChuLm5vZGVCZWZvcmUpO2NvbnN0IHM9cj9udWxsOmUuZ2V0TmVhcmVzdFNlbGVjdGlvblJhbmdlKG4sXCJiYWNrd2FyZFwiKTtjb25zdCBhPW8/by5zdGFydDppO2NvbnN0IGM9cz9zLnN0YXJ0Om47cmV0dXJuIG5ldyAkaChhLGMpfX1jb25zdCBjPXMmJiFzLmlzKFwicm9vdEVsZW1lbnRcIik7Y29uc3QgbD1hJiYhYS5pcyhcInJvb3RFbGVtZW50XCIpO2lmKGN8fGwpe2NvbnN0IHQ9aS5ub2RlQWZ0ZXImJm4ubm9kZUJlZm9yZSYmaS5ub2RlQWZ0ZXIucGFyZW50PT09bi5ub2RlQmVmb3JlLnBhcmVudDtjb25zdCBvPWMmJighdHx8IWNwKGkubm9kZUFmdGVyLGUpKTtjb25zdCByPWwmJighdHx8IWNwKG4ubm9kZUJlZm9yZSxlKSk7bGV0IGQ9aTtsZXQgdT1uO2lmKG8pe2Q9VWguX2NyZWF0ZUJlZm9yZShycChzLGUpKX1pZihyKXt1PVVoLl9jcmVhdGVBZnRlcihycChhLGUpKX1yZXR1cm4gbmV3ICRoKGQsdSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcnAodCxlKXtsZXQgaT10O2xldCBuPWk7d2hpbGUoZS5pc0xpbWl0KG4pJiZuLnBhcmVudCl7aT1uO249bi5wYXJlbnR9cmV0dXJuIGl9ZnVuY3Rpb24gc3AodCxlLGkpe2NvbnN0IG49dC5ub2RlQWZ0ZXImJiFpLmlzTGltaXQodC5ub2RlQWZ0ZXIpfHxpLmNoZWNrQ2hpbGQodCxcIiR0ZXh0XCIpO2NvbnN0IG89ZS5ub2RlQmVmb3JlJiYhaS5pc0xpbWl0KGUubm9kZUJlZm9yZSl8fGkuY2hlY2tDaGlsZChlLFwiJHRleHRcIik7cmV0dXJuIG58fG99ZnVuY3Rpb24gYXAodCl7Y29uc3QgZT1bXTtlLnB1c2godC5zaGlmdCgpKTtmb3IoY29uc3QgaSBvZiB0KXtjb25zdCB0PWUucG9wKCk7aWYoaS5pc0ludGVyc2VjdGluZyh0KSl7Y29uc3Qgbj10LnN0YXJ0LmlzQWZ0ZXIoaS5zdGFydCk/aS5zdGFydDp0LnN0YXJ0O2NvbnN0IG89dC5lbmQuaXNBZnRlcihpLmVuZCk/dC5lbmQ6aS5lbmQ7Y29uc3Qgcj1uZXcgJGgobixvKTtlLnB1c2gocil9ZWxzZXtlLnB1c2godCk7ZS5wdXNoKGkpfX1yZXR1cm4gZX1mdW5jdGlvbiBjcCh0LGUpe3JldHVybiB0JiZlLmlzT2JqZWN0KHQpfWNsYXNzIGxwe2NvbnN0cnVjdG9yKCl7dGhpcy5tYXJrZXJzPW5ldyBUbTt0aGlzLmRvY3VtZW50PW5ldyBDbSh0aGlzKTt0aGlzLnNjaGVtYT1uZXcgdWc7dGhpcy5fcGVuZGluZ0NoYW5nZXM9W107dGhpcy5fY3VycmVudFdyaXRlcj1udWxsO1tcImluc2VydENvbnRlbnRcIixcImRlbGV0ZUNvbnRlbnRcIixcIm1vZGlmeVNlbGVjdGlvblwiLFwiZ2V0U2VsZWN0ZWRDb250ZW50XCIsXCJhcHBseU9wZXJhdGlvblwiXS5mb3JFYWNoKHQ9PnRoaXMuZGVjb3JhdGUodCkpO3RoaXMub24oXCJhcHBseU9wZXJhdGlvblwiLCh0LGUpPT57Y29uc3QgaT1lWzBdO2kuX3ZhbGlkYXRlKCl9LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO3RoaXMuc2NoZW1hLnJlZ2lzdGVyKFwiJHJvb3RcIix7aXNMaW1pdDp0cnVlfSk7dGhpcy5zY2hlbWEucmVnaXN0ZXIoXCIkYmxvY2tcIix7YWxsb3dJbjpcIiRyb290XCIsaXNCbG9jazp0cnVlfSk7dGhpcy5zY2hlbWEucmVnaXN0ZXIoXCIkdGV4dFwiLHthbGxvd0luOlwiJGJsb2NrXCIsaXNJbmxpbmU6dHJ1ZX0pO3RoaXMuc2NoZW1hLnJlZ2lzdGVyKFwiJGNsaXBib2FyZEhvbGRlclwiLHthbGxvd0NvbnRlbnRPZjpcIiRyb290XCIsaXNMaW1pdDp0cnVlfSk7dGhpcy5zY2hlbWEuZXh0ZW5kKFwiJHRleHRcIix7YWxsb3dJbjpcIiRjbGlwYm9hcmRIb2xkZXJcIn0pO3RoaXMuc2NoZW1hLnJlZ2lzdGVyKFwiJG1hcmtlclwiKTt0aGlzLnNjaGVtYS5hZGRDaGlsZENoZWNrKCh0LGUpPT57aWYoZS5uYW1lPT09XCIkbWFya2VyXCIpe3JldHVybiB0cnVlfX0pO3RwKHRoaXMpfWNoYW5nZSh0KXt0cnl7aWYodGhpcy5fcGVuZGluZ0NoYW5nZXMubGVuZ3RoPT09MCl7dGhpcy5fcGVuZGluZ0NoYW5nZXMucHVzaCh7YmF0Y2g6bmV3IHpnLGNhbGxiYWNrOnR9KTtyZXR1cm4gdGhpcy5fcnVuUGVuZGluZ0NoYW5nZXMoKVswXX1lbHNle3JldHVybiB0KHRoaXMuX2N1cnJlbnRXcml0ZXIpfX1jYXRjaCh0KXtzc1tcImJcIl0ucmV0aHJvd1VuZXhwZWN0ZWRFcnJvcih0LHRoaXMpfX1lbnF1ZXVlQ2hhbmdlKHQsZSl7dHJ5e2lmKHR5cGVvZiB0PT09XCJzdHJpbmdcIil7dD1uZXcgemcodCl9ZWxzZSBpZih0eXBlb2YgdD09XCJmdW5jdGlvblwiKXtlPXQ7dD1uZXcgemd9dGhpcy5fcGVuZGluZ0NoYW5nZXMucHVzaCh7YmF0Y2g6dCxjYWxsYmFjazplfSk7aWYodGhpcy5fcGVuZGluZ0NoYW5nZXMubGVuZ3RoPT0xKXt0aGlzLl9ydW5QZW5kaW5nQ2hhbmdlcygpfX1jYXRjaCh0KXtzc1tcImJcIl0ucmV0aHJvd1VuZXhwZWN0ZWRFcnJvcih0LHRoaXMpfX1hcHBseU9wZXJhdGlvbih0KXt0Ll9leGVjdXRlKCl9aW5zZXJ0Q29udGVudCh0LGUsaSl7cmV0dXJuIE5tKHRoaXMsdCxlLGkpfWRlbGV0ZUNvbnRlbnQodCxlKXtCbSh0aGlzLHQsZSl9bW9kaWZ5U2VsZWN0aW9uKHQsZSl7VW0odGhpcyx0LGUpfWdldFNlbGVjdGVkQ29udGVudCh0KXtyZXR1cm4gWG0odGhpcyx0KX1oYXNDb250ZW50KHQsZSl7Y29uc3QgaT10IGluc3RhbmNlb2Ygamg/JGguX2NyZWF0ZUluKHQpOnQ7aWYoaS5pc0NvbGxhcHNlZCl7cmV0dXJuIGZhbHNlfWZvcihjb25zdCB0IG9mIHRoaXMubWFya2Vycy5nZXRNYXJrZXJzSW50ZXJzZWN0aW5nUmFuZ2UoaSkpe2lmKHQuYWZmZWN0c0RhdGEpe3JldHVybiB0cnVlfX1jb25zdHtpZ25vcmVXaGl0ZXNwYWNlczpuPWZhbHNlfT1lfHx7fTtmb3IoY29uc3QgdCBvZiBpLmdldEl0ZW1zKCkpe2lmKHQuaXMoXCJ0ZXh0UHJveHlcIikpe2lmKCFuKXtyZXR1cm4gdHJ1ZX1lbHNlIGlmKHQuZGF0YS5zZWFyY2goL1xcUy8pIT09LTEpe3JldHVybiB0cnVlfX1lbHNlIGlmKHRoaXMuc2NoZW1hLmlzT2JqZWN0KHQpKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfWNyZWF0ZVBvc2l0aW9uRnJvbVBhdGgodCxlLGkpe3JldHVybiBuZXcgVWgodCxlLGkpfWNyZWF0ZVBvc2l0aW9uQXQodCxlKXtyZXR1cm4gVWguX2NyZWF0ZUF0KHQsZSl9Y3JlYXRlUG9zaXRpb25BZnRlcih0KXtyZXR1cm4gVWguX2NyZWF0ZUFmdGVyKHQpfWNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpe3JldHVybiBVaC5fY3JlYXRlQmVmb3JlKHQpfWNyZWF0ZVJhbmdlKHQsZSl7cmV0dXJuIG5ldyAkaCh0LGUpfWNyZWF0ZVJhbmdlSW4odCl7cmV0dXJuICRoLl9jcmVhdGVJbih0KX1jcmVhdGVSYW5nZU9uKHQpe3JldHVybiAkaC5fY3JlYXRlT24odCl9Y3JlYXRlU2VsZWN0aW9uKHQsZSxpKXtyZXR1cm4gbmV3IFhoKHQsZSxpKX1jcmVhdGVCYXRjaCh0KXtyZXR1cm4gbmV3IHpnKHQpfWNyZWF0ZU9wZXJhdGlvbkZyb21KU09OKHQpe3JldHVybiBSbS5mcm9tSlNPTih0LHRoaXMuZG9jdW1lbnQpfWRlc3Ryb3koKXt0aGlzLmRvY3VtZW50LmRlc3Ryb3koKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1fcnVuUGVuZGluZ0NoYW5nZXMoKXtjb25zdCB0PVtdO3RoaXMuZmlyZShcIl9iZWZvcmVDaGFuZ2VzXCIpO3doaWxlKHRoaXMuX3BlbmRpbmdDaGFuZ2VzLmxlbmd0aCl7Y29uc3QgZT10aGlzLl9wZW5kaW5nQ2hhbmdlc1swXS5iYXRjaDt0aGlzLl9jdXJyZW50V3JpdGVyPW5ldyBhbSh0aGlzLGUpO2NvbnN0IGk9dGhpcy5fcGVuZGluZ0NoYW5nZXNbMF0uY2FsbGJhY2sodGhpcy5fY3VycmVudFdyaXRlcik7dC5wdXNoKGkpO3RoaXMuZG9jdW1lbnQuX2hhbmRsZUNoYW5nZUJsb2NrKHRoaXMuX2N1cnJlbnRXcml0ZXIpO3RoaXMuX3BlbmRpbmdDaGFuZ2VzLnNoaWZ0KCk7dGhpcy5fY3VycmVudFdyaXRlcj1udWxsfXRoaXMuZmlyZShcIl9hZnRlckNoYW5nZXNcIik7cmV0dXJuIHR9fXZzKGxwLEpjKTtjbGFzcyBkcHtjb25zdHJ1Y3Rvcigpe3RoaXMuX2xpc3RlbmVyPU9iamVjdC5jcmVhdGUocWQpfWxpc3RlblRvKHQpe3RoaXMuX2xpc3RlbmVyLmxpc3RlblRvKHQsXCJrZXlkb3duXCIsKHQsZSk9Pnt0aGlzLl9saXN0ZW5lci5maXJlKFwiX2tleWRvd246XCIrTWwoZSksZSl9KX1zZXQodCxlLGk9e30pe2NvbnN0IG49QmwodCk7Y29uc3Qgbz1pLnByaW9yaXR5O3RoaXMuX2xpc3RlbmVyLmxpc3RlblRvKHRoaXMuX2xpc3RlbmVyLFwiX2tleWRvd246XCIrbiwodCxpKT0+e2UoaSwoKT0+e2kucHJldmVudERlZmF1bHQoKTtpLnN0b3BQcm9wYWdhdGlvbigpO3Quc3RvcCgpfSk7dC5yZXR1cm49dHJ1ZX0se3ByaW9yaXR5Om99KX1wcmVzcyh0KXtyZXR1cm4hIXRoaXMuX2xpc3RlbmVyLmZpcmUoXCJfa2V5ZG93bjpcIitNbCh0KSx0KX1kZXN0cm95KCl7dGhpcy5fbGlzdGVuZXIuc3RvcExpc3RlbmluZygpfX1jbGFzcyB1cCBleHRlbmRzIGRwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKCk7dGhpcy5lZGl0b3I9dH1zZXQodCxlLGk9e30pe2lmKHR5cGVvZiBlPT1cInN0cmluZ1wiKXtjb25zdCB0PWU7ZT0oZSxpKT0+e3RoaXMuZWRpdG9yLmV4ZWN1dGUodCk7aSgpfX1zdXBlci5zZXQodCxlLGkpfX1jbGFzcyBocHtjb25zdHJ1Y3Rvcih0PXt9KXt0aGlzLl9jb250ZXh0PXQuY29udGV4dHx8bmV3IElzKHtsYW5ndWFnZTp0Lmxhbmd1YWdlfSk7dGhpcy5fY29udGV4dC5fYWRkRWRpdG9yKHRoaXMsIXQuY29udGV4dCk7Y29uc3QgZT1BcnJheS5mcm9tKHRoaXMuY29uc3RydWN0b3IuYnVpbHRpblBsdWdpbnN8fFtdKTt0aGlzLmNvbmZpZz1uZXcgSnIodCx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRDb25maWcpO3RoaXMuY29uZmlnLmRlZmluZShcInBsdWdpbnNcIixlKTt0aGlzLmNvbmZpZy5kZWZpbmUodGhpcy5fY29udGV4dC5fZ2V0RWRpdG9yQ29uZmlnKCkpO3RoaXMucGx1Z2lucz1uZXcgeHModGhpcyxlLHRoaXMuX2NvbnRleHQucGx1Z2lucyk7dGhpcy5sb2NhbGU9dGhpcy5fY29udGV4dC5sb2NhbGU7dGhpcy50PXRoaXMubG9jYWxlLnQ7dGhpcy5jb21tYW5kcz1uZXcgY2c7dGhpcy5zZXQoXCJzdGF0ZVwiLFwiaW5pdGlhbGl6aW5nXCIpO3RoaXMub25jZShcInJlYWR5XCIsKCk9PnRoaXMuc3RhdGU9XCJyZWFkeVwiLHtwcmlvcml0eTpcImhpZ2hcIn0pO3RoaXMub25jZShcImRlc3Ryb3lcIiwoKT0+dGhpcy5zdGF0ZT1cImRlc3Ryb3llZFwiLHtwcmlvcml0eTpcImhpZ2hcIn0pO3RoaXMuc2V0KFwiaXNSZWFkT25seVwiLGZhbHNlKTt0aGlzLm1vZGVsPW5ldyBscDtjb25zdCBpPW5ldyBWYzt0aGlzLmRhdGE9bmV3IElnKHRoaXMubW9kZWwsaSk7dGhpcy5lZGl0aW5nPW5ldyBhZyh0aGlzLm1vZGVsLGkpO3RoaXMuZWRpdGluZy52aWV3LmRvY3VtZW50LmJpbmQoXCJpc1JlYWRPbmx5XCIpLnRvKHRoaXMpO3RoaXMuY29udmVyc2lvbj1uZXcgTmcoW3RoaXMuZWRpdGluZy5kb3duY2FzdERpc3BhdGNoZXIsdGhpcy5kYXRhLmRvd25jYXN0RGlzcGF0Y2hlcl0sdGhpcy5kYXRhLnVwY2FzdERpc3BhdGNoZXIpO3RoaXMuY29udmVyc2lvbi5hZGRBbGlhcyhcImRhdGFEb3duY2FzdFwiLHRoaXMuZGF0YS5kb3duY2FzdERpc3BhdGNoZXIpO3RoaXMuY29udmVyc2lvbi5hZGRBbGlhcyhcImVkaXRpbmdEb3duY2FzdFwiLHRoaXMuZWRpdGluZy5kb3duY2FzdERpc3BhdGNoZXIpO3RoaXMua2V5c3Ryb2tlcz1uZXcgdXAodGhpcyk7dGhpcy5rZXlzdHJva2VzLmxpc3RlblRvKHRoaXMuZWRpdGluZy52aWV3LmRvY3VtZW50KX1pbml0UGx1Z2lucygpe2NvbnN0IHQ9dGhpcy5jb25maWc7Y29uc3QgZT10LmdldChcInBsdWdpbnNcIik7Y29uc3QgaT10LmdldChcInJlbW92ZVBsdWdpbnNcIil8fFtdO2NvbnN0IG49dC5nZXQoXCJleHRyYVBsdWdpbnNcIil8fFtdO3JldHVybiB0aGlzLnBsdWdpbnMuaW5pdChlLmNvbmNhdChuKSxpKX1kZXN0cm95KCl7bGV0IHQ9UHJvbWlzZS5yZXNvbHZlKCk7aWYodGhpcy5zdGF0ZT09XCJpbml0aWFsaXppbmdcIil7dD1uZXcgUHJvbWlzZSh0PT50aGlzLm9uY2UoXCJyZWFkeVwiLHQpKX1yZXR1cm4gdC50aGVuKCgpPT57dGhpcy5maXJlKFwiZGVzdHJveVwiKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKTt0aGlzLmNvbW1hbmRzLmRlc3Ryb3koKX0pLnRoZW4oKCk9PnRoaXMucGx1Z2lucy5kZXN0cm95KCkpLnRoZW4oKCk9Pnt0aGlzLm1vZGVsLmRlc3Ryb3koKTt0aGlzLmRhdGEuZGVzdHJveSgpO3RoaXMuZWRpdGluZy5kZXN0cm95KCk7dGhpcy5rZXlzdHJva2VzLmRlc3Ryb3koKX0pLnRoZW4oKCk9PnRoaXMuX2NvbnRleHQuX3JlbW92ZUVkaXRvcih0aGlzKSl9ZXhlY3V0ZSguLi50KXt0cnl7dGhpcy5jb21tYW5kcy5leGVjdXRlKC4uLnQpfWNhdGNoKHQpe3NzW1wiYlwiXS5yZXRocm93VW5leHBlY3RlZEVycm9yKHQsdGhpcyl9fX12cyhocCxKYyk7Y2xhc3MgZnB7Z2V0SHRtbCh0KXtjb25zdCBlPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKTtjb25zdCBpPWUuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmFwcGVuZENoaWxkKHQpO3JldHVybiBpLmlubmVySFRNTH19Y2xhc3MgZ3B7Y29uc3RydWN0b3IodCl7dGhpcy5fZG9tUGFyc2VyPW5ldyBET01QYXJzZXI7dGhpcy5fZG9tQ29udmVydGVyPW5ldyB6ZCh0LHtibG9ja0ZpbGxlck1vZGU6XCJuYnNwXCJ9KTt0aGlzLl9odG1sV3JpdGVyPW5ldyBmcH10b0RhdGEodCl7Y29uc3QgZT10aGlzLl9kb21Db252ZXJ0ZXIudmlld1RvRG9tKHQsZG9jdW1lbnQpO3JldHVybiB0aGlzLl9odG1sV3JpdGVyLmdldEh0bWwoZSl9dG9WaWV3KHQpe2NvbnN0IGU9dGhpcy5fdG9Eb20odCk7cmV0dXJuIHRoaXMuX2RvbUNvbnZlcnRlci5kb21Ub1ZpZXcoZSl9X3RvRG9tKHQpe2NvbnN0IGU9dGhpcy5fZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0LFwidGV4dC9odG1sXCIpO2NvbnN0IGk9ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Y29uc3Qgbj1lLmJvZHkuY2hpbGROb2Rlczt3aGlsZShuLmxlbmd0aD4wKXtpLmFwcGVuZENoaWxkKG5bMF0pfXJldHVybiBpfX1jbGFzcyBtcHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmVkaXRvcj10O3RoaXMuc2V0KFwiaXNFbmFibGVkXCIsdHJ1ZSk7dGhpcy5fZGlzYWJsZVN0YWNrPW5ldyBTZXR9Zm9yY2VEaXNhYmxlZCh0KXt0aGlzLl9kaXNhYmxlU3RhY2suYWRkKHQpO2lmKHRoaXMuX2Rpc2FibGVTdGFjay5zaXplPT0xKXt0aGlzLm9uKFwic2V0OmlzRW5hYmxlZFwiLHBwLHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO3RoaXMuaXNFbmFibGVkPWZhbHNlfX1jbGVhckZvcmNlRGlzYWJsZWQodCl7dGhpcy5fZGlzYWJsZVN0YWNrLmRlbGV0ZSh0KTtpZih0aGlzLl9kaXNhYmxlU3RhY2suc2l6ZT09MCl7dGhpcy5vZmYoXCJzZXQ6aXNFbmFibGVkXCIscHApO3RoaXMuaXNFbmFibGVkPXRydWV9fWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1zdGF0aWMgZ2V0IGlzQ29udGV4dFBsdWdpbigpe3JldHVybiBmYWxzZX19dnMobXAsSmMpO2Z1bmN0aW9uIHBwKHQpe3QucmV0dXJuPWZhbHNlO3Quc3RvcCgpfWNsYXNzIGJwIGV4dGVuZHMgeXN7Y29uc3RydWN0b3IodCl7c3VwZXIoe2lkUHJvcGVydHk6XCJ2aWV3VWlkXCJ9KTt0aGlzLm9uKFwiYWRkXCIsKHQsZSxpKT0+e2lmKCFlLmlzUmVuZGVyZWQpe2UucmVuZGVyKCl9aWYoZS5lbGVtZW50JiZ0aGlzLl9wYXJlbnRFbGVtZW50KXt0aGlzLl9wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlLmVsZW1lbnQsdGhpcy5fcGFyZW50RWxlbWVudC5jaGlsZHJlbltpXSl9fSk7dGhpcy5vbihcInJlbW92ZVwiLCh0LGUpPT57aWYoZS5lbGVtZW50JiZ0aGlzLl9wYXJlbnRFbGVtZW50KXtlLmVsZW1lbnQucmVtb3ZlKCl9fSk7dGhpcy5sb2NhbGU9dDt0aGlzLl9wYXJlbnRFbGVtZW50PW51bGx9ZGVzdHJveSgpe3RoaXMubWFwKHQ9PnQuZGVzdHJveSgpKX1zZXRQYXJlbnQodCl7dGhpcy5fcGFyZW50RWxlbWVudD10fWRlbGVnYXRlKC4uLnQpe2lmKCF0Lmxlbmd0aHx8IXdwKHQpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidWktdmlld2NvbGxlY3Rpb24tZGVsZWdhdGUtd3JvbmctZXZlbnRzOiBBbGwgZXZlbnQgbmFtZXMgbXVzdCBiZSBzdHJpbmdzLlwiLHRoaXMpfXJldHVybnt0bzplPT57Zm9yKGNvbnN0IGkgb2YgdGhpcyl7Zm9yKGNvbnN0IG4gb2YgdCl7aS5kZWxlZ2F0ZShuKS50byhlKX19dGhpcy5vbihcImFkZFwiLChpLG4pPT57Zm9yKGNvbnN0IGkgb2YgdCl7bi5kZWxlZ2F0ZShpKS50byhlKX19KTt0aGlzLm9uKFwicmVtb3ZlXCIsKGksbik9Pntmb3IoY29uc3QgaSBvZiB0KXtuLnN0b3BEZWxlZ2F0aW5nKGksZSl9fSl9fX19ZnVuY3Rpb24gd3AodCl7cmV0dXJuIHQuZXZlcnkodD0+dHlwZW9mIHQ9PVwic3RyaW5nXCIpfWNvbnN0IGtwPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO2NsYXNzIF9we2NvbnN0cnVjdG9yKHQpe09iamVjdC5hc3NpZ24odGhpcyxPcChScCh0KSkpO3RoaXMuX2lzUmVuZGVyZWQ9ZmFsc2U7dGhpcy5fcmV2ZXJ0RGF0YT1udWxsfXJlbmRlcigpe2NvbnN0IHQ9dGhpcy5fcmVuZGVyTm9kZSh7aW50b0ZyYWdtZW50OnRydWV9KTt0aGlzLl9pc1JlbmRlcmVkPXRydWU7cmV0dXJuIHR9YXBwbHkodCl7dGhpcy5fcmV2ZXJ0RGF0YT1xcCgpO3RoaXMuX3JlbmRlck5vZGUoe25vZGU6dCxpc0FwcGx5aW5nOnRydWUscmV2ZXJ0RGF0YTp0aGlzLl9yZXZlcnREYXRhfSk7cmV0dXJuIHR9cmV2ZXJ0KHQpe2lmKCF0aGlzLl9yZXZlcnREYXRhKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidWktdGVtcGxhdGUtcmV2ZXJ0LW5vdC1hcHBsaWVkOiBBdHRlbXB0aW5nIHRvIHJldmVydCBhIHRlbXBsYXRlIHdoaWNoIGhhcyBub3QgYmVlbiBhcHBsaWVkIHlldC5cIixbdGhpcyx0XSl9dGhpcy5fcmV2ZXJ0VGVtcGxhdGVGcm9tTm9kZSh0LHRoaXMuX3JldmVydERhdGEpfSpnZXRWaWV3cygpe2Z1bmN0aW9uKnQoZSl7aWYoZS5jaGlsZHJlbil7Zm9yKGNvbnN0IGkgb2YgZS5jaGlsZHJlbil7aWYoanAoaSkpe3lpZWxkIGl9ZWxzZSBpZihIcChpKSl7eWllbGQqdChpKX19fX15aWVsZCp0KHRoaXMpfXN0YXRpYyBiaW5kKHQsZSl7cmV0dXJue3RvKGksbil7cmV0dXJuIG5ldyB5cCh7ZXZlbnROYW1lT3JGdW5jdGlvbjppLGF0dHJpYnV0ZTppLG9ic2VydmFibGU6dCxlbWl0dGVyOmUsY2FsbGJhY2s6bn0pfSxpZihpLG4sbyl7cmV0dXJuIG5ldyB4cCh7b2JzZXJ2YWJsZTp0LGVtaXR0ZXI6ZSxhdHRyaWJ1dGU6aSx2YWx1ZUlmVHJ1ZTpuLGNhbGxiYWNrOm99KX19fXN0YXRpYyBleHRlbmQodCxlKXtpZih0Ll9pc1JlbmRlcmVkKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwidGVtcGxhdGUtZXh0ZW5kLXJlbmRlcjogQXR0ZW1wdGluZyB0byBleHRlbmQgYSB0ZW1wbGF0ZSB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIHJlbmRlcmVkLlwiLFt0aGlzLHRdKX1GcCh0LE9wKFJwKGUpKSl9X3JlbmRlck5vZGUodCl7bGV0IGU7aWYodC5ub2RlKXtlPXRoaXMudGFnJiZ0aGlzLnRleHR9ZWxzZXtlPXRoaXMudGFnP3RoaXMudGV4dDohdGhpcy50ZXh0fWlmKGUpe3Rocm93IG5ldyBzc1tcImJcIl0oJ3VpLXRlbXBsYXRlLXdyb25nLXN5bnRheDogTm9kZSBkZWZpbml0aW9uIG11c3QgaGF2ZSBlaXRoZXIgXCJ0YWdcIiBvciBcInRleHRcIiB3aGVuIHJlbmRlcmluZyBhIG5ldyBOb2RlLicsdGhpcyl9aWYodGhpcy50ZXh0KXtyZXR1cm4gdGhpcy5fcmVuZGVyVGV4dCh0KX1lbHNle3JldHVybiB0aGlzLl9yZW5kZXJFbGVtZW50KHQpfX1fcmVuZGVyRWxlbWVudCh0KXtsZXQgZT10Lm5vZGU7aWYoIWUpe2U9dC5ub2RlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5zfHxrcCx0aGlzLnRhZyl9dGhpcy5fcmVuZGVyQXR0cmlidXRlcyh0KTt0aGlzLl9yZW5kZXJFbGVtZW50Q2hpbGRyZW4odCk7dGhpcy5fc2V0VXBMaXN0ZW5lcnModCk7cmV0dXJuIGV9X3JlbmRlclRleHQodCl7bGV0IGU9dC5ub2RlO2lmKGUpe3QucmV2ZXJ0RGF0YS50ZXh0PWUudGV4dENvbnRlbnR9ZWxzZXtlPXQubm9kZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKX1pZihDcCh0aGlzLnRleHQpKXt0aGlzLl9iaW5kVG9PYnNlcnZhYmxlKHtzY2hlbWE6dGhpcy50ZXh0LHVwZGF0ZXI6UHAoZSksZGF0YTp0fSl9ZWxzZXtlLnRleHRDb250ZW50PXRoaXMudGV4dC5qb2luKFwiXCIpfXJldHVybiBlfV9yZW5kZXJBdHRyaWJ1dGVzKHQpe2xldCBlLGksbixvO2lmKCF0aGlzLmF0dHJpYnV0ZXMpe3JldHVybn1jb25zdCByPXQubm9kZTtjb25zdCBzPXQucmV2ZXJ0RGF0YTtmb3IoZSBpbiB0aGlzLmF0dHJpYnV0ZXMpe249ci5nZXRBdHRyaWJ1dGUoZSk7aT10aGlzLmF0dHJpYnV0ZXNbZV07aWYocyl7cy5hdHRyaWJ1dGVzW2VdPW59bz1jdChpWzBdKSYmaVswXS5ucz9pWzBdLm5zOm51bGw7aWYoQ3AoaSkpe2NvbnN0IGE9bz9pWzBdLnZhbHVlOmk7aWYocyYmVXAoZSkpe2EudW5zaGlmdChuKX10aGlzLl9iaW5kVG9PYnNlcnZhYmxlKHtzY2hlbWE6YSx1cGRhdGVyOlNwKHIsZSxvKSxkYXRhOnR9KX1lbHNlIGlmKGU9PVwic3R5bGVcIiYmdHlwZW9mIGlbMF0hPT1cInN0cmluZ1wiKXt0aGlzLl9yZW5kZXJTdHlsZUF0dHJpYnV0ZShpWzBdLHQpfWVsc2V7aWYocyYmbiYmVXAoZSkpe2kudW5zaGlmdChuKX1pPWkubWFwKHQ9PnQ/dC52YWx1ZXx8dDp0KS5yZWR1Y2UoKHQsZSk9PnQuY29uY2F0KGUpLFtdKS5yZWR1Y2UoenAsXCJcIik7aWYoIURwKGkpKXtyLnNldEF0dHJpYnV0ZU5TKG8sZSxpKX19fX1fcmVuZGVyU3R5bGVBdHRyaWJ1dGUodCxlKXtjb25zdCBpPWUubm9kZTtmb3IoY29uc3QgbiBpbiB0KXtjb25zdCBvPXRbbl07aWYoQ3Aobykpe3RoaXMuX2JpbmRUb09ic2VydmFibGUoe3NjaGVtYTpbb10sdXBkYXRlcjpFcChpLG4pLGRhdGE6ZX0pfWVsc2V7aS5zdHlsZVtuXT1vfX19X3JlbmRlckVsZW1lbnRDaGlsZHJlbih0KXtjb25zdCBlPXQubm9kZTtjb25zdCBpPXQuaW50b0ZyYWdtZW50P2RvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTplO2NvbnN0IG49dC5pc0FwcGx5aW5nO2xldCBvPTA7Zm9yKGNvbnN0IHIgb2YgdGhpcy5jaGlsZHJlbil7aWYoV3Aocikpe2lmKCFuKXtyLnNldFBhcmVudChlKTtmb3IoY29uc3QgdCBvZiByKXtpLmFwcGVuZENoaWxkKHQuZWxlbWVudCl9fX1lbHNlIGlmKGpwKHIpKXtpZighbil7aWYoIXIuaXNSZW5kZXJlZCl7ci5yZW5kZXIoKX1pLmFwcGVuZENoaWxkKHIuZWxlbWVudCl9fWVsc2UgaWYoeGQocikpe2kuYXBwZW5kQ2hpbGQocil9ZWxzZXtpZihuKXtjb25zdCBlPXQucmV2ZXJ0RGF0YTtjb25zdCBuPXFwKCk7ZS5jaGlsZHJlbi5wdXNoKG4pO3IuX3JlbmRlck5vZGUoe25vZGU6aS5jaGlsZE5vZGVzW28rK10saXNBcHBseWluZzp0cnVlLHJldmVydERhdGE6bn0pfWVsc2V7aS5hcHBlbmRDaGlsZChyLnJlbmRlcigpKX19fWlmKHQuaW50b0ZyYWdtZW50KXtlLmFwcGVuZENoaWxkKGkpfX1fc2V0VXBMaXN0ZW5lcnModCl7aWYoIXRoaXMuZXZlbnRMaXN0ZW5lcnMpe3JldHVybn1mb3IoY29uc3QgZSBpbiB0aGlzLmV2ZW50TGlzdGVuZXJzKXtjb25zdCBpPXRoaXMuZXZlbnRMaXN0ZW5lcnNbZV0ubWFwKGk9Pntjb25zdFtuLG9dPWUuc3BsaXQoXCJAXCIpO3JldHVybiBpLmFjdGl2YXRlRG9tRXZlbnRMaXN0ZW5lcihuLG8sdCl9KTtpZih0LnJldmVydERhdGEpe3QucmV2ZXJ0RGF0YS5iaW5kaW5ncy5wdXNoKGkpfX19X2JpbmRUb09ic2VydmFibGUoe3NjaGVtYTp0LHVwZGF0ZXI6ZSxkYXRhOml9KXtjb25zdCBuPWkucmV2ZXJ0RGF0YTtUcCh0LGUsaSk7Y29uc3Qgbz10LmZpbHRlcih0PT4hRHAodCkpLmZpbHRlcih0PT50Lm9ic2VydmFibGUpLm1hcChuPT5uLmFjdGl2YXRlQXR0cmlidXRlTGlzdGVuZXIodCxlLGkpKTtpZihuKXtuLmJpbmRpbmdzLnB1c2gobyl9fV9yZXZlcnRUZW1wbGF0ZUZyb21Ob2RlKHQsZSl7Zm9yKGNvbnN0IHQgb2YgZS5iaW5kaW5ncyl7Zm9yKGNvbnN0IGUgb2YgdCl7ZSgpfX1pZihlLnRleHQpe3QudGV4dENvbnRlbnQ9ZS50ZXh0O3JldHVybn1mb3IoY29uc3QgaSBpbiBlLmF0dHJpYnV0ZXMpe2NvbnN0IG49ZS5hdHRyaWJ1dGVzW2ldO2lmKG49PT1udWxsKXt0LnJlbW92ZUF0dHJpYnV0ZShpKX1lbHNle3Quc2V0QXR0cmlidXRlKGksbil9fWZvcihsZXQgaT0wO2k8ZS5jaGlsZHJlbi5sZW5ndGg7KytpKXt0aGlzLl9yZXZlcnRUZW1wbGF0ZUZyb21Ob2RlKHQuY2hpbGROb2Rlc1tpXSxlLmNoaWxkcmVuW2ldKX19fXZzKF9wLGRzKTtjbGFzcyB2cHtjb25zdHJ1Y3Rvcih0KXtPYmplY3QuYXNzaWduKHRoaXMsdCl9Z2V0VmFsdWUodCl7Y29uc3QgZT10aGlzLm9ic2VydmFibGVbdGhpcy5hdHRyaWJ1dGVdO3JldHVybiB0aGlzLmNhbGxiYWNrP3RoaXMuY2FsbGJhY2soZSx0KTplfWFjdGl2YXRlQXR0cmlidXRlTGlzdGVuZXIodCxlLGkpe2NvbnN0IG49KCk9PlRwKHQsZSxpKTt0aGlzLmVtaXR0ZXIubGlzdGVuVG8odGhpcy5vYnNlcnZhYmxlLFwiY2hhbmdlOlwiK3RoaXMuYXR0cmlidXRlLG4pO3JldHVybigpPT57dGhpcy5lbWl0dGVyLnN0b3BMaXN0ZW5pbmcodGhpcy5vYnNlcnZhYmxlLFwiY2hhbmdlOlwiK3RoaXMuYXR0cmlidXRlLG4pfX19Y2xhc3MgeXAgZXh0ZW5kcyB2cHthY3RpdmF0ZURvbUV2ZW50TGlzdGVuZXIodCxlLGkpe2NvbnN0IG49KHQsaSk9PntpZighZXx8aS50YXJnZXQubWF0Y2hlcyhlKSl7aWYodHlwZW9mIHRoaXMuZXZlbnROYW1lT3JGdW5jdGlvbj09XCJmdW5jdGlvblwiKXt0aGlzLmV2ZW50TmFtZU9yRnVuY3Rpb24oaSl9ZWxzZXt0aGlzLm9ic2VydmFibGUuZmlyZSh0aGlzLmV2ZW50TmFtZU9yRnVuY3Rpb24saSl9fX07dGhpcy5lbWl0dGVyLmxpc3RlblRvKGkubm9kZSx0LG4pO3JldHVybigpPT57dGhpcy5lbWl0dGVyLnN0b3BMaXN0ZW5pbmcoaS5ub2RlLHQsbil9fX1jbGFzcyB4cCBleHRlbmRzIHZwe2dldFZhbHVlKHQpe2NvbnN0IGU9c3VwZXIuZ2V0VmFsdWUodCk7cmV0dXJuIERwKGUpP2ZhbHNlOnRoaXMudmFsdWVJZlRydWV8fHRydWV9fWZ1bmN0aW9uIENwKHQpe2lmKCF0KXtyZXR1cm4gZmFsc2V9aWYodC52YWx1ZSl7dD10LnZhbHVlfWlmKEFycmF5LmlzQXJyYXkodCkpe3JldHVybiB0LnNvbWUoQ3ApfWVsc2UgaWYodCBpbnN0YW5jZW9mIHZwKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gQXAodCxlKXtyZXR1cm4gdC5tYXAodD0+e2lmKHQgaW5zdGFuY2VvZiB2cCl7cmV0dXJuIHQuZ2V0VmFsdWUoZSl9cmV0dXJuIHR9KX1mdW5jdGlvbiBUcCh0LGUse25vZGU6aX0pe2xldCBuPUFwKHQsaSk7aWYodC5sZW5ndGg9PTEmJnRbMF1pbnN0YW5jZW9mIHhwKXtuPW5bMF19ZWxzZXtuPW4ucmVkdWNlKHpwLFwiXCIpfWlmKERwKG4pKXtlLnJlbW92ZSgpfWVsc2V7ZS5zZXQobil9fWZ1bmN0aW9uIFBwKHQpe3JldHVybntzZXQoZSl7dC50ZXh0Q29udGVudD1lfSxyZW1vdmUoKXt0LnRleHRDb250ZW50PVwiXCJ9fX1mdW5jdGlvbiBTcCh0LGUsaSl7cmV0dXJue3NldChuKXt0LnNldEF0dHJpYnV0ZU5TKGksZSxuKX0scmVtb3ZlKCl7dC5yZW1vdmVBdHRyaWJ1dGVOUyhpLGUpfX19ZnVuY3Rpb24gRXAodCxlKXtyZXR1cm57c2V0KGkpe3Quc3R5bGVbZV09aX0scmVtb3ZlKCl7dC5zdHlsZVtlXT1udWxsfX19ZnVuY3Rpb24gUnAodCl7Y29uc3QgZT0kcih0LHQ9PntpZih0JiYodCBpbnN0YW5jZW9mIHZwfHxIcCh0KXx8anAodCl8fFdwKHQpKSl7cmV0dXJuIHR9fSk7cmV0dXJuIGV9ZnVuY3Rpb24gT3AodCl7aWYodHlwZW9mIHQ9PVwic3RyaW5nXCIpe3Q9TnAodCl9ZWxzZSBpZih0LnRleHQpe01wKHQpfWlmKHQub24pe3QuZXZlbnRMaXN0ZW5lcnM9VnAodC5vbik7ZGVsZXRlIHQub259aWYoIXQudGV4dCl7aWYodC5hdHRyaWJ1dGVzKXtJcCh0LmF0dHJpYnV0ZXMpfWNvbnN0IGU9W107aWYodC5jaGlsZHJlbil7aWYoV3AodC5jaGlsZHJlbikpe2UucHVzaCh0LmNoaWxkcmVuKX1lbHNle2Zvcihjb25zdCBpIG9mIHQuY2hpbGRyZW4pe2lmKEhwKGkpfHxqcChpKXx8eGQoaSkpe2UucHVzaChpKX1lbHNle2UucHVzaChuZXcgX3AoaSkpfX19fXQuY2hpbGRyZW49ZX1yZXR1cm4gdH1mdW5jdGlvbiBJcCh0KXtmb3IoY29uc3QgZSBpbiB0KXtpZih0W2VdLnZhbHVlKXt0W2VdLnZhbHVlPVtdLmNvbmNhdCh0W2VdLnZhbHVlKX1CcCh0LGUpfX1mdW5jdGlvbiBWcCh0KXtmb3IoY29uc3QgZSBpbiB0KXtCcCh0LGUpfXJldHVybiB0fWZ1bmN0aW9uIE5wKHQpe3JldHVybnt0ZXh0Olt0XX19ZnVuY3Rpb24gTXAodCl7aWYoIUFycmF5LmlzQXJyYXkodC50ZXh0KSl7dC50ZXh0PVt0LnRleHRdfX1mdW5jdGlvbiBCcCh0LGUpe2lmKCFBcnJheS5pc0FycmF5KHRbZV0pKXt0W2VdPVt0W2VdXX19ZnVuY3Rpb24genAodCxlKXtpZihEcChlKSl7cmV0dXJuIHR9ZWxzZSBpZihEcCh0KSl7cmV0dXJuIGV9ZWxzZXtyZXR1cm5gJHt0fSAke2V9YH19ZnVuY3Rpb24gTHAodCxlKXtmb3IoY29uc3QgaSBpbiBlKXtpZih0W2ldKXt0W2ldLnB1c2goLi4uZVtpXSl9ZWxzZXt0W2ldPWVbaV19fX1mdW5jdGlvbiBGcCh0LGUpe2lmKGUuYXR0cmlidXRlcyl7aWYoIXQuYXR0cmlidXRlcyl7dC5hdHRyaWJ1dGVzPXt9fUxwKHQuYXR0cmlidXRlcyxlLmF0dHJpYnV0ZXMpfWlmKGUuZXZlbnRMaXN0ZW5lcnMpe2lmKCF0LmV2ZW50TGlzdGVuZXJzKXt0LmV2ZW50TGlzdGVuZXJzPXt9fUxwKHQuZXZlbnRMaXN0ZW5lcnMsZS5ldmVudExpc3RlbmVycyl9aWYoZS50ZXh0KXt0LnRleHQucHVzaCguLi5lLnRleHQpfWlmKGUuY2hpbGRyZW4mJmUuY2hpbGRyZW4ubGVuZ3RoKXtpZih0LmNoaWxkcmVuLmxlbmd0aCE9ZS5jaGlsZHJlbi5sZW5ndGgpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ1aS10ZW1wbGF0ZS1leHRlbmQtY2hpbGRyZW4tbWlzbWF0Y2g6IFRoZSBudW1iZXIgb2YgY2hpbGRyZW4gaW4gZXh0ZW5kZWQgZGVmaW5pdGlvbiBkb2VzIG5vdCBtYXRjaC5cIix0KX1sZXQgaT0wO2Zvcihjb25zdCBuIG9mIGUuY2hpbGRyZW4pe0ZwKHQuY2hpbGRyZW5baSsrXSxuKX19fWZ1bmN0aW9uIERwKHQpe3JldHVybiF0JiZ0IT09MH1mdW5jdGlvbiBqcCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEdwfWZ1bmN0aW9uIEhwKHQpe3JldHVybiB0IGluc3RhbmNlb2YgX3B9ZnVuY3Rpb24gV3AodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBicH1mdW5jdGlvbiBxcCgpe3JldHVybntjaGlsZHJlbjpbXSxiaW5kaW5nczpbXSxhdHRyaWJ1dGVzOnt9fX1mdW5jdGlvbiBVcCh0KXtyZXR1cm4gdD09XCJjbGFzc1wifHx0PT1cInN0eWxlXCJ9dmFyICRwPWkoMTUpO2NsYXNzIEdwe2NvbnN0cnVjdG9yKHQpe3RoaXMuZWxlbWVudD1udWxsO3RoaXMuaXNSZW5kZXJlZD1mYWxzZTt0aGlzLmxvY2FsZT10O3RoaXMudD10JiZ0LnQ7dGhpcy5fdmlld0NvbGxlY3Rpb25zPW5ldyB5czt0aGlzLl91bmJvdW5kQ2hpbGRyZW49dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5fdmlld0NvbGxlY3Rpb25zLm9uKFwiYWRkXCIsKGUsaSk9PntpLmxvY2FsZT10fSk7dGhpcy5kZWNvcmF0ZShcInJlbmRlclwiKX1nZXQgYmluZFRlbXBsYXRlKCl7aWYodGhpcy5fYmluZFRlbXBsYXRlKXtyZXR1cm4gdGhpcy5fYmluZFRlbXBsYXRlfXJldHVybiB0aGlzLl9iaW5kVGVtcGxhdGU9X3AuYmluZCh0aGlzLHRoaXMpfWNyZWF0ZUNvbGxlY3Rpb24oKXtjb25zdCB0PW5ldyBicDt0aGlzLl92aWV3Q29sbGVjdGlvbnMuYWRkKHQpO3JldHVybiB0fXJlZ2lzdGVyQ2hpbGQodCl7aWYoIWpzKHQpKXt0PVt0XX1mb3IoY29uc3QgZSBvZiB0KXt0aGlzLl91bmJvdW5kQ2hpbGRyZW4uYWRkKGUpfX1kZXJlZ2lzdGVyQ2hpbGQodCl7aWYoIWpzKHQpKXt0PVt0XX1mb3IoY29uc3QgZSBvZiB0KXt0aGlzLl91bmJvdW5kQ2hpbGRyZW4ucmVtb3ZlKGUpfX1zZXRUZW1wbGF0ZSh0KXt0aGlzLnRlbXBsYXRlPW5ldyBfcCh0KX1leHRlbmRUZW1wbGF0ZSh0KXtfcC5leHRlbmQodGhpcy50ZW1wbGF0ZSx0KX1yZW5kZXIoKXtpZih0aGlzLmlzUmVuZGVyZWQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ1aS12aWV3LXJlbmRlci1hbHJlYWR5LXJlbmRlcmVkOiBUaGlzIFZpZXcgaGFzIGFscmVhZHkgYmVlbiByZW5kZXJlZC5cIix0aGlzKX1pZih0aGlzLnRlbXBsYXRlKXt0aGlzLmVsZW1lbnQ9dGhpcy50ZW1wbGF0ZS5yZW5kZXIoKTt0aGlzLnJlZ2lzdGVyQ2hpbGQodGhpcy50ZW1wbGF0ZS5nZXRWaWV3cygpKX10aGlzLmlzUmVuZGVyZWQ9dHJ1ZX1kZXN0cm95KCl7dGhpcy5zdG9wTGlzdGVuaW5nKCk7dGhpcy5fdmlld0NvbGxlY3Rpb25zLm1hcCh0PT50LmRlc3Ryb3koKSk7aWYodGhpcy50ZW1wbGF0ZSYmdGhpcy50ZW1wbGF0ZS5fcmV2ZXJ0RGF0YSl7dGhpcy50ZW1wbGF0ZS5yZXZlcnQodGhpcy5lbGVtZW50KX19fXZzKEdwLHFkKTt2cyhHcCxKYyk7ZnVuY3Rpb24gS3AodCl7d2hpbGUodCYmdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPVwiaHRtbFwiKXtpZihJZC53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5wb3NpdGlvbiE9XCJzdGF0aWNcIil7cmV0dXJuIHR9dD10LnBhcmVudEVsZW1lbnR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSnAoe2VsZW1lbnQ6dCx0YXJnZXQ6ZSxwb3NpdGlvbnM6aSxsaW1pdGVyOm4sZml0SW5WaWV3cG9ydDpvfSl7aWYoZ3QoZSkpe2U9ZSgpfWlmKGd0KG4pKXtuPW4oKX1jb25zdCByPUtwKHQucGFyZW50RWxlbWVudCk7Y29uc3Qgcz1uZXcgdmgodCk7Y29uc3QgYT1uZXcgdmgoZSk7bGV0IGM7bGV0IGw7aWYoIW4mJiFvKXtbbCxjXT1ZcChpWzBdLGEscyl9ZWxzZXtjb25zdCB0PW4mJm5ldyB2aChuKS5nZXRWaXNpYmxlKCk7Y29uc3QgZT1vJiZuZXcgdmgoSWQud2luZG93KTtbbCxjXT1RcChpLGEscyx0LGUpfHxZcChpWzBdLGEscyl9bGV0e2xlZnQ6ZCx0b3A6dX09WHAoYyk7aWYocil7Y29uc3QgdD1YcChuZXcgdmgocikpO2NvbnN0IGU9a2gocik7ZC09dC5sZWZ0O3UtPXQudG9wO2QrPXIuc2Nyb2xsTGVmdDt1Kz1yLnNjcm9sbFRvcDtkLT1lLmxlZnQ7dS09ZS50b3B9cmV0dXJue2xlZnQ6ZCx0b3A6dSxuYW1lOmx9fWZ1bmN0aW9uIFlwKHQsZSxpKXtjb25zdHtsZWZ0Om4sdG9wOm8sbmFtZTpyfT10KGUsaSk7cmV0dXJuW3IsaS5jbG9uZSgpLm1vdmVUbyhuLG8pXX1mdW5jdGlvbiBRcCh0LGUsaSxuLG8pe2xldCByPTA7bGV0IHM9MDtsZXQgYTtsZXQgYztjb25zdCBsPWkuZ2V0QXJlYSgpO3Quc29tZSh0PT57Y29uc3RbZCx1XT1ZcCh0LGUsaSk7bGV0IGg7bGV0IGY7aWYobil7aWYobyl7Y29uc3QgdD1uLmdldEludGVyc2VjdGlvbihvKTtpZih0KXtoPXQuZ2V0SW50ZXJzZWN0aW9uQXJlYSh1KX1lbHNle2g9MH19ZWxzZXtoPW4uZ2V0SW50ZXJzZWN0aW9uQXJlYSh1KX19aWYobyl7Zj1vLmdldEludGVyc2VjdGlvbkFyZWEodSl9aWYobyYmIW4pe2lmKGY+cyl7ZygpfX1lbHNlIGlmKCFvJiZuKXtpZihoPnIpe2coKX19ZWxzZXtpZihmPnMmJmg+PXIpe2coKX1lbHNlIGlmKGY+PXMmJmg+cil7ZygpfX1mdW5jdGlvbiBnKCl7cz1mO3I9aDthPXU7Yz1kfXJldHVybiBoPT09bH0pO3JldHVybiBhP1tjLGFdOm51bGx9ZnVuY3Rpb24gWHAoe2xlZnQ6dCx0b3A6ZX0pe2NvbnN0e3Njcm9sbFg6aSxzY3JvbGxZOm59PUlkLndpbmRvdztyZXR1cm57bGVmdDp0K2ksdG9wOmUrbn19ZnVuY3Rpb24gWnAodCl7cmV0dXJuIGU9PmUrdH12YXIgdGI9aSgxNyk7Y29uc3QgZWI9WnAoXCJweFwiKTtjb25zdCBpYj1JZC5kb2N1bWVudC5ib2R5O2NsYXNzIG5iIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7Y29uc3QgZT10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldChcInRvcFwiLDApO3RoaXMuc2V0KFwibGVmdFwiLDApO3RoaXMuc2V0KFwicG9zaXRpb25cIixcImFycm93X253XCIpO3RoaXMuc2V0KFwiaXNWaXNpYmxlXCIsZmFsc2UpO3RoaXMuc2V0KFwid2l0aEFycm93XCIsdHJ1ZSk7dGhpcy5zZXQoXCJjbGFzc1wiKTt0aGlzLmNvbnRlbnQ9dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWJhbGxvb24tcGFuZWxcIixlLnRvKFwicG9zaXRpb25cIix0PT5gY2stYmFsbG9vbi1wYW5lbF8ke3R9YCksZS5pZihcImlzVmlzaWJsZVwiLFwiY2stYmFsbG9vbi1wYW5lbF92aXNpYmxlXCIpLGUuaWYoXCJ3aXRoQXJyb3dcIixcImNrLWJhbGxvb24tcGFuZWxfd2l0aC1hcnJvd1wiKSxlLnRvKFwiY2xhc3NcIildLHN0eWxlOnt0b3A6ZS50byhcInRvcFwiLGViKSxsZWZ0OmUudG8oXCJsZWZ0XCIsZWIpfX0sY2hpbGRyZW46dGhpcy5jb250ZW50fSl9c2hvdygpe3RoaXMuaXNWaXNpYmxlPXRydWV9aGlkZSgpe3RoaXMuaXNWaXNpYmxlPWZhbHNlfWF0dGFjaFRvKHQpe3RoaXMuc2hvdygpO2NvbnN0IGU9bmIuZGVmYXVsdFBvc2l0aW9ucztjb25zdCBpPU9iamVjdC5hc3NpZ24oe30se2VsZW1lbnQ6dGhpcy5lbGVtZW50LHBvc2l0aW9uczpbZS5zb3V0aEFycm93Tm9ydGgsZS5zb3V0aEFycm93Tm9ydGhNaWRkbGVXZXN0LGUuc291dGhBcnJvd05vcnRoTWlkZGxlRWFzdCxlLnNvdXRoQXJyb3dOb3J0aFdlc3QsZS5zb3V0aEFycm93Tm9ydGhFYXN0LGUubm9ydGhBcnJvd1NvdXRoLGUubm9ydGhBcnJvd1NvdXRoTWlkZGxlV2VzdCxlLm5vcnRoQXJyb3dTb3V0aE1pZGRsZUVhc3QsZS5ub3J0aEFycm93U291dGhXZXN0LGUubm9ydGhBcnJvd1NvdXRoRWFzdF0sbGltaXRlcjppYixmaXRJblZpZXdwb3J0OnRydWV9LHQpO2NvbnN0IG49bmIuX2dldE9wdGltYWxQb3NpdGlvbihpKTtjb25zdCBvPXBhcnNlSW50KG4ubGVmdCk7Y29uc3Qgcj1wYXJzZUludChuLnRvcCk7Y29uc3Qgcz1uLm5hbWU7T2JqZWN0LmFzc2lnbih0aGlzLHt0b3A6cixsZWZ0Om8scG9zaXRpb246c30pfXBpbih0KXt0aGlzLnVucGluKCk7dGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrPSgpPT57aWYodGhpcy5pc1Zpc2libGUpe3RoaXMuX3N0YXJ0UGlubmluZyh0KX1lbHNle3RoaXMuX3N0b3BQaW5uaW5nKCl9fTt0aGlzLl9zdGFydFBpbm5pbmcodCk7dGhpcy5saXN0ZW5Ubyh0aGlzLFwiY2hhbmdlOmlzVmlzaWJsZVwiLHRoaXMuX3BpbldoZW5Jc1Zpc2libGVDYWxsYmFjayl9dW5waW4oKXtpZih0aGlzLl9waW5XaGVuSXNWaXNpYmxlQ2FsbGJhY2spe3RoaXMuX3N0b3BQaW5uaW5nKCk7dGhpcy5zdG9wTGlzdGVuaW5nKHRoaXMsXCJjaGFuZ2U6aXNWaXNpYmxlXCIsdGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrKTt0aGlzLl9waW5XaGVuSXNWaXNpYmxlQ2FsbGJhY2s9bnVsbDt0aGlzLmhpZGUoKX19X3N0YXJ0UGlubmluZyh0KXt0aGlzLmF0dGFjaFRvKHQpO2NvbnN0IGU9b2IodC50YXJnZXQpO2NvbnN0IGk9dC5saW1pdGVyP29iKHQubGltaXRlcik6aWI7dGhpcy5saXN0ZW5UbyhJZC5kb2N1bWVudCxcInNjcm9sbFwiLChuLG8pPT57Y29uc3Qgcj1vLnRhcmdldDtjb25zdCBzPWUmJnIuY29udGFpbnMoZSk7Y29uc3QgYT1pJiZyLmNvbnRhaW5zKGkpO2lmKHN8fGF8fCFlfHwhaSl7dGhpcy5hdHRhY2hUbyh0KX19LHt1c2VDYXB0dXJlOnRydWV9KTt0aGlzLmxpc3RlblRvKElkLndpbmRvdyxcInJlc2l6ZVwiLCgpPT57dGhpcy5hdHRhY2hUbyh0KX0pfV9zdG9wUGlubmluZygpe3RoaXMuc3RvcExpc3RlbmluZyhJZC5kb2N1bWVudCxcInNjcm9sbFwiKTt0aGlzLnN0b3BMaXN0ZW5pbmcoSWQud2luZG93LFwicmVzaXplXCIpfX1mdW5jdGlvbiBvYih0KXtpZihLcih0KSl7cmV0dXJuIHR9aWYod2godCkpe3JldHVybiB0LmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyfWlmKHR5cGVvZiB0PT1cImZ1bmN0aW9uXCIpe3JldHVybiBvYih0KCkpfXJldHVybiBudWxsfW5iLmFycm93SG9yaXpvbnRhbE9mZnNldD0yNTtuYi5hcnJvd1ZlcnRpY2FsT2Zmc2V0PTEwO25iLl9nZXRPcHRpbWFsUG9zaXRpb249SnA7bmIuZGVmYXVsdFBvc2l0aW9ucz17bm9ydGhXZXN0QXJyb3dTb3V0aFdlc3Q6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LmxlZnQtbmIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6XCJhcnJvd19zd1wifSksbm9ydGhXZXN0QXJyb3dTb3V0aE1pZGRsZVdlc3Q6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LmxlZnQtZS53aWR0aCouMjUtbmIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6XCJhcnJvd19zbXdcIn0pLG5vcnRoV2VzdEFycm93U291dGg6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LmxlZnQtZS53aWR0aC8yLG5hbWU6XCJhcnJvd19zXCJ9KSxub3J0aFdlc3RBcnJvd1NvdXRoTWlkZGxlRWFzdDoodCxlKT0+KHt0b3A6cmIodCxlKSxsZWZ0OnQubGVmdC1lLndpZHRoKi43NStuYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X3NtZVwifSksbm9ydGhXZXN0QXJyb3dTb3V0aEVhc3Q6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LmxlZnQtZS53aWR0aCtuYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X3NlXCJ9KSxub3J0aEFycm93U291dGhXZXN0Oih0LGUpPT4oe3RvcDpyYih0LGUpLGxlZnQ6dC5sZWZ0K3Qud2lkdGgvMi1uYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X3N3XCJ9KSxub3J0aEFycm93U291dGhNaWRkbGVXZXN0Oih0LGUpPT4oe3RvcDpyYih0LGUpLGxlZnQ6dC5sZWZ0K3Qud2lkdGgvMi1lLndpZHRoKi4yNS1uYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X3Ntd1wifSksbm9ydGhBcnJvd1NvdXRoOih0LGUpPT4oe3RvcDpyYih0LGUpLGxlZnQ6dC5sZWZ0K3Qud2lkdGgvMi1lLndpZHRoLzIsbmFtZTpcImFycm93X3NcIn0pLG5vcnRoQXJyb3dTb3V0aE1pZGRsZUVhc3Q6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LmxlZnQrdC53aWR0aC8yLWUud2lkdGgqLjc1K25iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfc21lXCJ9KSxub3J0aEFycm93U291dGhFYXN0Oih0LGUpPT4oe3RvcDpyYih0LGUpLGxlZnQ6dC5sZWZ0K3Qud2lkdGgvMi1lLndpZHRoK25iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfc2VcIn0pLG5vcnRoRWFzdEFycm93U291dGhXZXN0Oih0LGUpPT4oe3RvcDpyYih0LGUpLGxlZnQ6dC5yaWdodC1uYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X3N3XCJ9KSxub3J0aEVhc3RBcnJvd1NvdXRoTWlkZGxlV2VzdDoodCxlKT0+KHt0b3A6cmIodCxlKSxsZWZ0OnQucmlnaHQtZS53aWR0aCouMjUtbmIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6XCJhcnJvd19zbXdcIn0pLG5vcnRoRWFzdEFycm93U291dGg6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LnJpZ2h0LWUud2lkdGgvMixuYW1lOlwiYXJyb3dfc1wifSksbm9ydGhFYXN0QXJyb3dTb3V0aE1pZGRsZUVhc3Q6KHQsZSk9Pih7dG9wOnJiKHQsZSksbGVmdDp0LnJpZ2h0LWUud2lkdGgqLjc1K25iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfc21lXCJ9KSxub3J0aEVhc3RBcnJvd1NvdXRoRWFzdDoodCxlKT0+KHt0b3A6cmIodCxlKSxsZWZ0OnQucmlnaHQtZS53aWR0aCtuYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X3NlXCJ9KSxzb3V0aFdlc3RBcnJvd05vcnRoV2VzdDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQubGVmdC1uYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X253XCJ9KSxzb3V0aFdlc3RBcnJvd05vcnRoTWlkZGxlV2VzdDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQubGVmdC1lLndpZHRoKi4yNS1uYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X25td1wifSksc291dGhXZXN0QXJyb3dOb3J0aDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQubGVmdC1lLndpZHRoLzIsbmFtZTpcImFycm93X25cIn0pLHNvdXRoV2VzdEFycm93Tm9ydGhNaWRkbGVFYXN0Oih0LGUpPT4oe3RvcDpzYih0LGUpLGxlZnQ6dC5sZWZ0LWUud2lkdGgqLjc1K25iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfbm1lXCJ9KSxzb3V0aFdlc3RBcnJvd05vcnRoRWFzdDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQubGVmdC1lLndpZHRoK25iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfbmVcIn0pLHNvdXRoQXJyb3dOb3J0aFdlc3Q6KHQsZSk9Pih7dG9wOnNiKHQsZSksbGVmdDp0LmxlZnQrdC53aWR0aC8yLW5iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfbndcIn0pLHNvdXRoQXJyb3dOb3J0aE1pZGRsZVdlc3Q6KHQsZSk9Pih7dG9wOnNiKHQsZSksbGVmdDp0LmxlZnQrdC53aWR0aC8yLWUud2lkdGgqLjI1LW5iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfbm13XCJ9KSxzb3V0aEFycm93Tm9ydGg6KHQsZSk9Pih7dG9wOnNiKHQsZSksbGVmdDp0LmxlZnQrdC53aWR0aC8yLWUud2lkdGgvMixuYW1lOlwiYXJyb3dfblwifSksc291dGhBcnJvd05vcnRoTWlkZGxlRWFzdDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQubGVmdCt0LndpZHRoLzItZS53aWR0aCouNzUrbmIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6XCJhcnJvd19ubWVcIn0pLHNvdXRoQXJyb3dOb3J0aEVhc3Q6KHQsZSk9Pih7dG9wOnNiKHQsZSksbGVmdDp0LmxlZnQrdC53aWR0aC8yLWUud2lkdGgrbmIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6XCJhcnJvd19uZVwifSksc291dGhFYXN0QXJyb3dOb3J0aFdlc3Q6KHQsZSk9Pih7dG9wOnNiKHQsZSksbGVmdDp0LnJpZ2h0LW5iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfbndcIn0pLHNvdXRoRWFzdEFycm93Tm9ydGhNaWRkbGVXZXN0Oih0LGUpPT4oe3RvcDpzYih0LGUpLGxlZnQ6dC5yaWdodC1lLndpZHRoKi4yNS1uYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTpcImFycm93X25td1wifSksc291dGhFYXN0QXJyb3dOb3J0aDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQucmlnaHQtZS53aWR0aC8yLG5hbWU6XCJhcnJvd19uXCJ9KSxzb3V0aEVhc3RBcnJvd05vcnRoTWlkZGxlRWFzdDoodCxlKT0+KHt0b3A6c2IodCxlKSxsZWZ0OnQucmlnaHQtZS53aWR0aCouNzUrbmIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6XCJhcnJvd19ubWVcIn0pLHNvdXRoRWFzdEFycm93Tm9ydGhFYXN0Oih0LGUpPT4oe3RvcDpzYih0LGUpLGxlZnQ6dC5yaWdodC1lLndpZHRoK25iLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOlwiYXJyb3dfbmVcIn0pfTtmdW5jdGlvbiByYih0LGUpe3JldHVybiB0LnRvcC1lLmhlaWdodC1uYi5hcnJvd1ZlcnRpY2FsT2Zmc2V0fWZ1bmN0aW9uIHNiKHQpe3JldHVybiB0LmJvdHRvbStuYi5hcnJvd1ZlcnRpY2FsT2Zmc2V0fXZhciBhYj1pKDE5KTtjbGFzcyBjYiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKCl7c3VwZXIoKTtjb25zdCB0PXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KFwiY29udGVudFwiLFwiXCIpO3RoaXMuc2V0KFwidmlld0JveFwiLFwiMCAwIDIwIDIwXCIpO3RoaXMuc2V0KFwiZmlsbENvbG9yXCIsXCJcIik7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwic3ZnXCIsbnM6XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1pY29uXCJdLHZpZXdCb3g6dC50byhcInZpZXdCb3hcIil9fSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7dGhpcy5fdXBkYXRlWE1MQ29udGVudCgpO3RoaXMuX2NvbG9yRmlsbFBhdGhzKCk7dGhpcy5vbihcImNoYW5nZTpjb250ZW50XCIsKCk9Pnt0aGlzLl91cGRhdGVYTUxDb250ZW50KCk7dGhpcy5fY29sb3JGaWxsUGF0aHMoKX0pO3RoaXMub24oXCJjaGFuZ2U6ZmlsbENvbG9yXCIsKCk9Pnt0aGlzLl9jb2xvckZpbGxQYXRocygpfSl9X3VwZGF0ZVhNTENvbnRlbnQoKXtpZih0aGlzLmNvbnRlbnQpe2NvbnN0IHQ9KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyh0aGlzLmNvbnRlbnQudHJpbSgpLFwiaW1hZ2Uvc3ZnK3htbFwiKTtjb25zdCBlPXQucXVlcnlTZWxlY3RvcihcInN2Z1wiKTtjb25zdCBpPWUuZ2V0QXR0cmlidXRlKFwidmlld0JveFwiKTtpZihpKXt0aGlzLnZpZXdCb3g9aX10aGlzLmVsZW1lbnQuaW5uZXJIVE1MPVwiXCI7d2hpbGUoZS5jaGlsZE5vZGVzLmxlbmd0aD4wKXt0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZS5jaGlsZE5vZGVzWzBdKX19fV9jb2xvckZpbGxQYXRocygpe2lmKHRoaXMuZmlsbENvbG9yKXt0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jay1pY29uX19maWxsXCIpLmZvckVhY2godD0+e3Quc3R5bGUuZmlsbD10aGlzLmZpbGxDb2xvcn0pfX19dmFyIGxiPWkoMjEpO2NsYXNzIGRiIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5zZXQoXCJ0ZXh0XCIsXCJcIik7dGhpcy5zZXQoXCJwb3NpdGlvblwiLFwic1wiKTtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stdG9vbHRpcFwiLGUudG8oXCJwb3NpdGlvblwiLHQ9PlwiY2stdG9vbHRpcF9cIit0KSxlLmlmKFwidGV4dFwiLFwiY2staGlkZGVuXCIsdD0+IXQudHJpbSgpKV19LGNoaWxkcmVuOlt7dGFnOlwic3BhblwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay10b29sdGlwX190ZXh0XCJdfSxjaGlsZHJlbjpbe3RleHQ6ZS50byhcInRleHRcIil9XX1dfSl9fXZhciB1Yj1pKDIzKTtjbGFzcyBoYiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO2NvbnN0IGU9dGhpcy5iaW5kVGVtcGxhdGU7Y29uc3QgaT1pcygpO3RoaXMuc2V0KFwiY2xhc3NcIik7dGhpcy5zZXQoXCJsYWJlbFN0eWxlXCIpO3RoaXMuc2V0KFwiaWNvblwiKTt0aGlzLnNldChcImlzRW5hYmxlZFwiLHRydWUpO3RoaXMuc2V0KFwiaXNPblwiLGZhbHNlKTt0aGlzLnNldChcImlzVmlzaWJsZVwiLHRydWUpO3RoaXMuc2V0KFwiaXNUb2dnbGVhYmxlXCIsZmFsc2UpO3RoaXMuc2V0KFwia2V5c3Ryb2tlXCIpO3RoaXMuc2V0KFwibGFiZWxcIik7dGhpcy5zZXQoXCJ0YWJpbmRleFwiLC0xKTt0aGlzLnNldChcInRvb2x0aXBcIik7dGhpcy5zZXQoXCJ0b29sdGlwUG9zaXRpb25cIixcInNcIik7dGhpcy5zZXQoXCJ0eXBlXCIsXCJidXR0b25cIik7dGhpcy5zZXQoXCJ3aXRoVGV4dFwiLGZhbHNlKTt0aGlzLnNldChcIndpdGhLZXlzdHJva2VcIixmYWxzZSk7dGhpcy5jaGlsZHJlbj10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLnRvb2x0aXBWaWV3PXRoaXMuX2NyZWF0ZVRvb2x0aXBWaWV3KCk7dGhpcy5sYWJlbFZpZXc9dGhpcy5fY3JlYXRlTGFiZWxWaWV3KGkpO3RoaXMuaWNvblZpZXc9bmV3IGNiO3RoaXMuaWNvblZpZXcuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOlwiY2stYnV0dG9uX19pY29uXCJ9fSk7dGhpcy5rZXlzdHJva2VWaWV3PXRoaXMuX2NyZWF0ZUtleXN0cm9rZVZpZXcoKTt0aGlzLmJpbmQoXCJfdG9vbHRpcFN0cmluZ1wiKS50byh0aGlzLFwidG9vbHRpcFwiLHRoaXMsXCJsYWJlbFwiLHRoaXMsXCJrZXlzdHJva2VcIix0aGlzLl9nZXRUb29sdGlwU3RyaW5nLmJpbmQodGhpcykpO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImJ1dHRvblwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1idXR0b25cIixlLnRvKFwiY2xhc3NcIiksZS5pZihcImlzRW5hYmxlZFwiLFwiY2stZGlzYWJsZWRcIix0PT4hdCksZS5pZihcImlzVmlzaWJsZVwiLFwiY2staGlkZGVuXCIsdD0+IXQpLGUudG8oXCJpc09uXCIsdD0+dD9cImNrLW9uXCI6XCJjay1vZmZcIiksZS5pZihcIndpdGhUZXh0XCIsXCJjay1idXR0b25fd2l0aC10ZXh0XCIpLGUuaWYoXCJ3aXRoS2V5c3Ryb2tlXCIsXCJjay1idXR0b25fd2l0aC1rZXlzdHJva2VcIildLHR5cGU6ZS50byhcInR5cGVcIix0PT50P3Q6XCJidXR0b25cIiksdGFiaW5kZXg6ZS50byhcInRhYmluZGV4XCIpLFwiYXJpYS1sYWJlbGxlZGJ5XCI6YGNrLWVkaXRvcl9fYXJpYS1sYWJlbF8ke2l9YCxcImFyaWEtZGlzYWJsZWRcIjplLmlmKFwiaXNFbmFibGVkXCIsdHJ1ZSx0PT4hdCksXCJhcmlhLXByZXNzZWRcIjplLnRvKFwiaXNPblwiLHQ9PnRoaXMuaXNUb2dnbGVhYmxlP1N0cmluZyh0KTpmYWxzZSl9LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW4sb246e21vdXNlZG93bjplLnRvKHQ9Pnt0LnByZXZlbnREZWZhdWx0KCl9KSxjbGljazplLnRvKHQ9PntpZih0aGlzLmlzRW5hYmxlZCl7dGhpcy5maXJlKFwiZXhlY3V0ZVwiKX1lbHNle3QucHJldmVudERlZmF1bHQoKX19KX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtpZih0aGlzLmljb24pe3RoaXMuaWNvblZpZXcuYmluZChcImNvbnRlbnRcIikudG8odGhpcyxcImljb25cIik7dGhpcy5jaGlsZHJlbi5hZGQodGhpcy5pY29uVmlldyl9dGhpcy5jaGlsZHJlbi5hZGQodGhpcy50b29sdGlwVmlldyk7dGhpcy5jaGlsZHJlbi5hZGQodGhpcy5sYWJlbFZpZXcpO2lmKHRoaXMud2l0aEtleXN0cm9rZSl7dGhpcy5jaGlsZHJlbi5hZGQodGhpcy5rZXlzdHJva2VWaWV3KX19Zm9jdXMoKXt0aGlzLmVsZW1lbnQuZm9jdXMoKX1fY3JlYXRlVG9vbHRpcFZpZXcoKXtjb25zdCB0PW5ldyBkYjt0LmJpbmQoXCJ0ZXh0XCIpLnRvKHRoaXMsXCJfdG9vbHRpcFN0cmluZ1wiKTt0LmJpbmQoXCJwb3NpdGlvblwiKS50byh0aGlzLFwidG9vbHRpcFBvc2l0aW9uXCIpO3JldHVybiB0fV9jcmVhdGVMYWJlbFZpZXcodCl7Y29uc3QgZT1uZXcgR3A7Y29uc3QgaT10aGlzLmJpbmRUZW1wbGF0ZTtlLnNldFRlbXBsYXRlKHt0YWc6XCJzcGFuXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWJ1dHRvbl9fbGFiZWxcIl0sc3R5bGU6aS50byhcImxhYmVsU3R5bGVcIiksaWQ6YGNrLWVkaXRvcl9fYXJpYS1sYWJlbF8ke3R9YH0sY2hpbGRyZW46W3t0ZXh0OnRoaXMuYmluZFRlbXBsYXRlLnRvKFwibGFiZWxcIil9XX0pO3JldHVybiBlfV9jcmVhdGVLZXlzdHJva2VWaWV3KCl7Y29uc3QgdD1uZXcgR3A7dC5zZXRUZW1wbGF0ZSh7dGFnOlwic3BhblwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1idXR0b25fX2tleXN0cm9rZVwiXX0sY2hpbGRyZW46W3t0ZXh0OnRoaXMuYmluZFRlbXBsYXRlLnRvKFwia2V5c3Ryb2tlXCIsdD0+emwodCkpfV19KTtyZXR1cm4gdH1fZ2V0VG9vbHRpcFN0cmluZyh0LGUsaSl7aWYodCl7aWYodHlwZW9mIHQ9PVwic3RyaW5nXCIpe3JldHVybiB0fWVsc2V7aWYoaSl7aT16bChpKX1pZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pe3JldHVybiB0KGUsaSl9ZWxzZXtyZXR1cm5gJHtlfSR7aT9gICgke2l9KWA6XCJcIn1gfX19cmV0dXJuXCJcIn19Y2xhc3MgZmJ7Y29uc3RydWN0b3IoKXt0aGlzLnNldChcImlzRm9jdXNlZFwiLGZhbHNlKTt0aGlzLnNldChcImZvY3VzZWRFbGVtZW50XCIsbnVsbCk7dGhpcy5fZWxlbWVudHM9bmV3IFNldDt0aGlzLl9uZXh0RXZlbnRMb29wVGltZW91dD1udWxsfWFkZCh0KXtpZih0aGlzLl9lbGVtZW50cy5oYXModCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJmb2N1c1RyYWNrZXItYWRkLWVsZW1lbnQtYWxyZWFkeS1leGlzdFwiLHRoaXMpfXRoaXMubGlzdGVuVG8odCxcImZvY3VzXCIsKCk9PnRoaXMuX2ZvY3VzKHQpLHt1c2VDYXB0dXJlOnRydWV9KTt0aGlzLmxpc3RlblRvKHQsXCJibHVyXCIsKCk9PnRoaXMuX2JsdXIoKSx7dXNlQ2FwdHVyZTp0cnVlfSk7dGhpcy5fZWxlbWVudHMuYWRkKHQpfXJlbW92ZSh0KXtpZih0PT09dGhpcy5mb2N1c2VkRWxlbWVudCl7dGhpcy5fYmx1cih0KX1pZih0aGlzLl9lbGVtZW50cy5oYXModCkpe3RoaXMuc3RvcExpc3RlbmluZyh0KTt0aGlzLl9lbGVtZW50cy5kZWxldGUodCl9fWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1fZm9jdXModCl7Y2xlYXJUaW1lb3V0KHRoaXMuX25leHRFdmVudExvb3BUaW1lb3V0KTt0aGlzLmZvY3VzZWRFbGVtZW50PXQ7dGhpcy5pc0ZvY3VzZWQ9dHJ1ZX1fYmx1cigpe2NsZWFyVGltZW91dCh0aGlzLl9uZXh0RXZlbnRMb29wVGltZW91dCk7dGhpcy5fbmV4dEV2ZW50TG9vcFRpbWVvdXQ9c2V0VGltZW91dCgoKT0+e3RoaXMuZm9jdXNlZEVsZW1lbnQ9bnVsbDt0aGlzLmlzRm9jdXNlZD1mYWxzZX0sMCl9fXZzKGZiLHFkKTt2cyhmYixKYyk7dmFyIGdiPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMS40NjMgNS4xODdhLjg4OC44ODggMCAxIDEgMS4yNTQgMS4yNTVMOS4xNiAxMGwzLjU1NyAzLjU1N2EuODg4Ljg4OCAwIDEgMS0xLjI1NCAxLjI1NUw3LjI2IDEwLjYxYS44ODguODg4IDAgMCAxIC4xNi0xLjM4Mmw0LjA0My00LjA0MnpcIi8+PC9zdmc+Jzt2YXIgbWI9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTguNTM3IDE0LjgxM2EuODg4Ljg4OCAwIDEgMS0xLjI1NC0xLjI1NUwxMC44NCAxMCA3LjI4MyA2LjQ0MmEuODg4Ljg4OCAwIDEgMSAxLjI1NC0xLjI1NUwxMi43NCA5LjM5YS44ODguODg4IDAgMCAxLS4xNiAxLjM4MmwtNC4wNDMgNC4wNDJ6XCIvPjwvc3ZnPic7dmFyIHBiPWkoMjUpO3ZhciBiYj1pKDI3KTtjb25zdCB3Yj1acChcInB4XCIpO2NsYXNzIGtiIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJDb250ZXh0dWFsQmFsbG9vblwifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMucG9zaXRpb25MaW1pdGVyPSgpPT57Y29uc3QgdD10aGlzLmVkaXRvci5lZGl0aW5nLnZpZXc7Y29uc3QgZT10LmRvY3VtZW50O2NvbnN0IGk9ZS5zZWxlY3Rpb24uZWRpdGFibGVFbGVtZW50O2lmKGkpe3JldHVybiB0LmRvbUNvbnZlcnRlci5tYXBWaWV3VG9Eb20oaS5yb290KX1yZXR1cm4gbnVsbH07dGhpcy5zZXQoXCJ2aXNpYmxlVmlld1wiLG51bGwpO3RoaXMudmlldz1uZXcgbmIodC5sb2NhbGUpO3QudWkudmlldy5ib2R5LmFkZCh0aGlzLnZpZXcpO3QudWkuZm9jdXNUcmFja2VyLmFkZCh0aGlzLnZpZXcuZWxlbWVudCk7dGhpcy5fdmlld1RvU3RhY2s9bmV3IE1hcDt0aGlzLl9pZFRvU3RhY2s9bmV3IE1hcDt0aGlzLnNldChcIl9udW1iZXJPZlN0YWNrc1wiLDApO3RoaXMuc2V0KFwiX3NpbmdsZVZpZXdNb2RlXCIsZmFsc2UpO3RoaXMuX3JvdGF0b3JWaWV3PXRoaXMuX2NyZWF0ZVJvdGF0b3JWaWV3KCk7dGhpcy5fZmFrZVBhbmVsc1ZpZXc9dGhpcy5fY3JlYXRlRmFrZVBhbmVsc1ZpZXcoKX1oYXNWaWV3KHQpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuX3ZpZXdUb1N0YWNrLmtleXMoKSkuaW5jbHVkZXModCl9YWRkKHQpe2lmKHRoaXMuaGFzVmlldyh0LnZpZXcpKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiY29udGV4dHVhbGJhbGxvb24tYWRkLXZpZXctZXhpc3Q6IENhbm5vdCBhZGQgY29uZmlndXJhdGlvbiBvZiB0aGUgc2FtZSB2aWV3IHR3aWNlLlwiLFt0aGlzLHRdKX1jb25zdCBlPXQuc3RhY2tJZHx8XCJtYWluXCI7aWYoIXRoaXMuX2lkVG9TdGFjay5oYXMoZSkpe3RoaXMuX2lkVG9TdGFjay5zZXQoZSxuZXcgTWFwKFtbdC52aWV3LHRdXSkpO3RoaXMuX3ZpZXdUb1N0YWNrLnNldCh0LnZpZXcsdGhpcy5faWRUb1N0YWNrLmdldChlKSk7dGhpcy5fbnVtYmVyT2ZTdGFja3M9dGhpcy5faWRUb1N0YWNrLnNpemU7aWYoIXRoaXMuX3Zpc2libGVTdGFja3x8dC5zaW5nbGVWaWV3TW9kZSl7dGhpcy5zaG93U3RhY2soZSl9cmV0dXJufWNvbnN0IGk9dGhpcy5faWRUb1N0YWNrLmdldChlKTtpZih0LnNpbmdsZVZpZXdNb2RlKXt0aGlzLnNob3dTdGFjayhlKX1pLnNldCh0LnZpZXcsdCk7dGhpcy5fdmlld1RvU3RhY2suc2V0KHQudmlldyxpKTtpZihpPT09dGhpcy5fdmlzaWJsZVN0YWNrKXt0aGlzLl9zaG93Vmlldyh0KX19cmVtb3ZlKHQpe2lmKCF0aGlzLmhhc1ZpZXcodCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb250ZXh0dWFsYmFsbG9vbi1yZW1vdmUtdmlldy1ub3QtZXhpc3Q6IENhbm5vdCByZW1vdmUgdGhlIGNvbmZpZ3VyYXRpb24gb2YgYSBub24tZXhpc3RlbnQgdmlldy5cIixbdGhpcyx0XSl9Y29uc3QgZT10aGlzLl92aWV3VG9TdGFjay5nZXQodCk7aWYodGhpcy5fc2luZ2xlVmlld01vZGUmJnRoaXMudmlzaWJsZVZpZXc9PT10KXt0aGlzLl9zaW5nbGVWaWV3TW9kZT1mYWxzZX1pZih0aGlzLnZpc2libGVWaWV3PT09dCl7aWYoZS5zaXplPT09MSl7aWYodGhpcy5faWRUb1N0YWNrLnNpemU+MSl7dGhpcy5fc2hvd05leHRTdGFjaygpfWVsc2V7dGhpcy52aWV3LmhpZGUoKTt0aGlzLnZpc2libGVWaWV3PW51bGw7dGhpcy5fcm90YXRvclZpZXcuaGlkZVZpZXcoKX19ZWxzZXt0aGlzLl9zaG93VmlldyhBcnJheS5mcm9tKGUudmFsdWVzKCkpW2Uuc2l6ZS0yXSl9fWlmKGUuc2l6ZT09PTEpe3RoaXMuX2lkVG9TdGFjay5kZWxldGUodGhpcy5fZ2V0U3RhY2tJZChlKSk7dGhpcy5fbnVtYmVyT2ZTdGFja3M9dGhpcy5faWRUb1N0YWNrLnNpemV9ZWxzZXtlLmRlbGV0ZSh0KX10aGlzLl92aWV3VG9TdGFjay5kZWxldGUodCl9dXBkYXRlUG9zaXRpb24odCl7aWYodCl7dGhpcy5fdmlzaWJsZVN0YWNrLmdldCh0aGlzLnZpc2libGVWaWV3KS5wb3NpdGlvbj10fXRoaXMudmlldy5waW4odGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uKCkpO3RoaXMuX2Zha2VQYW5lbHNWaWV3LnVwZGF0ZVBvc2l0aW9uKCl9c2hvd1N0YWNrKHQpe3RoaXMudmlzaWJsZVN0YWNrPXQ7Y29uc3QgZT10aGlzLl9pZFRvU3RhY2suZ2V0KHQpO2lmKCFlKXt0aHJvdyBuZXcgc3NbXCJiXCJdKFwiY29udGV4dHVhbGJhbGxvb24tc2hvd3N0YWNrLXN0YWNrLW5vdC1leGlzdDogQ2Fubm90IHNob3cgYSBzdGFjayB0aGF0IGRvZXMgbm90IGV4aXN0LlwiLHRoaXMpfWlmKHRoaXMuX3Zpc2libGVTdGFjaz09PWUpe3JldHVybn10aGlzLl9zaG93VmlldyhBcnJheS5mcm9tKGUudmFsdWVzKCkpLnBvcCgpKX1nZXQgX3Zpc2libGVTdGFjaygpe3JldHVybiB0aGlzLl92aWV3VG9TdGFjay5nZXQodGhpcy52aXNpYmxlVmlldyl9X2dldFN0YWNrSWQodCl7Y29uc3QgZT1BcnJheS5mcm9tKHRoaXMuX2lkVG9TdGFjay5lbnRyaWVzKCkpLmZpbmQoZT0+ZVsxXT09PXQpO3JldHVybiBlWzBdfV9zaG93TmV4dFN0YWNrKCl7Y29uc3QgdD1BcnJheS5mcm9tKHRoaXMuX2lkVG9TdGFjay52YWx1ZXMoKSk7bGV0IGU9dC5pbmRleE9mKHRoaXMuX3Zpc2libGVTdGFjaykrMTtpZighdFtlXSl7ZT0wfXRoaXMuc2hvd1N0YWNrKHRoaXMuX2dldFN0YWNrSWQodFtlXSkpfV9zaG93UHJldlN0YWNrKCl7Y29uc3QgdD1BcnJheS5mcm9tKHRoaXMuX2lkVG9TdGFjay52YWx1ZXMoKSk7bGV0IGU9dC5pbmRleE9mKHRoaXMuX3Zpc2libGVTdGFjayktMTtpZighdFtlXSl7ZT10Lmxlbmd0aC0xfXRoaXMuc2hvd1N0YWNrKHRoaXMuX2dldFN0YWNrSWQodFtlXSkpfV9jcmVhdGVSb3RhdG9yVmlldygpe2NvbnN0IHQ9bmV3IF9iKHRoaXMuZWRpdG9yLmxvY2FsZSk7Y29uc3QgZT10aGlzLmVkaXRvci5sb2NhbGUudDt0aGlzLnZpZXcuY29udGVudC5hZGQodCk7dC5iaW5kKFwiaXNOYXZpZ2F0aW9uVmlzaWJsZVwiKS50byh0aGlzLFwiX251bWJlck9mU3RhY2tzXCIsdGhpcyxcIl9zaW5nbGVWaWV3TW9kZVwiLCh0LGUpPT4hZSYmdD4xKTt0Lm9uKFwiY2hhbmdlOmlzTmF2aWdhdGlvblZpc2libGVcIiwoKT0+dGhpcy51cGRhdGVQb3NpdGlvbigpLHtwcmlvcml0eTpcImxvd1wifSk7dC5iaW5kKFwiY291bnRlclwiKS50byh0aGlzLFwidmlzaWJsZVZpZXdcIix0aGlzLFwiX251bWJlck9mU3RhY2tzXCIsKHQsaSk9PntpZihpPDIpe3JldHVyblwiXCJ9Y29uc3Qgbj1BcnJheS5mcm9tKHRoaXMuX2lkVG9TdGFjay52YWx1ZXMoKSkuaW5kZXhPZih0aGlzLl92aXNpYmxlU3RhY2spKzE7cmV0dXJuIGUoXCJsdVwiLFtuLGldKX0pO3QuYnV0dG9uTmV4dFZpZXcub24oXCJleGVjdXRlXCIsKCk9PntpZih0LmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQpe3RoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5mb2N1cygpfXRoaXMuX3Nob3dOZXh0U3RhY2soKX0pO3QuYnV0dG9uUHJldlZpZXcub24oXCJleGVjdXRlXCIsKCk9PntpZih0LmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQpe3RoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5mb2N1cygpfXRoaXMuX3Nob3dQcmV2U3RhY2soKX0pO3JldHVybiB0fV9jcmVhdGVGYWtlUGFuZWxzVmlldygpe2NvbnN0IHQ9bmV3IHZiKHRoaXMuZWRpdG9yLmxvY2FsZSx0aGlzLnZpZXcpO3QuYmluZChcIm51bWJlck9mUGFuZWxzXCIpLnRvKHRoaXMsXCJfbnVtYmVyT2ZTdGFja3NcIix0aGlzLFwiX3NpbmdsZVZpZXdNb2RlXCIsKHQsZSk9Pntjb25zdCBpPSFlJiZ0Pj0yO3JldHVybiBpP01hdGgubWluKHQtMSwyKTowfSk7dC5saXN0ZW5Ubyh0aGlzLnZpZXcsXCJjaGFuZ2U6dG9wXCIsKCk9PnQudXBkYXRlUG9zaXRpb24oKSk7dC5saXN0ZW5Ubyh0aGlzLnZpZXcsXCJjaGFuZ2U6bGVmdFwiLCgpPT50LnVwZGF0ZVBvc2l0aW9uKCkpO3RoaXMuZWRpdG9yLnVpLnZpZXcuYm9keS5hZGQodCk7cmV0dXJuIHR9X3Nob3dWaWV3KHt2aWV3OnQsYmFsbG9vbkNsYXNzTmFtZTplPVwiXCIsd2l0aEFycm93Omk9dHJ1ZSxzaW5nbGVWaWV3TW9kZTpuPWZhbHNlfSl7dGhpcy52aWV3LmNsYXNzPWU7dGhpcy52aWV3LndpdGhBcnJvdz1pO3RoaXMuX3JvdGF0b3JWaWV3LnNob3dWaWV3KHQpO3RoaXMudmlzaWJsZVZpZXc9dDt0aGlzLnZpZXcucGluKHRoaXMuX2dldEJhbGxvb25Qb3NpdGlvbigpKTt0aGlzLl9mYWtlUGFuZWxzVmlldy51cGRhdGVQb3NpdGlvbigpO2lmKG4pe3RoaXMuX3NpbmdsZVZpZXdNb2RlPXRydWV9fV9nZXRCYWxsb29uUG9zaXRpb24oKXtsZXQgdD1BcnJheS5mcm9tKHRoaXMuX3Zpc2libGVTdGFjay52YWx1ZXMoKSkucG9wKCkucG9zaXRpb247aWYodCYmIXQubGltaXRlcil7dD1PYmplY3QuYXNzaWduKHt9LHQse2xpbWl0ZXI6dGhpcy5wb3NpdGlvbkxpbWl0ZXJ9KX1yZXR1cm4gdH19Y2xhc3MgX2IgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtjb25zdCBlPXQudDtjb25zdCBpPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KFwiaXNOYXZpZ2F0aW9uVmlzaWJsZVwiLHRydWUpO3RoaXMuZm9jdXNUcmFja2VyPW5ldyBmYjt0aGlzLmJ1dHRvblByZXZWaWV3PXRoaXMuX2NyZWF0ZUJ1dHRvblZpZXcoZShcImx2XCIpLGdiKTt0aGlzLmJ1dHRvbk5leHRWaWV3PXRoaXMuX2NyZWF0ZUJ1dHRvblZpZXcoZShcImx3XCIpLG1iKTt0aGlzLmNvbnRlbnQ9dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWJhbGxvb24tcm90YXRvclwiXSxcInotaW5kZXhcIjpcIi0xXCJ9LGNoaWxkcmVuOlt7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2stYmFsbG9vbi1yb3RhdG9yX19uYXZpZ2F0aW9uXCIsaS50byhcImlzTmF2aWdhdGlvblZpc2libGVcIix0PT50P1wiXCI6XCJjay1oaWRkZW5cIildfSxjaGlsZHJlbjpbdGhpcy5idXR0b25QcmV2Vmlldyx7dGFnOlwic3BhblwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrLWJhbGxvb24tcm90YXRvcl9fY291bnRlclwiXX0sY2hpbGRyZW46W3t0ZXh0OmkudG8oXCJjb3VudGVyXCIpfV19LHRoaXMuYnV0dG9uTmV4dFZpZXddfSx7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6XCJjay1iYWxsb29uLXJvdGF0b3JfX2NvbnRlbnRcIn0sY2hpbGRyZW46dGhpcy5jb250ZW50fV19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTt0aGlzLmZvY3VzVHJhY2tlci5hZGQodGhpcy5lbGVtZW50KX1zaG93Vmlldyh0KXt0aGlzLmhpZGVWaWV3KCk7dGhpcy5jb250ZW50LmFkZCh0KX1oaWRlVmlldygpe3RoaXMuY29udGVudC5jbGVhcigpfV9jcmVhdGVCdXR0b25WaWV3KHQsZSl7Y29uc3QgaT1uZXcgaGIodGhpcy5sb2NhbGUpO2kuc2V0KHtsYWJlbDp0LGljb246ZSx0b29sdGlwOnRydWV9KTtyZXR1cm4gaX19Y2xhc3MgdmIgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpO2NvbnN0IGk9dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5zZXQoXCJ0b3BcIiwwKTt0aGlzLnNldChcImxlZnRcIiwwKTt0aGlzLnNldChcImhlaWdodFwiLDApO3RoaXMuc2V0KFwid2lkdGhcIiwwKTt0aGlzLnNldChcIm51bWJlck9mUGFuZWxzXCIsMCk7dGhpcy5jb250ZW50PXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpO3RoaXMuX2JhbGxvb25QYW5lbFZpZXc9ZTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay1mYWtlLXBhbmVsXCIsaS50byhcIm51bWJlck9mUGFuZWxzXCIsdD0+dD9cIlwiOlwiY2staGlkZGVuXCIpXSxzdHlsZTp7dG9wOmkudG8oXCJ0b3BcIix3YiksbGVmdDppLnRvKFwibGVmdFwiLHdiKSx3aWR0aDppLnRvKFwid2lkdGhcIix3YiksaGVpZ2h0OmkudG8oXCJoZWlnaHRcIix3Yil9fSxjaGlsZHJlbjp0aGlzLmNvbnRlbnR9KTt0aGlzLm9uKFwiY2hhbmdlOm51bWJlck9mUGFuZWxzXCIsKHQsZSxpLG4pPT57aWYoaT5uKXt0aGlzLl9hZGRQYW5lbHMoaS1uKX1lbHNle3RoaXMuX3JlbW92ZVBhbmVscyhuLWkpfXRoaXMudXBkYXRlUG9zaXRpb24oKX0pfV9hZGRQYW5lbHModCl7d2hpbGUodC0tKXtjb25zdCB0PW5ldyBHcDt0LnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIn0pO3RoaXMuY29udGVudC5hZGQodCk7dGhpcy5yZWdpc3RlckNoaWxkKHQpfX1fcmVtb3ZlUGFuZWxzKHQpe3doaWxlKHQtLSl7Y29uc3QgdD10aGlzLmNvbnRlbnQubGFzdDt0aGlzLmNvbnRlbnQucmVtb3ZlKHQpO3RoaXMuZGVyZWdpc3RlckNoaWxkKHQpO3QuZGVzdHJveSgpfX11cGRhdGVQb3NpdGlvbigpe2lmKHRoaXMubnVtYmVyT2ZQYW5lbHMpe2NvbnN0e3RvcDp0LGxlZnQ6ZX09dGhpcy5fYmFsbG9vblBhbmVsVmlldztjb25zdHt3aWR0aDppLGhlaWdodDpufT1uZXcgdmgodGhpcy5fYmFsbG9vblBhbmVsVmlldy5lbGVtZW50KTtPYmplY3QuYXNzaWduKHRoaXMse3RvcDp0LGxlZnQ6ZSx3aWR0aDppLGhlaWdodDpufSl9fX1jbGFzcyB5Yntjb25zdHJ1Y3Rvcih0KXtPYmplY3QuYXNzaWduKHRoaXMsdCk7aWYodC5hY3Rpb25zJiZ0LmtleXN0cm9rZUhhbmRsZXIpe2Zvcihjb25zdCBlIGluIHQuYWN0aW9ucyl7bGV0IGk9dC5hY3Rpb25zW2VdO2lmKHR5cGVvZiBpPT1cInN0cmluZ1wiKXtpPVtpXX1mb3IoY29uc3QgbiBvZiBpKXt0LmtleXN0cm9rZUhhbmRsZXIuc2V0KG4sKHQsaSk9Pnt0aGlzW2VdKCk7aSgpfSl9fX19Z2V0IGZpcnN0KCl7cmV0dXJuIHRoaXMuZm9jdXNhYmxlcy5maW5kKHhiKXx8bnVsbH1nZXQgbGFzdCgpe3JldHVybiB0aGlzLmZvY3VzYWJsZXMuZmlsdGVyKHhiKS5zbGljZSgtMSlbMF18fG51bGx9Z2V0IG5leHQoKXtyZXR1cm4gdGhpcy5fZ2V0Rm9jdXNhYmxlSXRlbSgxKX1nZXQgcHJldmlvdXMoKXtyZXR1cm4gdGhpcy5fZ2V0Rm9jdXNhYmxlSXRlbSgtMSl9Z2V0IGN1cnJlbnQoKXtsZXQgdD1udWxsO2lmKHRoaXMuZm9jdXNUcmFja2VyLmZvY3VzZWRFbGVtZW50PT09bnVsbCl7cmV0dXJuIG51bGx9dGhpcy5mb2N1c2FibGVzLmZpbmQoKGUsaSk9Pntjb25zdCBuPWUuZWxlbWVudD09PXRoaXMuZm9jdXNUcmFja2VyLmZvY3VzZWRFbGVtZW50O2lmKG4pe3Q9aX1yZXR1cm4gbn0pO3JldHVybiB0fWZvY3VzRmlyc3QoKXt0aGlzLl9mb2N1cyh0aGlzLmZpcnN0KX1mb2N1c0xhc3QoKXt0aGlzLl9mb2N1cyh0aGlzLmxhc3QpfWZvY3VzTmV4dCgpe3RoaXMuX2ZvY3VzKHRoaXMubmV4dCl9Zm9jdXNQcmV2aW91cygpe3RoaXMuX2ZvY3VzKHRoaXMucHJldmlvdXMpfV9mb2N1cyh0KXtpZih0KXt0LmZvY3VzKCl9fV9nZXRGb2N1c2FibGVJdGVtKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50O2NvbnN0IGk9dGhpcy5mb2N1c2FibGVzLmxlbmd0aDtpZighaSl7cmV0dXJuIG51bGx9aWYoZT09PW51bGwpe3JldHVybiB0aGlzW3Q9PT0xP1wiZmlyc3RcIjpcImxhc3RcIl19bGV0IG49KGUraSt0KSVpO2Rve2NvbnN0IGU9dGhpcy5mb2N1c2FibGVzLmdldChuKTtpZih4YihlKSl7cmV0dXJuIGV9bj0obitpK3QpJWl9d2hpbGUobiE9PWUpO3JldHVybiBudWxsfX1mdW5jdGlvbiB4Yih0KXtyZXR1cm4hISh0LmZvY3VzJiZJZC53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LmVsZW1lbnQpLmRpc3BsYXkhPVwibm9uZVwiKX1jbGFzcyBDYiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stdG9vbGJhcl9fc2VwYXJhdG9yXCJdfX0pfX1jb25zdCBBYj0xMDA7Y2xhc3MgVGJ7Y29uc3RydWN0b3IodCxlKXtpZighVGIuX29ic2VydmVySW5zdGFuY2Upe1RiLl9jcmVhdGVPYnNlcnZlcigpfXRoaXMuX2VsZW1lbnQ9dDt0aGlzLl9jYWxsYmFjaz1lO1RiLl9hZGRFbGVtZW50Q2FsbGJhY2sodCxlKTtUYi5fb2JzZXJ2ZXJJbnN0YW5jZS5vYnNlcnZlKHQpfWRlc3Ryb3koKXtUYi5fZGVsZXRlRWxlbWVudENhbGxiYWNrKHRoaXMuX2VsZW1lbnQsdGhpcy5fY2FsbGJhY2spfXN0YXRpYyBfYWRkRWxlbWVudENhbGxiYWNrKHQsZSl7aWYoIVRiLl9lbGVtZW50Q2FsbGJhY2tzKXtUYi5fZWxlbWVudENhbGxiYWNrcz1uZXcgTWFwfWxldCBpPVRiLl9lbGVtZW50Q2FsbGJhY2tzLmdldCh0KTtpZighaSl7aT1uZXcgU2V0O1RiLl9lbGVtZW50Q2FsbGJhY2tzLnNldCh0LGkpfWkuYWRkKGUpfXN0YXRpYyBfZGVsZXRlRWxlbWVudENhbGxiYWNrKHQsZSl7Y29uc3QgaT1UYi5fZ2V0RWxlbWVudENhbGxiYWNrcyh0KTtpZihpKXtpLmRlbGV0ZShlKTtpZighaS5zaXplKXtUYi5fZWxlbWVudENhbGxiYWNrcy5kZWxldGUodCk7VGIuX29ic2VydmVySW5zdGFuY2UudW5vYnNlcnZlKHQpfX1pZihUYi5fZWxlbWVudENhbGxiYWNrcyYmIVRiLl9lbGVtZW50Q2FsbGJhY2tzLnNpemUpe1RiLl9vYnNlcnZlckluc3RhbmNlPW51bGw7VGIuX2VsZW1lbnRDYWxsYmFja3M9bnVsbH19c3RhdGljIF9nZXRFbGVtZW50Q2FsbGJhY2tzKHQpe2lmKCFUYi5fZWxlbWVudENhbGxiYWNrcyl7cmV0dXJuIG51bGx9cmV0dXJuIFRiLl9lbGVtZW50Q2FsbGJhY2tzLmdldCh0KX1zdGF0aWMgX2NyZWF0ZU9ic2VydmVyKCl7bGV0IHQ7aWYodHlwZW9mIElkLndpbmRvdy5SZXNpemVPYnNlcnZlcj09PVwiZnVuY3Rpb25cIil7dD1JZC53aW5kb3cuUmVzaXplT2JzZXJ2ZXJ9ZWxzZXt0PVBifVRiLl9vYnNlcnZlckluc3RhbmNlPW5ldyB0KHQ9Pntmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PVRiLl9nZXRFbGVtZW50Q2FsbGJhY2tzKGUudGFyZ2V0KTtpZih0KXtmb3IoY29uc3QgaSBvZiB0KXtpKGUpfX19fSl9fVRiLl9vYnNlcnZlckluc3RhbmNlPW51bGw7VGIuX2VsZW1lbnRDYWxsYmFja3M9bnVsbDtjbGFzcyBQYntjb25zdHJ1Y3Rvcih0KXt0aGlzLl9jYWxsYmFjaz10O3RoaXMuX2VsZW1lbnRzPW5ldyBTZXQ7dGhpcy5fcHJldmlvdXNSZWN0cz1uZXcgTWFwO3RoaXMuX3BlcmlvZGljQ2hlY2tUaW1lb3V0PW51bGx9b2JzZXJ2ZSh0KXt0aGlzLl9lbGVtZW50cy5hZGQodCk7dGhpcy5fY2hlY2tFbGVtZW50UmVjdHNBbmRFeGVjdXRlQ2FsbGJhY2soKTtpZih0aGlzLl9lbGVtZW50cy5zaXplPT09MSl7dGhpcy5fc3RhcnRQZXJpb2RpY0NoZWNrKCl9fXVub2JzZXJ2ZSh0KXt0aGlzLl9lbGVtZW50cy5kZWxldGUodCk7dGhpcy5fcHJldmlvdXNSZWN0cy5kZWxldGUodCk7aWYoIXRoaXMuX2VsZW1lbnRzLnNpemUpe3RoaXMuX3N0b3BQZXJpb2RpY0NoZWNrKCl9fV9zdGFydFBlcmlvZGljQ2hlY2soKXtjb25zdCB0PSgpPT57dGhpcy5fY2hlY2tFbGVtZW50UmVjdHNBbmRFeGVjdXRlQ2FsbGJhY2soKTt0aGlzLl9wZXJpb2RpY0NoZWNrVGltZW91dD1zZXRUaW1lb3V0KHQsQWIpfTt0aGlzLmxpc3RlblRvKElkLndpbmRvdyxcInJlc2l6ZVwiLCgpPT57dGhpcy5fY2hlY2tFbGVtZW50UmVjdHNBbmRFeGVjdXRlQ2FsbGJhY2soKX0pO3RoaXMuX3BlcmlvZGljQ2hlY2tUaW1lb3V0PXNldFRpbWVvdXQodCxBYil9X3N0b3BQZXJpb2RpY0NoZWNrKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3BlcmlvZGljQ2hlY2tUaW1lb3V0KTt0aGlzLnN0b3BMaXN0ZW5pbmcoKTt0aGlzLl9wcmV2aW91c1JlY3RzLmNsZWFyKCl9X2NoZWNrRWxlbWVudFJlY3RzQW5kRXhlY3V0ZUNhbGxiYWNrKCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgZSBvZiB0aGlzLl9lbGVtZW50cyl7aWYodGhpcy5faGFzUmVjdENoYW5nZWQoZSkpe3QucHVzaCh7dGFyZ2V0OmUsY29udGVudFJlY3Q6dGhpcy5fcHJldmlvdXNSZWN0cy5nZXQoZSl9KX19aWYodC5sZW5ndGgpe3RoaXMuX2NhbGxiYWNrKHQpfX1faGFzUmVjdENoYW5nZWQodCl7aWYoIXQub3duZXJEb2N1bWVudC5ib2R5LmNvbnRhaW5zKHQpKXtyZXR1cm4gZmFsc2V9Y29uc3QgZT1uZXcgdmgodCk7Y29uc3QgaT10aGlzLl9wcmV2aW91c1JlY3RzLmdldCh0KTtjb25zdCBuPSFpfHwhaS5pc0VxdWFsKGUpO3RoaXMuX3ByZXZpb3VzUmVjdHMuc2V0KHQsZSk7cmV0dXJuIG59fXZzKFBiLHFkKTtmdW5jdGlvbiBTYih0KXtyZXR1cm4gdC5iaW5kVGVtcGxhdGUudG8oZT0+e2lmKGUudGFyZ2V0PT09dC5lbGVtZW50KXtlLnByZXZlbnREZWZhdWx0KCl9fSl9Y2xhc3MgRWIgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KFwiaXNWaXNpYmxlXCIsZmFsc2UpO3RoaXMuc2V0KFwicG9zaXRpb25cIixcInNlXCIpO3RoaXMuY2hpbGRyZW49dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLXJlc2V0XCIsXCJjay1kcm9wZG93bl9fcGFuZWxcIixlLnRvKFwicG9zaXRpb25cIix0PT5gY2stZHJvcGRvd25fX3BhbmVsXyR7dH1gKSxlLmlmKFwiaXNWaXNpYmxlXCIsXCJjay1kcm9wZG93bl9fcGFuZWwtdmlzaWJsZVwiKV19LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW4sb246e3NlbGVjdHN0YXJ0OmUudG8odD0+dC5wcmV2ZW50RGVmYXVsdCgpKX19KX1mb2N1cygpe2lmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoKXt0aGlzLmNoaWxkcmVuLmZpcnN0LmZvY3VzKCl9fWZvY3VzTGFzdCgpe2lmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoKXtjb25zdCB0PXRoaXMuY2hpbGRyZW4ubGFzdDtpZih0eXBlb2YgdC5mb2N1c0xhc3Q9PT1cImZ1bmN0aW9uXCIpe3QuZm9jdXNMYXN0KCl9ZWxzZXt0LmZvY3VzKCl9fX19dmFyIFJiPWkoMjkpO2NsYXNzIE9iIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQpO2NvbnN0IG49dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5idXR0b25WaWV3PWU7dGhpcy5wYW5lbFZpZXc9aTt0aGlzLnNldChcImlzT3BlblwiLGZhbHNlKTt0aGlzLnNldChcImlzRW5hYmxlZFwiLHRydWUpO3RoaXMuc2V0KFwiY2xhc3NcIik7dGhpcy5zZXQoXCJpZFwiKTt0aGlzLnNldChcInBhbmVsUG9zaXRpb25cIixcImF1dG9cIik7dGhpcy5mb2N1c1RyYWNrZXI9bmV3IGZiO3RoaXMua2V5c3Ryb2tlcz1uZXcgZHA7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWRyb3Bkb3duXCIsbi50byhcImNsYXNzXCIpLG4uaWYoXCJpc0VuYWJsZWRcIixcImNrLWRpc2FibGVkXCIsdD0+IXQpXSxpZDpuLnRvKFwiaWRcIiksXCJhcmlhLWRlc2NyaWJlZGJ5XCI6bi50byhcImFyaWFEZXNjcmliZWRCeUlkXCIpfSxjaGlsZHJlbjpbZSxpXX0pO2UuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOltcImNrLWRyb3Bkb3duX19idXR0b25cIl19fSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7dGhpcy5saXN0ZW5Ubyh0aGlzLmJ1dHRvblZpZXcsXCJvcGVuXCIsKCk9Pnt0aGlzLmlzT3Blbj0hdGhpcy5pc09wZW59KTt0aGlzLnBhbmVsVmlldy5iaW5kKFwiaXNWaXNpYmxlXCIpLnRvKHRoaXMsXCJpc09wZW5cIik7dGhpcy5vbihcImNoYW5nZTppc09wZW5cIiwoKT0+e2lmKCF0aGlzLmlzT3Blbil7cmV0dXJufWlmKHRoaXMucGFuZWxQb3NpdGlvbj09PVwiYXV0b1wiKXt0aGlzLnBhbmVsVmlldy5wb3NpdGlvbj1PYi5fZ2V0T3B0aW1hbFBvc2l0aW9uKHtlbGVtZW50OnRoaXMucGFuZWxWaWV3LmVsZW1lbnQsdGFyZ2V0OnRoaXMuYnV0dG9uVmlldy5lbGVtZW50LGZpdEluVmlld3BvcnQ6dHJ1ZSxwb3NpdGlvbnM6dGhpcy5fcGFuZWxQb3NpdGlvbnN9KS5uYW1lfWVsc2V7dGhpcy5wYW5lbFZpZXcucG9zaXRpb249dGhpcy5wYW5lbFBvc2l0aW9ufX0pO3RoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpO3RoaXMuZm9jdXNUcmFja2VyLmFkZCh0aGlzLmVsZW1lbnQpO2NvbnN0IHQ9KHQsZSk9PntpZih0aGlzLmlzT3Blbil7dGhpcy5idXR0b25WaWV3LmZvY3VzKCk7dGhpcy5pc09wZW49ZmFsc2U7ZSgpfX07dGhpcy5rZXlzdHJva2VzLnNldChcImFycm93ZG93blwiLCh0LGUpPT57aWYodGhpcy5idXR0b25WaWV3LmlzRW5hYmxlZCYmIXRoaXMuaXNPcGVuKXt0aGlzLmlzT3Blbj10cnVlO2UoKX19KTt0aGlzLmtleXN0cm9rZXMuc2V0KFwiYXJyb3dyaWdodFwiLCh0LGUpPT57aWYodGhpcy5pc09wZW4pe2UoKX19KTt0aGlzLmtleXN0cm9rZXMuc2V0KFwiYXJyb3dsZWZ0XCIsdCk7dGhpcy5rZXlzdHJva2VzLnNldChcImVzY1wiLHQpfWZvY3VzKCl7dGhpcy5idXR0b25WaWV3LmZvY3VzKCl9Z2V0IF9wYW5lbFBvc2l0aW9ucygpe2NvbnN0e3NvdXRoRWFzdDp0LHNvdXRoV2VzdDplLG5vcnRoRWFzdDppLG5vcnRoV2VzdDpufT1PYi5kZWZhdWx0UGFuZWxQb3NpdGlvbnM7aWYodGhpcy5sb2NhbGUudWlMYW5ndWFnZURpcmVjdGlvbj09PVwibHRyXCIpe3JldHVyblt0LGUsaSxuXX1lbHNle3JldHVybltlLHQsbixpXX19fU9iLmRlZmF1bHRQYW5lbFBvc2l0aW9ucz17c291dGhFYXN0OnQ9Pih7dG9wOnQuYm90dG9tLGxlZnQ6dC5sZWZ0LG5hbWU6XCJzZVwifSksc291dGhXZXN0Oih0LGUpPT4oe3RvcDp0LmJvdHRvbSxsZWZ0OnQubGVmdC1lLndpZHRoK3Qud2lkdGgsbmFtZTpcInN3XCJ9KSxub3J0aEVhc3Q6KHQsZSk9Pih7dG9wOnQudG9wLWUuaGVpZ2h0LGxlZnQ6dC5sZWZ0LG5hbWU6XCJuZVwifSksbm9ydGhXZXN0Oih0LGUpPT4oe3RvcDp0LmJvdHRvbS1lLmhlaWdodCxsZWZ0OnQubGVmdC1lLndpZHRoK3Qud2lkdGgsbmFtZTpcIm53XCJ9KX07T2IuX2dldE9wdGltYWxQb3NpdGlvbj1KcDt2YXIgSWI9Jzxzdmcgdmlld0JveD1cIjAgMCAxMCAxMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTS45NDEgNC41MjNhLjc1Ljc1IDAgMSAxIDEuMDYtMS4wNmwzLjAwNiAzLjAwNSAzLjAwNS0zLjAwNWEuNzUuNzUgMCAxIDEgMS4wNiAxLjA2bC0zLjU0OSAzLjU1YS43NS43NSAwIDAgMS0xLjE2OC0uMTM2TC45NDEgNC41MjN6XCIvPjwvc3ZnPic7Y2xhc3MgVmIgZXh0ZW5kcyBoYntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0aGlzLmFycm93Vmlldz10aGlzLl9jcmVhdGVBcnJvd1ZpZXcoKTt0aGlzLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntcImFyaWEtaGFzcG9wdXBcIjp0cnVlfX0pO3RoaXMuZGVsZWdhdGUoXCJleGVjdXRlXCIpLnRvKHRoaXMsXCJvcGVuXCIpfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO3RoaXMuY2hpbGRyZW4uYWRkKHRoaXMuYXJyb3dWaWV3KX1fY3JlYXRlQXJyb3dWaWV3KCl7Y29uc3QgdD1uZXcgY2I7dC5jb250ZW50PUliO3QuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOlwiY2stZHJvcGRvd25fX2Fycm93XCJ9fSk7cmV0dXJuIHR9fXZhciBOYj1pKDMxKTtjbGFzcyBNYiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKCl7c3VwZXIoKTt0aGlzLml0ZW1zPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpO3RoaXMuZm9jdXNUcmFja2VyPW5ldyBmYjt0aGlzLmtleXN0cm9rZXM9bmV3IGRwO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLml0ZW1zLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOlwiYXJyb3d1cFwiLGZvY3VzTmV4dDpcImFycm93ZG93blwifX0pO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcInVsXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLXJlc2V0XCIsXCJjay1saXN0XCJdfSxjaGlsZHJlbjp0aGlzLml0ZW1zfSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5pdGVtcyl7dGhpcy5mb2N1c1RyYWNrZXIuYWRkKHQuZWxlbWVudCl9dGhpcy5pdGVtcy5vbihcImFkZFwiLCh0LGUpPT57dGhpcy5mb2N1c1RyYWNrZXIuYWRkKGUuZWxlbWVudCl9KTt0aGlzLml0ZW1zLm9uKFwicmVtb3ZlXCIsKHQsZSk9Pnt0aGlzLmZvY3VzVHJhY2tlci5yZW1vdmUoZS5lbGVtZW50KX0pO3RoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfWZvY3VzKCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNGaXJzdCgpfWZvY3VzTGFzdCgpe3RoaXMuX2ZvY3VzQ3ljbGVyLmZvY3VzTGFzdCgpfX1jbGFzcyBCYiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuY2hpbGRyZW49dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwibGlcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stbGlzdF9faXRlbVwiXX0sY2hpbGRyZW46dGhpcy5jaGlsZHJlbn0pfWZvY3VzKCl7dGhpcy5jaGlsZHJlbi5maXJzdC5mb2N1cygpfX1jbGFzcyB6YiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImxpXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWxpc3RfX3NlcGFyYXRvclwiXX19KX19dmFyIExiPWkoMzMpO2NsYXNzIEZiIGV4dGVuZHMgaGJ7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5pc1RvZ2dsZWFibGU9dHJ1ZTt0aGlzLnRvZ2dsZVN3aXRjaFZpZXc9dGhpcy5fY3JlYXRlVG9nZ2xlVmlldygpO3RoaXMuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOlwiY2stc3dpdGNoYnV0dG9uXCJ9fSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7dGhpcy5jaGlsZHJlbi5hZGQodGhpcy50b2dnbGVTd2l0Y2hWaWV3KX1fY3JlYXRlVG9nZ2xlVmlldygpe2NvbnN0IHQ9bmV3IEdwO3Quc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stYnV0dG9uX190b2dnbGVcIl19LGNoaWxkcmVuOlt7dGFnOlwic3BhblwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1idXR0b25fX3RvZ2dsZV9faW5uZXJcIl19fV19KTtyZXR1cm4gdH19ZnVuY3Rpb24gRGIoe2VtaXR0ZXI6dCxhY3RpdmF0b3I6ZSxjYWxsYmFjazppLGNvbnRleHRFbGVtZW50czpufSl7dC5saXN0ZW5Ubyhkb2N1bWVudCxcIm1vdXNlZG93blwiLCh0LHt0YXJnZXQ6b30pPT57aWYoIWUoKSl7cmV0dXJufWZvcihjb25zdCB0IG9mIG4pe2lmKHQuY29udGFpbnMobykpe3JldHVybn19aSgpfSl9dmFyIGpiPWkoMzUpO3ZhciBIYj1pKDM3KTtmdW5jdGlvbiBXYih0LGU9VmIpe2NvbnN0IGk9bmV3IGUodCk7Y29uc3Qgbj1uZXcgRWIodCk7Y29uc3Qgbz1uZXcgT2IodCxpLG4pO2kuYmluZChcImlzRW5hYmxlZFwiKS50byhvKTtpZihpIGluc3RhbmNlb2YgVmIpe2kuYmluZChcImlzT25cIikudG8obyxcImlzT3BlblwiKX1lbHNle2kuYXJyb3dWaWV3LmJpbmQoXCJpc09uXCIpLnRvKG8sXCJpc09wZW5cIil9JGIobyk7cmV0dXJuIG99ZnVuY3Rpb24gcWIodCxlKXtjb25zdCBpPXQubG9jYWxlO2NvbnN0IG49aS50O2NvbnN0IG89dC50b29sYmFyVmlldz1uZXcgWGIoaSk7by5zZXQoXCJhcmlhTGFiZWxcIixuKFwibGdcIikpO3QuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOltcImNrLXRvb2xiYXItZHJvcGRvd25cIl19fSk7ZS5tYXAodD0+by5pdGVtcy5hZGQodCkpO3QucGFuZWxWaWV3LmNoaWxkcmVuLmFkZChvKTtvLml0ZW1zLmRlbGVnYXRlKFwiZXhlY3V0ZVwiKS50byh0KX1mdW5jdGlvbiBVYih0LGUpe2NvbnN0IGk9dC5sb2NhbGU7Y29uc3Qgbj10Lmxpc3RWaWV3PW5ldyBNYihpKTtuLml0ZW1zLmJpbmRUbyhlKS51c2luZygoe3R5cGU6dCxtb2RlbDplfSk9PntpZih0PT09XCJzZXBhcmF0b3JcIil7cmV0dXJuIG5ldyB6YihpKX1lbHNlIGlmKHQ9PT1cImJ1dHRvblwifHx0PT09XCJzd2l0Y2hidXR0b25cIil7Y29uc3Qgbj1uZXcgQmIoaSk7bGV0IG87aWYodD09PVwiYnV0dG9uXCIpe289bmV3IGhiKGkpfWVsc2V7bz1uZXcgRmIoaSl9by5iaW5kKC4uLk9iamVjdC5rZXlzKGUpKS50byhlKTtvLmRlbGVnYXRlKFwiZXhlY3V0ZVwiKS50byhuKTtuLmNoaWxkcmVuLmFkZChvKTtyZXR1cm4gbn19KTt0LnBhbmVsVmlldy5jaGlsZHJlbi5hZGQobik7bi5pdGVtcy5kZWxlZ2F0ZShcImV4ZWN1dGVcIikudG8odCl9ZnVuY3Rpb24gJGIodCl7R2IodCk7S2IodCk7SmIodCl9ZnVuY3Rpb24gR2IodCl7dC5vbihcInJlbmRlclwiLCgpPT57RGIoe2VtaXR0ZXI6dCxhY3RpdmF0b3I6KCk9PnQuaXNPcGVuLGNhbGxiYWNrOigpPT57dC5pc09wZW49ZmFsc2V9LGNvbnRleHRFbGVtZW50czpbdC5lbGVtZW50XX0pfSl9ZnVuY3Rpb24gS2IodCl7dC5vbihcImV4ZWN1dGVcIixlPT57aWYoZS5zb3VyY2UgaW5zdGFuY2VvZiBGYil7cmV0dXJufXQuaXNPcGVuPWZhbHNlfSl9ZnVuY3Rpb24gSmIodCl7dC5rZXlzdHJva2VzLnNldChcImFycm93ZG93blwiLChlLGkpPT57aWYodC5pc09wZW4pe3QucGFuZWxWaWV3LmZvY3VzKCk7aSgpfX0pO3Qua2V5c3Ryb2tlcy5zZXQoXCJhcnJvd3VwXCIsKGUsaSk9PntpZih0LmlzT3Blbil7dC5wYW5lbFZpZXcuZm9jdXNMYXN0KCk7aSgpfX0pfXZhciBZYj0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxjaXJjbGUgY3g9XCI5LjVcIiBjeT1cIjQuNVwiIHI9XCIxLjVcIi8+PGNpcmNsZSBjeD1cIjkuNVwiIGN5PVwiMTAuNVwiIHI9XCIxLjVcIi8+PGNpcmNsZSBjeD1cIjkuNVwiIGN5PVwiMTYuNVwiIHI9XCIxLjVcIi8+PC9zdmc+Jzt2YXIgUWI9aSgzOSk7Y2xhc3MgWGIgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpO2NvbnN0IGk9dGhpcy5iaW5kVGVtcGxhdGU7Y29uc3Qgbj10aGlzLnQ7dGhpcy5vcHRpb25zPWV8fHt9O3RoaXMuc2V0KFwiYXJpYUxhYmVsXCIsbihcImxyXCIpKTt0aGlzLnNldChcIm1heFdpZHRoXCIsXCJhdXRvXCIpO3RoaXMuaXRlbXM9dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5mb2N1c1RyYWNrZXI9bmV3IGZiO3RoaXMua2V5c3Ryb2tlcz1uZXcgZHA7dGhpcy5zZXQoXCJjbGFzc1wiKTt0aGlzLnNldChcImlzQ29tcGFjdFwiLGZhbHNlKTt0aGlzLml0ZW1zVmlldz1uZXcgWmIodCk7dGhpcy5jaGlsZHJlbj10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLmNoaWxkcmVuLmFkZCh0aGlzLml0ZW1zVmlldyk7dGhpcy5mb2N1c2FibGVzPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLmZvY3VzYWJsZXMsZm9jdXNUcmFja2VyOnRoaXMuZm9jdXNUcmFja2VyLGtleXN0cm9rZUhhbmRsZXI6dGhpcy5rZXlzdHJva2VzLGFjdGlvbnM6e2ZvY3VzUHJldmlvdXM6W1wiYXJyb3dsZWZ0XCIsXCJhcnJvd3VwXCJdLGZvY3VzTmV4dDpbXCJhcnJvd3JpZ2h0XCIsXCJhcnJvd2Rvd25cIl19fSk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLXRvb2xiYXJcIixpLnRvKFwiY2xhc3NcIiksaS5pZihcImlzQ29tcGFjdFwiLFwiY2stdG9vbGJhcl9jb21wYWN0XCIpXSxyb2xlOlwidG9vbGJhclwiLFwiYXJpYS1sYWJlbFwiOmkudG8oXCJhcmlhTGFiZWxcIiksc3R5bGU6e21heFdpZHRoOmkudG8oXCJtYXhXaWR0aFwiKX19LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW4sb246e21vdXNlZG93bjpTYih0aGlzKX19KTt0aGlzLl9iZWhhdmlvcj10aGlzLm9wdGlvbnMuc2hvdWxkR3JvdXBXaGVuRnVsbD9uZXcgZXcodGhpcyk6bmV3IHR3KHRoaXMpfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO2Zvcihjb25zdCB0IG9mIHRoaXMuaXRlbXMpe3RoaXMuZm9jdXNUcmFja2VyLmFkZCh0LmVsZW1lbnQpfXRoaXMuaXRlbXMub24oXCJhZGRcIiwodCxlKT0+e3RoaXMuZm9jdXNUcmFja2VyLmFkZChlLmVsZW1lbnQpfSk7dGhpcy5pdGVtcy5vbihcInJlbW92ZVwiLCh0LGUpPT57dGhpcy5mb2N1c1RyYWNrZXIucmVtb3ZlKGUuZWxlbWVudCl9KTt0aGlzLmtleXN0cm9rZXMubGlzdGVuVG8odGhpcy5lbGVtZW50KTt0aGlzLl9iZWhhdmlvci5yZW5kZXIodGhpcyl9ZGVzdHJveSgpe3RoaXMuX2JlaGF2aW9yLmRlc3Ryb3koKTtyZXR1cm4gc3VwZXIuZGVzdHJveSgpfWZvY3VzKCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNGaXJzdCgpfWZvY3VzTGFzdCgpe3RoaXMuX2ZvY3VzQ3ljbGVyLmZvY3VzTGFzdCgpfWZpbGxGcm9tQ29uZmlnKHQsZSl7dC5tYXAodD0+e2lmKHQ9PVwifFwiKXt0aGlzLml0ZW1zLmFkZChuZXcgQ2IpfWVsc2UgaWYoZS5oYXModCkpe3RoaXMuaXRlbXMuYWRkKGUuY3JlYXRlKHQpKX1lbHNle2NvbnNvbGUud2FybihPYmplY3Qoc3NbXCJhXCJdKShcInRvb2xiYXJ2aWV3LWl0ZW0tdW5hdmFpbGFibGU6IFRoZSByZXF1ZXN0ZWQgdG9vbGJhciBpdGVtIGlzIHVuYXZhaWxhYmxlLlwiKSx7bmFtZTp0fSl9fSl9fWNsYXNzIFpiIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5jaGlsZHJlbj10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stdG9vbGJhcl9faXRlbXNcIl19LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW59KX19Y2xhc3MgdHd7Y29uc3RydWN0b3IodCl7Y29uc3QgZT10LmJpbmRUZW1wbGF0ZTt0LnNldChcImlzVmVydGljYWxcIixmYWxzZSk7dC5pdGVtc1ZpZXcuY2hpbGRyZW4uYmluZFRvKHQuaXRlbXMpLnVzaW5nKHQ9PnQpO3QuZm9jdXNhYmxlcy5iaW5kVG8odC5pdGVtcykudXNpbmcodD0+dCk7dC5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6W2UuaWYoXCJpc1ZlcnRpY2FsXCIsXCJjay10b29sYmFyX3ZlcnRpY2FsXCIpXX19KX1yZW5kZXIoKXt9ZGVzdHJveSgpe319Y2xhc3MgZXd7Y29uc3RydWN0b3IodCl7dGhpcy52aWV3Q2hpbGRyZW49dC5jaGlsZHJlbjt0aGlzLnZpZXdGb2N1c2FibGVzPXQuZm9jdXNhYmxlczt0aGlzLnZpZXdJdGVtc1ZpZXc9dC5pdGVtc1ZpZXc7dGhpcy52aWV3Rm9jdXNUcmFja2VyPXQuZm9jdXNUcmFja2VyO3RoaXMudmlld0xvY2FsZT10LmxvY2FsZTt0aGlzLnVuZ3JvdXBlZEl0ZW1zPXQuY3JlYXRlQ29sbGVjdGlvbigpO3RoaXMuZ3JvdXBlZEl0ZW1zPXQuY3JlYXRlQ29sbGVjdGlvbigpO3RoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd249dGhpcy5fY3JlYXRlR3JvdXBlZEl0ZW1zRHJvcGRvd24oKTt0aGlzLnJlc2l6ZU9ic2VydmVyPW51bGw7dGhpcy5jYWNoZWRQYWRkaW5nPW51bGw7dC5pdGVtc1ZpZXcuY2hpbGRyZW4uYmluZFRvKHRoaXMudW5ncm91cGVkSXRlbXMpLnVzaW5nKHQ9PnQpO3RoaXMudW5ncm91cGVkSXRlbXMub24oXCJhZGRcIix0aGlzLl91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zLmJpbmQodGhpcykpO3RoaXMudW5ncm91cGVkSXRlbXMub24oXCJyZW1vdmVcIix0aGlzLl91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zLmJpbmQodGhpcykpO3QuY2hpbGRyZW4ub24oXCJhZGRcIix0aGlzLl91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zLmJpbmQodGhpcykpO3QuY2hpbGRyZW4ub24oXCJyZW1vdmVcIix0aGlzLl91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zLmJpbmQodGhpcykpO3QuaXRlbXMub24oXCJhZGRcIiwodCxlLGkpPT57aWYoaT50aGlzLnVuZ3JvdXBlZEl0ZW1zLmxlbmd0aCl7dGhpcy5ncm91cGVkSXRlbXMuYWRkKGUsaS10aGlzLnVuZ3JvdXBlZEl0ZW1zLmxlbmd0aCl9ZWxzZXt0aGlzLnVuZ3JvdXBlZEl0ZW1zLmFkZChlLGkpfXRoaXMuX3VwZGF0ZUdyb3VwaW5nKCl9KTt0Lml0ZW1zLm9uKFwicmVtb3ZlXCIsKHQsZSxpKT0+e2lmKGk+dGhpcy51bmdyb3VwZWRJdGVtcy5sZW5ndGgpe3RoaXMuZ3JvdXBlZEl0ZW1zLnJlbW92ZShlKX1lbHNle3RoaXMudW5ncm91cGVkSXRlbXMucmVtb3ZlKGUpfXRoaXMuX3VwZGF0ZUdyb3VwaW5nKCl9KTt0LmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczpbXCJjay10b29sYmFyX2dyb3VwaW5nXCJdfX0pfXJlbmRlcih0KXt0aGlzLnZpZXdFbGVtZW50PXQuZWxlbWVudDt0aGlzLl9lbmFibGVHcm91cGluZ09uUmVzaXplKCk7dGhpcy5fZW5hYmxlR3JvdXBpbmdPbk1heFdpZHRoQ2hhbmdlKHQpfWRlc3Ryb3koKXt0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duLmRlc3Ryb3koKTt0aGlzLnJlc2l6ZU9ic2VydmVyLmRlc3Ryb3koKX1fdXBkYXRlR3JvdXBpbmcoKXtpZighdGhpcy52aWV3RWxlbWVudC5vd25lckRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy52aWV3RWxlbWVudCkpe3JldHVybn1sZXQgdDt3aGlsZSh0aGlzLl9hcmVJdGVtc092ZXJmbG93aW5nKXt0aGlzLl9ncm91cExhc3RJdGVtKCk7dD10cnVlfWlmKCF0JiZ0aGlzLmdyb3VwZWRJdGVtcy5sZW5ndGgpe3doaWxlKHRoaXMuZ3JvdXBlZEl0ZW1zLmxlbmd0aCYmIXRoaXMuX2FyZUl0ZW1zT3ZlcmZsb3dpbmcpe3RoaXMuX3VuZ3JvdXBGaXJzdEl0ZW0oKX1pZih0aGlzLl9hcmVJdGVtc092ZXJmbG93aW5nKXt0aGlzLl9ncm91cExhc3RJdGVtKCl9fX1nZXQgX2FyZUl0ZW1zT3ZlcmZsb3dpbmcoKXtpZighdGhpcy51bmdyb3VwZWRJdGVtcy5sZW5ndGgpe3JldHVybiBmYWxzZX1jb25zdCB0PXRoaXMudmlld0VsZW1lbnQ7Y29uc3QgZT10aGlzLnZpZXdMb2NhbGUudWlMYW5ndWFnZURpcmVjdGlvbjtjb25zdCBpPW5ldyB2aCh0Lmxhc3RDaGlsZCk7Y29uc3Qgbj1uZXcgdmgodCk7aWYoIXRoaXMuY2FjaGVkUGFkZGluZyl7Y29uc3QgaT1JZC53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KTtjb25zdCBuPWU9PT1cImx0clwiP1wicGFkZGluZ1JpZ2h0XCI6XCJwYWRkaW5nTGVmdFwiO3RoaXMuY2FjaGVkUGFkZGluZz1OdW1iZXIucGFyc2VJbnQoaVtuXSl9aWYoZT09PVwibHRyXCIpe3JldHVybiBpLnJpZ2h0Pm4ucmlnaHQtdGhpcy5jYWNoZWRQYWRkaW5nfWVsc2V7cmV0dXJuIGkubGVmdDxuLmxlZnQrdGhpcy5jYWNoZWRQYWRkaW5nfX1fZW5hYmxlR3JvdXBpbmdPblJlc2l6ZSgpe2xldCB0O3RoaXMucmVzaXplT2JzZXJ2ZXI9bmV3IFRiKHRoaXMudmlld0VsZW1lbnQsZT0+e2lmKCF0fHx0IT09ZS5jb250ZW50UmVjdC53aWR0aCl7dGhpcy5fdXBkYXRlR3JvdXBpbmcoKTt0PWUuY29udGVudFJlY3Qud2lkdGh9fSk7dGhpcy5fdXBkYXRlR3JvdXBpbmcoKX1fZW5hYmxlR3JvdXBpbmdPbk1heFdpZHRoQ2hhbmdlKHQpe3Qub24oXCJjaGFuZ2U6bWF4V2lkdGhcIiwoKT0+e3RoaXMuX3VwZGF0ZUdyb3VwaW5nKCl9KX1fZ3JvdXBMYXN0SXRlbSgpe2lmKCF0aGlzLmdyb3VwZWRJdGVtcy5sZW5ndGgpe3RoaXMudmlld0NoaWxkcmVuLmFkZChuZXcgQ2IpO3RoaXMudmlld0NoaWxkcmVuLmFkZCh0aGlzLmdyb3VwZWRJdGVtc0Ryb3Bkb3duKTt0aGlzLnZpZXdGb2N1c1RyYWNrZXIuYWRkKHRoaXMuZ3JvdXBlZEl0ZW1zRHJvcGRvd24uZWxlbWVudCl9dGhpcy5ncm91cGVkSXRlbXMuYWRkKHRoaXMudW5ncm91cGVkSXRlbXMucmVtb3ZlKHRoaXMudW5ncm91cGVkSXRlbXMubGFzdCksMCl9X3VuZ3JvdXBGaXJzdEl0ZW0oKXt0aGlzLnVuZ3JvdXBlZEl0ZW1zLmFkZCh0aGlzLmdyb3VwZWRJdGVtcy5yZW1vdmUodGhpcy5ncm91cGVkSXRlbXMuZmlyc3QpKTtpZighdGhpcy5ncm91cGVkSXRlbXMubGVuZ3RoKXt0aGlzLnZpZXdDaGlsZHJlbi5yZW1vdmUodGhpcy5ncm91cGVkSXRlbXNEcm9wZG93bik7dGhpcy52aWV3Q2hpbGRyZW4ucmVtb3ZlKHRoaXMudmlld0NoaWxkcmVuLmxhc3QpO3RoaXMudmlld0ZvY3VzVHJhY2tlci5yZW1vdmUodGhpcy5ncm91cGVkSXRlbXNEcm9wZG93bi5lbGVtZW50KX19X2NyZWF0ZUdyb3VwZWRJdGVtc0Ryb3Bkb3duKCl7Y29uc3QgdD10aGlzLnZpZXdMb2NhbGU7Y29uc3QgZT10LnQ7Y29uc3QgaT1XYih0KTtpLmNsYXNzPVwiY2stdG9vbGJhcl9fZ3JvdXBlZC1kcm9wZG93blwiO2kucGFuZWxQb3NpdGlvbj10LnVpTGFuZ3VhZ2VEaXJlY3Rpb249PT1cImx0clwiP1wic3dcIjpcInNlXCI7cWIoaSxbXSk7aS5idXR0b25WaWV3LnNldCh7bGFiZWw6ZShcImxzXCIpLHRvb2x0aXA6dHJ1ZSxpY29uOllifSk7aS50b29sYmFyVmlldy5pdGVtcy5iaW5kVG8odGhpcy5ncm91cGVkSXRlbXMpLnVzaW5nKHQ9PnQpO3JldHVybiBpfV91cGRhdGVGb2N1c0N5Y2xlYWJsZUl0ZW1zKCl7dGhpcy52aWV3Rm9jdXNhYmxlcy5jbGVhcigpO3RoaXMudW5ncm91cGVkSXRlbXMubWFwKHQ9Pnt0aGlzLnZpZXdGb2N1c2FibGVzLmFkZCh0KX0pO2lmKHRoaXMuZ3JvdXBlZEl0ZW1zLmxlbmd0aCl7dGhpcy52aWV3Rm9jdXNhYmxlcy5hZGQodGhpcy5ncm91cGVkSXRlbXNEcm9wZG93bil9fX1mdW5jdGlvbiBpdyh0KXtpZihBcnJheS5pc0FycmF5KHQpKXtyZXR1cm57aXRlbXM6dH19aWYoIXQpe3JldHVybntpdGVtczpbXX19cmV0dXJuIE9iamVjdC5hc3NpZ24oe2l0ZW1zOltdfSx0KX1jb25zdCBudz1acChcInB4XCIpO2NsYXNzIG93IGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJCYWxsb29uVG9vbGJhclwifXN0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5ba2JdfWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuX2JhbGxvb25Db25maWc9aXcodC5jb25maWcuZ2V0KFwiYmFsbG9vblRvb2xiYXJcIikpO3RoaXMudG9vbGJhclZpZXc9dGhpcy5fY3JlYXRlVG9vbGJhclZpZXcoKTt0aGlzLmZvY3VzVHJhY2tlcj1uZXcgZmI7dC51aS5vbmNlKFwicmVhZHlcIiwoKT0+e3RoaXMuZm9jdXNUcmFja2VyLmFkZCh0LnVpLmdldEVkaXRhYmxlRWxlbWVudCgpKTt0aGlzLmZvY3VzVHJhY2tlci5hZGQodGhpcy50b29sYmFyVmlldy5lbGVtZW50KX0pO3RoaXMuX3Jlc2l6ZU9ic2VydmVyPW51bGw7dGhpcy5fYmFsbG9vbj10LnBsdWdpbnMuZ2V0KGtiKTt0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRGVib3VuY2VkPXVoKCgpPT50aGlzLmZpcmUoXCJfc2VsZWN0aW9uQ2hhbmdlRGVib3VuY2VkXCIpLDIwMCk7dGhpcy5kZWNvcmF0ZShcInNob3dcIil9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10Lm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjt0aGlzLmxpc3RlblRvKHRoaXMuZm9jdXNUcmFja2VyLFwiY2hhbmdlOmlzRm9jdXNlZFwiLCh0LGUsaSk9Pntjb25zdCBuPXRoaXMuX2JhbGxvb24udmlzaWJsZVZpZXc9PT10aGlzLnRvb2xiYXJWaWV3O2lmKCFpJiZuKXt0aGlzLmhpZGUoKX1lbHNlIGlmKGkpe3RoaXMuc2hvdygpfX0pO3RoaXMubGlzdGVuVG8oZSxcImNoYW5nZTpyYW5nZVwiLCh0LGkpPT57aWYoaS5kaXJlY3RDaGFuZ2V8fGUuaXNDb2xsYXBzZWQpe3RoaXMuaGlkZSgpfXRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEZWJvdW5jZWQoKX0pO3RoaXMubGlzdGVuVG8odGhpcyxcIl9zZWxlY3Rpb25DaGFuZ2VEZWJvdW5jZWRcIiwoKT0+e2lmKHRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5kb2N1bWVudC5pc0ZvY3VzZWQpe3RoaXMuc2hvdygpfX0pO2lmKCF0aGlzLl9iYWxsb29uQ29uZmlnLnNob3VsZE5vdEdyb3VwV2hlbkZ1bGwpe3RoaXMubGlzdGVuVG8odCxcInJlYWR5XCIsKCk9Pntjb25zdCBlPXQudWkudmlldy5lZGl0YWJsZS5lbGVtZW50O3RoaXMuX3Jlc2l6ZU9ic2VydmVyPW5ldyBUYihlLCgpPT57dGhpcy50b29sYmFyVmlldy5tYXhXaWR0aD1udyhuZXcgdmgoZSkud2lkdGgqLjkpfSl9KX19YWZ0ZXJJbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvci51aS5jb21wb25lbnRGYWN0b3J5O3RoaXMudG9vbGJhclZpZXcuZmlsbEZyb21Db25maWcodGhpcy5fYmFsbG9vbkNvbmZpZy5pdGVtcyx0KX1fY3JlYXRlVG9vbGJhclZpZXcoKXtjb25zdCB0PSF0aGlzLl9iYWxsb29uQ29uZmlnLnNob3VsZE5vdEdyb3VwV2hlbkZ1bGw7Y29uc3QgZT1uZXcgWGIodGhpcy5lZGl0b3IubG9jYWxlLHtzaG91bGRHcm91cFdoZW5GdWxsOnR9KTtlLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczpbXCJjay10b29sYmFyX2Zsb2F0aW5nXCJdfX0pO2UucmVuZGVyKCk7cmV0dXJuIGV9c2hvdygpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7aWYodGhpcy5fYmFsbG9vbi5oYXNWaWV3KHRoaXMudG9vbGJhclZpZXcpKXtyZXR1cm59aWYodC5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uaXNDb2xsYXBzZWQpe3JldHVybn1pZihBcnJheS5mcm9tKHRoaXMudG9vbGJhclZpZXcuaXRlbXMpLmV2ZXJ5KHQ9PnQuaXNFbmFibGVkIT09dW5kZWZpbmVkJiYhdC5pc0VuYWJsZWQpKXtyZXR1cm59dGhpcy5saXN0ZW5Ubyh0aGlzLmVkaXRvci51aSxcInVwZGF0ZVwiLCgpPT57dGhpcy5fYmFsbG9vbi51cGRhdGVQb3NpdGlvbih0aGlzLl9nZXRCYWxsb29uUG9zaXRpb25EYXRhKCkpfSk7dGhpcy5fYmFsbG9vbi5hZGQoe3ZpZXc6dGhpcy50b29sYmFyVmlldyxwb3NpdGlvbjp0aGlzLl9nZXRCYWxsb29uUG9zaXRpb25EYXRhKCksYmFsbG9vbkNsYXNzTmFtZTpcImNrLXRvb2xiYXItY29udGFpbmVyXCJ9KX1oaWRlKCl7aWYodGhpcy5fYmFsbG9vbi5oYXNWaWV3KHRoaXMudG9vbGJhclZpZXcpKXt0aGlzLnN0b3BMaXN0ZW5pbmcodGhpcy5lZGl0b3IudWksXCJ1cGRhdGVcIik7dGhpcy5fYmFsbG9vbi5yZW1vdmUodGhpcy50b29sYmFyVmlldyl9fV9nZXRCYWxsb29uUG9zaXRpb25EYXRhKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQuZWRpdGluZy52aWV3O2NvbnN0IGk9ZS5kb2N1bWVudDtjb25zdCBuPWkuc2VsZWN0aW9uO2NvbnN0IG89aS5zZWxlY3Rpb24uaXNCYWNrd2FyZDtyZXR1cm57dGFyZ2V0OigpPT57Y29uc3QgdD1vP24uZ2V0Rmlyc3RSYW5nZSgpOm4uZ2V0TGFzdFJhbmdlKCk7Y29uc3QgaT12aC5nZXREb21SYW5nZVJlY3RzKGUuZG9tQ29udmVydGVyLnZpZXdSYW5nZVRvRG9tKHQpKTtpZihvKXtyZXR1cm4gaVswXX1lbHNle2lmKGkubGVuZ3RoPjEmJmlbaS5sZW5ndGgtMV0ud2lkdGg9PT0wKXtpLnBvcCgpfXJldHVybiBpW2kubGVuZ3RoLTFdfX0scG9zaXRpb25zOnJ3KG8pfX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpO3RoaXMuc3RvcExpc3RlbmluZygpO3RoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEZWJvdW5jZWQuY2FuY2VsKCk7dGhpcy50b29sYmFyVmlldy5kZXN0cm95KCk7dGhpcy5mb2N1c1RyYWNrZXIuZGVzdHJveSgpO2lmKHRoaXMuX3Jlc2l6ZU9ic2VydmVyKXt0aGlzLl9yZXNpemVPYnNlcnZlci5kZXN0cm95KCl9fX1mdW5jdGlvbiBydyh0KXtjb25zdCBlPW5iLmRlZmF1bHRQb3NpdGlvbnM7cmV0dXJuIHQ/W2Uubm9ydGhXZXN0QXJyb3dTb3V0aCxlLm5vcnRoV2VzdEFycm93U291dGhXZXN0LGUubm9ydGhXZXN0QXJyb3dTb3V0aEVhc3QsZS5ub3J0aFdlc3RBcnJvd1NvdXRoTWlkZGxlRWFzdCxlLm5vcnRoV2VzdEFycm93U291dGhNaWRkbGVXZXN0LGUuc291dGhXZXN0QXJyb3dOb3J0aCxlLnNvdXRoV2VzdEFycm93Tm9ydGhXZXN0LGUuc291dGhXZXN0QXJyb3dOb3J0aEVhc3QsZS5zb3V0aFdlc3RBcnJvd05vcnRoTWlkZGxlV2VzdCxlLnNvdXRoV2VzdEFycm93Tm9ydGhNaWRkbGVFYXN0XTpbZS5zb3V0aEVhc3RBcnJvd05vcnRoLGUuc291dGhFYXN0QXJyb3dOb3J0aEVhc3QsZS5zb3V0aEVhc3RBcnJvd05vcnRoV2VzdCxlLnNvdXRoRWFzdEFycm93Tm9ydGhNaWRkbGVFYXN0LGUuc291dGhFYXN0QXJyb3dOb3J0aE1pZGRsZVdlc3QsZS5ub3J0aEVhc3RBcnJvd1NvdXRoLGUubm9ydGhFYXN0QXJyb3dTb3V0aEVhc3QsZS5ub3J0aEVhc3RBcnJvd1NvdXRoV2VzdCxlLm5vcnRoRWFzdEFycm93U291dGhNaWRkbGVFYXN0LGUubm9ydGhFYXN0QXJyb3dTb3V0aE1pZGRsZVdlc3RdfWNsYXNzIHN3e2NvbnN0cnVjdG9yKHQpe3RoaXMuZWRpdG9yPXQ7dGhpcy5fY29tcG9uZW50cz1uZXcgTWFwfSpuYW1lcygpe2Zvcihjb25zdCB0IG9mIHRoaXMuX2NvbXBvbmVudHMudmFsdWVzKCkpe3lpZWxkIHQub3JpZ2luYWxOYW1lfX1hZGQodCxlKXtpZih0aGlzLmhhcyh0KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImNvbXBvbmVudGZhY3RvcnktaXRlbS1leGlzdHM6IFRoZSBpdGVtIGFscmVhZHkgZXhpc3RzIGluIHRoZSBjb21wb25lbnQgZmFjdG9yeS5cIix0aGlzLHtuYW1lOnR9KX10aGlzLl9jb21wb25lbnRzLnNldChhdyh0KSx7Y2FsbGJhY2s6ZSxvcmlnaW5hbE5hbWU6dH0pfWNyZWF0ZSh0KXtpZighdGhpcy5oYXModCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJjb21wb25lbnRmYWN0b3J5LWl0ZW0tbWlzc2luZzogVGhlIHJlcXVpcmVkIGNvbXBvbmVudCBpcyBub3QgcmVnaXN0ZXJlZCBpbiB0aGUgZmFjdG9yeS5cIix0aGlzLHtuYW1lOnR9KX1yZXR1cm4gdGhpcy5fY29tcG9uZW50cy5nZXQoYXcodCkpLmNhbGxiYWNrKHRoaXMuZWRpdG9yLmxvY2FsZSl9aGFzKHQpe3JldHVybiB0aGlzLl9jb21wb25lbnRzLmhhcyhhdyh0KSl9fWZ1bmN0aW9uIGF3KHQpe3JldHVybiBTdHJpbmcodCkudG9Mb3dlckNhc2UoKX1jbGFzcyBjd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmVkaXRvcj10O3RoaXMuY29tcG9uZW50RmFjdG9yeT1uZXcgc3codCk7dGhpcy5mb2N1c1RyYWNrZXI9bmV3IGZiO3RoaXMuX2VkaXRhYmxlRWxlbWVudHNNYXA9bmV3IE1hcDt0aGlzLmxpc3RlblRvKHQuZWRpdGluZy52aWV3LmRvY3VtZW50LFwibGF5b3V0Q2hhbmdlZFwiLCgpPT50aGlzLnVwZGF0ZSgpKX1nZXQgZWxlbWVudCgpe3JldHVybiBudWxsfXVwZGF0ZSgpe3RoaXMuZmlyZShcInVwZGF0ZVwiKX1kZXN0cm95KCl7dGhpcy5zdG9wTGlzdGVuaW5nKCk7dGhpcy5mb2N1c1RyYWNrZXIuZGVzdHJveSgpO2Zvcihjb25zdCB0IG9mIHRoaXMuX2VkaXRhYmxlRWxlbWVudHNNYXAudmFsdWVzKCkpe3QuY2tlZGl0b3JJbnN0YW5jZT1udWxsfXRoaXMuX2VkaXRhYmxlRWxlbWVudHNNYXA9bmV3IE1hcH1zZXRFZGl0YWJsZUVsZW1lbnQodCxlKXt0aGlzLl9lZGl0YWJsZUVsZW1lbnRzTWFwLnNldCh0LGUpO2lmKCFlLmNrZWRpdG9ySW5zdGFuY2Upe2UuY2tlZGl0b3JJbnN0YW5jZT10aGlzLmVkaXRvcn19Z2V0RWRpdGFibGVFbGVtZW50KHQ9XCJtYWluXCIpe3JldHVybiB0aGlzLl9lZGl0YWJsZUVsZW1lbnRzTWFwLmdldCh0KX1nZXRFZGl0YWJsZUVsZW1lbnRzTmFtZXMoKXtyZXR1cm4gdGhpcy5fZWRpdGFibGVFbGVtZW50c01hcC5rZXlzKCl9Z2V0IF9lZGl0YWJsZUVsZW1lbnRzKCl7Y29uc29sZS53YXJuKFwiZWRpdG9yLXVpLWRlcHJlY2F0ZWQtZWRpdGFibGUtZWxlbWVudHM6IFwiK1wiVGhlIEVkaXRvclVJI19lZGl0YWJsZUVsZW1lbnRzIHByb3BlcnR5IGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmVhciBmdXR1cmUuXCIse2VkaXRvclVJOnRoaXN9KTtyZXR1cm4gdGhpcy5fZWRpdGFibGVFbGVtZW50c01hcH19dnMoY3csZHMpO2Z1bmN0aW9uIGx3KHtvcmlnaW46dCxvcmlnaW5LZXlzdHJva2VIYW5kbGVyOmUsb3JpZ2luRm9jdXNUcmFja2VyOmksdG9vbGJhcjpuLGJlZm9yZUZvY3VzOm8sYWZ0ZXJCbHVyOnJ9KXtpLmFkZChuLmVsZW1lbnQpO2Uuc2V0KFwiQWx0K0YxMFwiLCh0LGUpPT57aWYoaS5pc0ZvY3VzZWQmJiFuLmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQpe2lmKG8pe28oKX1uLmZvY3VzKCk7ZSgpfX0pO24ua2V5c3Ryb2tlcy5zZXQoXCJFc2NcIiwoZSxpKT0+e2lmKG4uZm9jdXNUcmFja2VyLmlzRm9jdXNlZCl7dC5mb2N1cygpO2lmKHIpe3IoKX1pKCl9fSl9dmFyIGR3PWkoNDEpO2NvbnN0IHV3PW5ldyBXZWFrTWFwO2Z1bmN0aW9uIGh3KHQpe2NvbnN0e3ZpZXc6ZSxlbGVtZW50OmksdGV4dDpuLGlzRGlyZWN0SG9zdDpvPXRydWV9PXQ7Y29uc3Qgcj1lLmRvY3VtZW50O2lmKCF1dy5oYXMocikpe3V3LnNldChyLG5ldyBNYXApO3IucmVnaXN0ZXJQb3N0Rml4ZXIodD0+Yncocix0KSl9dXcuZ2V0KHIpLnNldChpLHt0ZXh0Om4saXNEaXJlY3RIb3N0Om99KTtlLmNoYW5nZSh0PT5idyhyLHQpKX1mdW5jdGlvbiBmdyh0LGUpe2NvbnN0IGk9ZS5kb2N1bWVudDt0LmNoYW5nZSh0PT57aWYoIXV3LmhhcyhpKSl7cmV0dXJufWNvbnN0IG49dXcuZ2V0KGkpO2NvbnN0IG89bi5nZXQoZSk7dC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBsYWNlaG9sZGVyXCIsby5ob3N0RWxlbWVudCk7bXcodCxvLmhvc3RFbGVtZW50KTtuLmRlbGV0ZShlKX0pfWZ1bmN0aW9uIGd3KHQsZSl7aWYoIWUuaGFzQ2xhc3MoXCJjay1wbGFjZWhvbGRlclwiKSl7dC5hZGRDbGFzcyhcImNrLXBsYWNlaG9sZGVyXCIsZSk7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIG13KHQsZSl7aWYoZS5oYXNDbGFzcyhcImNrLXBsYWNlaG9sZGVyXCIpKXt0LnJlbW92ZUNsYXNzKFwiY2stcGxhY2Vob2xkZXJcIixlKTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gcHcodCl7aWYoIXQuaXNBdHRhY2hlZCgpKXtyZXR1cm4gZmFsc2V9Y29uc3QgZT0hQXJyYXkuZnJvbSh0LmdldENoaWxkcmVuKCkpLnNvbWUodD0+IXQuaXMoXCJ1aUVsZW1lbnRcIikpO2NvbnN0IGk9dC5kb2N1bWVudDtpZighaS5pc0ZvY3VzZWQmJmUpe3JldHVybiB0cnVlfWNvbnN0IG49aS5zZWxlY3Rpb247Y29uc3Qgbz1uLmFuY2hvcjtpZihlJiZvJiZvLnBhcmVudCE9PXQpe3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiBidyh0LGUpe2NvbnN0IGk9dXcuZ2V0KHQpO2xldCBuPWZhbHNlO2Zvcihjb25zdFt0LG9db2YgaSl7aWYod3coZSx0LG8pKXtuPXRydWV9fXJldHVybiBufWZ1bmN0aW9uIHd3KHQsZSxpKXtjb25zdHt0ZXh0Om4saXNEaXJlY3RIb3N0Om99PWk7Y29uc3Qgcj1vP2U6a3coZSk7bGV0IHM9ZmFsc2U7aWYoIXIpe3JldHVybiBmYWxzZX1pLmhvc3RFbGVtZW50PXI7aWYoci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBsYWNlaG9sZGVyXCIpIT09bil7dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBsYWNlaG9sZGVyXCIsbixyKTtzPXRydWV9aWYocHcocikpe2lmKGd3KHQscikpe3M9dHJ1ZX19ZWxzZSBpZihtdyh0LHIpKXtzPXRydWV9cmV0dXJuIHN9ZnVuY3Rpb24ga3codCl7aWYodC5jaGlsZENvdW50PT09MSl7Y29uc3QgZT10LmdldENoaWxkKDApO2lmKGUuaXMoXCJlbGVtZW50XCIpJiYhZS5pcyhcInVpRWxlbWVudFwiKSl7cmV0dXJuIGV9fXJldHVybiBudWxsfWNsYXNzIF93IGV4dGVuZHMgY3d7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLnZpZXc9ZX1nZXQgZWxlbWVudCgpe3JldHVybiB0aGlzLnZpZXcuZWRpdGFibGUuZWxlbWVudH1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXRoaXMudmlldztjb25zdCBpPXQucGx1Z2lucy5nZXQoXCJCYWxsb29uVG9vbGJhclwiKTtjb25zdCBuPXQuZWRpdGluZy52aWV3O2NvbnN0IG89ZS5lZGl0YWJsZTtjb25zdCByPW4uZG9jdW1lbnQuZ2V0Um9vdCgpO28ubmFtZT1yLnJvb3ROYW1lO2UucmVuZGVyKCk7Y29uc3Qgcz1vLmVsZW1lbnQ7dGhpcy5zZXRFZGl0YWJsZUVsZW1lbnQoby5uYW1lLHMpO3RoaXMuZm9jdXNUcmFja2VyLmFkZChzKTtvLmJpbmQoXCJpc0ZvY3VzZWRcIikudG8odGhpcy5mb2N1c1RyYWNrZXIpO24uYXR0YWNoRG9tUm9vdChzKTtsdyh7b3JpZ2luOm4sb3JpZ2luRm9jdXNUcmFja2VyOnRoaXMuZm9jdXNUcmFja2VyLG9yaWdpbktleXN0cm9rZUhhbmRsZXI6dC5rZXlzdHJva2VzLHRvb2xiYXI6aS50b29sYmFyVmlldyxiZWZvcmVGb2N1cygpe2kuc2hvdygpfSxhZnRlckJsdXIoKXtpLmhpZGUoKX19KTt0aGlzLl9pbml0UGxhY2Vob2xkZXIoKTt0aGlzLmZpcmUoXCJyZWFkeVwiKX1kZXN0cm95KCl7Y29uc3QgdD10aGlzLnZpZXc7Y29uc3QgZT10aGlzLmVkaXRvci5lZGl0aW5nLnZpZXc7ZS5kZXRhY2hEb21Sb290KHQuZWRpdGFibGUubmFtZSk7dC5kZXN0cm95KCk7c3VwZXIuZGVzdHJveSgpfV9pbml0UGxhY2Vob2xkZXIoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5lZGl0aW5nLnZpZXc7Y29uc3QgaT1lLmRvY3VtZW50LmdldFJvb3QoKTtjb25zdCBuPXQuc291cmNlRWxlbWVudDtjb25zdCBvPXQuY29uZmlnLmdldChcInBsYWNlaG9sZGVyXCIpfHxuJiZuLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PVwidGV4dGFyZWFcIiYmbi5nZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKTtpZihvKXtodyh7dmlldzplLGVsZW1lbnQ6aSx0ZXh0Om8saXNEaXJlY3RIb3N0OmZhbHNlfSl9fX12YXIgdnc9XCJbb2JqZWN0IFN0cmluZ11cIjtmdW5jdGlvbiB5dyh0KXtyZXR1cm4gdHlwZW9mIHQ9PVwic3RyaW5nXCJ8fCFKZSh0KSYmVCh0KSYmXyh0KT09dnd9dmFyIHh3PXl3O2Z1bmN0aW9uIEN3KHQsZSxpPXt9LG49W10pe2NvbnN0IG89aSYmaS54bWxucztjb25zdCByPW8/dC5jcmVhdGVFbGVtZW50TlMobyxlKTp0LmNyZWF0ZUVsZW1lbnQoZSk7Zm9yKGNvbnN0IHQgaW4gaSl7ci5zZXRBdHRyaWJ1dGUodCxpW3RdKX1pZih4dyhuKXx8IWpzKG4pKXtuPVtuXX1mb3IobGV0IGUgb2Ygbil7aWYoeHcoZSkpe2U9dC5jcmVhdGVUZXh0Tm9kZShlKX1yLmFwcGVuZENoaWxkKGUpfXJldHVybiByfWNsYXNzIEF3IGV4dGVuZHMgYnB7YXR0YWNoVG9Eb20oKXt0aGlzLl9ib2R5Q29sbGVjdGlvbkNvbnRhaW5lcj1uZXcgX3Aoe3RhZzpcImRpdlwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1yZXNldF9hbGxcIixcImNrLWJvZHlcIixcImNrLXJvdW5kZWQtY29ybmVyc1wiXSxkaXI6dGhpcy5sb2NhbGUudWlMYW5ndWFnZURpcmVjdGlvbn0sY2hpbGRyZW46dGhpc30pLnJlbmRlcigpO2xldCB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2stYm9keS13cmFwcGVyXCIpO2lmKCF0KXt0PUN3KGRvY3VtZW50LFwiZGl2XCIse2NsYXNzOlwiY2stYm9keS13cmFwcGVyXCJ9KTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpfXQuYXBwZW5kQ2hpbGQodGhpcy5fYm9keUNvbGxlY3Rpb25Db250YWluZXIpfWRldGFjaEZyb21Eb20oKXtzdXBlci5kZXN0cm95KCk7aWYodGhpcy5fYm9keUNvbGxlY3Rpb25Db250YWluZXIpe3RoaXMuX2JvZHlDb2xsZWN0aW9uQ29udGFpbmVyLnJlbW92ZSgpfWNvbnN0IHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jay1ib2R5LXdyYXBwZXJcIik7aWYodCYmdC5jaGlsZEVsZW1lbnRDb3VudD09MCl7dC5yZW1vdmUoKX19fXZhciBUdz1pKDQzKTtjbGFzcyBQdyBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuYm9keT1uZXcgQXcodCl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7dGhpcy5ib2R5LmF0dGFjaFRvRG9tKCl9ZGVzdHJveSgpe3RoaXMuYm9keS5kZXRhY2hGcm9tRG9tKCk7cmV0dXJuIHN1cGVyLmRlc3Ryb3koKX19Y2xhc3MgU3cgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWNvbnRlbnRcIixcImNrLWVkaXRvcl9fZWRpdGFibGVcIixcImNrLXJvdW5kZWQtY29ybmVyc1wiXSxsYW5nOnQuY29udGVudExhbmd1YWdlLGRpcjp0LmNvbnRlbnRMYW5ndWFnZURpcmVjdGlvbn19KTt0aGlzLm5hbWU9bnVsbDt0aGlzLnNldChcImlzRm9jdXNlZFwiLGZhbHNlKTt0aGlzLl9lZGl0YWJsZUVsZW1lbnQ9aTt0aGlzLl9oYXNFeHRlcm5hbEVsZW1lbnQ9ISF0aGlzLl9lZGl0YWJsZUVsZW1lbnQ7dGhpcy5fZWRpdGluZ1ZpZXc9ZX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtpZih0aGlzLl9oYXNFeHRlcm5hbEVsZW1lbnQpe3RoaXMudGVtcGxhdGUuYXBwbHkodGhpcy5lbGVtZW50PXRoaXMuX2VkaXRhYmxlRWxlbWVudCl9ZWxzZXt0aGlzLl9lZGl0YWJsZUVsZW1lbnQ9dGhpcy5lbGVtZW50fXRoaXMub24oXCJjaGFuZ2U6aXNGb2N1c2VkXCIsKCk9PnRoaXMuX3VwZGF0ZUlzRm9jdXNlZENsYXNzZXMoKSk7dGhpcy5fdXBkYXRlSXNGb2N1c2VkQ2xhc3NlcygpfWRlc3Ryb3koKXtpZih0aGlzLl9oYXNFeHRlcm5hbEVsZW1lbnQpe3RoaXMudGVtcGxhdGUucmV2ZXJ0KHRoaXMuX2VkaXRhYmxlRWxlbWVudCl9c3VwZXIuZGVzdHJveSgpfV91cGRhdGVJc0ZvY3VzZWRDbGFzc2VzKCl7Y29uc3QgdD10aGlzLl9lZGl0aW5nVmlldztpZih0LmlzUmVuZGVyaW5nSW5Qcm9ncmVzcyl7aSh0aGlzKX1lbHNle2UodGhpcyl9ZnVuY3Rpb24gZShlKXt0LmNoYW5nZShpPT57Y29uc3Qgbj10LmRvY3VtZW50LmdldFJvb3QoZS5uYW1lKTtpLmFkZENsYXNzKGUuaXNGb2N1c2VkP1wiY2stZm9jdXNlZFwiOlwiY2stYmx1cnJlZFwiLG4pO2kucmVtb3ZlQ2xhc3MoZS5pc0ZvY3VzZWQ/XCJjay1ibHVycmVkXCI6XCJjay1mb2N1c2VkXCIsbil9KX1mdW5jdGlvbiBpKG4pe3Qub25jZShcImNoYW5nZTppc1JlbmRlcmluZ0luUHJvZ3Jlc3NcIiwodCxvLHIpPT57aWYoIXIpe2Uobil9ZWxzZXtpKG4pfX0pfX19Y2xhc3MgRXcgZXh0ZW5kcyBTd3tjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxlLGkpO3RoaXMuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e3JvbGU6XCJ0ZXh0Ym94XCIsY2xhc3M6XCJjay1lZGl0b3JfX2VkaXRhYmxlX2lubGluZVwifX0pfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO2NvbnN0IHQ9dGhpcy5fZWRpdGluZ1ZpZXc7Y29uc3QgZT10aGlzLnQ7dC5jaGFuZ2UoaT0+e2NvbnN0IG49dC5kb2N1bWVudC5nZXRSb290KHRoaXMubmFtZSk7aS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsZShcIm9mXCIsW3RoaXMubmFtZV0pLG4pfSl9fWNsYXNzIFJ3IGV4dGVuZHMgUHd7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQpO3RoaXMuZWRpdGFibGU9bmV3IEV3KHQsZSxpKX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTt0aGlzLnJlZ2lzdGVyQ2hpbGQodGhpcy5lZGl0YWJsZSl9fWZ1bmN0aW9uIE93KHQsZSl7aWYodCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpe3QudmFsdWU9ZX10LmlubmVySFRNTD1lfWZ1bmN0aW9uIEl3KHQpe2lmKHQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50KXtyZXR1cm4gdC52YWx1ZX1yZXR1cm4gdC5pbm5lckhUTUx9Y29uc3QgVnc9e3NldERhdGEodCl7dGhpcy5kYXRhLnNldCh0KX0sZ2V0RGF0YSh0KXtyZXR1cm4gdGhpcy5kYXRhLmdldCh0KX19O3ZhciBOdz1Wdztjb25zdCBNdz17dXBkYXRlU291cmNlRWxlbWVudCgpe2lmKCF0aGlzLnNvdXJjZUVsZW1lbnQpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJlZGl0b3ItbWlzc2luZy1zb3VyY2VlbGVtZW50OiBDYW5ub3QgdXBkYXRlIHRoZSBzb3VyY2UgZWxlbWVudCBvZiBhIGRldGFjaGVkIGVkaXRvci5cIix0aGlzKX1Pdyh0aGlzLnNvdXJjZUVsZW1lbnQsdGhpcy5kYXRhLmdldCgpKX19O3ZhciBCdz1NdztmdW5jdGlvbiB6dyh0KXtpZighZ3QodC51cGRhdGVTb3VyY2VFbGVtZW50KSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImF0dGFjaHRvZm9ybS1taXNzaW5nLWVsZW1lbnRhcGktaW50ZXJmYWNlOiBFZGl0b3IgcGFzc2VkIHRvIGF0dGFjaFRvRm9ybSgpIG11c3QgaW1wbGVtZW50IEVsZW1lbnRBcGkuXCIsdCl9Y29uc3QgZT10LnNvdXJjZUVsZW1lbnQ7aWYoZSYmZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT1cInRleHRhcmVhXCImJmUuZm9ybSl7bGV0IGk7Y29uc3Qgbj1lLmZvcm07Y29uc3Qgbz0oKT0+dC51cGRhdGVTb3VyY2VFbGVtZW50KCk7aWYoZ3Qobi5zdWJtaXQpKXtpPW4uc3VibWl0O24uc3VibWl0PSgpPT57bygpO2kuYXBwbHkobil9fW4uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLG8pO3Qub24oXCJkZXN0cm95XCIsKCk9PntuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIixvKTtpZihpKXtuLnN1Ym1pdD1pfX0pfX1mdW5jdGlvbiBMdyh0KXtjb25zdCBlPXQuc291cmNlRWxlbWVudDtpZighZSl7cmV0dXJufWlmKGUuY2tlZGl0b3JJbnN0YW5jZSl7dGhyb3cgbmV3IHNzW1wiYlwiXShcImVkaXRvci1zb3VyY2UtZWxlbWVudC1hbHJlYWR5LXVzZWQ6IFwiK1wiVGhlIERPTSBlbGVtZW50IGNhbm5vdCBiZSB1c2VkIHRvIGNyZWF0ZSBtdWx0aXBsZSBlZGl0b3IgaW5zdGFuY2VzLlwiLHQpfWUuY2tlZGl0b3JJbnN0YW5jZT10O3Qub25jZShcImRlc3Ryb3lcIiwoKT0+e2RlbGV0ZSBlLmNrZWRpdG9ySW5zdGFuY2V9KX1jbGFzcyBGdyBleHRlbmRzIGhwe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoZSk7aWYoS3IodCkpe3RoaXMuc291cmNlRWxlbWVudD10O0x3KHRoaXMpfWNvbnN0IGk9dGhpcy5jb25maWcuZ2V0KFwicGx1Z2luc1wiKTtpLnB1c2gob3cpO3RoaXMuY29uZmlnLnNldChcInBsdWdpbnNcIixpKTt0aGlzLmNvbmZpZy5kZWZpbmUoXCJiYWxsb29uVG9vbGJhclwiLHRoaXMuY29uZmlnLmdldChcInRvb2xiYXJcIikpO3RoaXMuZGF0YS5wcm9jZXNzb3I9bmV3IGdwKHRoaXMuZGF0YS52aWV3RG9jdW1lbnQpO3RoaXMubW9kZWwuZG9jdW1lbnQuY3JlYXRlUm9vdCgpO2NvbnN0IG49bmV3IFJ3KHRoaXMubG9jYWxlLHRoaXMuZWRpdGluZy52aWV3LHRoaXMuc291cmNlRWxlbWVudCk7dGhpcy51aT1uZXcgX3codGhpcyxuKTt6dyh0aGlzKX1kZXN0cm95KCl7Y29uc3QgdD10aGlzLmdldERhdGEoKTt0aGlzLnVpLmRlc3Ryb3koKTtyZXR1cm4gc3VwZXIuZGVzdHJveSgpLnRoZW4oKCk9PntpZih0aGlzLnNvdXJjZUVsZW1lbnQpe093KHRoaXMuc291cmNlRWxlbWVudCx0KX19KX1zdGF0aWMgY3JlYXRlKHQsZT17fSl7cmV0dXJuIG5ldyBQcm9taXNlKGk9Pntjb25zdCBuPUtyKHQpO2lmKG4mJnQudGFnTmFtZT09PVwiVEVYVEFSRUFcIil7dGhyb3cgbmV3IHNzW1wiYlwiXShcImVkaXRvci13cm9uZy1lbGVtZW50OiBUaGlzIHR5cGUgb2YgZWRpdG9yIGNhbm5vdCBiZSBpbml0aWFsaXplZCBpbnNpZGUgPHRleHRhcmVhPiBlbGVtZW50LlwiLG51bGwpfWNvbnN0IG89bmV3IHRoaXModCxlKTtpKG8uaW5pdFBsdWdpbnMoKS50aGVuKCgpPT57by51aS5pbml0KCl9KS50aGVuKCgpPT57aWYoIW4mJmUuaW5pdGlhbERhdGEpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJlZGl0b3ItY3JlYXRlLWluaXRpYWwtZGF0YTogXCIrXCJUaGUgY29uZmlnLmluaXRpYWxEYXRhIG9wdGlvbiBjYW5ub3QgYmUgdXNlZCB0b2dldGhlciB3aXRoIGluaXRpYWwgZGF0YSBwYXNzZWQgaW4gRWRpdG9yLmNyZWF0ZSgpLlwiLG51bGwpfWNvbnN0IGk9ZS5pbml0aWFsRGF0YXx8RHcodCk7cmV0dXJuIG8uZGF0YS5pbml0KGkpfSkudGhlbigoKT0+by5maXJlKFwicmVhZHlcIikpLnRoZW4oKCk9Pm8pKX0pfX12cyhGdyxOdyk7dnMoRncsQncpO2Z1bmN0aW9uIER3KHQpe3JldHVybiBLcih0KT9Jdyh0KTp0fWNsYXNzIGp3e2NvbnN0cnVjdG9yKHQpe3RoaXMuZWRpdG9yPXQ7dGhpcy5zZXQoXCJ2YWx1ZVwiLHVuZGVmaW5lZCk7dGhpcy5zZXQoXCJpc0VuYWJsZWRcIixmYWxzZSk7dGhpcy5fZGlzYWJsZVN0YWNrPW5ldyBTZXQ7dGhpcy5kZWNvcmF0ZShcImV4ZWN1dGVcIik7dGhpcy5saXN0ZW5Ubyh0aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudCxcImNoYW5nZVwiLCgpPT57dGhpcy5yZWZyZXNoKCl9KTt0aGlzLm9uKFwiZXhlY3V0ZVwiLHQ9PntpZighdGhpcy5pc0VuYWJsZWQpe3Quc3RvcCgpfX0se3ByaW9yaXR5OlwiaGlnaFwifSk7dGhpcy5saXN0ZW5Ubyh0LFwiY2hhbmdlOmlzUmVhZE9ubHlcIiwodCxlLGkpPT57aWYoaSl7dGhpcy5mb3JjZURpc2FibGVkKFwicmVhZE9ubHlNb2RlXCIpfWVsc2V7dGhpcy5jbGVhckZvcmNlRGlzYWJsZWQoXCJyZWFkT25seU1vZGVcIil9fSl9cmVmcmVzaCgpe3RoaXMuaXNFbmFibGVkPXRydWV9Zm9yY2VEaXNhYmxlZCh0KXt0aGlzLl9kaXNhYmxlU3RhY2suYWRkKHQpO2lmKHRoaXMuX2Rpc2FibGVTdGFjay5zaXplPT0xKXt0aGlzLm9uKFwic2V0OmlzRW5hYmxlZFwiLEh3LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO3RoaXMuaXNFbmFibGVkPWZhbHNlfX1jbGVhckZvcmNlRGlzYWJsZWQodCl7dGhpcy5fZGlzYWJsZVN0YWNrLmRlbGV0ZSh0KTtpZih0aGlzLl9kaXNhYmxlU3RhY2suc2l6ZT09MCl7dGhpcy5vZmYoXCJzZXQ6aXNFbmFibGVkXCIsSHcpO3RoaXMucmVmcmVzaCgpfX1leGVjdXRlKCl7fWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX19dnMoancsSmMpO2Z1bmN0aW9uIEh3KHQpe3QucmV0dXJuPWZhbHNlO3Quc3RvcCgpfWZ1bmN0aW9uIFd3KHQpe2NvbnN0IGU9dC5uZXh0KCk7aWYoZS5kb25lKXtyZXR1cm4gbnVsbH1yZXR1cm4gZS52YWx1ZX1jb25zdCBxdz1bXCJsZWZ0XCIsXCJyaWdodFwiLFwiY2VudGVyXCIsXCJqdXN0aWZ5XCJdO2Z1bmN0aW9uIFV3KHQpe3JldHVybiBxdy5pbmNsdWRlcyh0KX1mdW5jdGlvbiAkdyh0LGUpe2lmKGUuY29udGVudExhbmd1YWdlRGlyZWN0aW9uPT1cInJ0bFwiKXtyZXR1cm4gdD09PVwicmlnaHRcIn1lbHNle3JldHVybiB0PT09XCJsZWZ0XCJ9fWNvbnN0IEd3PVwiYWxpZ25tZW50XCI7Y2xhc3MgS3cgZXh0ZW5kcyBqd3tyZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQubG9jYWxlO2NvbnN0IGk9V3codGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO3RoaXMuaXNFbmFibGVkPSEhaSYmdGhpcy5fY2FuQmVBbGlnbmVkKGkpO2lmKHRoaXMuaXNFbmFibGVkJiZpLmhhc0F0dHJpYnV0ZShcImFsaWdubWVudFwiKSl7dGhpcy52YWx1ZT1pLmdldEF0dHJpYnV0ZShcImFsaWdubWVudFwiKX1lbHNle3RoaXMudmFsdWU9ZS5jb250ZW50TGFuZ3VhZ2VEaXJlY3Rpb249PT1cInJ0bFwiP1wicmlnaHRcIjpcImxlZnRcIn19ZXhlY3V0ZSh0PXt9KXtjb25zdCBlPXRoaXMuZWRpdG9yO2NvbnN0IGk9ZS5sb2NhbGU7Y29uc3Qgbj1lLm1vZGVsO2NvbnN0IG89bi5kb2N1bWVudDtjb25zdCByPXQudmFsdWU7bi5jaGFuZ2UodD0+e2NvbnN0IGU9QXJyYXkuZnJvbShvLnNlbGVjdGlvbi5nZXRTZWxlY3RlZEJsb2NrcygpKS5maWx0ZXIodD0+dGhpcy5fY2FuQmVBbGlnbmVkKHQpKTtjb25zdCBuPWVbMF0uZ2V0QXR0cmlidXRlKFwiYWxpZ25tZW50XCIpO2NvbnN0IHM9JHcocixpKXx8bj09PXJ8fCFyO2lmKHMpe0p3KGUsdCl9ZWxzZXtZdyhlLHQscil9fSl9X2NhbkJlQWxpZ25lZCh0KXtyZXR1cm4gdGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hLmNoZWNrQXR0cmlidXRlKHQsR3cpfX1mdW5jdGlvbiBKdyh0LGUpe2Zvcihjb25zdCBpIG9mIHQpe2UucmVtb3ZlQXR0cmlidXRlKEd3LGkpfX1mdW5jdGlvbiBZdyh0LGUsaSl7Zm9yKGNvbnN0IG4gb2YgdCl7ZS5zZXRBdHRyaWJ1dGUoR3csaSxuKX19Y2xhc3MgUXcgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkFsaWdubWVudEVkaXRpbmdcIn1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0LmNvbmZpZy5kZWZpbmUoXCJhbGlnbm1lbnRcIix7b3B0aW9uczpbLi4ucXddfSl9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmxvY2FsZTtjb25zdCBpPXQubW9kZWwuc2NoZW1hO2NvbnN0IG49dC5jb25maWcuZ2V0KFwiYWxpZ25tZW50Lm9wdGlvbnNcIikuZmlsdGVyKFV3KTtpLmV4dGVuZChcIiRibG9ja1wiLHthbGxvd0F0dHJpYnV0ZXM6XCJhbGlnbm1lbnRcIn0pO3QubW9kZWwuc2NoZW1hLnNldEF0dHJpYnV0ZVByb3BlcnRpZXMoXCJhbGlnbm1lbnRcIix7aXNGb3JtYXR0aW5nOnRydWV9KTtjb25zdCBvPVh3KG4uZmlsdGVyKHQ9PiEkdyh0LGUpKSk7dC5jb252ZXJzaW9uLmF0dHJpYnV0ZVRvQXR0cmlidXRlKG8pO3QuY29tbWFuZHMuYWRkKFwiYWxpZ25tZW50XCIsbmV3IEt3KHQpKX19ZnVuY3Rpb24gWHcodCl7Y29uc3QgZT17bW9kZWw6e2tleTpcImFsaWdubWVudFwiLHZhbHVlczp0LnNsaWNlKCl9LHZpZXc6e319O2Zvcihjb25zdCBpIG9mIHQpe2Uudmlld1tpXT17a2V5Olwic3R5bGVcIix2YWx1ZTp7XCJ0ZXh0LWFsaWduXCI6aX19fXJldHVybiBlfXZhciBadz0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMiAzLjc1YzAgLjQxNC4zMzYuNzUuNzUuNzVoMTQuNWEuNzUuNzUgMCAxIDAgMC0xLjVIMi43NWEuNzUuNzUgMCAwIDAtLjc1Ljc1em0wIDhjMCAuNDE0LjMzNi43NS43NS43NWgxNC41YS43NS43NSAwIDEgMCAwLTEuNUgyLjc1YS43NS43NSAwIDAgMC0uNzUuNzV6bTAgNGMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDkuOTI5YS43NS43NSAwIDEgMCAwLTEuNUgyLjc1YS43NS43NSAwIDAgMC0uNzUuNzV6bTAtOGMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDkuOTI5YS43NS43NSAwIDEgMCAwLTEuNUgyLjc1YS43NS43NSAwIDAgMC0uNzUuNzV6XCIvPjwvc3ZnPic7dmFyIHRrPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xOCAzLjc1YS43NS43NSAwIDAgMS0uNzUuNzVIMi43NWEuNzUuNzUgMCAxIDEgMC0xLjVoMTQuNWEuNzUuNzUgMCAwIDEgLjc1Ljc1em0wIDhhLjc1Ljc1IDAgMCAxLS43NS43NUgyLjc1YS43NS43NSAwIDEgMSAwLTEuNWgxNC41YS43NS43NSAwIDAgMSAuNzUuNzV6bTAgNGEuNzUuNzUgMCAwIDEtLjc1Ljc1SDcuMzIxYS43NS43NSAwIDEgMSAwLTEuNWg5LjkyOWEuNzUuNzUgMCAwIDEgLjc1Ljc1em0wLThhLjc1Ljc1IDAgMCAxLS43NS43NUg3LjMyMWEuNzUuNzUgMCAxIDEgMC0xLjVoOS45MjlhLjc1Ljc1IDAgMCAxIC43NS43NXpcIi8+PC9zdmc+Jzt2YXIgZWs9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTIgMy43NWMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDE0LjVhLjc1Ljc1IDAgMSAwIDAtMS41SDIuNzVhLjc1Ljc1IDAgMCAwLS43NS43NXptMCA4YzAgLjQxNC4zMzYuNzUuNzUuNzVoMTQuNWEuNzUuNzUgMCAxIDAgMC0xLjVIMi43NWEuNzUuNzUgMCAwIDAtLjc1Ljc1em0yLjI4NiA0YzAgLjQxNC4zMzYuNzUuNzUuNzVoOS45MjhhLjc1Ljc1IDAgMSAwIDAtMS41SDUuMDM2YS43NS43NSAwIDAgMC0uNzUuNzV6bTAtOGMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDkuOTI4YS43NS43NSAwIDEgMCAwLTEuNUg1LjAzNmEuNzUuNzUgMCAwIDAtLjc1Ljc1elwiLz48L3N2Zz4nO3ZhciBpaz0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMiAzLjc1YzAgLjQxNC4zMzYuNzUuNzUuNzVoMTQuNWEuNzUuNzUgMCAxIDAgMC0xLjVIMi43NWEuNzUuNzUgMCAwIDAtLjc1Ljc1em0wIDhjMCAuNDE0LjMzNi43NS43NS43NWgxNC41YS43NS43NSAwIDEgMCAwLTEuNUgyLjc1YS43NS43NSAwIDAgMC0uNzUuNzV6bTAgNGMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDkuOTI5YS43NS43NSAwIDEgMCAwLTEuNUgyLjc1YS43NS43NSAwIDAgMC0uNzUuNzV6bTAtOGMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDE0LjVhLjc1Ljc1IDAgMSAwIDAtMS41SDIuNzVhLjc1Ljc1IDAgMCAwLS43NS43NXpcIi8+PC9zdmc+Jztjb25zdCBuaz1uZXcgTWFwKFtbXCJsZWZ0XCIsWnddLFtcInJpZ2h0XCIsdGtdLFtcImNlbnRlclwiLGVrXSxbXCJqdXN0aWZ5XCIsaWtdXSk7Y2xhc3Mgb2sgZXh0ZW5kcyBtcHtnZXQgbG9jYWxpemVkT3B0aW9uVGl0bGVzKCl7Y29uc3QgdD10aGlzLmVkaXRvci50O3JldHVybntsZWZ0OnQoXCJpd1wiKSxyaWdodDp0KFwiaXhcIiksY2VudGVyOnQoXCJpeVwiKSxqdXN0aWZ5OnQoXCJpelwiKX19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJBbGlnbm1lbnRVSVwifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC51aS5jb21wb25lbnRGYWN0b3J5O2NvbnN0IGk9dC50O2NvbnN0IG49dC5jb25maWcuZ2V0KFwiYWxpZ25tZW50Lm9wdGlvbnNcIik7bi5maWx0ZXIoVXcpLmZvckVhY2godD0+dGhpcy5fYWRkQnV0dG9uKHQpKTtlLmFkZChcImFsaWdubWVudFwiLHQ9Pntjb25zdCBvPVdiKHQpO2NvbnN0IHI9bi5tYXAodD0+ZS5jcmVhdGUoYGFsaWdubWVudDoke3R9YCkpO3FiKG8scik7by5idXR0b25WaWV3LnNldCh7bGFiZWw6aShcImphXCIpLHRvb2x0aXA6dHJ1ZX0pO28udG9vbGJhclZpZXcuaXNWZXJ0aWNhbD10cnVlO28udG9vbGJhclZpZXcuYXJpYUxhYmVsPWkoXCJqYlwiKTtvLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczpcImNrLWFsaWdubWVudC1kcm9wZG93blwifX0pO2NvbnN0IHM9dC5jb250ZW50TGFuZ3VhZ2VEaXJlY3Rpb249PT1cInJ0bFwiP3RrOlp3O28uYnV0dG9uVmlldy5iaW5kKFwiaWNvblwiKS50b01hbnkocixcImlzT25cIiwoLi4udCk9Pntjb25zdCBlPXQuZmluZEluZGV4KHQ9PnQpO2lmKGU8MCl7cmV0dXJuIHN9cmV0dXJuIHJbZV0uaWNvbn0pO28uYmluZChcImlzRW5hYmxlZFwiKS50b01hbnkocixcImlzRW5hYmxlZFwiLCguLi50KT0+dC5zb21lKHQ9PnQpKTtyZXR1cm4gb30pfV9hZGRCdXR0b24odCl7Y29uc3QgZT10aGlzLmVkaXRvcjtlLnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKGBhbGlnbm1lbnQ6JHt0fWAsaT0+e2NvbnN0IG49ZS5jb21tYW5kcy5nZXQoXCJhbGlnbm1lbnRcIik7Y29uc3Qgbz1uZXcgaGIoaSk7by5zZXQoe2xhYmVsOnRoaXMubG9jYWxpemVkT3B0aW9uVGl0bGVzW3RdLGljb246bmsuZ2V0KHQpLHRvb2x0aXA6dHJ1ZSxpc1RvZ2dsZWFibGU6dHJ1ZX0pO28uYmluZChcImlzRW5hYmxlZFwiKS50byhuKTtvLmJpbmQoXCJpc09uXCIpLnRvKG4sXCJ2YWx1ZVwiLGU9PmU9PT10KTt0aGlzLmxpc3RlblRvKG8sXCJleGVjdXRlXCIsKCk9PntlLmV4ZWN1dGUoXCJhbGlnbm1lbnRcIix7dmFsdWU6dH0pO2UuZWRpdGluZy52aWV3LmZvY3VzKCl9KTtyZXR1cm4gb30pfX1jbGFzcyByayBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bUXcsb2tdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiQWxpZ25tZW50XCJ9fWNsYXNzIHNre2NvbnN0cnVjdG9yKHQpe3RoaXMuY29udGV4dD10fWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1zdGF0aWMgZ2V0IGlzQ29udGV4dFBsdWdpbigpe3JldHVybiB0cnVlfX12cyhzayxKYyk7Y2xhc3MgYWsgZXh0ZW5kcyBza3tzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlBlbmRpbmdBY3Rpb25zXCJ9aW5pdCgpe3RoaXMuc2V0KFwiaGFzQW55XCIsZmFsc2UpO3RoaXMuX2FjdGlvbnM9bmV3IHlzKHtpZFByb3BlcnR5OlwiX2lkXCJ9KTt0aGlzLl9hY3Rpb25zLmRlbGVnYXRlKFwiYWRkXCIsXCJyZW1vdmVcIikudG8odGhpcyl9YWRkKHQpe2lmKHR5cGVvZiB0IT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IHNzW1wiYlwiXShcInBlbmRpbmdhY3Rpb25zLWFkZC1pbnZhbGlkLW1lc3NhZ2U6IFRoZSBtZXNzYWdlIG11c3QgYmUgYSBzdHJpbmcuXCIsdGhpcyl9Y29uc3QgZT1PYmplY3QuY3JlYXRlKEpjKTtlLnNldChcIm1lc3NhZ2VcIix0KTt0aGlzLl9hY3Rpb25zLmFkZChlKTt0aGlzLmhhc0FueT10cnVlO3JldHVybiBlfXJlbW92ZSh0KXt0aGlzLl9hY3Rpb25zLnJlbW92ZSh0KTt0aGlzLmhhc0FueT0hIXRoaXMuX2FjdGlvbnMubGVuZ3RofWdldCBmaXJzdCgpe3JldHVybiB0aGlzLl9hY3Rpb25zLmdldCgwKX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLl9hY3Rpb25zW1N5bWJvbC5pdGVyYXRvcl0oKX19Y2xhc3MgY2t7Y29uc3RydWN0b3IoKXtjb25zdCB0PW5ldyB3aW5kb3cuRmlsZVJlYWRlcjt0aGlzLl9yZWFkZXI9dDt0aGlzLl9kYXRhPXVuZGVmaW5lZDt0aGlzLnNldChcImxvYWRlZFwiLDApO3Qub25wcm9ncmVzcz10PT57dGhpcy5sb2FkZWQ9dC5sb2FkZWR9fWdldCBlcnJvcigpe3JldHVybiB0aGlzLl9yZWFkZXIuZXJyb3J9Z2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5fZGF0YX1yZWFkKHQpe2NvbnN0IGU9dGhpcy5fcmVhZGVyO3RoaXMudG90YWw9dC5zaXplO3JldHVybiBuZXcgUHJvbWlzZSgoaSxuKT0+e2Uub25sb2FkPSgpPT57Y29uc3QgdD1lLnJlc3VsdDt0aGlzLl9kYXRhPXQ7aSh0KX07ZS5vbmVycm9yPSgpPT57bihcImVycm9yXCIpfTtlLm9uYWJvcnQ9KCk9PntuKFwiYWJvcnRlZFwiKX07dGhpcy5fcmVhZGVyLnJlYWRBc0RhdGFVUkwodCl9KX1hYm9ydCgpe3RoaXMuX3JlYWRlci5hYm9ydCgpfX12cyhjayxKYyk7Y2xhc3MgbGsgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkZpbGVSZXBvc2l0b3J5XCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltha119aW5pdCgpe3RoaXMubG9hZGVycz1uZXcgeXM7dGhpcy5sb2FkZXJzLm9uKFwiYWRkXCIsKCk9PnRoaXMuX3VwZGF0ZVBlbmRpbmdBY3Rpb24oKSk7dGhpcy5sb2FkZXJzLm9uKFwicmVtb3ZlXCIsKCk9PnRoaXMuX3VwZGF0ZVBlbmRpbmdBY3Rpb24oKSk7dGhpcy5fbG9hZGVyc01hcD1uZXcgTWFwO3RoaXMuX3BlbmRpbmdBY3Rpb249bnVsbDt0aGlzLnNldChcInVwbG9hZGVkXCIsMCk7dGhpcy5zZXQoXCJ1cGxvYWRUb3RhbFwiLG51bGwpO3RoaXMuYmluZChcInVwbG9hZGVkUGVyY2VudFwiKS50byh0aGlzLFwidXBsb2FkZWRcIix0aGlzLFwidXBsb2FkVG90YWxcIiwodCxlKT0+ZT90L2UqMTAwOjApfWdldExvYWRlcih0KXtyZXR1cm4gdGhpcy5fbG9hZGVyc01hcC5nZXQodCl8fG51bGx9Y3JlYXRlTG9hZGVyKHQpe2lmKCF0aGlzLmNyZWF0ZVVwbG9hZEFkYXB0ZXIpe2NvbnNvbGUud2FybihPYmplY3Qoc3NbXCJhXCJdKShcImZpbGVyZXBvc2l0b3J5LW5vLXVwbG9hZC1hZGFwdGVyOiBVcGxvYWQgYWRhcHRlciBpcyBub3QgZGVmaW5lZC5cIikpO3JldHVybiBudWxsfWNvbnN0IGU9bmV3IGRrKFByb21pc2UucmVzb2x2ZSh0KSx0aGlzLmNyZWF0ZVVwbG9hZEFkYXB0ZXIpO3RoaXMubG9hZGVycy5hZGQoZSk7dGhpcy5fbG9hZGVyc01hcC5zZXQodCxlKTtpZih0IGluc3RhbmNlb2YgUHJvbWlzZSl7ZS5maWxlLnRoZW4odD0+e3RoaXMuX2xvYWRlcnNNYXAuc2V0KHQsZSl9KS5jYXRjaCgoKT0+e30pfWUub24oXCJjaGFuZ2U6dXBsb2FkZWRcIiwoKT0+e2xldCB0PTA7Zm9yKGNvbnN0IGUgb2YgdGhpcy5sb2FkZXJzKXt0Kz1lLnVwbG9hZGVkfXRoaXMudXBsb2FkZWQ9dH0pO2Uub24oXCJjaGFuZ2U6dXBsb2FkVG90YWxcIiwoKT0+e2xldCB0PTA7Zm9yKGNvbnN0IGUgb2YgdGhpcy5sb2FkZXJzKXtpZihlLnVwbG9hZFRvdGFsKXt0Kz1lLnVwbG9hZFRvdGFsfX10aGlzLnVwbG9hZFRvdGFsPXR9KTtyZXR1cm4gZX1kZXN0cm95TG9hZGVyKHQpe2NvbnN0IGU9dCBpbnN0YW5jZW9mIGRrP3Q6dGhpcy5nZXRMb2FkZXIodCk7ZS5fZGVzdHJveSgpO3RoaXMubG9hZGVycy5yZW1vdmUoZSk7dGhpcy5fbG9hZGVyc01hcC5mb3JFYWNoKCh0LGkpPT57aWYodD09PWUpe3RoaXMuX2xvYWRlcnNNYXAuZGVsZXRlKGkpfX0pfV91cGRhdGVQZW5kaW5nQWN0aW9uKCl7Y29uc3QgdD10aGlzLmVkaXRvci5wbHVnaW5zLmdldChhayk7aWYodGhpcy5sb2FkZXJzLmxlbmd0aCl7aWYoIXRoaXMuX3BlbmRpbmdBY3Rpb24pe2NvbnN0IGU9dGhpcy5lZGl0b3IudDtjb25zdCBpPXQ9PmAke2UoXCJsYlwiKX0gJHtwYXJzZUludCh0KX0lLmA7dGhpcy5fcGVuZGluZ0FjdGlvbj10LmFkZChpKHRoaXMudXBsb2FkZWRQZXJjZW50KSk7dGhpcy5fcGVuZGluZ0FjdGlvbi5iaW5kKFwibWVzc2FnZVwiKS50byh0aGlzLFwidXBsb2FkZWRQZXJjZW50XCIsaSl9fWVsc2V7dC5yZW1vdmUodGhpcy5fcGVuZGluZ0FjdGlvbik7dGhpcy5fcGVuZGluZ0FjdGlvbj1udWxsfX19dnMobGssSmMpO2NsYXNzIGRre2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5pZD1pcygpO3RoaXMuX2ZpbGVQcm9taXNlV3JhcHBlcj10aGlzLl9jcmVhdGVGaWxlUHJvbWlzZVdyYXBwZXIodCk7dGhpcy5fYWRhcHRlcj1lKHRoaXMpO3RoaXMuX3JlYWRlcj1uZXcgY2s7dGhpcy5zZXQoXCJzdGF0dXNcIixcImlkbGVcIik7dGhpcy5zZXQoXCJ1cGxvYWRlZFwiLDApO3RoaXMuc2V0KFwidXBsb2FkVG90YWxcIixudWxsKTt0aGlzLmJpbmQoXCJ1cGxvYWRlZFBlcmNlbnRcIikudG8odGhpcyxcInVwbG9hZGVkXCIsdGhpcyxcInVwbG9hZFRvdGFsXCIsKHQsZSk9PmU/dC9lKjEwMDowKTt0aGlzLnNldChcInVwbG9hZFJlc3BvbnNlXCIsbnVsbCl9Z2V0IGZpbGUoKXtpZighdGhpcy5fZmlsZVByb21pc2VXcmFwcGVyKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpfWVsc2V7cmV0dXJuIHRoaXMuX2ZpbGVQcm9taXNlV3JhcHBlci5wcm9taXNlLnRoZW4odD0+dGhpcy5fZmlsZVByb21pc2VXcmFwcGVyP3Q6bnVsbCl9fWdldCBkYXRhKCl7cmV0dXJuIHRoaXMuX3JlYWRlci5kYXRhfXJlYWQoKXtpZih0aGlzLnN0YXR1cyE9XCJpZGxlXCIpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJmaWxlcmVwb3NpdG9yeS1yZWFkLXdyb25nLXN0YXR1czogWW91IGNhbm5vdCBjYWxsIHJlYWQgaWYgdGhlIHN0YXR1cyBpcyBkaWZmZXJlbnQgdGhhbiBpZGxlLlwiLHRoaXMpfXRoaXMuc3RhdHVzPVwicmVhZGluZ1wiO3JldHVybiB0aGlzLmZpbGUudGhlbih0PT50aGlzLl9yZWFkZXIucmVhZCh0KSkudGhlbih0PT57dGhpcy5zdGF0dXM9XCJpZGxlXCI7cmV0dXJuIHR9KS5jYXRjaCh0PT57aWYodD09PVwiYWJvcnRlZFwiKXt0aGlzLnN0YXR1cz1cImFib3J0ZWRcIjt0aHJvd1wiYWJvcnRlZFwifXRoaXMuc3RhdHVzPVwiZXJyb3JcIjt0aHJvdyB0aGlzLl9yZWFkZXIuZXJyb3I/dGhpcy5fcmVhZGVyLmVycm9yOnR9KX11cGxvYWQoKXtpZih0aGlzLnN0YXR1cyE9XCJpZGxlXCIpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJmaWxlcmVwb3NpdG9yeS11cGxvYWQtd3Jvbmctc3RhdHVzOiBZb3UgY2Fubm90IGNhbGwgdXBsb2FkIGlmIHRoZSBzdGF0dXMgaXMgZGlmZmVyZW50IHRoYW4gaWRsZS5cIix0aGlzKX10aGlzLnN0YXR1cz1cInVwbG9hZGluZ1wiO3JldHVybiB0aGlzLmZpbGUudGhlbigoKT0+dGhpcy5fYWRhcHRlci51cGxvYWQoKSkudGhlbih0PT57dGhpcy51cGxvYWRSZXNwb25zZT10O3RoaXMuc3RhdHVzPVwiaWRsZVwiO3JldHVybiB0fSkuY2F0Y2godD0+e2lmKHRoaXMuc3RhdHVzPT09XCJhYm9ydGVkXCIpe3Rocm93XCJhYm9ydGVkXCJ9dGhpcy5zdGF0dXM9XCJlcnJvclwiO3Rocm93IHR9KX1hYm9ydCgpe2NvbnN0IHQ9dGhpcy5zdGF0dXM7dGhpcy5zdGF0dXM9XCJhYm9ydGVkXCI7aWYoIXRoaXMuX2ZpbGVQcm9taXNlV3JhcHBlci5pc0Z1bGZpbGxlZCl7dGhpcy5fZmlsZVByb21pc2VXcmFwcGVyLnByb21pc2UuY2F0Y2goKCk9Pnt9KTt0aGlzLl9maWxlUHJvbWlzZVdyYXBwZXIucmVqZWN0ZXIoXCJhYm9ydGVkXCIpfWVsc2UgaWYodD09XCJyZWFkaW5nXCIpe3RoaXMuX3JlYWRlci5hYm9ydCgpfWVsc2UgaWYodD09XCJ1cGxvYWRpbmdcIiYmdGhpcy5fYWRhcHRlci5hYm9ydCl7dGhpcy5fYWRhcHRlci5hYm9ydCgpfXRoaXMuX2Rlc3Ryb3koKX1fZGVzdHJveSgpe3RoaXMuX2ZpbGVQcm9taXNlV3JhcHBlcj11bmRlZmluZWQ7dGhpcy5fcmVhZGVyPXVuZGVmaW5lZDt0aGlzLl9hZGFwdGVyPXVuZGVmaW5lZDt0aGlzLnVwbG9hZFJlc3BvbnNlPXVuZGVmaW5lZH1fY3JlYXRlRmlsZVByb21pc2VXcmFwcGVyKHQpe2NvbnN0IGU9e307ZS5wcm9taXNlPW5ldyBQcm9taXNlKChpLG4pPT57ZS5yZWplY3Rlcj1uO2UuaXNGdWxmaWxsZWQ9ZmFsc2U7dC50aGVuKHQ9PntlLmlzRnVsZmlsbGVkPXRydWU7aSh0KX0pLmNhdGNoKHQ9PntlLmlzRnVsZmlsbGVkPXRydWU7bih0KX0pfSk7cmV0dXJuIGV9fXZzKGRrLEpjKTtjbGFzcyB1ayBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bbGtdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiQmFzZTY0VXBsb2FkQWRhcHRlclwifWluaXQoKXt0aGlzLmVkaXRvci5wbHVnaW5zLmdldChsaykuY3JlYXRlVXBsb2FkQWRhcHRlcj10PT5uZXcgaGsodCl9fWNsYXNzIGhre2NvbnN0cnVjdG9yKHQpe3RoaXMubG9hZGVyPXR9dXBsb2FkKCl7cmV0dXJuIG5ldyBQcm9taXNlKCh0LGUpPT57Y29uc3QgaT10aGlzLnJlYWRlcj1uZXcgd2luZG93LkZpbGVSZWFkZXI7aS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCgpPT57dCh7ZGVmYXVsdDppLnJlc3VsdH0pfSk7aS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0PT57ZSh0KX0pO2kuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsKCk9PntlKCl9KTt0aGlzLmxvYWRlci5maWxlLnRoZW4odD0+e2kucmVhZEFzRGF0YVVSTCh0KX0pfSl9YWJvcnQoKXt0aGlzLnJlYWRlci5hYm9ydCgpfX1jbGFzcyBmayBleHRlbmRzIGp3e3JlZnJlc2goKXt0aGlzLnZhbHVlPXRoaXMuX2dldFZhbHVlKCk7dGhpcy5pc0VuYWJsZWQ9dGhpcy5fY2hlY2tFbmFibGVkKCl9ZXhlY3V0ZSh0PXt9KXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IGk9ZS5zY2hlbWE7Y29uc3Qgbj1lLmRvY3VtZW50LnNlbGVjdGlvbjtjb25zdCBvPUFycmF5LmZyb20obi5nZXRTZWxlY3RlZEJsb2NrcygpKTtjb25zdCByPXQuZm9yY2VWYWx1ZT09PXVuZGVmaW5lZD8hdGhpcy52YWx1ZTp0LmZvcmNlVmFsdWU7ZS5jaGFuZ2UodD0+e2lmKCFyKXt0aGlzLl9yZW1vdmVRdW90ZSh0LG8uZmlsdGVyKGdrKSl9ZWxzZXtjb25zdCBlPW8uZmlsdGVyKHQ9PmdrKHQpfHxwayhpLHQpKTt0aGlzLl9hcHBseVF1b3RlKHQsZSl9fSl9X2dldFZhbHVlKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3QgZT1Xdyh0LmdldFNlbGVjdGVkQmxvY2tzKCkpO3JldHVybiEhKGUmJmdrKGUpKX1fY2hlY2tFbmFibGVkKCl7aWYodGhpcy52YWx1ZSl7cmV0dXJuIHRydWV9Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbC5zY2hlbWE7Y29uc3QgaT1Xdyh0LmdldFNlbGVjdGVkQmxvY2tzKCkpO2lmKCFpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHBrKGUsaSl9X3JlbW92ZVF1b3RlKHQsZSl7bWsodCxlKS5yZXZlcnNlKCkuZm9yRWFjaChlPT57aWYoZS5zdGFydC5pc0F0U3RhcnQmJmUuZW5kLmlzQXRFbmQpe3QudW53cmFwKGUuc3RhcnQucGFyZW50KTtyZXR1cm59aWYoZS5zdGFydC5pc0F0U3RhcnQpe2NvbnN0IGk9dC5jcmVhdGVQb3NpdGlvbkJlZm9yZShlLnN0YXJ0LnBhcmVudCk7dC5tb3ZlKGUsaSk7cmV0dXJufWlmKCFlLmVuZC5pc0F0RW5kKXt0LnNwbGl0KGUuZW5kKX1jb25zdCBpPXQuY3JlYXRlUG9zaXRpb25BZnRlcihlLmVuZC5wYXJlbnQpO3QubW92ZShlLGkpfSl9X2FwcGx5UXVvdGUodCxlKXtjb25zdCBpPVtdO21rKHQsZSkucmV2ZXJzZSgpLmZvckVhY2goZT0+e2xldCBuPWdrKGUuc3RhcnQpO2lmKCFuKXtuPXQuY3JlYXRlRWxlbWVudChcImJsb2NrUXVvdGVcIik7dC53cmFwKGUsbil9aS5wdXNoKG4pfSk7aS5yZXZlcnNlKCkucmVkdWNlKChlLGkpPT57aWYoZS5uZXh0U2libGluZz09aSl7dC5tZXJnZSh0LmNyZWF0ZVBvc2l0aW9uQWZ0ZXIoZSkpO3JldHVybiBlfXJldHVybiBpfSl9fWZ1bmN0aW9uIGdrKHQpe3JldHVybiB0LnBhcmVudC5uYW1lPT1cImJsb2NrUXVvdGVcIj90LnBhcmVudDpudWxsfWZ1bmN0aW9uIG1rKHQsZSl7bGV0IGk7bGV0IG49MDtjb25zdCBvPVtdO3doaWxlKG48ZS5sZW5ndGgpe2NvbnN0IHI9ZVtuXTtjb25zdCBzPWVbbisxXTtpZighaSl7aT10LmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHIpfWlmKCFzfHxyLm5leHRTaWJsaW5nIT1zKXtvLnB1c2godC5jcmVhdGVSYW5nZShpLHQuY3JlYXRlUG9zaXRpb25BZnRlcihyKSkpO2k9bnVsbH1uKyt9cmV0dXJuIG99ZnVuY3Rpb24gcGsodCxlKXtjb25zdCBpPXQuY2hlY2tDaGlsZChlLnBhcmVudCxcImJsb2NrUXVvdGVcIik7Y29uc3Qgbj10LmNoZWNrQ2hpbGQoW1wiJHJvb3RcIixcImJsb2NrUXVvdGVcIl0sZSk7cmV0dXJuIGkmJm59Y2xhc3MgYmsgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkJsb2NrUXVvdGVFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10Lm1vZGVsLnNjaGVtYTt0LmNvbW1hbmRzLmFkZChcImJsb2NrUXVvdGVcIixuZXcgZmsodCkpO2UucmVnaXN0ZXIoXCJibG9ja1F1b3RlXCIse2FsbG93V2hlcmU6XCIkYmxvY2tcIixhbGxvd0NvbnRlbnRPZjpcIiRyb290XCJ9KTtlLmFkZENoaWxkQ2hlY2soKHQsZSk9PntpZih0LmVuZHNXaXRoKFwiYmxvY2tRdW90ZVwiKSYmZS5uYW1lPT1cImJsb2NrUXVvdGVcIil7cmV0dXJuIGZhbHNlfX0pO3QuY29udmVyc2lvbi5lbGVtZW50VG9FbGVtZW50KHttb2RlbDpcImJsb2NrUXVvdGVcIix2aWV3OlwiYmxvY2txdW90ZVwifSk7dC5tb2RlbC5kb2N1bWVudC5yZWdpc3RlclBvc3RGaXhlcihpPT57Y29uc3Qgbj10Lm1vZGVsLmRvY3VtZW50LmRpZmZlci5nZXRDaGFuZ2VzKCk7Zm9yKGNvbnN0IHQgb2Ygbil7aWYodC50eXBlPT1cImluc2VydFwiKXtjb25zdCBuPXQucG9zaXRpb24ubm9kZUFmdGVyO2lmKCFuKXtjb250aW51ZX1pZihuLmlzKFwiYmxvY2tRdW90ZVwiKSYmbi5pc0VtcHR5KXtpLnJlbW92ZShuKTtyZXR1cm4gdHJ1ZX1lbHNlIGlmKG4uaXMoXCJibG9ja1F1b3RlXCIpJiYhZS5jaGVja0NoaWxkKHQucG9zaXRpb24sbikpe2kudW53cmFwKG4pO3JldHVybiB0cnVlfWVsc2UgaWYobi5pcyhcImVsZW1lbnRcIikpe2NvbnN0IHQ9aS5jcmVhdGVSYW5nZUluKG4pO2Zvcihjb25zdCBuIG9mIHQuZ2V0SXRlbXMoKSl7aWYobi5pcyhcImJsb2NrUXVvdGVcIikmJiFlLmNoZWNrQ2hpbGQoaS5jcmVhdGVQb3NpdGlvbkJlZm9yZShuKSxuKSl7aS51bndyYXAobik7cmV0dXJuIHRydWV9fX19ZWxzZSBpZih0LnR5cGU9PVwicmVtb3ZlXCIpe2NvbnN0IGU9dC5wb3NpdGlvbi5wYXJlbnQ7aWYoZS5pcyhcImJsb2NrUXVvdGVcIikmJmUuaXNFbXB0eSl7aS5yZW1vdmUoZSk7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9KX1hZnRlckluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5jb21tYW5kcy5nZXQoXCJibG9ja1F1b3RlXCIpO3RoaXMubGlzdGVuVG8odGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvY3VtZW50LFwiZW50ZXJcIiwodCxpKT0+e2NvbnN0IG49dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQ7Y29uc3Qgbz1uLnNlbGVjdGlvbi5nZXRMYXN0UG9zaXRpb24oKS5wYXJlbnQ7aWYobi5zZWxlY3Rpb24uaXNDb2xsYXBzZWQmJm8uaXNFbXB0eSYmZS52YWx1ZSl7dGhpcy5lZGl0b3IuZXhlY3V0ZShcImJsb2NrUXVvdGVcIik7dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LnNjcm9sbFRvVGhlU2VsZWN0aW9uKCk7aS5wcmV2ZW50RGVmYXVsdCgpO3Quc3RvcCgpfX0pfX12YXIgd2s9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTMgMTAuNDIzYTYuNSA2LjUgMCAwIDEgNi4wNTYtNi40MDhsLjAzOC42N0M2LjQ0OCA1LjQyMyA1LjM1NCA3LjY2MyA1LjIyIDEwSDljLjU1MiAwIC41LjQzMi41Ljk4NnY0LjUxMWMwIC41NTQtLjQ0OC41MDMtMSAuNTAzaC01Yy0uNTUyIDAtLjUtLjQ0OS0uNS0xLjAwM3YtNC41NzR6bTggMGE2LjUgNi41IDAgMCAxIDYuMDU2LTYuNDA4bC4wMzguNjdjLTIuNjQ2LjczOS0zLjc0IDIuOTc5LTMuODczIDUuMzE1SDE3Yy41NTIgMCAuNS40MzIuNS45ODZ2NC41MTFjMCAuNTU0LS40NDguNTAzLTEgLjUwM2gtNWMtLjU1MiAwLS41LS40NDktLjUtMS4wMDN2LTQuNTc0elwiLz48L3N2Zz4nO3ZhciBraz1pKDQ1KTtjbGFzcyBfayBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC50O3QudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoXCJibG9ja1F1b3RlXCIsaT0+e2NvbnN0IG49dC5jb21tYW5kcy5nZXQoXCJibG9ja1F1b3RlXCIpO2NvbnN0IG89bmV3IGhiKGkpO28uc2V0KHtsYWJlbDplKFwiamNcIiksaWNvbjp3ayx0b29sdGlwOnRydWUsaXNUb2dnbGVhYmxlOnRydWV9KTtvLmJpbmQoXCJpc09uXCIsXCJpc0VuYWJsZWRcIikudG8obixcInZhbHVlXCIsXCJpc0VuYWJsZWRcIik7dGhpcy5saXN0ZW5UbyhvLFwiZXhlY3V0ZVwiLCgpPT57dC5leGVjdXRlKFwiYmxvY2tRdW90ZVwiKTt0LmVkaXRpbmcudmlldy5mb2N1cygpfSk7cmV0dXJuIG99KX19Y2xhc3MgdmsgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2JrLF9rXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkJsb2NrUXVvdGVcIn19Y2xhc3MgeWsgZXh0ZW5kcyBqd3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpO3RoaXMuYXR0cmlidXRlS2V5PWV9cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50O3RoaXMudmFsdWU9dGhpcy5fZ2V0VmFsdWVGcm9tRmlyc3RBbGxvd2VkTm9kZSgpO3RoaXMuaXNFbmFibGVkPXQuc2NoZW1hLmNoZWNrQXR0cmlidXRlSW5TZWxlY3Rpb24oZS5zZWxlY3Rpb24sdGhpcy5hdHRyaWJ1dGVLZXkpfWV4ZWN1dGUodD17fSl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQ7Y29uc3Qgbj1pLnNlbGVjdGlvbjtjb25zdCBvPXQuZm9yY2VWYWx1ZT09PXVuZGVmaW5lZD8hdGhpcy52YWx1ZTp0LmZvcmNlVmFsdWU7ZS5jaGFuZ2UodD0+e2lmKG4uaXNDb2xsYXBzZWQpe2lmKG8pe3Quc2V0U2VsZWN0aW9uQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlS2V5LHRydWUpfWVsc2V7dC5yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpfX1lbHNle2NvbnN0IGk9ZS5zY2hlbWEuZ2V0VmFsaWRSYW5nZXMobi5nZXRSYW5nZXMoKSx0aGlzLmF0dHJpYnV0ZUtleSk7Zm9yKGNvbnN0IGUgb2YgaSl7aWYobyl7dC5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXksbyxlKX1lbHNle3QucmVtb3ZlQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlS2V5LGUpfX19fSl9X2dldFZhbHVlRnJvbUZpcnN0QWxsb3dlZE5vZGUoKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IGU9dC5zY2hlbWE7Y29uc3QgaT10LmRvY3VtZW50LnNlbGVjdGlvbjtpZihpLmlzQ29sbGFwc2VkKXtyZXR1cm4gaS5oYXNBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpfWZvcihjb25zdCB0IG9mIGkuZ2V0UmFuZ2VzKCkpe2Zvcihjb25zdCBpIG9mIHQuZ2V0SXRlbXMoKSl7aWYoZS5jaGVja0F0dHJpYnV0ZShpLHRoaXMuYXR0cmlidXRlS2V5KSl7cmV0dXJuIGkuaGFzQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlS2V5KX19fXJldHVybiBmYWxzZX19Y29uc3QgeGs9XCJib2xkXCI7Y2xhc3MgQ2sgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkJvbGRFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5tb2RlbC5zY2hlbWEuZXh0ZW5kKFwiJHRleHRcIix7YWxsb3dBdHRyaWJ1dGVzOnhrfSk7dC5tb2RlbC5zY2hlbWEuc2V0QXR0cmlidXRlUHJvcGVydGllcyh4ayx7aXNGb3JtYXR0aW5nOnRydWUsY29weU9uRW50ZXI6dHJ1ZX0pO3QuY29udmVyc2lvbi5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOnhrLHZpZXc6XCJzdHJvbmdcIix1cGNhc3RBbHNvOltcImJcIix0PT57Y29uc3QgZT10LmdldFN0eWxlKFwiZm9udC13ZWlnaHRcIik7aWYoIWUpe3JldHVybiBudWxsfWlmKGU9PVwiYm9sZFwifHxOdW1iZXIoZSk+PTYwMCl7cmV0dXJue25hbWU6dHJ1ZSxzdHlsZXM6W1wiZm9udC13ZWlnaHRcIl19fX1dfSk7dC5jb21tYW5kcy5hZGQoeGssbmV3IHlrKHQseGspKTt0LmtleXN0cm9rZXMuc2V0KFwiQ1RSTCtCXCIseGspfX12YXIgQWs9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTEwLjE4NyAxN0g1Ljc3M2MtLjYzNyAwLTEuMDkyLS4xMzgtMS4zNjQtLjQxNS0uMjczLS4yNzctLjQwOS0uNzE4LS40MDktMS4zMjNWNC43MzhjMC0uNjE3LjE0LTEuMDYyLjQxOS0xLjMzMi4yNzktLjI3LjczLS40MDYgMS4zNTQtLjQwNmg0LjY4Yy42OSAwIDEuMjg4LjA0MSAxLjc5My4xMjQuNTA2LjA4My45Ni4yNDIgMS4zNi40NzguMzQxLjE5Ny42NDQuNDQ3LjkwNi43NWEzLjI2MiAzLjI2MiAwIDAgMSAuODA4IDIuMTYyYzAgMS40MDEtLjcyMiAyLjQyNi0yLjE2NyAzLjA3NUMxNS4wNSAxMC4xNzUgMTYgMTEuMzE1IDE2IDEzLjAxYTMuNzU2IDMuNzU2IDAgMCAxLTIuMjk2IDMuNTA0IDYuMSA2LjEgMCAwIDEtMS41MTcuMzc3Yy0uNTcxLjA3My0xLjIzOC4xMS0yIC4xMXptLS4yMTctNi4yMTdIN3Y0LjA4N2gzLjA2OWMxLjk3NyAwIDIuOTY1LS42OSAyLjk2NS0yLjA3MiAwLS43MDctLjI1Ni0xLjIyLS43NjgtMS41MzctLjUxMi0uMzE5LTEuMjc3LS40NzgtMi4yOTYtLjQ3OHpNNyA1LjEzdjMuNjE5aDIuNjA2Yy43MjkgMCAxLjI5Mi0uMDY3IDEuNjktLjJhMS42IDEuNiAwIDAgMCAuOTEtLjc2NWMuMTY1LS4yNjcuMjQ3LS41NjYuMjQ3LS44OTcgMC0uNzA3LS4yNi0xLjE3Ni0uNzc4LTEuNDA5LS41MTktLjIzMi0xLjMxLS4zNDgtMi4zNzUtLjM0OEg3elwiLz48L3N2Zz4nO2NvbnN0IFRrPVwiYm9sZFwiO2NsYXNzIFBrIGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChUayxpPT57Y29uc3Qgbj10LmNvbW1hbmRzLmdldChUayk7Y29uc3Qgbz1uZXcgaGIoaSk7by5zZXQoe2xhYmVsOmUoXCJqaVwiKSxpY29uOkFrLGtleXN0cm9rZTpcIkNUUkwrQlwiLHRvb2x0aXA6dHJ1ZSxpc1RvZ2dsZWFibGU6dHJ1ZX0pO28uYmluZChcImlzT25cIixcImlzRW5hYmxlZFwiKS50byhuLFwidmFsdWVcIixcImlzRW5hYmxlZFwiKTt0aGlzLmxpc3RlblRvKG8sXCJleGVjdXRlXCIsKCk9Pnt0LmV4ZWN1dGUoVGspO3QuZWRpdGluZy52aWV3LmZvY3VzKCl9KTtyZXR1cm4gb30pfX1jbGFzcyBTayBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bQ2ssUGtdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiQm9sZFwifX1jbGFzcyBFayBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7dGhpcy5hdHRyaWJ1dGVLZXk9ZX1yZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBlPXQuZG9jdW1lbnQ7dGhpcy52YWx1ZT1lLnNlbGVjdGlvbi5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpO3RoaXMuaXNFbmFibGVkPXQuc2NoZW1hLmNoZWNrQXR0cmlidXRlSW5TZWxlY3Rpb24oZS5zZWxlY3Rpb24sdGhpcy5hdHRyaWJ1dGVLZXkpfWV4ZWN1dGUodD17fSl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQ7Y29uc3Qgbj1pLnNlbGVjdGlvbjtjb25zdCBvPXQudmFsdWU7ZS5jaGFuZ2UodD0+e2lmKG4uaXNDb2xsYXBzZWQpe2lmKG8pe3Quc2V0U2VsZWN0aW9uQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlS2V5LG8pfWVsc2V7dC5yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpfX1lbHNle2NvbnN0IGk9ZS5zY2hlbWEuZ2V0VmFsaWRSYW5nZXMobi5nZXRSYW5nZXMoKSx0aGlzLmF0dHJpYnV0ZUtleSk7Zm9yKGNvbnN0IGUgb2YgaSl7aWYobyl7dC5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXksbyxlKX1lbHNle3QucmVtb3ZlQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlS2V5LGUpfX19fSl9fXZhciBSaz0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGNsYXNzPVwiY2staWNvbl9fZmlsbFwiIGQ9XCJNMTYuOTM1IDUuMzI4YTIgMiAwIDAgMSAwIDIuODI5bC03Ljc3OCA3Ljc3OGEyIDIgMCAwIDEtMi44MjkgMEwzLjUgMTMuMTA3YTEuOTk5IDEuOTk5IDAgMSAxIDIuODI4LTIuODI5bC43MDcuNzA3YTEgMSAwIDAgMCAxLjQxNCAwbDUuNjU4LTUuNjU3YTIgMiAwIDAgMSAyLjgyOCAwelwiLz48cGF0aCBkPVwiTTE0LjgxNCA2LjAzNUw4LjQ0OCAxMi40YTEgMSAwIDAgMS0xLjQxNCAwbC0xLjQxMy0xLjQxNUExIDEgMCAxIDAgNC4yMDcgMTIuNGwyLjgyOSAyLjgyOWExIDEgMCAwIDAgMS40MTQgMGw3Ljc3OC03Ljc3OGExIDEgMCAxIDAtMS40MTQtMS40MTV6XCIvPjwvc3ZnPic7Y2xhc3MgT2sgZXh0ZW5kcyBoYntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KFwiY29sb3JcIik7dGhpcy5zZXQoXCJoYXNCb3JkZXJcIik7dGhpcy5pY29uPVJrO3RoaXMuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e3N0eWxlOntiYWNrZ3JvdW5kQ29sb3I6ZS50byhcImNvbG9yXCIpfSxjbGFzczpbXCJja1wiLFwiY2stY29sb3ItZ3JpZF9fdGlsZVwiLGUuaWYoXCJoYXNCb3JkZXJcIixcImNrLWNvbG9yLXRhYmxlX19jb2xvci10aWxlX2JvcmRlcmVkXCIpXX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTt0aGlzLmljb25WaWV3LmZpbGxDb2xvcj1cImhzbCgwLCAwJSwgMTAwJSlcIn19dmFyIElrPWkoNDcpO2NsYXNzIFZrIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTtjb25zdCBpPWUmJmUuY29sb3JEZWZpbml0aW9uc3x8W107Y29uc3Qgbj17fTtpZihlJiZlLmNvbHVtbnMpe24uZ3JpZFRlbXBsYXRlQ29sdW1ucz1gcmVwZWF0KCAke2UuY29sdW1uc30sIDFmcilgfXRoaXMuc2V0KFwic2VsZWN0ZWRDb2xvclwiKTt0aGlzLml0ZW1zPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpO3RoaXMuZm9jdXNUcmFja2VyPW5ldyBmYjt0aGlzLmtleXN0cm9rZXM9bmV3IGRwO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLml0ZW1zLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOlwiYXJyb3dsZWZ0XCIsZm9jdXNOZXh0OlwiYXJyb3dyaWdodFwifX0pO3RoaXMuaXRlbXMub24oXCJhZGRcIiwodCxlKT0+e2UuaXNPbj1lLmNvbG9yPT09dGhpcy5zZWxlY3RlZENvbG9yfSk7aS5mb3JFYWNoKHQ9Pntjb25zdCBlPW5ldyBPaztlLnNldCh7Y29sb3I6dC5jb2xvcixsYWJlbDp0LmxhYmVsLHRvb2x0aXA6dHJ1ZSxoYXNCb3JkZXI6dC5vcHRpb25zLmhhc0JvcmRlcn0pO2Uub24oXCJleGVjdXRlXCIsKCk9Pnt0aGlzLmZpcmUoXCJleGVjdXRlXCIse3ZhbHVlOnQuY29sb3IsaGFzQm9yZGVyOnQub3B0aW9ucy5oYXNCb3JkZXIsbGFiZWw6dC5sYWJlbH0pfSk7dGhpcy5pdGVtcy5hZGQoZSl9KTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixjaGlsZHJlbjp0aGlzLml0ZW1zLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1jb2xvci1ncmlkXCJdLHN0eWxlOm59fSk7dGhpcy5vbihcImNoYW5nZTpzZWxlY3RlZENvbG9yXCIsKHQsZSxpKT0+e2Zvcihjb25zdCB0IG9mIHRoaXMuaXRlbXMpe3QuaXNPbj10LmNvbG9yPT09aX19KX1mb2N1cygpe2lmKHRoaXMuaXRlbXMubGVuZ3RoKXt0aGlzLml0ZW1zLmZpcnN0LmZvY3VzKCl9fWZvY3VzTGFzdCgpe2lmKHRoaXMuaXRlbXMubGVuZ3RoKXt0aGlzLml0ZW1zLmxhc3QuZm9jdXMoKX19cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5pdGVtcyl7dGhpcy5mb2N1c1RyYWNrZXIuYWRkKHQuZWxlbWVudCl9dGhpcy5pdGVtcy5vbihcImFkZFwiLCh0LGUpPT57dGhpcy5mb2N1c1RyYWNrZXIuYWRkKGUuZWxlbWVudCl9KTt0aGlzLml0ZW1zLm9uKFwicmVtb3ZlXCIsKHQsZSk9Pnt0aGlzLmZvY3VzVHJhY2tlci5yZW1vdmUoZS5lbGVtZW50KX0pO3RoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfX12YXIgTms9aSg0OSk7Y2xhc3MgTWsgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0aGlzLnNldChcInRleHRcIik7dGhpcy5zZXQoXCJmb3JcIik7dGhpcy5pZD1gY2stZWRpdG9yX19sYWJlbF8ke2lzKCl9YDtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImxhYmVsXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWxhYmVsXCJdLGlkOnRoaXMuaWQsZm9yOmUudG8oXCJmb3JcIil9LGNoaWxkcmVuOlt7dGV4dDplLnRvKFwidGV4dFwiKX1dfSl9fWNsYXNzIEJrIGV4dGVuZHMgeXN7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5zZXQoXCJpc0VtcHR5XCIsdHJ1ZSl9YWRkKHQsZSl7aWYodGhpcy5maW5kKGU9PmUuY29sb3I9PT10LmNvbG9yKSl7cmV0dXJufXN1cGVyLmFkZCh0LGUpO3RoaXMuc2V0KFwiaXNFbXB0eVwiLGZhbHNlKX1yZW1vdmUodCl7Y29uc3QgZT1zdXBlci5yZW1vdmUodCk7aWYodGhpcy5sZW5ndGg9PT0wKXt0aGlzLnNldChcImlzRW1wdHlcIix0cnVlKX1yZXR1cm4gZX1oYXNDb2xvcih0KXtyZXR1cm4hIXRoaXMuZmluZChlPT5lLmNvbG9yPT09dCl9fXZzKEJrLEpjKTt2YXIgems9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTguNjM2IDkuNTMxbC0yLjc1OCAzLjk0YS41LjUgMCAwIDAgLjEyMi42OTZsMy4yMjQgMi4yODRoMS4zMTRsMi42MzYtMy43MzZMOC42MzYgOS41M3ptLjI4OCA4LjQ1MUw1LjE0IDE1LjM5NmEyIDIgMCAwIDEtLjQ5MS0yLjc4Nmw2LjY3My05LjUzYTIgMiAwIDAgMSAyLjc4NS0uNDlsMy43NDIgMi42MmEyIDIgMCAwIDEgLjQ5MSAyLjc4NWwtNy4yNjkgMTAuMDUzLTIuMTQ3LS4wNjZ6XCIvPjxwYXRoIGQ9XCJNNCAxOGg1LjUyM3YtMUg0em0tMiAwaDF2LTFIMnpcIi8+PC9zdmc+Jzt2YXIgTGs9aSg1MSk7Y2xhc3MgRmsgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0LHtjb2xvcnM6ZSxjb2x1bW5zOmkscmVtb3ZlQnV0dG9uTGFiZWw6bixkb2N1bWVudENvbG9yc0xhYmVsOm8sZG9jdW1lbnRDb2xvcnNDb3VudDpyfSl7c3VwZXIodCk7dGhpcy5pdGVtcz10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLmNvbG9yRGVmaW5pdGlvbnM9ZTt0aGlzLmZvY3VzVHJhY2tlcj1uZXcgZmI7dGhpcy5rZXlzdHJva2VzPW5ldyBkcDt0aGlzLnNldChcInNlbGVjdGVkQ29sb3JcIik7dGhpcy5yZW1vdmVCdXR0b25MYWJlbD1uO3RoaXMuY29sdW1ucz1pO3RoaXMuZG9jdW1lbnRDb2xvcnM9bmV3IEJrO3RoaXMuZG9jdW1lbnRDb2xvcnNDb3VudD1yO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLml0ZW1zLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOlwiYXJyb3d1cFwiLGZvY3VzTmV4dDpcImFycm93ZG93blwifX0pO3RoaXMuX2RvY3VtZW50Q29sb3JzTGFiZWw9bzt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stY29sb3ItdGFibGVcIl19LGNoaWxkcmVuOnRoaXMuaXRlbXN9KTt0aGlzLml0ZW1zLmFkZCh0aGlzLl9yZW1vdmVDb2xvckJ1dHRvbigpKX11cGRhdGVEb2N1bWVudENvbG9ycyh0LGUpe2NvbnN0IGk9dC5kb2N1bWVudDtjb25zdCBuPXRoaXMuZG9jdW1lbnRDb2xvcnNDb3VudDt0aGlzLmRvY3VtZW50Q29sb3JzLmNsZWFyKCk7Zm9yKGNvbnN0IG8gb2YgaS5nZXRSb290TmFtZXMoKSl7Y29uc3Qgcj1pLmdldFJvb3Qobyk7Y29uc3Qgcz10LmNyZWF0ZVJhbmdlSW4ocik7Zm9yKGNvbnN0IHQgb2Ygcy5nZXRJdGVtcygpKXtpZih0LmlzKFwidGV4dFByb3h5XCIpJiZ0Lmhhc0F0dHJpYnV0ZShlKSl7dGhpcy5fYWRkQ29sb3JUb0RvY3VtZW50Q29sb3JzKHQuZ2V0QXR0cmlidXRlKGUpKTtpZih0aGlzLmRvY3VtZW50Q29sb3JzLmxlbmd0aD49bil7cmV0dXJufX19fX11cGRhdGVTZWxlY3RlZENvbG9ycygpe2NvbnN0IHQ9dGhpcy5kb2N1bWVudENvbG9yc0dyaWQ7Y29uc3QgZT10aGlzLnN0YXRpY0NvbG9yc0dyaWQ7Y29uc3QgaT10aGlzLnNlbGVjdGVkQ29sb3I7ZS5zZWxlY3RlZENvbG9yPWk7aWYodCl7dC5zZWxlY3RlZENvbG9yPWl9fXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO2Zvcihjb25zdCB0IG9mIHRoaXMuaXRlbXMpe3RoaXMuZm9jdXNUcmFja2VyLmFkZCh0LmVsZW1lbnQpfXRoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfWFwcGVuZEdyaWRzKCl7aWYodGhpcy5zdGF0aWNDb2xvcnNHcmlkKXtyZXR1cm59dGhpcy5zdGF0aWNDb2xvcnNHcmlkPXRoaXMuX2NyZWF0ZVN0YXRpY0NvbG9yc0dyaWQoKTt0aGlzLml0ZW1zLmFkZCh0aGlzLnN0YXRpY0NvbG9yc0dyaWQpO2lmKHRoaXMuZG9jdW1lbnRDb2xvcnNDb3VudCl7Y29uc3QgdD1fcC5iaW5kKHRoaXMuZG9jdW1lbnRDb2xvcnMsdGhpcy5kb2N1bWVudENvbG9ycyk7Y29uc3QgZT1uZXcgTWsodGhpcy5sb2NhbGUpO2UudGV4dD10aGlzLl9kb2N1bWVudENvbG9yc0xhYmVsO2UuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1jb2xvci1ncmlkX19sYWJlbFwiLHQuaWYoXCJpc0VtcHR5XCIsXCJjay1oaWRkZW5cIildfX0pO3RoaXMuaXRlbXMuYWRkKGUpO3RoaXMuZG9jdW1lbnRDb2xvcnNHcmlkPXRoaXMuX2NyZWF0ZURvY3VtZW50Q29sb3JzR3JpZCgpO3RoaXMuaXRlbXMuYWRkKHRoaXMuZG9jdW1lbnRDb2xvcnNHcmlkKX19Zm9jdXMoKXt0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0ZpcnN0KCl9Zm9jdXNMYXN0KCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNMYXN0KCl9X3JlbW92ZUNvbG9yQnV0dG9uKCl7Y29uc3QgdD1uZXcgaGI7dC5zZXQoe3dpdGhUZXh0OnRydWUsaWNvbjp6ayx0b29sdGlwOnRydWUsbGFiZWw6dGhpcy5yZW1vdmVCdXR0b25MYWJlbH0pO3QuY2xhc3M9XCJjay1jb2xvci10YWJsZV9fcmVtb3ZlLWNvbG9yXCI7dC5vbihcImV4ZWN1dGVcIiwoKT0+e3RoaXMuZmlyZShcImV4ZWN1dGVcIix7dmFsdWU6bnVsbH0pfSk7cmV0dXJuIHR9X2NyZWF0ZVN0YXRpY0NvbG9yc0dyaWQoKXtjb25zdCB0PW5ldyBWayh0aGlzLmxvY2FsZSx7Y29sb3JEZWZpbml0aW9uczp0aGlzLmNvbG9yRGVmaW5pdGlvbnMsY29sdW1uczp0aGlzLmNvbHVtbnN9KTt0LmRlbGVnYXRlKFwiZXhlY3V0ZVwiKS50byh0aGlzKTtyZXR1cm4gdH1fY3JlYXRlRG9jdW1lbnRDb2xvcnNHcmlkKCl7Y29uc3QgdD1fcC5iaW5kKHRoaXMuZG9jdW1lbnRDb2xvcnMsdGhpcy5kb2N1bWVudENvbG9ycyk7Y29uc3QgZT1uZXcgVmsodGhpcy5sb2NhbGUse2NvbHVtbnM6dGhpcy5jb2x1bW5zfSk7ZS5kZWxlZ2F0ZShcImV4ZWN1dGVcIikudG8odGhpcyk7ZS5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6dC5pZihcImlzRW1wdHlcIixcImNrLWhpZGRlblwiKX19KTtlLml0ZW1zLmJpbmRUbyh0aGlzLmRvY3VtZW50Q29sb3JzKS51c2luZyh0PT57Y29uc3QgZT1uZXcgT2s7ZS5zZXQoe2NvbG9yOnQuY29sb3IsaGFzQm9yZGVyOnQub3B0aW9ucyYmdC5vcHRpb25zLmhhc0JvcmRlcn0pO2lmKHQubGFiZWwpe2Uuc2V0KHtsYWJlbDp0LmxhYmVsLHRvb2x0aXA6dHJ1ZX0pfWUub24oXCJleGVjdXRlXCIsKCk9Pnt0aGlzLmZpcmUoXCJleGVjdXRlXCIse3ZhbHVlOnQuY29sb3J9KX0pO3JldHVybiBlfSk7dGhpcy5kb2N1bWVudENvbG9ycy5vbihcImNoYW5nZTppc0VtcHR5XCIsKHQsaSxuKT0+e2lmKG4pe2Uuc2VsZWN0ZWRDb2xvcj1udWxsfX0pO3JldHVybiBlfV9hZGRDb2xvclRvRG9jdW1lbnRDb2xvcnModCl7Y29uc3QgZT10aGlzLmNvbG9yRGVmaW5pdGlvbnMuZmluZChlPT5lLmNvbG9yPT09dCk7aWYoIWUpe3RoaXMuZG9jdW1lbnRDb2xvcnMuYWRkKHtjb2xvcjp0LGxhYmVsOnQsb3B0aW9uczp7aGFzQm9yZGVyOmZhbHNlfX0pfWVsc2V7dGhpcy5kb2N1bWVudENvbG9ycy5hZGQoT2JqZWN0LmFzc2lnbih7fSxlKSl9fX1jb25zdCBEaz1cImZvbnRTaXplXCI7Y29uc3Qgams9XCJmb250RmFtaWx5XCI7Y29uc3QgSGs9XCJmb250Q29sb3JcIjtjb25zdCBXaz1cImZvbnRCYWNrZ3JvdW5kQ29sb3JcIjtmdW5jdGlvbiBxayh0LGUpe2NvbnN0IGk9e21vZGVsOntrZXk6dCx2YWx1ZXM6W119LHZpZXc6e30sdXBjYXN0QWxzbzp7fX07Zm9yKGNvbnN0IHQgb2YgZSl7aS5tb2RlbC52YWx1ZXMucHVzaCh0Lm1vZGVsKTtpLnZpZXdbdC5tb2RlbF09dC52aWV3O2lmKHQudXBjYXN0QWxzbyl7aS51cGNhc3RBbHNvW3QubW9kZWxdPXQudXBjYXN0QWxzb319cmV0dXJuIGl9ZnVuY3Rpb24gVWsodCl7cmV0dXJuIGU9PktrKGUuZ2V0U3R5bGUodCkpfWZ1bmN0aW9uICRrKHQpe3JldHVybihlLGkpPT5pLmNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQoXCJzcGFuXCIse3N0eWxlOmAke3R9OiR7ZX1gfSx7cHJpb3JpdHk6N30pfWZ1bmN0aW9uIEdrKHtkcm9wZG93blZpZXc6dCxjb2xvcnM6ZSxjb2x1bW5zOmkscmVtb3ZlQnV0dG9uTGFiZWw6bixkb2N1bWVudENvbG9yc0xhYmVsOm8sZG9jdW1lbnRDb2xvcnNDb3VudDpyfSl7Y29uc3Qgcz10LmxvY2FsZTtjb25zdCBhPW5ldyBGayhzLHtjb2xvcnM6ZSxjb2x1bW5zOmkscmVtb3ZlQnV0dG9uTGFiZWw6bixkb2N1bWVudENvbG9yc0xhYmVsOm8sZG9jdW1lbnRDb2xvcnNDb3VudDpyfSk7dC5jb2xvclRhYmxlVmlldz1hO3QucGFuZWxWaWV3LmNoaWxkcmVuLmFkZChhKTthLmRlbGVnYXRlKFwiZXhlY3V0ZVwiKS50byh0LFwiZXhlY3V0ZVwiKTtyZXR1cm4gYX1mdW5jdGlvbiBLayh0KXtyZXR1cm4gdC5yZXBsYWNlKC9cXHMvZyxcIlwiKX1jbGFzcyBKayBleHRlbmRzIEVre2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsamspfX1mdW5jdGlvbiBZayh0KXtyZXR1cm4gdC5tYXAoUWspLmZpbHRlcih0PT4hIXQpfWZ1bmN0aW9uIFFrKHQpe2lmKHR5cGVvZiB0PT09XCJvYmplY3RcIil7cmV0dXJuIHR9aWYodD09PVwiZGVmYXVsdFwiKXtyZXR1cm57dGl0bGU6XCJEZWZhdWx0XCIsbW9kZWw6dW5kZWZpbmVkfX1pZih0eXBlb2YgdCE9PVwic3RyaW5nXCIpe3JldHVybn1yZXR1cm4gWGsodCl9ZnVuY3Rpb24gWGsodCl7Y29uc3QgZT10LnJlcGxhY2UoL1wifCcvZyxcIlwiKS5zcGxpdChcIixcIik7Y29uc3QgaT1lWzBdO2NvbnN0IG49ZS5tYXAoWmspLmpvaW4oXCIsIFwiKTtyZXR1cm57dGl0bGU6aSxtb2RlbDppLHZpZXc6e25hbWU6XCJzcGFuXCIsc3R5bGVzOntcImZvbnQtZmFtaWx5XCI6bn0scHJpb3JpdHk6N319fWZ1bmN0aW9uIFprKHQpe3Q9dC50cmltKCk7aWYodC5pbmRleE9mKFwiIFwiKT4wKXt0PWAnJHt0fSdgfXJldHVybiB0fWNsYXNzIHRfIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJGb250RmFtaWx5RWRpdGluZ1wifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3QuY29uZmlnLmRlZmluZShqayx7b3B0aW9uczpbXCJkZWZhdWx0XCIsXCJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmXCIsXCJDb3VyaWVyIE5ldywgQ291cmllciwgbW9ub3NwYWNlXCIsXCJHZW9yZ2lhLCBzZXJpZlwiLFwiTHVjaWRhIFNhbnMgVW5pY29kZSwgTHVjaWRhIEdyYW5kZSwgc2Fucy1zZXJpZlwiLFwiVGFob21hLCBHZW5ldmEsIHNhbnMtc2VyaWZcIixcIlRpbWVzIE5ldyBSb21hbiwgVGltZXMsIHNlcmlmXCIsXCJUcmVidWNoZXQgTVMsIEhlbHZldGljYSwgc2Fucy1zZXJpZlwiLFwiVmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmXCJdfSl9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5tb2RlbC5zY2hlbWEuZXh0ZW5kKFwiJHRleHRcIix7YWxsb3dBdHRyaWJ1dGVzOmprfSk7dC5tb2RlbC5zY2hlbWEuc2V0QXR0cmlidXRlUHJvcGVydGllcyhqayx7aXNGb3JtYXR0aW5nOnRydWUsY29weU9uRW50ZXI6dHJ1ZX0pO2NvbnN0IGU9WWsodC5jb25maWcuZ2V0KFwiZm9udEZhbWlseS5vcHRpb25zXCIpKS5maWx0ZXIodD0+dC5tb2RlbCk7Y29uc3QgaT1xayhqayxlKTt0LmNvbnZlcnNpb24uYXR0cmlidXRlVG9FbGVtZW50KGkpO3QuY29tbWFuZHMuYWRkKGprLG5ldyBKayh0KSl9fWNsYXNzIGVfe2NvbnN0cnVjdG9yKHQsZSl7aWYoZSl7cWModGhpcyxlKX1pZih0KXt0aGlzLnNldCh0KX19fXZzKGVfLEpjKTt2YXIgaV89Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTExLjAzIDNoNi4xNDlhLjc1Ljc1IDAgMSAxIDAgMS41aC01LjUxNEwxMS4wMyAzem0xLjI3IDNoNC44NzlhLjc1Ljc1IDAgMSAxIDAgMS41aC00LjI0NEwxMi4zIDZ6bTEuMjcgM2gzLjYwOWEuNzUuNzUgMCAxIDEgMCAxLjVoLTIuOTczTDEzLjU3IDl6bS0yLjc1NCAyLjVMOC4wMzggNC43ODUgNS4yNjEgMTEuNWg1LjU1NXptLjYyIDEuNUg0LjY0MWwtMS42NjYgNC4wMjhIMS4zMTJsNS43ODktMTRoMS44NzVsNS43ODkgMTRoLTEuNjYzTDExLjQzNiAxM3pcIi8+PC9zdmc+JztjbGFzcyBuXyBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC50O2NvbnN0IGk9dGhpcy5fZ2V0TG9jYWxpemVkT3B0aW9ucygpO2NvbnN0IG49dC5jb21tYW5kcy5nZXQoamspO3QudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoamssbz0+e2NvbnN0IHI9V2Iobyk7VWIocixvXyhpLG4pKTtyLmJ1dHRvblZpZXcuc2V0KHtsYWJlbDplKFwiam9cIiksaWNvbjppXyx0b29sdGlwOnRydWV9KTtyLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczpcImNrLWZvbnQtZmFtaWx5LWRyb3Bkb3duXCJ9fSk7ci5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKG4pO3RoaXMubGlzdGVuVG8ocixcImV4ZWN1dGVcIixlPT57dC5leGVjdXRlKGUuc291cmNlLmNvbW1hbmROYW1lLHt2YWx1ZTplLnNvdXJjZS5jb21tYW5kUGFyYW19KTt0LmVkaXRpbmcudmlldy5mb2N1cygpfSk7cmV0dXJuIHJ9KX1fZ2V0TG9jYWxpemVkT3B0aW9ucygpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7Y29uc3QgaT1Zayh0LmNvbmZpZy5nZXQoamspLm9wdGlvbnMpO3JldHVybiBpLm1hcCh0PT57aWYodC50aXRsZT09PVwiRGVmYXVsdFwiKXt0LnRpdGxlPWUoXCJqcFwiKX1yZXR1cm4gdH0pfX1mdW5jdGlvbiBvXyh0LGUpe2NvbnN0IGk9bmV3IHlzO2Zvcihjb25zdCBuIG9mIHQpe2NvbnN0IHQ9e3R5cGU6XCJidXR0b25cIixtb2RlbDpuZXcgZV8oe2NvbW1hbmROYW1lOmprLGNvbW1hbmRQYXJhbTpuLm1vZGVsLGxhYmVsOm4udGl0bGUsd2l0aFRleHQ6dHJ1ZX0pfTt0Lm1vZGVsLmJpbmQoXCJpc09uXCIpLnRvKGUsXCJ2YWx1ZVwiLHQ9PnQ9PT1uLm1vZGVsKTtpZihuLnZpZXcmJm4udmlldy5zdHlsZXMpe3QubW9kZWwuc2V0KFwibGFiZWxTdHlsZVwiLGBmb250LWZhbWlseTogJHtuLnZpZXcuc3R5bGVzW1wiZm9udC1mYW1pbHlcIl19YCl9aS5hZGQodCl9cmV0dXJuIGl9Y2xhc3Mgcl8gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW3RfLG5fXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkZvbnRGYW1pbHlcIn19Y2xhc3Mgc18gZXh0ZW5kcyBFa3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LERrKX19ZnVuY3Rpb24gYV8odCl7cmV0dXJuIHQubWFwKGxfKS5maWx0ZXIodD0+ISF0KX1jb25zdCBjXz17dGlueTp7dGl0bGU6XCJUaW55XCIsbW9kZWw6XCJ0aW55XCIsdmlldzp7bmFtZTpcInNwYW5cIixjbGFzc2VzOlwidGV4dC10aW55XCIscHJpb3JpdHk6N319LHNtYWxsOnt0aXRsZTpcIlNtYWxsXCIsbW9kZWw6XCJzbWFsbFwiLHZpZXc6e25hbWU6XCJzcGFuXCIsY2xhc3NlczpcInRleHQtc21hbGxcIixwcmlvcml0eTo3fX0sYmlnOnt0aXRsZTpcIkJpZ1wiLG1vZGVsOlwiYmlnXCIsdmlldzp7bmFtZTpcInNwYW5cIixjbGFzc2VzOlwidGV4dC1iaWdcIixwcmlvcml0eTo3fX0saHVnZTp7dGl0bGU6XCJIdWdlXCIsbW9kZWw6XCJodWdlXCIsdmlldzp7bmFtZTpcInNwYW5cIixjbGFzc2VzOlwidGV4dC1odWdlXCIscHJpb3JpdHk6N319fTtmdW5jdGlvbiBsXyh0KXtpZih0eXBlb2YgdD09PVwib2JqZWN0XCIpe3JldHVybiB0fWlmKGNfW3RdKXtyZXR1cm4gY19bdF19aWYodD09PVwiZGVmYXVsdFwiKXtyZXR1cm57bW9kZWw6dW5kZWZpbmVkLHRpdGxlOlwiRGVmYXVsdFwifX1jb25zdCBlPXBhcnNlRmxvYXQodCk7aWYoaXNOYU4oZSkpe3JldHVybn1yZXR1cm4gZF8oZSl9ZnVuY3Rpb24gZF8odCl7Y29uc3QgZT1TdHJpbmcodCk7cmV0dXJue3RpdGxlOmUsbW9kZWw6dCx2aWV3OntuYW1lOlwic3BhblwiLHN0eWxlczp7XCJmb250LXNpemVcIjpgJHt0fXB4YH0scHJpb3JpdHk6N319fWNsYXNzIHVfIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJGb250U2l6ZUVkaXRpbmdcIn1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0LmNvbmZpZy5kZWZpbmUoRGsse29wdGlvbnM6W1widGlueVwiLFwic21hbGxcIixcImRlZmF1bHRcIixcImJpZ1wiLFwiaHVnZVwiXX0pO2NvbnN0IGU9YV8odGhpcy5lZGl0b3IuY29uZmlnLmdldChcImZvbnRTaXplLm9wdGlvbnNcIikpLmZpbHRlcih0PT50Lm1vZGVsKTtjb25zdCBpPXFrKERrLGUpO3QuY29udmVyc2lvbi5hdHRyaWJ1dGVUb0VsZW1lbnQoaSk7dC5jb21tYW5kcy5hZGQoRGssbmV3IHNfKHQpKX1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjt0Lm1vZGVsLnNjaGVtYS5leHRlbmQoXCIkdGV4dFwiLHthbGxvd0F0dHJpYnV0ZXM6RGt9KTt0Lm1vZGVsLnNjaGVtYS5zZXRBdHRyaWJ1dGVQcm9wZXJ0aWVzKERrLHtpc0Zvcm1hdHRpbmc6dHJ1ZSxjb3B5T25FbnRlcjp0cnVlfSl9fXZhciBoXz0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNOS44MTYgMTEuNUw3LjAzOCA0Ljc4NSA0LjI2MSAxMS41aDUuNTU1em0uNjIgMS41SDMuNjQxbC0xLjY2NiA0LjAyOEguMzEybDUuNzg5LTE0aDEuODc1bDUuNzg5IDE0aC0xLjY2M0wxMC40MzYgMTN6bTcuNTUgMi4yNzlsLjc3OS0uNzc5LjcwNy43MDctMi4yNjUgMi4yNjUtMi4xOTMtMi4yNjUuNzA3LS43MDcuNzY1Ljc2NVY0LjgyNWMwLS4wNDIgMC0uMDgzLjAwMi0uMTIzbC0uNzcuNzctLjcwNy0uNzA3TDE3LjIwNyAyLjVsMi4yNjUgMi4yNjUtLjcwNy43MDctLjc4Mi0uNzgyYy4wMDIuMDQzLjAwMy4wODkuMDAzLjEzNXYxMC40NTR6XCIvPjwvc3ZnPic7dmFyIGZfPWkoNTMpO2NsYXNzIGdfIGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7Y29uc3QgaT10aGlzLl9nZXRMb2NhbGl6ZWRPcHRpb25zKCk7Y29uc3Qgbj10LmNvbW1hbmRzLmdldChEayk7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChEayxvPT57Y29uc3Qgcj1XYihvKTtVYihyLG1fKGksbikpO3IuYnV0dG9uVmlldy5zZXQoe2xhYmVsOmUoXCJqcVwiKSxpY29uOmhfLHRvb2x0aXA6dHJ1ZX0pO3IuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOltcImNrLWZvbnQtc2l6ZS1kcm9wZG93blwiXX19KTtyLmJpbmQoXCJpc0VuYWJsZWRcIikudG8obik7dGhpcy5saXN0ZW5UbyhyLFwiZXhlY3V0ZVwiLGU9Pnt0LmV4ZWN1dGUoZS5zb3VyY2UuY29tbWFuZE5hbWUse3ZhbHVlOmUuc291cmNlLmNvbW1hbmRQYXJhbX0pO3QuZWRpdGluZy52aWV3LmZvY3VzKCl9KTtyZXR1cm4gcn0pfV9nZXRMb2NhbGl6ZWRPcHRpb25zKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDtjb25zdCBpPXtEZWZhdWx0OmUoXCJqcFwiKSxUaW55OmUoXCJqclwiKSxTbWFsbDplKFwianNcIiksQmlnOmUoXCJqdFwiKSxIdWdlOmUoXCJqdVwiKX07Y29uc3Qgbj1hXyh0LmNvbmZpZy5nZXQoRGspLm9wdGlvbnMpO3JldHVybiBuLm1hcCh0PT57Y29uc3QgZT1pW3QudGl0bGVdO2lmKGUmJmUhPXQudGl0bGUpe3Q9T2JqZWN0LmFzc2lnbih7fSx0LHt0aXRsZTplfSl9cmV0dXJuIHR9KX19ZnVuY3Rpb24gbV8odCxlKXtjb25zdCBpPW5ldyB5cztmb3IoY29uc3QgbiBvZiB0KXtjb25zdCB0PXt0eXBlOlwiYnV0dG9uXCIsbW9kZWw6bmV3IGVfKHtjb21tYW5kTmFtZTpEayxjb21tYW5kUGFyYW06bi5tb2RlbCxsYWJlbDpuLnRpdGxlLGNsYXNzOlwiY2stZm9udHNpemUtb3B0aW9uXCIsd2l0aFRleHQ6dHJ1ZX0pfTtpZihuLnZpZXcmJm4udmlldy5zdHlsZXMpe3QubW9kZWwuc2V0KFwibGFiZWxTdHlsZVwiLGBmb250LXNpemU6JHtuLnZpZXcuc3R5bGVzW1wiZm9udC1zaXplXCJdfWApfWlmKG4udmlldyYmbi52aWV3LmNsYXNzZXMpe3QubW9kZWwuc2V0KFwiY2xhc3NcIixgJHt0Lm1vZGVsLmNsYXNzfSAke24udmlldy5jbGFzc2VzfWApfXQubW9kZWwuYmluZChcImlzT25cIikudG8oZSxcInZhbHVlXCIsdD0+dD09PW4ubW9kZWwpO2kuYWRkKHQpfXJldHVybiBpfWNsYXNzIHBfIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVyblt1XyxnX119c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJGb250U2l6ZVwifX1jbGFzcyBiXyBleHRlbmRzIEVre2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsSGspfX1jbGFzcyB3XyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiRm9udENvbG9yRWRpdGluZ1wifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3QuY29uZmlnLmRlZmluZShIayx7Y29sb3JzOlt7Y29sb3I6XCJoc2woMCwgMCUsIDAlKVwiLGxhYmVsOlwiQmxhY2tcIn0se2NvbG9yOlwiaHNsKDAsIDAlLCAzMCUpXCIsbGFiZWw6XCJEaW0gZ3JleVwifSx7Y29sb3I6XCJoc2woMCwgMCUsIDYwJSlcIixsYWJlbDpcIkdyZXlcIn0se2NvbG9yOlwiaHNsKDAsIDAlLCA5MCUpXCIsbGFiZWw6XCJMaWdodCBncmV5XCJ9LHtjb2xvcjpcImhzbCgwLCAwJSwgMTAwJSlcIixsYWJlbDpcIldoaXRlXCIsaGFzQm9yZGVyOnRydWV9LHtjb2xvcjpcImhzbCgwLCA3NSUsIDYwJSlcIixsYWJlbDpcIlJlZFwifSx7Y29sb3I6XCJoc2woMzAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiT3JhbmdlXCJ9LHtjb2xvcjpcImhzbCg2MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJZZWxsb3dcIn0se2NvbG9yOlwiaHNsKDkwLCA3NSUsIDYwJSlcIixsYWJlbDpcIkxpZ2h0IGdyZWVuXCJ9LHtjb2xvcjpcImhzbCgxMjAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiR3JlZW5cIn0se2NvbG9yOlwiaHNsKDE1MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJBcXVhbWFyaW5lXCJ9LHtjb2xvcjpcImhzbCgxODAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiVHVycXVvaXNlXCJ9LHtjb2xvcjpcImhzbCgyMTAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiTGlnaHQgYmx1ZVwifSx7Y29sb3I6XCJoc2woMjQwLCA3NSUsIDYwJSlcIixsYWJlbDpcIkJsdWVcIn0se2NvbG9yOlwiaHNsKDI3MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJQdXJwbGVcIn1dLGNvbHVtbnM6NX0pO3QuY29udmVyc2lvbi5mb3IoXCJ1cGNhc3RcIikuZWxlbWVudFRvQXR0cmlidXRlKHt2aWV3OntuYW1lOlwic3BhblwiLHN0eWxlczp7Y29sb3I6L1tcXHNcXFNdKy99fSxtb2RlbDp7a2V5OkhrLHZhbHVlOlVrKFwiY29sb3JcIil9fSk7dC5jb252ZXJzaW9uLmZvcihcImRvd25jYXN0XCIpLmF0dHJpYnV0ZVRvRWxlbWVudCh7bW9kZWw6SGssdmlldzokayhcImNvbG9yXCIpfSk7dC5jb21tYW5kcy5hZGQoSGssbmV3IGJfKHQpKTt0Lm1vZGVsLnNjaGVtYS5leHRlbmQoXCIkdGV4dFwiLHthbGxvd0F0dHJpYnV0ZXM6SGt9KTt0Lm1vZGVsLnNjaGVtYS5zZXRBdHRyaWJ1dGVQcm9wZXJ0aWVzKEhrLHtpc0Zvcm1hdHRpbmc6dHJ1ZSxjb3B5T25FbnRlcjp0cnVlfSl9fWZ1bmN0aW9uIGtfKHQsZSl7Y29uc3QgaT10LnQ7Y29uc3Qgbj17QmxhY2s6aShcImx4XCIpLFwiRGltIGdyZXlcIjppKFwibHlcIiksR3JleTppKFwibHpcIiksXCJMaWdodCBncmV5XCI6aShcIm1hXCIpLFdoaXRlOmkoXCJtYlwiKSxSZWQ6aShcIm1jXCIpLE9yYW5nZTppKFwibWRcIiksWWVsbG93OmkoXCJtZVwiKSxcIkxpZ2h0IGdyZWVuXCI6aShcIm1mXCIpLEdyZWVuOmkoXCJtZ1wiKSxBcXVhbWFyaW5lOmkoXCJtaFwiKSxUdXJxdW9pc2U6aShcIm1pXCIpLFwiTGlnaHQgYmx1ZVwiOmkoXCJtalwiKSxCbHVlOmkoXCJta1wiKSxQdXJwbGU6aShcIm1sXCIpfTtyZXR1cm4gZS5tYXAodD0+e2NvbnN0IGU9blt0LmxhYmVsXTtpZihlJiZlIT10LmxhYmVsKXt0LmxhYmVsPWV9cmV0dXJuIHR9KX1mdW5jdGlvbiBfXyh0KXtyZXR1cm4gdC5tYXAodl8pLmZpbHRlcih0PT4hIXQpfWZ1bmN0aW9uIHZfKHQpe2lmKHR5cGVvZiB0PT09XCJzdHJpbmdcIil7cmV0dXJue21vZGVsOnQucmVwbGFjZSgvIC9nLFwiXCIpLGxhYmVsOnQsaGFzQm9yZGVyOmZhbHNlLHZpZXc6e25hbWU6XCJzcGFuXCIsc3R5bGVzOntjb2xvcjp0fX19fWVsc2V7cmV0dXJue21vZGVsOnQuY29sb3IucmVwbGFjZSgvIC9nLFwiXCIpLGxhYmVsOnQubGFiZWx8fHQuY29sb3IsaGFzQm9yZGVyOnQuaGFzQm9yZGVyPT09dW5kZWZpbmVkP2ZhbHNlOnQuaGFzQm9yZGVyLHZpZXc6e25hbWU6XCJzcGFuXCIsc3R5bGVzOntjb2xvcjpgJHt0LmNvbG9yfWB9fX19fWNsYXNzIHlfIGV4dGVuZHMgbXB7Y29uc3RydWN0b3IodCx7Y29tbWFuZE5hbWU6ZSxpY29uOmksY29tcG9uZW50TmFtZTpuLGRyb3Bkb3duTGFiZWw6b30pe3N1cGVyKHQpO3RoaXMuY29tbWFuZE5hbWU9ZTt0aGlzLmNvbXBvbmVudE5hbWU9bjt0aGlzLmljb249aTt0aGlzLmRyb3Bkb3duTGFiZWw9bzt0aGlzLmNvbHVtbnM9dC5jb25maWcuZ2V0KGAke3RoaXMuY29tcG9uZW50TmFtZX0uY29sdW1uc2ApO3RoaXMuY29sb3JUYWJsZVZpZXd9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmxvY2FsZTtjb25zdCBpPWUudDtjb25zdCBuPXQuY29tbWFuZHMuZ2V0KHRoaXMuY29tbWFuZE5hbWUpO2NvbnN0IG89X18odC5jb25maWcuZ2V0KHRoaXMuY29tcG9uZW50TmFtZSkuY29sb3JzKTtjb25zdCByPWtfKGUsbyk7Y29uc3Qgcz10LmNvbmZpZy5nZXQoYCR7dGhpcy5jb21wb25lbnROYW1lfS5kb2N1bWVudENvbG9yc2ApO3QudWkuY29tcG9uZW50RmFjdG9yeS5hZGQodGhpcy5jb21wb25lbnROYW1lLGU9Pntjb25zdCBvPVdiKGUpO3RoaXMuY29sb3JUYWJsZVZpZXc9R2soe2Ryb3Bkb3duVmlldzpvLGNvbG9yczpyLm1hcCh0PT4oe2xhYmVsOnQubGFiZWwsY29sb3I6dC5tb2RlbCxvcHRpb25zOntoYXNCb3JkZXI6dC5oYXNCb3JkZXJ9fSkpLGNvbHVtbnM6dGhpcy5jb2x1bW5zLHJlbW92ZUJ1dHRvbkxhYmVsOmkoXCJsaVwiKSxkb2N1bWVudENvbG9yc0xhYmVsOnMhPT0wP2koXCJsalwiKTp1bmRlZmluZWQsZG9jdW1lbnRDb2xvcnNDb3VudDpzPT09dW5kZWZpbmVkP3RoaXMuY29sdW1uczpzfSk7dGhpcy5jb2xvclRhYmxlVmlldy5iaW5kKFwic2VsZWN0ZWRDb2xvclwiKS50byhuLFwidmFsdWVcIik7by5idXR0b25WaWV3LnNldCh7bGFiZWw6dGhpcy5kcm9wZG93bkxhYmVsLGljb246dGhpcy5pY29uLHRvb2x0aXA6dHJ1ZX0pO28uZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOlwiY2stY29sb3ItdWktZHJvcGRvd25cIn19KTtvLmJpbmQoXCJpc0VuYWJsZWRcIikudG8obik7by5vbihcImV4ZWN1dGVcIiwoZSxpKT0+e3QuZXhlY3V0ZSh0aGlzLmNvbW1hbmROYW1lLGkpO3QuZWRpdGluZy52aWV3LmZvY3VzKCl9KTtvLm9uKFwiY2hhbmdlOmlzT3BlblwiLChlLGksbik9PntvLmNvbG9yVGFibGVWaWV3LmFwcGVuZEdyaWRzKCk7aWYobil7aWYocyE9PTApe3RoaXMuY29sb3JUYWJsZVZpZXcudXBkYXRlRG9jdW1lbnRDb2xvcnModC5tb2RlbCx0aGlzLmNvbXBvbmVudE5hbWUpfXRoaXMuY29sb3JUYWJsZVZpZXcudXBkYXRlU2VsZWN0ZWRDb2xvcnMoKX19KTtyZXR1cm4gb30pfX12YXIgeF89Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTEyLjQgMTAuM0wxMCA0LjVsLTIuNCA1LjhoNC44em0uNSAxLjJINy4xTDUuNyAxNUg0LjJsNS0xMmgxLjZsNSAxMmgtMS41TDEzIDExLjV6bTMuMSA3SDRhMSAxIDAgMCAxIDAtMmgxMmExIDEgMCAwIDEgMCAyelwiLz48L3N2Zz4nO2NsYXNzIENfIGV4dGVuZHMgeV97Y29uc3RydWN0b3IodCl7Y29uc3QgZT10LmxvY2FsZS50O3N1cGVyKHQse2NvbW1hbmROYW1lOkhrLGNvbXBvbmVudE5hbWU6SGssaWNvbjp4Xyxkcm9wZG93bkxhYmVsOmUoXCJqdlwiKX0pfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiRm9udENvbG9yVUlcIn19Y2xhc3MgQV8gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW3dfLENfXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkZvbnRDb2xvclwifX1jbGFzcyBUXyBleHRlbmRzIEVre2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsV2spfX1jbGFzcyBQXyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiRm9udEJhY2tncm91bmRDb2xvckVkaXRpbmdcIn1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0LmNvbmZpZy5kZWZpbmUoV2sse2NvbG9yczpbe2NvbG9yOlwiaHNsKDAsIDAlLCAwJSlcIixsYWJlbDpcIkJsYWNrXCJ9LHtjb2xvcjpcImhzbCgwLCAwJSwgMzAlKVwiLGxhYmVsOlwiRGltIGdyZXlcIn0se2NvbG9yOlwiaHNsKDAsIDAlLCA2MCUpXCIsbGFiZWw6XCJHcmV5XCJ9LHtjb2xvcjpcImhzbCgwLCAwJSwgOTAlKVwiLGxhYmVsOlwiTGlnaHQgZ3JleVwifSx7Y29sb3I6XCJoc2woMCwgMCUsIDEwMCUpXCIsbGFiZWw6XCJXaGl0ZVwiLGhhc0JvcmRlcjp0cnVlfSx7Y29sb3I6XCJoc2woMCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJSZWRcIn0se2NvbG9yOlwiaHNsKDMwLCA3NSUsIDYwJSlcIixsYWJlbDpcIk9yYW5nZVwifSx7Y29sb3I6XCJoc2woNjAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiWWVsbG93XCJ9LHtjb2xvcjpcImhzbCg5MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJMaWdodCBncmVlblwifSx7Y29sb3I6XCJoc2woMTIwLCA3NSUsIDYwJSlcIixsYWJlbDpcIkdyZWVuXCJ9LHtjb2xvcjpcImhzbCgxNTAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiQXF1YW1hcmluZVwifSx7Y29sb3I6XCJoc2woMTgwLCA3NSUsIDYwJSlcIixsYWJlbDpcIlR1cnF1b2lzZVwifSx7Y29sb3I6XCJoc2woMjEwLCA3NSUsIDYwJSlcIixsYWJlbDpcIkxpZ2h0IGJsdWVcIn0se2NvbG9yOlwiaHNsKDI0MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJCbHVlXCJ9LHtjb2xvcjpcImhzbCgyNzAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiUHVycGxlXCJ9XSxjb2x1bW5zOjV9KTt0LmNvbnZlcnNpb24uZm9yKFwidXBjYXN0XCIpLmVsZW1lbnRUb0F0dHJpYnV0ZSh7dmlldzp7bmFtZTpcInNwYW5cIixzdHlsZXM6e1wiYmFja2dyb3VuZC1jb2xvclwiOi9bXFxzXFxTXSsvfX0sbW9kZWw6e2tleTpXayx2YWx1ZTpVayhcImJhY2tncm91bmQtY29sb3JcIil9fSk7dC5jb252ZXJzaW9uLmZvcihcImRvd25jYXN0XCIpLmF0dHJpYnV0ZVRvRWxlbWVudCh7bW9kZWw6V2ssdmlldzokayhcImJhY2tncm91bmQtY29sb3JcIil9KTt0LmNvbW1hbmRzLmFkZChXayxuZXcgVF8odCkpO3QubW9kZWwuc2NoZW1hLmV4dGVuZChcIiR0ZXh0XCIse2FsbG93QXR0cmlidXRlczpXa30pO3QubW9kZWwuc2NoZW1hLnNldEF0dHJpYnV0ZVByb3BlcnRpZXMoV2sse2lzRm9ybWF0dGluZzp0cnVlLGNvcHlPbkVudGVyOnRydWV9KX19dmFyIFNfPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk00IDJoMTJhMiAyIDAgMCAxIDIgMnYxMmEyIDIgMCAwIDEtMiAySDRhMiAyIDAgMCAxLTItMlY0YTIgMiAwIDAgMSAyLTJ6bTguMzggOS4yNjJINy42MkwxMCA1LjUwNmwyLjM4IDUuNzU2em0uNTMyIDEuMjg1TDE0LjM0IDE2aDEuNDI2TDEwLjgwNCA0SDkuMTk2TDQuMjM0IDE2SDUuNjZsMS40MjgtMy40NTNoNS44MjR6XCIvPjwvc3ZnPic7Y2xhc3MgRV8gZXh0ZW5kcyB5X3tjb25zdHJ1Y3Rvcih0KXtjb25zdCBlPXQubG9jYWxlLnQ7c3VwZXIodCx7Y29tbWFuZE5hbWU6V2ssY29tcG9uZW50TmFtZTpXayxpY29uOlNfLGRyb3Bkb3duTGFiZWw6ZShcImp3XCIpfSl9c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJGb250QmFja2dyb3VuZENvbG9yVUlcIn19Y2xhc3MgUl8gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW1BfLEVfXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkZvbnRCYWNrZ3JvdW5kQ29sb3JcIn19Y2xhc3MgT18gZXh0ZW5kcyBqd3tyZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBlPXQuZG9jdW1lbnQ7Y29uc3QgaT1XdyhlLnNlbGVjdGlvbi5nZXRTZWxlY3RlZEJsb2NrcygpKTt0aGlzLnZhbHVlPSEhaSYmaS5pcyhcInBhcmFncmFwaFwiKTt0aGlzLmlzRW5hYmxlZD0hIWkmJklfKGksdC5zY2hlbWEpfWV4ZWN1dGUodD17fSl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQ7ZS5jaGFuZ2Uobj0+e2NvbnN0IG89KHQuc2VsZWN0aW9ufHxpLnNlbGVjdGlvbikuZ2V0U2VsZWN0ZWRCbG9ja3MoKTtmb3IoY29uc3QgdCBvZiBvKXtpZighdC5pcyhcInBhcmFncmFwaFwiKSYmSV8odCxlLnNjaGVtYSkpe24ucmVuYW1lKHQsXCJwYXJhZ3JhcGhcIil9fX0pfX1mdW5jdGlvbiBJXyh0LGUpe3JldHVybiBlLmNoZWNrQ2hpbGQodC5wYXJlbnQsXCJwYXJhZ3JhcGhcIikmJiFlLmlzT2JqZWN0KHQpfWNsYXNzIFZfIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJQYXJhZ3JhcGhcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQubW9kZWw7Y29uc3QgaT10LmRhdGE7dC5jb21tYW5kcy5hZGQoXCJwYXJhZ3JhcGhcIixuZXcgT18odCkpO2Uuc2NoZW1hLnJlZ2lzdGVyKFwicGFyYWdyYXBoXCIse2luaGVyaXRBbGxGcm9tOlwiJGJsb2NrXCJ9KTt0LmNvbnZlcnNpb24uZWxlbWVudFRvRWxlbWVudCh7bW9kZWw6XCJwYXJhZ3JhcGhcIix2aWV3OlwicFwifSk7dC5jb252ZXJzaW9uLmZvcihcInVwY2FzdFwiKS5lbGVtZW50VG9FbGVtZW50KHttb2RlbDoodCxlKT0+e2lmKCFWXy5wYXJhZ3JhcGhMaWtlRWxlbWVudHMuaGFzKHQubmFtZSkpe3JldHVybiBudWxsfWlmKHQuaXNFbXB0eSl7cmV0dXJuIG51bGx9cmV0dXJuIGUuY3JlYXRlRWxlbWVudChcInBhcmFncmFwaFwiKX0sY29udmVydGVyUHJpb3JpdHk6XCJsb3dcIn0pO2kudXBjYXN0RGlzcGF0Y2hlci5vbihcImVsZW1lbnRcIiwodCxlLGkpPT57aWYoIWkuY29uc3VtYWJsZS50ZXN0KGUudmlld0l0ZW0se25hbWU6ZS52aWV3SXRlbS5uYW1lfSkpe3JldHVybn1pZihNXyhlLnZpZXdJdGVtLGUubW9kZWxDdXJzb3IsaS5zY2hlbWEpKXtPYmplY3QuYXNzaWduKGUsTl8oZS52aWV3SXRlbSxlLm1vZGVsQ3Vyc29yLGkpKX19LHtwcmlvcml0eTpcImxvd1wifSk7aS51cGNhc3REaXNwYXRjaGVyLm9uKFwidGV4dFwiLCh0LGUsaSk9PntpZihlLm1vZGVsUmFuZ2Upe3JldHVybn1pZihNXyhlLnZpZXdJdGVtLGUubW9kZWxDdXJzb3IsaS5zY2hlbWEpKXtPYmplY3QuYXNzaWduKGUsTl8oZS52aWV3SXRlbSxlLm1vZGVsQ3Vyc29yLGkpKX19LHtwcmlvcml0eTpcImxvd2VzdFwifSk7ZS5kb2N1bWVudC5yZWdpc3RlclBvc3RGaXhlcih0PT50aGlzLl9hdXRvcGFyYWdyYXBoRW1wdHlSb290cyh0KSk7dC5kYXRhLm9uKFwicmVhZHlcIiwoKT0+e2UuZW5xdWV1ZUNoYW5nZShcInRyYW5zcGFyZW50XCIsdD0+dGhpcy5fYXV0b3BhcmFncmFwaEVtcHR5Um9vdHModCkpfSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pfV9hdXRvcGFyYWdyYXBoRW1wdHlSb290cyh0KXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsO2Zvcihjb25zdCBpIG9mIGUuZG9jdW1lbnQuZ2V0Um9vdE5hbWVzKCkpe2NvbnN0IG49ZS5kb2N1bWVudC5nZXRSb290KGkpO2lmKG4uaXNFbXB0eSYmbi5yb290TmFtZSE9XCIkZ3JhdmV5YXJkXCIpe2lmKGUuc2NoZW1hLmNoZWNrQ2hpbGQobixcInBhcmFncmFwaFwiKSl7dC5pbnNlcnRFbGVtZW50KFwicGFyYWdyYXBoXCIsbik7cmV0dXJuIHRydWV9fX19fVZfLnBhcmFncmFwaExpa2VFbGVtZW50cz1uZXcgU2V0KFtcImJsb2NrcXVvdGVcIixcImRkXCIsXCJkaXZcIixcImR0XCIsXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCIsXCJsaVwiLFwicFwiLFwidGRcIl0pO2Z1bmN0aW9uIE5fKHQsZSxpKXtjb25zdCBuPWkud3JpdGVyLmNyZWF0ZUVsZW1lbnQoXCJwYXJhZ3JhcGhcIik7aS53cml0ZXIuaW5zZXJ0KG4sZSk7cmV0dXJuIGkuY29udmVydEl0ZW0odCxpLndyaXRlci5jcmVhdGVQb3NpdGlvbkF0KG4sMCkpfWZ1bmN0aW9uIE1fKHQsZSxpKXtjb25zdCBuPWkuY3JlYXRlQ29udGV4dChlKTtpZighaS5jaGVja0NoaWxkKG4sXCJwYXJhZ3JhcGhcIikpe3JldHVybiBmYWxzZX1pZighaS5jaGVja0NoaWxkKG4ucHVzaChcInBhcmFncmFwaFwiKSx0KSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfWNsYXNzIEJfIGV4dGVuZHMgand7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLm1vZGVsRWxlbWVudHM9ZX1yZWZyZXNoKCl7Y29uc3QgdD1Xdyh0aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7dGhpcy52YWx1ZT0hIXQmJnRoaXMubW9kZWxFbGVtZW50cy5pbmNsdWRlcyh0Lm5hbWUpJiZ0Lm5hbWU7dGhpcy5pc0VuYWJsZWQ9ISF0JiZ0aGlzLm1vZGVsRWxlbWVudHMuc29tZShlPT56Xyh0LGUsdGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hKSl9ZXhlY3V0ZSh0KXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IGk9ZS5kb2N1bWVudDtjb25zdCBuPXQudmFsdWU7ZS5jaGFuZ2UodD0+e2NvbnN0IG89QXJyYXkuZnJvbShpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZEJsb2NrcygpKS5maWx0ZXIodD0+el8odCxuLGUuc2NoZW1hKSk7Zm9yKGNvbnN0IGUgb2Ygbyl7aWYoIWUuaXMobikpe3QucmVuYW1lKGUsbil9fX0pfX1mdW5jdGlvbiB6Xyh0LGUsaSl7cmV0dXJuIGkuY2hlY2tDaGlsZCh0LnBhcmVudCxlKSYmIWkuaXNPYmplY3QodCl9Y29uc3QgTF89XCJwYXJhZ3JhcGhcIjtjbGFzcyBGXyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSGVhZGluZ0VkaXRpbmdcIn1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0LmNvbmZpZy5kZWZpbmUoXCJoZWFkaW5nXCIse29wdGlvbnM6W3ttb2RlbDpcInBhcmFncmFwaFwiLHRpdGxlOlwiUGFyYWdyYXBoXCIsY2xhc3M6XCJjay1oZWFkaW5nX3BhcmFncmFwaFwifSx7bW9kZWw6XCJoZWFkaW5nMVwiLHZpZXc6XCJoMlwiLHRpdGxlOlwiSGVhZGluZyAxXCIsY2xhc3M6XCJjay1oZWFkaW5nX2hlYWRpbmcxXCJ9LHttb2RlbDpcImhlYWRpbmcyXCIsdmlldzpcImgzXCIsdGl0bGU6XCJIZWFkaW5nIDJcIixjbGFzczpcImNrLWhlYWRpbmdfaGVhZGluZzJcIn0se21vZGVsOlwiaGVhZGluZzNcIix2aWV3OlwiaDRcIix0aXRsZTpcIkhlYWRpbmcgM1wiLGNsYXNzOlwiY2staGVhZGluZ19oZWFkaW5nM1wifV19KX1zdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW1ZfXX1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQuY29uZmlnLmdldChcImhlYWRpbmcub3B0aW9uc1wiKTtjb25zdCBpPVtdO2Zvcihjb25zdCBuIG9mIGUpe2lmKG4ubW9kZWwhPT1MXyl7dC5tb2RlbC5zY2hlbWEucmVnaXN0ZXIobi5tb2RlbCx7aW5oZXJpdEFsbEZyb206XCIkYmxvY2tcIn0pO3QuY29udmVyc2lvbi5lbGVtZW50VG9FbGVtZW50KG4pO2kucHVzaChuLm1vZGVsKX19dGhpcy5fYWRkRGVmYXVsdEgxQ29udmVyc2lvbih0KTt0LmNvbW1hbmRzLmFkZChcImhlYWRpbmdcIixuZXcgQl8odCxpKSl9YWZ0ZXJJbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQuY29tbWFuZHMuZ2V0KFwiZW50ZXJcIik7Y29uc3QgaT10LmNvbmZpZy5nZXQoXCJoZWFkaW5nLm9wdGlvbnNcIik7aWYoZSl7dGhpcy5saXN0ZW5UbyhlLFwiYWZ0ZXJFeGVjdXRlXCIsKGUsbik9Pntjb25zdCBvPXQubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldEZpcnN0UG9zaXRpb24oKS5wYXJlbnQ7Y29uc3Qgcj1pLnNvbWUodD0+by5pcyh0Lm1vZGVsKSk7aWYociYmIW8uaXMoTF8pJiZvLmNoaWxkQ291bnQ9PT0wKXtuLndyaXRlci5yZW5hbWUobyxMXyl9fSl9fV9hZGREZWZhdWx0SDFDb252ZXJzaW9uKHQpe3QuY29udmVyc2lvbi5mb3IoXCJ1cGNhc3RcIikuZWxlbWVudFRvRWxlbWVudCh7bW9kZWw6XCJoZWFkaW5nMVwiLHZpZXc6XCJoMVwiLGNvbnZlcnRlclByaW9yaXR5Om9zLmdldChcImxvd1wiKSsxfSl9fWZ1bmN0aW9uIERfKHQpe2NvbnN0IGU9dC50O2NvbnN0IGk9e1BhcmFncmFwaDplKFwibnlcIiksXCJIZWFkaW5nIDFcIjplKFwibnpcIiksXCJIZWFkaW5nIDJcIjplKFwib2FcIiksXCJIZWFkaW5nIDNcIjplKFwib2JcIiksXCJIZWFkaW5nIDRcIjplKFwib2NcIiksXCJIZWFkaW5nIDVcIjplKFwib2RcIiksXCJIZWFkaW5nIDZcIjplKFwib2VcIil9O3JldHVybiB0LmNvbmZpZy5nZXQoXCJoZWFkaW5nLm9wdGlvbnNcIikubWFwKHQ9Pntjb25zdCBlPWlbdC50aXRsZV07aWYoZSYmZSE9dC50aXRsZSl7dC50aXRsZT1lfXJldHVybiB0fSl9dmFyIGpfPWkoMTEpO2NsYXNzIEhfIGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7Y29uc3QgaT1EXyh0KTtjb25zdCBuPWUoXCJqZFwiKTtjb25zdCBvPWUoXCJqZVwiKTt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFwiaGVhZGluZ1wiLGU9Pntjb25zdCByPXt9O2NvbnN0IHM9bmV3IHlzO2NvbnN0IGE9dC5jb21tYW5kcy5nZXQoXCJoZWFkaW5nXCIpO2NvbnN0IGM9dC5jb21tYW5kcy5nZXQoXCJwYXJhZ3JhcGhcIik7Y29uc3QgbD1bYV07Zm9yKGNvbnN0IHQgb2YgaSl7Y29uc3QgZT17dHlwZTpcImJ1dHRvblwiLG1vZGVsOm5ldyBlXyh7bGFiZWw6dC50aXRsZSxjbGFzczp0LmNsYXNzLHdpdGhUZXh0OnRydWV9KX07aWYodC5tb2RlbD09PVwicGFyYWdyYXBoXCIpe2UubW9kZWwuYmluZChcImlzT25cIikudG8oYyxcInZhbHVlXCIpO2UubW9kZWwuc2V0KFwiY29tbWFuZE5hbWVcIixcInBhcmFncmFwaFwiKTtsLnB1c2goYyl9ZWxzZXtlLm1vZGVsLmJpbmQoXCJpc09uXCIpLnRvKGEsXCJ2YWx1ZVwiLGU9PmU9PT10Lm1vZGVsKTtlLm1vZGVsLnNldCh7Y29tbWFuZE5hbWU6XCJoZWFkaW5nXCIsY29tbWFuZFZhbHVlOnQubW9kZWx9KX1zLmFkZChlKTtyW3QubW9kZWxdPXQudGl0bGV9Y29uc3QgZD1XYihlKTtVYihkLHMpO2QuYnV0dG9uVmlldy5zZXQoe2lzT246ZmFsc2Usd2l0aFRleHQ6dHJ1ZSx0b29sdGlwOm99KTtkLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczpbXCJjay1oZWFkaW5nLWRyb3Bkb3duXCJdfX0pO2QuYmluZChcImlzRW5hYmxlZFwiKS50b01hbnkobCxcImlzRW5hYmxlZFwiLCguLi50KT0+dC5zb21lKHQ9PnQpKTtkLmJ1dHRvblZpZXcuYmluZChcImxhYmVsXCIpLnRvKGEsXCJ2YWx1ZVwiLGMsXCJ2YWx1ZVwiLCh0LGUpPT57Y29uc3QgaT10fHxlJiZcInBhcmFncmFwaFwiO3JldHVybiByW2ldP3JbaV06bn0pO3RoaXMubGlzdGVuVG8oZCxcImV4ZWN1dGVcIixlPT57dC5leGVjdXRlKGUuc291cmNlLmNvbW1hbmROYW1lLGUuc291cmNlLmNvbW1hbmRWYWx1ZT97dmFsdWU6ZS5zb3VyY2UuY29tbWFuZFZhbHVlfTp1bmRlZmluZWQpO3QuZWRpdGluZy52aWV3LmZvY3VzKCl9KTtyZXR1cm4gZH0pfX1jbGFzcyBXXyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bRl8sSF9dfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSGVhZGluZ1wifX1jbGFzcyBxX3tjb25zdHJ1Y3Rvcigpe3RoaXMuX3N0YWNrPVtdfWFkZCh0LGUpe2NvbnN0IGk9dGhpcy5fc3RhY2s7Y29uc3Qgbj1pWzBdO3RoaXMuX2luc2VydERlc2NyaXB0b3IodCk7Y29uc3Qgbz1pWzBdO2lmKG4hPT1vJiYhVV8obixvKSl7dGhpcy5maXJlKFwiY2hhbmdlOnRvcFwiLHtvbGREZXNjcmlwdG9yOm4sbmV3RGVzY3JpcHRvcjpvLHdyaXRlcjplfSl9fXJlbW92ZSh0LGUpe2NvbnN0IGk9dGhpcy5fc3RhY2s7Y29uc3Qgbj1pWzBdO3RoaXMuX3JlbW92ZURlc2NyaXB0b3IodCk7Y29uc3Qgbz1pWzBdO2lmKG4hPT1vJiYhVV8obixvKSl7dGhpcy5maXJlKFwiY2hhbmdlOnRvcFwiLHtvbGREZXNjcmlwdG9yOm4sbmV3RGVzY3JpcHRvcjpvLHdyaXRlcjplfSl9fV9pbnNlcnREZXNjcmlwdG9yKHQpe2NvbnN0IGU9dGhpcy5fc3RhY2s7Y29uc3QgaT1lLmZpbmRJbmRleChlPT5lLmlkPT09dC5pZCk7aWYoVV8odCxlW2ldKSl7cmV0dXJufWlmKGk+LTEpe2Uuc3BsaWNlKGksMSl9bGV0IG49MDt3aGlsZShlW25dJiYkXyhlW25dLHQpKXtuKyt9ZS5zcGxpY2UobiwwLHQpfV9yZW1vdmVEZXNjcmlwdG9yKHQpe2NvbnN0IGU9dGhpcy5fc3RhY2s7Y29uc3QgaT1lLmZpbmRJbmRleChlPT5lLmlkPT09dCk7aWYoaT4tMSl7ZS5zcGxpY2UoaSwxKX19fXZzKHFfLGRzKTtmdW5jdGlvbiBVXyh0LGUpe3JldHVybiB0JiZlJiZ0LnByaW9yaXR5PT1lLnByaW9yaXR5JiZHXyh0LmNsYXNzZXMpPT1HXyhlLmNsYXNzZXMpfWZ1bmN0aW9uICRfKHQsZSl7aWYodC5wcmlvcml0eT5lLnByaW9yaXR5KXtyZXR1cm4gdHJ1ZX1lbHNlIGlmKHQucHJpb3JpdHk8ZS5wcmlvcml0eSl7cmV0dXJuIGZhbHNlfXJldHVybiBHXyh0LmNsYXNzZXMpPkdfKGUuY2xhc3Nlcyl9ZnVuY3Rpb24gR18odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dC5zb3J0KCkuam9pbihcIixcIik6dH12YXIgS189Jzxzdmcgdmlld0JveD1cIjAgMCAxNiAxNlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTQgMHYxSDF2M0gwVi41QS41LjUgMCAwIDEgLjUgMEg0em04IDBoMy41YS41LjUgMCAwIDEgLjUuNVY0aC0xVjFoLTNWMHpNNCAxNkguNWEuNS41IDAgMCAxLS41LS41VjEyaDF2M2gzdjF6bTggMHYtMWgzdi0zaDF2My41YS41LjUgMCAwIDEtLjUuNUgxMnpcIi8+PHBhdGggZmlsbC1vcGFjaXR5PVwiLjI1NlwiIGQ9XCJNMSAxaDE0djE0SDF6XCIvPjxnIGNsYXNzPVwiY2staWNvbl9fc2VsZWN0ZWQtaW5kaWNhdG9yXCI+PHBhdGggZD1cIk03IDBoMnYxSDdWMHpNMCA3aDF2MkgwVjd6bTE1IDBoMXYyaC0xVjd6bS04IDhoMnYxSDd2LTF6XCIvPjxwYXRoIGZpbGwtb3BhY2l0eT1cIi4yNTRcIiBkPVwiTTEgMWgxNHYxNEgxelwiLz48L2c+PC9zdmc+Jztjb25zdCBKXz1cImNrLXdpZGdldFwiO2NvbnN0IFlfPVwiY2std2lkZ2V0X3NlbGVjdGVkXCI7ZnVuY3Rpb24gUV8odCl7aWYoIXQuaXMoXCJlbGVtZW50XCIpKXtyZXR1cm4gZmFsc2V9cmV0dXJuISF0LmdldEN1c3RvbVByb3BlcnR5KFwid2lkZ2V0XCIpfWZ1bmN0aW9uIFhfKHQsZSxpPXt9KXtpZighQWwuaXNFZGdlKXtlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLFwiZmFsc2VcIix0KX1lLmFkZENsYXNzKEpfLHQpO2Uuc2V0Q3VzdG9tUHJvcGVydHkoXCJ3aWRnZXRcIix0cnVlLHQpO3QuZ2V0RmlsbGVyT2Zmc2V0PXJ2O2lmKGkubGFiZWwpe3R2KHQsaS5sYWJlbCxlKX1pZihpLmhhc1NlbGVjdGlvbkhhbmRsZSl7c3YodCxlKX1aXyh0LGUsKHQsZSxpKT0+aS5hZGRDbGFzcyhuKGUuY2xhc3NlcyksdCksKHQsZSxpKT0+aS5yZW1vdmVDbGFzcyhuKGUuY2xhc3NlcyksdCkpO3JldHVybiB0O2Z1bmN0aW9uIG4odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dDpbdF19fWZ1bmN0aW9uIFpfKHQsZSxpLG4pe2NvbnN0IG89bmV3IHFfO28ub24oXCJjaGFuZ2U6dG9wXCIsKGUsbyk9PntpZihvLm9sZERlc2NyaXB0b3Ipe24odCxvLm9sZERlc2NyaXB0b3Isby53cml0ZXIpfWlmKG8ubmV3RGVzY3JpcHRvcil7aSh0LG8ubmV3RGVzY3JpcHRvcixvLndyaXRlcil9fSk7ZS5zZXRDdXN0b21Qcm9wZXJ0eShcImFkZEhpZ2hsaWdodFwiLCh0LGUsaSk9Pm8uYWRkKGUsaSksdCk7ZS5zZXRDdXN0b21Qcm9wZXJ0eShcInJlbW92ZUhpZ2hsaWdodFwiLCh0LGUsaSk9Pm8ucmVtb3ZlKGUsaSksdCl9ZnVuY3Rpb24gdHYodCxlLGkpe2kuc2V0Q3VzdG9tUHJvcGVydHkoXCJ3aWRnZXRMYWJlbFwiLGUsdCl9ZnVuY3Rpb24gZXYodCl7Y29uc3QgZT10LmdldEN1c3RvbVByb3BlcnR5KFwid2lkZ2V0TGFiZWxcIik7aWYoIWUpe3JldHVyblwiXCJ9cmV0dXJuIHR5cGVvZiBlPT1cImZ1bmN0aW9uXCI/ZSgpOmV9ZnVuY3Rpb24gaXYodCxlKXtlLmFkZENsYXNzKFtcImNrLWVkaXRvcl9fZWRpdGFibGVcIixcImNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlXCJdLHQpO2lmKCFBbC5pc0VkZ2Upe2Uuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsdC5pc1JlYWRPbmx5P1wiZmFsc2VcIjpcInRydWVcIix0KTt0Lm9uKFwiY2hhbmdlOmlzUmVhZE9ubHlcIiwoaSxuLG8pPT57ZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIixvP1wiZmFsc2VcIjpcInRydWVcIix0KX0pfXQub24oXCJjaGFuZ2U6aXNGb2N1c2VkXCIsKGksbixvKT0+e2lmKG8pe2UuYWRkQ2xhc3MoXCJjay1lZGl0b3JfX25lc3RlZC1lZGl0YWJsZV9mb2N1c2VkXCIsdCl9ZWxzZXtlLnJlbW92ZUNsYXNzKFwiY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGVfZm9jdXNlZFwiLHQpfX0pO3JldHVybiB0fWZ1bmN0aW9uIG52KHQsZSl7Y29uc3QgaT10LmdldFNlbGVjdGVkRWxlbWVudCgpO2lmKGkmJmUuc2NoZW1hLmlzQmxvY2soaSkpe3JldHVybiBlLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIoaSl9Y29uc3Qgbj10LmdldFNlbGVjdGVkQmxvY2tzKCkubmV4dCgpLnZhbHVlO2lmKG4pe2lmKG4uaXNFbXB0eSl7cmV0dXJuIGUuY3JlYXRlUG9zaXRpb25BdChuLDApfWNvbnN0IGk9ZS5jcmVhdGVQb3NpdGlvbkFmdGVyKG4pO2lmKHQuZm9jdXMuaXNUb3VjaGluZyhpKSl7cmV0dXJuIGl9cmV0dXJuIGUuY3JlYXRlUG9zaXRpb25CZWZvcmUobil9cmV0dXJuIHQuZm9jdXN9ZnVuY3Rpb24gb3YodCxlKXtyZXR1cm4oaSxuKT0+e2NvbnN0e21hcHBlcjpvLHZpZXdQb3NpdGlvbjpyfT1uO2NvbnN0IHM9by5maW5kTWFwcGVkVmlld0FuY2VzdG9yKHIpO2lmKCFlKHMpKXtyZXR1cm59Y29uc3QgYT1vLnRvTW9kZWxFbGVtZW50KHMpO24ubW9kZWxQb3NpdGlvbj10LmNyZWF0ZVBvc2l0aW9uQXQoYSxyLmlzQXRTdGFydD9cImJlZm9yZVwiOlwiYWZ0ZXJcIil9fWZ1bmN0aW9uIHJ2KCl7cmV0dXJuIG51bGx9ZnVuY3Rpb24gc3YodCxlKXtjb25zdCBpPWUuY3JlYXRlVUlFbGVtZW50KFwiZGl2XCIse2NsYXNzOlwiY2sgY2std2lkZ2V0X19zZWxlY3Rpb24taGFuZGxlXCJ9LChmdW5jdGlvbih0KXtjb25zdCBlPXRoaXMudG9Eb21FbGVtZW50KHQpO2NvbnN0IGk9bmV3IGNiO2kuc2V0KFwiY29udGVudFwiLEtfKTtpLnJlbmRlcigpO2UuYXBwZW5kQ2hpbGQoaS5lbGVtZW50KTtyZXR1cm4gZX0pKTtlLmluc2VydChlLmNyZWF0ZVBvc2l0aW9uQXQodCwwKSxpKTtlLmFkZENsYXNzKFtcImNrLXdpZGdldF93aXRoLXNlbGVjdGlvbi1oYW5kbGVcIl0sdCl9Y2xhc3MgYXYgZXh0ZW5kcyBqd3tyZWZyZXNoKCl7dGhpcy5pc0VuYWJsZWQ9Y3YodGhpcy5lZGl0b3IubW9kZWwpfWV4ZWN1dGUoKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsO3QuY2hhbmdlKGU9Pntjb25zdCBpPWUuY3JlYXRlRWxlbWVudChcImhvcml6b250YWxMaW5lXCIpO3QuaW5zZXJ0Q29udGVudChpKTtsZXQgbj1pLm5leHRTaWJsaW5nO2NvbnN0IG89biYmdC5zY2hlbWEuY2hlY2tDaGlsZChuLFwiJHRleHRcIik7aWYoIW8mJnQuc2NoZW1hLmNoZWNrQ2hpbGQoaS5wYXJlbnQsXCJwYXJhZ3JhcGhcIikpe249ZS5jcmVhdGVFbGVtZW50KFwicGFyYWdyYXBoXCIpO3QuaW5zZXJ0Q29udGVudChuLGUuY3JlYXRlUG9zaXRpb25BZnRlcihpKSl9aWYobil7ZS5zZXRTZWxlY3Rpb24obiwwKX19KX19ZnVuY3Rpb24gY3YodCl7Y29uc3QgZT10LnNjaGVtYTtjb25zdCBpPXQuZG9jdW1lbnQuc2VsZWN0aW9uO3JldHVybiBsdihpLGUsdCkmJiFkdihpLGUpfWZ1bmN0aW9uIGx2KHQsZSxpKXtjb25zdCBuPXV2KHQsaSk7cmV0dXJuIGUuY2hlY2tDaGlsZChuLFwiaG9yaXpvbnRhbExpbmVcIil9ZnVuY3Rpb24gZHYodCxlKXtjb25zdCBpPXQuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7cmV0dXJuIGkmJmUuaXNPYmplY3QoaSl9ZnVuY3Rpb24gdXYodCxlKXtjb25zdCBpPW52KHQsZSk7Y29uc3Qgbj1pLnBhcmVudDtpZihuLmlzRW1wdHkmJiFuLmlzKFwiJHJvb3RcIikpe3JldHVybiBuLnBhcmVudH1yZXR1cm4gbn12YXIgaHY9aSg1Nik7Y2xhc3MgZnYgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkhvcml6b250YWxMaW5lRWRpdGluZ1wifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbC5zY2hlbWE7Y29uc3QgaT10LnQ7Y29uc3Qgbj10LmNvbnZlcnNpb247ZS5yZWdpc3RlcihcImhvcml6b250YWxMaW5lXCIse2lzT2JqZWN0OnRydWUsYWxsb3dXaGVyZTpcIiRibG9ja1wifSk7bi5mb3IoXCJkYXRhRG93bmNhc3RcIikuZWxlbWVudFRvRWxlbWVudCh7bW9kZWw6XCJob3Jpem9udGFsTGluZVwiLHZpZXc6KHQsZSk9PmUuY3JlYXRlRW1wdHlFbGVtZW50KFwiaHJcIil9KTtuLmZvcihcImVkaXRpbmdEb3duY2FzdFwiKS5lbGVtZW50VG9FbGVtZW50KHttb2RlbDpcImhvcml6b250YWxMaW5lXCIsdmlldzoodCxlKT0+e2NvbnN0IG49aShcImpmXCIpO2NvbnN0IG89ZS5jcmVhdGVDb250YWluZXJFbGVtZW50KFwiZGl2XCIpO2NvbnN0IHI9ZS5jcmVhdGVFbXB0eUVsZW1lbnQoXCJoclwiKTtlLmFkZENsYXNzKFwiY2staG9yaXpvbnRhbC1saW5lXCIsbyk7ZS5zZXRDdXN0b21Qcm9wZXJ0eShcImhyXCIsdHJ1ZSxvKTtlLmluc2VydChlLmNyZWF0ZVBvc2l0aW9uQXQobywwKSxyKTtyZXR1cm4gZ3YobyxlLG4pfX0pO24uZm9yKFwidXBjYXN0XCIpLmVsZW1lbnRUb0VsZW1lbnQoe3ZpZXc6XCJoclwiLG1vZGVsOlwiaG9yaXpvbnRhbExpbmVcIn0pO3QuY29tbWFuZHMuYWRkKFwiaG9yaXpvbnRhbExpbmVcIixuZXcgYXYodCkpfX1mdW5jdGlvbiBndih0LGUsaSl7ZS5zZXRDdXN0b21Qcm9wZXJ0eShcImhvcml6b250YWxMaW5lXCIsdHJ1ZSx0KTtyZXR1cm4gWF8odCxlLHtsYWJlbDppfSl9dmFyIG12PSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0yIDloMTZ2MkgyelwiLz48L3N2Zz4nO2NsYXNzIHB2IGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChcImhvcml6b250YWxMaW5lXCIsaT0+e2NvbnN0IG49dC5jb21tYW5kcy5nZXQoXCJob3Jpem9udGFsTGluZVwiKTtjb25zdCBvPW5ldyBoYihpKTtvLnNldCh7bGFiZWw6ZShcImpmXCIpLGljb246bXYsdG9vbHRpcDp0cnVlfSk7by5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKG4sXCJpc0VuYWJsZWRcIik7dGhpcy5saXN0ZW5UbyhvLFwiZXhlY3V0ZVwiLCgpPT57dC5leGVjdXRlKFwiaG9yaXpvbnRhbExpbmVcIik7dC5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiBvfSl9fWNsYXNzIGJ2IGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltmdixwdl19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJIb3Jpem9udGFsTGluZVwifX1jbGFzcyB3diBleHRlbmRzIEdke29ic2VydmUodCl7dGhpcy5saXN0ZW5Ubyh0LFwibG9hZFwiLCh0LGUpPT57Y29uc3QgaT1lLnRhcmdldDtpZihpLnRhZ05hbWU9PVwiSU1HXCIpe3RoaXMuX2ZpcmVFdmVudHMoZSl9fSx7dXNlQ2FwdHVyZTp0cnVlfSl9X2ZpcmVFdmVudHModCl7aWYodGhpcy5pc0VuYWJsZWQpe3RoaXMuZG9jdW1lbnQuZmlyZShcImxheW91dENoYW5nZWRcIik7dGhpcy5kb2N1bWVudC5maXJlKFwiaW1hZ2VMb2FkZWRcIix0KX19fWZ1bmN0aW9uIGt2KHQsZSxpKXtlLnNldEN1c3RvbVByb3BlcnR5KFwiaW1hZ2VcIix0cnVlLHQpO3JldHVybiBYXyh0LGUse2xhYmVsOm59KTtmdW5jdGlvbiBuKCl7Y29uc3QgZT1Bdih0KTtjb25zdCBuPWUuZ2V0QXR0cmlidXRlKFwiYWx0XCIpO3JldHVybiBuP2Ake259ICR7aX1gOml9fWZ1bmN0aW9uIF92KHQpe3JldHVybiEhdC5nZXRDdXN0b21Qcm9wZXJ0eShcImltYWdlXCIpJiZRXyh0KX1mdW5jdGlvbiB2dih0KXtjb25zdCBlPXQuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7aWYoZSYmX3YoZSkpe3JldHVybiBlfXJldHVybiBudWxsfWZ1bmN0aW9uIHl2KHQpe3JldHVybiEhdCYmdC5pcyhcImltYWdlXCIpfWZ1bmN0aW9uIHh2KHQsZSxpPXt9KXtjb25zdCBuPXQuY3JlYXRlRWxlbWVudChcImltYWdlXCIsaSk7Y29uc3Qgbz1udihlLmRvY3VtZW50LnNlbGVjdGlvbixlKTtlLmluc2VydENvbnRlbnQobixvKTtpZihuLnBhcmVudCl7dC5zZXRTZWxlY3Rpb24obixcIm9uXCIpfX1mdW5jdGlvbiBDdih0KXtjb25zdCBlPXQuc2NoZW1hO2NvbnN0IGk9dC5kb2N1bWVudC5zZWxlY3Rpb247cmV0dXJuIFR2KGksZSx0KSYmIVB2KGksZSkmJlN2KGkpfWZ1bmN0aW9uIEF2KHQpe3JldHVybiBBcnJheS5mcm9tKHQuZ2V0Q2hpbGRyZW4oKSkuZmluZCh0PT50LmlzKFwiaW1nXCIpKX1mdW5jdGlvbiBUdih0LGUsaSl7Y29uc3Qgbj1Fdih0LGkpO3JldHVybiBlLmNoZWNrQ2hpbGQobixcImltYWdlXCIpfWZ1bmN0aW9uIFB2KHQsZSl7Y29uc3QgaT10LmdldFNlbGVjdGVkRWxlbWVudCgpO3JldHVybiBpJiZlLmlzT2JqZWN0KGkpfWZ1bmN0aW9uIFN2KHQpe3JldHVyblsuLi50LmZvY3VzLmdldEFuY2VzdG9ycygpXS5ldmVyeSh0PT4hdC5pcyhcImltYWdlXCIpKX1mdW5jdGlvbiBFdih0LGUpe2NvbnN0IGk9bnYodCxlKTtjb25zdCBuPWkucGFyZW50O2lmKG4uaXNFbXB0eSYmIW4uaXMoXCIkcm9vdFwiKSl7cmV0dXJuIG4ucGFyZW50fXJldHVybiBufWZ1bmN0aW9uIFJ2KCl7cmV0dXJuIGU9PntlLm9uKFwiZWxlbWVudDpmaWd1cmVcIix0KX07ZnVuY3Rpb24gdCh0LGUsaSl7aWYoIWkuY29uc3VtYWJsZS50ZXN0KGUudmlld0l0ZW0se25hbWU6dHJ1ZSxjbGFzc2VzOlwiaW1hZ2VcIn0pKXtyZXR1cm59Y29uc3Qgbj1BdihlLnZpZXdJdGVtKTtpZighbnx8IW4uaGFzQXR0cmlidXRlKFwic3JjXCIpfHwhaS5jb25zdW1hYmxlLnRlc3Qobix7bmFtZTp0cnVlfSkpe3JldHVybn1jb25zdCBvPWkuY29udmVydEl0ZW0obixlLm1vZGVsQ3Vyc29yKTtjb25zdCByPVd3KG8ubW9kZWxSYW5nZS5nZXRJdGVtcygpKTtpZighcil7cmV0dXJufWkuY29udmVydENoaWxkcmVuKGUudmlld0l0ZW0saS53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChyLDApKTtlLm1vZGVsUmFuZ2U9by5tb2RlbFJhbmdlO2UubW9kZWxDdXJzb3I9by5tb2RlbEN1cnNvcn19ZnVuY3Rpb24gT3YoKXtyZXR1cm4gZT0+e2Uub24oXCJhdHRyaWJ1dGU6c3Jjc2V0OmltYWdlXCIsdCl9O2Z1bmN0aW9uIHQodCxlLGkpe2lmKCFpLmNvbnN1bWFibGUuY29uc3VtZShlLml0ZW0sdC5uYW1lKSl7cmV0dXJufWNvbnN0IG49aS53cml0ZXI7Y29uc3Qgbz1pLm1hcHBlci50b1ZpZXdFbGVtZW50KGUuaXRlbSk7Y29uc3Qgcj1BdihvKTtpZihlLmF0dHJpYnV0ZU5ld1ZhbHVlPT09bnVsbCl7Y29uc3QgdD1lLmF0dHJpYnV0ZU9sZFZhbHVlO2lmKHQuZGF0YSl7bi5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNzZXRcIixyKTtuLnJlbW92ZUF0dHJpYnV0ZShcInNpemVzXCIscik7aWYodC53aWR0aCl7bi5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiLHIpfX19ZWxzZXtjb25zdCB0PWUuYXR0cmlidXRlTmV3VmFsdWU7aWYodC5kYXRhKXtuLnNldEF0dHJpYnV0ZShcInNyY3NldFwiLHQuZGF0YSxyKTtuLnNldEF0dHJpYnV0ZShcInNpemVzXCIsXCIxMDB2d1wiLHIpO2lmKHQud2lkdGgpe24uc2V0QXR0cmlidXRlKFwid2lkdGhcIix0LndpZHRoLHIpfX19fX1mdW5jdGlvbiBJdih0KXtyZXR1cm4gaT0+e2kub24oYGF0dHJpYnV0ZToke3R9OmltYWdlYCxlKX07ZnVuY3Rpb24gZSh0LGUsaSl7aWYoIWkuY29uc3VtYWJsZS5jb25zdW1lKGUuaXRlbSx0Lm5hbWUpKXtyZXR1cm59Y29uc3Qgbj1pLndyaXRlcjtjb25zdCBvPWkubWFwcGVyLnRvVmlld0VsZW1lbnQoZS5pdGVtKTtjb25zdCByPUF2KG8pO2lmKGUuYXR0cmlidXRlTmV3VmFsdWUhPT1udWxsKXtuLnNldEF0dHJpYnV0ZShlLmF0dHJpYnV0ZUtleSxlLmF0dHJpYnV0ZU5ld1ZhbHVlLHIpfWVsc2V7bi5yZW1vdmVBdHRyaWJ1dGUoZS5hdHRyaWJ1dGVLZXkscil9fX1jbGFzcyBWdiBleHRlbmRzIGp3e3JlZnJlc2goKXt0aGlzLmlzRW5hYmxlZD1Ddih0aGlzLmVkaXRvci5tb2RlbCl9ZXhlY3V0ZSh0KXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsO2UuY2hhbmdlKGk9Pntjb25zdCBuPUFycmF5LmlzQXJyYXkodC5zb3VyY2UpP3Quc291cmNlOlt0LnNvdXJjZV07Zm9yKGNvbnN0IHQgb2Ygbil7eHYoaSxlLHtzcmM6dH0pfX0pfX1jbGFzcyBOdiBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSW1hZ2VFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10Lm1vZGVsLnNjaGVtYTtjb25zdCBpPXQudDtjb25zdCBuPXQuY29udmVyc2lvbjt0LmVkaXRpbmcudmlldy5hZGRPYnNlcnZlcih3dik7ZS5yZWdpc3RlcihcImltYWdlXCIse2lzT2JqZWN0OnRydWUsaXNCbG9jazp0cnVlLGFsbG93V2hlcmU6XCIkYmxvY2tcIixhbGxvd0F0dHJpYnV0ZXM6W1wiYWx0XCIsXCJzcmNcIixcInNyY3NldFwiXX0pO24uZm9yKFwiZGF0YURvd25jYXN0XCIpLmVsZW1lbnRUb0VsZW1lbnQoe21vZGVsOlwiaW1hZ2VcIix2aWV3Oih0LGUpPT5NdihlKX0pO24uZm9yKFwiZWRpdGluZ0Rvd25jYXN0XCIpLmVsZW1lbnRUb0VsZW1lbnQoe21vZGVsOlwiaW1hZ2VcIix2aWV3Oih0LGUpPT5rdihNdihlKSxlLGkoXCJqeFwiKSl9KTtuLmZvcihcImRvd25jYXN0XCIpLmFkZChJdihcInNyY1wiKSkuYWRkKEl2KFwiYWx0XCIpKS5hZGQoT3YoKSk7bi5mb3IoXCJ1cGNhc3RcIikuZWxlbWVudFRvRWxlbWVudCh7dmlldzp7bmFtZTpcImltZ1wiLGF0dHJpYnV0ZXM6e3NyYzp0cnVlfX0sbW9kZWw6KHQsZSk9PmUuY3JlYXRlRWxlbWVudChcImltYWdlXCIse3NyYzp0LmdldEF0dHJpYnV0ZShcInNyY1wiKX0pfSkuYXR0cmlidXRlVG9BdHRyaWJ1dGUoe3ZpZXc6e25hbWU6XCJpbWdcIixrZXk6XCJhbHRcIn0sbW9kZWw6XCJhbHRcIn0pLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHt2aWV3OntuYW1lOlwiaW1nXCIsa2V5Olwic3Jjc2V0XCJ9LG1vZGVsOntrZXk6XCJzcmNzZXRcIix2YWx1ZTp0PT57Y29uc3QgZT17ZGF0YTp0LmdldEF0dHJpYnV0ZShcInNyY3NldFwiKX07aWYodC5oYXNBdHRyaWJ1dGUoXCJ3aWR0aFwiKSl7ZS53aWR0aD10LmdldEF0dHJpYnV0ZShcIndpZHRoXCIpfXJldHVybiBlfX19KS5hZGQoUnYoKSk7dC5jb21tYW5kcy5hZGQoXCJpbWFnZUluc2VydFwiLG5ldyBWdih0KSl9fWZ1bmN0aW9uIE12KHQpe2NvbnN0IGU9dC5jcmVhdGVFbXB0eUVsZW1lbnQoXCJpbWdcIik7Y29uc3QgaT10LmNyZWF0ZUNvbnRhaW5lckVsZW1lbnQoXCJmaWd1cmVcIix7Y2xhc3M6XCJpbWFnZVwifSk7dC5pbnNlcnQodC5jcmVhdGVQb3NpdGlvbkF0KGksMCksZSk7cmV0dXJuIGl9Y2xhc3MgQnYgZXh0ZW5kcyBKdXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0aGlzLmRvbUV2ZW50VHlwZT1cIm1vdXNlZG93blwifW9uRG9tRXZlbnQodCl7dGhpcy5maXJlKHQudHlwZSx0KX19dmFyIHp2PWkoNTgpO2NvbnN0IEx2PUJsKFwiQ3RybCtBXCIpO2NsYXNzIEZ2IGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJXaWRnZXRcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvci5lZGl0aW5nLnZpZXc7Y29uc3QgZT10LmRvY3VtZW50O3RoaXMuX3ByZXZpb3VzbHlTZWxlY3RlZD1uZXcgU2V0O3RoaXMuZWRpdG9yLmVkaXRpbmcuZG93bmNhc3REaXNwYXRjaGVyLm9uKFwic2VsZWN0aW9uXCIsKHQsZSxpKT0+e3RoaXMuX2NsZWFyUHJldmlvdXNseVNlbGVjdGVkV2lkZ2V0cyhpLndyaXRlcik7Y29uc3Qgbj1pLndyaXRlcjtjb25zdCBvPW4uZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IHI9by5nZXRTZWxlY3RlZEVsZW1lbnQoKTtsZXQgcz1udWxsO2Zvcihjb25zdCB0IG9mIG8uZ2V0UmFuZ2VzKCkpe2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9ZS5pdGVtO2lmKFFfKHQpJiYhV3YodCxzKSl7bi5hZGRDbGFzcyhZXyx0KTt0aGlzLl9wcmV2aW91c2x5U2VsZWN0ZWQuYWRkKHQpO3M9dDtpZih0PT1yKXtuLnNldFNlbGVjdGlvbihvLmdldFJhbmdlcygpLHtmYWtlOnRydWUsbGFiZWw6ZXYocil9KX19fX19LHtwcmlvcml0eTpcImxvd1wifSk7dC5hZGRPYnNlcnZlcihCdik7dGhpcy5saXN0ZW5UbyhlLFwibW91c2Vkb3duXCIsKC4uLnQpPT50aGlzLl9vbk1vdXNlZG93biguLi50KSk7dGhpcy5saXN0ZW5UbyhlLFwia2V5ZG93blwiLCguLi50KT0+dGhpcy5fb25LZXlkb3duKC4uLnQpLHtwcmlvcml0eTpcImhpZ2hcIn0pO3RoaXMubGlzdGVuVG8oZSxcImRlbGV0ZVwiLCh0LGUpPT57aWYodGhpcy5faGFuZGxlRGVsZXRlKGUuZGlyZWN0aW9uPT1cImZvcndhcmRcIikpe2UucHJldmVudERlZmF1bHQoKTt0LnN0b3AoKX19LHtwcmlvcml0eTpcImhpZ2hcIn0pfV9vbk1vdXNlZG93bih0LGUpe2NvbnN0IGk9dGhpcy5lZGl0b3I7Y29uc3Qgbj1pLmVkaXRpbmcudmlldztjb25zdCBvPW4uZG9jdW1lbnQ7bGV0IHI9ZS50YXJnZXQ7aWYoSHYocikpe2lmKEFsLmlzU2FmYXJpJiZlLmRvbUV2ZW50LmRldGFpbD49Myl7Y29uc3QgdD1pLmVkaXRpbmcubWFwcGVyO2NvbnN0IG49dC50b01vZGVsRWxlbWVudChyKTt0aGlzLmVkaXRvci5tb2RlbC5jaGFuZ2UodD0+e2UucHJldmVudERlZmF1bHQoKTt0LnNldFNlbGVjdGlvbihuLFwiaW5cIil9KX1yZXR1cm59aWYoIVFfKHIpKXtyPXIuZmluZEFuY2VzdG9yKFFfKTtpZighcil7cmV0dXJufX1lLnByZXZlbnREZWZhdWx0KCk7aWYoIW8uaXNGb2N1c2VkKXtuLmZvY3VzKCl9Y29uc3Qgcz1pLmVkaXRpbmcubWFwcGVyLnRvTW9kZWxFbGVtZW50KHIpO3RoaXMuX3NldFNlbGVjdGlvbk92ZXJFbGVtZW50KHMpfV9vbktleWRvd24odCxlKXtjb25zdCBpPWUua2V5Q29kZTtjb25zdCBuPXRoaXMuZWRpdG9yLmxvY2FsZS5jb250ZW50TGFuZ3VhZ2VEaXJlY3Rpb249PT1cImx0clwiO2NvbnN0IG89aT09TmwuYXJyb3dkb3dufHxpPT1ObFtuP1wiYXJyb3dyaWdodFwiOlwiYXJyb3dsZWZ0XCJdO2xldCByPWZhbHNlO2lmKER2KGkpKXtyPXRoaXMuX2hhbmRsZUFycm93S2V5cyhvKX1lbHNlIGlmKGp2KGUpKXtyPXRoaXMuX3NlbGVjdEFsbE5lc3RlZEVkaXRhYmxlQ29udGVudCgpfHx0aGlzLl9zZWxlY3RBbGxDb250ZW50KCl9ZWxzZSBpZihpPT09TmwuZW50ZXIpe3I9dGhpcy5faGFuZGxlRW50ZXJLZXkoZS5zaGlmdEtleSl9aWYocil7ZS5wcmV2ZW50RGVmYXVsdCgpO3Quc3RvcCgpfX1faGFuZGxlRGVsZXRlKHQpe2lmKHRoaXMuZWRpdG9yLmlzUmVhZE9ubHkpe3JldHVybn1jb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50O2NvbnN0IGk9ZS5zZWxlY3Rpb247aWYoIWkuaXNDb2xsYXBzZWQpe3JldHVybn1jb25zdCBuPXRoaXMuX2dldE9iamVjdEVsZW1lbnROZXh0VG9TZWxlY3Rpb24odCk7aWYobil7dGhpcy5lZGl0b3IubW9kZWwuY2hhbmdlKHQ9PntsZXQgZT1pLmFuY2hvci5wYXJlbnQ7d2hpbGUoZS5pc0VtcHR5KXtjb25zdCBpPWU7ZT1pLnBhcmVudDt0LnJlbW92ZShpKX10aGlzLl9zZXRTZWxlY3Rpb25PdmVyRWxlbWVudChuKX0pO3JldHVybiB0cnVlfX1faGFuZGxlQXJyb3dLZXlzKHQpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgaT1lLnNjaGVtYTtjb25zdCBuPWUuZG9jdW1lbnQ7Y29uc3Qgbz1uLnNlbGVjdGlvbjtjb25zdCByPW8uZ2V0U2VsZWN0ZWRFbGVtZW50KCk7aWYociYmaS5pc09iamVjdChyKSl7Y29uc3Qgbj10P28uZ2V0TGFzdFBvc2l0aW9uKCk6by5nZXRGaXJzdFBvc2l0aW9uKCk7Y29uc3Qgcj1pLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShuLHQ/XCJmb3J3YXJkXCI6XCJiYWNrd2FyZFwiKTtpZihyKXtlLmNoYW5nZSh0PT57dC5zZXRTZWxlY3Rpb24ocil9KX1yZXR1cm4gdHJ1ZX1pZighby5pc0NvbGxhcHNlZCl7cmV0dXJufWNvbnN0IHM9dGhpcy5fZ2V0T2JqZWN0RWxlbWVudE5leHRUb1NlbGVjdGlvbih0KTtpZighIXMmJmkuaXNPYmplY3Qocykpe3RoaXMuX3NldFNlbGVjdGlvbk92ZXJFbGVtZW50KHMpO3JldHVybiB0cnVlfX1faGFuZGxlRW50ZXJLZXkodCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IG49aS5nZXRTZWxlY3RlZEVsZW1lbnQoKTtpZihxdihuLGUuc2NoZW1hKSl7ZS5jaGFuZ2UoaT0+e2xldCBvPWkuY3JlYXRlUG9zaXRpb25BdChuLHQ/XCJiZWZvcmVcIjpcImFmdGVyXCIpO2NvbnN0IHI9aS5jcmVhdGVFbGVtZW50KFwicGFyYWdyYXBoXCIpO2lmKGUuc2NoZW1hLmlzQmxvY2sobi5wYXJlbnQpKXtjb25zdCB0PWUuc2NoZW1hLmZpbmRBbGxvd2VkUGFyZW50KG8scik7bz1pLnNwbGl0KG8sdCkucG9zaXRpb259aS5pbnNlcnQocixvKTtpLnNldFNlbGVjdGlvbihyLFwiaW5cIil9KTtyZXR1cm4gdHJ1ZX19X3NlbGVjdEFsbE5lc3RlZEVkaXRhYmxlQ29udGVudCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50LnNlbGVjdGlvbjtjb25zdCBpPXQuc2NoZW1hLmdldExpbWl0RWxlbWVudChlKTtpZihlLmdldEZpcnN0UmFuZ2UoKS5yb290PT1pKXtyZXR1cm4gZmFsc2V9dC5jaGFuZ2UodD0+e3Quc2V0U2VsZWN0aW9uKHQuY3JlYXRlUmFuZ2VJbihpKSl9KTtyZXR1cm4gdHJ1ZX1fc2VsZWN0QWxsQ29udGVudCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10aGlzLmVkaXRvci5lZGl0aW5nO2NvbnN0IGk9ZS52aWV3O2NvbnN0IG49aS5kb2N1bWVudDtjb25zdCBvPW4uc2VsZWN0aW9uO2NvbnN0IHI9by5nZXRTZWxlY3RlZEVsZW1lbnQoKTtpZihyJiZRXyhyKSl7Y29uc3QgaT1lLm1hcHBlci50b01vZGVsRWxlbWVudChyLnBhcmVudCk7dC5jaGFuZ2UodD0+e3Quc2V0U2VsZWN0aW9uKHQuY3JlYXRlUmFuZ2VJbihpKSl9KTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9X3NldFNlbGVjdGlvbk92ZXJFbGVtZW50KHQpe3RoaXMuZWRpdG9yLm1vZGVsLmNoYW5nZShlPT57ZS5zZXRTZWxlY3Rpb24oZS5jcmVhdGVSYW5nZU9uKHQpKX0pfV9nZXRPYmplY3RFbGVtZW50TmV4dFRvU2VsZWN0aW9uKHQpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgaT1lLnNjaGVtYTtjb25zdCBuPWUuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IG89ZS5jcmVhdGVTZWxlY3Rpb24obik7ZS5tb2RpZnlTZWxlY3Rpb24obyx7ZGlyZWN0aW9uOnQ/XCJmb3J3YXJkXCI6XCJiYWNrd2FyZFwifSk7Y29uc3Qgcj10P28uZm9jdXMubm9kZUJlZm9yZTpvLmZvY3VzLm5vZGVBZnRlcjtpZighIXImJmkuaXNPYmplY3Qocikpe3JldHVybiByfXJldHVybiBudWxsfV9jbGVhclByZXZpb3VzbHlTZWxlY3RlZFdpZGdldHModCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcHJldmlvdXNseVNlbGVjdGVkKXt0LnJlbW92ZUNsYXNzKFlfLGUpfXRoaXMuX3ByZXZpb3VzbHlTZWxlY3RlZC5jbGVhcigpfX1mdW5jdGlvbiBEdih0KXtyZXR1cm4gdD09TmwuYXJyb3dyaWdodHx8dD09TmwuYXJyb3dsZWZ0fHx0PT1ObC5hcnJvd3VwfHx0PT1ObC5hcnJvd2Rvd259ZnVuY3Rpb24ganYodCl7cmV0dXJuIE1sKHQpPT1Mdn1mdW5jdGlvbiBIdih0KXt3aGlsZSh0KXtpZih0LmlzKFwiZWRpdGFibGVFbGVtZW50XCIpJiYhdC5pcyhcInJvb3RFbGVtZW50XCIpKXtyZXR1cm4gdHJ1ZX1pZihRXyh0KSl7cmV0dXJuIGZhbHNlfXQ9dC5wYXJlbnR9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIFd2KHQsZSl7aWYoIWUpe3JldHVybiBmYWxzZX1yZXR1cm4gQXJyYXkuZnJvbSh0LmdldEFuY2VzdG9ycygpKS5pbmNsdWRlcyhlKX1mdW5jdGlvbiBxdih0LGUpe3JldHVybiB0JiZlLmlzT2JqZWN0KHQpJiYhZS5pc0lubGluZSh0KX1jbGFzcyBVdiBleHRlbmRzIGp3e3JlZnJlc2goKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKTt0aGlzLmlzRW5hYmxlZD15dih0KTtpZih5dih0KSYmdC5oYXNBdHRyaWJ1dGUoXCJhbHRcIikpe3RoaXMudmFsdWU9dC5nZXRBdHRyaWJ1dGUoXCJhbHRcIil9ZWxzZXt0aGlzLnZhbHVlPWZhbHNlfX1leGVjdXRlKHQpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgaT1lLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKTtlLmNoYW5nZShlPT57ZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIix0Lm5ld1ZhbHVlLGkpfSl9fWNsYXNzICR2IGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJbWFnZVRleHRBbHRlcm5hdGl2ZUVkaXRpbmdcIn1pbml0KCl7dGhpcy5lZGl0b3IuY29tbWFuZHMuYWRkKFwiaW1hZ2VUZXh0QWx0ZXJuYXRpdmVcIixuZXcgVXYodGhpcy5lZGl0b3IpKX19dmFyIEd2PWkoNjApO2NsYXNzIEt2IGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTtjb25zdCBpPWBjay1pbnB1dC0ke2lzKCl9YDtjb25zdCBuPWBjay1zdGF0dXMtJHtpcygpfWA7dGhpcy5zZXQoXCJsYWJlbFwiKTt0aGlzLnNldChcInZhbHVlXCIpO3RoaXMuc2V0KFwiaXNSZWFkT25seVwiLGZhbHNlKTt0aGlzLnNldChcImVycm9yVGV4dFwiLG51bGwpO3RoaXMuc2V0KFwiaW5mb1RleHRcIixudWxsKTt0aGlzLmxhYmVsVmlldz10aGlzLl9jcmVhdGVMYWJlbFZpZXcoaSk7dGhpcy5pbnB1dFZpZXc9dGhpcy5fY3JlYXRlSW5wdXRWaWV3KGUsaSxuKTt0aGlzLnN0YXR1c1ZpZXc9dGhpcy5fY3JlYXRlU3RhdHVzVmlldyhuKTt0aGlzLmJpbmQoXCJfc3RhdHVzVGV4dFwiKS50byh0aGlzLFwiZXJyb3JUZXh0XCIsdGhpcyxcImluZm9UZXh0XCIsKHQsZSk9PnR8fGUpO2NvbnN0IG89dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWxhYmVsZWQtaW5wdXRcIixvLmlmKFwiaXNSZWFkT25seVwiLFwiY2stZGlzYWJsZWRcIildfSxjaGlsZHJlbjpbdGhpcy5sYWJlbFZpZXcsdGhpcy5pbnB1dFZpZXcsdGhpcy5zdGF0dXNWaWV3XX0pfV9jcmVhdGVMYWJlbFZpZXcodCl7Y29uc3QgZT1uZXcgTWsodGhpcy5sb2NhbGUpO2UuZm9yPXQ7ZS5iaW5kKFwidGV4dFwiKS50byh0aGlzLFwibGFiZWxcIik7cmV0dXJuIGV9X2NyZWF0ZUlucHV0Vmlldyh0LGUsaSl7Y29uc3Qgbj1uZXcgdCh0aGlzLmxvY2FsZSxpKTtuLmlkPWU7bi5hcmlhRGVzY3JpYmVkQnlJZD1pO24uYmluZChcInZhbHVlXCIpLnRvKHRoaXMpO24uYmluZChcImlzUmVhZE9ubHlcIikudG8odGhpcyk7bi5iaW5kKFwiaGFzRXJyb3JcIikudG8odGhpcyxcImVycm9yVGV4dFwiLHQ9PiEhdCk7bi5vbihcImlucHV0XCIsKCk9Pnt0aGlzLmVycm9yVGV4dD1udWxsfSk7cmV0dXJuIG59X2NyZWF0ZVN0YXR1c1ZpZXcodCl7Y29uc3QgZT1uZXcgR3AodGhpcy5sb2NhbGUpO2NvbnN0IGk9dGhpcy5iaW5kVGVtcGxhdGU7ZS5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWxhYmVsZWQtaW5wdXRfX3N0YXR1c1wiLGkuaWYoXCJlcnJvclRleHRcIixcImNrLWxhYmVsZWQtaW5wdXRfX3N0YXR1c19lcnJvclwiKSxpLmlmKFwiX3N0YXR1c1RleHRcIixcImNrLWhpZGRlblwiLHQ9PiF0KV0saWQ6dCxyb2xlOmkuaWYoXCJlcnJvclRleHRcIixcImFsZXJ0XCIpfSxjaGlsZHJlbjpbe3RleHQ6aS50byhcIl9zdGF0dXNUZXh0XCIpfV19KTtyZXR1cm4gZX1zZWxlY3QoKXt0aGlzLmlucHV0Vmlldy5zZWxlY3QoKX1mb2N1cygpe3RoaXMuaW5wdXRWaWV3LmZvY3VzKCl9fXZhciBKdj1pKDYyKTtjbGFzcyBZdiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuc2V0KFwidmFsdWVcIik7dGhpcy5zZXQoXCJpZFwiKTt0aGlzLnNldChcInBsYWNlaG9sZGVyXCIpO3RoaXMuc2V0KFwiaXNSZWFkT25seVwiLGZhbHNlKTt0aGlzLnNldChcImhhc0Vycm9yXCIsZmFsc2UpO3RoaXMuc2V0KFwiYXJpYURlc2NyaWJlZEJ5SWRcIik7Y29uc3QgZT10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJpbnB1dFwiLGF0dHJpYnV0ZXM6e3R5cGU6XCJ0ZXh0XCIsY2xhc3M6W1wiY2tcIixcImNrLWlucHV0XCIsXCJjay1pbnB1dC10ZXh0XCIsZS5pZihcImhhc0Vycm9yXCIsXCJjay1lcnJvclwiKV0saWQ6ZS50byhcImlkXCIpLHBsYWNlaG9sZGVyOmUudG8oXCJwbGFjZWhvbGRlclwiKSxyZWFkb25seTplLnRvKFwiaXNSZWFkT25seVwiKSxcImFyaWEtaW52YWxpZFwiOmUuaWYoXCJoYXNFcnJvclwiLHRydWUpLFwiYXJpYS1kZXNjcmliZWRieVwiOmUudG8oXCJhcmlhRGVzY3JpYmVkQnlJZFwiKX0sb246e2lucHV0OmUudG8oXCJpbnB1dFwiKX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtjb25zdCB0PXQ9Pnt0aGlzLmVsZW1lbnQudmFsdWU9IXQmJnQhPT0wP1wiXCI6dH07dCh0aGlzLnZhbHVlKTt0aGlzLm9uKFwiY2hhbmdlOnZhbHVlXCIsKGUsaSxuKT0+e3Qobil9KX1zZWxlY3QoKXt0aGlzLmVsZW1lbnQuc2VsZWN0KCl9Zm9jdXMoKXt0aGlzLmVsZW1lbnQuZm9jdXMoKX19ZnVuY3Rpb24gUXYoe3ZpZXc6dH0pe3QubGlzdGVuVG8odC5lbGVtZW50LFwic3VibWl0XCIsKGUsaSk9PntpLnByZXZlbnREZWZhdWx0KCk7dC5maXJlKFwic3VibWl0XCIpfSx7dXNlQ2FwdHVyZTp0cnVlfSl9dmFyIFh2PSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk02Ljk3MiAxNi42MTVhLjk5Ny45OTcgMCAwIDEtLjc0NC0uMjkybC00LjU5Ni00LjU5NmExIDEgMCAxIDEgMS40MTQtMS40MTRsMy45MjYgMy45MjYgOS45MzctOS45MzdhMSAxIDAgMCAxIDEuNDE0IDEuNDE1TDcuNzE3IDE2LjMyM2EuOTk3Ljk5NyAwIDAgMS0uNzQ1LjI5MnpcIi8+PC9zdmc+Jzt2YXIgWnY9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTExLjU5MSAxMC4xNzdsNC4yNDMgNC4yNDJhMSAxIDAgMCAxLTEuNDE1IDEuNDE1bC00LjI0Mi00LjI0My00LjI0MyA0LjI0M2ExIDEgMCAwIDEtMS40MTQtMS40MTVsNC4yNDMtNC4yNDJMNC41MiA1LjkzNEExIDEgMCAwIDEgNS45MzQgNC41Mmw0LjI0MyA0LjI0MyA0LjI0Mi00LjI0M2ExIDEgMCAxIDEgMS40MTUgMS40MTRsLTQuMjQzIDQuMjQzelwiLz48L3N2Zz4nO3ZhciB0eT1pKDY0KTtjbGFzcyBleSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO2NvbnN0IGU9dGhpcy5sb2NhbGUudDt0aGlzLmZvY3VzVHJhY2tlcj1uZXcgZmI7dGhpcy5rZXlzdHJva2VzPW5ldyBkcDt0aGlzLmxhYmVsZWRJbnB1dD10aGlzLl9jcmVhdGVMYWJlbGVkSW5wdXRWaWV3KCk7dGhpcy5zYXZlQnV0dG9uVmlldz10aGlzLl9jcmVhdGVCdXR0b24oZShcImxvXCIpLFh2LFwiY2stYnV0dG9uLXNhdmVcIik7dGhpcy5zYXZlQnV0dG9uVmlldy50eXBlPVwic3VibWl0XCI7dGhpcy5jYW5jZWxCdXR0b25WaWV3PXRoaXMuX2NyZWF0ZUJ1dHRvbihlKFwibHBcIiksWnYsXCJjay1idXR0b24tY2FuY2VsXCIsXCJjYW5jZWxcIik7dGhpcy5fZm9jdXNhYmxlcz1uZXcgYnA7dGhpcy5fZm9jdXNDeWNsZXI9bmV3IHliKHtmb2N1c2FibGVzOnRoaXMuX2ZvY3VzYWJsZXMsZm9jdXNUcmFja2VyOnRoaXMuZm9jdXNUcmFja2VyLGtleXN0cm9rZUhhbmRsZXI6dGhpcy5rZXlzdHJva2VzLGFjdGlvbnM6e2ZvY3VzUHJldmlvdXM6XCJzaGlmdCArIHRhYlwiLGZvY3VzTmV4dDpcInRhYlwifX0pO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImZvcm1cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtXCJdLHRhYmluZGV4OlwiLTFcIn0sY2hpbGRyZW46W3RoaXMubGFiZWxlZElucHV0LHRoaXMuc2F2ZUJ1dHRvblZpZXcsdGhpcy5jYW5jZWxCdXR0b25WaWV3XX0pfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO3RoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpO1F2KHt2aWV3OnRoaXN9KTtbdGhpcy5sYWJlbGVkSW5wdXQsdGhpcy5zYXZlQnV0dG9uVmlldyx0aGlzLmNhbmNlbEJ1dHRvblZpZXddLmZvckVhY2godD0+e3RoaXMuX2ZvY3VzYWJsZXMuYWRkKHQpO3RoaXMuZm9jdXNUcmFja2VyLmFkZCh0LmVsZW1lbnQpfSl9X2NyZWF0ZUJ1dHRvbih0LGUsaSxuKXtjb25zdCBvPW5ldyBoYih0aGlzLmxvY2FsZSk7by5zZXQoe2xhYmVsOnQsaWNvbjplLHRvb2x0aXA6dHJ1ZX0pO28uZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOml9fSk7aWYobil7by5kZWxlZ2F0ZShcImV4ZWN1dGVcIikudG8odGhpcyxuKX1yZXR1cm4gb31fY3JlYXRlTGFiZWxlZElucHV0Vmlldygpe2NvbnN0IHQ9dGhpcy5sb2NhbGUudDtjb25zdCBlPW5ldyBLdih0aGlzLmxvY2FsZSxZdik7ZS5sYWJlbD10KFwibHRcIik7ZS5pbnB1dFZpZXcucGxhY2Vob2xkZXI9dChcImx0XCIpO3JldHVybiBlfX12YXIgaXk9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTUuMDg1IDYuMjJMMi45NDMgNC4wNzhhLjc1Ljc1IDAgMSAxIDEuMDYtMS4wNmwyLjU5MiAyLjU5QTExLjA5NCAxMS4wOTQgMCAwIDEgMTAgNS4wNjhjNC43MzggMCA4LjU3OCAzLjEwMSA4LjU3OCA1LjA4MyAwIDEuMTk3LTEuNDAxIDIuODAzLTMuNTU1IDMuODg3bDEuNzE0IDEuNzEzYS43NS43NSAwIDAgMS0uMDkgMS4xMzguNDg4LjQ4OCAwIDAgMS0uMTUuMDg0Ljc1Ljc1IDAgMCAxLS44MjEtLjE2TDYuMTcgNy4zMDRjLS4yNTguMTEtLjUxLjIzMy0uNzU3LjM2NWw2LjIzOSA2LjI0LS4wMDYuMDA1Ljc4Ljc4Yy0uMzg4LjA5NC0uNzguMTY2LTEuMTc0LjIxNWwtMS4xMS0xLjExaC4wMTFMNC41NSA4LjE5N2E3LjIgNy4yIDAgMCAwLS42NjUuNTE0bC0uMTEyLjA5OCA0Ljg5NyA0Ljg5Ny0uMDA1LjAwNiAxLjI3NiAxLjI3NmExMC4xNjQgMTAuMTY0IDAgMCAxLTEuNDc3LS4xMTdsLS40NzktLjQ3OS0uMDA5LjAwOS00Ljg2My00Ljg2My0uMDIyLjAzMWEyLjU2MyAyLjU2MyAwIDAgMC0uMTI0LjJjLS4wNDMuMDc3LS4wOC4xNTgtLjEwOC4yNDFhLjUzNC41MzQgMCAwIDAtLjAyOC4xMzMuMjkuMjkgMCAwIDAgLjAwOC4wNzIuOTI3LjkyNyAwIDAgMCAuMDgyLjIyNmMuMDY3LjEzMy4xNDUuMjYuMjM0LjM3OWwzLjI0MiAzLjM2NS4wMjUuMDEuNTkuNjIzYy0zLjI2NS0uOTE4LTUuNTktMy4xNTUtNS41OS00LjY2OCAwLTEuMTk0IDEuNDQ4LTIuODM4IDMuNjYzLTMuOTN6bTcuMDcuNTMxYTQuNjMyIDQuNjMyIDAgMCAxIDEuMTA4IDUuOTkybC4zNDUuMzQ0LjA0Ni0uMDE4YTkuMzEzIDkuMzEzIDAgMCAwIDItMS4xMTJjLjI1Ni0uMTg3LjUtLjM5Mi43MjctLjYxMy4xMzctLjEzNC4yNy0uMjc3LjM5Mi0uNDMxLjA3Mi0uMDkxLjE0MS0uMTg1LjIwMy0uMjg2LjA1Ny0uMDkzLjEwNy0uMTkuMTQ4LS4yOTJhLjcyLjcyIDAgMCAwIC4wMzYtLjEyLjI5LjI5IDAgMCAwIC4wMDgtLjA3Mi40OTIuNDkyIDAgMCAwLS4wMjgtLjEzMy45OTkuOTk5IDAgMCAwLS4wMzYtLjA5NiAyLjE2NSAyLjE2NSAwIDAgMC0uMDcxLS4xNDUgMi45MTcgMi45MTcgMCAwIDAtLjEyNS0uMiAzLjU5MiAzLjU5MiAwIDAgMC0uMjYzLS4zMzUgNS40NDQgNS40NDQgMCAwIDAtLjUzLS41MjMgNy45NTUgNy45NTUgMCAwIDAtMS4wNTQtLjc2OCA5Ljc2NiA5Ljc2NiAwIDAgMC0xLjg3OS0uODkxYy0uMzM3LS4xMTgtLjY4LS4yMTktMS4wMjctLjMwMXptLTIuODUuMjFsLS4wNjkuMDAyYS41MDguNTA4IDAgMCAwLS4yNTQuMDk3LjQ5Ni40OTYgMCAwIDAtLjEwNC42NzkuNDk4LjQ5OCAwIDAgMCAuMzI2LjE5OWwuMDQ1LjAwNWMuMDkxLjAwMy4xODEuMDAzLjI3Mi4wMTJhMi40NSAyLjQ1IDAgMCAxIDIuMDE3IDEuNTEzYy4wMjQuMDYxLjA0My4xMjUuMDY5LjE4NWEuNDk0LjQ5NCAwIDAgMCAuNDUuMjg3aC4wMDhhLjQ5Ni40OTYgMCAwIDAgLjM1LS4xNTguNDgyLjQ4MiAwIDAgMCAuMTMtLjMzNS42MzguNjM4IDAgMCAwLS4wNDgtLjIxOSAzLjM3OSAzLjM3OSAwIDAgMC0uMzYtLjcyMyAzLjQzOCAzLjQzOCAwIDAgMC0yLjc5MS0xLjU0M2wtLjAyOC0uMDAxaC0uMDEzelwiLz48L3N2Zz4nO2Z1bmN0aW9uIG55KHQpe2NvbnN0IGU9dC5wbHVnaW5zLmdldChcIkNvbnRleHR1YWxCYWxsb29uXCIpO2lmKHZ2KHQuZWRpdGluZy52aWV3LmRvY3VtZW50LnNlbGVjdGlvbikpe2NvbnN0IGk9b3kodCk7ZS51cGRhdGVQb3NpdGlvbihpKX19ZnVuY3Rpb24gb3kodCl7Y29uc3QgZT10LmVkaXRpbmcudmlldztjb25zdCBpPW5iLmRlZmF1bHRQb3NpdGlvbnM7cmV0dXJue3RhcmdldDplLmRvbUNvbnZlcnRlci52aWV3VG9Eb20oZS5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCkpLHBvc2l0aW9uczpbaS5ub3J0aEFycm93U291dGgsaS5ub3J0aEFycm93U291dGhXZXN0LGkubm9ydGhBcnJvd1NvdXRoRWFzdCxpLnNvdXRoQXJyb3dOb3J0aCxpLnNvdXRoQXJyb3dOb3J0aFdlc3QsaS5zb3V0aEFycm93Tm9ydGhFYXN0XX19Y2xhc3MgcnkgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2tiXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkltYWdlVGV4dEFsdGVybmF0aXZlVUlcIn1pbml0KCl7dGhpcy5fY3JlYXRlQnV0dG9uKCk7dGhpcy5fY3JlYXRlRm9ybSgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCk7dGhpcy5fZm9ybS5kZXN0cm95KCl9X2NyZWF0ZUJ1dHRvbigpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChcImltYWdlVGV4dEFsdGVybmF0aXZlXCIsaT0+e2NvbnN0IG49dC5jb21tYW5kcy5nZXQoXCJpbWFnZVRleHRBbHRlcm5hdGl2ZVwiKTtjb25zdCBvPW5ldyBoYihpKTtvLnNldCh7bGFiZWw6ZShcImxoXCIpLGljb246aXksdG9vbHRpcDp0cnVlfSk7by5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKG4sXCJpc0VuYWJsZWRcIik7dGhpcy5saXN0ZW5UbyhvLFwiZXhlY3V0ZVwiLCgpPT57dGhpcy5fc2hvd0Zvcm0oKX0pO3JldHVybiBvfSl9X2NyZWF0ZUZvcm0oKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5lZGl0aW5nLnZpZXc7Y29uc3QgaT1lLmRvY3VtZW50O3RoaXMuX2JhbGxvb249dGhpcy5lZGl0b3IucGx1Z2lucy5nZXQoXCJDb250ZXh0dWFsQmFsbG9vblwiKTt0aGlzLl9mb3JtPW5ldyBleSh0LmxvY2FsZSk7dGhpcy5fZm9ybS5yZW5kZXIoKTt0aGlzLmxpc3RlblRvKHRoaXMuX2Zvcm0sXCJzdWJtaXRcIiwoKT0+e3QuZXhlY3V0ZShcImltYWdlVGV4dEFsdGVybmF0aXZlXCIse25ld1ZhbHVlOnRoaXMuX2Zvcm0ubGFiZWxlZElucHV0LmlucHV0Vmlldy5lbGVtZW50LnZhbHVlfSk7dGhpcy5faGlkZUZvcm0odHJ1ZSl9KTt0aGlzLmxpc3RlblRvKHRoaXMuX2Zvcm0sXCJjYW5jZWxcIiwoKT0+e3RoaXMuX2hpZGVGb3JtKHRydWUpfSk7dGhpcy5fZm9ybS5rZXlzdHJva2VzLnNldChcIkVzY1wiLCh0LGUpPT57dGhpcy5faGlkZUZvcm0odHJ1ZSk7ZSgpfSk7dGhpcy5saXN0ZW5Ubyh0LnVpLFwidXBkYXRlXCIsKCk9PntpZighdnYoaS5zZWxlY3Rpb24pKXt0aGlzLl9oaWRlRm9ybSh0cnVlKX1lbHNlIGlmKHRoaXMuX2lzVmlzaWJsZSl7bnkodCl9fSk7RGIoe2VtaXR0ZXI6dGhpcy5fZm9ybSxhY3RpdmF0b3I6KCk9PnRoaXMuX2lzVmlzaWJsZSxjb250ZXh0RWxlbWVudHM6W3RoaXMuX2JhbGxvb24udmlldy5lbGVtZW50XSxjYWxsYmFjazooKT0+dGhpcy5faGlkZUZvcm0oKX0pfV9zaG93Rm9ybSgpe2lmKHRoaXMuX2lzVmlzaWJsZSl7cmV0dXJufWNvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmNvbW1hbmRzLmdldChcImltYWdlVGV4dEFsdGVybmF0aXZlXCIpO2NvbnN0IGk9dGhpcy5fZm9ybS5sYWJlbGVkSW5wdXQ7aWYoIXRoaXMuX2lzSW5CYWxsb29uKXt0aGlzLl9iYWxsb29uLmFkZCh7dmlldzp0aGlzLl9mb3JtLHBvc2l0aW9uOm95KHQpfSl9aS52YWx1ZT1pLmlucHV0Vmlldy5lbGVtZW50LnZhbHVlPWUudmFsdWV8fFwiXCI7dGhpcy5fZm9ybS5sYWJlbGVkSW5wdXQuc2VsZWN0KCl9X2hpZGVGb3JtKHQpe2lmKCF0aGlzLl9pc0luQmFsbG9vbil7cmV0dXJufWlmKHRoaXMuX2Zvcm0uZm9jdXNUcmFja2VyLmlzRm9jdXNlZCl7dGhpcy5fZm9ybS5zYXZlQnV0dG9uVmlldy5mb2N1cygpfXRoaXMuX2JhbGxvb24ucmVtb3ZlKHRoaXMuX2Zvcm0pO2lmKHQpe3RoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5mb2N1cygpfX1nZXQgX2lzVmlzaWJsZSgpe3JldHVybiB0aGlzLl9iYWxsb29uLnZpc2libGVWaWV3PT09dGhpcy5fZm9ybX1nZXQgX2lzSW5CYWxsb29uKCl7cmV0dXJuIHRoaXMuX2JhbGxvb24uaGFzVmlldyh0aGlzLl9mb3JtKX19Y2xhc3Mgc3kgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuWyR2LHJ5XX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkltYWdlVGV4dEFsdGVybmF0aXZlXCJ9fXZhciBheT1pKDY2KTtjbGFzcyBjeSBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bTnYsRnYsc3ldfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSW1hZ2VcIn19Y2xhc3MgbHkgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2tiXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIldpZGdldFRvb2xiYXJSZXBvc2l0b3J5XCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7aWYodC5wbHVnaW5zLmhhcyhcIkJhbGxvb25Ub29sYmFyXCIpKXtjb25zdCBlPXQucGx1Z2lucy5nZXQoXCJCYWxsb29uVG9vbGJhclwiKTt0aGlzLmxpc3RlblRvKGUsXCJzaG93XCIsZT0+e2lmKGh5KHQuZWRpdGluZy52aWV3LmRvY3VtZW50LnNlbGVjdGlvbikpe2Uuc3RvcCgpfX0se3ByaW9yaXR5OlwiaGlnaFwifSl9dGhpcy5fdG9vbGJhckRlZmluaXRpb25zPW5ldyBNYXA7dGhpcy5fYmFsbG9vbj10aGlzLmVkaXRvci5wbHVnaW5zLmdldChcIkNvbnRleHR1YWxCYWxsb29uXCIpO3RoaXMub24oXCJjaGFuZ2U6aXNFbmFibGVkXCIsKCk9Pnt0aGlzLl91cGRhdGVUb29sYmFyc1Zpc2liaWxpdHkoKX0pO3RoaXMubGlzdGVuVG8odC51aSxcInVwZGF0ZVwiLCgpPT57dGhpcy5fdXBkYXRlVG9vbGJhcnNWaXNpYmlsaXR5KCl9KTt0aGlzLmxpc3RlblRvKHQudWkuZm9jdXNUcmFja2VyLFwiY2hhbmdlOmlzRm9jdXNlZFwiLCgpPT57dGhpcy5fdXBkYXRlVG9vbGJhcnNWaXNpYmlsaXR5KCl9LHtwcmlvcml0eTpcImxvd1wifSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKTtmb3IoY29uc3QgdCBvZiB0aGlzLl90b29sYmFyRGVmaW5pdGlvbnMudmFsdWVzKCkpe3Qudmlldy5kZXN0cm95KCl9fXJlZ2lzdGVyKHQse2FyaWFMYWJlbDplLGl0ZW1zOmksZ2V0UmVsYXRlZEVsZW1lbnQ6bixiYWxsb29uQ2xhc3NOYW1lOm89XCJjay10b29sYmFyLWNvbnRhaW5lclwifSl7Y29uc3Qgcj10aGlzLmVkaXRvcjtjb25zdCBzPXIudDtjb25zdCBhPW5ldyBYYihyLmxvY2FsZSk7YS5hcmlhTGFiZWw9ZXx8cyhcImtmXCIpO2lmKHRoaXMuX3Rvb2xiYXJEZWZpbml0aW9ucy5oYXModCkpe3Rocm93IG5ldyBzc1tcImJcIl0oXCJ3aWRnZXQtdG9vbGJhci1kdXBsaWNhdGVkOiBUb29sYmFyIHdpdGggdGhlIGdpdmVuIGlkIHdhcyBhbHJlYWR5IGFkZGVkLlwiLHRoaXMse3Rvb2xiYXJJZDp0fSl9YS5maWxsRnJvbUNvbmZpZyhpLHIudWkuY29tcG9uZW50RmFjdG9yeSk7dGhpcy5fdG9vbGJhckRlZmluaXRpb25zLnNldCh0LHt2aWV3OmEsZ2V0UmVsYXRlZEVsZW1lbnQ6bixiYWxsb29uQ2xhc3NOYW1lOm99KX1fdXBkYXRlVG9vbGJhcnNWaXNpYmlsaXR5KCl7bGV0IHQ9MDtsZXQgZT1udWxsO2xldCBpPW51bGw7Zm9yKGNvbnN0IG4gb2YgdGhpcy5fdG9vbGJhckRlZmluaXRpb25zLnZhbHVlcygpKXtjb25zdCBvPW4uZ2V0UmVsYXRlZEVsZW1lbnQodGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvY3VtZW50LnNlbGVjdGlvbik7aWYoIXRoaXMuaXNFbmFibGVkfHwhbyl7aWYodGhpcy5faXNUb29sYmFySW5CYWxsb29uKG4pKXt0aGlzLl9oaWRlVG9vbGJhcihuKX19ZWxzZSBpZighdGhpcy5lZGl0b3IudWkuZm9jdXNUcmFja2VyLmlzRm9jdXNlZCl7aWYodGhpcy5faXNUb29sYmFyVmlzaWJsZShuKSl7dGhpcy5faGlkZVRvb2xiYXIobil9fWVsc2V7Y29uc3Qgcj1vLmdldEFuY2VzdG9ycygpLmxlbmd0aDtpZihyPnQpe3Q9cjtlPW87aT1ufX19aWYoaSl7dGhpcy5fc2hvd1Rvb2xiYXIoaSxlKX19X2hpZGVUb29sYmFyKHQpe3RoaXMuX2JhbGxvb24ucmVtb3ZlKHQudmlldyk7dGhpcy5zdG9wTGlzdGVuaW5nKHRoaXMuX2JhbGxvb24sXCJjaGFuZ2U6dmlzaWJsZVZpZXdcIil9X3Nob3dUb29sYmFyKHQsZSl7aWYodGhpcy5faXNUb29sYmFyVmlzaWJsZSh0KSl7ZHkodGhpcy5lZGl0b3IsZSl9ZWxzZSBpZighdGhpcy5faXNUb29sYmFySW5CYWxsb29uKHQpKXt0aGlzLl9iYWxsb29uLmFkZCh7dmlldzp0LnZpZXcscG9zaXRpb246dXkodGhpcy5lZGl0b3IsZSksYmFsbG9vbkNsYXNzTmFtZTp0LmJhbGxvb25DbGFzc05hbWV9KTt0aGlzLmxpc3RlblRvKHRoaXMuX2JhbGxvb24sXCJjaGFuZ2U6dmlzaWJsZVZpZXdcIiwoKT0+e2Zvcihjb25zdCB0IG9mIHRoaXMuX3Rvb2xiYXJEZWZpbml0aW9ucy52YWx1ZXMoKSl7aWYodGhpcy5faXNUb29sYmFyVmlzaWJsZSh0KSl7Y29uc3QgZT10LmdldFJlbGF0ZWRFbGVtZW50KHRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5kb2N1bWVudC5zZWxlY3Rpb24pO2R5KHRoaXMuZWRpdG9yLGUpfX19KX19X2lzVG9vbGJhclZpc2libGUodCl7cmV0dXJuIHRoaXMuX2JhbGxvb24udmlzaWJsZVZpZXc9PT10LnZpZXd9X2lzVG9vbGJhckluQmFsbG9vbih0KXtyZXR1cm4gdGhpcy5fYmFsbG9vbi5oYXNWaWV3KHQudmlldyl9fWZ1bmN0aW9uIGR5KHQsZSl7Y29uc3QgaT10LnBsdWdpbnMuZ2V0KFwiQ29udGV4dHVhbEJhbGxvb25cIik7Y29uc3Qgbj11eSh0LGUpO2kudXBkYXRlUG9zaXRpb24obil9ZnVuY3Rpb24gdXkodCxlKXtjb25zdCBpPXQuZWRpdGluZy52aWV3O2NvbnN0IG49bmIuZGVmYXVsdFBvc2l0aW9ucztyZXR1cm57dGFyZ2V0OmkuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbShlKSxwb3NpdGlvbnM6W24ubm9ydGhBcnJvd1NvdXRoLG4ubm9ydGhBcnJvd1NvdXRoV2VzdCxuLm5vcnRoQXJyb3dTb3V0aEVhc3Qsbi5zb3V0aEFycm93Tm9ydGgsbi5zb3V0aEFycm93Tm9ydGhXZXN0LG4uc291dGhBcnJvd05vcnRoRWFzdF19fWZ1bmN0aW9uIGh5KHQpe2NvbnN0IGU9dC5nZXRTZWxlY3RlZEVsZW1lbnQoKTtyZXR1cm4hIShlJiZRXyhlKSl9Y2xhc3MgZnkgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2x5XX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkltYWdlVG9vbGJhclwifWFmdGVySW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7Y29uc3QgaT10LnBsdWdpbnMuZ2V0KGx5KTtpLnJlZ2lzdGVyKFwiaW1hZ2VcIix7YXJpYUxhYmVsOmUoXCJhXCIpLGl0ZW1zOnQuY29uZmlnLmdldChcImltYWdlLnRvb2xiYXJcIil8fFtdLGdldFJlbGF0ZWRFbGVtZW50OnZ2fSl9fWNsYXNzIGd5IGV4dGVuZHMgand7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLmRlZmF1bHRTdHlsZT1mYWxzZTt0aGlzLnN0eWxlcz1lLnJlZHVjZSgodCxlKT0+e3RbZS5uYW1lXT1lO2lmKGUuaXNEZWZhdWx0KXt0aGlzLmRlZmF1bHRTdHlsZT1lLm5hbWV9cmV0dXJuIHR9LHt9KX1yZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCk7dGhpcy5pc0VuYWJsZWQ9eXYodCk7aWYoIXQpe3RoaXMudmFsdWU9ZmFsc2V9ZWxzZSBpZih0Lmhhc0F0dHJpYnV0ZShcImltYWdlU3R5bGVcIikpe2NvbnN0IGU9dC5nZXRBdHRyaWJ1dGUoXCJpbWFnZVN0eWxlXCIpO3RoaXMudmFsdWU9dGhpcy5zdHlsZXNbZV0/ZTpmYWxzZX1lbHNle3RoaXMudmFsdWU9dGhpcy5kZWZhdWx0U3R5bGV9fWV4ZWN1dGUodCl7Y29uc3QgZT10LnZhbHVlO2NvbnN0IGk9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3Qgbj1pLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKTtpLmNoYW5nZSh0PT57aWYodGhpcy5zdHlsZXNbZV0uaXNEZWZhdWx0KXt0LnJlbW92ZUF0dHJpYnV0ZShcImltYWdlU3R5bGVcIixuKX1lbHNle3Quc2V0QXR0cmlidXRlKFwiaW1hZ2VTdHlsZVwiLGUsbil9fSl9fWZ1bmN0aW9uIG15KHQpe3JldHVybihlLGksbik9PntpZighbi5jb25zdW1hYmxlLmNvbnN1bWUoaS5pdGVtLGUubmFtZSkpe3JldHVybn1jb25zdCBvPWJ5KGkuYXR0cmlidXRlTmV3VmFsdWUsdCk7Y29uc3Qgcj1ieShpLmF0dHJpYnV0ZU9sZFZhbHVlLHQpO2NvbnN0IHM9bi5tYXBwZXIudG9WaWV3RWxlbWVudChpLml0ZW0pO2NvbnN0IGE9bi53cml0ZXI7aWYocil7YS5yZW1vdmVDbGFzcyhyLmNsYXNzTmFtZSxzKX1pZihvKXthLmFkZENsYXNzKG8uY2xhc3NOYW1lLHMpfX19ZnVuY3Rpb24gcHkodCl7Y29uc3QgZT10LmZpbHRlcih0PT4hdC5pc0RlZmF1bHQpO3JldHVybih0LGksbik9PntpZighaS5tb2RlbFJhbmdlKXtyZXR1cm59Y29uc3Qgbz1pLnZpZXdJdGVtO2NvbnN0IHI9V3coaS5tb2RlbFJhbmdlLmdldEl0ZW1zKCkpO2lmKCFuLnNjaGVtYS5jaGVja0F0dHJpYnV0ZShyLFwiaW1hZ2VTdHlsZVwiKSl7cmV0dXJufWZvcihjb25zdCB0IG9mIGUpe2lmKG4uY29uc3VtYWJsZS5jb25zdW1lKG8se2NsYXNzZXM6dC5jbGFzc05hbWV9KSl7bi53cml0ZXIuc2V0QXR0cmlidXRlKFwiaW1hZ2VTdHlsZVwiLHQubmFtZSxyKX19fX1mdW5jdGlvbiBieSh0LGUpe2Zvcihjb25zdCBpIG9mIGUpe2lmKGkubmFtZT09PXQpe3JldHVybiBpfX19dmFyIHd5PSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0yIDQuNVYzaDE2djEuNXptMi41IDNWMTJoMTFWNy41aC0xMXpNNC4wNjEgNkgxNS45NGMuNTg2IDAgMS4wNjEuNDA3IDEuMDYxLjkxdjUuNjhjMCAuNTAzLS40NzUuOTEtMS4wNjEuOTFINC4wNmMtLjU4NSAwLTEuMDYtLjQwNy0xLjA2LS45MVY2LjkxQzMgNi40MDYgMy40NzUgNiA0LjA2MSA2ek0yIDE2LjVWMTVoMTZ2MS41elwiLz48L3N2Zz4nO3ZhciBreT0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS1taXRlcmxpbWl0PVwiMS40MTRcIj48cGF0aCBkPVwiTTE4IDQuNVYzSDJ2MS41aDE2em0wIDNWNmgtNS42NzR2MS41SDE4em0wIDNWOWgtNS42NzR2MS41SDE4em0wIDNWMTJoLTUuNjc0djEuNUgxOHptLTguNS02VjEyaC02VjcuNWg2em0uODE4LTEuNUgyLjY4MkMyLjMwNSA2IDIgNi40MDcgMiA2LjkxdjUuNjhjMCAuNTAzLjMwNS45MS42ODIuOTFoNy42MzZjLjM3NyAwIC42ODItLjQwNy42ODItLjkxVjYuOTFjMC0uNTAzLS4zMDUtLjkxLS42ODItLjkxek0xOCAxNi41VjE1SDJ2MS41aDE2elwiLz48L3N2Zz4nO3ZhciBfeT0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMiA0LjVWM2gxNnYxLjV6bTQuNSAzVjEyaDdWNy41aC03ek01Ljc1OCA2aDguNDg0Yy40MTkgMCAuNzU4LjQwNy43NTguOTF2NS42ODFjMCAuNTAyLS4zNC45MDktLjc1OC45MDlINS43NThjLS40MTkgMC0uNzU4LS40MDctLjc1OC0uOTFWNi45MWMwLS41MDMuMzQtLjkxLjc1OC0uOTF6TTIgMTYuNVYxNWgxNnYxLjV6XCIvPjwvc3ZnPic7dmFyIHZ5PSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0yIDQuNVYzaDE2djEuNXptMCAzVjZoNS42NzR2MS41em0wIDNWOWg1LjY3NHYxLjV6bTAgM1YxMmg1LjY3NHYxLjV6bTguNS02VjEyaDZWNy41aC02ek05LjY4MiA2aDcuNjM2Yy4zNzcgMCAuNjgyLjQwNy42ODIuOTF2NS42OGMwIC41MDMtLjMwNS45MS0uNjgyLjkxSDkuNjgyYy0uMzc3IDAtLjY4Mi0uNDA3LS42ODItLjkxVjYuOTFjMC0uNTAzLjMwNS0uOTEuNjgyLS45MXpNMiAxNi41VjE1aDE2djEuNXpcIi8+PC9zdmc+Jztjb25zdCB5eT17ZnVsbDp7bmFtZTpcImZ1bGxcIix0aXRsZTpcIkZ1bGwgc2l6ZSBpbWFnZVwiLGljb246d3ksaXNEZWZhdWx0OnRydWV9LHNpZGU6e25hbWU6XCJzaWRlXCIsdGl0bGU6XCJTaWRlIGltYWdlXCIsaWNvbjp2eSxjbGFzc05hbWU6XCJpbWFnZS1zdHlsZS1zaWRlXCJ9LGFsaWduTGVmdDp7bmFtZTpcImFsaWduTGVmdFwiLHRpdGxlOlwiTGVmdCBhbGlnbmVkIGltYWdlXCIsaWNvbjpreSxjbGFzc05hbWU6XCJpbWFnZS1zdHlsZS1hbGlnbi1sZWZ0XCJ9LGFsaWduQ2VudGVyOntuYW1lOlwiYWxpZ25DZW50ZXJcIix0aXRsZTpcIkNlbnRlcmVkIGltYWdlXCIsaWNvbjpfeSxjbGFzc05hbWU6XCJpbWFnZS1zdHlsZS1hbGlnbi1jZW50ZXJcIn0sYWxpZ25SaWdodDp7bmFtZTpcImFsaWduUmlnaHRcIix0aXRsZTpcIlJpZ2h0IGFsaWduZWQgaW1hZ2VcIixpY29uOnZ5LGNsYXNzTmFtZTpcImltYWdlLXN0eWxlLWFsaWduLXJpZ2h0XCJ9fTtjb25zdCB4eT17ZnVsbDp3eSxsZWZ0Omt5LHJpZ2h0OnZ5LGNlbnRlcjpfeX07ZnVuY3Rpb24gQ3kodD1bXSl7cmV0dXJuIHQubWFwKEF5KX1mdW5jdGlvbiBBeSh0KXtpZih0eXBlb2YgdD09XCJzdHJpbmdcIil7Y29uc3QgZT10O2lmKHl5W2VdKXt0PU9iamVjdC5hc3NpZ24oe30seXlbZV0pfWVsc2V7Y29uc29sZS53YXJuKE9iamVjdChzc1tcImFcIl0pKFwiaW1hZ2Utc3R5bGUtbm90LWZvdW5kOiBUaGVyZSBpcyBubyBzdWNoIGltYWdlIHN0eWxlIG9mIGdpdmVuIG5hbWUuXCIpLHtuYW1lOmV9KTt0PXtuYW1lOmV9fX1lbHNlIGlmKHl5W3QubmFtZV0pe2NvbnN0IGU9eXlbdC5uYW1lXTtjb25zdCBpPU9iamVjdC5hc3NpZ24oe30sdCk7Zm9yKGNvbnN0IG4gaW4gZSl7aWYoIXQuaGFzT3duUHJvcGVydHkobikpe2lbbl09ZVtuXX19dD1pfWlmKHR5cGVvZiB0Lmljb249PVwic3RyaW5nXCImJnh5W3QuaWNvbl0pe3QuaWNvbj14eVt0Lmljb25dfXJldHVybiB0fWNsYXNzIFR5IGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJbWFnZVN0eWxlRWRpdGluZ1wifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbC5zY2hlbWE7Y29uc3QgaT10LmRhdGE7Y29uc3Qgbj10LmVkaXRpbmc7dC5jb25maWcuZGVmaW5lKFwiaW1hZ2Uuc3R5bGVzXCIsW1wiZnVsbFwiLFwic2lkZVwiXSk7Y29uc3Qgbz1DeSh0LmNvbmZpZy5nZXQoXCJpbWFnZS5zdHlsZXNcIikpO2UuZXh0ZW5kKFwiaW1hZ2VcIix7YWxsb3dBdHRyaWJ1dGVzOlwiaW1hZ2VTdHlsZVwifSk7Y29uc3Qgcj1teShvKTtuLmRvd25jYXN0RGlzcGF0Y2hlci5vbihcImF0dHJpYnV0ZTppbWFnZVN0eWxlOmltYWdlXCIscik7aS5kb3duY2FzdERpc3BhdGNoZXIub24oXCJhdHRyaWJ1dGU6aW1hZ2VTdHlsZTppbWFnZVwiLHIpO2kudXBjYXN0RGlzcGF0Y2hlci5vbihcImVsZW1lbnQ6ZmlndXJlXCIscHkobykse3ByaW9yaXR5OlwibG93XCJ9KTt0LmNvbW1hbmRzLmFkZChcImltYWdlU3R5bGVcIixuZXcgZ3kodCxvKSl9fXZhciBQeT1pKDY4KTtjbGFzcyBTeSBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSW1hZ2VTdHlsZVVJXCJ9Z2V0IGxvY2FsaXplZERlZmF1bHRTdHlsZXNUaXRsZXMoKXtjb25zdCB0PXRoaXMuZWRpdG9yLnQ7cmV0dXJue1wiRnVsbCBzaXplIGltYWdlXCI6dChcImp5XCIpLFwiU2lkZSBpbWFnZVwiOnQoXCJqelwiKSxcIkxlZnQgYWxpZ25lZCBpbWFnZVwiOnQoXCJrYVwiKSxcIkNlbnRlcmVkIGltYWdlXCI6dChcImtiXCIpLFwiUmlnaHQgYWxpZ25lZCBpbWFnZVwiOnQoXCJrY1wiKX19aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmNvbmZpZy5nZXQoXCJpbWFnZS5zdHlsZXNcIik7Y29uc3QgaT1FeShDeShlKSx0aGlzLmxvY2FsaXplZERlZmF1bHRTdHlsZXNUaXRsZXMpO2Zvcihjb25zdCB0IG9mIGkpe3RoaXMuX2NyZWF0ZUJ1dHRvbih0KX19X2NyZWF0ZUJ1dHRvbih0KXtjb25zdCBlPXRoaXMuZWRpdG9yO2NvbnN0IGk9YGltYWdlU3R5bGU6JHt0Lm5hbWV9YDtlLnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKGksaT0+e2NvbnN0IG49ZS5jb21tYW5kcy5nZXQoXCJpbWFnZVN0eWxlXCIpO2NvbnN0IG89bmV3IGhiKGkpO28uc2V0KHtsYWJlbDp0LnRpdGxlLGljb246dC5pY29uLHRvb2x0aXA6dHJ1ZSxpc1RvZ2dsZWFibGU6dHJ1ZX0pO28uYmluZChcImlzRW5hYmxlZFwiKS50byhuLFwiaXNFbmFibGVkXCIpO28uYmluZChcImlzT25cIikudG8obixcInZhbHVlXCIsZT0+ZT09PXQubmFtZSk7dGhpcy5saXN0ZW5UbyhvLFwiZXhlY3V0ZVwiLCgpPT57ZS5leGVjdXRlKFwiaW1hZ2VTdHlsZVwiLHt2YWx1ZTp0Lm5hbWV9KTtlLmVkaXRpbmcudmlldy5mb2N1cygpfSk7cmV0dXJuIG99KX19ZnVuY3Rpb24gRXkodCxlKXtmb3IoY29uc3QgaSBvZiB0KXtpZihlW2kudGl0bGVdKXtpLnRpdGxlPWVbaS50aXRsZV19fXJldHVybiB0fWNsYXNzIFJ5IGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltUeSxTeV19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJbWFnZVN0eWxlXCJ9fWNsYXNzIE95e2NvbnN0cnVjdG9yKHQpe3RoaXMuc2V0KFwiYWN0aXZlSGFuZGxlUG9zaXRpb25cIixudWxsKTt0aGlzLnNldChcInByb3Bvc2VkV2lkdGhQZXJjZW50c1wiLG51bGwpO3RoaXMuc2V0KFwicHJvcG9zZWRXaWR0aFwiLG51bGwpO3RoaXMuc2V0KFwicHJvcG9zZWRIZWlnaHRcIixudWxsKTt0aGlzLnNldChcInByb3Bvc2VkSGFuZGxlSG9zdFdpZHRoXCIsbnVsbCk7dGhpcy5zZXQoXCJwcm9wb3NlZEhhbmRsZUhvc3RIZWlnaHRcIixudWxsKTt0aGlzLl9vcHRpb25zPXQ7dGhpcy5fcmVmZXJlbmNlQ29vcmRpbmF0ZXM9bnVsbH1iZWdpbih0LGUsaSl7Y29uc3Qgbj1uZXcgdmgoZSk7dGhpcy5hY3RpdmVIYW5kbGVQb3NpdGlvbj1NeSh0KTt0aGlzLl9yZWZlcmVuY2VDb29yZGluYXRlcz1WeShlLEJ5KHRoaXMuYWN0aXZlSGFuZGxlUG9zaXRpb24pKTt0aGlzLm9yaWdpbmFsV2lkdGg9bi53aWR0aDt0aGlzLm9yaWdpbmFsSGVpZ2h0PW4uaGVpZ2h0O3RoaXMuYXNwZWN0UmF0aW89bi53aWR0aC9uLmhlaWdodDtjb25zdCBvPWkuc3R5bGUud2lkdGg7aWYobyYmby5tYXRjaCgvXlxcZCtcXC4/XFxkKiUkLykpe3RoaXMub3JpZ2luYWxXaWR0aFBlcmNlbnRzPXBhcnNlRmxvYXQobyl9ZWxzZXt0aGlzLm9yaWdpbmFsV2lkdGhQZXJjZW50cz1JeShpLG4pfX11cGRhdGUodCl7dGhpcy5wcm9wb3NlZFdpZHRoPXQud2lkdGg7dGhpcy5wcm9wb3NlZEhlaWdodD10LmhlaWdodDt0aGlzLnByb3Bvc2VkV2lkdGhQZXJjZW50cz10LndpZHRoUGVyY2VudHM7dGhpcy5wcm9wb3NlZEhhbmRsZUhvc3RXaWR0aD10LmhhbmRsZUhvc3RXaWR0aDt0aGlzLnByb3Bvc2VkSGFuZGxlSG9zdEhlaWdodD10LmhhbmRsZUhvc3RIZWlnaHR9fXZzKE95LEpjKTtmdW5jdGlvbiBJeSh0LGUpe2NvbnN0IGk9dC5wYXJlbnRFbGVtZW50O2NvbnN0IG49cGFyc2VGbG9hdChpLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShpKS53aWR0aCk7cmV0dXJuIGUud2lkdGgvbioxMDB9ZnVuY3Rpb24gVnkodCxlKXtjb25zdCBpPW5ldyB2aCh0KTtjb25zdCBuPWUuc3BsaXQoXCItXCIpO2NvbnN0IG89e3g6blsxXT09XCJyaWdodFwiP2kucmlnaHQ6aS5sZWZ0LHk6blswXT09XCJib3R0b21cIj9pLmJvdHRvbTppLnRvcH07by54Kz10Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuc2Nyb2xsWDtvLnkrPXQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5zY3JvbGxZO3JldHVybiBvfWZ1bmN0aW9uIE55KHQpe3JldHVybmBjay13aWRnZXRfX3Jlc2l6ZXJfX2hhbmRsZS0ke3R9YH1mdW5jdGlvbiBNeSh0KXtjb25zdCBlPVtcInRvcC1sZWZ0XCIsXCJ0b3AtcmlnaHRcIixcImJvdHRvbS1yaWdodFwiLFwiYm90dG9tLWxlZnRcIl07Zm9yKGNvbnN0IGkgb2YgZSl7aWYodC5jbGFzc0xpc3QuY29udGFpbnMoTnkoaSkpKXtyZXR1cm4gaX19fWZ1bmN0aW9uIEJ5KHQpe2NvbnN0IGU9dC5zcGxpdChcIi1cIik7Y29uc3QgaT17dG9wOlwiYm90dG9tXCIsYm90dG9tOlwidG9wXCIsbGVmdDpcInJpZ2h0XCIscmlnaHQ6XCJsZWZ0XCJ9O3JldHVybmAke2lbZVswXV19LSR7aVtlWzFdXX1gfWNsYXNzIHp5e2NvbnN0cnVjdG9yKHQpe3RoaXMuX29wdGlvbnM9dDt0aGlzLl9kb21SZXNpemVyV3JhcHBlcj1udWxsO3RoaXMuX3ZpZXdSZXNpemVyV3JhcHBlcj1udWxsO3RoaXMuc2V0KFwiaXNFbmFibGVkXCIsdHJ1ZSk7dGhpcy5kZWNvcmF0ZShcImJlZ2luXCIpO3RoaXMuZGVjb3JhdGUoXCJjYW5jZWxcIik7dGhpcy5kZWNvcmF0ZShcImNvbW1pdFwiKTt0aGlzLmRlY29yYXRlKFwidXBkYXRlU2l6ZVwiKTt0aGlzLm9uKFwiY29tbWl0XCIsdD0+e2lmKCF0aGlzLnN0YXRlLnByb3Bvc2VkV2lkdGgmJiF0aGlzLnN0YXRlLnByb3Bvc2VkV2lkdGhQZXJjZW50cyl7dGhpcy5fY2xlYW51cCgpO3Quc3RvcCgpfX0se3ByaW9yaXR5OlwiaGlnaFwifSl9YXR0YWNoKCl7Y29uc3QgdD10aGlzO2NvbnN0IGU9dGhpcy5fb3B0aW9ucy52aWV3RWxlbWVudDtjb25zdCBpPXRoaXMuX29wdGlvbnMuZWRpdG9yLmVkaXRpbmcudmlldztpLmNoYW5nZShpPT57Y29uc3Qgbj1pLmNyZWF0ZVVJRWxlbWVudChcImRpdlwiLHtjbGFzczpcImNrIGNrLXJlc2V0X2FsbCBjay13aWRnZXRfX3Jlc2l6ZXJcIn0sKGZ1bmN0aW9uKGUpe2NvbnN0IGk9dGhpcy50b0RvbUVsZW1lbnQoZSk7dC5fYXBwZW5kSGFuZGxlcyhpKTt0Ll9hcHBlbmRTaXplVUkoaSk7dC5fZG9tUmVzaXplcldyYXBwZXI9aTt0Lm9uKFwiY2hhbmdlOmlzRW5hYmxlZFwiLCh0LGUsbik9PntpLnN0eWxlLmRpc3BsYXk9bj9cIlwiOlwibm9uZVwifSk7aS5zdHlsZS5kaXNwbGF5PXQuaXNFbmFibGVkP1wiXCI6XCJub25lXCI7cmV0dXJuIGl9KSk7aS5pbnNlcnQoaS5jcmVhdGVQb3NpdGlvbkF0KGUsXCJlbmRcIiksbik7aS5hZGRDbGFzcyhcImNrLXdpZGdldF93aXRoLXJlc2l6ZXJcIixlKTt0aGlzLl92aWV3UmVzaXplcldyYXBwZXI9bn0pfWJlZ2luKHQpe3RoaXMuc3RhdGU9bmV3IE95KHRoaXMuX29wdGlvbnMpO3RoaXMuX3NpemVVSS5iaW5kVG9TdGF0ZSh0aGlzLl9vcHRpb25zLHRoaXMuc3RhdGUpO3RoaXMuc3RhdGUuYmVnaW4odCx0aGlzLl9nZXRIYW5kbGVIb3N0KCksdGhpcy5fZ2V0UmVzaXplSG9zdCgpKX11cGRhdGVTaXplKHQpe2NvbnN0IGU9dGhpcy5fcHJvcG9zZU5ld1NpemUodCk7Y29uc3QgaT10aGlzLl9vcHRpb25zLmVkaXRvci5lZGl0aW5nLnZpZXc7aS5jaGFuZ2UodD0+e2NvbnN0IGk9dGhpcy5fb3B0aW9ucy51bml0fHxcIiVcIjtjb25zdCBuPShpPT09XCIlXCI/ZS53aWR0aFBlcmNlbnRzOmUud2lkdGgpK2k7dC5zZXRTdHlsZShcIndpZHRoXCIsbix0aGlzLl9vcHRpb25zLnZpZXdFbGVtZW50KX0pO2NvbnN0IG49dGhpcy5fZ2V0SGFuZGxlSG9zdCgpO2NvbnN0IG89bmV3IHZoKG4pO2UuaGFuZGxlSG9zdFdpZHRoPU1hdGgucm91bmQoby53aWR0aCk7ZS5oYW5kbGVIb3N0SGVpZ2h0PU1hdGgucm91bmQoby5oZWlnaHQpO2NvbnN0IHI9bmV3IHZoKG4pO2Uud2lkdGg9TWF0aC5yb3VuZChyLndpZHRoKTtlLmhlaWdodD1NYXRoLnJvdW5kKHIuaGVpZ2h0KTt0aGlzLnJlZHJhdyhvKTt0aGlzLnN0YXRlLnVwZGF0ZShlKX1jb21taXQoKXtjb25zdCB0PXRoaXMuX29wdGlvbnMudW5pdHx8XCIlXCI7Y29uc3QgZT0odD09PVwiJVwiP3RoaXMuc3RhdGUucHJvcG9zZWRXaWR0aFBlcmNlbnRzOnRoaXMuc3RhdGUucHJvcG9zZWRXaWR0aCkrdDt0aGlzLl9vcHRpb25zLm9uQ29tbWl0KGUpO3RoaXMuX2NsZWFudXAoKX1jYW5jZWwoKXt0aGlzLl9jbGVhbnVwKCl9ZGVzdHJveSgpe3RoaXMuY2FuY2VsKCl9cmVkcmF3KHQpe2NvbnN0IGU9dGhpcy5fZG9tUmVzaXplcldyYXBwZXI7aWYoaShlKSl7dGhpcy5fb3B0aW9ucy5lZGl0b3IuZWRpdGluZy52aWV3LmNoYW5nZShpPT57Y29uc3Qgbj1lLnBhcmVudEVsZW1lbnQ7Y29uc3Qgbz10aGlzLl9nZXRIYW5kbGVIb3N0KCk7Y29uc3Qgcj10fHxuZXcgdmgobyk7aS5zZXRTdHlsZShcIndpZHRoXCIsci53aWR0aCtcInB4XCIsdGhpcy5fdmlld1Jlc2l6ZXJXcmFwcGVyKTtpLnNldFN0eWxlKFwiaGVpZ2h0XCIsci5oZWlnaHQrXCJweFwiLHRoaXMuX3ZpZXdSZXNpemVyV3JhcHBlcik7Y29uc3Qgcz17bGVmdDpvLm9mZnNldExlZnQsdG9wOm8ub2Zmc2V0VG9wLGhlaWdodDpvLm9mZnNldEhlaWdodCx3aWR0aDpvLm9mZnNldFdpZHRofTtpZighbi5pc1NhbWVOb2RlKG8pKXtpLnNldFN0eWxlKFwibGVmdFwiLHMubGVmdCtcInB4XCIsdGhpcy5fdmlld1Jlc2l6ZXJXcmFwcGVyKTtpLnNldFN0eWxlKFwidG9wXCIscy50b3ArXCJweFwiLHRoaXMuX3ZpZXdSZXNpemVyV3JhcHBlcik7aS5zZXRTdHlsZShcImhlaWdodFwiLHMuaGVpZ2h0K1wicHhcIix0aGlzLl92aWV3UmVzaXplcldyYXBwZXIpO2kuc2V0U3R5bGUoXCJ3aWR0aFwiLHMud2lkdGgrXCJweFwiLHRoaXMuX3ZpZXdSZXNpemVyV3JhcHBlcil9fSl9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5vd25lckRvY3VtZW50JiZ0Lm93bmVyRG9jdW1lbnQuY29udGFpbnModCl9fWNvbnRhaW5zSGFuZGxlKHQpe3JldHVybiB0aGlzLl9kb21SZXNpemVyV3JhcHBlci5jb250YWlucyh0KX1zdGF0aWMgaXNSZXNpemVIYW5kbGUodCl7cmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2std2lkZ2V0X19yZXNpemVyX19oYW5kbGVcIil9X2NsZWFudXAoKXt0aGlzLl9zaXplVUkuZGlzbWlzcygpO3RoaXMuX3NpemVVSS5pc1Zpc2libGU9ZmFsc2V9X3Byb3Bvc2VOZXdTaXplKHQpe2NvbnN0IGU9dGhpcy5zdGF0ZTtjb25zdCBpPUR5KHQpO2NvbnN0IG49dGhpcy5fb3B0aW9ucy5pc0NlbnRlcmVkP3RoaXMuX29wdGlvbnMuaXNDZW50ZXJlZCh0aGlzKTp0cnVlO2NvbnN0IG89e3g6ZS5fcmVmZXJlbmNlQ29vcmRpbmF0ZXMueC0oaS54K2Uub3JpZ2luYWxXaWR0aCkseTppLnktZS5vcmlnaW5hbEhlaWdodC1lLl9yZWZlcmVuY2VDb29yZGluYXRlcy55fTtpZihuJiZlLmFjdGl2ZUhhbmRsZVBvc2l0aW9uLmVuZHNXaXRoKFwiLXJpZ2h0XCIpKXtvLng9aS54LShlLl9yZWZlcmVuY2VDb29yZGluYXRlcy54K2Uub3JpZ2luYWxXaWR0aCl9aWYobil7by54Kj0yfWNvbnN0IHI9e3dpZHRoOk1hdGguYWJzKGUub3JpZ2luYWxXaWR0aCtvLngpLGhlaWdodDpNYXRoLmFicyhlLm9yaWdpbmFsSGVpZ2h0K28ueSl9O3IuZG9taW5hbnQ9ci53aWR0aC9lLmFzcGVjdFJhdGlvPnIuaGVpZ2h0P1wid2lkdGhcIjpcImhlaWdodFwiO3IubWF4PXJbci5kb21pbmFudF07Y29uc3Qgcz17d2lkdGg6ci53aWR0aCxoZWlnaHQ6ci5oZWlnaHR9O2lmKHIuZG9taW5hbnQ9PVwid2lkdGhcIil7cy5oZWlnaHQ9cy53aWR0aC9lLmFzcGVjdFJhdGlvfWVsc2V7cy53aWR0aD1zLmhlaWdodCplLmFzcGVjdFJhdGlvfXJldHVybnt3aWR0aDpNYXRoLnJvdW5kKHMud2lkdGgpLGhlaWdodDpNYXRoLnJvdW5kKHMuaGVpZ2h0KSx3aWR0aFBlcmNlbnRzOk1hdGgubWluKE1hdGgucm91bmQoZS5vcmlnaW5hbFdpZHRoUGVyY2VudHMvZS5vcmlnaW5hbFdpZHRoKnMud2lkdGgqMTAwKS8xMDAsMTAwKX19X2dldFJlc2l6ZUhvc3QoKXtjb25zdCB0PXRoaXMuX2RvbVJlc2l6ZXJXcmFwcGVyLnBhcmVudEVsZW1lbnQ7cmV0dXJuIHRoaXMuX29wdGlvbnMuZ2V0UmVzaXplSG9zdCh0KX1fZ2V0SGFuZGxlSG9zdCgpe2NvbnN0IHQ9dGhpcy5fZG9tUmVzaXplcldyYXBwZXIucGFyZW50RWxlbWVudDtyZXR1cm4gdGhpcy5fb3B0aW9ucy5nZXRIYW5kbGVIb3N0KHQpfV9hcHBlbmRIYW5kbGVzKHQpe2NvbnN0IGU9W1widG9wLWxlZnRcIixcInRvcC1yaWdodFwiLFwiYm90dG9tLXJpZ2h0XCIsXCJib3R0b20tbGVmdFwiXTtmb3IoY29uc3QgaSBvZiBlKXt0LmFwcGVuZENoaWxkKG5ldyBfcCh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6YGNrLXdpZGdldF9fcmVzaXplcl9faGFuZGxlICR7RnkoaSl9YH19KS5yZW5kZXIoKSl9fV9hcHBlbmRTaXplVUkodCl7Y29uc3QgZT1uZXcgTHk7ZS5yZW5kZXIoKTt0aGlzLl9zaXplVUk9ZTt0LmFwcGVuZENoaWxkKGUuZWxlbWVudCl9fXZzKHp5LEpjKTtjbGFzcyBMeSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKCl7c3VwZXIoKTtjb25zdCB0PXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImRpdlwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1zaXplLXZpZXdcIix0LnRvKFwiYWN0aXZlSGFuZGxlUG9zaXRpb25cIix0PT50P2Bjay1vcmllbnRhdGlvbi0ke3R9YDpcIlwiKV0sc3R5bGU6e2Rpc3BsYXk6dC5pZihcImlzVmlzaWJsZVwiLFwibm9uZVwiLHQ9PiF0KX19LGNoaWxkcmVuOlt7dGV4dDp0LnRvKFwibGFiZWxcIil9XX0pfWJpbmRUb1N0YXRlKHQsZSl7dGhpcy5iaW5kKFwiaXNWaXNpYmxlXCIpLnRvKGUsXCJwcm9wb3NlZFdpZHRoXCIsZSxcInByb3Bvc2VkSGVpZ2h0XCIsKHQsZSk9PnQhPT1udWxsJiZlIT09bnVsbCk7dGhpcy5iaW5kKFwibGFiZWxcIikudG8oZSxcInByb3Bvc2VkSGFuZGxlSG9zdFdpZHRoXCIsZSxcInByb3Bvc2VkSGFuZGxlSG9zdEhlaWdodFwiLGUsXCJwcm9wb3NlZFdpZHRoUGVyY2VudHNcIiwoZSxpLG4pPT57aWYodC51bml0PT09XCJweFwiKXtyZXR1cm5gJHtlfcOXJHtpfWB9ZWxzZXtyZXR1cm5gJHtufSVgfX0pO3RoaXMuYmluZChcImFjdGl2ZUhhbmRsZVBvc2l0aW9uXCIpLnRvKGUpfWRpc21pc3MoKXt0aGlzLnVuYmluZCgpO3RoaXMuaXNWaXNpYmxlPWZhbHNlfX1mdW5jdGlvbiBGeSh0KXtyZXR1cm5gY2std2lkZ2V0X19yZXNpemVyX19oYW5kbGUtJHt0fWB9ZnVuY3Rpb24gRHkodCl7cmV0dXJue3g6dC5wYWdlWCx5OnQucGFnZVl9fXZhciBqeT1cIkV4cGVjdGVkIGEgZnVuY3Rpb25cIjtmdW5jdGlvbiBIeSh0LGUsaSl7dmFyIG49dHJ1ZSxvPXRydWU7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihqeSl9aWYoY3QoaSkpe249XCJsZWFkaW5nXCJpbiBpPyEhaS5sZWFkaW5nOm47bz1cInRyYWlsaW5nXCJpbiBpPyEhaS50cmFpbGluZzpvfXJldHVybiB1aCh0LGUse2xlYWRpbmc6bixtYXhXYWl0OmUsdHJhaWxpbmc6b30pfXZhciBXeT1IeTt2YXIgcXk9aSg3MCk7Y2xhc3MgVXkgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIldpZGdldFJlc2l6ZVwifWluaXQoKXt0aGlzLnNldChcIl92aXNpYmxlUmVzaXplclwiLG51bGwpO3RoaXMuc2V0KFwiX2FjdGl2ZVJlc2l6ZXJcIixudWxsKTt0aGlzLl9yZXNpemVycz1uZXcgTWFwO2NvbnN0IHQ9SWQud2luZG93LmRvY3VtZW50O3RoaXMuZWRpdG9yLm1vZGVsLnNjaGVtYS5zZXRBdHRyaWJ1dGVQcm9wZXJ0aWVzKFwid2lkdGhcIix7aXNGb3JtYXR0aW5nOnRydWV9KTt0aGlzLl9vYnNlcnZlcj1PYmplY3QuY3JlYXRlKHFkKTt0aGlzLl9vYnNlcnZlci5saXN0ZW5Ubyh0LFwibW91c2Vkb3duXCIsdGhpcy5fbW91c2VEb3duTGlzdGVuZXIuYmluZCh0aGlzKSk7dGhpcy5fb2JzZXJ2ZXIubGlzdGVuVG8odCxcIm1vdXNlbW92ZVwiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyLmJpbmQodGhpcykpO3RoaXMuX29ic2VydmVyLmxpc3RlblRvKHQsXCJtb3VzZXVwXCIsdGhpcy5fbW91c2VVcExpc3RlbmVyLmJpbmQodGhpcykpO2NvbnN0IGU9KCk9PntpZih0aGlzLl92aXNpYmxlUmVzaXplcil7dGhpcy5fdmlzaWJsZVJlc2l6ZXIucmVkcmF3KCl9fTtjb25zdCBpPVd5KGUsMjAwKTt0aGlzLm9uKFwiY2hhbmdlOl92aXNpYmxlUmVzaXplclwiLGUpO3RoaXMuZWRpdG9yLnVpLm9uKFwidXBkYXRlXCIsaSk7dGhpcy5fb2JzZXJ2ZXIubGlzdGVuVG8oSWQud2luZG93LFwicmVzaXplXCIsaSk7Y29uc3Qgbj10aGlzLmVkaXRvci5lZGl0aW5nLnZpZXcuZG9jdW1lbnQuc2VsZWN0aW9uO24ub24oXCJjaGFuZ2VcIiwoKT0+e2NvbnN0IHQ9bi5nZXRTZWxlY3RlZEVsZW1lbnQoKTt0aGlzLl92aXNpYmxlUmVzaXplcj10aGlzLl9nZXRSZXNpemVyQnlWaWV3RWxlbWVudCh0KXx8bnVsbH0pfWRlc3Ryb3koKXt0aGlzLl9vYnNlcnZlci5zdG9wTGlzdGVuaW5nKCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmVzaXplcnMudmFsdWVzKCkpe3QuZGVzdHJveSgpfX1hdHRhY2hUbyh0KXtjb25zdCBlPW5ldyB6eSh0KTtjb25zdCBpPXRoaXMuZWRpdG9yLnBsdWdpbnM7ZS5hdHRhY2goKTtpZihpLmhhcyhcIldpZGdldFRvb2xiYXJSZXBvc2l0b3J5XCIpKXtjb25zdCB0PWkuZ2V0KFwiV2lkZ2V0VG9vbGJhclJlcG9zaXRvcnlcIik7ZS5vbihcImJlZ2luXCIsKCk9Pnt0LmZvcmNlRGlzYWJsZWQoXCJyZXNpemVcIil9LHtwcmlvcml0eTpcImxvd2VzdFwifSk7ZS5vbihcImNhbmNlbFwiLCgpPT57dC5jbGVhckZvcmNlRGlzYWJsZWQoXCJyZXNpemVcIil9LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO2Uub24oXCJjb21taXRcIiwoKT0+e3QuY2xlYXJGb3JjZURpc2FibGVkKFwicmVzaXplXCIpfSx7cHJpb3JpdHk6XCJoaWdoZXN0XCJ9KX10aGlzLl9yZXNpemVycy5zZXQodC52aWV3RWxlbWVudCxlKTtyZXR1cm4gZX1fZ2V0UmVzaXplckJ5SGFuZGxlKHQpe2Zvcihjb25zdCBlIG9mIHRoaXMuX3Jlc2l6ZXJzLnZhbHVlcygpKXtpZihlLmNvbnRhaW5zSGFuZGxlKHQpKXtyZXR1cm4gZX19fV9nZXRSZXNpemVyQnlWaWV3RWxlbWVudCh0KXtyZXR1cm4gdGhpcy5fcmVzaXplcnMuZ2V0KHQpfV9tb3VzZURvd25MaXN0ZW5lcih0LGUpe2lmKCF6eS5pc1Jlc2l6ZUhhbmRsZShlLnRhcmdldCkpe3JldHVybn1jb25zdCBpPWUudGFyZ2V0O3RoaXMuX2FjdGl2ZVJlc2l6ZXI9dGhpcy5fZ2V0UmVzaXplckJ5SGFuZGxlKGkpO2lmKHRoaXMuX2FjdGl2ZVJlc2l6ZXIpe3RoaXMuX2FjdGl2ZVJlc2l6ZXIuYmVnaW4oaSl9fV9tb3VzZU1vdmVMaXN0ZW5lcih0LGUpe2lmKHRoaXMuX2FjdGl2ZVJlc2l6ZXIpe3RoaXMuX2FjdGl2ZVJlc2l6ZXIudXBkYXRlU2l6ZShlKX19X21vdXNlVXBMaXN0ZW5lcigpe2lmKHRoaXMuX2FjdGl2ZVJlc2l6ZXIpe3RoaXMuX2FjdGl2ZVJlc2l6ZXIuY29tbWl0KCk7dGhpcy5fYWN0aXZlUmVzaXplcj1udWxsfX19dnMoVXksSmMpO2NsYXNzICR5IGV4dGVuZHMgand7cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpO3RoaXMuaXNFbmFibGVkPXl2KHQpO2lmKCF0fHwhdC5oYXNBdHRyaWJ1dGUoXCJ3aWR0aFwiKSl7dGhpcy52YWx1ZT1udWxsfWVsc2V7dGhpcy52YWx1ZT17d2lkdGg6dC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxoZWlnaHQ6bnVsbH19fWV4ZWN1dGUodCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpO2UuY2hhbmdlKGU9PntlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsdC53aWR0aCxpKX0pfX12YXIgR3k9aSg3Mik7Y2xhc3MgS3kgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW1V5XX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkltYWdlUmVzaXplXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT1uZXcgJHkodCk7dGhpcy5fcmVnaXN0ZXJTY2hlbWEoKTt0aGlzLl9yZWdpc3RlckNvbnZlcnRlcnMoKTt0LmNvbW1hbmRzLmFkZChcImltYWdlUmVzaXplXCIsZSk7dC5lZGl0aW5nLmRvd25jYXN0RGlzcGF0Y2hlci5vbihcImluc2VydDppbWFnZVwiLChpLG4sbyk9Pntjb25zdCByPW8ubWFwcGVyLnRvVmlld0VsZW1lbnQobi5pdGVtKTtjb25zdCBzPXQucGx1Z2lucy5nZXQoVXkpLmF0dGFjaFRvKHt1bml0OnQuY29uZmlnLmdldChcImltYWdlLnJlc2l6ZVVuaXRcIil8fFwiJVwiLG1vZGVsRWxlbWVudDpuLml0ZW0sdmlld0VsZW1lbnQ6cixlZGl0b3I6dCxnZXRIYW5kbGVIb3N0KHQpe3JldHVybiB0LnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIil9LGdldFJlc2l6ZUhvc3QodCl7cmV0dXJuIHR9LGlzQ2VudGVyZWQoKXtjb25zdCB0PW4uaXRlbS5nZXRBdHRyaWJ1dGUoXCJpbWFnZVN0eWxlXCIpO3JldHVybiF0fHx0PT1cImZ1bGxcInx8dD09XCJhbGlnbkNlbnRlclwifSxvbkNvbW1pdChlKXt0LmV4ZWN1dGUoXCJpbWFnZVJlc2l6ZVwiLHt3aWR0aDplfSl9fSk7cy5vbihcInVwZGF0ZVNpemVcIiwoKT0+e2lmKCFyLmhhc0NsYXNzKFwiaW1hZ2VfcmVzaXplZFwiKSl7dC5lZGl0aW5nLnZpZXcuY2hhbmdlKHQ9Pnt0LmFkZENsYXNzKFwiaW1hZ2VfcmVzaXplZFwiLHIpfSl9fSk7cy5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKGUpfSx7cHJpb3JpdHk6XCJsb3dcIn0pfV9yZWdpc3RlclNjaGVtYSgpe3RoaXMuZWRpdG9yLm1vZGVsLnNjaGVtYS5leHRlbmQoXCJpbWFnZVwiLHthbGxvd0F0dHJpYnV0ZXM6XCJ3aWR0aFwifSl9X3JlZ2lzdGVyQ29udmVydGVycygpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5jb252ZXJzaW9uLmZvcihcImRvd25jYXN0XCIpLmFkZCh0PT50Lm9uKFwiYXR0cmlidXRlOndpZHRoOmltYWdlXCIsKHQsZSxpKT0+e2lmKCFpLmNvbnN1bWFibGUuY29uc3VtZShlLml0ZW0sdC5uYW1lKSl7cmV0dXJufWNvbnN0IG49aS53cml0ZXI7Y29uc3Qgbz1pLm1hcHBlci50b1ZpZXdFbGVtZW50KGUuaXRlbSk7aWYoZS5hdHRyaWJ1dGVOZXdWYWx1ZSE9PW51bGwpe24uc2V0U3R5bGUoXCJ3aWR0aFwiLGUuYXR0cmlidXRlTmV3VmFsdWUsbyk7bi5hZGRDbGFzcyhcImltYWdlX3Jlc2l6ZWRcIixvKX1lbHNle24ucmVtb3ZlU3R5bGUoXCJ3aWR0aFwiLG8pO24ucmVtb3ZlQ2xhc3MoXCJpbWFnZV9yZXNpemVkXCIsbyl9fSkpO3QuY29udmVyc2lvbi5mb3IoXCJ1cGNhc3RcIikuYXR0cmlidXRlVG9BdHRyaWJ1dGUoe3ZpZXc6e25hbWU6XCJmaWd1cmVcIixzdHlsZXM6e3dpZHRoOi8uKy99fSxtb2RlbDp7a2V5Olwid2lkdGhcIix2YWx1ZTp0PT50LmdldFN0eWxlKFwid2lkdGhcIil9fSl9fWNsYXNzIEp5IGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5idXR0b25WaWV3PW5ldyBoYih0KTt0aGlzLl9maWxlSW5wdXRWaWV3PW5ldyBZeSh0KTt0aGlzLl9maWxlSW5wdXRWaWV3LmJpbmQoXCJhY2NlcHRlZFR5cGVcIikudG8odGhpcyk7dGhpcy5fZmlsZUlucHV0Vmlldy5iaW5kKFwiYWxsb3dNdWx0aXBsZUZpbGVzXCIpLnRvKHRoaXMpO3RoaXMuX2ZpbGVJbnB1dFZpZXcuZGVsZWdhdGUoXCJkb25lXCIpLnRvKHRoaXMpO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpcImNrLWZpbGUtZGlhbG9nLWJ1dHRvblwifSxjaGlsZHJlbjpbdGhpcy5idXR0b25WaWV3LHRoaXMuX2ZpbGVJbnB1dFZpZXddfSk7dGhpcy5idXR0b25WaWV3Lm9uKFwiZXhlY3V0ZVwiLCgpPT57dGhpcy5fZmlsZUlucHV0Vmlldy5vcGVuKCl9KX1mb2N1cygpe3RoaXMuYnV0dG9uVmlldy5mb2N1cygpfX1jbGFzcyBZeSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuc2V0KFwiYWNjZXB0ZWRUeXBlXCIpO3RoaXMuc2V0KFwiYWxsb3dNdWx0aXBsZUZpbGVzXCIsZmFsc2UpO2NvbnN0IGU9dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiaW5wdXRcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay1oaWRkZW5cIl0sdHlwZTpcImZpbGVcIix0YWJpbmRleDpcIi0xXCIsYWNjZXB0OmUudG8oXCJhY2NlcHRlZFR5cGVcIiksbXVsdGlwbGU6ZS50byhcImFsbG93TXVsdGlwbGVGaWxlc1wiKX0sb246e2NoYW5nZTplLnRvKCgpPT57aWYodGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQuZmlsZXMmJnRoaXMuZWxlbWVudC5maWxlcy5sZW5ndGgpe3RoaXMuZmlyZShcImRvbmVcIix0aGlzLmVsZW1lbnQuZmlsZXMpfXRoaXMuZWxlbWVudC52YWx1ZT1cIlwifSl9fSl9b3Blbigpe3RoaXMuZWxlbWVudC5jbGljaygpfX12YXIgUXk9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTYuOTEgMTAuNTRjLjI2LS4yMy42NC0uMjEuODguMDNsMy4zNiAzLjE0IDIuMjMtMi4wNmEuNjQuNjQgMCAwIDEgLjg3IDBsMi41MiAyLjk3VjQuNUgzLjJ2MTAuMTJsMy43MS00LjA4em0xMC4yNy03LjUxYy42IDAgMS4wOS40NyAxLjA5IDEuMDV2MTEuODRjMCAuNTktLjQ5IDEuMDYtMS4wOSAxLjA2SDIuNzljLS42IDAtMS4wOS0uNDctMS4wOS0xLjA2VjQuMDhjMC0uNTguNDktMS4wNSAxLjEtMS4wNWgxNC4zOHptLTUuMjIgNS41NmExLjk2IDEuOTYgMCAxIDEgMy40LTEuOTYgMS45NiAxLjk2IDAgMCAxLTMuNCAxLjk2elwiLz48L3N2Zz4nO2Z1bmN0aW9uIFh5KHQpe2NvbnN0IGU9dC5tYXAodD0+dC5yZXBsYWNlKFwiK1wiLFwiXFxcXCtcIikpO3JldHVybiBuZXcgUmVnRXhwKGBeaW1hZ2VcXFxcLygke2Uuam9pbihcInxcIil9KSRgKX1mdW5jdGlvbiBaeSh0KXtyZXR1cm4gbmV3IFByb21pc2UoKGUsaSk9Pntjb25zdCBuPXQuZ2V0QXR0cmlidXRlKFwic3JjXCIpO2ZldGNoKG4pLnRoZW4odD0+dC5ibG9iKCkpLnRoZW4odD0+e2NvbnN0IG89ZXgodCxuKTtjb25zdCByPW8ucmVwbGFjZShcImltYWdlL1wiLFwiXCIpO2NvbnN0IHM9YGltYWdlLiR7cn1gO2NvbnN0IGE9aXgodCxzLG8pO2E/ZShhKTppKCl9KS5jYXRjaChpKX0pfWZ1bmN0aW9uIHR4KHQpe2lmKCF0LmlzKFwiZWxlbWVudFwiLFwiaW1nXCIpfHwhdC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikpe3JldHVybiBmYWxzZX1yZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikubWF0Y2goL15kYXRhOmltYWdlXFwvXFx3KztiYXNlNjQsL2cpfHx0LmdldEF0dHJpYnV0ZShcInNyY1wiKS5tYXRjaCgvXmJsb2I6L2cpfWZ1bmN0aW9uIGV4KHQsZSl7aWYodC50eXBlKXtyZXR1cm4gdC50eXBlfWVsc2UgaWYoZS5tYXRjaCgvZGF0YTooaW1hZ2VcXC9cXHcrKTtiYXNlNjQvKSl7cmV0dXJuIGUubWF0Y2goL2RhdGE6KGltYWdlXFwvXFx3Kyk7YmFzZTY0LylbMV0udG9Mb3dlckNhc2UoKX1lbHNle3JldHVyblwiaW1hZ2UvanBlZ1wifX1mdW5jdGlvbiBpeCh0LGUsaSl7dHJ5e3JldHVybiBuZXcgRmlsZShbdF0sZSx7dHlwZTppfSl9Y2F0Y2godCl7cmV0dXJuIG51bGx9fWNsYXNzIG54IGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChcImltYWdlVXBsb2FkXCIsaT0+e2NvbnN0IG49bmV3IEp5KGkpO2NvbnN0IG89dC5jb21tYW5kcy5nZXQoXCJpbWFnZVVwbG9hZFwiKTtjb25zdCByPXQuY29uZmlnLmdldChcImltYWdlLnVwbG9hZC50eXBlc1wiKTtjb25zdCBzPVh5KHIpO24uc2V0KHthY2NlcHRlZFR5cGU6ci5tYXAodD0+YGltYWdlLyR7dH1gKS5qb2luKFwiLFwiKSxhbGxvd011bHRpcGxlRmlsZXM6dHJ1ZX0pO24uYnV0dG9uVmlldy5zZXQoe2xhYmVsOmUoXCJrZFwiKSxpY29uOlF5LHRvb2x0aXA6dHJ1ZX0pO24uYnV0dG9uVmlldy5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKG8pO24ub24oXCJkb25lXCIsKGUsaSk9Pntjb25zdCBuPUFycmF5LmZyb20oaSkuZmlsdGVyKHQ9PnMudGVzdCh0LnR5cGUpKTtpZihuLmxlbmd0aCl7dC5leGVjdXRlKFwiaW1hZ2VVcGxvYWRcIix7ZmlsZTpufSl9fSk7cmV0dXJuIG59KX19dmFyIG94PSc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDcwMCAyNTBcIj48cmVjdCByeD1cIjRcIi8+PC9zdmc+Jzt2YXIgcng9aSg3NCk7dmFyIHN4PWkoNzYpO3ZhciBheD1pKDc4KTtjbGFzcyBjeCBleHRlbmRzIG1we2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMucGxhY2Vob2xkZXI9XCJkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCxcIitlbmNvZGVVUklDb21wb25lbnQob3gpfWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO3QuZWRpdGluZy5kb3duY2FzdERpc3BhdGNoZXIub24oXCJhdHRyaWJ1dGU6dXBsb2FkU3RhdHVzOmltYWdlXCIsKC4uLnQpPT50aGlzLnVwbG9hZFN0YXR1c0NoYW5nZSguLi50KSl9dXBsb2FkU3RhdHVzQ2hhbmdlKHQsZSxpKXtjb25zdCBuPXRoaXMuZWRpdG9yO2NvbnN0IG89ZS5pdGVtO2NvbnN0IHI9by5nZXRBdHRyaWJ1dGUoXCJ1cGxvYWRJZFwiKTtpZighaS5jb25zdW1hYmxlLmNvbnN1bWUoZS5pdGVtLHQubmFtZSkpe3JldHVybn1jb25zdCBzPW4ucGx1Z2lucy5nZXQobGspO2NvbnN0IGE9cj9lLmF0dHJpYnV0ZU5ld1ZhbHVlOm51bGw7Y29uc3QgYz10aGlzLnBsYWNlaG9sZGVyO2NvbnN0IGw9bi5lZGl0aW5nLm1hcHBlci50b1ZpZXdFbGVtZW50KG8pO2NvbnN0IGQ9aS53cml0ZXI7aWYoYT09XCJyZWFkaW5nXCIpe2x4KGwsZCk7dXgoYyxsLGQpO3JldHVybn1pZihhPT1cInVwbG9hZGluZ1wiKXtjb25zdCB0PXMubG9hZGVycy5nZXQocik7bHgobCxkKTtpZighdCl7dXgoYyxsLGQpfWVsc2V7aHgobCxkKTtmeChsLGQsdCxuLmVkaXRpbmcudmlldyk7X3gobCxkLHQpfXJldHVybn1pZihhPT1cImNvbXBsZXRlXCImJnMubG9hZGVycy5nZXQocikmJiFBbC5pc0VkZ2Upe214KGwsZCxuLmVkaXRpbmcudmlldyl9Z3gobCxkKTtoeChsLGQpO2R4KGwsZCl9fWZ1bmN0aW9uIGx4KHQsZSl7aWYoIXQuaGFzQ2xhc3MoXCJjay1hcHBlYXJcIikpe2UuYWRkQ2xhc3MoXCJjay1hcHBlYXJcIix0KX19ZnVuY3Rpb24gZHgodCxlKXtlLnJlbW92ZUNsYXNzKFwiY2stYXBwZWFyXCIsdCl9ZnVuY3Rpb24gdXgodCxlLGkpe2lmKCFlLmhhc0NsYXNzKFwiY2staW1hZ2UtdXBsb2FkLXBsYWNlaG9sZGVyXCIpKXtpLmFkZENsYXNzKFwiY2staW1hZ2UtdXBsb2FkLXBsYWNlaG9sZGVyXCIsZSl9Y29uc3Qgbj1BdihlKTtpZihuLmdldEF0dHJpYnV0ZShcInNyY1wiKSE9PXQpe2kuc2V0QXR0cmlidXRlKFwic3JjXCIsdCxuKX1pZighd3goZSxcInBsYWNlaG9sZGVyXCIpKXtpLmluc2VydChpLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIobiksYngoaSkpfX1mdW5jdGlvbiBoeCh0LGUpe2lmKHQuaGFzQ2xhc3MoXCJjay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXJcIikpe2UucmVtb3ZlQ2xhc3MoXCJjay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXJcIix0KX1reCh0LGUsXCJwbGFjZWhvbGRlclwiKX1mdW5jdGlvbiBmeCh0LGUsaSxuKXtjb25zdCBvPXB4KGUpO2UuaW5zZXJ0KGUuY3JlYXRlUG9zaXRpb25BdCh0LFwiZW5kXCIpLG8pO2kub24oXCJjaGFuZ2U6dXBsb2FkZWRQZXJjZW50XCIsKHQsZSxpKT0+e24uY2hhbmdlKHQ9Pnt0LnNldFN0eWxlKFwid2lkdGhcIixpK1wiJVwiLG8pfSl9KX1mdW5jdGlvbiBneCh0LGUpe2t4KHQsZSxcInByb2dyZXNzQmFyXCIpfWZ1bmN0aW9uIG14KHQsZSxpKXtjb25zdCBuPWUuY3JlYXRlVUlFbGVtZW50KFwiZGl2XCIse2NsYXNzOlwiY2staW1hZ2UtdXBsb2FkLWNvbXBsZXRlLWljb25cIn0pO2UuaW5zZXJ0KGUuY3JlYXRlUG9zaXRpb25BdCh0LFwiZW5kXCIpLG4pO3NldFRpbWVvdXQoKCk9PntpLmNoYW5nZSh0PT50LnJlbW92ZSh0LmNyZWF0ZVJhbmdlT24obikpKX0sM2UzKX1mdW5jdGlvbiBweCh0KXtjb25zdCBlPXQuY3JlYXRlVUlFbGVtZW50KFwiZGl2XCIse2NsYXNzOlwiY2stcHJvZ3Jlc3MtYmFyXCJ9KTt0LnNldEN1c3RvbVByb3BlcnR5KFwicHJvZ3Jlc3NCYXJcIix0cnVlLGUpO3JldHVybiBlfWZ1bmN0aW9uIGJ4KHQpe2NvbnN0IGU9dC5jcmVhdGVVSUVsZW1lbnQoXCJkaXZcIix7Y2xhc3M6XCJjay11cGxvYWQtcGxhY2Vob2xkZXItbG9hZGVyXCJ9KTt0LnNldEN1c3RvbVByb3BlcnR5KFwicGxhY2Vob2xkZXJcIix0cnVlLGUpO3JldHVybiBlfWZ1bmN0aW9uIHd4KHQsZSl7Zm9yKGNvbnN0IGkgb2YgdC5nZXRDaGlsZHJlbigpKXtpZihpLmdldEN1c3RvbVByb3BlcnR5KGUpKXtyZXR1cm4gaX19fWZ1bmN0aW9uIGt4KHQsZSxpKXtjb25zdCBuPXd4KHQsaSk7aWYobil7ZS5yZW1vdmUoZS5jcmVhdGVSYW5nZU9uKG4pKX19ZnVuY3Rpb24gX3godCxlLGkpe2lmKGkuZGF0YSl7Y29uc3Qgbj1Bdih0KTtlLnNldEF0dHJpYnV0ZShcInNyY1wiLGkuZGF0YSxuKX19Y2xhc3MgdnggZXh0ZW5kcyBza3tzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIk5vdGlmaWNhdGlvblwifWluaXQoKXt0aGlzLm9uKFwic2hvdzp3YXJuaW5nXCIsKHQsZSk9Pnt3aW5kb3cuYWxlcnQoZS5tZXNzYWdlKX0se3ByaW9yaXR5OlwibG93ZXN0XCJ9KX1zaG93U3VjY2Vzcyh0LGU9e30pe3RoaXMuX3Nob3dOb3RpZmljYXRpb24oe21lc3NhZ2U6dCx0eXBlOlwic3VjY2Vzc1wiLG5hbWVzcGFjZTplLm5hbWVzcGFjZSx0aXRsZTplLnRpdGxlfSl9c2hvd0luZm8odCxlPXt9KXt0aGlzLl9zaG93Tm90aWZpY2F0aW9uKHttZXNzYWdlOnQsdHlwZTpcImluZm9cIixuYW1lc3BhY2U6ZS5uYW1lc3BhY2UsdGl0bGU6ZS50aXRsZX0pfXNob3dXYXJuaW5nKHQsZT17fSl7dGhpcy5fc2hvd05vdGlmaWNhdGlvbih7bWVzc2FnZTp0LHR5cGU6XCJ3YXJuaW5nXCIsbmFtZXNwYWNlOmUubmFtZXNwYWNlLHRpdGxlOmUudGl0bGV9KX1fc2hvd05vdGlmaWNhdGlvbih0KXtjb25zdCBlPWBzaG93OiR7dC50eXBlfWArKHQubmFtZXNwYWNlP2A6JHt0Lm5hbWVzcGFjZX1gOlwiXCIpO3RoaXMuZmlyZShlLHttZXNzYWdlOnQubWVzc2FnZSx0eXBlOnQudHlwZSx0aXRsZTp0LnRpdGxlfHxcIlwifSl9fWNsYXNzIHl4e2NvbnN0cnVjdG9yKHQpe3RoaXMuZmlsZXM9eHgodCk7dGhpcy5fbmF0aXZlPXR9Z2V0IHR5cGVzKCl7cmV0dXJuIHRoaXMuX25hdGl2ZS50eXBlc31nZXREYXRhKHQpe3JldHVybiB0aGlzLl9uYXRpdmUuZ2V0RGF0YSh0KX1zZXREYXRhKHQsZSl7dGhpcy5fbmF0aXZlLnNldERhdGEodCxlKX19ZnVuY3Rpb24geHgodCl7Y29uc3QgZT10LmZpbGVzP0FycmF5LmZyb20odC5maWxlcyk6W107Y29uc3QgaT10Lml0ZW1zP0FycmF5LmZyb20odC5pdGVtcyk6W107aWYoZS5sZW5ndGgpe3JldHVybiBlfXJldHVybiBpLmZpbHRlcih0PT50LmtpbmQ9PT1cImZpbGVcIikubWFwKHQ9PnQuZ2V0QXNGaWxlKCkpfWNsYXNzIEN4IGV4dGVuZHMgSnV7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7Y29uc3QgZT10aGlzLmRvY3VtZW50O3RoaXMuZG9tRXZlbnRUeXBlPVtcInBhc3RlXCIsXCJjb3B5XCIsXCJjdXRcIixcImRyb3BcIixcImRyYWdvdmVyXCJdO3RoaXMubGlzdGVuVG8oZSxcInBhc3RlXCIsaSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMubGlzdGVuVG8oZSxcImRyb3BcIixpLHtwcmlvcml0eTpcImxvd1wifSk7ZnVuY3Rpb24gaSh0LGkpe2kucHJldmVudERlZmF1bHQoKTtjb25zdCBuPWkuZHJvcFJhbmdlP1tpLmRyb3BSYW5nZV06QXJyYXkuZnJvbShlLnNlbGVjdGlvbi5nZXRSYW5nZXMoKSk7Y29uc3Qgbz1uZXcgdHMoZSxcImNsaXBib2FyZElucHV0XCIpO2UuZmlyZShvLHtkYXRhVHJhbnNmZXI6aS5kYXRhVHJhbnNmZXIsdGFyZ2V0UmFuZ2VzOm59KTtpZihvLnN0b3AuY2FsbGVkKXtpLnN0b3BQcm9wYWdhdGlvbigpfX19b25Eb21FdmVudCh0KXtjb25zdCBlPXtkYXRhVHJhbnNmZXI6bmV3IHl4KHQuY2xpcGJvYXJkRGF0YT90LmNsaXBib2FyZERhdGE6dC5kYXRhVHJhbnNmZXIpfTtpZih0LnR5cGU9PVwiZHJvcFwiKXtlLmRyb3BSYW5nZT1BeCh0aGlzLnZpZXcsdCl9dGhpcy5maXJlKHQudHlwZSx0LGUpfX1mdW5jdGlvbiBBeCh0LGUpe2NvbnN0IGk9ZS50YXJnZXQub3duZXJEb2N1bWVudDtjb25zdCBuPWUuY2xpZW50WDtjb25zdCBvPWUuY2xpZW50WTtsZXQgcjtpZihpLmNhcmV0UmFuZ2VGcm9tUG9pbnQmJmkuY2FyZXRSYW5nZUZyb21Qb2ludChuLG8pKXtyPWkuY2FyZXRSYW5nZUZyb21Qb2ludChuLG8pfWVsc2UgaWYoZS5yYW5nZVBhcmVudCl7cj1pLmNyZWF0ZVJhbmdlKCk7ci5zZXRTdGFydChlLnJhbmdlUGFyZW50LGUucmFuZ2VPZmZzZXQpO3IuY29sbGFwc2UodHJ1ZSl9aWYocil7cmV0dXJuIHQuZG9tQ29udmVydGVyLmRvbVJhbmdlVG9WaWV3KHIpfWVsc2V7cmV0dXJuIHQuZG9jdW1lbnQuc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKX19ZnVuY3Rpb24gVHgodCl7dD10LnJlcGxhY2UoLzwvZyxcIiZsdDtcIikucmVwbGFjZSgvPi9nLFwiJmd0O1wiKS5yZXBsYWNlKC9cXG4vZyxcIjwvcD48cD5cIikucmVwbGFjZSgvXlxccy8sXCImbmJzcDtcIikucmVwbGFjZSgvXFxzJC8sXCImbmJzcDtcIikucmVwbGFjZSgvXFxzXFxzL2csXCIgJm5ic3A7XCIpO2lmKHQuaW5kZXhPZihcIjwvcD48cD5cIik+LTEpe3Q9YDxwPiR7dH08L3A+YH1yZXR1cm4gdH1mdW5jdGlvbiBQeCh0KXtyZXR1cm4gdC5yZXBsYWNlKC88c3Bhbig/OiBjbGFzcz1cIkFwcGxlLWNvbnZlcnRlZC1zcGFjZVwifCk+KFxccyspPFxcL3NwYW4+L2csKHQsZSk9PntpZihlLmxlbmd0aD09MSl7cmV0dXJuXCIgXCJ9cmV0dXJuIGV9KX1jb25zdCBTeD1bXCJmaWdjYXB0aW9uXCIsXCJsaVwiXTtmdW5jdGlvbiBFeCh0KXtsZXQgZT1cIlwiO2lmKHQuaXMoXCJ0ZXh0XCIpfHx0LmlzKFwidGV4dFByb3h5XCIpKXtlPXQuZGF0YX1lbHNlIGlmKHQuaXMoXCJpbWdcIikmJnQuaGFzQXR0cmlidXRlKFwiYWx0XCIpKXtlPXQuZ2V0QXR0cmlidXRlKFwiYWx0XCIpfWVsc2V7bGV0IGk9bnVsbDtmb3IoY29uc3QgbiBvZiB0LmdldENoaWxkcmVuKCkpe2NvbnN0IHQ9RXgobik7aWYoaSYmKGkuaXMoXCJjb250YWluZXJFbGVtZW50XCIpfHxuLmlzKFwiY29udGFpbmVyRWxlbWVudFwiKSkpe2lmKFN4LmluY2x1ZGVzKGkubmFtZSl8fFN4LmluY2x1ZGVzKG4ubmFtZSkpe2UrPVwiXFxuXCJ9ZWxzZXtlKz1cIlxcblxcblwifX1lKz10O2k9bn19cmV0dXJuIGV9Y2xhc3MgUnggZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkNsaXBib2FyZFwifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbC5kb2N1bWVudDtjb25zdCBpPXQuZWRpdGluZy52aWV3O2NvbnN0IG49aS5kb2N1bWVudDt0aGlzLl9odG1sRGF0YVByb2Nlc3Nvcj1uZXcgZ3Aobik7aS5hZGRPYnNlcnZlcihDeCk7dGhpcy5saXN0ZW5UbyhuLFwiY2xpcGJvYXJkSW5wdXRcIixlPT57aWYodC5pc1JlYWRPbmx5KXtlLnN0b3AoKX19LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO3RoaXMubGlzdGVuVG8obixcImNsaXBib2FyZElucHV0XCIsKHQsZSk9Pntjb25zdCBuPWUuZGF0YVRyYW5zZmVyO2xldCBvPVwiXCI7aWYobi5nZXREYXRhKFwidGV4dC9odG1sXCIpKXtvPVB4KG4uZ2V0RGF0YShcInRleHQvaHRtbFwiKSl9ZWxzZSBpZihuLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpKXtvPVR4KG4uZ2V0RGF0YShcInRleHQvcGxhaW5cIikpfW89dGhpcy5faHRtbERhdGFQcm9jZXNzb3IudG9WaWV3KG8pO3RoaXMuZmlyZShcImlucHV0VHJhbnNmb3JtYXRpb25cIix7Y29udGVudDpvLGRhdGFUcmFuc2ZlcjpufSk7aS5zY3JvbGxUb1RoZVNlbGVjdGlvbigpfSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMubGlzdGVuVG8odGhpcyxcImlucHV0VHJhbnNmb3JtYXRpb25cIiwodCxlKT0+e2lmKCFlLmNvbnRlbnQuaXNFbXB0eSl7Y29uc3QgdD10aGlzLmVkaXRvci5kYXRhO2NvbnN0IGk9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3Qgbj10LnRvTW9kZWwoZS5jb250ZW50LFwiJGNsaXBib2FyZEhvbGRlclwiKTtpZihuLmNoaWxkQ291bnQ9PTApe3JldHVybn1pLmluc2VydENvbnRlbnQobil9fSx7cHJpb3JpdHk6XCJsb3dcIn0pO2Z1bmN0aW9uIG8oaSxvKXtjb25zdCByPW8uZGF0YVRyYW5zZmVyO28ucHJldmVudERlZmF1bHQoKTtjb25zdCBzPXQuZGF0YS50b1ZpZXcodC5tb2RlbC5nZXRTZWxlY3RlZENvbnRlbnQoZS5zZWxlY3Rpb24pKTtuLmZpcmUoXCJjbGlwYm9hcmRPdXRwdXRcIix7ZGF0YVRyYW5zZmVyOnIsY29udGVudDpzLG1ldGhvZDppLm5hbWV9KX10aGlzLmxpc3RlblRvKG4sXCJjb3B5XCIsbyx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMubGlzdGVuVG8obixcImN1dFwiLChlLGkpPT57aWYodC5pc1JlYWRPbmx5KXtpLnByZXZlbnREZWZhdWx0KCl9ZWxzZXtvKGUsaSl9fSx7cHJpb3JpdHk6XCJsb3dcIn0pO3RoaXMubGlzdGVuVG8obixcImNsaXBib2FyZE91dHB1dFwiLChpLG4pPT57aWYoIW4uY29udGVudC5pc0VtcHR5KXtuLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9odG1sXCIsdGhpcy5faHRtbERhdGFQcm9jZXNzb3IudG9EYXRhKG4uY29udGVudCkpO24uZGF0YVRyYW5zZmVyLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsRXgobi5jb250ZW50KSl9aWYobi5tZXRob2Q9PVwiY3V0XCIpe3QubW9kZWwuZGVsZXRlQ29udGVudChlLnNlbGVjdGlvbil9fSx7cHJpb3JpdHk6XCJsb3dcIn0pfX1jbGFzcyBPeHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmRvY3VtZW50PXR9Y3JlYXRlRG9jdW1lbnRGcmFnbWVudCh0KXtyZXR1cm4gbmV3IHFsKHRoaXMuZG9jdW1lbnQsdCl9Y3JlYXRlRWxlbWVudCh0LGUsaSl7cmV0dXJuIG5ldyB6Yyh0aGlzLmRvY3VtZW50LHQsZSxpKX1jcmVhdGVUZXh0KHQpe3JldHVybiBuZXcgTHModGhpcy5kb2N1bWVudCx0KX1jbG9uZSh0LGU9ZmFsc2Upe3JldHVybiB0Ll9jbG9uZShlKX1hcHBlbmRDaGlsZCh0LGUpe3JldHVybiBlLl9hcHBlbmRDaGlsZCh0KX1pbnNlcnRDaGlsZCh0LGUsaSl7cmV0dXJuIGkuX2luc2VydENoaWxkKHQsZSl9cmVtb3ZlQ2hpbGRyZW4odCxlLGkpe3JldHVybiBpLl9yZW1vdmVDaGlsZHJlbih0LGUpfXJlbW92ZSh0KXtjb25zdCBlPXQucGFyZW50O2lmKGUpe3JldHVybiB0aGlzLnJlbW92ZUNoaWxkcmVuKGUuZ2V0Q2hpbGRJbmRleCh0KSwxLGUpfXJldHVybltdfXJlcGxhY2UodCxlKXtjb25zdCBpPXQucGFyZW50O2lmKGkpe2NvbnN0IG49aS5nZXRDaGlsZEluZGV4KHQpO3RoaXMucmVtb3ZlQ2hpbGRyZW4obiwxLGkpO3RoaXMuaW5zZXJ0Q2hpbGQobixlLGkpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX11bndyYXBFbGVtZW50KHQpe2NvbnN0IGU9dC5wYXJlbnQ7aWYoZSl7Y29uc3QgaT1lLmdldENoaWxkSW5kZXgodCk7dGhpcy5yZW1vdmUodCk7dGhpcy5pbnNlcnRDaGlsZChpLHQuZ2V0Q2hpbGRyZW4oKSxlKX19cmVuYW1lKHQsZSl7Y29uc3QgaT1uZXcgemModGhpcy5kb2N1bWVudCx0LGUuZ2V0QXR0cmlidXRlcygpLGUuZ2V0Q2hpbGRyZW4oKSk7cmV0dXJuIHRoaXMucmVwbGFjZShlLGkpP2k6bnVsbH1zZXRBdHRyaWJ1dGUodCxlLGkpe2kuX3NldEF0dHJpYnV0ZSh0LGUpfXJlbW92ZUF0dHJpYnV0ZSh0LGUpe2UuX3JlbW92ZUF0dHJpYnV0ZSh0KX1hZGRDbGFzcyh0LGUpe2UuX2FkZENsYXNzKHQpfXJlbW92ZUNsYXNzKHQsZSl7ZS5fcmVtb3ZlQ2xhc3ModCl9c2V0U3R5bGUodCxlLGkpe2lmKE4odCkmJmk9PT11bmRlZmluZWQpe2k9ZX1pLl9zZXRTdHlsZSh0LGUpfXJlbW92ZVN0eWxlKHQsZSl7ZS5fcmVtb3ZlU3R5bGUodCl9c2V0Q3VzdG9tUHJvcGVydHkodCxlLGkpe2kuX3NldEN1c3RvbVByb3BlcnR5KHQsZSl9cmVtb3ZlQ3VzdG9tUHJvcGVydHkodCxlKXtyZXR1cm4gZS5fcmVtb3ZlQ3VzdG9tUHJvcGVydHkodCl9Y3JlYXRlUG9zaXRpb25BdCh0LGUpe3JldHVybiBkbC5fY3JlYXRlQXQodCxlKX1jcmVhdGVQb3NpdGlvbkFmdGVyKHQpe3JldHVybiBkbC5fY3JlYXRlQWZ0ZXIodCl9Y3JlYXRlUG9zaXRpb25CZWZvcmUodCl7cmV0dXJuIGRsLl9jcmVhdGVCZWZvcmUodCl9Y3JlYXRlUmFuZ2UodCxlKXtyZXR1cm4gbmV3IHVsKHQsZSl9Y3JlYXRlUmFuZ2VPbih0KXtyZXR1cm4gdWwuX2NyZWF0ZU9uKHQpfWNyZWF0ZVJhbmdlSW4odCl7cmV0dXJuIHVsLl9jcmVhdGVJbih0KX1jcmVhdGVTZWxlY3Rpb24odCxlLGkpe3JldHVybiBuZXcgZ2wodCxlLGkpfX1jbGFzcyBJeCBleHRlbmRzIGp3e3JlZnJlc2goKXt0aGlzLmlzRW5hYmxlZD1Ddih0aGlzLmVkaXRvci5tb2RlbCl9ZXhlY3V0ZSh0KXtjb25zdCBlPXRoaXMuZWRpdG9yO2NvbnN0IGk9ZS5tb2RlbDtjb25zdCBuPWUucGx1Z2lucy5nZXQobGspO2kuY2hhbmdlKGU9Pntjb25zdCBvPUFycmF5LmlzQXJyYXkodC5maWxlKT90LmZpbGU6W3QuZmlsZV07Zm9yKGNvbnN0IHQgb2Ygbyl7VngoZSxpLG4sdCl9fSl9fWZ1bmN0aW9uIFZ4KHQsZSxpLG4pe2NvbnN0IG89aS5jcmVhdGVMb2FkZXIobik7aWYoIW8pe3JldHVybn14dih0LGUse3VwbG9hZElkOm8uaWR9KX1jbGFzcyBOeCBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bbGssdngsUnhdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSW1hZ2VVcGxvYWRFZGl0aW5nXCJ9Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dC5jb25maWcuZGVmaW5lKFwiaW1hZ2VcIix7dXBsb2FkOnt0eXBlczpbXCJqcGVnXCIsXCJwbmdcIixcImdpZlwiLFwiYm1wXCIsXCJ3ZWJwXCIsXCJ0aWZmXCJdfX0pfWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbC5kb2N1bWVudDtjb25zdCBpPXQubW9kZWwuc2NoZW1hO2NvbnN0IG49dC5jb252ZXJzaW9uO2NvbnN0IG89dC5wbHVnaW5zLmdldChsayk7Y29uc3Qgcj1YeSh0LmNvbmZpZy5nZXQoXCJpbWFnZS51cGxvYWQudHlwZXNcIikpO2kuZXh0ZW5kKFwiaW1hZ2VcIix7YWxsb3dBdHRyaWJ1dGVzOltcInVwbG9hZElkXCIsXCJ1cGxvYWRTdGF0dXNcIl19KTt0LmNvbW1hbmRzLmFkZChcImltYWdlVXBsb2FkXCIsbmV3IEl4KHQpKTtuLmZvcihcInVwY2FzdFwiKS5hdHRyaWJ1dGVUb0F0dHJpYnV0ZSh7dmlldzp7bmFtZTpcImltZ1wiLGtleTpcInVwbG9hZElkXCJ9LG1vZGVsOlwidXBsb2FkSWRcIn0pO3RoaXMubGlzdGVuVG8odC5lZGl0aW5nLnZpZXcuZG9jdW1lbnQsXCJjbGlwYm9hcmRJbnB1dFwiLChlLGkpPT57aWYoTXgoaS5kYXRhVHJhbnNmZXIpKXtyZXR1cm59Y29uc3Qgbj1BcnJheS5mcm9tKGkuZGF0YVRyYW5zZmVyLmZpbGVzKS5maWx0ZXIodD0+e2lmKCF0KXtyZXR1cm4gZmFsc2V9cmV0dXJuIHIudGVzdCh0LnR5cGUpfSk7Y29uc3Qgbz1pLnRhcmdldFJhbmdlcy5tYXAoZT0+dC5lZGl0aW5nLm1hcHBlci50b01vZGVsUmFuZ2UoZSkpO3QubW9kZWwuY2hhbmdlKGk9PntpLnNldFNlbGVjdGlvbihvKTtpZihuLmxlbmd0aCl7ZS5zdG9wKCk7dC5tb2RlbC5lbnF1ZXVlQ2hhbmdlKFwiZGVmYXVsdFwiLCgpPT57dC5leGVjdXRlKFwiaW1hZ2VVcGxvYWRcIix7ZmlsZTpufSl9KX19KX0pO3RoaXMubGlzdGVuVG8odC5wbHVnaW5zLmdldChSeCksXCJpbnB1dFRyYW5zZm9ybWF0aW9uXCIsKGUsaSk9Pntjb25zdCBuPUFycmF5LmZyb20odC5lZGl0aW5nLnZpZXcuY3JlYXRlUmFuZ2VJbihpLmNvbnRlbnQpKS5maWx0ZXIodD0+dHgodC5pdGVtKSYmIXQuaXRlbS5nZXRBdHRyaWJ1dGUoXCJ1cGxvYWRQcm9jZXNzZWRcIikpLm1hcCh0PT4oe3Byb21pc2U6WnkodC5pdGVtKSxpbWFnZUVsZW1lbnQ6dC5pdGVtfSkpO2lmKCFuLmxlbmd0aCl7cmV0dXJufWNvbnN0IHI9bmV3IE94KHQuZWRpdGluZy52aWV3LmRvY3VtZW50KTtmb3IoY29uc3QgdCBvZiBuKXtyLnNldEF0dHJpYnV0ZShcInVwbG9hZFByb2Nlc3NlZFwiLHRydWUsdC5pbWFnZUVsZW1lbnQpO2NvbnN0IGU9by5jcmVhdGVMb2FkZXIodC5wcm9taXNlKTtpZihlKXtyLnNldEF0dHJpYnV0ZShcInNyY1wiLFwiXCIsdC5pbWFnZUVsZW1lbnQpO3Iuc2V0QXR0cmlidXRlKFwidXBsb2FkSWRcIixlLmlkLHQuaW1hZ2VFbGVtZW50KX19fSk7dC5lZGl0aW5nLnZpZXcuZG9jdW1lbnQub24oXCJkcmFnb3ZlclwiLCh0LGUpPT57ZS5wcmV2ZW50RGVmYXVsdCgpfSk7ZS5vbihcImNoYW5nZVwiLCgpPT57Y29uc3QgaT1lLmRpZmZlci5nZXRDaGFuZ2VzKHtpbmNsdWRlQ2hhbmdlc0luR3JhdmV5YXJkOnRydWV9KTtmb3IoY29uc3QgZSBvZiBpKXtpZihlLnR5cGU9PVwiaW5zZXJ0XCImJmUubmFtZSE9XCIkdGV4dFwiKXtjb25zdCBpPWUucG9zaXRpb24ubm9kZUFmdGVyO2NvbnN0IG49ZS5wb3NpdGlvbi5yb290LnJvb3ROYW1lPT1cIiRncmF2ZXlhcmRcIjtmb3IoY29uc3QgZSBvZiBCeCh0LGkpKXtjb25zdCB0PWUuZ2V0QXR0cmlidXRlKFwidXBsb2FkSWRcIik7aWYoIXQpe2NvbnRpbnVlfWNvbnN0IGk9by5sb2FkZXJzLmdldCh0KTtpZighaSl7Y29udGludWV9aWYobil7aS5hYm9ydCgpfWVsc2UgaWYoaS5zdGF0dXM9PVwiaWRsZVwiKXt0aGlzLl9yZWFkQW5kVXBsb2FkKGksZSl9fX19fSl9X3JlYWRBbmRVcGxvYWQodCxlKXtjb25zdCBpPXRoaXMuZWRpdG9yO2NvbnN0IG49aS5tb2RlbDtjb25zdCBvPWkubG9jYWxlLnQ7Y29uc3Qgcj1pLnBsdWdpbnMuZ2V0KGxrKTtjb25zdCBzPWkucGx1Z2lucy5nZXQodngpO24uZW5xdWV1ZUNoYW5nZShcInRyYW5zcGFyZW50XCIsdD0+e3Quc2V0QXR0cmlidXRlKFwidXBsb2FkU3RhdHVzXCIsXCJyZWFkaW5nXCIsZSl9KTtyZXR1cm4gdC5yZWFkKCkudGhlbigoKT0+e2NvbnN0IG89dC51cGxvYWQoKTtpZihBbC5pc1NhZmFyaSl7Y29uc3QgdD1pLmVkaXRpbmcubWFwcGVyLnRvVmlld0VsZW1lbnQoZSk7Y29uc3Qgbj1Bdih0KTtpLmVkaXRpbmcudmlldy5vbmNlKFwicmVuZGVyXCIsKCk9PntpZighbi5wYXJlbnQpe3JldHVybn1jb25zdCB0PWkuZWRpdGluZy52aWV3LmRvbUNvbnZlcnRlci5tYXBWaWV3VG9Eb20obi5wYXJlbnQpO2lmKCF0KXtyZXR1cm59Y29uc3QgZT10LnN0eWxlLmRpc3BsYXk7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3QuX2NrSGFjaz10Lm9mZnNldEhlaWdodDt0LnN0eWxlLmRpc3BsYXk9ZX0pfW4uZW5xdWV1ZUNoYW5nZShcInRyYW5zcGFyZW50XCIsdD0+e3Quc2V0QXR0cmlidXRlKFwidXBsb2FkU3RhdHVzXCIsXCJ1cGxvYWRpbmdcIixlKX0pO3JldHVybiBvfSkudGhlbih0PT57bi5lbnF1ZXVlQ2hhbmdlKFwidHJhbnNwYXJlbnRcIixpPT57aS5zZXRBdHRyaWJ1dGVzKHt1cGxvYWRTdGF0dXM6XCJjb21wbGV0ZVwiLHNyYzp0LmRlZmF1bHR9LGUpO3RoaXMuX3BhcnNlQW5kU2V0U3Jjc2V0QXR0cmlidXRlT25JbWFnZSh0LGUsaSl9KTthKCl9KS5jYXRjaChpPT57aWYodC5zdGF0dXMhPT1cImVycm9yXCImJnQuc3RhdHVzIT09XCJhYm9ydGVkXCIpe3Rocm93IGl9aWYodC5zdGF0dXM9PVwiZXJyb3JcIiYmaSl7cy5zaG93V2FybmluZyhpLHt0aXRsZTpvKFwia2VcIiksbmFtZXNwYWNlOlwidXBsb2FkXCJ9KX1hKCk7bi5lbnF1ZXVlQ2hhbmdlKFwidHJhbnNwYXJlbnRcIix0PT57dC5yZW1vdmUoZSl9KX0pO2Z1bmN0aW9uIGEoKXtuLmVucXVldWVDaGFuZ2UoXCJ0cmFuc3BhcmVudFwiLHQ9Pnt0LnJlbW92ZUF0dHJpYnV0ZShcInVwbG9hZElkXCIsZSk7dC5yZW1vdmVBdHRyaWJ1dGUoXCJ1cGxvYWRTdGF0dXNcIixlKX0pO3IuZGVzdHJveUxvYWRlcih0KX19X3BhcnNlQW5kU2V0U3Jjc2V0QXR0cmlidXRlT25JbWFnZSh0LGUsaSl7bGV0IG49MDtjb25zdCBvPU9iamVjdC5rZXlzKHQpLmZpbHRlcih0PT57Y29uc3QgZT1wYXJzZUludCh0LDEwKTtpZighaXNOYU4oZSkpe249TWF0aC5tYXgobixlKTtyZXR1cm4gdHJ1ZX19KS5tYXAoZT0+YCR7dFtlXX0gJHtlfXdgKS5qb2luKFwiLCBcIik7aWYobyE9XCJcIil7aS5zZXRBdHRyaWJ1dGUoXCJzcmNzZXRcIix7ZGF0YTpvLHdpZHRoOm59LGUpfX19ZnVuY3Rpb24gTXgodCl7cmV0dXJuIEFycmF5LmZyb20odC50eXBlcykuaW5jbHVkZXMoXCJ0ZXh0L2h0bWxcIikmJnQuZ2V0RGF0YShcInRleHQvaHRtbFwiKSE9PVwiXCJ9ZnVuY3Rpb24gQngodCxlKXtyZXR1cm4gQXJyYXkuZnJvbSh0Lm1vZGVsLmNyZWF0ZVJhbmdlT24oZSkpLmZpbHRlcih0PT50Lml0ZW0uaXMoXCJpbWFnZVwiKSkubWFwKHQ9PnQuaXRlbSl9Y2xhc3MgenggZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkltYWdlVXBsb2FkXCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltOeCxueCxjeF19fWNsYXNzIEx4IGV4dGVuZHMgand7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5fY2hpbGRDb21tYW5kcz1bXX1yZWZyZXNoKCl7fWV4ZWN1dGUoLi4udCl7Y29uc3QgZT10aGlzLl9nZXRGaXJzdEVuYWJsZWRDb21tYW5kKCk7ZS5leGVjdXRlKHQpfXJlZ2lzdGVyQ2hpbGRDb21tYW5kKHQpe3RoaXMuX2NoaWxkQ29tbWFuZHMucHVzaCh0KTt0Lm9uKFwiY2hhbmdlOmlzRW5hYmxlZFwiLCgpPT50aGlzLl9jaGVja0VuYWJsZWQoKSk7dGhpcy5fY2hlY2tFbmFibGVkKCl9X2NoZWNrRW5hYmxlZCgpe3RoaXMuaXNFbmFibGVkPSEhdGhpcy5fZ2V0Rmlyc3RFbmFibGVkQ29tbWFuZCgpfV9nZXRGaXJzdEVuYWJsZWRDb21tYW5kKCl7cmV0dXJuIHRoaXMuX2NoaWxkQ29tbWFuZHMuZmluZCh0PT50LmlzRW5hYmxlZCl9fWNsYXNzIEZ4IGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJbmRlbnRFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5jb21tYW5kcy5hZGQoXCJpbmRlbnRcIixuZXcgTHgodCkpO3QuY29tbWFuZHMuYWRkKFwib3V0ZGVudFwiLG5ldyBMeCh0KSl9fXZhciBEeD0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMiAzLjc1YzAgLjQxNC4zMzYuNzUuNzUuNzVoMTQuNWEuNzUuNzUgMCAxIDAgMC0xLjVIMi43NWEuNzUuNzUgMCAwIDAtLjc1Ljc1em01IDZjMCAuNDE0LjMzNi43NS43NS43NWg5LjVhLjc1Ljc1IDAgMSAwIDAtMS41aC05LjVhLjc1Ljc1IDAgMCAwLS43NS43NXpNMi43NSAxNi41aDE0LjVhLjc1Ljc1IDAgMSAwIDAtMS41SDIuNzVhLjc1Ljc1IDAgMSAwIDAgMS41ek0xLjYzMiA2Ljk1TDUuMDIgOS4zNThhLjQuNCAwIDAgMS0uMDEzLjY2MWwtMy4zOSAyLjIwN0EuNC40IDAgMCAxIDEgMTEuODkyVjcuMjc1YS40LjQgMCAwIDEgLjYzMi0uMzI2elwiLz48L3N2Zz4nO3ZhciBqeD0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMiAzLjc1YzAgLjQxNC4zMzYuNzUuNzUuNzVoMTQuNWEuNzUuNzUgMCAxIDAgMC0xLjVIMi43NWEuNzUuNzUgMCAwIDAtLjc1Ljc1em01IDZjMCAuNDE0LjMzNi43NS43NS43NWg5LjVhLjc1Ljc1IDAgMSAwIDAtMS41aC05LjVhLjc1Ljc1IDAgMCAwLS43NS43NXpNMi43NSAxNi41aDE0LjVhLjc1Ljc1IDAgMSAwIDAtMS41SDIuNzVhLjc1Ljc1IDAgMSAwIDAgMS41em0xLjYxOC05LjU1TC45OCA5LjM1OGEuNC40IDAgMCAwIC4wMTMuNjYxbDMuMzkgMi4yMDdBLjQuNCAwIDAgMCA1IDExLjg5MlY3LjI3NWEuNC40IDAgMCAwLS42MzItLjMyNnpcIi8+PC9zdmc+JztjbGFzcyBIeCBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSW5kZW50VUlcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQubG9jYWxlO2NvbnN0IGk9dC50O2NvbnN0IG49ZS51aUxhbmd1YWdlRGlyZWN0aW9uPT1cImx0clwiP0R4Omp4O2NvbnN0IG89ZS51aUxhbmd1YWdlRGlyZWN0aW9uPT1cImx0clwiP2p4OkR4O3RoaXMuX2RlZmluZUJ1dHRvbihcImluZGVudFwiLGkoXCJqZ1wiKSxuKTt0aGlzLl9kZWZpbmVCdXR0b24oXCJvdXRkZW50XCIsaShcImpoXCIpLG8pfV9kZWZpbmVCdXR0b24odCxlLGkpe2NvbnN0IG49dGhpcy5lZGl0b3I7bi51aS5jb21wb25lbnRGYWN0b3J5LmFkZCh0LG89Pntjb25zdCByPW4uY29tbWFuZHMuZ2V0KHQpO2NvbnN0IHM9bmV3IGhiKG8pO3Muc2V0KHtsYWJlbDplLGljb246aSx0b29sdGlwOnRydWV9KTtzLmJpbmQoXCJpc09uXCIsXCJpc0VuYWJsZWRcIikudG8ocixcInZhbHVlXCIsXCJpc0VuYWJsZWRcIik7dGhpcy5saXN0ZW5UbyhzLFwiZXhlY3V0ZVwiLCgpPT57bi5leGVjdXRlKHQpO24uZWRpdGluZy52aWV3LmZvY3VzKCl9KTtyZXR1cm4gc30pfX1jbGFzcyBXeCBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSW5kZW50XCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltGeCxIeF19fWNsYXNzIHF4IGV4dGVuZHMgand7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLl9pbmRlbnRCZWhhdmlvcj1lfXJlZnJlc2goKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbDtjb25zdCBpPVd3KGUuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO2lmKCFpfHwhZS5zY2hlbWEuY2hlY2tBdHRyaWJ1dGUoaSxcImJsb2NrSW5kZW50XCIpKXt0aGlzLmlzRW5hYmxlZD1mYWxzZTtyZXR1cm59dGhpcy5pc0VuYWJsZWQ9dGhpcy5faW5kZW50QmVoYXZpb3IuY2hlY2tFbmFibGVkKGkuZ2V0QXR0cmlidXRlKFwiYmxvY2tJbmRlbnRcIikpfWV4ZWN1dGUoKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IGU9VXgodCk7dC5jaGFuZ2UodD0+e2Zvcihjb25zdCBpIG9mIGUpe2NvbnN0IGU9aS5nZXRBdHRyaWJ1dGUoXCJibG9ja0luZGVudFwiKTtjb25zdCBuPXRoaXMuX2luZGVudEJlaGF2aW9yLmdldE5leHRJbmRlbnQoZSk7aWYobil7dC5zZXRBdHRyaWJ1dGUoXCJibG9ja0luZGVudFwiLG4saSl9ZWxzZXt0LnJlbW92ZUF0dHJpYnV0ZShcImJsb2NrSW5kZW50XCIsaSl9fX0pfX1mdW5jdGlvbiBVeCh0KXtjb25zdCBlPXQuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IGk9dC5zY2hlbWE7Y29uc3Qgbj1BcnJheS5mcm9tKGUuZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7cmV0dXJuIG4uZmlsdGVyKHQ9PmkuY2hlY2tBdHRyaWJ1dGUodCxcImJsb2NrSW5kZW50XCIpKX1jbGFzcyAkeHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmlzRm9yd2FyZD10LmRpcmVjdGlvbj09PVwiZm9yd2FyZFwiO3RoaXMub2Zmc2V0PXQub2Zmc2V0O3RoaXMudW5pdD10LnVuaXR9Y2hlY2tFbmFibGVkKHQpe2NvbnN0IGU9cGFyc2VGbG9hdCh0fHwwKTtyZXR1cm4gdGhpcy5pc0ZvcndhcmR8fGU+MH1nZXROZXh0SW5kZW50KHQpe2NvbnN0IGU9cGFyc2VGbG9hdCh0fHwwKTtjb25zdCBpPSF0fHx0LmVuZHNXaXRoKHRoaXMudW5pdCk7aWYoIWkpe3JldHVybiB0aGlzLmlzRm9yd2FyZD90aGlzLm9mZnNldCt0aGlzLnVuaXQ6dW5kZWZpbmVkfWNvbnN0IG49dGhpcy5pc0ZvcndhcmQ/dGhpcy5vZmZzZXQ6LXRoaXMub2Zmc2V0O2NvbnN0IG89ZStuO3JldHVybiBvPjA/byt0aGlzLnVuaXQ6dW5kZWZpbmVkfX1jbGFzcyBHeHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmlzRm9yd2FyZD10LmRpcmVjdGlvbj09PVwiZm9yd2FyZFwiO3RoaXMuY2xhc3Nlcz10LmNsYXNzZXN9Y2hlY2tFbmFibGVkKHQpe2NvbnN0IGU9dGhpcy5jbGFzc2VzLmluZGV4T2YodCk7aWYodGhpcy5pc0ZvcndhcmQpe3JldHVybiBlPHRoaXMuY2xhc3Nlcy5sZW5ndGgtMX1lbHNle3JldHVybiBlPj0wfX1nZXROZXh0SW5kZW50KHQpe2NvbnN0IGU9dGhpcy5jbGFzc2VzLmluZGV4T2YodCk7Y29uc3QgaT10aGlzLmlzRm9yd2FyZD8xOi0xO3JldHVybiB0aGlzLmNsYXNzZXNbZStpXX19Y29uc3QgS3g9L14jKFswLTlhLWZdezMsNH18WzAtOWEtZl17Nn18WzAtOWEtZl17OH0pJC9pO2NvbnN0IEp4PS9ecmdiXFwoWyBdPyhbMC05XXsxLDN9WyAlXT8sWyBdPyl7MiwzfVswLTldezEsM31bICVdP1xcKSQvaTtjb25zdCBZeD0vXnJnYmFcXChbIF0/KFswLTldezEsM31bICVdPyxbIF0/KXszfSgxfFswLTldKyV8WzBdP1xcLj9bMC05XSspXFwpJC9pO2NvbnN0IFF4PS9eaHNsXFwoWyBdPyhbMC05XXsxLDN9WyAlXT9bLF0/WyBdKil7M30oMXxbMC05XSslfFswXT9cXC4/WzAtOV0rKT9cXCkkL2k7Y29uc3QgWHg9L15oc2xhXFwoWyBdPyhbMC05XXsxLDN9WyAlXT8sWyBdPyl7MiwzfSgxfFswLTldKyV8WzBdP1xcLj9bMC05XSspXFwpJC9pO2NvbnN0IFp4PW5ldyBTZXQoW1wiYmxhY2tcIixcInNpbHZlclwiLFwiZ3JheVwiLFwid2hpdGVcIixcIm1hcm9vblwiLFwicmVkXCIsXCJwdXJwbGVcIixcImZ1Y2hzaWFcIixcImdyZWVuXCIsXCJsaW1lXCIsXCJvbGl2ZVwiLFwieWVsbG93XCIsXCJuYXZ5XCIsXCJibHVlXCIsXCJ0ZWFsXCIsXCJhcXVhXCIsXCJvcmFuZ2VcIixcImFsaWNlYmx1ZVwiLFwiYW50aXF1ZXdoaXRlXCIsXCJhcXVhbWFyaW5lXCIsXCJhenVyZVwiLFwiYmVpZ2VcIixcImJpc3F1ZVwiLFwiYmxhbmNoZWRhbG1vbmRcIixcImJsdWV2aW9sZXRcIixcImJyb3duXCIsXCJidXJseXdvb2RcIixcImNhZGV0Ymx1ZVwiLFwiY2hhcnRyZXVzZVwiLFwiY2hvY29sYXRlXCIsXCJjb3JhbFwiLFwiY29ybmZsb3dlcmJsdWVcIixcImNvcm5zaWxrXCIsXCJjcmltc29uXCIsXCJjeWFuXCIsXCJkYXJrYmx1ZVwiLFwiZGFya2N5YW5cIixcImRhcmtnb2xkZW5yb2RcIixcImRhcmtncmF5XCIsXCJkYXJrZ3JlZW5cIixcImRhcmtncmV5XCIsXCJkYXJra2hha2lcIixcImRhcmttYWdlbnRhXCIsXCJkYXJrb2xpdmVncmVlblwiLFwiZGFya29yYW5nZVwiLFwiZGFya29yY2hpZFwiLFwiZGFya3JlZFwiLFwiZGFya3NhbG1vblwiLFwiZGFya3NlYWdyZWVuXCIsXCJkYXJrc2xhdGVibHVlXCIsXCJkYXJrc2xhdGVncmF5XCIsXCJkYXJrc2xhdGVncmV5XCIsXCJkYXJrdHVycXVvaXNlXCIsXCJkYXJrdmlvbGV0XCIsXCJkZWVwcGlua1wiLFwiZGVlcHNreWJsdWVcIixcImRpbWdyYXlcIixcImRpbWdyZXlcIixcImRvZGdlcmJsdWVcIixcImZpcmVicmlja1wiLFwiZmxvcmFsd2hpdGVcIixcImZvcmVzdGdyZWVuXCIsXCJnYWluc2Jvcm9cIixcImdob3N0d2hpdGVcIixcImdvbGRcIixcImdvbGRlbnJvZFwiLFwiZ3JlZW55ZWxsb3dcIixcImdyZXlcIixcImhvbmV5ZGV3XCIsXCJob3RwaW5rXCIsXCJpbmRpYW5yZWRcIixcImluZGlnb1wiLFwiaXZvcnlcIixcImtoYWtpXCIsXCJsYXZlbmRlclwiLFwibGF2ZW5kZXJibHVzaFwiLFwibGF3bmdyZWVuXCIsXCJsZW1vbmNoaWZmb25cIixcImxpZ2h0Ymx1ZVwiLFwibGlnaHRjb3JhbFwiLFwibGlnaHRjeWFuXCIsXCJsaWdodGdvbGRlbnJvZHllbGxvd1wiLFwibGlnaHRncmF5XCIsXCJsaWdodGdyZWVuXCIsXCJsaWdodGdyZXlcIixcImxpZ2h0cGlua1wiLFwibGlnaHRzYWxtb25cIixcImxpZ2h0c2VhZ3JlZW5cIixcImxpZ2h0c2t5Ymx1ZVwiLFwibGlnaHRzbGF0ZWdyYXlcIixcImxpZ2h0c2xhdGVncmV5XCIsXCJsaWdodHN0ZWVsYmx1ZVwiLFwibGlnaHR5ZWxsb3dcIixcImxpbWVncmVlblwiLFwibGluZW5cIixcIm1hZ2VudGFcIixcIm1lZGl1bWFxdWFtYXJpbmVcIixcIm1lZGl1bWJsdWVcIixcIm1lZGl1bW9yY2hpZFwiLFwibWVkaXVtcHVycGxlXCIsXCJtZWRpdW1zZWFncmVlblwiLFwibWVkaXVtc2xhdGVibHVlXCIsXCJtZWRpdW1zcHJpbmdncmVlblwiLFwibWVkaXVtdHVycXVvaXNlXCIsXCJtZWRpdW12aW9sZXRyZWRcIixcIm1pZG5pZ2h0Ymx1ZVwiLFwibWludGNyZWFtXCIsXCJtaXN0eXJvc2VcIixcIm1vY2Nhc2luXCIsXCJuYXZham93aGl0ZVwiLFwib2xkbGFjZVwiLFwib2xpdmVkcmFiXCIsXCJvcmFuZ2VyZWRcIixcIm9yY2hpZFwiLFwicGFsZWdvbGRlbnJvZFwiLFwicGFsZWdyZWVuXCIsXCJwYWxldHVycXVvaXNlXCIsXCJwYWxldmlvbGV0cmVkXCIsXCJwYXBheWF3aGlwXCIsXCJwZWFjaHB1ZmZcIixcInBlcnVcIixcInBpbmtcIixcInBsdW1cIixcInBvd2RlcmJsdWVcIixcInJvc3licm93blwiLFwicm95YWxibHVlXCIsXCJzYWRkbGVicm93blwiLFwic2FsbW9uXCIsXCJzYW5keWJyb3duXCIsXCJzZWFncmVlblwiLFwic2Vhc2hlbGxcIixcInNpZW5uYVwiLFwic2t5Ymx1ZVwiLFwic2xhdGVibHVlXCIsXCJzbGF0ZWdyYXlcIixcInNsYXRlZ3JleVwiLFwic25vd1wiLFwic3ByaW5nZ3JlZW5cIixcInN0ZWVsYmx1ZVwiLFwidGFuXCIsXCJ0aGlzdGxlXCIsXCJ0b21hdG9cIixcInR1cnF1b2lzZVwiLFwidmlvbGV0XCIsXCJ3aGVhdFwiLFwid2hpdGVzbW9rZVwiLFwieWVsbG93Z3JlZW5cIixcInJlYmVjY2FwdXJwbGVcIixcImN1cnJlbnRjb2xvclwiLFwidHJhbnNwYXJlbnRcIl0pO2Z1bmN0aW9uIHRDKHQpe2lmKHQuc3RhcnRzV2l0aChcIiNcIikpe3JldHVybiBLeC50ZXN0KHQpfWlmKHQuc3RhcnRzV2l0aChcInJnYlwiKSl7cmV0dXJuIEp4LnRlc3QodCl8fFl4LnRlc3QodCl9aWYodC5zdGFydHNXaXRoKFwiaHNsXCIpKXtyZXR1cm4gUXgudGVzdCh0KXx8WHgudGVzdCh0KX1yZXR1cm4gWnguaGFzKHQudG9Mb3dlckNhc2UoKSl9Y29uc3QgZUM9W1wibm9uZVwiLFwiaGlkZGVuXCIsXCJkb3R0ZWRcIixcImRhc2hlZFwiLFwic29saWRcIixcImRvdWJsZVwiLFwiZ3Jvb3ZlXCIsXCJyaWRnZVwiLFwiaW5zZXRcIixcIm91dHNldFwiXTtmdW5jdGlvbiBpQyh0KXtyZXR1cm4gZUMuaW5jbHVkZXModCl9Y29uc3QgbkM9L14oWystXT9bMC05XSpbLl0/WzAtOV0rKHB4fGNtfG1tfGlufHBjfHB0fGNofGVtfGV4fHJlbXx2aHx2d3x2bWlufHZtYXgpfDApJC87ZnVuY3Rpb24gb0ModCl7cmV0dXJuIG5DLnRlc3QodCl9Y29uc3QgckM9L15bKy1dP1swLTldKlsuXT9bMC05XSslJC87ZnVuY3Rpb24gc0ModCl7cmV0dXJuIHJDLnRlc3QodCl9Y29uc3QgYUM9W1wicmVwZWF0LXhcIixcInJlcGVhdC15XCIsXCJyZXBlYXRcIixcInNwYWNlXCIsXCJyb3VuZFwiLFwibm8tcmVwZWF0XCJdO2Z1bmN0aW9uIGNDKHQpe3JldHVybiBhQy5pbmNsdWRlcyh0KX1jb25zdCBsQz1bXCJjZW50ZXJcIixcInRvcFwiLFwiYm90dG9tXCIsXCJsZWZ0XCIsXCJyaWdodFwiXTtmdW5jdGlvbiBkQyh0KXtyZXR1cm4gbEMuaW5jbHVkZXModCl9Y29uc3QgdUM9W1wiZml4ZWRcIixcInNjcm9sbFwiLFwibG9jYWxcIl07ZnVuY3Rpb24gaEModCl7cmV0dXJuIHVDLmluY2x1ZGVzKHQpfWNvbnN0IGZDPS9edXJsXFwoLztmdW5jdGlvbiBnQyh0KXtyZXR1cm4gZkMudGVzdCh0KX1mdW5jdGlvbiBtQyh0PVwiXCIpe2lmKHQ9PT1cIlwiKXtyZXR1cm57dG9wOnVuZGVmaW5lZCxyaWdodDp1bmRlZmluZWQsYm90dG9tOnVuZGVmaW5lZCxsZWZ0OnVuZGVmaW5lZH19Y29uc3QgZT1rQyh0KTtjb25zdCBpPWVbMF07Y29uc3Qgbj1lWzJdfHxpO2NvbnN0IG89ZVsxXXx8aTtjb25zdCByPWVbM118fG87cmV0dXJue3RvcDppLGJvdHRvbTpuLHJpZ2h0Om8sbGVmdDpyfX1mdW5jdGlvbiBwQyh0KXtyZXR1cm4gZT0+e2NvbnN0e3RvcDppLHJpZ2h0Om4sYm90dG9tOm8sbGVmdDpyfT1lO2NvbnN0IHM9W107aWYoIVtpLG4scixvXS5ldmVyeSh0PT4hIXQpKXtpZihpKXtzLnB1c2goW3QrXCItdG9wXCIsaV0pfWlmKG4pe3MucHVzaChbdCtcIi1yaWdodFwiLG5dKX1pZihvKXtzLnB1c2goW3QrXCItYm90dG9tXCIsb10pfWlmKHIpe3MucHVzaChbdCtcIi1sZWZ0XCIscl0pfX1lbHNle3MucHVzaChbdCxiQyhlKV0pfXJldHVybiBzfX1mdW5jdGlvbiBiQyh7dG9wOnQscmlnaHQ6ZSxib3R0b206aSxsZWZ0Om59KXtjb25zdCBvPVtdO2lmKG4hPT1lKXtvLnB1c2godCxlLGksbil9ZWxzZSBpZihpIT09dCl7by5wdXNoKHQsZSxpKX1lbHNlIGlmKGUhPT10KXtvLnB1c2godCxlKX1lbHNle28ucHVzaCh0KX1yZXR1cm4gby5qb2luKFwiIFwiKX1mdW5jdGlvbiB3Qyh0KXtyZXR1cm4gZT0+KHtwYXRoOnQsdmFsdWU6bUMoZSl9KX1mdW5jdGlvbiBrQyh0KXtyZXR1cm4gdC5yZXBsYWNlKC8sIC9nLFwiLFwiKS5zcGxpdChcIiBcIikubWFwKHQ9PnQucmVwbGFjZSgvLC9nLFwiLCBcIikpfWZ1bmN0aW9uIF9DKHQpe3Quc2V0Tm9ybWFsaXplcihcIm1hcmdpblwiLHdDKFwibWFyZ2luXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJtYXJnaW4tdG9wXCIsdD0+KHtwYXRoOlwibWFyZ2luLnRvcFwiLHZhbHVlOnR9KSk7dC5zZXROb3JtYWxpemVyKFwibWFyZ2luLXJpZ2h0XCIsdD0+KHtwYXRoOlwibWFyZ2luLnJpZ2h0XCIsdmFsdWU6dH0pKTt0LnNldE5vcm1hbGl6ZXIoXCJtYXJnaW4tYm90dG9tXCIsdD0+KHtwYXRoOlwibWFyZ2luLmJvdHRvbVwiLHZhbHVlOnR9KSk7dC5zZXROb3JtYWxpemVyKFwibWFyZ2luLWxlZnRcIix0PT4oe3BhdGg6XCJtYXJnaW4ubGVmdFwiLHZhbHVlOnR9KSk7dC5zZXRSZWR1Y2VyKFwibWFyZ2luXCIscEMoXCJtYXJnaW5cIikpO3Quc2V0U3R5bGVSZWxhdGlvbihcIm1hcmdpblwiLFtcIm1hcmdpbi10b3BcIixcIm1hcmdpbi1yaWdodFwiLFwibWFyZ2luLWJvdHRvbVwiLFwibWFyZ2luLWxlZnRcIl0pfWNsYXNzIHZDIGV4dGVuZHMgbXB7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dC5jb25maWcuZGVmaW5lKFwiaW5kZW50QmxvY2tcIix7b2Zmc2V0OjQwLHVuaXQ6XCJweFwifSl9c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJbmRlbnRCbG9ja1wifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5jb25maWcuZ2V0KFwiaW5kZW50QmxvY2tcIik7Y29uc3QgaT0hZS5jbGFzc2VzfHwhZS5jbGFzc2VzLmxlbmd0aDtjb25zdCBuPU9iamVjdC5hc3NpZ24oe2RpcmVjdGlvbjpcImZvcndhcmRcIn0sZSk7Y29uc3Qgbz1PYmplY3QuYXNzaWduKHtkaXJlY3Rpb246XCJiYWNrd2FyZFwifSxlKTtpZihpKXt0LmRhdGEuYWRkU3R5bGVQcm9jZXNzb3JSdWxlcyhfQyk7dGhpcy5fc2V0dXBDb252ZXJzaW9uVXNpbmdPZmZzZXQodC5jb252ZXJzaW9uKTt0LmNvbW1hbmRzLmFkZChcImluZGVudEJsb2NrXCIsbmV3IHF4KHQsbmV3ICR4KG4pKSk7dC5jb21tYW5kcy5hZGQoXCJvdXRkZW50QmxvY2tcIixuZXcgcXgodCxuZXcgJHgobykpKX1lbHNle3RoaXMuX3NldHVwQ29udmVyc2lvblVzaW5nQ2xhc3NlcyhlLmNsYXNzZXMpO3QuY29tbWFuZHMuYWRkKFwiaW5kZW50QmxvY2tcIixuZXcgcXgodCxuZXcgR3gobikpKTt0LmNvbW1hbmRzLmFkZChcIm91dGRlbnRCbG9ja1wiLG5ldyBxeCh0LG5ldyBHeChvKSkpfX1hZnRlckluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbC5zY2hlbWE7Y29uc3QgaT10LmNvbW1hbmRzLmdldChcImluZGVudFwiKTtjb25zdCBuPXQuY29tbWFuZHMuZ2V0KFwib3V0ZGVudFwiKTtjb25zdCBvPVtcInBhcmFncmFwaFwiLFwiaGVhZGluZzFcIixcImhlYWRpbmcyXCIsXCJoZWFkaW5nM1wiLFwiaGVhZGluZzRcIixcImhlYWRpbmc1XCIsXCJoZWFkaW5nNlwiXTtvLmZvckVhY2godD0+e2lmKGUuaXNSZWdpc3RlcmVkKHQpKXtlLmV4dGVuZCh0LHthbGxvd0F0dHJpYnV0ZXM6XCJibG9ja0luZGVudFwifSl9fSk7aS5yZWdpc3RlckNoaWxkQ29tbWFuZCh0LmNvbW1hbmRzLmdldChcImluZGVudEJsb2NrXCIpKTtuLnJlZ2lzdGVyQ2hpbGRDb21tYW5kKHQuY29tbWFuZHMuZ2V0KFwib3V0ZGVudEJsb2NrXCIpKX1fc2V0dXBDb252ZXJzaW9uVXNpbmdPZmZzZXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yLmNvbnZlcnNpb247Y29uc3QgZT10aGlzLmVkaXRvci5sb2NhbGU7Y29uc3QgaT1lLmNvbnRlbnRMYW5ndWFnZURpcmVjdGlvbj09PVwicnRsXCI/XCJtYXJnaW4tcmlnaHRcIjpcIm1hcmdpbi1sZWZ0XCI7dC5mb3IoXCJ1cGNhc3RcIikuYXR0cmlidXRlVG9BdHRyaWJ1dGUoe3ZpZXc6e3N0eWxlczp7W2ldOi9bXFxzXFxTXSsvfX0sbW9kZWw6e2tleTpcImJsb2NrSW5kZW50XCIsdmFsdWU6dD0+dC5nZXRTdHlsZShpKX19KTt0LmZvcihcImRvd25jYXN0XCIpLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHttb2RlbDpcImJsb2NrSW5kZW50XCIsdmlldzp0PT4oe2tleTpcInN0eWxlXCIsdmFsdWU6e1tpXTp0fX0pfSl9X3NldHVwQ29udmVyc2lvblVzaW5nQ2xhc3Nlcyh0KXtjb25zdCBlPXttb2RlbDp7a2V5OlwiYmxvY2tJbmRlbnRcIix2YWx1ZXM6W119LHZpZXc6e319O2Zvcihjb25zdCBpIG9mIHQpe2UubW9kZWwudmFsdWVzLnB1c2goaSk7ZS52aWV3W2ldPXtrZXk6XCJjbGFzc1wiLHZhbHVlOltpXX19dGhpcy5lZGl0b3IuY29udmVyc2lvbi5hdHRyaWJ1dGVUb0F0dHJpYnV0ZShlKX19Y29uc3QgeUM9XCJpdGFsaWNcIjtjbGFzcyB4QyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiSXRhbGljRWRpdGluZ1wifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO3QubW9kZWwuc2NoZW1hLmV4dGVuZChcIiR0ZXh0XCIse2FsbG93QXR0cmlidXRlczp5Q30pO3QubW9kZWwuc2NoZW1hLnNldEF0dHJpYnV0ZVByb3BlcnRpZXMoeUMse2lzRm9ybWF0dGluZzp0cnVlLGNvcHlPbkVudGVyOnRydWV9KTt0LmNvbnZlcnNpb24uYXR0cmlidXRlVG9FbGVtZW50KHttb2RlbDp5Qyx2aWV3OlwiaVwiLHVwY2FzdEFsc286W1wiZW1cIix7c3R5bGVzOntcImZvbnQtc3R5bGVcIjpcIml0YWxpY1wifX1dfSk7dC5jb21tYW5kcy5hZGQoeUMsbmV3IHlrKHQseUMpKTt0LmtleXN0cm9rZXMuc2V0KFwiQ1RSTCtJXCIseUMpfX12YXIgQ0M9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTkuNTg2IDE0LjYzM2wuMDIxLjAwNGMtLjAzNi4zMzUuMDk1LjY1NS4zOTMuOTYyLjA4Mi4wODMuMTczLjE1LjI3NC4yMDFoMS40NzRhLjYuNiAwIDEgMSAwIDEuMkg1LjMwNGEuNi42IDAgMCAxIDAtMS4yaDEuMTVjLjQ3NC0uMDcuODA5LS4xODIgMS4wMDUtLjMzNC4xNTctLjEyMi4yOTEtLjMyLjQwNC0uNTk3bDIuNDE2LTkuNTVhMS4wNTMgMS4wNTMgMCAwIDAtLjI4MS0uODIzIDEuMTIgMS4xMiAwIDAgMC0uNDQyLS4yOTZIOC4xNWEuNi42IDAgMCAxIDAtMS4yaDYuNDQzYS42LjYgMCAxIDEgMCAxLjJoLTEuMTk1Yy0uMzc2LjA1Ni0uNjUuMTU1LS44MjMuMjk2LS4yMTUuMTc1LS40MjMuNDM5LS42MjMuNzlsLTIuMzY2IDkuMzQ3elwiLz48L3N2Zz4nO2NvbnN0IEFDPVwiaXRhbGljXCI7Y2xhc3MgVEMgZXh0ZW5kcyBtcHtpbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKEFDLGk9Pntjb25zdCBuPXQuY29tbWFuZHMuZ2V0KEFDKTtjb25zdCBvPW5ldyBoYihpKTtvLnNldCh7bGFiZWw6ZShcImpqXCIpLGljb246Q0Msa2V5c3Ryb2tlOlwiQ1RSTCtJXCIsdG9vbHRpcDp0cnVlLGlzVG9nZ2xlYWJsZTp0cnVlfSk7by5iaW5kKFwiaXNPblwiLFwiaXNFbmFibGVkXCIpLnRvKG4sXCJ2YWx1ZVwiLFwiaXNFbmFibGVkXCIpO3RoaXMubGlzdGVuVG8obyxcImV4ZWN1dGVcIiwoKT0+e3QuZXhlY3V0ZShBQyk7dC5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiBvfSl9fWNsYXNzIFBDIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVyblt4QyxUQ119c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJdGFsaWNcIn19ZnVuY3Rpb24gU0ModCxlLGkpe3JldHVybiBpLmNyZWF0ZVJhbmdlKEVDKHQsZSx0cnVlLGkpLEVDKHQsZSxmYWxzZSxpKSl9ZnVuY3Rpb24gRUModCxlLGksbil7bGV0IG89dC50ZXh0Tm9kZXx8KGk/dC5ub2RlQmVmb3JlOnQubm9kZUFmdGVyKTtsZXQgcj1udWxsO3doaWxlKG8mJm8uZ2V0QXR0cmlidXRlKFwibGlua0hyZWZcIik9PWUpe3I9bztvPWk/by5wcmV2aW91c1NpYmxpbmc6by5uZXh0U2libGluZ31yZXR1cm4gcj9uLmNyZWF0ZVBvc2l0aW9uQXQocixpP1wiYmVmb3JlXCI6XCJhZnRlclwiKTp0fWNsYXNzIFJDIGV4dGVuZHMgand7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5tYW51YWxEZWNvcmF0b3JzPW5ldyB5c31yZXN0b3JlTWFudWFsRGVjb3JhdG9yU3RhdGVzKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5tYW51YWxEZWNvcmF0b3JzKXt0LnZhbHVlPXRoaXMuX2dldERlY29yYXRvclN0YXRlRnJvbU1vZGVsKHQuaWQpfX1yZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBlPXQuZG9jdW1lbnQ7dGhpcy52YWx1ZT1lLnNlbGVjdGlvbi5nZXRBdHRyaWJ1dGUoXCJsaW5rSHJlZlwiKTtmb3IoY29uc3QgdCBvZiB0aGlzLm1hbnVhbERlY29yYXRvcnMpe3QudmFsdWU9dGhpcy5fZ2V0RGVjb3JhdG9yU3RhdGVGcm9tTW9kZWwodC5pZCl9dGhpcy5pc0VuYWJsZWQ9dC5zY2hlbWEuY2hlY2tBdHRyaWJ1dGVJblNlbGVjdGlvbihlLnNlbGVjdGlvbixcImxpbmtIcmVmXCIpfWV4ZWN1dGUodCxlPXt9KXtjb25zdCBpPXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IG49aS5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3Qgbz1bXTtjb25zdCByPVtdO2Zvcihjb25zdCB0IGluIGUpe2lmKGVbdF0pe28ucHVzaCh0KX1lbHNle3IucHVzaCh0KX19aS5jaGFuZ2UoZT0+e2lmKG4uaXNDb2xsYXBzZWQpe2NvbnN0IHM9bi5nZXRGaXJzdFBvc2l0aW9uKCk7aWYobi5oYXNBdHRyaWJ1dGUoXCJsaW5rSHJlZlwiKSl7Y29uc3QgYT1TQyhzLG4uZ2V0QXR0cmlidXRlKFwibGlua0hyZWZcIiksaSk7ZS5zZXRBdHRyaWJ1dGUoXCJsaW5rSHJlZlwiLHQsYSk7by5mb3JFYWNoKHQ9PntlLnNldEF0dHJpYnV0ZSh0LHRydWUsYSl9KTtyLmZvckVhY2godD0+e2UucmVtb3ZlQXR0cmlidXRlKHQsYSl9KTtlLnNldFNlbGVjdGlvbihhKX1lbHNlIGlmKHQhPT1cIlwiKXtjb25zdCByPUhzKG4uZ2V0QXR0cmlidXRlcygpKTtyLnNldChcImxpbmtIcmVmXCIsdCk7by5mb3JFYWNoKHQ9PntyLnNldCh0LHRydWUpfSk7Y29uc3QgYT1lLmNyZWF0ZVRleHQodCxyKTtpLmluc2VydENvbnRlbnQoYSxzKTtlLnNldFNlbGVjdGlvbihlLmNyZWF0ZVJhbmdlT24oYSkpfX1lbHNle2NvbnN0IHM9aS5zY2hlbWEuZ2V0VmFsaWRSYW5nZXMobi5nZXRSYW5nZXMoKSxcImxpbmtIcmVmXCIpO2Zvcihjb25zdCBpIG9mIHMpe2Uuc2V0QXR0cmlidXRlKFwibGlua0hyZWZcIix0LGkpO28uZm9yRWFjaCh0PT57ZS5zZXRBdHRyaWJ1dGUodCx0cnVlLGkpfSk7ci5mb3JFYWNoKHQ9PntlLnJlbW92ZUF0dHJpYnV0ZSh0LGkpfSl9fX0pfV9nZXREZWNvcmF0b3JTdGF0ZUZyb21Nb2RlbCh0KXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50O3JldHVybiBlLnNlbGVjdGlvbi5nZXRBdHRyaWJ1dGUodCl8fGZhbHNlfX1jbGFzcyBPQyBleHRlbmRzIGp3e3JlZnJlc2goKXt0aGlzLmlzRW5hYmxlZD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uaGFzQXR0cmlidXRlKFwibGlua0hyZWZcIil9ZXhlY3V0ZSgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IG49dC5jb21tYW5kcy5nZXQoXCJsaW5rXCIpO2UuY2hhbmdlKHQ9Pntjb25zdCBvPWkuaXNDb2xsYXBzZWQ/W1NDKGkuZ2V0Rmlyc3RQb3NpdGlvbigpLGkuZ2V0QXR0cmlidXRlKFwibGlua0hyZWZcIiksZSldOmkuZ2V0UmFuZ2VzKCk7Zm9yKGNvbnN0IGUgb2Ygbyl7dC5yZW1vdmVBdHRyaWJ1dGUoXCJsaW5rSHJlZlwiLGUpO2lmKG4pe2Zvcihjb25zdCBpIG9mIG4ubWFudWFsRGVjb3JhdG9ycyl7dC5yZW1vdmVBdHRyaWJ1dGUoaS5pZCxlKX19fX0pfX1mdW5jdGlvbiBJQyh0LGUsaSl7dmFyIG49dC5sZW5ndGg7aT1pPT09dW5kZWZpbmVkP246aTtyZXR1cm4hZSYmaT49bj90Ok9hKHQsZSxpKX12YXIgVkM9SUM7dmFyIE5DPVwiXFxcXHVkODAwLVxcXFx1ZGZmZlwiLE1DPVwiXFxcXHUwMzAwLVxcXFx1MDM2ZlwiLEJDPVwiXFxcXHVmZTIwLVxcXFx1ZmUyZlwiLHpDPVwiXFxcXHUyMGQwLVxcXFx1MjBmZlwiLExDPU1DK0JDK3pDLEZDPVwiXFxcXHVmZTBlXFxcXHVmZTBmXCI7dmFyIERDPVwiXFxcXHUyMDBkXCI7dmFyIGpDPVJlZ0V4cChcIltcIitEQytOQytMQytGQytcIl1cIik7ZnVuY3Rpb24gSEModCl7cmV0dXJuIGpDLnRlc3QodCl9dmFyIFdDPUhDO2Z1bmN0aW9uIHFDKHQpe3JldHVybiB0LnNwbGl0KFwiXCIpfXZhciBVQz1xQzt2YXIgJEM9XCJcXFxcdWQ4MDAtXFxcXHVkZmZmXCIsR0M9XCJcXFxcdTAzMDAtXFxcXHUwMzZmXCIsS0M9XCJcXFxcdWZlMjAtXFxcXHVmZTJmXCIsSkM9XCJcXFxcdTIwZDAtXFxcXHUyMGZmXCIsWUM9R0MrS0MrSkMsUUM9XCJcXFxcdWZlMGVcXFxcdWZlMGZcIjt2YXIgWEM9XCJbXCIrJEMrXCJdXCIsWkM9XCJbXCIrWUMrXCJdXCIsdEE9XCJcXFxcdWQ4M2NbXFxcXHVkZmZiLVxcXFx1ZGZmZl1cIixlQT1cIig/OlwiK1pDK1wifFwiK3RBK1wiKVwiLGlBPVwiW15cIiskQytcIl1cIixuQT1cIig/OlxcXFx1ZDgzY1tcXFxcdWRkZTYtXFxcXHVkZGZmXSl7Mn1cIixvQT1cIltcXFxcdWQ4MDAtXFxcXHVkYmZmXVtcXFxcdWRjMDAtXFxcXHVkZmZmXVwiLHJBPVwiXFxcXHUyMDBkXCI7dmFyIHNBPWVBK1wiP1wiLGFBPVwiW1wiK1FDK1wiXT9cIixjQT1cIig/OlwiK3JBK1wiKD86XCIrW2lBLG5BLG9BXS5qb2luKFwifFwiKStcIilcIithQStzQStcIikqXCIsbEE9YUErc0ErY0EsZEE9XCIoPzpcIitbaUErWkMrXCI/XCIsWkMsbkEsb0EsWENdLmpvaW4oXCJ8XCIpK1wiKVwiO3ZhciB1QT1SZWdFeHAodEErXCIoPz1cIit0QStcIil8XCIrZEErbEEsXCJnXCIpO2Z1bmN0aW9uIGhBKHQpe3JldHVybiB0Lm1hdGNoKHVBKXx8W119dmFyIGZBPWhBO2Z1bmN0aW9uIGdBKHQpe3JldHVybiBXQyh0KT9mQSh0KTpVQyh0KX12YXIgbUE9Z0E7ZnVuY3Rpb24gcEEodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2U9X2EoZSk7dmFyIGk9V0MoZSk/bUEoZSk6dW5kZWZpbmVkO3ZhciBuPWk/aVswXTplLmNoYXJBdCgwKTt2YXIgbz1pP1ZDKGksMSkuam9pbihcIlwiKTplLnNsaWNlKDEpO3JldHVybiBuW3RdKCkrb319dmFyIGJBPXBBO3ZhciB3QT1iQShcInRvVXBwZXJDYXNlXCIpO3ZhciBrQT13QTtjb25zdCBfQT0vW1xcdTAwMDAtXFx1MDAyMFxcdTAwQTBcXHUxNjgwXFx1MTgwRVxcdTIwMDAtXFx1MjAyOVxcdTIwNWZcXHUzMDAwXS9nO2NvbnN0IHZBPS9eKD86KD86aHR0cHM/fGZ0cHM/fG1haWx0byk6fFteYS16XXxbYS16Ky4tXSsoPzpbXmEteisuOi1dfCQpKS9pO2Z1bmN0aW9uIHlBKHQpe3JldHVybiB0LmlzKFwiYXR0cmlidXRlRWxlbWVudFwiKSYmISF0LmdldEN1c3RvbVByb3BlcnR5KFwibGlua1wiKX1mdW5jdGlvbiB4QSh0LGUpe2NvbnN0IGk9ZS5jcmVhdGVBdHRyaWJ1dGVFbGVtZW50KFwiYVwiLHtocmVmOnR9LHtwcmlvcml0eTo1fSk7ZS5zZXRDdXN0b21Qcm9wZXJ0eShcImxpbmtcIix0cnVlLGkpO3JldHVybiBpfWZ1bmN0aW9uIENBKHQpe3Q9U3RyaW5nKHQpO3JldHVybiBBQSh0KT90OlwiI1wifWZ1bmN0aW9uIEFBKHQpe2NvbnN0IGU9dC5yZXBsYWNlKF9BLFwiXCIpO3JldHVybiBlLm1hdGNoKHZBKX1mdW5jdGlvbiBUQSh0LGUpe2NvbnN0IGk9e1wiT3BlbiBpbiBhIG5ldyB0YWJcIjp0KFwibW1cIiksRG93bmxvYWRhYmxlOnQoXCJtblwiKX07ZS5mb3JFYWNoKHQ9PntpZih0LmxhYmVsJiZpW3QubGFiZWxdKXt0LmxhYmVsPWlbdC5sYWJlbF19cmV0dXJuIHR9KTtyZXR1cm4gZX1mdW5jdGlvbiBQQSh0KXtjb25zdCBlPVtdO2lmKHQpe2Zvcihjb25zdFtpLG5db2YgT2JqZWN0LmVudHJpZXModCkpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7fSxuLHtpZDpgbGluayR7a0EoaSl9YH0pO2UucHVzaCh0KX19cmV0dXJuIGV9Y2xhc3MgU0F7Y29uc3RydWN0b3IoKXt0aGlzLl9kZWZpbml0aW9ucz1uZXcgU2V0fWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5fZGVmaW5pdGlvbnMuc2l6ZX1hZGQodCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7dC5mb3JFYWNoKHQ9PnRoaXMuX2RlZmluaXRpb25zLmFkZCh0KSl9ZWxzZXt0aGlzLl9kZWZpbml0aW9ucy5hZGQodCl9fWdldERpc3BhdGNoZXIoKXtyZXR1cm4gdD0+e3Qub24oXCJhdHRyaWJ1dGU6bGlua0hyZWZcIiwodCxlLGkpPT57aWYoIWkuY29uc3VtYWJsZS50ZXN0KGUuaXRlbSxcImF0dHJpYnV0ZTpsaW5rSHJlZlwiKSl7cmV0dXJufWNvbnN0IG49aS53cml0ZXI7Y29uc3Qgbz1uLmRvY3VtZW50LnNlbGVjdGlvbjtmb3IoY29uc3QgdCBvZiB0aGlzLl9kZWZpbml0aW9ucyl7Y29uc3Qgcj1uLmNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQoXCJhXCIsdC5hdHRyaWJ1dGVzLHtwcmlvcml0eTo1fSk7bi5zZXRDdXN0b21Qcm9wZXJ0eShcImxpbmtcIix0cnVlLHIpO2lmKHQuY2FsbGJhY2soZS5hdHRyaWJ1dGVOZXdWYWx1ZSkpe2lmKGUuaXRlbS5pcyhcInNlbGVjdGlvblwiKSl7bi53cmFwKG8uZ2V0Rmlyc3RSYW5nZSgpLHIpfWVsc2V7bi53cmFwKGkubWFwcGVyLnRvVmlld1JhbmdlKGUucmFuZ2UpLHIpfX1lbHNle24udW53cmFwKGkubWFwcGVyLnRvVmlld1JhbmdlKGUucmFuZ2UpLHIpfX19LHtwcmlvcml0eTpcImhpZ2hcIn0pfX19Y2xhc3MgRUF7Y29uc3RydWN0b3Ioe2lkOnQsbGFiZWw6ZSxhdHRyaWJ1dGVzOml9KXt0aGlzLmlkPXQ7dGhpcy5zZXQoXCJ2YWx1ZVwiKTt0aGlzLmxhYmVsPWU7dGhpcy5hdHRyaWJ1dGVzPWl9fXZzKEVBLEpjKTtmdW5jdGlvbiBSQSh7dmlldzp0LG1vZGVsOmUsZW1pdHRlcjppLGF0dHJpYnV0ZTpuLGxvY2FsZTpvfSl7Y29uc3Qgcj1uZXcgT0EoZSxpLG4pO2NvbnN0IHM9ZS5kb2N1bWVudC5zZWxlY3Rpb247aS5saXN0ZW5Ubyh0LmRvY3VtZW50LFwia2V5ZG93blwiLCh0LGUpPT57aWYoIXMuaXNDb2xsYXBzZWQpe3JldHVybn1pZihlLnNoaWZ0S2V5fHxlLmFsdEtleXx8ZS5jdHJsS2V5KXtyZXR1cm59Y29uc3QgaT1lLmtleUNvZGU9PU5sLmFycm93cmlnaHQ7Y29uc3Qgbj1lLmtleUNvZGU9PU5sLmFycm93bGVmdDtpZighaSYmIW4pe3JldHVybn1jb25zdCBhPXMuZ2V0Rmlyc3RQb3NpdGlvbigpO2NvbnN0IGM9by5jb250ZW50TGFuZ3VhZ2VEaXJlY3Rpb247bGV0IGw7aWYoYz09PVwibHRyXCImJml8fGM9PT1cInJ0bFwiJiZuKXtsPXIuaGFuZGxlRm9yd2FyZE1vdmVtZW50KGEsZSl9ZWxzZXtsPXIuaGFuZGxlQmFja3dhcmRNb3ZlbWVudChhLGUpfWlmKGwpe3Quc3RvcCgpfX0se3ByaW9yaXR5Om9zLmdldChcImhpZ2hcIikrMX0pfWNsYXNzIE9Be2NvbnN0cnVjdG9yKHQsZSxpKXt0aGlzLm1vZGVsPXQ7dGhpcy5hdHRyaWJ1dGU9aTt0aGlzLl9tb2RlbFNlbGVjdGlvbj10LmRvY3VtZW50LnNlbGVjdGlvbjt0aGlzLl9vdmVycmlkZVVpZD1udWxsO3RoaXMuX2lzTmV4dEdyYXZpdHlSZXN0b3JhdGlvblNraXBwZWQ9ZmFsc2U7ZS5saXN0ZW5Ubyh0aGlzLl9tb2RlbFNlbGVjdGlvbixcImNoYW5nZTpyYW5nZVwiLCh0LGUpPT57aWYodGhpcy5faXNOZXh0R3Jhdml0eVJlc3RvcmF0aW9uU2tpcHBlZCl7dGhpcy5faXNOZXh0R3Jhdml0eVJlc3RvcmF0aW9uU2tpcHBlZD1mYWxzZTtyZXR1cm59aWYoIXRoaXMuX2lzR3Jhdml0eU92ZXJyaWRkZW4pe3JldHVybn1pZighZS5kaXJlY3RDaGFuZ2UmJklBKHRoaXMuX21vZGVsU2VsZWN0aW9uLmdldEZpcnN0UG9zaXRpb24oKSxpKSl7cmV0dXJufXRoaXMuX3Jlc3RvcmVHcmF2aXR5KCl9KX1oYW5kbGVGb3J3YXJkTW92ZW1lbnQodCxlKXtjb25zdCBpPXRoaXMuYXR0cmlidXRlO2lmKHRoaXMuX2lzR3Jhdml0eU92ZXJyaWRkZW4pe3JldHVybn1pZih0LmlzQXRTdGFydCYmdGhpcy5faGFzU2VsZWN0aW9uQXR0cmlidXRlKXtyZXR1cm59aWYoTUEodCxpKSYmdGhpcy5faGFzU2VsZWN0aW9uQXR0cmlidXRlKXt0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudChlKTt0aGlzLl9yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUoKTtyZXR1cm4gdHJ1ZX1pZihWQSh0LGkpKXt0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudChlKTt0aGlzLl9vdmVycmlkZUdyYXZpdHkoKTtyZXR1cm4gdHJ1ZX1pZihOQSh0LGkpJiZ0aGlzLl9oYXNTZWxlY3Rpb25BdHRyaWJ1dGUpe3RoaXMuX3ByZXZlbnRDYXJldE1vdmVtZW50KGUpO3RoaXMuX292ZXJyaWRlR3Jhdml0eSgpO3JldHVybiB0cnVlfX1oYW5kbGVCYWNrd2FyZE1vdmVtZW50KHQsZSl7Y29uc3QgaT10aGlzLmF0dHJpYnV0ZTtpZih0aGlzLl9pc0dyYXZpdHlPdmVycmlkZGVuKXtpZihNQSh0LGkpJiZ0aGlzLl9oYXNTZWxlY3Rpb25BdHRyaWJ1dGUpe3RoaXMuX3ByZXZlbnRDYXJldE1vdmVtZW50KGUpO3RoaXMuX3Jlc3RvcmVHcmF2aXR5KCk7dGhpcy5fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKCk7cmV0dXJuIHRydWV9ZWxzZXt0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudChlKTt0aGlzLl9yZXN0b3JlR3Jhdml0eSgpO2lmKHQuaXNBdFN0YXJ0KXt0aGlzLl9yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUoKX1yZXR1cm4gdHJ1ZX19ZWxzZXtpZihNQSh0LGkpJiYhdGhpcy5faGFzU2VsZWN0aW9uQXR0cmlidXRlKXt0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudChlKTt0aGlzLl9zZXRTZWxlY3Rpb25BdHRyaWJ1dGVGcm9tVGhlTm9kZUJlZm9yZSh0KTtyZXR1cm4gdHJ1ZX1pZih0LmlzQXRFbmQmJk5BKHQsaSkpe2lmKHRoaXMuX2hhc1NlbGVjdGlvbkF0dHJpYnV0ZSl7aWYoQkEodCxpKSl7dGhpcy5fc2tpcE5leHRBdXRvbWF0aWNHcmF2aXR5UmVzdG9yYXRpb24oKTt0aGlzLl9vdmVycmlkZUdyYXZpdHkoKX1yZXR1cm59ZWxzZXt0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudChlKTt0aGlzLl9zZXRTZWxlY3Rpb25BdHRyaWJ1dGVGcm9tVGhlTm9kZUJlZm9yZSh0KTtyZXR1cm4gdHJ1ZX19aWYodC5pc0F0U3RhcnQpe2lmKHRoaXMuX2hhc1NlbGVjdGlvbkF0dHJpYnV0ZSl7dGhpcy5fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKCk7dGhpcy5fcHJldmVudENhcmV0TW92ZW1lbnQoZSk7cmV0dXJuIHRydWV9cmV0dXJufWlmKEJBKHQsaSkpe3RoaXMuX3NraXBOZXh0QXV0b21hdGljR3Jhdml0eVJlc3RvcmF0aW9uKCk7dGhpcy5fb3ZlcnJpZGVHcmF2aXR5KCl9fX1nZXQgX2lzR3Jhdml0eU92ZXJyaWRkZW4oKXtyZXR1cm4hIXRoaXMuX292ZXJyaWRlVWlkfWdldCBfaGFzU2VsZWN0aW9uQXR0cmlidXRlKCl7cmV0dXJuIHRoaXMuX21vZGVsU2VsZWN0aW9uLmhhc0F0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZSl9X292ZXJyaWRlR3Jhdml0eSgpe3RoaXMuX292ZXJyaWRlVWlkPXRoaXMubW9kZWwuY2hhbmdlKHQ9PnQub3ZlcnJpZGVTZWxlY3Rpb25HcmF2aXR5KCkpfV9yZXN0b3JlR3Jhdml0eSgpe3RoaXMubW9kZWwuY2hhbmdlKHQ9Pnt0LnJlc3RvcmVTZWxlY3Rpb25HcmF2aXR5KHRoaXMuX292ZXJyaWRlVWlkKTt0aGlzLl9vdmVycmlkZVVpZD1udWxsfSl9X3ByZXZlbnRDYXJldE1vdmVtZW50KHQpe3QucHJldmVudERlZmF1bHQoKX1fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKCl7dGhpcy5tb2RlbC5jaGFuZ2UodD0+e3QucmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlKX0pfV9zZXRTZWxlY3Rpb25BdHRyaWJ1dGVGcm9tVGhlTm9kZUJlZm9yZSh0KXtjb25zdCBlPXRoaXMuYXR0cmlidXRlO3RoaXMubW9kZWwuY2hhbmdlKGk9PntpLnNldFNlbGVjdGlvbkF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZSx0Lm5vZGVCZWZvcmUuZ2V0QXR0cmlidXRlKGUpKX0pfV9za2lwTmV4dEF1dG9tYXRpY0dyYXZpdHlSZXN0b3JhdGlvbigpe3RoaXMuX2lzTmV4dEdyYXZpdHlSZXN0b3JhdGlvblNraXBwZWQ9dHJ1ZX19ZnVuY3Rpb24gSUEodCxlKXtyZXR1cm4gVkEodCxlKXx8TkEodCxlKX1mdW5jdGlvbiBWQSh0LGUpe2NvbnN0e25vZGVCZWZvcmU6aSxub2RlQWZ0ZXI6bn09dDtjb25zdCBvPWk/aS5oYXNBdHRyaWJ1dGUoZSk6ZmFsc2U7Y29uc3Qgcj1uP24uaGFzQXR0cmlidXRlKGUpOmZhbHNlO3JldHVybiByJiYoIW98fGkuZ2V0QXR0cmlidXRlKGUpIT09bi5nZXRBdHRyaWJ1dGUoZSkpfWZ1bmN0aW9uIE5BKHQsZSl7Y29uc3R7bm9kZUJlZm9yZTppLG5vZGVBZnRlcjpufT10O2NvbnN0IG89aT9pLmhhc0F0dHJpYnV0ZShlKTpmYWxzZTtjb25zdCByPW4/bi5oYXNBdHRyaWJ1dGUoZSk6ZmFsc2U7cmV0dXJuIG8mJighcnx8aS5nZXRBdHRyaWJ1dGUoZSkhPT1uLmdldEF0dHJpYnV0ZShlKSl9ZnVuY3Rpb24gTUEodCxlKXtjb25zdHtub2RlQmVmb3JlOmksbm9kZUFmdGVyOm59PXQ7Y29uc3Qgbz1pP2kuaGFzQXR0cmlidXRlKGUpOmZhbHNlO2NvbnN0IHI9bj9uLmhhc0F0dHJpYnV0ZShlKTpmYWxzZTtpZighcnx8IW8pe3JldHVybn1yZXR1cm4gbi5nZXRBdHRyaWJ1dGUoZSkhPT1pLmdldEF0dHJpYnV0ZShlKX1mdW5jdGlvbiBCQSh0LGUpe3JldHVybiBJQSh0LmdldFNoaWZ0ZWRCeSgtMSksZSl9dmFyIHpBPWkoODApO2NvbnN0IExBPVwiY2stbGlua19zZWxlY3RlZFwiO2NvbnN0IEZBPVwiYXV0b21hdGljXCI7Y29uc3QgREE9XCJtYW51YWxcIjtjb25zdCBqQT0vXihodHRwcz86KT9cXC9cXC8vO2NsYXNzIEhBIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJMaW5rRWRpdGluZ1wifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3QuY29uZmlnLmRlZmluZShcImxpbmtcIix7YWRkVGFyZ2V0VG9FeHRlcm5hbExpbmtzOmZhbHNlfSl9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmxvY2FsZTt0Lm1vZGVsLnNjaGVtYS5leHRlbmQoXCIkdGV4dFwiLHthbGxvd0F0dHJpYnV0ZXM6XCJsaW5rSHJlZlwifSk7dC5jb252ZXJzaW9uLmZvcihcImRhdGFEb3duY2FzdFwiKS5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOlwibGlua0hyZWZcIix2aWV3OnhBfSk7dC5jb252ZXJzaW9uLmZvcihcImVkaXRpbmdEb3duY2FzdFwiKS5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOlwibGlua0hyZWZcIix2aWV3Oih0LGUpPT54QShDQSh0KSxlKX0pO3QuY29udmVyc2lvbi5mb3IoXCJ1cGNhc3RcIikuZWxlbWVudFRvQXR0cmlidXRlKHt2aWV3OntuYW1lOlwiYVwiLGF0dHJpYnV0ZXM6e2hyZWY6dHJ1ZX19LG1vZGVsOntrZXk6XCJsaW5rSHJlZlwiLHZhbHVlOnQ9PnQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX19KTt0LmNvbW1hbmRzLmFkZChcImxpbmtcIixuZXcgUkModCkpO3QuY29tbWFuZHMuYWRkKFwidW5saW5rXCIsbmV3IE9DKHQpKTtjb25zdCBpPVRBKHQudCxQQSh0LmNvbmZpZy5nZXQoXCJsaW5rLmRlY29yYXRvcnNcIikpKTt0aGlzLl9lbmFibGVBdXRvbWF0aWNEZWNvcmF0b3JzKGkuZmlsdGVyKHQ9PnQubW9kZT09PUZBKSk7dGhpcy5fZW5hYmxlTWFudWFsRGVjb3JhdG9ycyhpLmZpbHRlcih0PT50Lm1vZGU9PT1EQSkpO1JBKHt2aWV3OnQuZWRpdGluZy52aWV3LG1vZGVsOnQubW9kZWwsZW1pdHRlcjp0aGlzLGF0dHJpYnV0ZTpcImxpbmtIcmVmXCIsbG9jYWxlOmV9KTt0aGlzLl9zZXR1cExpbmtIaWdobGlnaHQoKX1fZW5hYmxlQXV0b21hdGljRGVjb3JhdG9ycyh0KXtjb25zdCBlPXRoaXMuZWRpdG9yO2NvbnN0IGk9bmV3IFNBO2lmKGUuY29uZmlnLmdldChcImxpbmsuYWRkVGFyZ2V0VG9FeHRlcm5hbExpbmtzXCIpKXtpLmFkZCh7aWQ6XCJsaW5rSXNFeHRlcm5hbFwiLG1vZGU6RkEsY2FsbGJhY2s6dD0+akEudGVzdCh0KSxhdHRyaWJ1dGVzOnt0YXJnZXQ6XCJfYmxhbmtcIixyZWw6XCJub29wZW5lciBub3JlZmVycmVyXCJ9fSl9aS5hZGQodCk7aWYoaS5sZW5ndGgpe2UuY29udmVyc2lvbi5mb3IoXCJkb3duY2FzdFwiKS5hZGQoaS5nZXREaXNwYXRjaGVyKCkpfX1fZW5hYmxlTWFudWFsRGVjb3JhdG9ycyh0KXtpZighdC5sZW5ndGgpe3JldHVybn1jb25zdCBlPXRoaXMuZWRpdG9yO2NvbnN0IGk9ZS5jb21tYW5kcy5nZXQoXCJsaW5rXCIpO2NvbnN0IG49aS5tYW51YWxEZWNvcmF0b3JzO3QuZm9yRWFjaCh0PT57ZS5tb2RlbC5zY2hlbWEuZXh0ZW5kKFwiJHRleHRcIix7YWxsb3dBdHRyaWJ1dGVzOnQuaWR9KTtuLmFkZChuZXcgRUEodCkpO2UuY29udmVyc2lvbi5mb3IoXCJkb3duY2FzdFwiKS5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOnQuaWQsdmlldzooZSxpKT0+e2lmKGUpe2NvbnN0IGU9bi5nZXQodC5pZCkuYXR0cmlidXRlcztjb25zdCBvPWkuY3JlYXRlQXR0cmlidXRlRWxlbWVudChcImFcIixlLHtwcmlvcml0eTo1fSk7aS5zZXRDdXN0b21Qcm9wZXJ0eShcImxpbmtcIix0cnVlLG8pO3JldHVybiBvfX19KTtlLmNvbnZlcnNpb24uZm9yKFwidXBjYXN0XCIpLmVsZW1lbnRUb0F0dHJpYnV0ZSh7dmlldzp7bmFtZTpcImFcIixhdHRyaWJ1dGVzOm4uZ2V0KHQuaWQpLmF0dHJpYnV0ZXN9LG1vZGVsOntrZXk6dC5pZH19KX0pfV9zZXR1cExpbmtIaWdobGlnaHQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5lZGl0aW5nLnZpZXc7Y29uc3QgaT1uZXcgU2V0O2UuZG9jdW1lbnQucmVnaXN0ZXJQb3N0Rml4ZXIoZT0+e2NvbnN0IG49dC5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247bGV0IG89ZmFsc2U7aWYobi5oYXNBdHRyaWJ1dGUoXCJsaW5rSHJlZlwiKSl7Y29uc3Qgcj1TQyhuLmdldEZpcnN0UG9zaXRpb24oKSxuLmdldEF0dHJpYnV0ZShcImxpbmtIcmVmXCIpLHQubW9kZWwpO2NvbnN0IHM9dC5lZGl0aW5nLm1hcHBlci50b1ZpZXdSYW5nZShyKTtmb3IoY29uc3QgdCBvZiBzLmdldEl0ZW1zKCkpe2lmKHQuaXMoXCJhXCIpJiYhdC5oYXNDbGFzcyhMQSkpe2UuYWRkQ2xhc3MoTEEsdCk7aS5hZGQodCk7bz10cnVlfX19cmV0dXJuIG99KTt0LmNvbnZlcnNpb24uZm9yKFwiZWRpdGluZ0Rvd25jYXN0XCIpLmFkZCh0PT57dC5vbihcImluc2VydFwiLG4se3ByaW9yaXR5OlwiaGlnaGVzdFwifSk7dC5vbihcInJlbW92ZVwiLG4se3ByaW9yaXR5OlwiaGlnaGVzdFwifSk7dC5vbihcImF0dHJpYnV0ZVwiLG4se3ByaW9yaXR5OlwiaGlnaGVzdFwifSk7dC5vbihcInNlbGVjdGlvblwiLG4se3ByaW9yaXR5OlwiaGlnaGVzdFwifSk7ZnVuY3Rpb24gbigpe2UuY2hhbmdlKHQ9Pntmb3IoY29uc3QgZSBvZiBpLnZhbHVlcygpKXt0LnJlbW92ZUNsYXNzKExBLGUpO2kuZGVsZXRlKGUpfX0pfX0pfX1jbGFzcyBXQSBleHRlbmRzIEp1e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuZG9tRXZlbnRUeXBlPVwiY2xpY2tcIn1vbkRvbUV2ZW50KHQpe3RoaXMuZmlyZSh0LnR5cGUsdCl9fXZhciBxQT1pKDgyKTtjbGFzcyBVQSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQsZT1bXSl7c3VwZXIodCk7Y29uc3QgaT10LnQ7dGhpcy5mb2N1c1RyYWNrZXI9bmV3IGZiO3RoaXMua2V5c3Ryb2tlcz1uZXcgZHA7dGhpcy51cmxJbnB1dFZpZXc9dGhpcy5fY3JlYXRlVXJsSW5wdXQoKTt0aGlzLnNhdmVCdXR0b25WaWV3PXRoaXMuX2NyZWF0ZUJ1dHRvbihpKFwibG9cIiksWHYsXCJjay1idXR0b24tc2F2ZVwiKTt0aGlzLnNhdmVCdXR0b25WaWV3LnR5cGU9XCJzdWJtaXRcIjt0aGlzLmNhbmNlbEJ1dHRvblZpZXc9dGhpcy5fY3JlYXRlQnV0dG9uKGkoXCJscFwiKSxadixcImNrLWJ1dHRvbi1jYW5jZWxcIixcImNhbmNlbFwiKTt0aGlzLl9tYW51YWxEZWNvcmF0b3JTd2l0Y2hlcz10aGlzLl9jcmVhdGVNYW51YWxEZWNvcmF0b3JTd2l0Y2hlcyhlKTt0aGlzLmNoaWxkcmVuPXRoaXMuX2NyZWF0ZUZvcm1DaGlsZHJlbihlKTt0aGlzLl9mb2N1c2FibGVzPW5ldyBicDt0aGlzLl9mb2N1c0N5Y2xlcj1uZXcgeWIoe2ZvY3VzYWJsZXM6dGhpcy5fZm9jdXNhYmxlcyxmb2N1c1RyYWNrZXI6dGhpcy5mb2N1c1RyYWNrZXIsa2V5c3Ryb2tlSGFuZGxlcjp0aGlzLmtleXN0cm9rZXMsYWN0aW9uczp7Zm9jdXNQcmV2aW91czpcInNoaWZ0ICsgdGFiXCIsZm9jdXNOZXh0OlwidGFiXCJ9fSk7Y29uc3Qgbj1bXCJja1wiLFwiY2stbGluay1mb3JtXCJdO2lmKGUubGVuZ3RoKXtuLnB1c2goXCJjay1saW5rLWZvcm1fbGF5b3V0LXZlcnRpY2FsXCIpfXRoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImZvcm1cIixhdHRyaWJ1dGVzOntjbGFzczpuLHRhYmluZGV4OlwiLTFcIn0sY2hpbGRyZW46dGhpcy5jaGlsZHJlbn0pfWdldERlY29yYXRvclN3aXRjaGVzU3RhdGUoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9tYW51YWxEZWNvcmF0b3JTd2l0Y2hlcykucmVkdWNlKCh0LGUpPT57dFtlLm5hbWVdPWUuaXNPbjtyZXR1cm4gdH0se30pfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO1F2KHt2aWV3OnRoaXN9KTtjb25zdCB0PVt0aGlzLnVybElucHV0VmlldywuLi50aGlzLl9tYW51YWxEZWNvcmF0b3JTd2l0Y2hlcyx0aGlzLnNhdmVCdXR0b25WaWV3LHRoaXMuY2FuY2VsQnV0dG9uVmlld107dC5mb3JFYWNoKHQ9Pnt0aGlzLl9mb2N1c2FibGVzLmFkZCh0KTt0aGlzLmZvY3VzVHJhY2tlci5hZGQodC5lbGVtZW50KX0pO3RoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfWZvY3VzKCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNGaXJzdCgpfV9jcmVhdGVVcmxJbnB1dCgpe2NvbnN0IHQ9dGhpcy5sb2NhbGUudDtjb25zdCBlPW5ldyBLdih0aGlzLmxvY2FsZSxZdik7ZS5sYWJlbD10KFwibHFcIik7ZS5pbnB1dFZpZXcucGxhY2Vob2xkZXI9XCJodHRwczovL2V4YW1wbGUuY29tXCI7cmV0dXJuIGV9X2NyZWF0ZUJ1dHRvbih0LGUsaSxuKXtjb25zdCBvPW5ldyBoYih0aGlzLmxvY2FsZSk7by5zZXQoe2xhYmVsOnQsaWNvbjplLHRvb2x0aXA6dHJ1ZX0pO28uZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOml9fSk7aWYobil7by5kZWxlZ2F0ZShcImV4ZWN1dGVcIikudG8odGhpcyxuKX1yZXR1cm4gb31fY3JlYXRlTWFudWFsRGVjb3JhdG9yU3dpdGNoZXModCl7Y29uc3QgZT10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTtmb3IoY29uc3QgaSBvZiB0KXtjb25zdCB0PW5ldyBGYih0aGlzLmxvY2FsZSk7dC5zZXQoe25hbWU6aS5pZCxsYWJlbDppLmxhYmVsLHdpdGhUZXh0OnRydWV9KTt0LmJpbmQoXCJpc09uXCIpLnRvKGksXCJ2YWx1ZVwiKTt0Lm9uKFwiZXhlY3V0ZVwiLCgpPT57aS5zZXQoXCJ2YWx1ZVwiLCF0LmlzT24pfSk7ZS5hZGQodCl9cmV0dXJuIGV9X2NyZWF0ZUZvcm1DaGlsZHJlbih0KXtjb25zdCBlPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpO2UuYWRkKHRoaXMudXJsSW5wdXRWaWV3KTtpZih0Lmxlbmd0aCl7Y29uc3QgdD1uZXcgR3A7dC5zZXRUZW1wbGF0ZSh7dGFnOlwidWxcIixjaGlsZHJlbjp0aGlzLl9tYW51YWxEZWNvcmF0b3JTd2l0Y2hlcy5tYXAodD0+KHt0YWc6XCJsaVwiLGNoaWxkcmVuOlt0XSxhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stbGlzdF9faXRlbVwiXX19KSksYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLXJlc2V0XCIsXCJjay1saXN0XCJdfX0pO2UuYWRkKHQpfWUuYWRkKHRoaXMuc2F2ZUJ1dHRvblZpZXcpO2UuYWRkKHRoaXMuY2FuY2VsQnV0dG9uVmlldyk7cmV0dXJuIGV9fXZhciAkQT0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTEuMDc3IDE1bC45OTEtMS40MTZhLjc1Ljc1IDAgMSAxIDEuMjI5Ljg2bC0xLjE0OCAxLjY0YS43NDguNzQ4IDAgMCAxLS4yMTcuMjA2IDUuMjUxIDUuMjUxIDAgMCAxLTguNTAzLTUuOTU1Ljc0MS43NDEgMCAwIDEgLjEyLS4yNzRsMS4xNDctMS42MzlhLjc1Ljc1IDAgMSAxIDEuMjI4Ljg2TDQuOTMzIDEwLjdsLjAwNi4wMDNhMy43NSAzLjc1IDAgMCAwIDYuMTMyIDQuMjk0bC4wMDYuMDA0em01LjQ5NC01LjMzNWEuNzQ4Ljc0OCAwIDAgMS0uMTIuMjc0bC0xLjE0NyAxLjYzOWEuNzUuNzUgMCAxIDEtMS4yMjgtLjg2bC44Ni0xLjIzYTMuNzUgMy43NSAwIDAgMC02LjE0NC00LjMwMWwtLjg2IDEuMjI5YS43NS43NSAwIDAgMS0xLjIyOS0uODZsMS4xNDgtMS42NGEuNzQ4Ljc0OCAwIDAgMSAuMjE3LS4yMDYgNS4yNTEgNS4yNTEgMCAwIDEgOC41MDMgNS45NTV6bS00LjU2My0yLjUzMmEuNzUuNzUgMCAwIDEgLjE4NCAxLjA0NWwtMy4xNTUgNC41MDVhLjc1Ljc1IDAgMSAxLTEuMjI5LS44NmwzLjE1NS00LjUwNmEuNzUuNzUgMCAwIDEgMS4wNDUtLjE4NHptNC45MTkgMTAuNTYybC0xLjQxNCAxLjQxNGEuNzUuNzUgMCAxIDEtMS4wNi0xLjA2bDEuNDE0LTEuNDE1LTEuNDE1LTEuNDE0YS43NS43NSAwIDAgMSAxLjA2MS0xLjA2bDEuNDE0IDEuNDE0IDEuNDE0LTEuNDE1YS43NS43NSAwIDAgMSAxLjA2MSAxLjA2MWwtMS40MTQgMS40MTQgMS40MTQgMS40MTVhLjc1Ljc1IDAgMCAxLTEuMDYgMS4wNmwtMS40MTUtMS40MTR6XCIvPjwvc3ZnPic7dmFyIEdBPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03LjMgMTcuMzdsLS4wNjEuMDg4YTEuNTE4IDEuNTE4IDAgMCAxLS45MzQuNTM1bC00LjE3OC42NjMtLjgwNi00LjE1M2ExLjQ5NSAxLjQ5NSAwIDAgMSAuMTg3LTEuMDU4bC4wNTYtLjA4Nkw4Ljc3IDIuNjM5Yy45NTgtMS4zNTEgMi44MDMtMS4wNzYgNC4yOTYtLjAzIDEuNDk3IDEuMDQ3IDIuMzg3IDIuNjkzIDEuNDMzIDQuMDU1TDcuMyAxNy4zN3pNOS4xNCA0LjcyOGwtNS41NDUgOC4zNDYgMy4yNzcgMi4yOTQgNS41NDQtOC4zNDZMOS4xNCA0LjcyOHpNNi4wNyAxNi41MTJsLTMuMjc2LTIuMjk1LjUzIDIuNzMgMi43NDYtLjQzNXpNOS45OTQgMy41MDZMMTMuMjcxIDUuOGMuMzE2LS40NTItLjE2LTEuMzMzLTEuMDY1LTEuOTY2LS45MDUtLjYzNC0xLjg5NS0uNzgtMi4yMTItLjMyOHpNOCAxOC41TDkuMzc1IDE3SDE5djEuNUg4elwiLz48L3N2Zz4nO3ZhciBLQT1pKDg0KTtjbGFzcyBKQSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO2NvbnN0IGU9dC50O3RoaXMuZm9jdXNUcmFja2VyPW5ldyBmYjt0aGlzLmtleXN0cm9rZXM9bmV3IGRwO3RoaXMucHJldmlld0J1dHRvblZpZXc9dGhpcy5fY3JlYXRlUHJldmlld0J1dHRvbigpO3RoaXMudW5saW5rQnV0dG9uVmlldz10aGlzLl9jcmVhdGVCdXR0b24oZShcImxrXCIpLCRBLFwidW5saW5rXCIpO3RoaXMuZWRpdEJ1dHRvblZpZXc9dGhpcy5fY3JlYXRlQnV0dG9uKGUoXCJsbFwiKSxHQSxcImVkaXRcIik7dGhpcy5zZXQoXCJocmVmXCIpO3RoaXMuX2ZvY3VzYWJsZXM9bmV3IGJwO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLl9mb2N1c2FibGVzLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOlwic2hpZnQgKyB0YWJcIixmb2N1c05leHQ6XCJ0YWJcIn19KTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stbGluay1hY3Rpb25zXCJdLHRhYmluZGV4OlwiLTFcIn0sY2hpbGRyZW46W3RoaXMucHJldmlld0J1dHRvblZpZXcsdGhpcy5lZGl0QnV0dG9uVmlldyx0aGlzLnVubGlua0J1dHRvblZpZXddfSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7Y29uc3QgdD1bdGhpcy5wcmV2aWV3QnV0dG9uVmlldyx0aGlzLmVkaXRCdXR0b25WaWV3LHRoaXMudW5saW5rQnV0dG9uVmlld107dC5mb3JFYWNoKHQ9Pnt0aGlzLl9mb2N1c2FibGVzLmFkZCh0KTt0aGlzLmZvY3VzVHJhY2tlci5hZGQodC5lbGVtZW50KX0pO3RoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfWZvY3VzKCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNGaXJzdCgpfV9jcmVhdGVCdXR0b24odCxlLGkpe2NvbnN0IG49bmV3IGhiKHRoaXMubG9jYWxlKTtuLnNldCh7bGFiZWw6dCxpY29uOmUsdG9vbHRpcDp0cnVlfSk7bi5kZWxlZ2F0ZShcImV4ZWN1dGVcIikudG8odGhpcyxpKTtyZXR1cm4gbn1fY3JlYXRlUHJldmlld0J1dHRvbigpe2NvbnN0IHQ9bmV3IGhiKHRoaXMubG9jYWxlKTtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO2NvbnN0IGk9dGhpcy50O3Quc2V0KHt3aXRoVGV4dDp0cnVlLHRvb2x0aXA6aShcImxtXCIpfSk7dC5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWxpbmstYWN0aW9uc19fcHJldmlld1wiXSxocmVmOmUudG8oXCJocmVmXCIsdD0+dCYmQ0EodCkpLHRhcmdldDpcIl9ibGFua1wiLHJlbDpcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIn19KTt0LmJpbmQoXCJsYWJlbFwiKS50byh0aGlzLFwiaHJlZlwiLHQ9PnR8fGkoXCJsblwiKSk7dC5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKHRoaXMsXCJocmVmXCIsdD0+ISF0KTt0LnRlbXBsYXRlLnRhZz1cImFcIjt0LnRlbXBsYXRlLmV2ZW50TGlzdGVuZXJzPXt9O3JldHVybiB0fX12YXIgWUE9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTExLjA3NyAxNWwuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6XCIvPjwvc3ZnPic7Y29uc3QgUUE9XCJDdHJsK0tcIjtjbGFzcyBYQSBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5ba2JdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiTGlua1VJXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5lZGl0aW5nLnZpZXcuYWRkT2JzZXJ2ZXIoV0EpO3RoaXMuYWN0aW9uc1ZpZXc9dGhpcy5fY3JlYXRlQWN0aW9uc1ZpZXcoKTt0aGlzLmZvcm1WaWV3PXRoaXMuX2NyZWF0ZUZvcm1WaWV3KCk7dGhpcy5fYmFsbG9vbj10LnBsdWdpbnMuZ2V0KGtiKTt0aGlzLl9jcmVhdGVUb29sYmFyTGlua0J1dHRvbigpO3RoaXMuX2VuYWJsZVVzZXJCYWxsb29uSW50ZXJhY3Rpb25zKCl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKTt0aGlzLmZvcm1WaWV3LmRlc3Ryb3koKX1fY3JlYXRlQWN0aW9uc1ZpZXcoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9bmV3IEpBKHQubG9jYWxlKTtjb25zdCBpPXQuY29tbWFuZHMuZ2V0KFwibGlua1wiKTtjb25zdCBuPXQuY29tbWFuZHMuZ2V0KFwidW5saW5rXCIpO2UuYmluZChcImhyZWZcIikudG8oaSxcInZhbHVlXCIpO2UuZWRpdEJ1dHRvblZpZXcuYmluZChcImlzRW5hYmxlZFwiKS50byhpKTtlLnVubGlua0J1dHRvblZpZXcuYmluZChcImlzRW5hYmxlZFwiKS50byhuKTt0aGlzLmxpc3RlblRvKGUsXCJlZGl0XCIsKCk9Pnt0aGlzLl9hZGRGb3JtVmlldygpfSk7dGhpcy5saXN0ZW5UbyhlLFwidW5saW5rXCIsKCk9Pnt0LmV4ZWN1dGUoXCJ1bmxpbmtcIik7dGhpcy5faGlkZVVJKCl9KTtlLmtleXN0cm9rZXMuc2V0KFwiRXNjXCIsKHQsZSk9Pnt0aGlzLl9oaWRlVUkoKTtlKCl9KTtlLmtleXN0cm9rZXMuc2V0KFFBLCh0LGUpPT57dGhpcy5fYWRkRm9ybVZpZXcoKTtlKCl9KTtyZXR1cm4gZX1fY3JlYXRlRm9ybVZpZXcoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5jb21tYW5kcy5nZXQoXCJsaW5rXCIpO2NvbnN0IGk9bmV3IFVBKHQubG9jYWxlLGUubWFudWFsRGVjb3JhdG9ycyk7aS51cmxJbnB1dFZpZXcuYmluZChcInZhbHVlXCIpLnRvKGUsXCJ2YWx1ZVwiKTtpLnVybElucHV0Vmlldy5iaW5kKFwiaXNSZWFkT25seVwiKS50byhlLFwiaXNFbmFibGVkXCIsdD0+IXQpO2kuc2F2ZUJ1dHRvblZpZXcuYmluZChcImlzRW5hYmxlZFwiKS50byhlKTt0aGlzLmxpc3RlblRvKGksXCJzdWJtaXRcIiwoKT0+e3QuZXhlY3V0ZShcImxpbmtcIixpLnVybElucHV0Vmlldy5pbnB1dFZpZXcuZWxlbWVudC52YWx1ZSxpLmdldERlY29yYXRvclN3aXRjaGVzU3RhdGUoKSk7dGhpcy5fY2xvc2VGb3JtVmlldygpfSk7dGhpcy5saXN0ZW5UbyhpLFwiY2FuY2VsXCIsKCk9Pnt0aGlzLl9jbG9zZUZvcm1WaWV3KCl9KTtpLmtleXN0cm9rZXMuc2V0KFwiRXNjXCIsKHQsZSk9Pnt0aGlzLl9jbG9zZUZvcm1WaWV3KCk7ZSgpfSk7cmV0dXJuIGl9X2NyZWF0ZVRvb2xiYXJMaW5rQnV0dG9uKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQuY29tbWFuZHMuZ2V0KFwibGlua1wiKTtjb25zdCBpPXQudDt0LmtleXN0cm9rZXMuc2V0KFFBLCh0LGUpPT57ZSgpO3RoaXMuX3Nob3dVSSh0cnVlKX0pO3QudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoXCJsaW5rXCIsdD0+e2NvbnN0IG49bmV3IGhiKHQpO24uaXNFbmFibGVkPXRydWU7bi5sYWJlbD1pKFwibGZcIik7bi5pY29uPVlBO24ua2V5c3Ryb2tlPVFBO24udG9vbHRpcD10cnVlO24uaXNUb2dnbGVhYmxlPXRydWU7bi5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKGUsXCJpc0VuYWJsZWRcIik7bi5iaW5kKFwiaXNPblwiKS50byhlLFwidmFsdWVcIix0PT4hIXQpO3RoaXMubGlzdGVuVG8obixcImV4ZWN1dGVcIiwoKT0+dGhpcy5fc2hvd1VJKHRydWUpKTtyZXR1cm4gbn0pfV9lbmFibGVVc2VyQmFsbG9vbkludGVyYWN0aW9ucygpe2NvbnN0IHQ9dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvY3VtZW50O3RoaXMubGlzdGVuVG8odCxcImNsaWNrXCIsKCk9Pntjb25zdCB0PXRoaXMuX2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKTtpZih0KXt0aGlzLl9zaG93VUkoKX19KTt0aGlzLmVkaXRvci5rZXlzdHJva2VzLnNldChcIlRhYlwiLCh0LGUpPT57aWYodGhpcy5fYXJlQWN0aW9uc1Zpc2libGUmJiF0aGlzLmFjdGlvbnNWaWV3LmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQpe3RoaXMuYWN0aW9uc1ZpZXcuZm9jdXMoKTtlKCl9fSx7cHJpb3JpdHk6XCJoaWdoXCJ9KTt0aGlzLmVkaXRvci5rZXlzdHJva2VzLnNldChcIkVzY1wiLCh0LGUpPT57aWYodGhpcy5faXNVSVZpc2libGUpe3RoaXMuX2hpZGVVSSgpO2UoKX19KTtEYih7ZW1pdHRlcjp0aGlzLmZvcm1WaWV3LGFjdGl2YXRvcjooKT0+dGhpcy5faXNVSUluUGFuZWwsY29udGV4dEVsZW1lbnRzOlt0aGlzLl9iYWxsb29uLnZpZXcuZWxlbWVudF0sY2FsbGJhY2s6KCk9PnRoaXMuX2hpZGVVSSgpfSl9X2FkZEFjdGlvbnNWaWV3KCl7aWYodGhpcy5fYXJlQWN0aW9uc0luUGFuZWwpe3JldHVybn10aGlzLl9iYWxsb29uLmFkZCh7dmlldzp0aGlzLmFjdGlvbnNWaWV3LHBvc2l0aW9uOnRoaXMuX2dldEJhbGxvb25Qb3NpdGlvbkRhdGEoKX0pfV9hZGRGb3JtVmlldygpe2lmKHRoaXMuX2lzRm9ybUluUGFuZWwpe3JldHVybn1jb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5jb21tYW5kcy5nZXQoXCJsaW5rXCIpO3RoaXMuX2JhbGxvb24uYWRkKHt2aWV3OnRoaXMuZm9ybVZpZXcscG9zaXRpb246dGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uRGF0YSgpfSk7aWYodGhpcy5fYmFsbG9vbi52aXNpYmxlVmlldz09PXRoaXMuZm9ybVZpZXcpe3RoaXMuZm9ybVZpZXcudXJsSW5wdXRWaWV3LnNlbGVjdCgpfXRoaXMuZm9ybVZpZXcudXJsSW5wdXRWaWV3LmlucHV0Vmlldy5lbGVtZW50LnZhbHVlPWUudmFsdWV8fFwiXCJ9X2Nsb3NlRm9ybVZpZXcoKXtjb25zdCB0PXRoaXMuZWRpdG9yLmNvbW1hbmRzLmdldChcImxpbmtcIik7dC5yZXN0b3JlTWFudWFsRGVjb3JhdG9yU3RhdGVzKCk7aWYodC52YWx1ZSE9PXVuZGVmaW5lZCl7dGhpcy5fcmVtb3ZlRm9ybVZpZXcoKX1lbHNle3RoaXMuX2hpZGVVSSgpfX1fcmVtb3ZlRm9ybVZpZXcoKXtpZih0aGlzLl9pc0Zvcm1JblBhbmVsKXt0aGlzLmZvcm1WaWV3LnNhdmVCdXR0b25WaWV3LmZvY3VzKCk7dGhpcy5fYmFsbG9vbi5yZW1vdmUodGhpcy5mb3JtVmlldyk7dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmZvY3VzKCl9fV9zaG93VUkodD1mYWxzZSl7aWYoIXRoaXMuX2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKSl7dGhpcy5fYWRkQWN0aW9uc1ZpZXcoKTtpZih0KXt0aGlzLl9iYWxsb29uLnNob3dTdGFjayhcIm1haW5cIil9dGhpcy5fYWRkRm9ybVZpZXcoKX1lbHNle2lmKHRoaXMuX2FyZUFjdGlvbnNWaXNpYmxlKXt0aGlzLl9hZGRGb3JtVmlldygpfWVsc2V7dGhpcy5fYWRkQWN0aW9uc1ZpZXcoKX1pZih0KXt0aGlzLl9iYWxsb29uLnNob3dTdGFjayhcIm1haW5cIil9fXRoaXMuX3N0YXJ0VXBkYXRpbmdVSSgpfV9oaWRlVUkoKXtpZighdGhpcy5faXNVSUluUGFuZWwpe3JldHVybn1jb25zdCB0PXRoaXMuZWRpdG9yO3RoaXMuc3RvcExpc3RlbmluZyh0LnVpLFwidXBkYXRlXCIpO3RoaXMuc3RvcExpc3RlbmluZyh0aGlzLl9iYWxsb29uLFwiY2hhbmdlOnZpc2libGVWaWV3XCIpO3QuZWRpdGluZy52aWV3LmZvY3VzKCk7dGhpcy5fcmVtb3ZlRm9ybVZpZXcoKTt0aGlzLl9iYWxsb29uLnJlbW92ZSh0aGlzLmFjdGlvbnNWaWV3KX1fc3RhcnRVcGRhdGluZ1VJKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQuZWRpdGluZy52aWV3LmRvY3VtZW50O2xldCBpPXRoaXMuX2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKTtsZXQgbj1yKCk7Y29uc3Qgbz0oKT0+e2NvbnN0IHQ9dGhpcy5fZ2V0U2VsZWN0ZWRMaW5rRWxlbWVudCgpO2NvbnN0IGU9cigpO2lmKGkmJiF0fHwhaSYmZSE9PW4pe3RoaXMuX2hpZGVVSSgpfWVsc2UgaWYodGhpcy5faXNVSVZpc2libGUpe3RoaXMuX2JhbGxvb24udXBkYXRlUG9zaXRpb24odGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uRGF0YSgpKX1pPXQ7bj1lfTtmdW5jdGlvbiByKCl7cmV0dXJuIGUuc2VsZWN0aW9uLmZvY3VzLmdldEFuY2VzdG9ycygpLnJldmVyc2UoKS5maW5kKHQ9PnQuaXMoXCJlbGVtZW50XCIpKX10aGlzLmxpc3RlblRvKHQudWksXCJ1cGRhdGVcIixvKTt0aGlzLmxpc3RlblRvKHRoaXMuX2JhbGxvb24sXCJjaGFuZ2U6dmlzaWJsZVZpZXdcIixvKX1nZXQgX2lzRm9ybUluUGFuZWwoKXtyZXR1cm4gdGhpcy5fYmFsbG9vbi5oYXNWaWV3KHRoaXMuZm9ybVZpZXcpfWdldCBfYXJlQWN0aW9uc0luUGFuZWwoKXtyZXR1cm4gdGhpcy5fYmFsbG9vbi5oYXNWaWV3KHRoaXMuYWN0aW9uc1ZpZXcpfWdldCBfYXJlQWN0aW9uc1Zpc2libGUoKXtyZXR1cm4gdGhpcy5fYmFsbG9vbi52aXNpYmxlVmlldz09PXRoaXMuYWN0aW9uc1ZpZXd9Z2V0IF9pc1VJSW5QYW5lbCgpe3JldHVybiB0aGlzLl9pc0Zvcm1JblBhbmVsfHx0aGlzLl9hcmVBY3Rpb25zSW5QYW5lbH1nZXQgX2lzVUlWaXNpYmxlKCl7Y29uc3QgdD10aGlzLl9iYWxsb29uLnZpc2libGVWaWV3O3JldHVybiB0PT10aGlzLmZvcm1WaWV3fHx0aGlzLl9hcmVBY3Rpb25zVmlzaWJsZX1fZ2V0QmFsbG9vblBvc2l0aW9uRGF0YSgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3O2NvbnN0IGU9dC5kb2N1bWVudDtjb25zdCBpPXRoaXMuX2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKTtjb25zdCBuPWk/dC5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKGkpOnQuZG9tQ29udmVydGVyLnZpZXdSYW5nZVRvRG9tKGUuc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKSk7cmV0dXJue3RhcmdldDpufX1fZ2V0U2VsZWN0ZWRMaW5rRWxlbWVudCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3O2NvbnN0IGU9dC5kb2N1bWVudC5zZWxlY3Rpb247aWYoZS5pc0NvbGxhcHNlZCl7cmV0dXJuIFpBKGUuZ2V0Rmlyc3RQb3NpdGlvbigpKX1lbHNle2NvbnN0IGk9ZS5nZXRGaXJzdFJhbmdlKCkuZ2V0VHJpbW1lZCgpO2NvbnN0IG49WkEoaS5zdGFydCk7Y29uc3Qgbz1aQShpLmVuZCk7aWYoIW58fG4hPW8pe3JldHVybiBudWxsfWlmKHQuY3JlYXRlUmFuZ2VJbihuKS5nZXRUcmltbWVkKCkuaXNFcXVhbChpKSl7cmV0dXJuIG59ZWxzZXtyZXR1cm4gbnVsbH19fX1mdW5jdGlvbiBaQSh0KXtyZXR1cm4gdC5nZXRBbmNlc3RvcnMoKS5maW5kKHQ9PnlBKHQpKX1jbGFzcyB0VCBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bSEEsWEFdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiTGlua1wifX1jbGFzcyBlVCBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7dGhpcy50eXBlPWV9cmVmcmVzaCgpe3RoaXMudmFsdWU9dGhpcy5fZ2V0VmFsdWUoKTt0aGlzLmlzRW5hYmxlZD10aGlzLl9jaGVja0VuYWJsZWQoKX1leGVjdXRlKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBlPXQuZG9jdW1lbnQ7Y29uc3QgaT1BcnJheS5mcm9tKGUuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpLmZpbHRlcihlPT5uVChlLHQuc2NoZW1hKSk7Y29uc3Qgbj10aGlzLnZhbHVlPT09dHJ1ZTt0LmNoYW5nZSh0PT57aWYobil7bGV0IGU9aVtpLmxlbmd0aC0xXS5uZXh0U2libGluZztsZXQgbj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7bGV0IG89W107d2hpbGUoZSYmZS5uYW1lPT1cImxpc3RJdGVtXCImJmUuZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKSE9PTApe2NvbnN0IHQ9ZS5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpO2lmKHQ8bil7bj10fWNvbnN0IGk9dC1uO28ucHVzaCh7ZWxlbWVudDplLGxpc3RJbmRlbnQ6aX0pO2U9ZS5uZXh0U2libGluZ31vPW8ucmV2ZXJzZSgpO2Zvcihjb25zdCBlIG9mIG8pe3Quc2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiLGUubGlzdEluZGVudCxlLmVsZW1lbnQpfX1pZighbil7bGV0IHQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2Zvcihjb25zdCBlIG9mIGkpe2lmKGUuaXMoXCJsaXN0SXRlbVwiKSYmZS5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpPHQpe3Q9ZS5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpfX10PXQ9PT0wPzE6dDtpVChpLHRydWUsdCk7aVQoaSxmYWxzZSx0KX1mb3IoY29uc3QgZSBvZiBpLnJldmVyc2UoKSl7aWYobiYmZS5uYW1lPT1cImxpc3RJdGVtXCIpe3QucmVuYW1lKGUsXCJwYXJhZ3JhcGhcIil9ZWxzZSBpZighbiYmZS5uYW1lIT1cImxpc3RJdGVtXCIpe3Quc2V0QXR0cmlidXRlcyh7bGlzdFR5cGU6dGhpcy50eXBlLGxpc3RJbmRlbnQ6MH0sZSk7dC5yZW5hbWUoZSxcImxpc3RJdGVtXCIpfWVsc2UgaWYoIW4mJmUubmFtZT09XCJsaXN0SXRlbVwiJiZlLmdldEF0dHJpYnV0ZShcImxpc3RUeXBlXCIpIT10aGlzLnR5cGUpe3Quc2V0QXR0cmlidXRlKFwibGlzdFR5cGVcIix0aGlzLnR5cGUsZSl9fX0pfV9nZXRWYWx1ZSgpe2NvbnN0IHQ9V3codGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO3JldHVybiEhdCYmdC5pcyhcImxpc3RJdGVtXCIpJiZ0LmdldEF0dHJpYnV0ZShcImxpc3RUeXBlXCIpPT10aGlzLnR5cGV9X2NoZWNrRW5hYmxlZCgpe2lmKHRoaXMudmFsdWUpe3JldHVybiB0cnVlfWNvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hO2NvbnN0IGk9V3codC5nZXRTZWxlY3RlZEJsb2NrcygpKTtpZighaSl7cmV0dXJuIGZhbHNlfXJldHVybiBuVChpLGUpfX1mdW5jdGlvbiBpVCh0LGUsaSl7Y29uc3Qgbj1lP3RbMF06dFt0Lmxlbmd0aC0xXTtpZihuLmlzKFwibGlzdEl0ZW1cIikpe2xldCBvPW5bZT9cInByZXZpb3VzU2libGluZ1wiOlwibmV4dFNpYmxpbmdcIl07bGV0IHI9bi5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpO3doaWxlKG8mJm8uaXMoXCJsaXN0SXRlbVwiKSYmby5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpPj1pKXtpZihyPm8uZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKSl7cj1vLmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIil9aWYoby5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpPT1yKXt0W2U/XCJ1bnNoaWZ0XCI6XCJwdXNoXCJdKG8pfW89b1tlP1wicHJldmlvdXNTaWJsaW5nXCI6XCJuZXh0U2libGluZ1wiXX19fWZ1bmN0aW9uIG5UKHQsZSl7cmV0dXJuIGUuY2hlY2tDaGlsZCh0LnBhcmVudCxcImxpc3RJdGVtXCIpJiYhZS5pc09iamVjdCh0KX1jbGFzcyBvVCBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7dGhpcy5faW5kZW50Qnk9ZT09XCJmb3J3YXJkXCI/MTotMX1yZWZyZXNoKCl7dGhpcy5pc0VuYWJsZWQ9dGhpcy5fY2hlY2tFbmFibGVkKCl9ZXhlY3V0ZSgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50O2xldCBpPUFycmF5LmZyb20oZS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7dC5jaGFuZ2UodD0+e2NvbnN0IGU9aVtpLmxlbmd0aC0xXTtsZXQgbj1lLm5leHRTaWJsaW5nO3doaWxlKG4mJm4ubmFtZT09XCJsaXN0SXRlbVwiJiZuLmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIik+ZS5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpKXtpLnB1c2gobik7bj1uLm5leHRTaWJsaW5nfWlmKHRoaXMuX2luZGVudEJ5PDApe2k9aS5yZXZlcnNlKCl9Zm9yKGNvbnN0IGUgb2YgaSl7Y29uc3QgaT1lLmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIikrdGhpcy5faW5kZW50Qnk7aWYoaTwwKXt0LnJlbmFtZShlLFwicGFyYWdyYXBoXCIpfWVsc2V7dC5zZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIsaSxlKX19fSl9X2NoZWNrRW5hYmxlZCgpe2NvbnN0IHQ9V3codGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO2lmKCF0fHwhdC5pcyhcImxpc3RJdGVtXCIpKXtyZXR1cm4gZmFsc2V9aWYodGhpcy5faW5kZW50Qnk+MCl7Y29uc3QgZT10LmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIik7Y29uc3QgaT10LmdldEF0dHJpYnV0ZShcImxpc3RUeXBlXCIpO2xldCBuPXQucHJldmlvdXNTaWJsaW5nO3doaWxlKG4mJm4uaXMoXCJsaXN0SXRlbVwiKSYmbi5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpPj1lKXtpZihuLmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIik9PWUpe3JldHVybiBuLmdldEF0dHJpYnV0ZShcImxpc3RUeXBlXCIpPT1pfW49bi5wcmV2aW91c1NpYmxpbmd9cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfX1mdW5jdGlvbiByVCh0KXtjb25zdCBlPXQuY3JlYXRlQ29udGFpbmVyRWxlbWVudChcImxpXCIpO2UuZ2V0RmlsbGVyT2Zmc2V0PWhUO3JldHVybiBlfWZ1bmN0aW9uIHNUKHQsZSl7Y29uc3QgaT1lLm1hcHBlcjtjb25zdCBuPWUud3JpdGVyO2NvbnN0IG89dC5nZXRBdHRyaWJ1dGUoXCJsaXN0VHlwZVwiKT09XCJudW1iZXJlZFwiP1wib2xcIjpcInVsXCI7Y29uc3Qgcj1yVChuKTtjb25zdCBzPW4uY3JlYXRlQ29udGFpbmVyRWxlbWVudChvLG51bGwpO24uaW5zZXJ0KG4uY3JlYXRlUG9zaXRpb25BdChzLDApLHIpO2kuYmluZEVsZW1lbnRzKHQscik7cmV0dXJuIHJ9ZnVuY3Rpb24gYVQodCxlLGksbil7Y29uc3Qgbz1lLnBhcmVudDtjb25zdCByPWkubWFwcGVyO2NvbnN0IHM9aS53cml0ZXI7bGV0IGE9ci50b1ZpZXdQb3NpdGlvbihuLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpKTtjb25zdCBjPWRUKHQucHJldmlvdXNTaWJsaW5nLHtzYW1lSW5kZW50OnRydWUsc21hbGxlckluZGVudDp0cnVlLGxpc3RJbmRlbnQ6dC5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpfSk7Y29uc3QgbD10LnByZXZpb3VzU2libGluZztpZihjJiZjLmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIik9PXQuZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKSl7Y29uc3QgdD1yLnRvVmlld0VsZW1lbnQoYyk7YT1zLmJyZWFrQ29udGFpbmVyKHMuY3JlYXRlUG9zaXRpb25BZnRlcih0KSl9ZWxzZXtpZihsJiZsLm5hbWU9PVwibGlzdEl0ZW1cIil7YT1yLnRvVmlld1Bvc2l0aW9uKG4uY3JlYXRlUG9zaXRpb25BdChsLFwiZW5kXCIpKX1lbHNle2E9ci50b1ZpZXdQb3NpdGlvbihuLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQpKX19YT1sVChhKTtzLmluc2VydChhLG8pO2lmKGwmJmwubmFtZT09XCJsaXN0SXRlbVwiKXtjb25zdCB0PXIudG9WaWV3RWxlbWVudChsKTtjb25zdCBpPXMuY3JlYXRlUmFuZ2Uocy5jcmVhdGVQb3NpdGlvbkF0KHQsMCksYSk7Y29uc3Qgbj1pLmdldFdhbGtlcih7aWdub3JlRWxlbWVudEVuZDp0cnVlfSk7Zm9yKGNvbnN0IHQgb2Ygbil7aWYodC5pdGVtLmlzKFwibGlcIikpe2NvbnN0IGk9cy5icmVha0NvbnRhaW5lcihzLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHQuaXRlbSkpO2NvbnN0IG89dC5pdGVtLnBhcmVudDtjb25zdCByPXMuY3JlYXRlUG9zaXRpb25BdChlLFwiZW5kXCIpO2NUKHMsci5ub2RlQmVmb3JlLHIubm9kZUFmdGVyKTtzLm1vdmUocy5jcmVhdGVSYW5nZU9uKG8pLHIpO24ucG9zaXRpb249aX19fWVsc2V7Y29uc3QgaT1vLm5leHRTaWJsaW5nO2lmKGkmJihpLmlzKFwidWxcIil8fGkuaXMoXCJvbFwiKSkpe2xldCBuPW51bGw7Zm9yKGNvbnN0IGUgb2YgaS5nZXRDaGlsZHJlbigpKXtjb25zdCBpPXIudG9Nb2RlbEVsZW1lbnQoZSk7aWYoaSYmaS5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpPnQuZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKSl7bj1lfWVsc2V7YnJlYWt9fWlmKG4pe3MuYnJlYWtDb250YWluZXIocy5jcmVhdGVQb3NpdGlvbkFmdGVyKG4pKTtzLm1vdmUocy5jcmVhdGVSYW5nZU9uKG4ucGFyZW50KSxzLmNyZWF0ZVBvc2l0aW9uQXQoZSxcImVuZFwiKSl9fX1jVChzLG8sby5uZXh0U2libGluZyk7Y1QocyxvLnByZXZpb3VzU2libGluZyxvKX1mdW5jdGlvbiBjVCh0LGUsaSl7aWYoIWV8fCFpfHxlLm5hbWUhPVwidWxcIiYmZS5uYW1lIT1cIm9sXCIpe3JldHVybiBudWxsfWlmKGUubmFtZSE9aS5uYW1lfHxlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIT09aS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSl7cmV0dXJuIG51bGx9cmV0dXJuIHQubWVyZ2VDb250YWluZXJzKHQuY3JlYXRlUG9zaXRpb25BZnRlcihlKSl9ZnVuY3Rpb24gbFQodCl7cmV0dXJuIHQuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24odD0+dC5pdGVtLmlzKFwidWlFbGVtZW50XCIpKX1mdW5jdGlvbiBkVCh0LGUpe2NvbnN0IGk9ISFlLnNhbWVJbmRlbnQ7Y29uc3Qgbj0hIWUuc21hbGxlckluZGVudDtjb25zdCBvPWUubGlzdEluZGVudDtsZXQgcj10O3doaWxlKHImJnIubmFtZT09XCJsaXN0SXRlbVwiKXtjb25zdCB0PXIuZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKTtpZihpJiZvPT10fHxuJiZvPnQpe3JldHVybiByfXI9ci5wcmV2aW91c1NpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gdVQodCxlLGksbil7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChlLG89Pntjb25zdCByPXQuY29tbWFuZHMuZ2V0KGUpO2NvbnN0IHM9bmV3IGhiKG8pO3Muc2V0KHtsYWJlbDppLGljb246bix0b29sdGlwOnRydWUsaXNUb2dnbGVhYmxlOnRydWV9KTtzLmJpbmQoXCJpc09uXCIsXCJpc0VuYWJsZWRcIikudG8ocixcInZhbHVlXCIsXCJpc0VuYWJsZWRcIik7cy5vbihcImV4ZWN1dGVcIiwoKT0+e3QuZXhlY3V0ZShlKTt0LmVkaXRpbmcudmlldy5mb2N1cygpfSk7cmV0dXJuIHN9KX1mdW5jdGlvbiBoVCgpe2NvbnN0IHQ9IXRoaXMuaXNFbXB0eSYmKHRoaXMuZ2V0Q2hpbGQoMCkubmFtZT09XCJ1bFwifHx0aGlzLmdldENoaWxkKDApLm5hbWU9PVwib2xcIik7aWYodGhpcy5pc0VtcHR5fHx0KXtyZXR1cm4gMH1yZXR1cm4gSGMuY2FsbCh0aGlzKX1mdW5jdGlvbiBmVCh0KXtyZXR1cm4oZSxpLG4pPT57Y29uc3Qgbz1uLmNvbnN1bWFibGU7aWYoIW8udGVzdChpLml0ZW0sXCJpbnNlcnRcIil8fCFvLnRlc3QoaS5pdGVtLFwiYXR0cmlidXRlOmxpc3RUeXBlXCIpfHwhby50ZXN0KGkuaXRlbSxcImF0dHJpYnV0ZTpsaXN0SW5kZW50XCIpKXtyZXR1cm59by5jb25zdW1lKGkuaXRlbSxcImluc2VydFwiKTtvLmNvbnN1bWUoaS5pdGVtLFwiYXR0cmlidXRlOmxpc3RUeXBlXCIpO28uY29uc3VtZShpLml0ZW0sXCJhdHRyaWJ1dGU6bGlzdEluZGVudFwiKTtjb25zdCByPWkuaXRlbTtjb25zdCBzPXNUKHIsbik7YVQocixzLG4sdCl9fWZ1bmN0aW9uIGdUKHQpe3JldHVybihlLGksbik9Pntjb25zdCBvPW4ubWFwcGVyLnRvVmlld1Bvc2l0aW9uKGkucG9zaXRpb24pLmdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKHQ9PiF0Lml0ZW0uaXMoXCJsaVwiKSk7Y29uc3Qgcj1vLm5vZGVBZnRlcjtjb25zdCBzPW4ud3JpdGVyO3MuYnJlYWtDb250YWluZXIocy5jcmVhdGVQb3NpdGlvbkJlZm9yZShyKSk7cy5icmVha0NvbnRhaW5lcihzLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIocikpO2NvbnN0IGE9ci5wYXJlbnQ7Y29uc3QgYz1hLnByZXZpb3VzU2libGluZztjb25zdCBsPXMuY3JlYXRlUmFuZ2VPbihhKTtjb25zdCBkPXMucmVtb3ZlKGwpO2lmKGMmJmMubmV4dFNpYmxpbmcpe2NUKHMsYyxjLm5leHRTaWJsaW5nKX1jb25zdCB1PW4ubWFwcGVyLnRvTW9kZWxFbGVtZW50KHIpO0VUKHUuZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKSsxLGkucG9zaXRpb24sbC5zdGFydCxyLG4sdCk7Zm9yKGNvbnN0IHQgb2Ygcy5jcmVhdGVSYW5nZUluKGQpLmdldEl0ZW1zKCkpe24ubWFwcGVyLnVuYmluZFZpZXdFbGVtZW50KHQpfWUuc3RvcCgpfX1mdW5jdGlvbiBtVCh0LGUsaSl7aWYoIWkuY29uc3VtYWJsZS5jb25zdW1lKGUuaXRlbSxcImF0dHJpYnV0ZTpsaXN0VHlwZVwiKSl7cmV0dXJufWNvbnN0IG49aS5tYXBwZXIudG9WaWV3RWxlbWVudChlLml0ZW0pO2NvbnN0IG89aS53cml0ZXI7by5icmVha0NvbnRhaW5lcihvLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKG4pKTtvLmJyZWFrQ29udGFpbmVyKG8uY3JlYXRlUG9zaXRpb25BZnRlcihuKSk7Y29uc3Qgcj1uLnBhcmVudDtjb25zdCBzPWUuYXR0cmlidXRlTmV3VmFsdWU9PVwibnVtYmVyZWRcIj9cIm9sXCI6XCJ1bFwiO28ucmVuYW1lKHMscil9ZnVuY3Rpb24gcFQodCxlLGkpe2NvbnN0IG49aS5tYXBwZXIudG9WaWV3RWxlbWVudChlLml0ZW0pO2NvbnN0IG89bi5wYXJlbnQ7Y29uc3Qgcj1pLndyaXRlcjtjVChyLG8sby5uZXh0U2libGluZyk7Y1QocixvLnByZXZpb3VzU2libGluZyxvKTtmb3IoY29uc3QgdCBvZiBlLml0ZW0uZ2V0Q2hpbGRyZW4oKSl7aS5jb25zdW1hYmxlLmNvbnN1bWUodCxcImluc2VydFwiKX19ZnVuY3Rpb24gYlQodCl7cmV0dXJuKGUsaSxuKT0+e2lmKCFuLmNvbnN1bWFibGUuY29uc3VtZShpLml0ZW0sXCJhdHRyaWJ1dGU6bGlzdEluZGVudFwiKSl7cmV0dXJufWNvbnN0IG89bi5tYXBwZXIudG9WaWV3RWxlbWVudChpLml0ZW0pO2NvbnN0IHI9bi53cml0ZXI7ci5icmVha0NvbnRhaW5lcihyLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKG8pKTtyLmJyZWFrQ29udGFpbmVyKHIuY3JlYXRlUG9zaXRpb25BZnRlcihvKSk7Y29uc3Qgcz1vLnBhcmVudDtjb25zdCBhPXMucHJldmlvdXNTaWJsaW5nO2NvbnN0IGM9ci5jcmVhdGVSYW5nZU9uKHMpO3IucmVtb3ZlKGMpO2lmKGEmJmEubmV4dFNpYmxpbmcpe2NUKHIsYSxhLm5leHRTaWJsaW5nKX1FVChpLmF0dHJpYnV0ZU9sZFZhbHVlKzEsaS5yYW5nZS5zdGFydCxjLnN0YXJ0LG8sbix0KTthVChpLml0ZW0sbyxuLHQpO2Zvcihjb25zdCB0IG9mIGkuaXRlbS5nZXRDaGlsZHJlbigpKXtuLmNvbnN1bWFibGUuY29uc3VtZSh0LFwiaW5zZXJ0XCIpfX19ZnVuY3Rpb24gd1QodCxlLGkpe2lmKGUuaXRlbS5uYW1lIT1cImxpc3RJdGVtXCIpe2xldCB0PWkubWFwcGVyLnRvVmlld1Bvc2l0aW9uKGUucmFuZ2Uuc3RhcnQpO2NvbnN0IG49aS53cml0ZXI7Y29uc3Qgbz1bXTt3aGlsZSh0LnBhcmVudC5uYW1lPT1cInVsXCJ8fHQucGFyZW50Lm5hbWU9PVwib2xcIil7dD1uLmJyZWFrQ29udGFpbmVyKHQpO2lmKHQucGFyZW50Lm5hbWUhPVwibGlcIil7YnJlYWt9Y29uc3QgZT10O2NvbnN0IGk9bi5jcmVhdGVQb3NpdGlvbkF0KHQucGFyZW50LFwiZW5kXCIpO2lmKCFlLmlzRXF1YWwoaSkpe2NvbnN0IHQ9bi5yZW1vdmUobi5jcmVhdGVSYW5nZShlLGkpKTtvLnB1c2godCl9dD1uLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIodC5wYXJlbnQpfWlmKG8ubGVuZ3RoPjApe2ZvcihsZXQgZT0wO2U8by5sZW5ndGg7ZSsrKXtjb25zdCBpPXQubm9kZUJlZm9yZTtjb25zdCByPW4uaW5zZXJ0KHQsb1tlXSk7dD1yLmVuZDtpZihlPjApe2NvbnN0IGU9Y1QobixpLGkubmV4dFNpYmxpbmcpO2lmKGUmJmUucGFyZW50PT1pKXt0Lm9mZnNldC0tfX19Y1Qobix0Lm5vZGVCZWZvcmUsdC5ub2RlQWZ0ZXIpfX19ZnVuY3Rpb24ga1QodCxlLGkpe2NvbnN0IG49aS5tYXBwZXIudG9WaWV3UG9zaXRpb24oZS5wb3NpdGlvbik7Y29uc3Qgbz1uLm5vZGVCZWZvcmU7Y29uc3Qgcj1uLm5vZGVBZnRlcjtjVChpLndyaXRlcixvLHIpfWZ1bmN0aW9uIF9UKHQsZSxpKXtpZihpLmNvbnN1bWFibGUuY29uc3VtZShlLnZpZXdJdGVtLHtuYW1lOnRydWV9KSl7Y29uc3QgdD1pLndyaXRlcjtjb25zdCBuPXQuY3JlYXRlRWxlbWVudChcImxpc3RJdGVtXCIpO2NvbnN0IG89T1QoZS52aWV3SXRlbSk7dC5zZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIsbyxuKTtjb25zdCByPWUudmlld0l0ZW0ucGFyZW50JiZlLnZpZXdJdGVtLnBhcmVudC5uYW1lPT1cIm9sXCI/XCJudW1iZXJlZFwiOlwiYnVsbGV0ZWRcIjt0LnNldEF0dHJpYnV0ZShcImxpc3RUeXBlXCIscixuKTtjb25zdCBzPWkuc3BsaXRUb0FsbG93ZWRQYXJlbnQobixlLm1vZGVsQ3Vyc29yKTtpZighcyl7cmV0dXJufXQuaW5zZXJ0KG4scy5wb3NpdGlvbik7Y29uc3QgYT1QVChuLGUudmlld0l0ZW0uZ2V0Q2hpbGRyZW4oKSxpKTtlLm1vZGVsUmFuZ2U9dC5jcmVhdGVSYW5nZShlLm1vZGVsQ3Vyc29yLGEpO2lmKHMuY3Vyc29yUGFyZW50KXtlLm1vZGVsQ3Vyc29yPXQuY3JlYXRlUG9zaXRpb25BdChzLmN1cnNvclBhcmVudCwwKX1lbHNle2UubW9kZWxDdXJzb3I9ZS5tb2RlbFJhbmdlLmVuZH19fWZ1bmN0aW9uIHZUKHQsZSxpKXtpZihpLmNvbnN1bWFibGUudGVzdChlLnZpZXdJdGVtLHtuYW1lOnRydWV9KSl7Y29uc3QgdD1BcnJheS5mcm9tKGUudmlld0l0ZW0uZ2V0Q2hpbGRyZW4oKSk7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD0hKGUuaXMoXCJsaVwiKXx8UlQoZSkpO2lmKHQpe2UuX3JlbW92ZSgpfX19fWZ1bmN0aW9uIHlUKHQsZSxpKXtpZihpLmNvbnN1bWFibGUudGVzdChlLnZpZXdJdGVtLHtuYW1lOnRydWV9KSl7aWYoZS52aWV3SXRlbS5jaGlsZENvdW50PT09MCl7cmV0dXJufWNvbnN0IHQ9Wy4uLmUudmlld0l0ZW0uZ2V0Q2hpbGRyZW4oKV07bGV0IGk9ZmFsc2U7bGV0IG49dHJ1ZTtmb3IoY29uc3QgZSBvZiB0KXtpZihpJiYhUlQoZSkpe2UuX3JlbW92ZSgpfWlmKGUuaXMoXCJ0ZXh0XCIpKXtpZihuKXtlLl9kYXRhPWUuZGF0YS5yZXBsYWNlKC9eXFxzKy8sXCJcIil9aWYoIWUubmV4dFNpYmxpbmd8fFJUKGUubmV4dFNpYmxpbmcpKXtlLl9kYXRhPWUuZGF0YS5yZXBsYWNlKC9cXHMrJC8sXCJcIil9fWVsc2UgaWYoUlQoZSkpe2k9dHJ1ZX1uPWZhbHNlfX19ZnVuY3Rpb24geFQodCl7cmV0dXJuKGUsaSk9PntpZihpLmlzUGhhbnRvbSl7cmV0dXJufWNvbnN0IG49aS5tb2RlbFBvc2l0aW9uLm5vZGVCZWZvcmU7aWYobiYmbi5pcyhcImxpc3RJdGVtXCIpKXtjb25zdCBlPWkubWFwcGVyLnRvVmlld0VsZW1lbnQobik7Y29uc3Qgbz1lLmdldEFuY2VzdG9ycygpLmZpbmQoUlQpO2NvbnN0IHI9dC5jcmVhdGVQb3NpdGlvbkF0KGUsMCkuZ2V0V2Fsa2VyKCk7Zm9yKGNvbnN0IHQgb2Ygcil7aWYodC50eXBlPT1cImVsZW1lbnRTdGFydFwiJiZ0Lml0ZW0uaXMoXCJsaVwiKSl7aS52aWV3UG9zaXRpb249dC5wcmV2aW91c1Bvc2l0aW9uO2JyZWFrfWVsc2UgaWYodC50eXBlPT1cImVsZW1lbnRFbmRcIiYmdC5pdGVtPT1vKXtpLnZpZXdQb3NpdGlvbj10Lm5leHRQb3NpdGlvbjticmVha319fX19ZnVuY3Rpb24gQ1QodCl7cmV0dXJuKGUsaSk9Pntjb25zdCBuPWkudmlld1Bvc2l0aW9uO2NvbnN0IG89bi5wYXJlbnQ7Y29uc3Qgcj1pLm1hcHBlcjtpZihvLm5hbWU9PVwidWxcInx8by5uYW1lPT1cIm9sXCIpe2lmKCFuLmlzQXRFbmQpe2NvbnN0IGU9ci50b01vZGVsRWxlbWVudChuLm5vZGVBZnRlcik7aS5tb2RlbFBvc2l0aW9uPXQuY3JlYXRlUG9zaXRpb25CZWZvcmUoZSl9ZWxzZXtjb25zdCBlPXIudG9Nb2RlbEVsZW1lbnQobi5ub2RlQmVmb3JlKTtjb25zdCBvPXIuZ2V0TW9kZWxMZW5ndGgobi5ub2RlQmVmb3JlKTtpLm1vZGVsUG9zaXRpb249dC5jcmVhdGVQb3NpdGlvbkJlZm9yZShlKS5nZXRTaGlmdGVkQnkobyl9ZS5zdG9wKCl9ZWxzZSBpZihvLm5hbWU9PVwibGlcIiYmbi5ub2RlQmVmb3JlJiYobi5ub2RlQmVmb3JlLm5hbWU9PVwidWxcInx8bi5ub2RlQmVmb3JlLm5hbWU9PVwib2xcIikpe2NvbnN0IHM9ci50b01vZGVsRWxlbWVudChvKTtsZXQgYT0xO2xldCBjPW4ubm9kZUJlZm9yZTt3aGlsZShjJiZSVChjKSl7YSs9ci5nZXRNb2RlbExlbmd0aChjKTtjPWMucHJldmlvdXNTaWJsaW5nfWkubW9kZWxQb3NpdGlvbj10LmNyZWF0ZVBvc2l0aW9uQmVmb3JlKHMpLmdldFNoaWZ0ZWRCeShhKTtlLnN0b3AoKX19fWZ1bmN0aW9uIEFUKHQsZSl7Y29uc3QgaT10LmRvY3VtZW50LmRpZmZlci5nZXRDaGFuZ2VzKCk7Y29uc3Qgbj1uZXcgTWFwO2xldCBvPWZhbHNlO2Zvcihjb25zdCBuIG9mIGkpe2lmKG4udHlwZT09XCJpbnNlcnRcIiYmbi5uYW1lPT1cImxpc3RJdGVtXCIpe3Iobi5wb3NpdGlvbil9ZWxzZSBpZihuLnR5cGU9PVwiaW5zZXJ0XCImJm4ubmFtZSE9XCJsaXN0SXRlbVwiKXtpZihuLm5hbWUhPVwiJHRleHRcIil7Y29uc3QgaT1uLnBvc2l0aW9uLm5vZGVBZnRlcjtpZihpLmhhc0F0dHJpYnV0ZShcImxpc3RJbmRlbnRcIikpe2UucmVtb3ZlQXR0cmlidXRlKFwibGlzdEluZGVudFwiLGkpO289dHJ1ZX1pZihpLmhhc0F0dHJpYnV0ZShcImxpc3RUeXBlXCIpKXtlLnJlbW92ZUF0dHJpYnV0ZShcImxpc3RUeXBlXCIsaSk7bz10cnVlfWZvcihjb25zdCBlIG9mIEFycmF5LmZyb20odC5jcmVhdGVSYW5nZUluKGkpKS5maWx0ZXIodD0+dC5pdGVtLmlzKFwibGlzdEl0ZW1cIikpKXtyKGUucHJldmlvdXNQb3NpdGlvbil9fWNvbnN0IGk9bi5wb3NpdGlvbi5nZXRTaGlmdGVkQnkobi5sZW5ndGgpO3IoaSl9ZWxzZSBpZihuLnR5cGU9PVwicmVtb3ZlXCImJm4ubmFtZT09XCJsaXN0SXRlbVwiKXtyKG4ucG9zaXRpb24pfWVsc2UgaWYobi50eXBlPT1cImF0dHJpYnV0ZVwiJiZuLmF0dHJpYnV0ZUtleT09XCJsaXN0SW5kZW50XCIpe3Iobi5yYW5nZS5zdGFydCl9ZWxzZSBpZihuLnR5cGU9PVwiYXR0cmlidXRlXCImJm4uYXR0cmlidXRlS2V5PT1cImxpc3RUeXBlXCIpe3Iobi5yYW5nZS5zdGFydCl9fWZvcihjb25zdCB0IG9mIG4udmFsdWVzKCkpe3ModCk7YSh0KX1yZXR1cm4gbztmdW5jdGlvbiByKHQpe2NvbnN0IGU9dC5ub2RlQmVmb3JlO2lmKCFlfHwhZS5pcyhcImxpc3RJdGVtXCIpKXtjb25zdCBlPXQubm9kZUFmdGVyO2lmKGUmJmUuaXMoXCJsaXN0SXRlbVwiKSl7bi5zZXQoZSxlKX19ZWxzZXtsZXQgaT1lO2lmKG4uaGFzKGkpKXtyZXR1cm59d2hpbGUoaS5wcmV2aW91c1NpYmxpbmcmJmkucHJldmlvdXNTaWJsaW5nLmlzKFwibGlzdEl0ZW1cIikpe2k9aS5wcmV2aW91c1NpYmxpbmc7aWYobi5oYXMoaSkpe3JldHVybn19bi5zZXQodC5ub2RlQmVmb3JlLGkpfX1mdW5jdGlvbiBzKHQpe2xldCBpPTA7bGV0IG49bnVsbDt3aGlsZSh0JiZ0LmlzKFwibGlzdEl0ZW1cIikpe2NvbnN0IHI9dC5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpO2lmKHI+aSl7bGV0IHM7aWYobj09PW51bGwpe249ci1pO3M9aX1lbHNle2lmKG4+cil7bj1yfXM9ci1ufWUuc2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiLHMsdCk7bz10cnVlfWVsc2V7bj1udWxsO2k9dC5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpKzF9dD10Lm5leHRTaWJsaW5nfX1mdW5jdGlvbiBhKHQpe2xldCBpPVtdO2xldCBuPW51bGw7d2hpbGUodCYmdC5pcyhcImxpc3RJdGVtXCIpKXtjb25zdCByPXQuZ2V0QXR0cmlidXRlKFwibGlzdEluZGVudFwiKTtpZihuJiZuLmdldEF0dHJpYnV0ZShcImxpc3RJbmRlbnRcIik+cil7aT1pLnNsaWNlKDAscisxKX1pZihyIT0wKXtpZihpW3JdKXtjb25zdCBuPWlbcl07aWYodC5nZXRBdHRyaWJ1dGUoXCJsaXN0VHlwZVwiKSE9bil7ZS5zZXRBdHRyaWJ1dGUoXCJsaXN0VHlwZVwiLG4sdCk7bz10cnVlfX1lbHNle2lbcl09dC5nZXRBdHRyaWJ1dGUoXCJsaXN0VHlwZVwiKX19bj10O3Q9dC5uZXh0U2libGluZ319fWZ1bmN0aW9uIFRUKHQsW2UsaV0pe2xldCBuPWUuaXMoXCJkb2N1bWVudEZyYWdtZW50XCIpP2UuZ2V0Q2hpbGQoMCk6ZTtsZXQgbztpZighaSl7bz10aGlzLmRvY3VtZW50LnNlbGVjdGlvbn1lbHNle289dGhpcy5jcmVhdGVTZWxlY3Rpb24oaSl9aWYobiYmbi5pcyhcImxpc3RJdGVtXCIpKXtjb25zdCB0PW8uZ2V0Rmlyc3RQb3NpdGlvbigpO2xldCBlPW51bGw7aWYodC5wYXJlbnQuaXMoXCJsaXN0SXRlbVwiKSl7ZT10LnBhcmVudH1lbHNlIGlmKHQubm9kZUJlZm9yZSYmdC5ub2RlQmVmb3JlLmlzKFwibGlzdEl0ZW1cIikpe2U9dC5ub2RlQmVmb3JlfWlmKGUpe2NvbnN0IHQ9ZS5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpO2lmKHQ+MCl7d2hpbGUobiYmbi5pcyhcImxpc3RJdGVtXCIpKXtuLl9zZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIsbi5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpK3QpO249bi5uZXh0U2libGluZ319fX19ZnVuY3Rpb24gUFQodCxlLGkpe2NvbnN0e3dyaXRlcjpuLHNjaGVtYTpvfT1pO2xldCByPW4uY3JlYXRlUG9zaXRpb25BZnRlcih0KTtmb3IoY29uc3QgcyBvZiBlKXtpZihzLm5hbWU9PVwidWxcInx8cy5uYW1lPT1cIm9sXCIpe3I9aS5jb252ZXJ0SXRlbShzLHIpLm1vZGVsQ3Vyc29yfWVsc2V7Y29uc3QgZT1pLmNvbnZlcnRJdGVtKHMsbi5jcmVhdGVQb3NpdGlvbkF0KHQsXCJlbmRcIikpO2NvbnN0IGE9ZS5tb2RlbFJhbmdlLnN0YXJ0Lm5vZGVBZnRlcjtjb25zdCBjPWEmJmEuaXMoXCJlbGVtZW50XCIpJiYhby5jaGVja0NoaWxkKHQsYS5uYW1lKTtpZihjKXtpZihlLm1vZGVsQ3Vyc29yLnBhcmVudC5pcyhcImxpc3RJdGVtXCIpKXt0PWUubW9kZWxDdXJzb3IucGFyZW50fWVsc2V7dD1TVChlLm1vZGVsQ3Vyc29yKX1yPW4uY3JlYXRlUG9zaXRpb25BZnRlcih0KX19fXJldHVybiByfWZ1bmN0aW9uIFNUKHQpe2NvbnN0IGU9bmV3IFdoKHtzdGFydFBvc2l0aW9uOnR9KTtsZXQgaTtkb3tpPWUubmV4dCgpfXdoaWxlKCFpLnZhbHVlLml0ZW0uaXMoXCJsaXN0SXRlbVwiKSk7cmV0dXJuIGkudmFsdWUuaXRlbX1mdW5jdGlvbiBFVCh0LGUsaSxuLG8scil7Y29uc3Qgcz1kVChlLm5vZGVCZWZvcmUse3NhbWVJbmRlbnQ6dHJ1ZSxzbWFsbGVySW5kZW50OnRydWUsbGlzdEluZGVudDp0LGZvbzpcImJcIn0pO2NvbnN0IGE9by5tYXBwZXI7Y29uc3QgYz1vLndyaXRlcjtjb25zdCBsPXM/cy5nZXRBdHRyaWJ1dGUoXCJsaXN0SW5kZW50XCIpOm51bGw7bGV0IGQ7aWYoIXMpe2Q9aX1lbHNlIGlmKGw9PXQpe2NvbnN0IHQ9YS50b1ZpZXdFbGVtZW50KHMpLnBhcmVudDtkPWMuY3JlYXRlUG9zaXRpb25BZnRlcih0KX1lbHNle2NvbnN0IHQ9ci5jcmVhdGVQb3NpdGlvbkF0KHMsXCJlbmRcIik7ZD1hLnRvVmlld1Bvc2l0aW9uKHQpfWQ9bFQoZCk7Zm9yKGNvbnN0IHQgb2ZbLi4ubi5nZXRDaGlsZHJlbigpXSl7aWYoUlQodCkpe2Q9Yy5tb3ZlKGMuY3JlYXRlUmFuZ2VPbih0KSxkKS5lbmQ7Y1QoYyx0LHQubmV4dFNpYmxpbmcpO2NUKGMsdC5wcmV2aW91c1NpYmxpbmcsdCl9fX1mdW5jdGlvbiBSVCh0KXtyZXR1cm4gdC5pcyhcIm9sXCIpfHx0LmlzKFwidWxcIil9ZnVuY3Rpb24gT1QodCl7bGV0IGU9MDtsZXQgaT10LnBhcmVudDt3aGlsZShpKXtpZihpLmlzKFwibGlcIikpe2UrK31lbHNle2NvbnN0IHQ9aS5wcmV2aW91c1NpYmxpbmc7aWYodCYmdC5pcyhcImxpXCIpKXtlKyt9fWk9aS5wYXJlbnR9cmV0dXJuIGV9Y2xhc3MgSVQgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkxpc3RFZGl0aW5nXCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltWX119aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5tb2RlbC5zY2hlbWEucmVnaXN0ZXIoXCJsaXN0SXRlbVwiLHtpbmhlcml0QWxsRnJvbTpcIiRibG9ja1wiLGFsbG93QXR0cmlidXRlczpbXCJsaXN0VHlwZVwiLFwibGlzdEluZGVudFwiXX0pO2NvbnN0IGU9dC5kYXRhO2NvbnN0IGk9dC5lZGl0aW5nO3QubW9kZWwuZG9jdW1lbnQucmVnaXN0ZXJQb3N0Rml4ZXIoZT0+QVQodC5tb2RlbCxlKSk7aS5tYXBwZXIucmVnaXN0ZXJWaWV3VG9Nb2RlbExlbmd0aChcImxpXCIsVlQpO2UubWFwcGVyLnJlZ2lzdGVyVmlld1RvTW9kZWxMZW5ndGgoXCJsaVwiLFZUKTtpLm1hcHBlci5vbihcIm1vZGVsVG9WaWV3UG9zaXRpb25cIix4VChpLnZpZXcpKTtpLm1hcHBlci5vbihcInZpZXdUb01vZGVsUG9zaXRpb25cIixDVCh0Lm1vZGVsKSk7ZS5tYXBwZXIub24oXCJtb2RlbFRvVmlld1Bvc2l0aW9uXCIseFQoaS52aWV3KSk7dC5jb252ZXJzaW9uLmZvcihcImVkaXRpbmdEb3duY2FzdFwiKS5hZGQoZT0+e2Uub24oXCJpbnNlcnRcIix3VCx7cHJpb3JpdHk6XCJoaWdoXCJ9KTtlLm9uKFwiaW5zZXJ0Omxpc3RJdGVtXCIsZlQodC5tb2RlbCkpO2Uub24oXCJhdHRyaWJ1dGU6bGlzdFR5cGU6bGlzdEl0ZW1cIixtVCx7cHJpb3JpdHk6XCJoaWdoXCJ9KTtlLm9uKFwiYXR0cmlidXRlOmxpc3RUeXBlOmxpc3RJdGVtXCIscFQse3ByaW9yaXR5OlwibG93XCJ9KTtlLm9uKFwiYXR0cmlidXRlOmxpc3RJbmRlbnQ6bGlzdEl0ZW1cIixiVCh0Lm1vZGVsKSk7ZS5vbihcInJlbW92ZTpsaXN0SXRlbVwiLGdUKHQubW9kZWwpKTtlLm9uKFwicmVtb3ZlXCIsa1Qse3ByaW9yaXR5OlwibG93XCJ9KX0pO3QuY29udmVyc2lvbi5mb3IoXCJkYXRhRG93bmNhc3RcIikuYWRkKGU9PntlLm9uKFwiaW5zZXJ0XCIsd1Qse3ByaW9yaXR5OlwiaGlnaFwifSk7ZS5vbihcImluc2VydDpsaXN0SXRlbVwiLGZUKHQubW9kZWwpKX0pO3QuY29udmVyc2lvbi5mb3IoXCJ1cGNhc3RcIikuYWRkKHQ9Pnt0Lm9uKFwiZWxlbWVudDp1bFwiLHZULHtwcmlvcml0eTpcImhpZ2hcIn0pO3Qub24oXCJlbGVtZW50Om9sXCIsdlQse3ByaW9yaXR5OlwiaGlnaFwifSk7dC5vbihcImVsZW1lbnQ6bGlcIix5VCx7cHJpb3JpdHk6XCJoaWdoXCJ9KTt0Lm9uKFwiZWxlbWVudDpsaVwiLF9UKX0pO3QubW9kZWwub24oXCJpbnNlcnRDb250ZW50XCIsVFQse3ByaW9yaXR5OlwiaGlnaFwifSk7dC5jb21tYW5kcy5hZGQoXCJudW1iZXJlZExpc3RcIixuZXcgZVQodCxcIm51bWJlcmVkXCIpKTt0LmNvbW1hbmRzLmFkZChcImJ1bGxldGVkTGlzdFwiLG5ldyBlVCh0LFwiYnVsbGV0ZWRcIikpO3QuY29tbWFuZHMuYWRkKFwiaW5kZW50TGlzdFwiLG5ldyBvVCh0LFwiZm9yd2FyZFwiKSk7dC5jb21tYW5kcy5hZGQoXCJvdXRkZW50TGlzdFwiLG5ldyBvVCh0LFwiYmFja3dhcmRcIikpO2NvbnN0IG49aS52aWV3LmRvY3VtZW50O3RoaXMubGlzdGVuVG8obixcImVudGVyXCIsKHQsZSk9Pntjb25zdCBpPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50O2NvbnN0IG49aS5zZWxlY3Rpb24uZ2V0TGFzdFBvc2l0aW9uKCkucGFyZW50O2lmKGkuc2VsZWN0aW9uLmlzQ29sbGFwc2VkJiZuLm5hbWU9PVwibGlzdEl0ZW1cIiYmbi5pc0VtcHR5KXt0aGlzLmVkaXRvci5leGVjdXRlKFwib3V0ZGVudExpc3RcIik7ZS5wcmV2ZW50RGVmYXVsdCgpO3Quc3RvcCgpfX0pO3RoaXMubGlzdGVuVG8obixcImRlbGV0ZVwiLCh0LGUpPT57aWYoZS5kaXJlY3Rpb24hPT1cImJhY2t3YXJkXCIpe3JldHVybn1jb25zdCBpPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjtpZighaS5pc0NvbGxhcHNlZCl7cmV0dXJufWNvbnN0IG49aS5nZXRGaXJzdFBvc2l0aW9uKCk7aWYoIW4uaXNBdFN0YXJ0KXtyZXR1cm59Y29uc3Qgbz1uLnBhcmVudDtpZihvLm5hbWUhPT1cImxpc3RJdGVtXCIpe3JldHVybn1jb25zdCByPW8ucHJldmlvdXNTaWJsaW5nJiZvLnByZXZpb3VzU2libGluZy5uYW1lPT09XCJsaXN0SXRlbVwiO2lmKHIpe3JldHVybn10aGlzLmVkaXRvci5leGVjdXRlKFwib3V0ZGVudExpc3RcIik7ZS5wcmV2ZW50RGVmYXVsdCgpO3Quc3RvcCgpfSx7cHJpb3JpdHk6XCJoaWdoXCJ9KTtjb25zdCBvPXQ9PihlLGkpPT57Y29uc3Qgbj10aGlzLmVkaXRvci5jb21tYW5kcy5nZXQodCk7aWYobi5pc0VuYWJsZWQpe3RoaXMuZWRpdG9yLmV4ZWN1dGUodCk7aSgpfX07dC5rZXlzdHJva2VzLnNldChcIlRhYlwiLG8oXCJpbmRlbnRMaXN0XCIpKTt0LmtleXN0cm9rZXMuc2V0KFwiU2hpZnQrVGFiXCIsbyhcIm91dGRlbnRMaXN0XCIpKX1hZnRlckluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yLmNvbW1hbmRzO2NvbnN0IGU9dC5nZXQoXCJpbmRlbnRcIik7Y29uc3QgaT10LmdldChcIm91dGRlbnRcIik7aWYoZSl7ZS5yZWdpc3RlckNoaWxkQ29tbWFuZCh0LmdldChcImluZGVudExpc3RcIikpfWlmKGkpe2kucmVnaXN0ZXJDaGlsZENvbW1hbmQodC5nZXQoXCJvdXRkZW50TGlzdFwiKSl9fX1mdW5jdGlvbiBWVCh0KXtsZXQgZT0xO2Zvcihjb25zdCBpIG9mIHQuZ2V0Q2hpbGRyZW4oKSl7aWYoaS5uYW1lPT1cInVsXCJ8fGkubmFtZT09XCJvbFwiKXtmb3IoY29uc3QgdCBvZiBpLmdldENoaWxkcmVuKCkpe2UrPVZUKHQpfX19cmV0dXJuIGV9dmFyIE5UPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03IDUuNzVjMCAuNDE0LjMzNi43NS43NS43NWg5LjVhLjc1Ljc1IDAgMSAwIDAtMS41aC05LjVhLjc1Ljc1IDAgMCAwLS43NS43NXpNMy41IDN2NUgyVjMuN0gxdi0xaDIuNVYzek0uMzQzIDE3Ljg1N2wyLjU5LTMuMjU3SDIuOTJhLjYuNiAwIDEgMC0xLjA0IDBILjMwMmEyIDIgMCAxIDEgMy45OTUgMGgtLjAwMWMtLjA0OC40MDUtLjE2LjczNC0uMzMzLjk4OC0uMTc1LjI1NC0uNTkuNjkyLTEuMjQ0IDEuMzEySDQuM3YxaC00bC4wNDMtLjA0M3pNNyAxNC43NWEuNzUuNzUgMCAwIDEgLjc1LS43NWg5LjVhLjc1Ljc1IDAgMSAxIDAgMS41aC05LjVhLjc1Ljc1IDAgMCAxLS43NS0uNzV6XCIvPjwvc3ZnPic7dmFyIE1UPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03IDUuNzVjMCAuNDE0LjMzNi43NS43NS43NWg5LjVhLjc1Ljc1IDAgMSAwIDAtMS41aC05LjVhLjc1Ljc1IDAgMCAwLS43NS43NXptLTYgMEMxIDQuNzg0IDEuNzc3IDQgMi43NSA0Yy45NjYgMCAxLjc1Ljc3NyAxLjc1IDEuNzUgMCAuOTY2LS43NzcgMS43NS0xLjc1IDEuNzVDMS43ODQgNy41IDEgNi43MjMgMSA1Ljc1em02IDljMCAuNDE0LjMzNi43NS43NS43NWg5LjVhLjc1Ljc1IDAgMSAwIDAtMS41aC05LjVhLjc1Ljc1IDAgMCAwLS43NS43NXptLTYgMGMwLS45NjYuNzc3LTEuNzUgMS43NS0xLjc1Ljk2NiAwIDEuNzUuNzc3IDEuNzUgMS43NSAwIC45NjYtLjc3NyAxLjc1LTEuNzUgMS43NS0uOTY2IDAtMS43NS0uNzc3LTEuNzUtMS43NXpcIi8+PC9zdmc+JztjbGFzcyBCVCBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yLnQ7dVQodGhpcy5lZGl0b3IsXCJudW1iZXJlZExpc3RcIix0KFwibGNcIiksTlQpO3VUKHRoaXMuZWRpdG9yLFwiYnVsbGV0ZWRMaXN0XCIsdChcImxkXCIpLE1UKX19Y2xhc3MgelQgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW0lULEJUXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIkxpc3RcIn19dmFyIExUPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk04LjY5IDE0LjkxNWMuMDUzLjA1Mi4xNzMuMDgzLjM2LjA5M2EuMzY2LjM2NiAwIDAgMSAuMzQ1LjQ4NWwtLjAwMy4wMWEuNzM4LjczOCAwIDAgMS0uNjk3LjQ5N2gtMi42N2EuMzc0LjM3NCAwIDAgMS0uMzUzLS40OTZsLjAxMy0uMDM4YS42ODEuNjgxIDAgMCAxIC42NDQtLjQ1OGMuMTk3LS4wMTIuMzI1LS4wNDMuMzg2LS4wOTNhLjI4LjI4IDAgMCAwIC4wNzItLjExTDkuNTkyIDQuNUg2LjI2OWMtLjM1OS0uMDE3LS42MDkuMDEzLS43NS4wOS0uMTQyLjA3OC0uMjg5LjI2NS0uNDQyLjU2My0uMTkyLjI5LS41MTYuNDY0LS44NjQuNDY0SDQuMTdhLjQzLjQzIDAgMCAxLS40MDctLjU2OUw0LjQ2IDNoMTMuMDhsLS42MiAyLjA0M2EuODEuODEgMCAwIDEtLjc3NS41NzRoLS4xMTRhLjQ4Ni40ODYgMCAwIDEtLjQ4Ni0uNDg2Yy4wMDEtLjI4NC0uMDU0LS40NjQtLjE2Ny0uNTQtLjExMi0uMDc2LS4zNjctLjEwNi0uNzY2LS4wOTFoLTMuMjhsLTIuNjggMTAuMjU3Yy0uMDA2LjA3NC4wMDcuMTI3LjAzOC4xNTh6TTMgMTdoOGEuNS41IDAgMSAxIDAgMUgzYS41LjUgMCAxIDEgMC0xem0xMS4yOTkgMS4xN2EuNzUuNzUgMCAxIDEtMS4wNi0xLjA2bDEuNDE0LTEuNDE1LTEuNDE1LTEuNDE0YS43NS43NSAwIDAgMSAxLjA2LTEuMDZsMS40MTUgMS40MTQgMS40MTQtMS40MTVhLjc1Ljc1IDAgMSAxIDEuMDYgMS4wNmwtMS40MTMgMS40MTUgMS40MTQgMS40MTVhLjc1Ljc1IDAgMCAxLTEuMDYgMS4wNmwtMS40MTUtMS40MTQtMS40MTQgMS40MTR6XCIvPjwvc3ZnPic7Y29uc3QgRlQ9XCJyZW1vdmVGb3JtYXRcIjtjbGFzcyBEVCBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiUmVtb3ZlRm9ybWF0VUlcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKEZULGk9Pntjb25zdCBuPXQuY29tbWFuZHMuZ2V0KEZUKTtjb25zdCBvPW5ldyBoYihpKTtvLnNldCh7bGFiZWw6ZShcImxhXCIpLGljb246TFQsdG9vbHRpcDp0cnVlfSk7by5iaW5kKFwiaXNPblwiLFwiaXNFbmFibGVkXCIpLnRvKG4sXCJ2YWx1ZVwiLFwiaXNFbmFibGVkXCIpO3RoaXMubGlzdGVuVG8obyxcImV4ZWN1dGVcIiwoKT0+e3QuZXhlY3V0ZShGVCk7dC5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiBvfSl9fWNsYXNzIGpUIGV4dGVuZHMgand7cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7dGhpcy5pc0VuYWJsZWQ9ISFXdyh0aGlzLl9nZXRGb3JtYXR0aW5nSXRlbXModC5kb2N1bWVudC5zZWxlY3Rpb24sdC5zY2hlbWEpKX1leGVjdXRlKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBlPXQuc2NoZW1hO3QuY2hhbmdlKGk9Pntmb3IoY29uc3QgbiBvZiB0aGlzLl9nZXRGb3JtYXR0aW5nSXRlbXModC5kb2N1bWVudC5zZWxlY3Rpb24sZSkpe2lmKG4uaXMoXCJzZWxlY3Rpb25cIikpe2Zvcihjb25zdCB0IG9mIHRoaXMuX2dldEZvcm1hdHRpbmdBdHRyaWJ1dGVzKG4sZSkpe2kucmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKHQpfX1lbHNle2NvbnN0IHQ9aS5jcmVhdGVSYW5nZU9uKG4pO2Zvcihjb25zdCBvIG9mIHRoaXMuX2dldEZvcm1hdHRpbmdBdHRyaWJ1dGVzKG4sZSkpe2kucmVtb3ZlQXR0cmlidXRlKG8sdCl9fX19KX0qX2dldEZvcm1hdHRpbmdJdGVtcyh0LGUpe2NvbnN0IGk9dD0+ISFXdyh0aGlzLl9nZXRGb3JtYXR0aW5nQXR0cmlidXRlcyh0LGUpKTtmb3IoY29uc3QgZSBvZiB0LmdldFJhbmdlcygpKXtmb3IoY29uc3QgdCBvZiBlLmdldEl0ZW1zKCkpe2lmKGkodCkpe3lpZWxkIHR9fX1pZihpKHQpKXt5aWVsZCB0fX0qX2dldEZvcm1hdHRpbmdBdHRyaWJ1dGVzKHQsZSl7Zm9yKGNvbnN0W2ldb2YgdC5nZXRBdHRyaWJ1dGVzKCkpe2NvbnN0IHQ9ZS5nZXRBdHRyaWJ1dGVQcm9wZXJ0aWVzKGkpO2lmKHQmJnQuaXNGb3JtYXR0aW5nKXt5aWVsZCBpfX19fWNsYXNzIEhUIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJSZW1vdmVGb3JtYXRFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5jb21tYW5kcy5hZGQoXCJyZW1vdmVGb3JtYXRcIixuZXcgalQodCkpfX1jbGFzcyBXVCBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bSFQsRFRdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiUmVtb3ZlRm9ybWF0XCJ9fWNsYXNzIHFUe2NvbnN0cnVjdG9yKHQsZT0yMCl7dGhpcy5tb2RlbD10O3RoaXMuc2l6ZT0wO3RoaXMubGltaXQ9ZTt0aGlzLmlzTG9ja2VkPWZhbHNlO3RoaXMuX2NoYW5nZUNhbGxiYWNrPSh0LGUpPT57aWYoZS50eXBlIT1cInRyYW5zcGFyZW50XCImJmUhPT10aGlzLl9iYXRjaCl7dGhpcy5fcmVzZXQodHJ1ZSl9fTt0aGlzLl9zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjaz0oKT0+e3RoaXMuX3Jlc2V0KCl9O3RoaXMubW9kZWwuZG9jdW1lbnQub24oXCJjaGFuZ2VcIix0aGlzLl9jaGFuZ2VDYWxsYmFjayk7dGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24ub24oXCJjaGFuZ2U6cmFuZ2VcIix0aGlzLl9zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjayk7dGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24ub24oXCJjaGFuZ2U6YXR0cmlidXRlXCIsdGhpcy5fc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2spfWdldCBiYXRjaCgpe2lmKCF0aGlzLl9iYXRjaCl7dGhpcy5fYmF0Y2g9dGhpcy5tb2RlbC5jcmVhdGVCYXRjaCgpfXJldHVybiB0aGlzLl9iYXRjaH1pbnB1dCh0KXt0aGlzLnNpemUrPXQ7aWYodGhpcy5zaXplPj10aGlzLmxpbWl0KXt0aGlzLl9yZXNldCh0cnVlKX19bG9jaygpe3RoaXMuaXNMb2NrZWQ9dHJ1ZX11bmxvY2soKXt0aGlzLmlzTG9ja2VkPWZhbHNlfWRlc3Ryb3koKXt0aGlzLm1vZGVsLmRvY3VtZW50Lm9mZihcImNoYW5nZVwiLHRoaXMuX2NoYW5nZUNhbGxiYWNrKTt0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5vZmYoXCJjaGFuZ2U6cmFuZ2VcIix0aGlzLl9zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjayk7dGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24ub2ZmKFwiY2hhbmdlOmF0dHJpYnV0ZVwiLHRoaXMuX3NlbGVjdGlvbkNoYW5nZUNhbGxiYWNrKX1fcmVzZXQodCl7aWYoIXRoaXMuaXNMb2NrZWR8fHQpe3RoaXMuX2JhdGNoPW51bGw7dGhpcy5zaXplPTB9fX1jbGFzcyBVVCBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7dGhpcy5fYnVmZmVyPW5ldyBxVCh0Lm1vZGVsLGUpO3RoaXMuX2JhdGNoZXM9bmV3IFdlYWtTZXR9Z2V0IGJ1ZmZlcigpe3JldHVybiB0aGlzLl9idWZmZXJ9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKTt0aGlzLl9idWZmZXIuZGVzdHJveSgpfWV4ZWN1dGUodD17fSl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQ7Y29uc3Qgbj10LnRleHR8fFwiXCI7Y29uc3Qgbz1uLmxlbmd0aDtjb25zdCByPXQucmFuZ2U/ZS5jcmVhdGVTZWxlY3Rpb24odC5yYW5nZSk6aS5zZWxlY3Rpb247Y29uc3Qgcz10LnJlc3VsdFJhbmdlO2UuZW5xdWV1ZUNoYW5nZSh0aGlzLl9idWZmZXIuYmF0Y2gsdD0+e3RoaXMuX2J1ZmZlci5sb2NrKCk7ZS5kZWxldGVDb250ZW50KHIpO2lmKG4pe2UuaW5zZXJ0Q29udGVudCh0LmNyZWF0ZVRleHQobixpLnNlbGVjdGlvbi5nZXRBdHRyaWJ1dGVzKCkpLHIpfWlmKHMpe3Quc2V0U2VsZWN0aW9uKHMpfWVsc2UgaWYoIXIuaXMoXCJkb2N1bWVudFNlbGVjdGlvblwiKSl7dC5zZXRTZWxlY3Rpb24ocil9dGhpcy5fYnVmZmVyLnVubG9jaygpO3RoaXMuX2J1ZmZlci5pbnB1dChvKTt0aGlzLl9iYXRjaGVzLmFkZCh0aGlzLl9idWZmZXIuYmF0Y2gpfSl9fWZ1bmN0aW9uICRUKHQpe2xldCBlPW51bGw7Y29uc3QgaT10Lm1vZGVsO2NvbnN0IG49dC5lZGl0aW5nLnZpZXc7Y29uc3Qgbz10LmNvbW1hbmRzLmdldChcImlucHV0XCIpO2lmKEFsLmlzQW5kcm9pZCl7bi5kb2N1bWVudC5vbihcImJlZm9yZWlucHV0XCIsKHQsZSk9PnIoZSkse3ByaW9yaXR5OlwibG93ZXN0XCJ9KX1lbHNle24uZG9jdW1lbnQub24oXCJrZXlkb3duXCIsKHQsZSk9PnIoZSkse3ByaW9yaXR5OlwibG93ZXN0XCJ9KX1uLmRvY3VtZW50Lm9uKFwiY29tcG9zaXRpb25zdGFydFwiLHMse3ByaW9yaXR5OlwibG93ZXN0XCJ9KTtuLmRvY3VtZW50Lm9uKFwiY29tcG9zaXRpb25lbmRcIiwoKT0+e2U9aS5jcmVhdGVTZWxlY3Rpb24oaS5kb2N1bWVudC5zZWxlY3Rpb24pfSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO2Z1bmN0aW9uIHIodCl7Y29uc3Qgcj1pLmRvY3VtZW50O2NvbnN0IHM9bi5kb2N1bWVudC5pc0NvbXBvc2luZztjb25zdCBjPWUmJmUuaXNFcXVhbChyLnNlbGVjdGlvbik7ZT1udWxsO2lmKCFvLmlzRW5hYmxlZCl7cmV0dXJufWlmKEtUKHQpfHxyLnNlbGVjdGlvbi5pc0NvbGxhcHNlZCl7cmV0dXJufWlmKHMmJnQua2V5Q29kZT09PTIyOSl7cmV0dXJufWlmKCFzJiZ0LmtleUNvZGU9PT0yMjkmJmMpe3JldHVybn1hKCl9ZnVuY3Rpb24gcygpe2NvbnN0IHQ9aS5kb2N1bWVudDtjb25zdCBlPXQuc2VsZWN0aW9uLnJhbmdlQ291bnQ9PT0xP3Quc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKS5pc0ZsYXQ6dHJ1ZTtpZih0LnNlbGVjdGlvbi5pc0NvbGxhcHNlZHx8ZSl7cmV0dXJufWEoKX1mdW5jdGlvbiBhKCl7Y29uc3QgdD1vLmJ1ZmZlcjt0LmxvY2soKTtpLmVucXVldWVDaGFuZ2UodC5iYXRjaCwoKT0+e2kuZGVsZXRlQ29udGVudChpLmRvY3VtZW50LnNlbGVjdGlvbil9KTt0LnVubG9jaygpfX1jb25zdCBHVD1bTWwoXCJhcnJvd1VwXCIpLE1sKFwiYXJyb3dSaWdodFwiKSxNbChcImFycm93RG93blwiKSxNbChcImFycm93TGVmdFwiKSw5LDE2LDE3LDE4LDE5LDIwLDI3LDMzLDM0LDM1LDM2LDQ1LDkxLDkzLDE0NCwxNDUsMTczLDE3NCwxNzUsMTc2LDE3NywxNzgsMTc5LDI1NV07Zm9yKGxldCB0PTExMjt0PD0xMzU7dCsrKXtHVC5wdXNoKHQpfWZ1bmN0aW9uIEtUKHQpe2lmKHQuY3RybEtleSl7cmV0dXJuIHRydWV9cmV0dXJuIEdULmluY2x1ZGVzKHQua2V5Q29kZSl9ZnVuY3Rpb24gSlQodCxlKXtjb25zdCBpPVtdO2xldCBuPTA7bGV0IG87dC5mb3JFYWNoKHQ9PntpZih0PT1cImVxdWFsXCIpe3IoKTtuKyt9ZWxzZSBpZih0PT1cImluc2VydFwiKXtpZihzKFwiaW5zZXJ0XCIpKXtvLnZhbHVlcy5wdXNoKGVbbl0pfWVsc2V7cigpO289e3R5cGU6XCJpbnNlcnRcIixpbmRleDpuLHZhbHVlczpbZVtuXV19fW4rK31lbHNle2lmKHMoXCJkZWxldGVcIikpe28uaG93TWFueSsrfWVsc2V7cigpO289e3R5cGU6XCJkZWxldGVcIixpbmRleDpuLGhvd01hbnk6MX19fX0pO3IoKTtyZXR1cm4gaTtmdW5jdGlvbiByKCl7aWYobyl7aS5wdXNoKG8pO289bnVsbH19ZnVuY3Rpb24gcyh0KXtyZXR1cm4gbyYmby50eXBlPT10fX1mdW5jdGlvbiBZVCh0KXtpZih0Lmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfWZvcihjb25zdCBlIG9mIHQpe2lmKGUudHlwZT09PVwiY2hpbGRyZW5cIiYmIVFUKGUpKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIFFUKHQpe2lmKHQubmV3Q2hpbGRyZW4ubGVuZ3RoLXQub2xkQ2hpbGRyZW4ubGVuZ3RoIT0xKXtyZXR1cm59Y29uc3QgZT1fZCh0Lm9sZENoaWxkcmVuLHQubmV3Q2hpbGRyZW4sWFQpO2NvbnN0IGk9SlQoZSx0Lm5ld0NoaWxkcmVuKTtpZihpLmxlbmd0aD4xKXtyZXR1cm59Y29uc3Qgbj1pWzBdO2lmKCEoISFuLnZhbHVlc1swXSYmbi52YWx1ZXNbMF0uaXMoXCJ0ZXh0XCIpKSl7cmV0dXJufXJldHVybiBufWZ1bmN0aW9uIFhUKHQsZSl7aWYoISF0JiZ0LmlzKFwidGV4dFwiKSYmISFlJiZlLmlzKFwidGV4dFwiKSl7cmV0dXJuIHQuZGF0YT09PWUuZGF0YX1lbHNle3JldHVybiB0PT09ZX19ZnVuY3Rpb24gWlQodCl7dC5lZGl0aW5nLnZpZXcuZG9jdW1lbnQub24oXCJtdXRhdGlvbnNcIiwoZSxpLG4pPT57bmV3IHRQKHQpLmhhbmRsZShpLG4pfSl9Y2xhc3MgdFB7Y29uc3RydWN0b3IodCl7dGhpcy5lZGl0b3I9dDt0aGlzLmVkaXRpbmc9dGhpcy5lZGl0b3IuZWRpdGluZ31oYW5kbGUodCxlKXtpZihZVCh0KSl7dGhpcy5faGFuZGxlQ29udGFpbmVyQ2hpbGRyZW5NdXRhdGlvbnModCxlKX1lbHNle2Zvcihjb25zdCBpIG9mIHQpe3RoaXMuX2hhbmRsZVRleHRNdXRhdGlvbihpLGUpO3RoaXMuX2hhbmRsZVRleHROb2RlSW5zZXJ0aW9uKGkpfX19X2hhbmRsZUNvbnRhaW5lckNoaWxkcmVuTXV0YXRpb25zKHQsZSl7Y29uc3QgaT1lUCh0KTtpZighaSl7cmV0dXJufWNvbnN0IG49dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvbUNvbnZlcnRlcjtjb25zdCBvPW4ubWFwVmlld1RvRG9tKGkpO2NvbnN0IHI9bmV3IHpkKHRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5kb2N1bWVudCk7Y29uc3Qgcz10aGlzLmVkaXRvci5kYXRhLnRvTW9kZWwoci5kb21Ub1ZpZXcobykpLmdldENoaWxkKDApO2NvbnN0IGE9dGhpcy5lZGl0b3IuZWRpdGluZy5tYXBwZXIudG9Nb2RlbEVsZW1lbnQoaSk7aWYoIWEpe3JldHVybn1jb25zdCBjPUFycmF5LmZyb20ocy5nZXRDaGlsZHJlbigpKTtjb25zdCBsPUFycmF5LmZyb20oYS5nZXRDaGlsZHJlbigpKTtjb25zdCBkPWNbYy5sZW5ndGgtMV07Y29uc3QgdT1sW2wubGVuZ3RoLTFdO2lmKGQmJmQuaXMoXCJzb2Z0QnJlYWtcIikmJnUmJiF1LmlzKFwic29mdEJyZWFrXCIpKXtjLnBvcCgpfWNvbnN0IGg9dGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hO2lmKCFpUChjLGgpfHwhaVAobCxoKSl7cmV0dXJufWNvbnN0IGY9Yy5tYXAodD0+dC5pcyhcInRleHRcIik/dC5kYXRhOlwiQFwiKS5qb2luKFwiXCIpLnJlcGxhY2UoL1xcdTAwQTAvZyxcIiBcIik7Y29uc3QgZz1sLm1hcCh0PT50LmlzKFwidGV4dFwiKT90LmRhdGE6XCJAXCIpLmpvaW4oXCJcIikucmVwbGFjZSgvXFx1MDBBMC9nLFwiIFwiKTtpZihnPT09Zil7cmV0dXJufWNvbnN0IG09X2QoZyxmKTtjb25zdHtmaXJzdENoYW5nZUF0OnAsaW5zZXJ0aW9uczpiLGRlbGV0aW9uczp3fT1uUChtKTtsZXQgaz1udWxsO2lmKGUpe2s9dGhpcy5lZGl0aW5nLm1hcHBlci50b01vZGVsUmFuZ2UoZS5nZXRGaXJzdFJhbmdlKCkpfWNvbnN0IF89Zi5zdWJzdHIocCxiKTtjb25zdCB2PXRoaXMuZWRpdG9yLm1vZGVsLmNyZWF0ZVJhbmdlKHRoaXMuZWRpdG9yLm1vZGVsLmNyZWF0ZVBvc2l0aW9uQXQoYSxwKSx0aGlzLmVkaXRvci5tb2RlbC5jcmVhdGVQb3NpdGlvbkF0KGEscCt3KSk7dGhpcy5lZGl0b3IuZXhlY3V0ZShcImlucHV0XCIse3RleHQ6XyxyYW5nZTp2LHJlc3VsdFJhbmdlOmt9KX1faGFuZGxlVGV4dE11dGF0aW9uKHQsZSl7aWYodC50eXBlIT1cInRleHRcIil7cmV0dXJufWNvbnN0IGk9dC5uZXdUZXh0LnJlcGxhY2UoL1xcdTAwQTAvZyxcIiBcIik7Y29uc3Qgbj10Lm9sZFRleHQucmVwbGFjZSgvXFx1MDBBMC9nLFwiIFwiKTtpZihuPT09aSl7cmV0dXJufWNvbnN0IG89X2QobixpKTtjb25zdHtmaXJzdENoYW5nZUF0OnIsaW5zZXJ0aW9uczpzLGRlbGV0aW9uczphfT1uUChvKTtsZXQgYz1udWxsO2lmKGUpe2M9dGhpcy5lZGl0aW5nLm1hcHBlci50b01vZGVsUmFuZ2UoZS5nZXRGaXJzdFJhbmdlKCkpfWNvbnN0IGw9dGhpcy5lZGl0aW5nLnZpZXcuY3JlYXRlUG9zaXRpb25BdCh0Lm5vZGUscik7Y29uc3QgZD10aGlzLmVkaXRpbmcubWFwcGVyLnRvTW9kZWxQb3NpdGlvbihsKTtjb25zdCB1PXRoaXMuZWRpdG9yLm1vZGVsLmNyZWF0ZVJhbmdlKGQsZC5nZXRTaGlmdGVkQnkoYSkpO2NvbnN0IGg9aS5zdWJzdHIocixzKTt0aGlzLmVkaXRvci5leGVjdXRlKFwiaW5wdXRcIix7dGV4dDpoLHJhbmdlOnUscmVzdWx0UmFuZ2U6Y30pfV9oYW5kbGVUZXh0Tm9kZUluc2VydGlvbih0KXtpZih0LnR5cGUhPVwiY2hpbGRyZW5cIil7cmV0dXJufWNvbnN0IGU9UVQodCk7Y29uc3QgaT10aGlzLmVkaXRpbmcudmlldy5jcmVhdGVQb3NpdGlvbkF0KHQubm9kZSxlLmluZGV4KTtjb25zdCBuPXRoaXMuZWRpdGluZy5tYXBwZXIudG9Nb2RlbFBvc2l0aW9uKGkpO2NvbnN0IG89ZS52YWx1ZXNbMF0uZGF0YTt0aGlzLmVkaXRvci5leGVjdXRlKFwiaW5wdXRcIix7dGV4dDpvLnJlcGxhY2UoL1xcdTAwQTAvZyxcIiBcIikscmFuZ2U6dGhpcy5lZGl0b3IubW9kZWwuY3JlYXRlUmFuZ2Uobil9KX19ZnVuY3Rpb24gZVAodCl7Y29uc3QgZT10Lm1hcCh0PT50Lm5vZGUpLnJlZHVjZSgodCxlKT0+dC5nZXRDb21tb25BbmNlc3RvcihlLHtpbmNsdWRlU2VsZjp0cnVlfSkpO2lmKCFlKXtyZXR1cm59cmV0dXJuIGUuZ2V0QW5jZXN0b3JzKHtpbmNsdWRlU2VsZjp0cnVlLHBhcmVudEZpcnN0OnRydWV9KS5maW5kKHQ9PnQuaXMoXCJjb250YWluZXJFbGVtZW50XCIpfHx0LmlzKFwicm9vdEVsZW1lbnRcIikpfWZ1bmN0aW9uIGlQKHQsZSl7cmV0dXJuIHQuZXZlcnkodD0+ZS5pc0lubGluZSh0KSl9ZnVuY3Rpb24gblAodCl7bGV0IGU9bnVsbDtsZXQgaT1udWxsO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCBvPXRbbl07aWYobyE9XCJlcXVhbFwiKXtlPWU9PT1udWxsP246ZTtpPW59fWxldCBuPTA7bGV0IG89MDtmb3IobGV0IHI9ZTtyPD1pO3IrKyl7aWYodFtyXSE9XCJpbnNlcnRcIil7bisrfWlmKHRbcl0hPVwiZGVsZXRlXCIpe28rK319cmV0dXJue2luc2VydGlvbnM6byxkZWxldGlvbnM6bixmaXJzdENoYW5nZUF0OmV9fWNsYXNzIG9QIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJJbnB1dFwifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9bmV3IFVUKHQsdC5jb25maWcuZ2V0KFwidHlwaW5nLnVuZG9TdGVwXCIpfHwyMCk7dC5jb21tYW5kcy5hZGQoXCJpbnB1dFwiLGUpOyRUKHQpO1pUKHQpfWlzSW5wdXQodCl7Y29uc3QgZT10aGlzLmVkaXRvci5jb21tYW5kcy5nZXQoXCJpbnB1dFwiKTtyZXR1cm4gZS5fYmF0Y2hlcy5oYXModCl9fWNsYXNzIHJQIGV4dGVuZHMgand7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLmRpcmVjdGlvbj1lO3RoaXMuX2J1ZmZlcj1uZXcgcVQodC5tb2RlbCx0LmNvbmZpZy5nZXQoXCJ0eXBpbmcudW5kb1N0ZXBcIikpfWdldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5fYnVmZmVyfWV4ZWN1dGUodD17fSl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQ7ZS5lbnF1ZXVlQ2hhbmdlKHRoaXMuX2J1ZmZlci5iYXRjaCxuPT57dGhpcy5fYnVmZmVyLmxvY2soKTtjb25zdCBvPW4uY3JlYXRlU2VsZWN0aW9uKHQuc2VsZWN0aW9ufHxpLnNlbGVjdGlvbik7Y29uc3Qgcj1vLmlzQ29sbGFwc2VkO2lmKG8uaXNDb2xsYXBzZWQpe2UubW9kaWZ5U2VsZWN0aW9uKG8se2RpcmVjdGlvbjp0aGlzLmRpcmVjdGlvbix1bml0OnQudW5pdH0pfWlmKHRoaXMuX3Nob3VsZEVudGlyZUNvbnRlbnRCZVJlcGxhY2VkV2l0aFBhcmFncmFwaCh0LnNlcXVlbmNlfHwxKSl7dGhpcy5fcmVwbGFjZUVudGlyZUNvbnRlbnRXaXRoUGFyYWdyYXBoKG4pO3JldHVybn1pZihvLmlzQ29sbGFwc2VkKXtyZXR1cm59bGV0IHM9MDtvLmdldEZpcnN0UmFuZ2UoKS5nZXRNaW5pbWFsRmxhdFJhbmdlcygpLmZvckVhY2godD0+e3MrPWZsKHQuZ2V0V2Fsa2VyKHtzaW5nbGVDaGFyYWN0ZXJzOnRydWUsaWdub3JlRWxlbWVudEVuZDp0cnVlLHNoYWxsb3c6dHJ1ZX0pKX0pO2UuZGVsZXRlQ29udGVudChvLHtkb05vdFJlc2V0RW50aXJlQ29udGVudDpyLGRpcmVjdGlvbjp0aGlzLmRpcmVjdGlvbn0pO3RoaXMuX2J1ZmZlci5pbnB1dChzKTtuLnNldFNlbGVjdGlvbihvKTt0aGlzLl9idWZmZXIudW5sb2NrKCl9KX1fc2hvdWxkRW50aXJlQ29udGVudEJlUmVwbGFjZWRXaXRoUGFyYWdyYXBoKHQpe2lmKHQ+MSl7cmV0dXJuIGZhbHNlfWNvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgaT1lLmRvY3VtZW50O2NvbnN0IG49aS5zZWxlY3Rpb247Y29uc3Qgbz1lLnNjaGVtYS5nZXRMaW1pdEVsZW1lbnQobik7Y29uc3Qgcj1uLmlzQ29sbGFwc2VkJiZuLmNvbnRhaW5zRW50aXJlQ29udGVudChvKTtpZighcil7cmV0dXJuIGZhbHNlfWlmKCFlLnNjaGVtYS5jaGVja0NoaWxkKG8sXCJwYXJhZ3JhcGhcIikpe3JldHVybiBmYWxzZX1jb25zdCBzPW8uZ2V0Q2hpbGQoMCk7aWYocyYmcy5uYW1lPT09XCJwYXJhZ3JhcGhcIil7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfV9yZXBsYWNlRW50aXJlQ29udGVudFdpdGhQYXJhZ3JhcGgodCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPWUuZG9jdW1lbnQ7Y29uc3Qgbj1pLnNlbGVjdGlvbjtjb25zdCBvPWUuc2NoZW1hLmdldExpbWl0RWxlbWVudChuKTtjb25zdCByPXQuY3JlYXRlRWxlbWVudChcInBhcmFncmFwaFwiKTt0LnJlbW92ZSh0LmNyZWF0ZVJhbmdlSW4obykpO3QuaW5zZXJ0KHIsbyk7dC5zZXRTZWxlY3Rpb24ociwwKX19Y2xhc3Mgc1AgZXh0ZW5kcyBHZHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtjb25zdCBlPXQuZG9jdW1lbnQ7bGV0IGk9MDtlLm9uKFwia2V5dXBcIiwodCxlKT0+e2lmKGUua2V5Q29kZT09TmwuZGVsZXRlfHxlLmtleUNvZGU9PU5sLmJhY2tzcGFjZSl7aT0wfX0pO2Uub24oXCJrZXlkb3duXCIsKHQsZSk9Pntjb25zdCBvPXt9O2lmKGUua2V5Q29kZT09TmwuZGVsZXRlKXtvLmRpcmVjdGlvbj1cImZvcndhcmRcIjtvLnVuaXQ9XCJjaGFyYWN0ZXJcIn1lbHNlIGlmKGUua2V5Q29kZT09TmwuYmFja3NwYWNlKXtvLmRpcmVjdGlvbj1cImJhY2t3YXJkXCI7by51bml0PVwiY29kZVBvaW50XCJ9ZWxzZXtyZXR1cm59Y29uc3Qgcj1BbC5pc01hYz9lLmFsdEtleTplLmN0cmxLZXk7by51bml0PXI/XCJ3b3JkXCI6by51bml0O28uc2VxdWVuY2U9KytpO24odCxlLmRvbUV2ZW50LG8pfSk7aWYoQWwuaXNBbmRyb2lkKXtlLm9uKFwiYmVmb3JlaW5wdXRcIiwoZSxpKT0+e2lmKGkuZG9tRXZlbnQuaW5wdXRUeXBlIT1cImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiKXtyZXR1cm59Y29uc3Qgbz17dW5pdDpcImNvZGVwb2ludFwiLGRpcmVjdGlvbjpcImJhY2t3YXJkXCIsc2VxdWVuY2U6MX07Y29uc3Qgcj1pLmRvbVRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldFNlbGVjdGlvbigpO2lmKHIuYW5jaG9yTm9kZT09ci5mb2N1c05vZGUmJnIuYW5jaG9yT2Zmc2V0KzEhPXIuZm9jdXNPZmZzZXQpe28uc2VsZWN0aW9uVG9SZW1vdmU9dC5kb21Db252ZXJ0ZXIuZG9tU2VsZWN0aW9uVG9WaWV3KHIpfW4oZSxpLmRvbUV2ZW50LG8pfSl9ZnVuY3Rpb24gbih0LGksbil7bGV0IG87ZS5vbmNlKFwiZGVsZXRlXCIsdD0+bz10LHtwcmlvcml0eTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9KTtlLmZpcmUoXCJkZWxldGVcIixuZXcgS3UoZSxpLG4pKTtpZihvJiZvLnN0b3AuY2FsbGVkKXt0LnN0b3AoKX19fW9ic2VydmUoKXt9fWNsYXNzIGFQIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJEZWxldGVcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQuZWRpdGluZy52aWV3O2NvbnN0IGk9ZS5kb2N1bWVudDtlLmFkZE9ic2VydmVyKHNQKTt0LmNvbW1hbmRzLmFkZChcImZvcndhcmREZWxldGVcIixuZXcgclAodCxcImZvcndhcmRcIikpO3QuY29tbWFuZHMuYWRkKFwiZGVsZXRlXCIsbmV3IHJQKHQsXCJiYWNrd2FyZFwiKSk7dGhpcy5saXN0ZW5UbyhpLFwiZGVsZXRlXCIsKGksbik9Pntjb25zdCBvPXt1bml0Om4udW5pdCxzZXF1ZW5jZTpuLnNlcXVlbmNlfTtpZihuLnNlbGVjdGlvblRvUmVtb3ZlKXtjb25zdCBlPXQubW9kZWwuY3JlYXRlU2VsZWN0aW9uKCk7Y29uc3QgaT1bXTtmb3IoY29uc3QgZSBvZiBuLnNlbGVjdGlvblRvUmVtb3ZlLmdldFJhbmdlcygpKXtpLnB1c2godC5lZGl0aW5nLm1hcHBlci50b01vZGVsUmFuZ2UoZSkpfWUuc2V0VG8oaSk7by5zZWxlY3Rpb249ZX10LmV4ZWN1dGUobi5kaXJlY3Rpb249PVwiZm9yd2FyZFwiP1wiZm9yd2FyZERlbGV0ZVwiOlwiZGVsZXRlXCIsbyk7bi5wcmV2ZW50RGVmYXVsdCgpO2Uuc2Nyb2xsVG9UaGVTZWxlY3Rpb24oKX0pO2lmKEFsLmlzQW5kcm9pZCl7bGV0IHQ9bnVsbDt0aGlzLmxpc3RlblRvKGksXCJkZWxldGVcIiwoZSxpKT0+e2NvbnN0IG49aS5kb21UYXJnZXQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKTt0PXthbmNob3JOb2RlOm4uYW5jaG9yTm9kZSxhbmNob3JPZmZzZXQ6bi5hbmNob3JPZmZzZXQsZm9jdXNOb2RlOm4uZm9jdXNOb2RlLGZvY3VzT2Zmc2V0Om4uZm9jdXNPZmZzZXR9fSx7cHJpb3JpdHk6XCJsb3dlc3RcIn0pO3RoaXMubGlzdGVuVG8oaSxcImtleXVwXCIsKGUsaSk9PntpZih0KXtjb25zdCBlPWkuZG9tVGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCk7ZS5jb2xsYXBzZSh0LmFuY2hvck5vZGUsdC5hbmNob3JPZmZzZXQpO2UuZXh0ZW5kKHQuZm9jdXNOb2RlLHQuZm9jdXNPZmZzZXQpO3Q9bnVsbH19KX19fWNsYXNzIGNQIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltvUCxhUF19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJUeXBpbmdcIn19Y2xhc3MgbFAgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpO2NvbnN0IGk9dC50O3RoaXMubGFiZWxWaWV3PW5ldyBNayh0KTt0aGlzLmxhYmVsVmlldy50ZXh0PWkoXCJiXCIpO3RoaXMuZ3JvdXBEcm9wZG93blZpZXc9dGhpcy5fY3JlYXRlR3JvdXBEcm9wZG93bihlKTt0aGlzLmdyb3VwRHJvcGRvd25WaWV3LnBhbmVsUG9zaXRpb249dC51aUxhbmd1YWdlRGlyZWN0aW9uPT09XCJydGxcIj9cInNlXCI6XCJzd1wiO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzpcImRpdlwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1zcGVjaWFsLWNoYXJhY3RlcnMtbmF2aWdhdGlvblwiXX0sY2hpbGRyZW46W3RoaXMubGFiZWxWaWV3LHRoaXMuZ3JvdXBEcm9wZG93blZpZXddfSl9Z2V0IGN1cnJlbnRHcm91cE5hbWUoKXtyZXR1cm4gdGhpcy5ncm91cERyb3Bkb3duVmlldy52YWx1ZX1fY3JlYXRlR3JvdXBEcm9wZG93bih0KXtjb25zdCBlPXRoaXMubG9jYWxlO2NvbnN0IGk9ZS50O2NvbnN0IG49V2IoZSk7Y29uc3Qgbz10aGlzLl9nZXRDaGFyYWN0ZXJHcm91cExpc3RJdGVtRGVmaW5pdGlvbnMobix0KTtuLnNldChcInZhbHVlXCIsby5maXJzdC5tb2RlbC5sYWJlbCk7bi5idXR0b25WaWV3LmJpbmQoXCJsYWJlbFwiKS50byhuLFwidmFsdWVcIik7bi5idXR0b25WaWV3LnNldCh7aXNPbjpmYWxzZSx3aXRoVGV4dDp0cnVlLHRvb2x0aXA6aShcImxlXCIpfSk7bi5vbihcImV4ZWN1dGVcIix0PT57bi52YWx1ZT10LnNvdXJjZS5sYWJlbH0pO24uZGVsZWdhdGUoXCJleGVjdXRlXCIpLnRvKHRoaXMpO1ViKG4sbyk7cmV0dXJuIG59X2dldENoYXJhY3Rlckdyb3VwTGlzdEl0ZW1EZWZpbml0aW9ucyh0LGUpe2NvbnN0IGk9bmV3IHlzO2Zvcihjb25zdCBuIG9mIGUpe2NvbnN0IGU9e3R5cGU6XCJidXR0b25cIixtb2RlbDpuZXcgZV8oe2xhYmVsOm4sd2l0aFRleHQ6dHJ1ZX0pfTtlLm1vZGVsLmJpbmQoXCJpc09uXCIpLnRvKHQsXCJ2YWx1ZVwiLHQ9PnQ9PT1lLm1vZGVsLmxhYmVsKTtpLmFkZChlKX1yZXR1cm4gaX19dmFyIGRQPWkoODYpO2NsYXNzIHVQIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy50aWxlcz10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixjaGlsZHJlbjpbe3RhZzpcImRpdlwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1jaGFyYWN0ZXItZ3JpZF9fdGlsZXNcIl19LGNoaWxkcmVuOnRoaXMudGlsZXN9XSxhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stY2hhcmFjdGVyLWdyaWRcIl19fSl9Y3JlYXRlVGlsZSh0LGUpe2NvbnN0IGk9bmV3IGhiKHRoaXMubG9jYWxlKTtpLnNldCh7bGFiZWw6dCx3aXRoVGV4dDp0cnVlLGNsYXNzOlwiY2stY2hhcmFjdGVyLWdyaWRfX3RpbGVcIn0pO2kuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e3RpdGxlOmV9LG9uOnttb3VzZW92ZXI6aS5iaW5kVGVtcGxhdGUudG8oXCJtb3VzZW92ZXJcIil9fSk7aS5vbihcIm1vdXNlb3ZlclwiLCgpPT57dGhpcy5maXJlKFwidGlsZUhvdmVyXCIse25hbWU6ZSxjaGFyYWN0ZXI6dH0pfSk7aS5vbihcImV4ZWN1dGVcIiwoKT0+e3RoaXMuZmlyZShcImV4ZWN1dGVcIix7bmFtZTplLGNoYXJhY3Rlcjp0fSl9KTtyZXR1cm4gaX19dmFyIGhQPWkoODgpO2NsYXNzIGZQIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7Y29uc3QgZT10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldChcImNoYXJhY3RlclwiLG51bGwpO3RoaXMuc2V0KFwibmFtZVwiLG51bGwpO3RoaXMuYmluZChcImNvZGVcIikudG8odGhpcyxcImNoYXJhY3RlclwiLGdQKTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixjaGlsZHJlbjpbe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay1jaGFyYWN0ZXItaW5mb19fbmFtZVwiXX0sY2hpbGRyZW46W3t0ZXh0OmUudG8oXCJuYW1lXCIsdD0+dD90Olwi4oCLXCIpfV19LHt0YWc6XCJzcGFuXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2stY2hhcmFjdGVyLWluZm9fX2NvZGVcIl19LGNoaWxkcmVuOlt7dGV4dDplLnRvKFwiY29kZVwiKX1dfV0sYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWNoYXJhY3Rlci1pbmZvXCJdfX0pfX1mdW5jdGlvbiBnUCh0KXtpZih0PT09bnVsbCl7cmV0dXJuXCJcIn1jb25zdCBlPXQuY29kZVBvaW50QXQoMCkudG9TdHJpbmcoMTYpO3JldHVyblwiVStcIisoXCIwMDAwXCIrZSkuc2xpY2UoLTQpfXZhciBtUD0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTAgMi41YTcuNDcgNy40NyAwIDAgMSA0LjIzMSAxLjMxIDcuMjY4IDcuMjY4IDAgMCAxIDIuNzAzIDMuNDU0IDcuMTI4IDcuMTI4IDAgMCAxIC4xOTkgNC4zNTNjLS4zOSAxLjQzNi0xLjQ3NSAyLjcyLTIuNjMzIDMuNjc3aDIuMDEzYzAtLjIyNi4wOTItLjQ0My4yNTQtLjYwM2EuODc2Ljg3NiAwIDAgMSAxLjIyOSAwYy4xNjMuMTYuMjU0LjM3Ny4yNTQuNjAzdi44NTNjMCAuMjA5LS4wNzguNDEtLjIyLjU2N2EuODczLjg3MyAwIDAgMS0uNTQ3LjI4bC0uMTAxLjAwNmgtNC42OTVhLjUxNy41MTcgMCAwIDEtLjUxNi0uNTE4di0xLjI2NWMwLS4yMS4xMjgtLjM5OC4zMTctLjQ4OWE1LjYwMSA1LjYwMSAwIDAgMCAyLjQ5Mi0yLjM3MSA1LjQ1OSA1LjQ1OSAwIDAgMCAuNTUyLTMuNjkzIDUuNTMgNS41MyAwIDAgMC0xLjk1NS0zLjJBNS43MSA1LjcxIDAgMCAwIDEwIDQuMjA2IDUuNzA4IDUuNzA4IDAgMCAwIDYuNDE5IDUuNDYgNS41MjcgNS41MjcgMCAwIDAgNC40NiA4LjY2M2E1LjQ1NyA1LjQ1NyAwIDAgMCAuNTU0IDMuNjk1IDUuNiA1LjYgMCAwIDAgMi40OTcgMi4zNy41NS41NSAwIDAgMSAuMzE3LjQ5djEuMjY0YzAgLjI4Ni0uMjMuNTE4LS41MTYuNTE4SDIuNjE4YS44NzcuODc3IDAgMCAxLS42MTQtLjI1Ljg0NS44NDUgMCAwIDEtLjI1NC0uNjAzdi0uODUzYzAtLjIyNi4wOTEtLjQ0My4yNTQtLjYwM2EuODc2Ljg3NiAwIDAgMSAxLjIyOCAwYy4xNjMuMTYuMjU1LjM3Ny4yNTUuNjAzaDEuOTI1Yy0xLjE1OC0uOTU4LTIuMTU1LTIuMjQxLTIuNTQ1LTMuNjc4YTcuMTI4IDcuMTI4IDAgMCAxIC4xOTktNC4zNTIgNy4yNjggNy4yNjggMCAwIDEgMi43MDMtMy40NTVBNy40NzUgNy40NzUgMCAwIDEgMTAgMi41elwiLz48L3N2Zz4nO3ZhciBwUD1pKDkwKTtjb25zdCBiUD1cItCS0YHQtVwiO2NsYXNzIHdQIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltjUF19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJTcGVjaWFsQ2hhcmFjdGVyc1wifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuX2NoYXJhY3RlcnM9bmV3IE1hcDt0aGlzLl9ncm91cHM9bmV3IE1hcH1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDtjb25zdCBpPXQuY29tbWFuZHMuZ2V0KFwiaW5wdXRcIik7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChcInNwZWNpYWxDaGFyYWN0ZXJzXCIsbj0+e2NvbnN0IG89V2Iobik7bGV0IHI7by5idXR0b25WaWV3LnNldCh7bGFiZWw6ZShcImJcIiksaWNvbjptUCx0b29sdGlwOnRydWV9KTtvLmJpbmQoXCJpc0VuYWJsZWRcIikudG8oaSk7by5vbihcImV4ZWN1dGVcIiwoZSxpKT0+e3QuZXhlY3V0ZShcImlucHV0XCIse3RleHQ6aS5jaGFyYWN0ZXJ9KTt0LmVkaXRpbmcudmlldy5mb2N1cygpfSk7by5vbihcImNoYW5nZTppc09wZW5cIiwoKT0+e2lmKCFyKXtyPXRoaXMuX2NyZWF0ZURyb3Bkb3duUGFuZWxDb250ZW50KG4sbyk7by5wYW5lbFZpZXcuY2hpbGRyZW4uYWRkKHIubmF2aWdhdGlvblZpZXcpO28ucGFuZWxWaWV3LmNoaWxkcmVuLmFkZChyLmdyaWRWaWV3KTtvLnBhbmVsVmlldy5jaGlsZHJlbi5hZGQoci5pbmZvVmlldyl9ci5pbmZvVmlldy5zZXQoe2NoYXJhY3RlcjpudWxsLG5hbWU6bnVsbH0pfSk7cmV0dXJuIG99KX1hZGRJdGVtcyh0LGUpe2lmKHQ9PT1iUCl7dGhyb3cgbmV3IHNzW1wiYlwiXShgc3BlY2lhbC1jaGFyYWN0ZXItaW52YWxpZC1ncm91cC1uYW1lOiBUaGUgbmFtZSBcIiR7YlB9XCIgaXMgcmVzZXJ2ZWQgYW5kIGNhbm5vdCBiZSB1c2VkLmApfWNvbnN0IGk9dGhpcy5fZ2V0R3JvdXAodCk7Zm9yKGNvbnN0IHQgb2YgZSl7aS5hZGQodC50aXRsZSk7dGhpcy5fY2hhcmFjdGVycy5zZXQodC50aXRsZSx0LmNoYXJhY3Rlcil9fWdldEdyb3Vwcygpe3JldHVybiB0aGlzLl9ncm91cHMua2V5cygpfWdldENoYXJhY3RlcnNGb3JHcm91cCh0KXtpZih0PT09YlApe3JldHVybiBuZXcgU2V0KHRoaXMuX2NoYXJhY3RlcnMua2V5cygpKX1yZXR1cm4gdGhpcy5fZ3JvdXBzLmdldCh0KX1nZXRDaGFyYWN0ZXIodCl7cmV0dXJuIHRoaXMuX2NoYXJhY3RlcnMuZ2V0KHQpfV9nZXRHcm91cCh0KXtpZighdGhpcy5fZ3JvdXBzLmhhcyh0KSl7dGhpcy5fZ3JvdXBzLnNldCh0LG5ldyBTZXQpfXJldHVybiB0aGlzLl9ncm91cHMuZ2V0KHQpfV91cGRhdGVHcmlkKHQsZSl7ZS50aWxlcy5jbGVhcigpO2NvbnN0IGk9dGhpcy5nZXRDaGFyYWN0ZXJzRm9yR3JvdXAodCk7Zm9yKGNvbnN0IHQgb2YgaSl7Y29uc3QgaT10aGlzLmdldENoYXJhY3Rlcih0KTtlLnRpbGVzLmFkZChlLmNyZWF0ZVRpbGUoaSx0KSl9fV9jcmVhdGVEcm9wZG93blBhbmVsQ29udGVudCh0LGUpe2NvbnN0IGk9Wy4uLnRoaXMuZ2V0R3JvdXBzKCldO2kudW5zaGlmdChiUCk7Y29uc3Qgbj1uZXcgbFAodCxpKTtjb25zdCBvPW5ldyB1UCh0KTtjb25zdCByPW5ldyBmUCh0KTtvLmRlbGVnYXRlKFwiZXhlY3V0ZVwiKS50byhlKTtvLm9uKFwidGlsZUhvdmVyXCIsKHQsZSk9PntyLnNldChlKX0pO24ub24oXCJleGVjdXRlXCIsKCk9Pnt0aGlzLl91cGRhdGVHcmlkKG4uY3VycmVudEdyb3VwTmFtZSxvKX0pO3RoaXMuX3VwZGF0ZUdyaWQobi5jdXJyZW50R3JvdXBOYW1lLG8pO3JldHVybntuYXZpZ2F0aW9uVmlldzpuLGdyaWRWaWV3Om8saW5mb1ZpZXc6cn19fWNsYXNzIGtQIGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC5wbHVnaW5zLmdldChcIlNwZWNpYWxDaGFyYWN0ZXJzXCIpLmFkZEl0ZW1zKFwi0JLQsNC70Y7RgtCwXCIsW3tjaGFyYWN0ZXI6XCIkXCIsdGl0bGU6ZShcInVcIil9LHtjaGFyYWN0ZXI6XCLigqxcIix0aXRsZTplKFwidlwiKX0se2NoYXJhY3RlcjpcIsKlXCIsdGl0bGU6ZShcIndcIil9LHtjaGFyYWN0ZXI6XCLCo1wiLHRpdGxlOmUoXCJ4XCIpfSx7Y2hhcmFjdGVyOlwiwqJcIix0aXRsZTplKFwieVwiKX0se2NoYXJhY3RlcjpcIuKCoFwiLHRpdGxlOmUoXCJ6XCIpfSx7Y2hhcmFjdGVyOlwi4oKhXCIsdGl0bGU6ZShcImFhXCIpfSx7Y2hhcmFjdGVyOlwi4oKiXCIsdGl0bGU6ZShcImFiXCIpfSx7Y2hhcmFjdGVyOlwi4oKjXCIsdGl0bGU6ZShcImFjXCIpfSx7Y2hhcmFjdGVyOlwi4oKkXCIsdGl0bGU6ZShcImFkXCIpfSx7Y2hhcmFjdGVyOlwiwqRcIix0aXRsZTplKFwiYWVcIil9LHtjaGFyYWN0ZXI6XCLigr9cIix0aXRsZTplKFwiYWZcIil9LHtjaGFyYWN0ZXI6XCLigqVcIix0aXRsZTplKFwiYWdcIil9LHtjaGFyYWN0ZXI6XCLigqZcIix0aXRsZTplKFwiYWhcIil9LHtjaGFyYWN0ZXI6XCLigqdcIix0aXRsZTplKFwiYWlcIil9LHtjaGFyYWN0ZXI6XCLigqhcIix0aXRsZTplKFwiYWpcIil9LHtjaGFyYWN0ZXI6XCLigqlcIix0aXRsZTplKFwiYWtcIil9LHtjaGFyYWN0ZXI6XCLigqpcIix0aXRsZTplKFwiYWxcIil9LHtjaGFyYWN0ZXI6XCLigqtcIix0aXRsZTplKFwiYW1cIil9LHtjaGFyYWN0ZXI6XCLigq1cIix0aXRsZTplKFwiYW5cIil9LHtjaGFyYWN0ZXI6XCLigq5cIix0aXRsZTplKFwiYW9cIil9LHtjaGFyYWN0ZXI6XCLigq9cIix0aXRsZTplKFwiYXBcIil9LHtjaGFyYWN0ZXI6XCLigrBcIix0aXRsZTplKFwiYXFcIil9LHtjaGFyYWN0ZXI6XCLigrFcIix0aXRsZTplKFwiYXJcIil9LHtjaGFyYWN0ZXI6XCLigrJcIix0aXRsZTplKFwiYXNcIil9LHtjaGFyYWN0ZXI6XCLigrNcIix0aXRsZTplKFwiYXRcIil9LHtjaGFyYWN0ZXI6XCLigrRcIix0aXRsZTplKFwiYXVcIil9LHtjaGFyYWN0ZXI6XCLigrVcIix0aXRsZTplKFwiYXZcIil9LHtjaGFyYWN0ZXI6XCLigrZcIix0aXRsZTplKFwiYXdcIil9LHtjaGFyYWN0ZXI6XCLigrdcIix0aXRsZTplKFwiYXhcIil9LHtjaGFyYWN0ZXI6XCLigrhcIix0aXRsZTplKFwiYXlcIil9LHtjaGFyYWN0ZXI6XCLigrlcIix0aXRsZTplKFwiYXpcIil9LHtjaGFyYWN0ZXI6XCLigrpcIix0aXRsZTplKFwiYmFcIil9LHtjaGFyYWN0ZXI6XCLigrtcIix0aXRsZTplKFwiYmJcIil9LHtjaGFyYWN0ZXI6XCLigrxcIix0aXRsZTplKFwiYmNcIil9LHtjaGFyYWN0ZXI6XCLigr1cIix0aXRsZTplKFwiYmRcIil9XSl9fWNsYXNzIF9QIGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC5wbHVnaW5zLmdldChcIlNwZWNpYWxDaGFyYWN0ZXJzXCIpLmFkZEl0ZW1zKFwi0JzQsNGC0LXQvNCw0YLQuNGH0LXRgdC60LjQtVwiLFt7Y2hhcmFjdGVyOlwiPFwiLHRpdGxlOmUoXCJnY1wiKX0se2NoYXJhY3RlcjpcIj5cIix0aXRsZTplKFwiZ2RcIil9LHtjaGFyYWN0ZXI6XCLiiaRcIix0aXRsZTplKFwiZ2VcIil9LHtjaGFyYWN0ZXI6XCLiiaVcIix0aXRsZTplKFwiZ2ZcIil9LHtjaGFyYWN0ZXI6XCLigJNcIix0aXRsZTplKFwiZ2dcIil9LHtjaGFyYWN0ZXI6XCLigJRcIix0aXRsZTplKFwiZ2hcIil9LHtjaGFyYWN0ZXI6XCLCr1wiLHRpdGxlOmUoXCJnaVwiKX0se2NoYXJhY3RlcjpcIuKAvlwiLHRpdGxlOmUoXCJnalwiKX0se2NoYXJhY3RlcjpcIsKwXCIsdGl0bGU6ZShcImdrXCIpfSx7Y2hhcmFjdGVyOlwi4oiSXCIsdGl0bGU6ZShcImdsXCIpfSx7Y2hhcmFjdGVyOlwiwrFcIix0aXRsZTplKFwiZ21cIil9LHtjaGFyYWN0ZXI6XCLDt1wiLHRpdGxlOmUoXCJnblwiKX0se2NoYXJhY3RlcjpcIuKBhFwiLHRpdGxlOmUoXCJnb1wiKX0se2NoYXJhY3RlcjpcIsOXXCIsdGl0bGU6ZShcImdwXCIpfSx7Y2hhcmFjdGVyOlwixpJcIix0aXRsZTplKFwiZ3FcIil9LHtjaGFyYWN0ZXI6XCLiiKtcIix0aXRsZTplKFwiZ3JcIil9LHtjaGFyYWN0ZXI6XCLiiJFcIix0aXRsZTplKFwiZ3NcIil9LHtjaGFyYWN0ZXI6XCLiiJ5cIix0aXRsZTplKFwiZ3RcIil9LHtjaGFyYWN0ZXI6XCLiiJpcIix0aXRsZTplKFwiZ3VcIil9LHtjaGFyYWN0ZXI6XCLiiLxcIix0aXRsZTplKFwiZ3ZcIil9LHtjaGFyYWN0ZXI6XCLiiYVcIix0aXRsZTplKFwiZ3dcIil9LHtjaGFyYWN0ZXI6XCLiiYhcIix0aXRsZTplKFwiZ3hcIil9LHtjaGFyYWN0ZXI6XCLiiaBcIix0aXRsZTplKFwiZ3lcIil9LHtjaGFyYWN0ZXI6XCLiiaFcIix0aXRsZTplKFwiZ3pcIil9LHtjaGFyYWN0ZXI6XCLiiIhcIix0aXRsZTplKFwiaGFcIil9LHtjaGFyYWN0ZXI6XCLiiIlcIix0aXRsZTplKFwiaGJcIil9LHtjaGFyYWN0ZXI6XCLiiItcIix0aXRsZTplKFwiaGNcIil9LHtjaGFyYWN0ZXI6XCLiiI9cIix0aXRsZTplKFwiaGRcIil9LHtjaGFyYWN0ZXI6XCLiiKdcIix0aXRsZTplKFwiaGVcIil9LHtjaGFyYWN0ZXI6XCLiiKhcIix0aXRsZTplKFwiaGZcIil9LHtjaGFyYWN0ZXI6XCLCrFwiLHRpdGxlOmUoXCJoZ1wiKX0se2NoYXJhY3RlcjpcIuKIqVwiLHRpdGxlOmUoXCJoaFwiKX0se2NoYXJhY3RlcjpcIuKIqlwiLHRpdGxlOmUoXCJoaVwiKX0se2NoYXJhY3RlcjpcIuKIglwiLHRpdGxlOmUoXCJoalwiKX0se2NoYXJhY3RlcjpcIuKIgFwiLHRpdGxlOmUoXCJoa1wiKX0se2NoYXJhY3RlcjpcIuKIg1wiLHRpdGxlOmUoXCJobFwiKX0se2NoYXJhY3RlcjpcIuKIhVwiLHRpdGxlOmUoXCJobVwiKX0se2NoYXJhY3RlcjpcIuKIh1wiLHRpdGxlOmUoXCJoblwiKX0se2NoYXJhY3RlcjpcIuKIl1wiLHRpdGxlOmUoXCJob1wiKX0se2NoYXJhY3RlcjpcIuKInVwiLHRpdGxlOmUoXCJocFwiKX0se2NoYXJhY3RlcjpcIuKIoFwiLHRpdGxlOmUoXCJocVwiKX0se2NoYXJhY3RlcjpcIsK8XCIsdGl0bGU6ZShcImhyXCIpfSx7Y2hhcmFjdGVyOlwiwr1cIix0aXRsZTplKFwiaHNcIil9LHtjaGFyYWN0ZXI6XCLCvlwiLHRpdGxlOmUoXCJodFwiKX1dKX19Y2xhc3MgdlAgZXh0ZW5kcyBtcHtpbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0LnBsdWdpbnMuZ2V0KFwiU3BlY2lhbENoYXJhY3RlcnNcIikuYWRkSXRlbXMoXCLQodGC0YDQtdC70LrQuFwiLFt7dGl0bGU6ZShcImNcIiksY2hhcmFjdGVyOlwi4oeQXCJ9LHt0aXRsZTplKFwiZFwiKSxjaGFyYWN0ZXI6XCLih5JcIn0se3RpdGxlOmUoXCJlXCIpLGNoYXJhY3RlcjpcIuKHkVwifSx7dGl0bGU6ZShcImZcIiksY2hhcmFjdGVyOlwi4oeTXCJ9LHt0aXRsZTplKFwiZ1wiKSxjaGFyYWN0ZXI6XCLih6BcIn0se3RpdGxlOmUoXCJoXCIpLGNoYXJhY3RlcjpcIuKHolwifSx7dGl0bGU6ZShcImlcIiksY2hhcmFjdGVyOlwi4oehXCJ9LHt0aXRsZTplKFwialwiKSxjaGFyYWN0ZXI6XCLih6NcIn0se3RpdGxlOmUoXCJrXCIpLGNoYXJhY3RlcjpcIuKHpFwifSx7dGl0bGU6ZShcImxcIiksY2hhcmFjdGVyOlwi4oelXCJ9LHt0aXRsZTplKFwibVwiKSxjaGFyYWN0ZXI6XCLipJJcIn0se3RpdGxlOmUoXCJuXCIpLGNoYXJhY3RlcjpcIuKkk1wifSx7dGl0bGU6ZShcIm9cIiksY2hhcmFjdGVyOlwi4oaoXCJ9LHt0aXRsZTplKFwicFwiKSxjaGFyYWN0ZXI6XCLwn5SZXCJ9LHt0aXRsZTplKFwicVwiKSxjaGFyYWN0ZXI6XCLwn5SaXCJ9LHt0aXRsZTplKFwiclwiKSxjaGFyYWN0ZXI6XCLwn5SbXCJ9LHt0aXRsZTplKFwic1wiKSxjaGFyYWN0ZXI6XCLwn5ScXCJ9LHt0aXRsZTplKFwidFwiKSxjaGFyYWN0ZXI6XCLwn5SdXCJ9XSl9fWNsYXNzIHlQIGV4dGVuZHMgbXB7aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LnQ7dC5wbHVnaW5zLmdldChcIlNwZWNpYWxDaGFyYWN0ZXJzXCIpLmFkZEl0ZW1zKFwi0JvQsNGC0LjQvdGB0LrQuNC1INGB0LjQvNCy0L7Qu9GLXCIsW3tjaGFyYWN0ZXI6XCLEgFwiLHRpdGxlOmUoXCJiZVwiKX0se2NoYXJhY3RlcjpcIsSBXCIsdGl0bGU6ZShcImJmXCIpfSx7Y2hhcmFjdGVyOlwixIJcIix0aXRsZTplKFwiYmdcIil9LHtjaGFyYWN0ZXI6XCLEg1wiLHRpdGxlOmUoXCJiaFwiKX0se2NoYXJhY3RlcjpcIsSEXCIsdGl0bGU6ZShcImJpXCIpfSx7Y2hhcmFjdGVyOlwixIVcIix0aXRsZTplKFwiYmpcIil9LHtjaGFyYWN0ZXI6XCLEhlwiLHRpdGxlOmUoXCJia1wiKX0se2NoYXJhY3RlcjpcIsSHXCIsdGl0bGU6ZShcImJsXCIpfSx7Y2hhcmFjdGVyOlwixIhcIix0aXRsZTplKFwiYm1cIil9LHtjaGFyYWN0ZXI6XCLEiVwiLHRpdGxlOmUoXCJiblwiKX0se2NoYXJhY3RlcjpcIsSKXCIsdGl0bGU6ZShcImJvXCIpfSx7Y2hhcmFjdGVyOlwixItcIix0aXRsZTplKFwiYnBcIil9LHtjaGFyYWN0ZXI6XCLEjFwiLHRpdGxlOmUoXCJicVwiKX0se2NoYXJhY3RlcjpcIsSNXCIsdGl0bGU6ZShcImJyXCIpfSx7Y2hhcmFjdGVyOlwixI5cIix0aXRsZTplKFwiYnNcIil9LHtjaGFyYWN0ZXI6XCLEj1wiLHRpdGxlOmUoXCJidFwiKX0se2NoYXJhY3RlcjpcIsSQXCIsdGl0bGU6ZShcImJ1XCIpfSx7Y2hhcmFjdGVyOlwixJFcIix0aXRsZTplKFwiYnZcIil9LHtjaGFyYWN0ZXI6XCLEklwiLHRpdGxlOmUoXCJid1wiKX0se2NoYXJhY3RlcjpcIsSTXCIsdGl0bGU6ZShcImJ4XCIpfSx7Y2hhcmFjdGVyOlwixJRcIix0aXRsZTplKFwiYnlcIil9LHtjaGFyYWN0ZXI6XCLElVwiLHRpdGxlOmUoXCJielwiKX0se2NoYXJhY3RlcjpcIsSWXCIsdGl0bGU6ZShcImNhXCIpfSx7Y2hhcmFjdGVyOlwixJdcIix0aXRsZTplKFwiY2JcIil9LHtjaGFyYWN0ZXI6XCLEmFwiLHRpdGxlOmUoXCJjY1wiKX0se2NoYXJhY3RlcjpcIsSZXCIsdGl0bGU6ZShcImNkXCIpfSx7Y2hhcmFjdGVyOlwixJpcIix0aXRsZTplKFwiY2VcIil9LHtjaGFyYWN0ZXI6XCLEm1wiLHRpdGxlOmUoXCJjZlwiKX0se2NoYXJhY3RlcjpcIsScXCIsdGl0bGU6ZShcImNnXCIpfSx7Y2hhcmFjdGVyOlwixJ1cIix0aXRsZTplKFwiY2hcIil9LHtjaGFyYWN0ZXI6XCLEnlwiLHRpdGxlOmUoXCJjaVwiKX0se2NoYXJhY3RlcjpcIsSfXCIsdGl0bGU6ZShcImNqXCIpfSx7Y2hhcmFjdGVyOlwixKBcIix0aXRsZTplKFwiY2tcIil9LHtjaGFyYWN0ZXI6XCLEoVwiLHRpdGxlOmUoXCJjbFwiKX0se2NoYXJhY3RlcjpcIsSiXCIsdGl0bGU6ZShcImNtXCIpfSx7Y2hhcmFjdGVyOlwixKNcIix0aXRsZTplKFwiY25cIil9LHtjaGFyYWN0ZXI6XCLEpFwiLHRpdGxlOmUoXCJjb1wiKX0se2NoYXJhY3RlcjpcIsSlXCIsdGl0bGU6ZShcImNwXCIpfSx7Y2hhcmFjdGVyOlwixKZcIix0aXRsZTplKFwiY3FcIil9LHtjaGFyYWN0ZXI6XCLEp1wiLHRpdGxlOmUoXCJjclwiKX0se2NoYXJhY3RlcjpcIsSoXCIsdGl0bGU6ZShcImNzXCIpfSx7Y2hhcmFjdGVyOlwixKlcIix0aXRsZTplKFwiY3RcIil9LHtjaGFyYWN0ZXI6XCLEqlwiLHRpdGxlOmUoXCJjdVwiKX0se2NoYXJhY3RlcjpcIsSrXCIsdGl0bGU6ZShcImN2XCIpfSx7Y2hhcmFjdGVyOlwixKxcIix0aXRsZTplKFwiY3dcIil9LHtjaGFyYWN0ZXI6XCLErVwiLHRpdGxlOmUoXCJjeFwiKX0se2NoYXJhY3RlcjpcIsSuXCIsdGl0bGU6ZShcImN5XCIpfSx7Y2hhcmFjdGVyOlwixK9cIix0aXRsZTplKFwiY3pcIil9LHtjaGFyYWN0ZXI6XCLEsFwiLHRpdGxlOmUoXCJkYVwiKX0se2NoYXJhY3RlcjpcIsSxXCIsdGl0bGU6ZShcImRiXCIpfSx7Y2hhcmFjdGVyOlwixLJcIix0aXRsZTplKFwiZGNcIil9LHtjaGFyYWN0ZXI6XCLEs1wiLHRpdGxlOmUoXCJkZFwiKX0se2NoYXJhY3RlcjpcIsS0XCIsdGl0bGU6ZShcImRlXCIpfSx7Y2hhcmFjdGVyOlwixLVcIix0aXRsZTplKFwiZGZcIil9LHtjaGFyYWN0ZXI6XCLEtlwiLHRpdGxlOmUoXCJkZ1wiKX0se2NoYXJhY3RlcjpcIsS3XCIsdGl0bGU6ZShcImRoXCIpfSx7Y2hhcmFjdGVyOlwixLhcIix0aXRsZTplKFwiZGlcIil9LHtjaGFyYWN0ZXI6XCLEuVwiLHRpdGxlOmUoXCJkalwiKX0se2NoYXJhY3RlcjpcIsS6XCIsdGl0bGU6ZShcImRrXCIpfSx7Y2hhcmFjdGVyOlwixLtcIix0aXRsZTplKFwiZGxcIil9LHtjaGFyYWN0ZXI6XCLEvFwiLHRpdGxlOmUoXCJkbVwiKX0se2NoYXJhY3RlcjpcIsS9XCIsdGl0bGU6ZShcImRuXCIpfSx7Y2hhcmFjdGVyOlwixL5cIix0aXRsZTplKFwiZG9cIil9LHtjaGFyYWN0ZXI6XCLEv1wiLHRpdGxlOmUoXCJkcFwiKX0se2NoYXJhY3RlcjpcIsWAXCIsdGl0bGU6ZShcImRxXCIpfSx7Y2hhcmFjdGVyOlwixYFcIix0aXRsZTplKFwiZHJcIil9LHtjaGFyYWN0ZXI6XCLFglwiLHRpdGxlOmUoXCJkc1wiKX0se2NoYXJhY3RlcjpcIsWDXCIsdGl0bGU6ZShcImR0XCIpfSx7Y2hhcmFjdGVyOlwixYRcIix0aXRsZTplKFwiZHVcIil9LHtjaGFyYWN0ZXI6XCLFhVwiLHRpdGxlOmUoXCJkdlwiKX0se2NoYXJhY3RlcjpcIsWGXCIsdGl0bGU6ZShcImR3XCIpfSx7Y2hhcmFjdGVyOlwixYdcIix0aXRsZTplKFwiZHhcIil9LHtjaGFyYWN0ZXI6XCLFiFwiLHRpdGxlOmUoXCJkeVwiKX0se2NoYXJhY3RlcjpcIsWJXCIsdGl0bGU6ZShcImR6XCIpfSx7Y2hhcmFjdGVyOlwixYpcIix0aXRsZTplKFwiZWFcIil9LHtjaGFyYWN0ZXI6XCLFi1wiLHRpdGxlOmUoXCJlYlwiKX0se2NoYXJhY3RlcjpcIsWMXCIsdGl0bGU6ZShcImVjXCIpfSx7Y2hhcmFjdGVyOlwixY1cIix0aXRsZTplKFwiZWRcIil9LHtjaGFyYWN0ZXI6XCLFjlwiLHRpdGxlOmUoXCJlZVwiKX0se2NoYXJhY3RlcjpcIsWPXCIsdGl0bGU6ZShcImVmXCIpfSx7Y2hhcmFjdGVyOlwixZBcIix0aXRsZTplKFwiZWdcIil9LHtjaGFyYWN0ZXI6XCLFkVwiLHRpdGxlOmUoXCJlaFwiKX0se2NoYXJhY3RlcjpcIsWSXCIsdGl0bGU6ZShcImVpXCIpfSx7Y2hhcmFjdGVyOlwixZNcIix0aXRsZTplKFwiZWpcIil9LHtjaGFyYWN0ZXI6XCLFlFwiLHRpdGxlOmUoXCJla1wiKX0se2NoYXJhY3RlcjpcIsWVXCIsdGl0bGU6ZShcImVsXCIpfSx7Y2hhcmFjdGVyOlwixZZcIix0aXRsZTplKFwiZW1cIil9LHtjaGFyYWN0ZXI6XCLFl1wiLHRpdGxlOmUoXCJlblwiKX0se2NoYXJhY3RlcjpcIsWYXCIsdGl0bGU6ZShcImVvXCIpfSx7Y2hhcmFjdGVyOlwixZlcIix0aXRsZTplKFwiZXBcIil9LHtjaGFyYWN0ZXI6XCLFmlwiLHRpdGxlOmUoXCJlcVwiKX0se2NoYXJhY3RlcjpcIsWbXCIsdGl0bGU6ZShcImVyXCIpfSx7Y2hhcmFjdGVyOlwixZxcIix0aXRsZTplKFwiZXNcIil9LHtjaGFyYWN0ZXI6XCLFnVwiLHRpdGxlOmUoXCJldFwiKX0se2NoYXJhY3RlcjpcIsWeXCIsdGl0bGU6ZShcImV1XCIpfSx7Y2hhcmFjdGVyOlwixZ9cIix0aXRsZTplKFwiZXZcIil9LHtjaGFyYWN0ZXI6XCLFoFwiLHRpdGxlOmUoXCJld1wiKX0se2NoYXJhY3RlcjpcIsWhXCIsdGl0bGU6ZShcImV4XCIpfSx7Y2hhcmFjdGVyOlwixaJcIix0aXRsZTplKFwiZXlcIil9LHtjaGFyYWN0ZXI6XCLFo1wiLHRpdGxlOmUoXCJlelwiKX0se2NoYXJhY3RlcjpcIsWkXCIsdGl0bGU6ZShcImZhXCIpfSx7Y2hhcmFjdGVyOlwixaVcIix0aXRsZTplKFwiZmJcIil9LHtjaGFyYWN0ZXI6XCLFplwiLHRpdGxlOmUoXCJmY1wiKX0se2NoYXJhY3RlcjpcIsWnXCIsdGl0bGU6ZShcImZkXCIpfSx7Y2hhcmFjdGVyOlwixahcIix0aXRsZTplKFwiZmVcIil9LHtjaGFyYWN0ZXI6XCLFqVwiLHRpdGxlOmUoXCJmZlwiKX0se2NoYXJhY3RlcjpcIsWqXCIsdGl0bGU6ZShcImZnXCIpfSx7Y2hhcmFjdGVyOlwixatcIix0aXRsZTplKFwiZmhcIil9LHtjaGFyYWN0ZXI6XCLFrFwiLHRpdGxlOmUoXCJmaVwiKX0se2NoYXJhY3RlcjpcIsWtXCIsdGl0bGU6ZShcImZqXCIpfSx7Y2hhcmFjdGVyOlwixa5cIix0aXRsZTplKFwiZmtcIil9LHtjaGFyYWN0ZXI6XCLFr1wiLHRpdGxlOmUoXCJmbFwiKX0se2NoYXJhY3RlcjpcIsWwXCIsdGl0bGU6ZShcImZtXCIpfSx7Y2hhcmFjdGVyOlwixbFcIix0aXRsZTplKFwiZm5cIil9LHtjaGFyYWN0ZXI6XCLFslwiLHRpdGxlOmUoXCJmb1wiKX0se2NoYXJhY3RlcjpcIsWzXCIsdGl0bGU6ZShcImZwXCIpfSx7Y2hhcmFjdGVyOlwixbRcIix0aXRsZTplKFwiZnFcIil9LHtjaGFyYWN0ZXI6XCLFtVwiLHRpdGxlOmUoXCJmclwiKX0se2NoYXJhY3RlcjpcIsW2XCIsdGl0bGU6ZShcImZzXCIpfSx7Y2hhcmFjdGVyOlwixbdcIix0aXRsZTplKFwiZnRcIil9LHtjaGFyYWN0ZXI6XCLFuFwiLHRpdGxlOmUoXCJmdVwiKX0se2NoYXJhY3RlcjpcIsW5XCIsdGl0bGU6ZShcImZ2XCIpfSx7Y2hhcmFjdGVyOlwixbpcIix0aXRsZTplKFwiZndcIil9LHtjaGFyYWN0ZXI6XCLFu1wiLHRpdGxlOmUoXCJmeFwiKX0se2NoYXJhY3RlcjpcIsW8XCIsdGl0bGU6ZShcImZ5XCIpfSx7Y2hhcmFjdGVyOlwixb1cIix0aXRsZTplKFwiZnpcIil9LHtjaGFyYWN0ZXI6XCLFvlwiLHRpdGxlOmUoXCJnYVwiKX0se2NoYXJhY3RlcjpcIsW/XCIsdGl0bGU6ZShcImdiXCIpfV0pfX1jbGFzcyB4UCBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC50O3QucGx1Z2lucy5nZXQoXCJTcGVjaWFsQ2hhcmFjdGVyc1wiKS5hZGRJdGVtcyhcItCi0LXQutGB0YLQvtCy0YvQtSDRgdC40LzQstC+0LvRi1wiLFt7Y2hhcmFjdGVyOlwi4oC5XCIsdGl0bGU6ZShcImh1XCIpfSx7Y2hhcmFjdGVyOlwi4oC6XCIsdGl0bGU6ZShcImh2XCIpfSx7Y2hhcmFjdGVyOlwiwqtcIix0aXRsZTplKFwiaHdcIil9LHtjaGFyYWN0ZXI6XCLCu1wiLHRpdGxlOmUoXCJoeFwiKX0se2NoYXJhY3RlcjpcIuKAmFwiLHRpdGxlOmUoXCJoeVwiKX0se2NoYXJhY3RlcjpcIuKAmVwiLHRpdGxlOmUoXCJoelwiKX0se2NoYXJhY3RlcjpcIuKAnFwiLHRpdGxlOmUoXCJpYVwiKX0se2NoYXJhY3RlcjpcIuKAnVwiLHRpdGxlOmUoXCJpYlwiKX0se2NoYXJhY3RlcjpcIuKAmlwiLHRpdGxlOmUoXCJpY1wiKX0se2NoYXJhY3RlcjpcIuKAnlwiLHRpdGxlOmUoXCJpZFwiKX0se2NoYXJhY3RlcjpcIsKhXCIsdGl0bGU6ZShcImllXCIpfSx7Y2hhcmFjdGVyOlwiwr9cIix0aXRsZTplKFwiaWZcIil9LHtjaGFyYWN0ZXI6XCLigKVcIix0aXRsZTplKFwiaWdcIil9LHtjaGFyYWN0ZXI6XCLigKZcIix0aXRsZTplKFwiaWhcIil9LHtjaGFyYWN0ZXI6XCLigKFcIix0aXRsZTplKFwiaWlcIil9LHtjaGFyYWN0ZXI6XCLigLBcIix0aXRsZTplKFwiaWpcIil9LHtjaGFyYWN0ZXI6XCLigLFcIix0aXRsZTplKFwiaWtcIil9LHtjaGFyYWN0ZXI6XCLigLxcIix0aXRsZTplKFwiaWxcIil9LHtjaGFyYWN0ZXI6XCLigYhcIix0aXRsZTplKFwiaW1cIil9LHtjaGFyYWN0ZXI6XCLigYlcIix0aXRsZTplKFwiaW5cIil9LHtjaGFyYWN0ZXI6XCLigYdcIix0aXRsZTplKFwiaW9cIil9LHtjaGFyYWN0ZXI6XCLCqVwiLHRpdGxlOmUoXCJpcFwiKX0se2NoYXJhY3RlcjpcIsKuXCIsdGl0bGU6ZShcImlxXCIpfSx7Y2hhcmFjdGVyOlwi4oSiXCIsdGl0bGU6ZShcImlyXCIpfSx7Y2hhcmFjdGVyOlwiwqdcIix0aXRsZTplKFwiaXNcIil9LHtjaGFyYWN0ZXI6XCLCtlwiLHRpdGxlOmUoXCJpdFwiKX0se2NoYXJhY3RlcjpcIuKBi1wiLHRpdGxlOmUoXCJpdVwiKX1dKX19Y2xhc3MgQ1AgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2tQLHhQLF9QLHZQLHlQXX19Y29uc3QgQVA9XCJzdHJpa2V0aHJvdWdoXCI7Y2xhc3MgVFAgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlN0cmlrZXRocm91Z2hFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5tb2RlbC5zY2hlbWEuZXh0ZW5kKFwiJHRleHRcIix7YWxsb3dBdHRyaWJ1dGVzOkFQfSk7dC5tb2RlbC5zY2hlbWEuc2V0QXR0cmlidXRlUHJvcGVydGllcyhBUCx7aXNGb3JtYXR0aW5nOnRydWUsY29weU9uRW50ZXI6dHJ1ZX0pO3QuY29udmVyc2lvbi5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOkFQLHZpZXc6XCJzXCIsdXBjYXN0QWxzbzpbXCJkZWxcIixcInN0cmlrZVwiLHtzdHlsZXM6e1widGV4dC1kZWNvcmF0aW9uXCI6XCJsaW5lLXRocm91Z2hcIn19XX0pO3QuY29tbWFuZHMuYWRkKEFQLG5ldyB5ayh0LEFQKSk7dC5rZXlzdHJva2VzLnNldChcIkNUUkwrU0hJRlQrWFwiLFwic3RyaWtldGhyb3VnaFwiKX19dmFyIFBQPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03IDE2LjRjLS44LS40LTEuNS0uOS0yLjItMS41YS42LjYgMCAwIDEtLjItLjVsLjMtLjZoMWMxIDEuMiAyLjEgMS43IDMuNyAxLjcgMSAwIDEuOC0uMyAyLjMtLjYuNi0uNC42LTEuMi42LTEuMy4yLTEuMi0uOS0yLjEtLjktMi4xaDIuMWMuMy43LjQgMS4yLjQgMS43di44bC0uNiAxLjJjLS42LjgtMS4xIDEtMS42IDEuMmE2IDYgMCAwIDEtMi40LjZjLTEgMC0xLjgtLjMtMi41LS42ek02LjggOUw2IDguM2MtLjQtLjUtLjUtLjgtLjUtMS42IDAtLjcuMS0xLjMuNS0xLjguNC0uNiAxLTEgMS42LTEuM2E2LjMgNi4zIDAgMCAxIDQuNyAwIDQgNCAwIDAgMSAxLjcgMWwuMy43YzAgLjEuMi40LS4yLjctLjQuMi0uOS4xLTEgMGEzIDMgMCAwIDAtMS4yLTFjLS40LS4yLTEtLjMtMi0uNC0uNyAwLTEuNC4yLTIgLjYtLjguNi0xIC44LTEgMS41IDAgLjguNSAxIDEuMiAxLjUuNi40IDEuMS43IDEuOSAxSDYuOHpcIi8+PHBhdGggZD1cIk0zIDEwLjVWOWgxNHYxLjV6XCIvPjwvc3ZnPic7Y29uc3QgU1A9XCJzdHJpa2V0aHJvdWdoXCI7Y2xhc3MgRVAgZXh0ZW5kcyBtcHtpbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFNQLGk9Pntjb25zdCBuPXQuY29tbWFuZHMuZ2V0KFNQKTtjb25zdCBvPW5ldyBoYihpKTtvLnNldCh7bGFiZWw6ZShcImprXCIpLGljb246UFAsa2V5c3Ryb2tlOlwiQ1RSTCtTSElGVCtYXCIsdG9vbHRpcDp0cnVlLGlzVG9nZ2xlYWJsZTp0cnVlfSk7by5iaW5kKFwiaXNPblwiLFwiaXNFbmFibGVkXCIpLnRvKG4sXCJ2YWx1ZVwiLFwiaXNFbmFibGVkXCIpO3RoaXMubGlzdGVuVG8obyxcImV4ZWN1dGVcIiwoKT0+e3QuZXhlY3V0ZShTUCk7dC5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiBvfSl9fWNsYXNzIFJQIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltUUCxFUF19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJTdHJpa2V0aHJvdWdoXCJ9fWNvbnN0IE9QPVwic3Vic2NyaXB0XCI7Y2xhc3MgSVAgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlN1YnNjcmlwdEVkaXRpbmdcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjt0Lm1vZGVsLnNjaGVtYS5leHRlbmQoXCIkdGV4dFwiLHthbGxvd0F0dHJpYnV0ZXM6T1B9KTt0Lm1vZGVsLnNjaGVtYS5zZXRBdHRyaWJ1dGVQcm9wZXJ0aWVzKE9QLHtpc0Zvcm1hdHRpbmc6dHJ1ZSxjb3B5T25FbnRlcjp0cnVlfSk7dC5jb252ZXJzaW9uLmF0dHJpYnV0ZVRvRWxlbWVudCh7bW9kZWw6T1AsdmlldzpcInN1YlwiLHVwY2FzdEFsc286W3tzdHlsZXM6e1widmVydGljYWwtYWxpZ25cIjpcInN1YlwifX1dfSk7dC5jb21tYW5kcy5hZGQoT1AsbmV3IHlrKHQsT1ApKX19dmFyIFZQPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03LjAzIDEwLjM0OWwzLjgxOC0zLjgxOWEuOC44IDAgMSAxIDEuMTMyIDEuMTMyTDguMTYgMTEuNDhsMy44MTkgMy44MThhLjguOCAwIDEgMS0xLjEzMiAxLjEzMkw3LjAzIDEyLjYxbC0zLjgxOCAzLjgyYS44LjggMCAxIDEtMS4xMzItMS4xMzJMNS45IDExLjQ4IDIuMDggNy42NjJBLjguOCAwIDEgMSAzLjIxMiA2LjUzbDMuODE4IDMuODJ6bTguMTQ3IDcuODI5aDIuNTQ5Yy4yNTQgMCAuNDQ3LjA1LjU4LjE1MmEuNDkuNDkgMCAwIDEgLjIwMS40MTMuNTQuNTQgMCAwIDEtLjE1OS4zOTNjLS4xMDUuMTA4LS4yNjYuMTYyLS40OC4xNjJoLTMuNTk0Yy0uMjQ1IDAtLjQzNS0uMDY2LS41NzItLjE5N2EuNjIxLjYyMSAwIDAgMS0uMjA1LS40NjNjMC0uMTE0LjA0NC0uMjY1LjEzMi0uNDUzYTEuNjIgMS42MiAwIDAgMSAuMjg4LS40NDRjLjQzMy0uNDM2LjgyNC0uODEgMS4xNzItMS4xMjIuMzQ4LS4zMTIuNTk3LS41MTcuNzQ3LS42MTUuMjY3LS4xODMuNDktLjM2OC42NjctLjU1My4xNzctLjE4NS4zMTItLjM3NS40MDUtLjU3LjA5My0uMTk0LjEzOS0uMzg0LjEzOS0uNTdhMS4wMDggMS4wMDggMCAwIDAtLjU1NC0uOTE3IDEuMTk3IDEuMTk3IDAgMCAwLS41Ni0uMTMzYy0uNDI2IDAtLjc2MS4xODItMS4wMDUuNTQ2YTIuMzMyIDIuMzMyIDAgMCAwLS4xNjQuMzkgMS42MDkgMS42MDkgMCAwIDEtLjI1OC40ODhjLS4wOTYuMTE0LS4yMzcuMTctLjQyMy4xN2EuNTU4LjU1OCAwIDAgMS0uNDA1LS4xNTYuNTY4LjU2OCAwIDAgMS0uMTYxLS40MjdjMC0uMjE4LjA1LS40NDYuMTUxLS42ODMuMTAxLS4yMzguMjUyLS40NTMuNDUyLS42NDZzLjQ1NC0uMzQ5Ljc2Mi0uNDY3YTIuOTk4IDIuOTk4IDAgMCAxIDEuMDgxLS4xNzhjLjQ5OCAwIC45MjMuMDc2IDEuMjc0LjIyOGExLjkxNiAxLjkxNiAwIDAgMSAxLjAwNCAxLjAzMiAxLjk4NCAxLjk4NCAwIDAgMS0uMTU2IDEuNzk0Yy0uMi4zMi0uNDA1LjU3Mi0uNjEzLjc1NC0uMjA4LjE4Mi0uNTU4LjQ2OC0xLjA0OC44NTctLjQ5LjM5LS44MjYuNjkxLTEuMDA4LjkwNmEyLjcwMyAyLjcwMyAwIDAgMC0uMjQuMzA5elwiLz48L3N2Zz4nO2NvbnN0IE5QPVwic3Vic2NyaXB0XCI7Y2xhc3MgTVAgZXh0ZW5kcyBtcHtpbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKE5QLGk9Pntjb25zdCBuPXQuY29tbWFuZHMuZ2V0KE5QKTtjb25zdCBvPW5ldyBoYihpKTtvLnNldCh7bGFiZWw6ZShcImpsXCIpLGljb246VlAsdG9vbHRpcDp0cnVlLGlzVG9nZ2xlYWJsZTp0cnVlfSk7by5iaW5kKFwiaXNPblwiLFwiaXNFbmFibGVkXCIpLnRvKG4sXCJ2YWx1ZVwiLFwiaXNFbmFibGVkXCIpO3RoaXMubGlzdGVuVG8obyxcImV4ZWN1dGVcIiwoKT0+e3QuZXhlY3V0ZShOUCk7dC5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiBvfSl9fWNsYXNzIEJQIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltJUCxNUF19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJTdWJzY3JpcHRcIn19Y29uc3QgelA9XCJzdXBlcnNjcmlwdFwiO2NsYXNzIExQIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJTdXBlcnNjcmlwdEVkaXRpbmdcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjt0Lm1vZGVsLnNjaGVtYS5leHRlbmQoXCIkdGV4dFwiLHthbGxvd0F0dHJpYnV0ZXM6elB9KTt0Lm1vZGVsLnNjaGVtYS5zZXRBdHRyaWJ1dGVQcm9wZXJ0aWVzKHpQLHtpc0Zvcm1hdHRpbmc6dHJ1ZSxjb3B5T25FbnRlcjp0cnVlfSk7dC5jb252ZXJzaW9uLmF0dHJpYnV0ZVRvRWxlbWVudCh7bW9kZWw6elAsdmlldzpcInN1cFwiLHVwY2FzdEFsc286W3tzdHlsZXM6e1widmVydGljYWwtYWxpZ25cIjpcInN1cGVyXCJ9fV19KTt0LmNvbW1hbmRzLmFkZCh6UCxuZXcgeWsodCx6UCkpfX12YXIgRlA9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTE1LjY3NyA4LjY3OGgyLjU0OWMuMjU0IDAgLjQ0Ny4wNS41OC4xNTJhLjQ5LjQ5IDAgMCAxIC4yMDEuNDEzLjU0LjU0IDAgMCAxLS4xNTkuMzkzYy0uMTA1LjEwOC0uMjY2LjE2Mi0uNDguMTYyaC0zLjU5NGMtLjI0NSAwLS40MzUtLjA2Ni0uNTcyLS4xOTdhLjYyMS42MjEgMCAwIDEtLjIwNS0uNDYzYzAtLjExNC4wNDQtLjI2NS4xMzItLjQ1M2ExLjYyIDEuNjIgMCAwIDEgLjI4OC0uNDQ0Yy40MzMtLjQzNi44MjQtLjgxIDEuMTcyLTEuMTIyLjM0OC0uMzEyLjU5Ny0uNTE3Ljc0Ny0uNjE1LjI2Ny0uMTgzLjQ5LS4zNjguNjY3LS41NTMuMTc3LS4xODUuMzEyLS4zNzUuNDA1LS41Ny4wOTMtLjE5NC4xMzktLjM4NC4xMzktLjU3YTEuMDA4IDEuMDA4IDAgMCAwLS41NTQtLjkxNyAxLjE5NyAxLjE5NyAwIDAgMC0uNTYtLjEzM2MtLjQyNiAwLS43NjEuMTgyLTEuMDA1LjU0NmEyLjMzMiAyLjMzMiAwIDAgMC0uMTY0LjM5IDEuNjA5IDEuNjA5IDAgMCAxLS4yNTguNDg4Yy0uMDk2LjExNC0uMjM3LjE3LS40MjMuMTdhLjU1OC41NTggMCAwIDEtLjQwNS0uMTU2LjU2OC41NjggMCAwIDEtLjE2MS0uNDI3YzAtLjIxOC4wNS0uNDQ2LjE1MS0uNjgzLjEwMS0uMjM4LjI1Mi0uNDUzLjQ1Mi0uNjQ2cy40NTQtLjM0OS43NjItLjQ2N2EyLjk5OCAyLjk5OCAwIDAgMSAxLjA4MS0uMTc4Yy40OTggMCAuOTIzLjA3NiAxLjI3NC4yMjhhMS45MTYgMS45MTYgMCAwIDEgMS4wMDQgMS4wMzIgMS45ODQgMS45ODQgMCAwIDEtLjE1NiAxLjc5NGMtLjIuMzItLjQwNS41NzItLjYxMy43NTQtLjIwOC4xODItLjU1OC40NjgtMS4wNDguODU3LS40OS4zOS0uODI2LjY5MS0xLjAwOC45MDZhMi43MDMgMi43MDMgMCAwIDAtLjI0LjMwOXpNNy4wMyAxMC4zNDlsMy44MTgtMy44MTlhLjguOCAwIDEgMSAxLjEzMiAxLjEzMkw4LjE2IDExLjQ4bDMuODE5IDMuODE4YS44LjggMCAxIDEtMS4xMzIgMS4xMzJMNy4wMyAxMi42MWwtMy44MTggMy44MmEuOC44IDAgMSAxLTEuMTMyLTEuMTMyTDUuOSAxMS40OCAyLjA4IDcuNjYyQS44LjggMCAxIDEgMy4yMTIgNi41M2wzLjgxOCAzLjgyelwiLz48L3N2Zz4nO2NvbnN0IERQPVwic3VwZXJzY3JpcHRcIjtjbGFzcyBqUCBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC50O3QudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoRFAsaT0+e2NvbnN0IG49dC5jb21tYW5kcy5nZXQoRFApO2NvbnN0IG89bmV3IGhiKGkpO28uc2V0KHtsYWJlbDplKFwiam1cIiksaWNvbjpGUCx0b29sdGlwOnRydWUsaXNUb2dnbGVhYmxlOnRydWV9KTtvLmJpbmQoXCJpc09uXCIsXCJpc0VuYWJsZWRcIikudG8obixcInZhbHVlXCIsXCJpc0VuYWJsZWRcIik7dGhpcy5saXN0ZW5UbyhvLFwiZXhlY3V0ZVwiLCgpPT57dC5leGVjdXRlKERQKTt0LmVkaXRpbmcudmlldy5mb2N1cygpfSk7cmV0dXJuIG99KX19Y2xhc3MgSFAgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW0xQLGpQXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlN1cGVyc2NyaXB0XCJ9fWZ1bmN0aW9uIFdQKHQsZSl7bGV0IGk9ZS5wYXJlbnQ7d2hpbGUoaSl7aWYoaS5uYW1lPT09dCl7cmV0dXJuIGl9aT1pLnBhcmVudH19ZnVuY3Rpb24gcVAodCxlLGksbixvPTEpe2lmKGU+byl7bi5zZXRBdHRyaWJ1dGUodCxlLGkpfWVsc2V7bi5yZW1vdmVBdHRyaWJ1dGUodCxpKX19ZnVuY3Rpb24gVVAodCxlLGk9e30pe2NvbnN0IG49dC5jcmVhdGVFbGVtZW50KFwidGFibGVDZWxsXCIsaSk7dC5pbnNlcnRFbGVtZW50KFwicGFyYWdyYXBoXCIsbik7dC5pbnNlcnQobixlKX1mdW5jdGlvbiAkUCh0KXtpZighdHx8IWN0KHQpKXtyZXR1cm4gdH1jb25zdHt0b3A6ZSxyaWdodDppLGJvdHRvbTpuLGxlZnQ6b309dDtpZihlPT1pJiZpPT1uJiZuPT1vKXtyZXR1cm4gZX19ZnVuY3Rpb24gR1AodCxlKXtjb25zdCBpPXBhcnNlRmxvYXQodCk7aWYoTnVtYmVyLmlzTmFOKGkpKXtyZXR1cm4gdH1pZihTdHJpbmcoaSkhPT1TdHJpbmcodCkpe3JldHVybiB0fXJldHVybmAke2l9JHtlfWB9ZnVuY3Rpb24gS1AodCxlKXtjb25zdCBpPWUucGFyZW50LnBhcmVudDtjb25zdCBuPXBhcnNlSW50KGkuZ2V0QXR0cmlidXRlKFwiaGVhZGluZ0NvbHVtbnNcIil8fDApO2NvbnN0e2NvbHVtbjpvfT10LmdldENlbGxMb2NhdGlvbihlKTtyZXR1cm4hIW4mJm88bn1mdW5jdGlvbiBKUCgpe3JldHVybiB0PT57dC5vbihcImVsZW1lbnQ6dGFibGVcIiwodCxlLGkpPT57Y29uc3Qgbj1lLnZpZXdJdGVtO2lmKCFpLmNvbnN1bWFibGUudGVzdChuLHtuYW1lOnRydWV9KSl7cmV0dXJufWNvbnN0e3Jvd3M6byxoZWFkaW5nUm93czpyLGhlYWRpbmdDb2x1bW5zOnN9PVFQKG4pO2NvbnN0IGE9e307aWYocyl7YS5oZWFkaW5nQ29sdW1ucz1zfWlmKHIpe2EuaGVhZGluZ1Jvd3M9cn1jb25zdCBjPWkud3JpdGVyLmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLGEpO2NvbnN0IGw9aS5zcGxpdFRvQWxsb3dlZFBhcmVudChjLGUubW9kZWxDdXJzb3IpO2lmKCFsKXtyZXR1cm59aS53cml0ZXIuaW5zZXJ0KGMsbC5wb3NpdGlvbik7aS5jb25zdW1hYmxlLmNvbnN1bWUobix7bmFtZTp0cnVlfSk7aWYoby5sZW5ndGgpe28uZm9yRWFjaCh0PT5pLmNvbnZlcnRJdGVtKHQsaS53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChjLFwiZW5kXCIpKSl9ZWxzZXtjb25zdCB0PWkud3JpdGVyLmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVJvd1wiKTtpLndyaXRlci5pbnNlcnQodCxpLndyaXRlci5jcmVhdGVQb3NpdGlvbkF0KGMsXCJlbmRcIikpO1VQKGkud3JpdGVyLGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQodCxcImVuZFwiKSl9ZS5tb2RlbFJhbmdlPWkud3JpdGVyLmNyZWF0ZVJhbmdlKGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQmVmb3JlKGMpLGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIoYykpO2lmKGwuY3Vyc29yUGFyZW50KXtlLm1vZGVsQ3Vyc29yPWkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQobC5jdXJzb3JQYXJlbnQsMCl9ZWxzZXtlLm1vZGVsQ3Vyc29yPWUubW9kZWxSYW5nZS5lbmR9fSl9fWZ1bmN0aW9uIFlQKHQpe3JldHVybiBlPT57ZS5vbihgZWxlbWVudDoke3R9YCwodCxlLGkpPT57Y29uc3Qgbj1lLnZpZXdJdGVtO2lmKCFpLmNvbnN1bWFibGUudGVzdChuLHtuYW1lOnRydWV9KSl7cmV0dXJufWNvbnN0IG89aS53cml0ZXIuY3JlYXRlRWxlbWVudChcInRhYmxlQ2VsbFwiKTtjb25zdCByPWkuc3BsaXRUb0FsbG93ZWRQYXJlbnQobyxlLm1vZGVsQ3Vyc29yKTtpZighcil7cmV0dXJufWkud3JpdGVyLmluc2VydChvLHIucG9zaXRpb24pO2kuY29uc3VtYWJsZS5jb25zdW1lKG4se25hbWU6dHJ1ZX0pO2NvbnN0IHM9aS53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChvLDApO2kuY29udmVydENoaWxkcmVuKG4scyk7aWYoIW8uY2hpbGRDb3VudCl7aS53cml0ZXIuaW5zZXJ0RWxlbWVudChcInBhcmFncmFwaFwiLHMpfWUubW9kZWxSYW5nZT1pLndyaXRlci5jcmVhdGVSYW5nZShpLndyaXRlci5jcmVhdGVQb3NpdGlvbkJlZm9yZShvKSxpLndyaXRlci5jcmVhdGVQb3NpdGlvbkFmdGVyKG8pKTtlLm1vZGVsQ3Vyc29yPWUubW9kZWxSYW5nZS5lbmR9KX19ZnVuY3Rpb24gUVAodCl7Y29uc3QgZT17aGVhZGluZ1Jvd3M6MCxoZWFkaW5nQ29sdW1uczowfTtjb25zdCBpPVtdO2NvbnN0IG49W107bGV0IG87Zm9yKGNvbnN0IHIgb2YgQXJyYXkuZnJvbSh0LmdldENoaWxkcmVuKCkpKXtpZihyLm5hbWU9PT1cInRib2R5XCJ8fHIubmFtZT09PVwidGhlYWRcInx8ci5uYW1lPT09XCJ0Zm9vdFwiKXtpZihyLm5hbWU9PT1cInRoZWFkXCImJiFvKXtvPXJ9Y29uc3QgdD1BcnJheS5mcm9tKHIuZ2V0Q2hpbGRyZW4oKSkuZmlsdGVyKHQ9PnQuaXMoXCJlbGVtZW50XCIsXCJ0clwiKSk7Zm9yKGNvbnN0IHIgb2YgdCl7aWYoci5wYXJlbnQubmFtZT09PVwidGhlYWRcIiYmci5wYXJlbnQ9PT1vKXtlLmhlYWRpbmdSb3dzKys7aS5wdXNoKHIpfWVsc2V7bi5wdXNoKHIpO2NvbnN0IHQ9WFAocixlLG8pO2lmKHQ+ZS5oZWFkaW5nQ29sdW1ucyl7ZS5oZWFkaW5nQ29sdW1ucz10fX19fX1lLnJvd3M9Wy4uLmksLi4ubl07cmV0dXJuIGV9ZnVuY3Rpb24gWFAodCl7bGV0IGU9MDtsZXQgaT0wO2NvbnN0IG49QXJyYXkuZnJvbSh0LmdldENoaWxkcmVuKCkpLmZpbHRlcih0PT50Lm5hbWU9PT1cInRoXCJ8fHQubmFtZT09PVwidGRcIik7d2hpbGUoaTxuLmxlbmd0aCYmbltpXS5uYW1lPT09XCJ0aFwiKXtjb25zdCB0PW5baV07Y29uc3Qgbz1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcImNvbHNwYW5cIil8fDEpO2U9ZStvO2krK31yZXR1cm4gZX1jbGFzcyBaUHtjb25zdHJ1Y3Rvcih0LGU9e30pe3RoaXMudGFibGU9dDt0aGlzLnN0YXJ0Um93PWUuc3RhcnRSb3d8fDA7dGhpcy5lbmRSb3c9dHlwZW9mIGUuZW5kUm93PT1cIm51bWJlclwiP2UuZW5kUm93OnVuZGVmaW5lZDt0aGlzLmluY2x1ZGVTcGFubmVkPSEhZS5pbmNsdWRlU3Bhbm5lZDt0aGlzLmNvbHVtbj10eXBlb2YgZS5jb2x1bW49PVwibnVtYmVyXCI/ZS5jb2x1bW46dW5kZWZpbmVkO3RoaXMuX3NraXBSb3dzPW5ldyBTZXQ7dGhpcy5fcm93PTA7dGhpcy5fY29sdW1uPTA7dGhpcy5fY2VsbEluZGV4PTA7dGhpcy5fc3Bhbm5lZENlbGxzPW5ldyBNYXA7dGhpcy5fbmV4dENlbGxBdENvbHVtbj0tMX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzfW5leHQoKXtjb25zdCB0PXRoaXMudGFibGUuZ2V0Q2hpbGQodGhpcy5fcm93KTtpZighdHx8dGhpcy5faXNPdmVyRW5kUm93KCkpe3JldHVybntkb25lOnRydWV9fWxldCBlLGksbjtpZih0aGlzLl9pc1NwYW5uZWQodGhpcy5fcm93LHRoaXMuX2NvbHVtbikpe2U9dGhpcy5fZ2V0U3Bhbm5lZCh0aGlzLl9yb3csdGhpcy5fY29sdW1uKTtpPSF0aGlzLmluY2x1ZGVTcGFubmVkfHx0aGlzLl9zaG91bGRTa2lwUm93KCl8fHRoaXMuX3Nob3VsZFNraXBDb2x1bW4oKTtuPXRoaXMuX2Zvcm1hdE91dFZhbHVlKGUsdGhpcy5fY29sdW1uLHRydWUpfWVsc2V7ZT10LmdldENoaWxkKHRoaXMuX2NlbGxJbmRleCk7aWYoIWUpe3RoaXMuX3JvdysrO3RoaXMuX2NvbHVtbj0wO3RoaXMuX2NlbGxJbmRleD0wO3RoaXMuX25leHRDZWxsQXRDb2x1bW49LTE7cmV0dXJuIHRoaXMubmV4dCgpfWNvbnN0IG89cGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIpfHwxKTtjb25zdCByPXBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKFwicm93c3BhblwiKXx8MSk7aWYobz4xfHxyPjEpe3RoaXMuX3JlY29yZFNwYW5zKHRoaXMuX3Jvdyx0aGlzLl9jb2x1bW4scixvLGUpfXRoaXMuX25leHRDZWxsQXRDb2x1bW49dGhpcy5fY29sdW1uK287aT10aGlzLl9zaG91bGRTa2lwUm93KCl8fHRoaXMuX3Nob3VsZFNraXBDb2x1bW4oKTtuPXRoaXMuX2Zvcm1hdE91dFZhbHVlKGUsdGhpcy5fY29sdW1uLGZhbHNlLHIsbyl9dGhpcy5fY29sdW1uKys7aWYodGhpcy5fY29sdW1uPT10aGlzLl9uZXh0Q2VsbEF0Q29sdW1uKXt0aGlzLl9jZWxsSW5kZXgrK31yZXR1cm4gaT90aGlzLm5leHQoKTpufXNraXBSb3codCl7dGhpcy5fc2tpcFJvd3MuYWRkKHQpfV9pc092ZXJFbmRSb3coKXtyZXR1cm4gdGhpcy5lbmRSb3chPT11bmRlZmluZWQmJnRoaXMuX3Jvdz50aGlzLmVuZFJvd31fZm9ybWF0T3V0VmFsdWUodCxlLGksbj0xLG89MSl7cmV0dXJue2RvbmU6ZmFsc2UsdmFsdWU6e2NlbGw6dCxyb3c6dGhpcy5fcm93LGNvbHVtbjplLGlzU3Bhbm5lZDppLHJvd3NwYW46bixjb2xzcGFuOm8sY2VsbEluZGV4OnRoaXMuX2NlbGxJbmRleH19fV9zaG91bGRTa2lwUm93KCl7Y29uc3QgdD10aGlzLl9yb3c8dGhpcy5zdGFydFJvdztjb25zdCBlPXRoaXMuX3NraXBSb3dzLmhhcyh0aGlzLl9yb3cpO3JldHVybiB0fHxlfV9zaG91bGRTa2lwQ29sdW1uKCl7aWYodGhpcy5jb2x1bW49PT11bmRlZmluZWQpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5jb2x1bW4hPXRoaXMuX2NvbHVtbn1faXNTcGFubmVkKHQsZSl7aWYoIXRoaXMuX3NwYW5uZWRDZWxscy5oYXModCkpe3JldHVybiBmYWxzZX1jb25zdCBpPXRoaXMuX3NwYW5uZWRDZWxscy5nZXQodCk7cmV0dXJuIGkuaGFzKGUpfV9nZXRTcGFubmVkKHQsZSl7cmV0dXJuIHRoaXMuX3NwYW5uZWRDZWxscy5nZXQodCkuZ2V0KGUpfV9yZWNvcmRTcGFucyh0LGUsaSxuLG8pe2ZvcihsZXQgaT1lKzE7aTw9ZStuLTE7aSsrKXt0aGlzLl9tYXJrU3Bhbm5lZENlbGwodCxpLG8pfWZvcihsZXQgcj10KzE7cjx0K2k7cisrKXtmb3IobGV0IHQ9ZTt0PD1lK24tMTt0Kyspe3RoaXMuX21hcmtTcGFubmVkQ2VsbChyLHQsbyl9fX1fbWFya1NwYW5uZWRDZWxsKHQsZSxpKXtpZighdGhpcy5fc3Bhbm5lZENlbGxzLmhhcyh0KSl7dGhpcy5fc3Bhbm5lZENlbGxzLnNldCh0LG5ldyBNYXApfWNvbnN0IG49dGhpcy5fc3Bhbm5lZENlbGxzLmdldCh0KTtuLnNldChlLGkpfX1mdW5jdGlvbiB0Uyh0LGUpe2Uuc2V0Q3VzdG9tUHJvcGVydHkoXCJ0YWJsZVwiLHRydWUsdCk7cmV0dXJuIFhfKHQsZSx7aGFzU2VsZWN0aW9uSGFuZGxlOnRydWV9KX1mdW5jdGlvbiBlUyh0KXtyZXR1cm4hIXQuZ2V0Q3VzdG9tUHJvcGVydHkoXCJ0YWJsZVwiKSYmUV8odCl9ZnVuY3Rpb24gaVModCl7Y29uc3QgZT10LmdldFNlbGVjdGVkRWxlbWVudCgpO2lmKGUmJmVTKGUpKXtyZXR1cm4gZX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBuUyh0KXtjb25zdCBlPVdQKFwidGFibGVcIix0LmdldEZpcnN0UG9zaXRpb24oKSk7aWYoZSYmZVMoZS5wYXJlbnQpKXtyZXR1cm4gZS5wYXJlbnR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gb1ModCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgaSBvZiBhUyh0LmdldFJhbmdlcygpKSl7Y29uc3QgdD1pLmdldENvbnRhaW5lZEVsZW1lbnQoKTtpZih0JiZ0LmlzKFwidGFibGVDZWxsXCIpKXtlLnB1c2godCl9fXJldHVybiBlfWZ1bmN0aW9uIHJTKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IGkgb2YgdC5nZXRSYW5nZXMoKSl7Y29uc3QgdD1XUChcInRhYmxlQ2VsbFwiLGkuc3RhcnQpO2lmKHQpe2UucHVzaCh0KX19cmV0dXJuIGV9ZnVuY3Rpb24gc1ModCl7Y29uc3QgZT1vUyh0KTtpZihlLmxlbmd0aCl7cmV0dXJuIGV9cmV0dXJuIHJTKHQpfWZ1bmN0aW9uIGFTKHQpe3JldHVybiBBcnJheS5mcm9tKHQpLnNvcnQoY1MpfWZ1bmN0aW9uIGNTKHQsZSl7Y29uc3QgaT10LnN0YXJ0O2NvbnN0IG49ZS5zdGFydDtpZihpLmlzRXF1YWwobikpe3JldHVybiAwfXJldHVybiBpLmlzQmVmb3JlKG4pPy0xOjF9ZnVuY3Rpb24gbFModD17fSl7cmV0dXJuIGU9PmUub24oXCJpbnNlcnQ6dGFibGVcIiwoZSxpLG4pPT57Y29uc3Qgbz1pLml0ZW07aWYoIW4uY29uc3VtYWJsZS5jb25zdW1lKG8sXCJpbnNlcnRcIikpe3JldHVybn1uLmNvbnN1bWFibGUuY29uc3VtZShvLFwiYXR0cmlidXRlOmhlYWRpbmdSb3dzOnRhYmxlXCIpO24uY29uc3VtYWJsZS5jb25zdW1lKG8sXCJhdHRyaWJ1dGU6aGVhZGluZ0NvbHVtbnM6dGFibGVcIik7Y29uc3Qgcj10JiZ0LmFzV2lkZ2V0O2NvbnN0IHM9bi53cml0ZXIuY3JlYXRlQ29udGFpbmVyRWxlbWVudChcImZpZ3VyZVwiLHtjbGFzczpcInRhYmxlXCJ9KTtjb25zdCBhPW4ud3JpdGVyLmNyZWF0ZUNvbnRhaW5lckVsZW1lbnQoXCJ0YWJsZVwiKTtuLndyaXRlci5pbnNlcnQobi53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChzLDApLGEpO2xldCBjO2lmKHIpe2M9dFMocyxuLndyaXRlcil9Y29uc3QgbD1uZXcgWlAobyk7Y29uc3QgZD17aGVhZGluZ1Jvd3M6by5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiKXx8MCxoZWFkaW5nQ29sdW1uczpvLmdldEF0dHJpYnV0ZShcImhlYWRpbmdDb2x1bW5zXCIpfHwwfTtjb25zdCB1PW5ldyBNYXA7Zm9yKGNvbnN0IGUgb2YgbCl7Y29uc3R7cm93OmksY2VsbDpyfT1lO2NvbnN0IHM9dlMoX1MoaSxkKSxhLG4pO2NvbnN0IGM9by5nZXRDaGlsZChpKTtjb25zdCBsPXUuZ2V0KGkpfHx3UyhjLGkscyxuKTt1LnNldChpLGwpO24uY29uc3VtYWJsZS5jb25zdW1lKHIsXCJpbnNlcnRcIik7Y29uc3QgaD1uLndyaXRlci5jcmVhdGVQb3NpdGlvbkF0KGwsXCJlbmRcIik7YlMoZSxkLGgsbix0KX1jb25zdCBoPW4ubWFwcGVyLnRvVmlld1Bvc2l0aW9uKGkucmFuZ2Uuc3RhcnQpO24ubWFwcGVyLmJpbmRFbGVtZW50cyhvLHI/YzpzKTtuLndyaXRlci5pbnNlcnQoaCxyP2M6cyl9KX1mdW5jdGlvbiBkUyh0PXt9KXtyZXR1cm4gZT0+ZS5vbihcImluc2VydDp0YWJsZVJvd1wiLChlLGksbik9Pntjb25zdCBvPWkuaXRlbTtpZighbi5jb25zdW1hYmxlLmNvbnN1bWUobyxcImluc2VydFwiKSl7cmV0dXJufWNvbnN0IHI9by5wYXJlbnQ7Y29uc3Qgcz1uLm1hcHBlci50b1ZpZXdFbGVtZW50KHIpO2NvbnN0IGE9VFMocyk7Y29uc3QgYz1yLmdldENoaWxkSW5kZXgobyk7Y29uc3QgbD1uZXcgWlAocix7c3RhcnRSb3c6YyxlbmRSb3c6Y30pO2NvbnN0IGQ9e2hlYWRpbmdSb3dzOnIuZ2V0QXR0cmlidXRlKFwiaGVhZGluZ1Jvd3NcIil8fDAsaGVhZGluZ0NvbHVtbnM6ci5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nQ29sdW1uc1wiKXx8MH07Y29uc3QgdT1uZXcgTWFwO2Zvcihjb25zdCBlIG9mIGwpe2NvbnN0IGk9dlMoX1MoYyxkKSxhLG4pO2NvbnN0IHI9dS5nZXQoYyl8fHdTKG8sYyxpLG4pO3Uuc2V0KGMscik7bi5jb25zdW1hYmxlLmNvbnN1bWUoZS5jZWxsLFwiaW5zZXJ0XCIpO2NvbnN0IHM9bi53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChyLFwiZW5kXCIpO2JTKGUsZCxzLG4sdCl9fSl9ZnVuY3Rpb24gdVModD17fSl7cmV0dXJuIGU9PmUub24oXCJpbnNlcnQ6dGFibGVDZWxsXCIsKGUsaSxuKT0+e2NvbnN0IG89aS5pdGVtO2lmKCFuLmNvbnN1bWFibGUuY29uc3VtZShvLFwiaW5zZXJ0XCIpKXtyZXR1cm59Y29uc3Qgcj1vLnBhcmVudDtjb25zdCBzPXIucGFyZW50O2NvbnN0IGE9cy5nZXRDaGlsZEluZGV4KHIpO2NvbnN0IGM9bmV3IFpQKHMse3N0YXJ0Um93OmEsZW5kUm93OmF9KTtjb25zdCBsPXtoZWFkaW5nUm93czpzLmdldEF0dHJpYnV0ZShcImhlYWRpbmdSb3dzXCIpfHwwLGhlYWRpbmdDb2x1bW5zOnMuZ2V0QXR0cmlidXRlKFwiaGVhZGluZ0NvbHVtbnNcIil8fDB9O2Zvcihjb25zdCBlIG9mIGMpe2lmKGUuY2VsbD09PW8pe2NvbnN0IGk9bi5tYXBwZXIudG9WaWV3RWxlbWVudChyKTtjb25zdCBzPW4ud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoaSxyLmdldENoaWxkSW5kZXgobykpO2JTKGUsbCxzLG4sdCk7cmV0dXJufX19KX1mdW5jdGlvbiBoUyh0PXt9KXtjb25zdCBlPSEhdC5hc1dpZGdldDtyZXR1cm4gdD0+dC5vbihcImF0dHJpYnV0ZTpoZWFkaW5nUm93czp0YWJsZVwiLCh0LGksbik9Pntjb25zdCBvPWkuaXRlbTtpZighbi5jb25zdW1hYmxlLmNvbnN1bWUoaS5pdGVtLHQubmFtZSkpe3JldHVybn1jb25zdCByPW4ubWFwcGVyLnRvVmlld0VsZW1lbnQobyk7Y29uc3Qgcz1UUyhyKTtjb25zdCBhPWkuYXR0cmlidXRlT2xkVmFsdWU7Y29uc3QgYz1pLmF0dHJpYnV0ZU5ld1ZhbHVlO2lmKGM+YSl7Y29uc3QgdD1BcnJheS5mcm9tKG8uZ2V0Q2hpbGRyZW4oKSkuZmlsdGVyKCh7aW5kZXg6dH0pPT5sKHQsYS0xLGMpKTtjb25zdCBpPXZTKFwidGhlYWRcIixzLG4pO0FTKHQsaSxuLFwiZW5kXCIpO2Zvcihjb25zdCBpIG9mIHQpe2Zvcihjb25zdCB0IG9mIGkuZ2V0Q2hpbGRyZW4oKSl7bVModCxcInRoXCIsbixlKX19Q1MoXCJ0Ym9keVwiLHMsbil9ZWxzZXtjb25zdCB0PUFycmF5LmZyb20oby5nZXRDaGlsZHJlbigpKS5maWx0ZXIoKHtpbmRleDp0fSk9PmwodCxjLTEsYSkpLnJldmVyc2UoKTtjb25zdCBpPXZTKFwidGJvZHlcIixzLG4pO0FTKHQsaSxuLDApO2NvbnN0IHI9bmV3IFpQKG8se3N0YXJ0Um93OmM/Yy0xOmMsZW5kUm93OmEtMX0pO2NvbnN0IGQ9e2hlYWRpbmdSb3dzOm8uZ2V0QXR0cmlidXRlKFwiaGVhZGluZ1Jvd3NcIil8fDAsaGVhZGluZ0NvbHVtbnM6by5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nQ29sdW1uc1wiKXx8MH07Zm9yKGNvbnN0IHQgb2Ygcil7cFModCxkLG4sZSl9Q1MoXCJ0aGVhZFwiLHMsbil9ZnVuY3Rpb24gbCh0LGUsaSl7cmV0dXJuIHQ+ZSYmdDxpfX0pfWZ1bmN0aW9uIGZTKHQ9e30pe2NvbnN0IGU9ISF0LmFzV2lkZ2V0O3JldHVybiB0PT50Lm9uKFwiYXR0cmlidXRlOmhlYWRpbmdDb2x1bW5zOnRhYmxlXCIsKHQsaSxuKT0+e2NvbnN0IG89aS5pdGVtO2lmKCFuLmNvbnN1bWFibGUuY29uc3VtZShpLml0ZW0sdC5uYW1lKSl7cmV0dXJufWNvbnN0IHI9e2hlYWRpbmdSb3dzOm8uZ2V0QXR0cmlidXRlKFwiaGVhZGluZ1Jvd3NcIil8fDAsaGVhZGluZ0NvbHVtbnM6by5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nQ29sdW1uc1wiKXx8MH07Y29uc3Qgcz1pLmF0dHJpYnV0ZU9sZFZhbHVlO2NvbnN0IGE9aS5hdHRyaWJ1dGVOZXdWYWx1ZTtjb25zdCBjPShzPmE/czphKS0xO2Zvcihjb25zdCB0IG9mIG5ldyBaUChvKSl7aWYodC5jb2x1bW4+Yyl7Y29udGludWV9cFModCxyLG4sZSl9fSl9ZnVuY3Rpb24gZ1MoKXtyZXR1cm4gdD0+dC5vbihcInJlbW92ZTp0YWJsZVJvd1wiLCh0LGUsaSk9Pnt0LnN0b3AoKTtjb25zdCBuPWkud3JpdGVyO2NvbnN0IG89aS5tYXBwZXI7Y29uc3Qgcj1vLnRvVmlld1Bvc2l0aW9uKGUucG9zaXRpb24pLmdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKHQ9PiF0Lml0ZW0uaXMoXCJ0clwiKSk7Y29uc3Qgcz1yLm5vZGVBZnRlcjtjb25zdCBhPXMucGFyZW50O2NvbnN0IGM9bi5jcmVhdGVSYW5nZU9uKHMpO2NvbnN0IGw9bi5yZW1vdmUoYyk7Zm9yKGNvbnN0IHQgb2Ygbi5jcmVhdGVSYW5nZUluKGwpLmdldEl0ZW1zKCkpe28udW5iaW5kVmlld0VsZW1lbnQodCl9aWYoIWEuY2hpbGRDb3VudCl7bi5yZW1vdmUobi5jcmVhdGVSYW5nZU9uKGEpKX19LHtwcmlvcml0eTpcImhpZ2hlclwifSl9ZnVuY3Rpb24gbVModCxlLGksbil7Y29uc3Qgbz1pLndyaXRlcjtjb25zdCByPWkubWFwcGVyLnRvVmlld0VsZW1lbnQodCk7aWYoIXIpe3JldHVybn1sZXQgcztpZihuKXtjb25zdCB0PW8uY3JlYXRlRWRpdGFibGVFbGVtZW50KGUsci5nZXRBdHRyaWJ1dGVzKCkpO3M9aXYodCxvKTtvLmluc2VydChvLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIocikscyk7by5tb3ZlKG8uY3JlYXRlUmFuZ2VJbihyKSxvLmNyZWF0ZVBvc2l0aW9uQXQocywwKSk7by5yZW1vdmUoby5jcmVhdGVSYW5nZU9uKHIpKX1lbHNle3M9by5yZW5hbWUoZSxyKX1pLm1hcHBlci51bmJpbmRWaWV3RWxlbWVudChyKTtpLm1hcHBlci5iaW5kRWxlbWVudHModCxzKX1mdW5jdGlvbiBwUyh0LGUsaSxuKXtjb25zdHtjZWxsOm99PXQ7Y29uc3Qgcj1rUyh0LGUpO2NvbnN0IHM9aS5tYXBwZXIudG9WaWV3RWxlbWVudChvKTtpZihzJiZzLm5hbWUhPT1yKXttUyhvLHIsaSxuKX19ZnVuY3Rpb24gYlModCxlLGksbixvKXtjb25zdCByPW8mJm8uYXNXaWRnZXQ7Y29uc3Qgcz1rUyh0LGUpO2NvbnN0IGE9cj9pdihuLndyaXRlci5jcmVhdGVFZGl0YWJsZUVsZW1lbnQocyksbi53cml0ZXIpOm4ud3JpdGVyLmNyZWF0ZUNvbnRhaW5lckVsZW1lbnQocyk7Y29uc3QgYz10LmNlbGw7Y29uc3QgbD1jLmdldENoaWxkKDApO2NvbnN0IGQ9Yy5jaGlsZENvdW50PT09MSYmbC5uYW1lPT09XCJwYXJhZ3JhcGhcIjtuLndyaXRlci5pbnNlcnQoaSxhKTtpZihkJiYhUFMobCkpe2NvbnN0IHQ9Yy5nZXRDaGlsZCgwKTtjb25zdCBlPW4ud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoYSxcImVuZFwiKTtuLmNvbnN1bWFibGUuY29uc3VtZSh0LFwiaW5zZXJ0XCIpO2lmKG8uYXNXaWRnZXQpe2NvbnN0IGk9bi53cml0ZXIuY3JlYXRlQ29udGFpbmVyRWxlbWVudChcInNwYW5cIix7c3R5bGU6XCJkaXNwbGF5OmlubGluZS1ibG9ja1wifSk7bi5tYXBwZXIuYmluZEVsZW1lbnRzKHQsaSk7bi53cml0ZXIuaW5zZXJ0KGUsaSk7bi5tYXBwZXIuYmluZEVsZW1lbnRzKGMsYSl9ZWxzZXtuLm1hcHBlci5iaW5kRWxlbWVudHMoYyxhKTtuLm1hcHBlci5iaW5kRWxlbWVudHModCxhKX19ZWxzZXtuLm1hcHBlci5iaW5kRWxlbWVudHMoYyxhKX19ZnVuY3Rpb24gd1ModCxlLGksbil7bi5jb25zdW1hYmxlLmNvbnN1bWUodCxcImluc2VydFwiKTtjb25zdCBvPW4ud3JpdGVyLmNyZWF0ZUNvbnRhaW5lckVsZW1lbnQoXCJ0clwiKTtuLm1hcHBlci5iaW5kRWxlbWVudHModCxvKTtjb25zdCByPXQucGFyZW50LmdldEF0dHJpYnV0ZShcImhlYWRpbmdSb3dzXCIpfHwwO2NvbnN0IHM9cj4wJiZlPj1yP2UtcjplO2NvbnN0IGE9bi53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChpLHMpO24ud3JpdGVyLmluc2VydChhLG8pO3JldHVybiBvfWZ1bmN0aW9uIGtTKHQsZSl7Y29uc3R7cm93OmksY29sdW1uOm59PXQ7Y29uc3R7aGVhZGluZ0NvbHVtbnM6byxoZWFkaW5nUm93czpyfT1lO2NvbnN0IHM9ciYmcj5pO2lmKHMpe3JldHVyblwidGhcIn1jb25zdCBhPW8mJm8+bjtyZXR1cm4gYT9cInRoXCI6XCJ0ZFwifWZ1bmN0aW9uIF9TKHQsZSl7cmV0dXJuIHQ8ZS5oZWFkaW5nUm93cz9cInRoZWFkXCI6XCJ0Ym9keVwifWZ1bmN0aW9uIHZTKHQsZSxpKXtjb25zdCBuPXlTKHQsZSk7cmV0dXJuIG4/bjp4Uyh0LGUsaSl9ZnVuY3Rpb24geVModCxlKXtmb3IoY29uc3QgaSBvZiBlLmdldENoaWxkcmVuKCkpe2lmKGkubmFtZT09dCl7cmV0dXJuIGl9fX1mdW5jdGlvbiB4Uyh0LGUsaSl7Y29uc3Qgbj1pLndyaXRlci5jcmVhdGVDb250YWluZXJFbGVtZW50KHQpO2NvbnN0IG89aS53cml0ZXIuY3JlYXRlUG9zaXRpb25BdChlLHQ9PVwidGJvZHlcIj9cImVuZFwiOjApO2kud3JpdGVyLmluc2VydChvLG4pO3JldHVybiBufWZ1bmN0aW9uIENTKHQsZSxpKXtjb25zdCBuPXlTKHQsZSk7aWYobiYmbi5jaGlsZENvdW50PT09MCl7aS53cml0ZXIucmVtb3ZlKGkud3JpdGVyLmNyZWF0ZVJhbmdlT24obikpfX1mdW5jdGlvbiBBUyh0LGUsaSxuKXtmb3IoY29uc3QgbyBvZiB0KXtjb25zdCB0PWkubWFwcGVyLnRvVmlld0VsZW1lbnQobyk7aWYodCl7aS53cml0ZXIubW92ZShpLndyaXRlci5jcmVhdGVSYW5nZU9uKHQpLGkud3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoZSxuKSl9fX1mdW5jdGlvbiBUUyh0KXtmb3IoY29uc3QgZSBvZiB0LmdldENoaWxkcmVuKCkpe2lmKGUubmFtZT09PVwidGFibGVcIil7cmV0dXJuIGV9fX1mdW5jdGlvbiBQUyh0KXtyZXR1cm4hIVsuLi50LmdldEF0dHJpYnV0ZUtleXMoKV0ubGVuZ3RofWNsYXNzIFNTIGV4dGVuZHMgand7cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50LnNlbGVjdGlvbjtjb25zdCBpPXQuc2NoZW1hO2NvbnN0IG49RVMoZS5nZXRGaXJzdFBvc2l0aW9uKCkpO3RoaXMuaXNFbmFibGVkPWkuY2hlY2tDaGlsZChuLFwidGFibGVcIil9ZXhlY3V0ZSh0PXt9KXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IGk9ZS5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3Qgbj10aGlzLmVkaXRvci5wbHVnaW5zLmdldChcIlRhYmxlVXRpbHNcIik7Y29uc3Qgbz1wYXJzZUludCh0LnJvd3MpfHwyO2NvbnN0IHI9cGFyc2VJbnQodC5jb2x1bW5zKXx8Mjtjb25zdCBzPW52KGksZSk7ZS5jaGFuZ2UodD0+e2NvbnN0IGk9bi5jcmVhdGVUYWJsZSh0LG8scik7ZS5pbnNlcnRDb250ZW50KGkscyk7dC5zZXRTZWxlY3Rpb24odC5jcmVhdGVQb3NpdGlvbkF0KGkuZ2V0Tm9kZUJ5UGF0aChbMCwwLDBdKSwwKSl9KX19ZnVuY3Rpb24gRVModCl7Y29uc3QgZT10LnBhcmVudDtyZXR1cm4gZT09PWUucm9vdD9lOmUucGFyZW50fWNsYXNzIFJTIGV4dGVuZHMgand7Y29uc3RydWN0b3IodCxlPXt9KXtzdXBlcih0KTt0aGlzLm9yZGVyPWUub3JkZXJ8fFwiYmVsb3dcIn1yZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3QgZT1XUChcInRhYmxlXCIsdC5nZXRGaXJzdFBvc2l0aW9uKCkpO3RoaXMuaXNFbmFibGVkPSEhZX1leGVjdXRlKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IGk9dC5wbHVnaW5zLmdldChcIlRhYmxlVXRpbHNcIik7Y29uc3Qgbj10aGlzLm9yZGVyPT09XCJhYm92ZVwiO2NvbnN0IG89bj9lLmdldEZpcnN0UG9zaXRpb24oKTplLmdldExhc3RQb3NpdGlvbigpO2NvbnN0IHI9bj9lLmdldEZpcnN0UmFuZ2UoKTplLmdldExhc3RSYW5nZSgpO2NvbnN0IHM9ci5nZXRDb250YWluZWRFbGVtZW50KCl8fFdQKFwidGFibGVDZWxsXCIsbyk7Y29uc3QgYT1zLnBhcmVudDtjb25zdCBjPWEucGFyZW50O2NvbnN0IGw9Yy5nZXRDaGlsZEluZGV4KGEpO2kuaW5zZXJ0Um93cyhjLHtyb3dzOjEsYXQ6dGhpcy5vcmRlcj09PVwiYmVsb3dcIj9sKzE6bH0pfX1jbGFzcyBPUyBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZT17fSl7c3VwZXIodCk7dGhpcy5vcmRlcj1lLm9yZGVyfHxcInJpZ2h0XCJ9cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IGU9V1AoXCJ0YWJsZVwiLHQuZ2V0Rmlyc3RQb3NpdGlvbigpKTt0aGlzLmlzRW5hYmxlZD0hIWV9ZXhlY3V0ZSgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10Lm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjtjb25zdCBpPXQucGx1Z2lucy5nZXQoXCJUYWJsZVV0aWxzXCIpO2NvbnN0IG49dGhpcy5vcmRlcj09PVwibGVmdFwiO2NvbnN0IG89bj9lLmdldEZpcnN0UG9zaXRpb24oKTplLmdldExhc3RQb3NpdGlvbigpO2NvbnN0IHI9bj9lLmdldEZpcnN0UmFuZ2UoKTplLmdldExhc3RSYW5nZSgpO2NvbnN0IHM9ci5nZXRDb250YWluZWRFbGVtZW50KCl8fFdQKFwidGFibGVDZWxsXCIsbyk7Y29uc3QgYT1zLnBhcmVudC5wYXJlbnQ7Y29uc3R7Y29sdW1uOmN9PWkuZ2V0Q2VsbExvY2F0aW9uKHMpO2kuaW5zZXJ0Q29sdW1ucyhhLHtjb2x1bW5zOjEsYXQ6bj9jOmMrMX0pfX1jbGFzcyBJUyBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZT17fSl7c3VwZXIodCk7dGhpcy5kaXJlY3Rpb249ZS5kaXJlY3Rpb258fFwiaG9yaXpvbnRhbGx5XCJ9cmVmcmVzaCgpe2NvbnN0IHQ9c1ModGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uKTt0aGlzLmlzRW5hYmxlZD10Lmxlbmd0aD09PTF9ZXhlY3V0ZSgpe2NvbnN0IHQ9c1ModGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uKVswXTtjb25zdCBlPXRoaXMuZGlyZWN0aW9uPT09XCJob3Jpem9udGFsbHlcIjtjb25zdCBpPXRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KFwiVGFibGVVdGlsc1wiKTtpZihlKXtpLnNwbGl0Q2VsbEhvcml6b250YWxseSh0LDIpfWVsc2V7aS5zcGxpdENlbGxWZXJ0aWNhbGx5KHQsMil9fX1jbGFzcyBWUyBleHRlbmRzIGp3e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7dGhpcy5kaXJlY3Rpb249ZS5kaXJlY3Rpb247dGhpcy5pc0hvcml6b250YWw9dGhpcy5kaXJlY3Rpb249PVwicmlnaHRcInx8dGhpcy5kaXJlY3Rpb249PVwibGVmdFwifXJlZnJlc2goKXtjb25zdCB0PXRoaXMuX2dldE1lcmdlYWJsZUNlbGwoKTt0aGlzLnZhbHVlPXQ7dGhpcy5pc0VuYWJsZWQ9ISF0fWV4ZWN1dGUoKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IGU9dC5kb2N1bWVudDtjb25zdCBpPXJTKGUuc2VsZWN0aW9uKVswXTtjb25zdCBuPXRoaXMudmFsdWU7Y29uc3Qgbz10aGlzLmRpcmVjdGlvbjt0LmNoYW5nZSh0PT57Y29uc3QgZT1vPT1cInJpZ2h0XCJ8fG89PVwiZG93blwiO2NvbnN0IHI9ZT9pOm47Y29uc3Qgcz1lP246aTtjb25zdCBhPXMucGFyZW50O3pTKHMscix0KTtjb25zdCBjPXRoaXMuaXNIb3Jpem9udGFsP1wiY29sc3BhblwiOlwicm93c3BhblwiO2NvbnN0IGw9cGFyc2VJbnQoaS5nZXRBdHRyaWJ1dGUoYyl8fDEpO2NvbnN0IGQ9cGFyc2VJbnQobi5nZXRBdHRyaWJ1dGUoYyl8fDEpO3Quc2V0QXR0cmlidXRlKGMsbCtkLHIpO3Quc2V0U2VsZWN0aW9uKHQuY3JlYXRlUmFuZ2VJbihyKSk7aWYoIWEuY2hpbGRDb3VudCl7QlMoYSx0KX19KX1fZ2V0TWVyZ2VhYmxlQ2VsbCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50O2NvbnN0IGk9clMoZS5zZWxlY3Rpb24pWzBdO2lmKCFpKXtyZXR1cm59Y29uc3Qgbj10aGlzLmVkaXRvci5wbHVnaW5zLmdldChcIlRhYmxlVXRpbHNcIik7Y29uc3Qgbz10aGlzLmlzSG9yaXpvbnRhbD9OUyhpLHRoaXMuZGlyZWN0aW9uLG4pOk1TKGksdGhpcy5kaXJlY3Rpb24pO2lmKCFvKXtyZXR1cm59Y29uc3Qgcj10aGlzLmlzSG9yaXpvbnRhbD9cInJvd3NwYW5cIjpcImNvbHNwYW5cIjtjb25zdCBzPXBhcnNlSW50KGkuZ2V0QXR0cmlidXRlKHIpfHwxKTtjb25zdCBhPXBhcnNlSW50KG8uZ2V0QXR0cmlidXRlKHIpfHwxKTtpZihhPT09cyl7cmV0dXJuIG99fX1mdW5jdGlvbiBOUyh0LGUsaSl7Y29uc3Qgbj10LnBhcmVudDtjb25zdCBvPW4ucGFyZW50O2NvbnN0IHI9ZT09XCJyaWdodFwiP3QubmV4dFNpYmxpbmc6dC5wcmV2aW91c1NpYmxpbmc7Y29uc3Qgcz0oby5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nQ29sdW1uc1wiKXx8MCk+MDtpZighcil7cmV0dXJufWNvbnN0IGE9ZT09XCJyaWdodFwiP3Q6cjtjb25zdCBjPWU9PVwicmlnaHRcIj9yOnQ7Y29uc3R7Y29sdW1uOmx9PWkuZ2V0Q2VsbExvY2F0aW9uKGEpO2NvbnN0e2NvbHVtbjpkfT1pLmdldENlbGxMb2NhdGlvbihjKTtjb25zdCB1PXBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKXx8MSk7Y29uc3QgaD1LUChpLGEsbyk7Y29uc3QgZj1LUChpLGMsbyk7aWYocyYmaCE9Zil7cmV0dXJufWNvbnN0IGc9bCt1PT09ZDtyZXR1cm4gZz9yOnVuZGVmaW5lZH1mdW5jdGlvbiBNUyh0LGUpe2NvbnN0IGk9dC5wYXJlbnQ7Y29uc3Qgbj1pLnBhcmVudDtjb25zdCBvPW4uZ2V0Q2hpbGRJbmRleChpKTtpZihlPT1cImRvd25cIiYmbz09PW4uY2hpbGRDb3VudC0xfHxlPT1cInVwXCImJm89PT0wKXtyZXR1cm59Y29uc3Qgcj1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInJvd3NwYW5cIil8fDEpO2NvbnN0IHM9bi5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiKXx8MDtjb25zdCBhPWU9PVwiZG93blwiJiZvK3I9PT1zO2NvbnN0IGM9ZT09XCJ1cFwiJiZvPT09cztpZihzJiYoYXx8Yykpe3JldHVybn1jb25zdCBsPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwicm93c3BhblwiKXx8MSk7Y29uc3QgZD1lPT1cImRvd25cIj9vK2w6bztjb25zdCB1PVsuLi5uZXcgWlAobix7ZW5kUm93OmR9KV07Y29uc3QgaD11LmZpbmQoZT0+ZS5jZWxsPT09dCk7Y29uc3QgZj1oLmNvbHVtbjtjb25zdCBnPXUuZmluZCgoe3Jvdzp0LHJvd3NwYW46aSxjb2x1bW46bn0pPT57aWYobiE9PWYpe3JldHVybiBmYWxzZX1pZihlPT1cImRvd25cIil7cmV0dXJuIHQ9PT1kfWVsc2V7cmV0dXJuIGQ9PT10K2l9fSk7cmV0dXJuIGcmJmcuY2VsbH1mdW5jdGlvbiBCUyh0LGUpe2NvbnN0IGk9dC5wYXJlbnQ7Y29uc3Qgbj1pLmdldENoaWxkSW5kZXgodCk7Zm9yKGNvbnN0e2NlbGw6dCxyb3c6byxyb3dzcGFuOnJ9b2YgbmV3IFpQKGkse2VuZFJvdzpufSkpe2NvbnN0IGk9bytyLTE+PW47aWYoaSl7cVAoXCJyb3dzcGFuXCIsci0xLHQsZSl9fWUucmVtb3ZlKHQpfWZ1bmN0aW9uIHpTKHQsZSxpKXtpZighTFModCkpe2lmKExTKGUpKXtpLnJlbW92ZShpLmNyZWF0ZVJhbmdlSW4oZSkpfWkubW92ZShpLmNyZWF0ZVJhbmdlSW4odCksaS5jcmVhdGVQb3NpdGlvbkF0KGUsXCJlbmRcIikpfWkucmVtb3ZlKHQpfWZ1bmN0aW9uIExTKHQpe3JldHVybiB0LmNoaWxkQ291bnQ9PTEmJnQuZ2V0Q2hpbGQoMCkuaXMoXCJwYXJhZ3JhcGhcIikmJnQuZ2V0Q2hpbGQoMCkuaXNFbXB0eX1jbGFzcyBGUyBleHRlbmRzIGp3e3JlZnJlc2goKXtjb25zdCB0PXNTKHRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbik7Y29uc3QgZT10WzBdO2lmKGUpe2NvbnN0IGk9ZS5wYXJlbnQucGFyZW50O2NvbnN0IG49dGhpcy5lZGl0b3IucGx1Z2lucy5nZXQoXCJUYWJsZVV0aWxzXCIpLmdldFJvd3MoaSk7Y29uc3Qgbz1bLi4ubmV3IFpQKGkpXTtjb25zdCByPW8uZmlsdGVyKGU9PnQuaW5jbHVkZXMoZS5jZWxsKSkubWFwKHQ9PnQucm93KTtjb25zdCBzPXJbMF07Y29uc3QgYT1yW3IubGVuZ3RoLTFdO3RoaXMuaXNFbmFibGVkPWEtczxuLTF9ZWxzZXt0aGlzLmlzRW5hYmxlZD1mYWxzZX19ZXhlY3V0ZSgpe2NvbnN0IHQ9c1ModGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uKTtjb25zdCBlPURTKHQpO2NvbnN0IGk9dFswXTtjb25zdCBuPWkucGFyZW50LnBhcmVudDtjb25zdCBvPVsuLi5uZXcgWlAobix7ZW5kUm93OmUubGFzdH0pXTtjb25zdCByPXRoaXMuZWRpdG9yLm1vZGVsLmNyZWF0ZUJhdGNoKCk7Y29uc3Qgcz1IUyhvLGkpO3RoaXMuZWRpdG9yLm1vZGVsLmVucXVldWVDaGFuZ2Uocix0PT57dC5zZXRTZWxlY3Rpb24odC5jcmVhdGVTZWxlY3Rpb24obixcIm9uXCIpKX0pO2xldCBhO2ZvcihsZXQgdD1lLmxhc3Q7dD49ZS5maXJzdDt0LS0pe3RoaXMuZWRpdG9yLm1vZGVsLmVucXVldWVDaGFuZ2UocixlPT57Y29uc3QgaT10O3RoaXMuX3JlbW92ZVJvdyhpLG4sZSxvKTthPWpTKG4saSxzKX0pfXRoaXMuZWRpdG9yLm1vZGVsLmVucXVldWVDaGFuZ2Uocix0PT57dC5zZXRTZWxlY3Rpb24odC5jcmVhdGVQb3NpdGlvbkF0KGEsMCkpfSl9X3JlbW92ZVJvdyh0LGUsaSxuKXtjb25zdCBvPW5ldyBNYXA7Y29uc3Qgcj1lLmdldENoaWxkKHQpO2NvbnN0IHM9ZS5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiKXx8MDtpZihzJiZ0PHMpe3FQKFwiaGVhZGluZ1Jvd3NcIixzLTEsZSxpLDApfW4uZmlsdGVyKCh7cm93OmUscm93c3BhbjppfSk9PmU9PT10JiZpPjEpLmZvckVhY2goKHtjb2x1bW46dCxjZWxsOmUscm93c3BhbjppfSk9Pm8uc2V0KHQse2NlbGw6ZSxyb3dzcGFuVG9TZXQ6aS0xfSkpO24uZmlsdGVyKCh7cm93OmUscm93c3BhbjppfSk9PmU8PXQtMSYmZStpPnQpLmZvckVhY2goKHtjZWxsOnQscm93c3BhbjplfSk9PnFQKFwicm93c3BhblwiLGUtMSx0LGkpKTtjb25zdCBhPXQrMTtjb25zdCBjPW5ldyBaUChlLHtpbmNsdWRlU3Bhbm5lZDp0cnVlLHN0YXJ0Um93OmEsZW5kUm93OmF9KTtsZXQgbDtmb3IoY29uc3R7cm93OnQsY29sdW1uOm4sY2VsbDpyfW9mWy4uLmNdKXtpZihvLmhhcyhuKSl7Y29uc3R7Y2VsbDpyLHJvd3NwYW5Ub1NldDpzfT1vLmdldChuKTtjb25zdCBhPWw/aS5jcmVhdGVQb3NpdGlvbkFmdGVyKGwpOmkuY3JlYXRlUG9zaXRpb25BdChlLmdldENoaWxkKHQpLDApO2kubW92ZShpLmNyZWF0ZVJhbmdlT24ociksYSk7cVAoXCJyb3dzcGFuXCIscyxyLGkpO2w9cn1lbHNle2w9cn19aS5yZW1vdmUocil9fWZ1bmN0aW9uIERTKHQpe2NvbnN0IGU9dC5tYXAodD0+dC5wYXJlbnQuaW5kZXgpLnNvcnQoKTtyZXR1cm57Zmlyc3Q6ZVswXSxsYXN0OmVbZS5sZW5ndGgtMV19fWZ1bmN0aW9uIGpTKHQsZSxpKXtjb25zdCBuPXQuZ2V0Q2hpbGQoZSl8fHQuZ2V0Q2hpbGQodC5jaGlsZENvdW50LTEpO2xldCBvPW4uZ2V0Q2hpbGQoMCk7bGV0IHI9MDtmb3IoY29uc3QgdCBvZiBuLmdldENoaWxkcmVuKCkpe2lmKHI+aSl7cmV0dXJuIG99bz10O3IrPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKXx8MSl9cmV0dXJuIG99ZnVuY3Rpb24gSFModCxlKXtjb25zdCBpPXQuZmluZCh0PT50LmNlbGw9PT1lKTtyZXR1cm4gaS5jb2x1bW59Y2xhc3MgV1MgZXh0ZW5kcyBqd3tyZWZyZXNoKCl7Y29uc3QgdD1zUyh0aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24pO2NvbnN0IGU9dFswXTtpZihlKXtjb25zdCBpPWUucGFyZW50LnBhcmVudDtjb25zdCBuPXRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KFwiVGFibGVVdGlsc1wiKS5nZXRDb2x1bW5zKGkpO2NvbnN0IG89Wy4uLm5ldyBaUChpKV07Y29uc3Qgcj1vLmZpbHRlcihlPT50LmluY2x1ZGVzKGUuY2VsbCkpLm1hcCh0PT50LmNvbHVtbikuc29ydCgpO2NvbnN0IHM9clswXTtjb25zdCBhPXJbci5sZW5ndGgtMV07dGhpcy5pc0VuYWJsZWQ9YS1zPG4tMX1lbHNle3RoaXMuaXNFbmFibGVkPWZhbHNlfX1leGVjdXRlKCl7Y29uc3RbdCxlXT0kUyh0aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24pO2NvbnN0IGk9dC5wYXJlbnQucGFyZW50O2NvbnN0IG49Wy4uLm5ldyBaUChpKV07Y29uc3Qgbz17Zmlyc3Q6bi5maW5kKGU9PmUuY2VsbD09PXQpLmNvbHVtbixsYXN0Om4uZmluZCh0PT50LmNlbGw9PT1lKS5jb2x1bW59O2NvbnN0IHI9VVMobix0LGUsbyk7dGhpcy5lZGl0b3IubW9kZWwuY2hhbmdlKHQ9Pnt0LnNldFNlbGVjdGlvbih0LmNyZWF0ZVJhbmdlT24oaSkpO3FTKGksbyx0KTtmb3IobGV0IGU9by5sYXN0O2U+PW8uZmlyc3Q7ZS0tKXtmb3IoY29uc3R7Y2VsbDppLGNvbHVtbjpvLGNvbHNwYW46cn1vZiBuKXtpZihvPD1lJiZyPjEmJm8rcj5lKXtxUChcImNvbHNwYW5cIixyLTEsaSx0KX1lbHNlIGlmKG89PT1lKXtjb25zdCBlPWkucGFyZW50O3QucmVtb3ZlKGkpO2lmKCFlLmNoaWxkQ291bnQpe3QucmVtb3ZlKGUpfX19fXQuc2V0U2VsZWN0aW9uKHQuY3JlYXRlUG9zaXRpb25BdChyLDApKX0pfX1mdW5jdGlvbiBxUyh0LGUsaSl7Y29uc3Qgbj10LmdldEF0dHJpYnV0ZShcImhlYWRpbmdDb2x1bW5zXCIpfHwwO2lmKG4mJmUuZmlyc3Q8PW4pe2NvbnN0IG89TWF0aC5taW4obi0xLGUubGFzdCktZS5maXJzdCsxO2kuc2V0QXR0cmlidXRlKFwiaGVhZGluZ0NvbHVtbnNcIixuLW8sdCl9fWZ1bmN0aW9uIFVTKHQsZSxpLG4pe2NvbnN0IG89cGFyc2VJbnQoaS5nZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIpfHwxKTtpZihvPjEpe3JldHVybiBpfWVsc2UgaWYoZS5wcmV2aW91c1NpYmxpbmd8fGkubmV4dFNpYmxpbmcpe3JldHVybiBpLm5leHRTaWJsaW5nfHxlLnByZXZpb3VzU2libGluZ31lbHNle2lmKG4uZmlyc3Qpe3JldHVybiB0LnJldmVyc2UoKS5maW5kKCh7Y29sdW1uOnR9KT0+dDxuLmZpcnN0KS5jZWxsfWVsc2V7cmV0dXJuIHQucmV2ZXJzZSgpLmZpbmQoKHtjb2x1bW46dH0pPT50Pm4ubGFzdCkuY2VsbH19fWZ1bmN0aW9uICRTKHQpe2NvbnN0IGU9c1ModCk7Y29uc3QgaT1lWzBdO2NvbnN0IG49ZS5wb3AoKTtjb25zdCBvPVtpLG5dO3JldHVybiBpLmlzQmVmb3JlKG4pP286by5yZXZlcnNlKCl9Y2xhc3MgR1MgZXh0ZW5kcyBqd3tyZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBlPXNTKHQuZG9jdW1lbnQuc2VsZWN0aW9uKTtjb25zdCBpPWUubGVuZ3RoPjA7dGhpcy5pc0VuYWJsZWQ9aTt0aGlzLnZhbHVlPWkmJmUuZXZlcnkodD0+dGhpcy5faXNJbkhlYWRpbmcodCx0LnBhcmVudC5wYXJlbnQpKX1leGVjdXRlKHQ9e30pe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgaT1zUyhlLmRvY3VtZW50LnNlbGVjdGlvbik7Y29uc3Qgbj1pWzBdO2NvbnN0IG89aVtpLmxlbmd0aC0xXTtjb25zdCByPW4ucGFyZW50LnBhcmVudDtjb25zdCBzPXIuZ2V0QXR0cmlidXRlKFwiaGVhZGluZ1Jvd3NcIil8fDA7Y29uc3RbYSxjXT1bbi5wYXJlbnQuaW5kZXgsby5wYXJlbnQuaW5kZXhdLnNvcnQoKTtpZih0LmZvcmNlVmFsdWU9PT10aGlzLnZhbHVlKXtyZXR1cm59Y29uc3QgbD10aGlzLnZhbHVlP2E6YysxO2UuY2hhbmdlKHQ9PntpZihsKXtjb25zdCBlPUtTKHIsbCxzKTtmb3IoY29uc3QgaSBvZiBlKXtKUyhpLGwsdCl9fXFQKFwiaGVhZGluZ1Jvd3NcIixsLHIsdCwwKX0pfV9pc0luSGVhZGluZyh0LGUpe2NvbnN0IGk9cGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiKXx8MCk7cmV0dXJuISFpJiZ0LnBhcmVudC5pbmRleDxpfX1mdW5jdGlvbiBLUyh0LGUsaSl7Y29uc3Qgbj1bXTtjb25zdCBvPWU+aT9pOjA7Y29uc3Qgcj1lLTE7Y29uc3Qgcz1uZXcgWlAodCx7c3RhcnRSb3c6byxlbmRSb3c6cn0pO2Zvcihjb25zdHtyb3c6dCxyb3dzcGFuOmksY2VsbDpvfW9mIHMpe2lmKGk+MSYmdCtpPmUpe24ucHVzaChvKX19cmV0dXJuIG59ZnVuY3Rpb24gSlModCxlLGkpe2NvbnN0IG49dC5wYXJlbnQ7Y29uc3Qgbz1uLnBhcmVudDtjb25zdCByPW4uaW5kZXg7Y29uc3Qgcz1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInJvd3NwYW5cIikpO2NvbnN0IGE9ZS1yO2NvbnN0IGM9e307Y29uc3QgbD1zLWE7aWYobD4xKXtjLnJvd3NwYW49bH1jb25zdCBkPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKXx8MSk7aWYoZD4xKXtjLmNvbHNwYW49ZH1jb25zdCB1PW8uZ2V0Q2hpbGRJbmRleChuKTtjb25zdCBoPXUrYTtjb25zdCBmPVsuLi5uZXcgWlAobyx7c3RhcnRSb3c6dSxlbmRSb3c6aCxpbmNsdWRlU3Bhbm5lZDp0cnVlfSldO2xldCBnO2Zvcihjb25zdHtyb3c6ZSxjb2x1bW46bixjZWxsOnIsY2VsbEluZGV4OnN9b2YgZil7aWYocj09PXQmJmc9PT11bmRlZmluZWQpe2c9bn1pZihnIT09dW5kZWZpbmVkJiZnPT09biYmZT09PWgpe2NvbnN0IHQ9by5nZXRDaGlsZChlKTtjb25zdCBuPWkuY3JlYXRlUG9zaXRpb25BdCh0LHMpO1VQKGksbixjKX19cVAoXCJyb3dzcGFuXCIsYSx0LGkpfWNsYXNzIFlTIGV4dGVuZHMgand7cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT1zUyh0LmRvY3VtZW50LnNlbGVjdGlvbik7Y29uc3QgaT10aGlzLmVkaXRvci5wbHVnaW5zLmdldChcIlRhYmxlVXRpbHNcIik7Y29uc3Qgbj1lLmxlbmd0aD4wO3RoaXMuaXNFbmFibGVkPW47dGhpcy52YWx1ZT1uJiZlLmV2ZXJ5KHQ9PktQKGksdCkpfWV4ZWN1dGUodD17fSl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBpPXRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KFwiVGFibGVVdGlsc1wiKTtjb25zdCBuPXNTKGUuZG9jdW1lbnQuc2VsZWN0aW9uKTtjb25zdCBvPW5bMF07Y29uc3Qgcj1uW24ubGVuZ3RoLTFdO2NvbnN0IHM9by5wYXJlbnQ7Y29uc3QgYT1zLnBhcmVudDtjb25zdFtjLGxdPVtpLmdldENlbGxMb2NhdGlvbihvKS5jb2x1bW4saS5nZXRDZWxsTG9jYXRpb24ocikuY29sdW1uXS5zb3J0KCk7aWYodC5mb3JjZVZhbHVlPT09dGhpcy52YWx1ZSl7cmV0dXJufWNvbnN0IGQ9dGhpcy52YWx1ZT9jOmwrMTtlLmNoYW5nZSh0PT57cVAoXCJoZWFkaW5nQ29sdW1uc1wiLGQsYSx0LDApfSl9fWNsYXNzIFFTIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJUYWJsZVV0aWxzXCJ9Z2V0Q2VsbExvY2F0aW9uKHQpe2NvbnN0IGU9dC5wYXJlbnQ7Y29uc3QgaT1lLnBhcmVudDtjb25zdCBuPWkuZ2V0Q2hpbGRJbmRleChlKTtjb25zdCBvPW5ldyBaUChpLHtzdGFydFJvdzpuLGVuZFJvdzpufSk7Zm9yKGNvbnN0e2NlbGw6ZSxyb3c6aSxjb2x1bW46bn1vZiBvKXtpZihlPT09dCl7cmV0dXJue3JvdzppLGNvbHVtbjpufX19fWNyZWF0ZVRhYmxlKHQsZSxpKXtjb25zdCBuPXQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO1hTKHQsbiwwLGUsaSk7cmV0dXJuIG59aW5zZXJ0Um93cyh0LGU9e30pe2NvbnN0IGk9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3Qgbj1lLmF0fHwwO2NvbnN0IG89ZS5yb3dzfHwxO2kuY2hhbmdlKGU9Pntjb25zdCBpPXQuZ2V0QXR0cmlidXRlKFwiaGVhZGluZ1Jvd3NcIil8fDA7aWYoaT5uKXtlLnNldEF0dHJpYnV0ZShcImhlYWRpbmdSb3dzXCIsaStvLHQpfWlmKG49PT0wfHxuPT09dC5jaGlsZENvdW50KXtYUyhlLHQsbixvLHRoaXMuZ2V0Q29sdW1ucyh0KSk7cmV0dXJufWNvbnN0IHI9bmV3IFpQKHQse2VuZFJvdzpufSk7bGV0IHM9MDtmb3IoY29uc3R7cm93OnQscm93c3BhbjppLGNvbHNwYW46YSxjZWxsOmN9b2Ygcil7Y29uc3Qgcj10PG47Y29uc3QgbD10K2k+bjtpZihyJiZsKXtlLnNldEF0dHJpYnV0ZShcInJvd3NwYW5cIixpK28sYyl9aWYodD09PW4pe3MrPWF9fVhTKGUsdCxuLG8scyl9KX1pbnNlcnRDb2x1bW5zKHQsZT17fSl7Y29uc3QgaT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBuPWUuYXR8fDA7Y29uc3Qgbz1lLmNvbHVtbnN8fDE7aS5jaGFuZ2UoZT0+e2NvbnN0IGk9dC5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nQ29sdW1uc1wiKTtpZihuPGkpe2Uuc2V0QXR0cmlidXRlKFwiaGVhZGluZ0NvbHVtbnNcIixpK28sdCl9Y29uc3Qgcj10aGlzLmdldENvbHVtbnModCk7aWYobj09PTB8fHI9PT1uKXtmb3IoY29uc3QgaSBvZiB0LmdldENoaWxkcmVuKCkpe1pTKG8sZSxlLmNyZWF0ZVBvc2l0aW9uQXQoaSxuP1wiZW5kXCI6MCkpfXJldHVybn1jb25zdCBzPW5ldyBaUCh0LHtjb2x1bW46bixpbmNsdWRlU3Bhbm5lZDp0cnVlfSk7Zm9yKGNvbnN0e3JvdzppLGNlbGw6cixjZWxsSW5kZXg6YX1vZiBzKXtjb25zdCBjPXBhcnNlSW50KHIuZ2V0QXR0cmlidXRlKFwicm93c3BhblwiKXx8MSk7Y29uc3QgbD1wYXJzZUludChyLmdldEF0dHJpYnV0ZShcImNvbHNwYW5cIil8fDEpO2lmKHIuaW5kZXghPT1uJiZsPjEpe2Uuc2V0QXR0cmlidXRlKFwiY29sc3BhblwiLGwrbyxyKTtzLnNraXBSb3coaSk7aWYoYz4xKXtmb3IobGV0IHQ9aSsxO3Q8aStjO3QrKyl7cy5za2lwUm93KHQpfX19ZWxzZXtjb25zdCBuPWUuY3JlYXRlUG9zaXRpb25BdCh0LmdldENoaWxkKGkpLGEpO1pTKG8sZSxuKX19fSl9c3BsaXRDZWxsVmVydGljYWxseSh0LGU9Mil7Y29uc3QgaT10aGlzLmVkaXRvci5tb2RlbDtjb25zdCBuPXQucGFyZW50O2NvbnN0IG89bi5wYXJlbnQ7Y29uc3Qgcj1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInJvd3NwYW5cIil8fDEpO2NvbnN0IHM9cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIpfHwxKTtpLmNoYW5nZShpPT57aWYocz4xKXtjb25zdHtuZXdDZWxsc1NwYW46bix1cGRhdGVkU3BhbjpvfT10RShzLGUpO3FQKFwiY29sc3BhblwiLG8sdCxpKTtjb25zdCBhPXt9O2lmKG4+MSl7YS5jb2xzcGFuPW59aWYocj4xKXthLnJvd3NwYW49cn1jb25zdCBjPXM+ZT9lLTE6cy0xO1pTKGMsaSxpLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIodCksYSl9aWYoczxlKXtjb25zdCBuPWUtcztjb25zdCBhPVsuLi5uZXcgWlAobyldO2NvbnN0e2NvbHVtbjpjfT1hLmZpbmQoKHtjZWxsOmV9KT0+ZT09PXQpO2NvbnN0IGw9YS5maWx0ZXIoKHtjZWxsOmUsY29sc3BhbjppLGNvbHVtbjpufSk9Pntjb25zdCBvPWUhPT10JiZuPT09Yztjb25zdCByPW48YyYmbitpPmM7cmV0dXJuIG98fHJ9KTtmb3IoY29uc3R7Y2VsbDp0LGNvbHNwYW46ZX1vZiBsKXtpLnNldEF0dHJpYnV0ZShcImNvbHNwYW5cIixlK24sdCl9Y29uc3QgZD17fTtpZihyPjEpe2Qucm93c3Bhbj1yfVpTKG4saSxpLmNyZWF0ZVBvc2l0aW9uQWZ0ZXIodCksZCk7Y29uc3QgdT1vLmdldEF0dHJpYnV0ZShcImhlYWRpbmdDb2x1bW5zXCIpfHwwO2lmKHU+Yyl7cVAoXCJoZWFkaW5nQ29sdW1uc1wiLHUrbixvLGkpfX19KX1zcGxpdENlbGxIb3Jpem9udGFsbHkodCxlPTIpe2NvbnN0IGk9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3Qgbj10LnBhcmVudDtjb25zdCBvPW4ucGFyZW50O2NvbnN0IHI9by5nZXRDaGlsZEluZGV4KG4pO2NvbnN0IHM9cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJyb3dzcGFuXCIpfHwxKTtjb25zdCBhPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKXx8MSk7aS5jaGFuZ2UoaT0+e2lmKHM+MSl7Y29uc3Qgbj1bLi4ubmV3IFpQKG8se3N0YXJ0Um93OnIsZW5kUm93OnIrcy0xLGluY2x1ZGVTcGFubmVkOnRydWV9KV07Y29uc3R7bmV3Q2VsbHNTcGFuOmMsdXBkYXRlZFNwYW46bH09dEUocyxlKTtxUChcInJvd3NwYW5cIixsLHQsaSk7Y29uc3R7Y29sdW1uOmR9PW4uZmluZCgoe2NlbGw6ZX0pPT5lPT09dCk7Y29uc3QgdT17fTtpZihjPjEpe3Uucm93c3Bhbj1jfWlmKGE+MSl7dS5jb2xzcGFuPWF9Zm9yKGNvbnN0e2NvbHVtbjp0LHJvdzplLGNlbGxJbmRleDpzfW9mIG4pe2NvbnN0IG49ZT49citsO2NvbnN0IGE9dD09PWQ7Y29uc3QgaD0oZStyK2wpJWM9PT0wO2lmKG4mJmEmJmgpe2NvbnN0IHQ9aS5jcmVhdGVQb3NpdGlvbkF0KG8uZ2V0Q2hpbGQoZSkscyk7WlMoMSxpLHQsdSl9fX1pZihzPGUpe2NvbnN0IG49ZS1zO2NvbnN0IGM9Wy4uLm5ldyBaUChvLHtzdGFydFJvdzowLGVuZFJvdzpyfSldO2Zvcihjb25zdHtjZWxsOmUscm93c3BhbjpvLHJvdzpzfW9mIGMpe2lmKGUhPT10JiZzK28+cil7Y29uc3QgdD1vK247aS5zZXRBdHRyaWJ1dGUoXCJyb3dzcGFuXCIsdCxlKX19Y29uc3QgbD17fTtpZihhPjEpe2wuY29sc3Bhbj1hfVhTKGksbyxyKzEsbiwxLGwpO2NvbnN0IGQ9by5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiKXx8MDtpZihkPnIpe3FQKFwiaGVhZGluZ1Jvd3NcIixkK24sbyxpKX19fSl9Z2V0Q29sdW1ucyh0KXtjb25zdCBlPXQuZ2V0Q2hpbGQoMCk7cmV0dXJuWy4uLmUuZ2V0Q2hpbGRyZW4oKV0ucmVkdWNlKCh0LGUpPT57Y29uc3QgaT1wYXJzZUludChlLmdldEF0dHJpYnV0ZShcImNvbHNwYW5cIil8fDEpO3JldHVybiB0K2l9LDApfWdldFJvd3ModCl7cmV0dXJuIHQuY2hpbGRDb3VudH19ZnVuY3Rpb24gWFModCxlLGksbixvLHI9e30pe2ZvcihsZXQgcz0wO3M8bjtzKyspe2NvbnN0IG49dC5jcmVhdGVFbGVtZW50KFwidGFibGVSb3dcIik7dC5pbnNlcnQobixlLGkpO1pTKG8sdCx0LmNyZWF0ZVBvc2l0aW9uQXQobixcImVuZFwiKSxyKX19ZnVuY3Rpb24gWlModCxlLGksbj17fSl7Zm9yKGxldCBvPTA7bzx0O28rKyl7VVAoZSxpLG4pfX1mdW5jdGlvbiB0RSh0LGUpe2lmKHQ8ZSl7cmV0dXJue25ld0NlbGxzU3BhbjoxLHVwZGF0ZWRTcGFuOjF9fWNvbnN0IGk9TWF0aC5mbG9vcih0L2UpO2NvbnN0IG49dC1pKmUraTtyZXR1cm57bmV3Q2VsbHNTcGFuOmksdXBkYXRlZFNwYW46bn19ZnVuY3Rpb24gZUUodCl7dC5kb2N1bWVudC5yZWdpc3RlclBvc3RGaXhlcihlPT5pRShlLHQpKX1mdW5jdGlvbiBpRSh0LGUpe2NvbnN0IGk9ZS5kb2N1bWVudC5kaWZmZXIuZ2V0Q2hhbmdlcygpO2xldCBuPWZhbHNlO2NvbnN0IG89bmV3IFNldDtmb3IoY29uc3QgZSBvZiBpKXtsZXQgaTtpZihlLm5hbWU9PVwidGFibGVcIiYmZS50eXBlPT1cImluc2VydFwiKXtpPWUucG9zaXRpb24ubm9kZUFmdGVyfWlmKGUubmFtZT09XCJ0YWJsZVJvd1wifHxlLm5hbWU9PVwidGFibGVDZWxsXCIpe2k9V1AoXCJ0YWJsZVwiLGUucG9zaXRpb24pfWlmKGFFKGUpKXtpPVdQKFwidGFibGVcIixlLnJhbmdlLnN0YXJ0KX1pZihpJiYhby5oYXMoaSkpe249bkUoaSx0KXx8bjtuPW9FKGksdCl8fG47by5hZGQoaSl9fXJldHVybiBufWZ1bmN0aW9uIG5FKHQsZSl7bGV0IGk9ZmFsc2U7Y29uc3Qgbj1yRSh0KTtpZihuLmxlbmd0aCl7aT10cnVlO2Zvcihjb25zdCB0IG9mIG4pe3FQKFwicm93c3BhblwiLHQucm93c3Bhbix0LmNlbGwsZSwxKX19cmV0dXJuIGl9ZnVuY3Rpb24gb0UodCxlKXtsZXQgaT1mYWxzZTtjb25zdCBuPXNFKHQpO2NvbnN0IG89blswXTtjb25zdCByPU9iamVjdC52YWx1ZXMobikuZXZlcnkodD0+dD09PW8pO2lmKCFyKXtjb25zdCBvPU9iamVjdC52YWx1ZXMobikucmVkdWNlKCh0LGUpPT5lPnQ/ZTp0LDApO2Zvcihjb25zdFtyLHNdb2YgT2JqZWN0LmVudHJpZXMobikpe2NvbnN0IG49by1zO2lmKG4pe2ZvcihsZXQgaT0wO2k8bjtpKyspe1VQKGUsZS5jcmVhdGVQb3NpdGlvbkF0KHQuZ2V0Q2hpbGQociksXCJlbmRcIikpfWk9dHJ1ZX19fXJldHVybiBpfWZ1bmN0aW9uIHJFKHQpe2NvbnN0IGU9cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiKXx8MCk7Y29uc3QgaT10LmNoaWxkQ291bnQ7Y29uc3Qgbj1bXTtmb3IoY29uc3R7cm93Om8scm93c3BhbjpyLGNlbGw6c31vZiBuZXcgWlAodCkpe2lmKHI8Mil7Y29udGludWV9Y29uc3QgdD1vPGU7Y29uc3QgYT10P2U6aTtpZihvK3I+YSl7Y29uc3QgdD1hLW87bi5wdXNoKHtjZWxsOnMscm93c3Bhbjp0fSl9fXJldHVybiBufWZ1bmN0aW9uIHNFKHQpe2NvbnN0IGU9e307Zm9yKGNvbnN0e3JvdzppfW9mIG5ldyBaUCh0LHtpbmNsdWRlU3Bhbm5lZDp0cnVlfSkpe2lmKCFlW2ldKXtlW2ldPTB9ZVtpXSs9MX1yZXR1cm4gZX1mdW5jdGlvbiBhRSh0KXtjb25zdCBlPXQudHlwZT09PVwiYXR0cmlidXRlXCI7Y29uc3QgaT10LmF0dHJpYnV0ZUtleTtyZXR1cm4gZSYmKGk9PT1cImhlYWRpbmdSb3dzXCJ8fGk9PT1cImNvbHNwYW5cInx8aT09PVwicm93c3BhblwiKX1mdW5jdGlvbiBjRSh0KXt0LmRvY3VtZW50LnJlZ2lzdGVyUG9zdEZpeGVyKGU9PmxFKGUsdCkpfWZ1bmN0aW9uIGxFKHQsZSl7Y29uc3QgaT1lLmRvY3VtZW50LmRpZmZlci5nZXRDaGFuZ2VzKCk7bGV0IG49ZmFsc2U7Zm9yKGNvbnN0IGUgb2YgaSl7aWYoZS50eXBlPT1cImluc2VydFwiJiZlLm5hbWU9PVwidGFibGVcIil7bj1kRShlLnBvc2l0aW9uLm5vZGVBZnRlcix0KXx8bn1pZihlLnR5cGU9PVwiaW5zZXJ0XCImJmUubmFtZT09XCJ0YWJsZVJvd1wiKXtuPXVFKGUucG9zaXRpb24ubm9kZUFmdGVyLHQpfHxufWlmKGUudHlwZT09XCJpbnNlcnRcIiYmZS5uYW1lPT1cInRhYmxlQ2VsbFwiKXtuPWhFKGUucG9zaXRpb24ubm9kZUFmdGVyLHQpfHxufWlmKGZFKGUpKXtuPWhFKGUucG9zaXRpb24ucGFyZW50LHQpfHxufX1yZXR1cm4gbn1mdW5jdGlvbiBkRSh0LGUpe2xldCBpPWZhbHNlO2Zvcihjb25zdCBuIG9mIHQuZ2V0Q2hpbGRyZW4oKSl7aT11RShuLGUpfHxpfXJldHVybiBpfWZ1bmN0aW9uIHVFKHQsZSl7bGV0IGk9ZmFsc2U7Zm9yKGNvbnN0IG4gb2YgdC5nZXRDaGlsZHJlbigpKXtpPWhFKG4sZSl8fGl9cmV0dXJuIGl9ZnVuY3Rpb24gaEUodCxlKXtpZih0LmNoaWxkQ291bnQ9PTApe2UuaW5zZXJ0RWxlbWVudChcInBhcmFncmFwaFwiLHQpO3JldHVybiB0cnVlfWNvbnN0IGk9QXJyYXkuZnJvbSh0LmdldENoaWxkcmVuKCkpLmZpbHRlcih0PT50LmlzKFwidGV4dFwiKSk7Zm9yKGNvbnN0IHQgb2YgaSl7ZS53cmFwKGUuY3JlYXRlUmFuZ2VPbih0KSxcInBhcmFncmFwaFwiKX1yZXR1cm4hIWkubGVuZ3RofWZ1bmN0aW9uIGZFKHQpe2lmKCF0LnBvc2l0aW9ufHwhdC5wb3NpdGlvbi5wYXJlbnQuaXMoXCJ0YWJsZUNlbGxcIikpe3JldHVybiBmYWxzZX1yZXR1cm4gdC50eXBlPT1cImluc2VydFwiJiZ0Lm5hbWU9PVwiJHRleHRcInx8dC50eXBlPT1cInJlbW92ZVwifWZ1bmN0aW9uIGdFKHQpe3QuZG9jdW1lbnQucmVnaXN0ZXJQb3N0Rml4ZXIoKCk9Pm1FKHQpKX1mdW5jdGlvbiBtRSh0KXtjb25zdCBlPXQuZG9jdW1lbnQuZGlmZmVyO2NvbnN0IGk9bmV3IFNldDtmb3IoY29uc3QgdCBvZiBlLmdldENoYW5nZXMoKSl7Y29uc3QgZT10LnR5cGU9PVwiaW5zZXJ0XCJ8fHQudHlwZT09XCJyZW1vdmVcIj90LnBvc2l0aW9uLnBhcmVudDp0LnJhbmdlLnN0YXJ0LnBhcmVudDtpZihlLmlzKFwidGFibGVDZWxsXCIpJiZwRShlLHQudHlwZSkpe2kuYWRkKGUpfX1pZihpLnNpemUpe2Zvcihjb25zdCB0IG9mIGkudmFsdWVzKCkpe2UucmVmcmVzaEl0ZW0odCl9cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHBFKHQsZSl7Y29uc3QgaT1BcnJheS5mcm9tKHQuZ2V0Q2hpbGRyZW4oKSkuc29tZSh0PT50LmlzKFwicGFyYWdyYXBoXCIpKTtpZighaSl7cmV0dXJuIGZhbHNlfWlmKGU9PVwiYXR0cmlidXRlXCIpe2NvbnN0IGU9QXJyYXkuZnJvbSh0LmdldENoaWxkKDApLmdldEF0dHJpYnV0ZUtleXMoKSkubGVuZ3RoO3JldHVybiB0LmNoaWxkQ291bnQ9PT0xJiZlPDJ9cmV0dXJuIHQuY2hpbGRDb3VudDw9KGU9PVwiaW5zZXJ0XCI/MjoxKX12YXIgYkU9aSg5Mik7Y2xhc3Mgd0UgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlRhYmxlRWRpdGluZ1wifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbDtjb25zdCBpPWUuc2NoZW1hO2NvbnN0IG49dC5jb252ZXJzaW9uO2kucmVnaXN0ZXIoXCJ0YWJsZVwiLHthbGxvd1doZXJlOlwiJGJsb2NrXCIsYWxsb3dBdHRyaWJ1dGVzOltcImhlYWRpbmdSb3dzXCIsXCJoZWFkaW5nQ29sdW1uc1wiXSxpc0xpbWl0OnRydWUsaXNPYmplY3Q6dHJ1ZSxpc0Jsb2NrOnRydWV9KTtpLnJlZ2lzdGVyKFwidGFibGVSb3dcIix7YWxsb3dJbjpcInRhYmxlXCIsaXNMaW1pdDp0cnVlfSk7aS5yZWdpc3RlcihcInRhYmxlQ2VsbFwiLHthbGxvd0luOlwidGFibGVSb3dcIixhbGxvd0F0dHJpYnV0ZXM6W1wiY29sc3BhblwiLFwicm93c3BhblwiXSxpc09iamVjdDp0cnVlfSk7aS5leHRlbmQoXCIkYmxvY2tcIix7YWxsb3dJbjpcInRhYmxlQ2VsbFwifSk7aS5hZGRDaGlsZENoZWNrKCh0LGUpPT57aWYoZS5uYW1lPT1cInRhYmxlXCImJkFycmF5LmZyb20odC5nZXROYW1lcygpKS5pbmNsdWRlcyhcInRhYmxlXCIpKXtyZXR1cm4gZmFsc2V9fSk7bi5mb3IoXCJ1cGNhc3RcIikuYWRkKEpQKCkpO24uZm9yKFwiZWRpdGluZ0Rvd25jYXN0XCIpLmFkZChsUyh7YXNXaWRnZXQ6dHJ1ZX0pKTtuLmZvcihcImRhdGFEb3duY2FzdFwiKS5hZGQobFMoKSk7bi5mb3IoXCJ1cGNhc3RcIikuZWxlbWVudFRvRWxlbWVudCh7bW9kZWw6XCJ0YWJsZVJvd1wiLHZpZXc6XCJ0clwifSk7bi5mb3IoXCJlZGl0aW5nRG93bmNhc3RcIikuYWRkKGRTKHthc1dpZGdldDp0cnVlfSkpO24uZm9yKFwiZGF0YURvd25jYXN0XCIpLmFkZChkUygpKTtuLmZvcihcImRvd25jYXN0XCIpLmFkZChnUygpKTtuLmZvcihcInVwY2FzdFwiKS5hZGQoWVAoXCJ0ZFwiKSk7bi5mb3IoXCJ1cGNhc3RcIikuYWRkKFlQKFwidGhcIikpO24uZm9yKFwiZWRpdGluZ0Rvd25jYXN0XCIpLmFkZCh1Uyh7YXNXaWRnZXQ6dHJ1ZX0pKTtuLmZvcihcImRhdGFEb3duY2FzdFwiKS5hZGQodVMoKSk7bi5hdHRyaWJ1dGVUb0F0dHJpYnV0ZSh7bW9kZWw6XCJjb2xzcGFuXCIsdmlldzpcImNvbHNwYW5cIn0pO24uYXR0cmlidXRlVG9BdHRyaWJ1dGUoe21vZGVsOlwicm93c3BhblwiLHZpZXc6XCJyb3dzcGFuXCJ9KTtuLmZvcihcImVkaXRpbmdEb3duY2FzdFwiKS5hZGQoZlMoe2FzV2lkZ2V0OnRydWV9KSk7bi5mb3IoXCJkYXRhRG93bmNhc3RcIikuYWRkKGZTKCkpO24uZm9yKFwiZWRpdGluZ0Rvd25jYXN0XCIpLmFkZChoUyh7YXNXaWRnZXQ6dHJ1ZX0pKTtuLmZvcihcImRhdGFEb3duY2FzdFwiKS5hZGQoaFMoKSk7dC5jb21tYW5kcy5hZGQoXCJpbnNlcnRUYWJsZVwiLG5ldyBTUyh0KSk7dC5jb21tYW5kcy5hZGQoXCJpbnNlcnRUYWJsZVJvd0Fib3ZlXCIsbmV3IFJTKHQse29yZGVyOlwiYWJvdmVcIn0pKTt0LmNvbW1hbmRzLmFkZChcImluc2VydFRhYmxlUm93QmVsb3dcIixuZXcgUlModCx7b3JkZXI6XCJiZWxvd1wifSkpO3QuY29tbWFuZHMuYWRkKFwiaW5zZXJ0VGFibGVDb2x1bW5MZWZ0XCIsbmV3IE9TKHQse29yZGVyOlwibGVmdFwifSkpO3QuY29tbWFuZHMuYWRkKFwiaW5zZXJ0VGFibGVDb2x1bW5SaWdodFwiLG5ldyBPUyh0LHtvcmRlcjpcInJpZ2h0XCJ9KSk7dC5jb21tYW5kcy5hZGQoXCJyZW1vdmVUYWJsZVJvd1wiLG5ldyBGUyh0KSk7dC5jb21tYW5kcy5hZGQoXCJyZW1vdmVUYWJsZUNvbHVtblwiLG5ldyBXUyh0KSk7dC5jb21tYW5kcy5hZGQoXCJzcGxpdFRhYmxlQ2VsbFZlcnRpY2FsbHlcIixuZXcgSVModCx7ZGlyZWN0aW9uOlwidmVydGljYWxseVwifSkpO3QuY29tbWFuZHMuYWRkKFwic3BsaXRUYWJsZUNlbGxIb3Jpem9udGFsbHlcIixuZXcgSVModCx7ZGlyZWN0aW9uOlwiaG9yaXpvbnRhbGx5XCJ9KSk7dC5jb21tYW5kcy5hZGQoXCJtZXJnZVRhYmxlQ2VsbFJpZ2h0XCIsbmV3IFZTKHQse2RpcmVjdGlvbjpcInJpZ2h0XCJ9KSk7dC5jb21tYW5kcy5hZGQoXCJtZXJnZVRhYmxlQ2VsbExlZnRcIixuZXcgVlModCx7ZGlyZWN0aW9uOlwibGVmdFwifSkpO3QuY29tbWFuZHMuYWRkKFwibWVyZ2VUYWJsZUNlbGxEb3duXCIsbmV3IFZTKHQse2RpcmVjdGlvbjpcImRvd25cIn0pKTt0LmNvbW1hbmRzLmFkZChcIm1lcmdlVGFibGVDZWxsVXBcIixuZXcgVlModCx7ZGlyZWN0aW9uOlwidXBcIn0pKTt0LmNvbW1hbmRzLmFkZChcInNldFRhYmxlQ29sdW1uSGVhZGVyXCIsbmV3IFlTKHQpKTt0LmNvbW1hbmRzLmFkZChcInNldFRhYmxlUm93SGVhZGVyXCIsbmV3IEdTKHQpKTtlRShlKTtnRShlKTtjRShlKTt0aGlzLmVkaXRvci5rZXlzdHJva2VzLnNldChcIlRhYlwiLCguLi50KT0+dGhpcy5faGFuZGxlVGFiT25TZWxlY3RlZFRhYmxlKC4uLnQpLHtwcmlvcml0eTpcImxvd1wifSk7dGhpcy5lZGl0b3Iua2V5c3Ryb2tlcy5zZXQoXCJUYWJcIix0aGlzLl9nZXRUYWJIYW5kbGVyKHRydWUpLHtwcmlvcml0eTpcImxvd1wifSk7dGhpcy5lZGl0b3Iua2V5c3Ryb2tlcy5zZXQoXCJTaGlmdCtUYWJcIix0aGlzLl9nZXRUYWJIYW5kbGVyKGZhbHNlKSx7cHJpb3JpdHk6XCJsb3dcIn0pfXN0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bUVNdfV9oYW5kbGVUYWJPblNlbGVjdGVkVGFibGUodCxlKXtjb25zdCBpPXRoaXMuZWRpdG9yO2NvbnN0IG49aS5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247aWYoIW4uaXNDb2xsYXBzZWQmJm4ucmFuZ2VDb3VudD09PTEmJm4uZ2V0Rmlyc3RSYW5nZSgpLmlzRmxhdCl7Y29uc3QgdD1uLmdldFNlbGVjdGVkRWxlbWVudCgpO2lmKCF0fHwhdC5pcyhcInRhYmxlXCIpKXtyZXR1cm59ZSgpO2kubW9kZWwuY2hhbmdlKGU9PntlLnNldFNlbGVjdGlvbihlLmNyZWF0ZVJhbmdlSW4odC5nZXRDaGlsZCgwKS5nZXRDaGlsZCgwKSkpfSl9fV9nZXRUYWJIYW5kbGVyKHQpe2NvbnN0IGU9dGhpcy5lZGl0b3I7cmV0dXJuKGksbik9Pntjb25zdCBvPWUubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IHI9clMobylbMF07aWYoIXIpe3JldHVybn1uKCk7Y29uc3Qgcz1yLnBhcmVudDtjb25zdCBhPXMucGFyZW50O2NvbnN0IGM9YS5nZXRDaGlsZEluZGV4KHMpO2NvbnN0IGw9cy5nZXRDaGlsZEluZGV4KHIpO2NvbnN0IGQ9bD09PTA7aWYoIXQmJmQmJmM9PT0wKXtyZXR1cm59Y29uc3QgdT1sPT09cy5jaGlsZENvdW50LTE7Y29uc3QgaD1jPT09YS5jaGlsZENvdW50LTE7aWYodCYmaCYmdSl7ZS5leGVjdXRlKFwiaW5zZXJ0VGFibGVSb3dCZWxvd1wiKTtpZihjPT09YS5jaGlsZENvdW50LTEpe3JldHVybn19bGV0IGY7aWYodCYmdSl7Y29uc3QgdD1hLmdldENoaWxkKGMrMSk7Zj10LmdldENoaWxkKDApfWVsc2UgaWYoIXQmJmQpe2NvbnN0IHQ9YS5nZXRDaGlsZChjLTEpO2Y9dC5nZXRDaGlsZCh0LmNoaWxkQ291bnQtMSl9ZWxzZXtmPXMuZ2V0Q2hpbGQobCsodD8xOi0xKSl9ZS5tb2RlbC5jaGFuZ2UodD0+e3Quc2V0U2VsZWN0aW9uKHQuY3JlYXRlUmFuZ2VJbihmKSl9KX19fXZhciBrRT1pKDk0KTtjbGFzcyBfRSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO2NvbnN0IGU9dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5pdGVtcz10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLnNldChcInJvd3NcIiwwKTt0aGlzLnNldChcImNvbHVtbnNcIiwwKTt0aGlzLmJpbmQoXCJsYWJlbFwiKS50byh0aGlzLFwiY29sdW1uc1wiLHRoaXMsXCJyb3dzXCIsKHQsZSk9PmAke2V9IMOXICR7dH1gKTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiXX0sY2hpbGRyZW46W3t0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay1pbnNlcnQtdGFibGUtZHJvcGRvd25fX2dyaWRcIl19LGNoaWxkcmVuOnRoaXMuaXRlbXN9LHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay1pbnNlcnQtdGFibGUtZHJvcGRvd25fX2xhYmVsXCJdfSxjaGlsZHJlbjpbe3RleHQ6ZS50byhcImxhYmVsXCIpfV19XSxvbjp7bW91c2Vkb3duOmUudG8odD0+e3QucHJldmVudERlZmF1bHQoKX0pLGNsaWNrOmUudG8oKCk9Pnt0aGlzLmZpcmUoXCJleGVjdXRlXCIpfSl9fSk7Zm9yKGxldCB0PTA7dDwxMDA7dCsrKXtjb25zdCBlPW5ldyB2RTtlLm9uKFwib3ZlclwiLCgpPT57Y29uc3QgZT1NYXRoLmZsb29yKHQvMTApO2NvbnN0IGk9dCUxMDt0aGlzLnNldChcInJvd3NcIixlKzEpO3RoaXMuc2V0KFwiY29sdW1uc1wiLGkrMSl9KTt0aGlzLml0ZW1zLmFkZChlKX10aGlzLm9uKFwiY2hhbmdlOmNvbHVtbnNcIiwoKT0+e3RoaXMuX2hpZ2hsaWdodEdyaWRCb3hlcygpfSk7dGhpcy5vbihcImNoYW5nZTpyb3dzXCIsKCk9Pnt0aGlzLl9oaWdobGlnaHRHcmlkQm94ZXMoKX0pfWZvY3VzKCl7fWZvY3VzTGFzdCgpe31faGlnaGxpZ2h0R3JpZEJveGVzKCl7Y29uc3QgdD10aGlzLnJvd3M7Y29uc3QgZT10aGlzLmNvbHVtbnM7dGhpcy5pdGVtcy5tYXAoKGksbik9Pntjb25zdCBvPU1hdGguZmxvb3Iobi8xMCk7Y29uc3Qgcj1uJTEwO2NvbnN0IHM9bzx0JiZyPGU7aS5zZXQoXCJpc09uXCIscyl9KX19Y2xhc3MgdkUgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KFwiaXNPblwiLGZhbHNlKTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay1pbnNlcnQtdGFibGUtZHJvcGRvd24tZ3JpZC1ib3hcIixlLmlmKFwiaXNPblwiLFwiY2stb25cIildfSxvbjp7bW91c2VvdmVyOmUudG8oXCJvdmVyXCIpfX0pfX12YXIgeUU9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTMgNnYzaDRWNkgzem0wIDR2M2g0di0zSDN6bTAgNHYzaDR2LTNIM3ptNSAzaDR2LTNIOHYzem01IDBoNHYtM2gtNHYzem00LTR2LTNoLTR2M2g0em0wLTRWNmgtNHYzaDR6bTEuNSA4YTEuNSAxLjUgMCAwIDEtMS41IDEuNUgzQTEuNSAxLjUgMCAwIDEgMS41IDE3VjRjLjIyMi0uODYzIDEuMDY4LTEuNSAyLTEuNWgxM2MuOTMyIDAgMS43NzguNjM3IDIgMS41djEzek0xMiAxM3YtM0g4djNoNHptMC00VjZIOHYzaDR6XCIvPjwvc3ZnPic7dmFyIHhFPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0yLjUgMWgxNUExLjUgMS41IDAgMCAxIDE5IDIuNXYxNWExLjUgMS41IDAgMCAxLTEuNSAxLjVoLTE1QTEuNSAxLjUgMCAwIDEgMSAxNy41di0xNUExLjUgMS41IDAgMCAxIDIuNSAxek0yIDJ2MTZoMTZWMkgyelwiIG9wYWNpdHk9XCIuNlwiLz48cGF0aCBkPVwiTTE4IDd2MUgyVjdoMTZ6bTAgNXYxSDJ2LTFoMTZ6XCIgb3BhY2l0eT1cIi42XCIvPjxwYXRoIGQ9XCJNMTQgMXYxOGExIDEgMCAwIDEtMSAxSDdhMSAxIDAgMCAxLTEtMVYxYTEgMSAwIDAgMSAxLTFoNmExIDEgMCAwIDEgMSAxem0tMiAxSDh2NGg0VjJ6bTAgNkg4djRoNFY4em0wIDZIOHY0aDR2LTR6XCIvPjwvc3ZnPic7dmFyIENFPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0yLjUgMWgxNUExLjUgMS41IDAgMCAxIDE5IDIuNXYxNWExLjUgMS41IDAgMCAxLTEuNSAxLjVoLTE1QTEuNSAxLjUgMCAwIDEgMSAxNy41di0xNUExLjUgMS41IDAgMCAxIDIuNSAxek0yIDJ2MTZoMTZWMkgyelwiIG9wYWNpdHk9XCIuNlwiLz48cGF0aCBkPVwiTTcgMmgxdjE2SDdWMnptNSAwaDF2MTZoLTFWMnpcIiBvcGFjaXR5PVwiLjZcIi8+PHBhdGggZD1cIk0xIDZoMThhMSAxIDAgMCAxIDEgMXY2YTEgMSAwIDAgMS0xIDFIMWExIDEgMCAwIDEtMS0xVjdhMSAxIDAgMCAxIDEtMXptMSAydjRoNFY4SDJ6bTYgMHY0aDRWOEg4em02IDB2NGg0VjhoLTR6XCIvPjwvc3ZnPic7dmFyIEFFPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0yLjUgMWgxNUExLjUgMS41IDAgMCAxIDE5IDIuNXYxNWExLjUgMS41IDAgMCAxLTEuNSAxLjVoLTE1QTEuNSAxLjUgMCAwIDEgMSAxNy41di0xNUExLjUgMS41IDAgMCAxIDIuNSAxek0yIDJ2MTZoMTZWMkgyelwiIG9wYWNpdHk9XCIuNlwiLz48cGF0aCBkPVwiTTcgMmgxdjE2SDdWMnptNSAwaDF2N2gtMVYyem02IDV2MUgyVjdoMTZ6TTggMTJ2MUgydi0xaDZ6XCIgb3BhY2l0eT1cIi42XCIvPjxwYXRoIGQ9XCJNNyA3aDEyYTEgMSAwIDAgMSAxIDF2MTFhMSAxIDAgMCAxLTEgMUg3YTEgMSAwIDAgMS0xLTFWOGExIDEgMCAwIDEgMS0xem0xIDJ2OWgxMFY5SDh6XCIvPjwvc3ZnPic7Y2xhc3MgVEUgZXh0ZW5kcyBtcHtpbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXRoaXMuZWRpdG9yLnQ7Y29uc3QgaT10LmxvY2FsZS5jb250ZW50TGFuZ3VhZ2VEaXJlY3Rpb247Y29uc3Qgbj1pPT09XCJsdHJcIjt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFwiaW5zZXJ0VGFibGVcIixpPT57Y29uc3Qgbj10LmNvbW1hbmRzLmdldChcImluc2VydFRhYmxlXCIpO2NvbnN0IG89V2IoaSk7by5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKG4pO28uYnV0dG9uVmlldy5zZXQoe2ljb246eUUsbGFiZWw6ZShcImtpXCIpLHRvb2x0aXA6dHJ1ZX0pO2xldCByO28ub24oXCJjaGFuZ2U6aXNPcGVuXCIsKCk9PntpZihyKXtyZXR1cm59cj1uZXcgX0UoaSk7by5wYW5lbFZpZXcuY2hpbGRyZW4uYWRkKHIpO3IuZGVsZWdhdGUoXCJleGVjdXRlXCIpLnRvKG8pO28uYnV0dG9uVmlldy5vbihcIm9wZW5cIiwoKT0+e3Iucm93cz0wO3IuY29sdW1ucz0wfSk7by5vbihcImV4ZWN1dGVcIiwoKT0+e3QuZXhlY3V0ZShcImluc2VydFRhYmxlXCIse3Jvd3M6ci5yb3dzLGNvbHVtbnM6ci5jb2x1bW5zfSk7dC5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pfSk7cmV0dXJuIG99KTt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFwidGFibGVDb2x1bW5cIix0PT57Y29uc3QgaT1be3R5cGU6XCJzd2l0Y2hidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJzZXRUYWJsZUNvbHVtbkhlYWRlclwiLGxhYmVsOmUoXCJralwiKSxiaW5kSXNPbjp0cnVlfX0se3R5cGU6XCJzZXBhcmF0b3JcIn0se3R5cGU6XCJidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6bj9cImluc2VydFRhYmxlQ29sdW1uTGVmdFwiOlwiaW5zZXJ0VGFibGVDb2x1bW5SaWdodFwiLGxhYmVsOmUoXCJra1wiKX19LHt0eXBlOlwiYnV0dG9uXCIsbW9kZWw6e2NvbW1hbmROYW1lOm4/XCJpbnNlcnRUYWJsZUNvbHVtblJpZ2h0XCI6XCJpbnNlcnRUYWJsZUNvbHVtbkxlZnRcIixsYWJlbDplKFwia2xcIil9fSx7dHlwZTpcImJ1dHRvblwiLG1vZGVsOntjb21tYW5kTmFtZTpcInJlbW92ZVRhYmxlQ29sdW1uXCIsbGFiZWw6ZShcImttXCIpfX1dO3JldHVybiB0aGlzLl9wcmVwYXJlRHJvcGRvd24oZShcImtuXCIpLHhFLGksdCl9KTt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFwidGFibGVSb3dcIix0PT57Y29uc3QgaT1be3R5cGU6XCJzd2l0Y2hidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJzZXRUYWJsZVJvd0hlYWRlclwiLGxhYmVsOmUoXCJrb1wiKSxiaW5kSXNPbjp0cnVlfX0se3R5cGU6XCJzZXBhcmF0b3JcIn0se3R5cGU6XCJidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJpbnNlcnRUYWJsZVJvd0JlbG93XCIsbGFiZWw6ZShcImtwXCIpfX0se3R5cGU6XCJidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJpbnNlcnRUYWJsZVJvd0Fib3ZlXCIsbGFiZWw6ZShcImtxXCIpfX0se3R5cGU6XCJidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJyZW1vdmVUYWJsZVJvd1wiLGxhYmVsOmUoXCJrclwiKX19XTtyZXR1cm4gdGhpcy5fcHJlcGFyZURyb3Bkb3duKGUoXCJrc1wiKSxDRSxpLHQpfSk7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChcIm1lcmdlVGFibGVDZWxsc1wiLHQ9Pntjb25zdCBpPVt7dHlwZTpcImJ1dHRvblwiLG1vZGVsOntjb21tYW5kTmFtZTpcIm1lcmdlVGFibGVDZWxsVXBcIixsYWJlbDplKFwia3RcIil9fSx7dHlwZTpcImJ1dHRvblwiLG1vZGVsOntjb21tYW5kTmFtZTpuP1wibWVyZ2VUYWJsZUNlbGxSaWdodFwiOlwibWVyZ2VUYWJsZUNlbGxMZWZ0XCIsbGFiZWw6ZShcImt1XCIpfX0se3R5cGU6XCJidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJtZXJnZVRhYmxlQ2VsbERvd25cIixsYWJlbDplKFwia3ZcIil9fSx7dHlwZTpcImJ1dHRvblwiLG1vZGVsOntjb21tYW5kTmFtZTpuP1wibWVyZ2VUYWJsZUNlbGxMZWZ0XCI6XCJtZXJnZVRhYmxlQ2VsbFJpZ2h0XCIsbGFiZWw6ZShcImt3XCIpfX0se3R5cGU6XCJzZXBhcmF0b3JcIn0se3R5cGU6XCJidXR0b25cIixtb2RlbDp7Y29tbWFuZE5hbWU6XCJzcGxpdFRhYmxlQ2VsbFZlcnRpY2FsbHlcIixsYWJlbDplKFwia3hcIil9fSx7dHlwZTpcImJ1dHRvblwiLG1vZGVsOntjb21tYW5kTmFtZTpcInNwbGl0VGFibGVDZWxsSG9yaXpvbnRhbGx5XCIsbGFiZWw6ZShcImt5XCIpfX1dO3JldHVybiB0aGlzLl9wcmVwYXJlRHJvcGRvd24oZShcImt6XCIpLEFFLGksdCl9KX1fcHJlcGFyZURyb3Bkb3duKHQsZSxpLG4pe2NvbnN0IG89dGhpcy5lZGl0b3I7Y29uc3Qgcj1XYihuKTtjb25zdCBzPVtdO2NvbnN0IGE9bmV3IHlzO2Zvcihjb25zdCB0IG9mIGkpe1BFKHQsbyxzLGEpfVViKHIsYSxvLnVpLmNvbXBvbmVudEZhY3RvcnkpO3IuYnV0dG9uVmlldy5zZXQoe2xhYmVsOnQsaWNvbjplLHRvb2x0aXA6dHJ1ZX0pO3IuYmluZChcImlzRW5hYmxlZFwiKS50b01hbnkocyxcImlzRW5hYmxlZFwiLCguLi50KT0+dC5zb21lKHQ9PnQpKTt0aGlzLmxpc3RlblRvKHIsXCJleGVjdXRlXCIsdD0+e28uZXhlY3V0ZSh0LnNvdXJjZS5jb21tYW5kTmFtZSk7by5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiByfX1mdW5jdGlvbiBQRSh0LGUsaSxuKXtjb25zdCBvPXQubW9kZWw9bmV3IGVfKHQubW9kZWwpO2NvbnN0e2NvbW1hbmROYW1lOnIsYmluZElzT246c309dC5tb2RlbDtpZih0LnR5cGU9PT1cImJ1dHRvblwifHx0LnR5cGU9PT1cInN3aXRjaGJ1dHRvblwiKXtjb25zdCB0PWUuY29tbWFuZHMuZ2V0KHIpO2kucHVzaCh0KTtvLnNldCh7Y29tbWFuZE5hbWU6cn0pO28uYmluZChcImlzRW5hYmxlZFwiKS50byh0KTtpZihzKXtvLmJpbmQoXCJpc09uXCIpLnRvKHQsXCJ2YWx1ZVwiKX19by5zZXQoe3dpdGhUZXh0OnRydWV9KTtuLmFkZCh0KX1jbGFzcyBTRSBleHRlbmRzIEp1e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuZG9tRXZlbnRUeXBlPVtcIm1vdXNlbW92ZVwiLFwibW91c2V1cFwiLFwibW91c2VsZWF2ZVwiXX1vbkRvbUV2ZW50KHQpe3RoaXMuZmlyZSh0LnR5cGUsdCl9fWZ1bmN0aW9uIEVFKHQsZSxpKXtjb25zdCBuPUFycmF5LmZyb20odCk7Y29uc3Qgbz1uWzBdO2NvbnN0IHI9bltuLmxlbmd0aC0xXTtjb25zdHtyb3c6cyxjb2x1bW46YX09ZS5nZXRDZWxsTG9jYXRpb24obyk7Y29uc3QgYz1SRShuLGEsaSxlKTtjb25zdHtyb3c6bCxjb2x1bW46ZH09ZS5nZXRDZWxsTG9jYXRpb24ocik7Y29uc3QgdT1kLWErMTtjb25zdCBoPWwtcysxO0lFKGMsdSxoLGksZSk7Y29uc3QgZj1XUChcInRhYmxlXCIsbyk7VkUoYyxmLHMsYSxpKTtyZXR1cm4gY31mdW5jdGlvbiBSRSh0LGUsaSxuKXtjb25zdCBvPWkuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO2NvbnN0IHI9bmV3IE1hcDtjb25zdCBzPW5ldyBNYXA7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD1XUChcInRhYmxlUm93XCIsZSk7aWYoIXIuaGFzKHQpKXtjb25zdCBlPXQuX2Nsb25lKCk7aS5hcHBlbmQoZSxvKTtyLnNldCh0LGUpfWNvbnN0IGE9ZS5fY2xvbmUodHJ1ZSk7Y29uc3R7Y29sdW1uOmN9PW4uZ2V0Q2VsbExvY2F0aW9uKGUpO3Muc2V0KGEsYyk7aS5hcHBlbmQoYSxyLmdldCh0KSl9T0UobyxlLHMsaSxuKTtyZXR1cm4gb31mdW5jdGlvbiBPRSh0LGUsaSxuLG8pe2Zvcihjb25zdCByIG9mIHQuZ2V0Q2hpbGRyZW4oKSl7Zm9yKGNvbnN0IHQgb2YgQXJyYXkuZnJvbShyLmdldENoaWxkcmVuKCkpKXtjb25zdHtjb2x1bW46cn09by5nZXRDZWxsTG9jYXRpb24odCk7Y29uc3Qgcz1pLmdldCh0KTtjb25zdCBhPXMtZTtpZihyIT09YSl7Zm9yKGxldCBlPTA7ZTxhLXI7ZSsrKXtjb25zdCBlPW4uY3JlYXRlRWxlbWVudChcInRhYmxlQ2VsbFwiKTtuLmluc2VydChlLG4uY3JlYXRlUG9zaXRpb25CZWZvcmUodCkpO2NvbnN0IGk9bi5jcmVhdGVFbGVtZW50KFwicGFyYWdyYXBoXCIpO24uaW5zZXJ0KGksZSwwKTtuLmluc2VydFRleHQoXCJcIixpLDApfX19fX1mdW5jdGlvbiBJRSh0LGUsaSxuLG8pe2Zvcihjb25zdCByIG9mIHQuZ2V0Q2hpbGRyZW4oKSl7Zm9yKGNvbnN0IHQgb2Ygci5nZXRDaGlsZHJlbigpKXtjb25zdCByPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKXx8MSk7Y29uc3Qgcz1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInJvd3NwYW5cIil8fDEpO2NvbnN0e3JvdzphLGNvbHVtbjpjfT1vLmdldENlbGxMb2NhdGlvbih0KTtpZihjK3I+ZSl7Y29uc3QgaT1lLWM7aWYoaT4xKXtuLnNldEF0dHJpYnV0ZShcImNvbHNwYW5cIixpLHQpfWVsc2V7bi5yZW1vdmVBdHRyaWJ1dGUoXCJjb2xzcGFuXCIsdCl9fWlmKGErcz5pKXtjb25zdCBlPWktYTtpZihlPjEpe24uc2V0QXR0cmlidXRlKFwicm93c3BhblwiLGUsdCl9ZWxzZXtuLnJlbW92ZUF0dHJpYnV0ZShcInJvd3NwYW5cIix0KX19fX19ZnVuY3Rpb24gVkUodCxlLGksbixvKXtjb25zdCByPXBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKFwiaGVhZGluZ1Jvd3NcIil8fDApO2lmKHI+MCl7Y29uc3QgZT1yLWk7by5zZXRBdHRyaWJ1dGUoXCJoZWFkaW5nUm93c1wiLGUsdCl9Y29uc3Qgcz1wYXJzZUludChlLmdldEF0dHJpYnV0ZShcImhlYWRpbmdDb2x1bW5zXCIpfHwwKTtpZihzPjApe2NvbnN0IGU9cy1uO28uc2V0QXR0cmlidXRlKFwiaGVhZGluZ0NvbHVtbnNcIixlLHQpfX12YXIgTkU9aSg5Nik7Y2xhc3MgTUUgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlRhYmxlU2VsZWN0aW9uXCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltRU119aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10Lm1vZGVsO3RoaXMubGlzdGVuVG8oZSxcImRlbGV0ZUNvbnRlbnRcIiwodCxlKT0+dGhpcy5faGFuZGxlRGVsZXRlQ29udGVudCh0LGUpLHtwcmlvcml0eTpcImhpZ2hcIn0pO3QuZWRpdGluZy52aWV3LmFkZE9ic2VydmVyKFNFKTt0aGlzLl9kZWZpbmVTZWxlY3Rpb25Db252ZXJ0ZXIoKTt0aGlzLl9lbmFibGVTaGlmdENsaWNrU2VsZWN0aW9uKCk7dGhpcy5fZW5hYmxlTW91c2VEcmFnU2VsZWN0aW9uKCl9Z2V0U2VsZWN0ZWRUYWJsZUNlbGxzKCl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247Y29uc3QgZT1vUyh0KTtpZihlLmxlbmd0aD09MCl7cmV0dXJuIG51bGx9cmV0dXJuIGV9Z2V0U2VsZWN0aW9uQXNGcmFnbWVudCgpe2NvbnN0IHQ9dGhpcy5nZXRTZWxlY3RlZFRhYmxlQ2VsbHMoKTtpZighdCl7cmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuZWRpdG9yLm1vZGVsLmNoYW5nZShlPT57Y29uc3QgaT1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtjb25zdCBuPUVFKHQsdGhpcy5lZGl0b3IucGx1Z2lucy5nZXQoXCJUYWJsZVV0aWxzXCIpLGUpO2UuaW5zZXJ0KG4saSwwKTtyZXR1cm4gaX0pfV9kZWZpbmVTZWxlY3Rpb25Db252ZXJ0ZXIoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9bmV3IFNldDt0LmNvbnZlcnNpb24uZm9yKFwiZWRpdGluZ0Rvd25jYXN0XCIpLmFkZCh0PT50Lm9uKFwic2VsZWN0aW9uXCIsKHQsbixvKT0+e2NvbnN0IHI9by53cml0ZXI7aShyKTtjb25zdCBzPXRoaXMuZ2V0U2VsZWN0ZWRUYWJsZUNlbGxzKCk7aWYoIXMpe3JldHVybn1mb3IoY29uc3QgdCBvZiBzKXtjb25zdCBpPW8ubWFwcGVyLnRvVmlld0VsZW1lbnQodCk7ci5hZGRDbGFzcyhcImNrLWVkaXRvcl9fZWRpdGFibGVfc2VsZWN0ZWRcIixpKTtlLmFkZChpKX1jb25zdCBhPW8ubWFwcGVyLnRvVmlld0VsZW1lbnQoc1tzLmxlbmd0aC0xXSk7ci5zZXRTZWxlY3Rpb24oYSwwKX0se3ByaW9yaXR5OlwibG93ZXN0XCJ9KSk7ZnVuY3Rpb24gaSh0KXtmb3IoY29uc3QgaSBvZiBlKXt0LnJlbW92ZUNsYXNzKFwiY2stZWRpdG9yX19lZGl0YWJsZV9zZWxlY3RlZFwiLGkpfWUuY2xlYXIoKX19X2VuYWJsZVNoaWZ0Q2xpY2tTZWxlY3Rpb24oKXtjb25zdCB0PXRoaXMuZWRpdG9yO2xldCBlPWZhbHNlO3RoaXMubGlzdGVuVG8odC5lZGl0aW5nLnZpZXcuZG9jdW1lbnQsXCJtb3VzZWRvd25cIiwoaSxuKT0+e2lmKCF0aGlzLmlzRW5hYmxlZCl7cmV0dXJufWlmKCFuLmRvbUV2ZW50LnNoaWZ0S2V5KXtyZXR1cm59Y29uc3Qgbz1yUyh0Lm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbilbMF07aWYoIW8pe3JldHVybn1jb25zdCByPXRoaXMuX2dldE1vZGVsVGFibGVDZWxsRnJvbURvbUV2ZW50KG4pO2lmKHImJnpFKG8scikpe2U9dHJ1ZTt0aGlzLl9zZXRDZWxsU2VsZWN0aW9uKG8scik7bi5wcmV2ZW50RGVmYXVsdCgpfX0pO3RoaXMubGlzdGVuVG8odC5lZGl0aW5nLnZpZXcuZG9jdW1lbnQsXCJtb3VzZXVwXCIsKCk9PntlPWZhbHNlfSk7dGhpcy5saXN0ZW5Ubyh0LmVkaXRpbmcudmlldy5kb2N1bWVudCxcInNlbGVjdGlvbkNoYW5nZVwiLHQ9PntpZihlKXt0LnN0b3AoKX19LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pfV9lbmFibGVNb3VzZURyYWdTZWxlY3Rpb24oKXtjb25zdCB0PXRoaXMuZWRpdG9yO2xldCBlLGk7bGV0IG49ZmFsc2U7bGV0IG89ZmFsc2U7dGhpcy5saXN0ZW5Ubyh0LmVkaXRpbmcudmlldy5kb2N1bWVudCxcIm1vdXNlZG93blwiLCh0LGkpPT57aWYoIXRoaXMuaXNFbmFibGVkKXtyZXR1cm59aWYoaS5kb21FdmVudC5zaGlmdEtleXx8aS5kb21FdmVudC5jdHJsS2V5fHxpLmRvbUV2ZW50LmFsdEtleSl7cmV0dXJufWU9dGhpcy5fZ2V0TW9kZWxUYWJsZUNlbGxGcm9tRG9tRXZlbnQoaSl9KTt0aGlzLmxpc3RlblRvKHQuZWRpdGluZy52aWV3LmRvY3VtZW50LFwibW91c2Vtb3ZlXCIsKHQscik9PntpZighci5kb21FdmVudC5idXR0b25zKXtyZXR1cm59aWYoIWUpe3JldHVybn1jb25zdCBzPXRoaXMuX2dldE1vZGVsVGFibGVDZWxsRnJvbURvbUV2ZW50KHIpO2lmKHMmJnpFKGUscykpe2k9cztpZighbiYmaSE9ZSl7bj10cnVlfX1pZighbil7cmV0dXJufW89dHJ1ZTt0aGlzLl9zZXRDZWxsU2VsZWN0aW9uKGUsaSk7ci5wcmV2ZW50RGVmYXVsdCgpfSk7dGhpcy5saXN0ZW5Ubyh0LmVkaXRpbmcudmlldy5kb2N1bWVudCxcIm1vdXNldXBcIiwoKT0+e249ZmFsc2U7bz1mYWxzZTtlPW51bGw7aT1udWxsfSk7dGhpcy5saXN0ZW5Ubyh0LmVkaXRpbmcudmlldy5kb2N1bWVudCxcInNlbGVjdGlvbkNoYW5nZVwiLHQ9PntpZihvKXt0LnN0b3AoKX19LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pfV9oYW5kbGVEZWxldGVDb250ZW50KHQsZSl7Y29uc3RbaSxuXT1lO2NvbnN0IG89dGhpcy5lZGl0b3IubW9kZWw7Y29uc3Qgcj0hbnx8bi5kaXJlY3Rpb249PVwiYmFja3dhcmRcIjtjb25zdCBzPW9TKGkpO2lmKCFzLmxlbmd0aCl7cmV0dXJufXQuc3RvcCgpO28uY2hhbmdlKHQ9Pntjb25zdCBlPXNbcj9zLmxlbmd0aC0xOjBdO28uY2hhbmdlKHQ9Pntmb3IoY29uc3QgZSBvZiBzKXtvLmRlbGV0ZUNvbnRlbnQodC5jcmVhdGVTZWxlY3Rpb24oZSxcImluXCIpKX19KTtjb25zdCBuPW8uc2NoZW1hLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZSh0LmNyZWF0ZVBvc2l0aW9uQXQoZSwwKSk7aWYobil7aWYoaS5pcyhcImRvY3VtZW50U2VsZWN0aW9uXCIpKXt0LnNldFNlbGVjdGlvbihuKX1lbHNle2kuc2V0VG8obil9fX0pfV9zZXRDZWxsU2VsZWN0aW9uKHQsZSl7Y29uc3QgaT10aGlzLl9nZXRDZWxsc1RvU2VsZWN0KHQsZSk7dGhpcy5lZGl0b3IubW9kZWwuY2hhbmdlKHQ9Pnt0LnNldFNlbGVjdGlvbihpLmNlbGxzLm1hcChlPT50LmNyZWF0ZVJhbmdlT24oZSkpLHtiYWNrd2FyZDppLmJhY2t3YXJkfSl9KX1fZ2V0TW9kZWxUYWJsZUNlbGxGcm9tRG9tRXZlbnQodCl7Y29uc3QgZT10LnRhcmdldDtjb25zdCBpPXRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5jcmVhdGVQb3NpdGlvbkF0KGUsMCk7Y29uc3Qgbj10aGlzLmVkaXRvci5lZGl0aW5nLm1hcHBlci50b01vZGVsUG9zaXRpb24oaSk7Y29uc3Qgbz1uLnBhcmVudDtpZighbyl7cmV0dXJufWlmKG8uaXMoXCJ0YWJsZUNlbGxcIikpe3JldHVybiBvfXJldHVybiBXUChcInRhYmxlQ2VsbFwiLG8pfV9nZXRDZWxsc1RvU2VsZWN0KHQsZSl7Y29uc3QgaT10aGlzLmVkaXRvci5wbHVnaW5zLmdldChcIlRhYmxlVXRpbHNcIik7Y29uc3Qgbj1pLmdldENlbGxMb2NhdGlvbih0KTtjb25zdCBvPWkuZ2V0Q2VsbExvY2F0aW9uKGUpO2NvbnN0IHI9TWF0aC5taW4obi5yb3csby5yb3cpO2NvbnN0IHM9TWF0aC5tYXgobi5yb3csby5yb3cpO2NvbnN0IGE9TWF0aC5taW4obi5jb2x1bW4sby5jb2x1bW4pO2NvbnN0IGM9TWF0aC5tYXgobi5jb2x1bW4sby5jb2x1bW4pO2NvbnN0IGw9W107Zm9yKGNvbnN0IGUgb2YgbmV3IFpQKFdQKFwidGFibGVcIix0KSx7c3RhcnRSb3c6cixlbmRSb3c6c30pKXtpZihlLmNvbHVtbj49YSYmZS5jb2x1bW48PWMpe2wucHVzaChlLmNlbGwpfX1pZihCRShuLG8pKXtyZXR1cm57Y2VsbHM6bC5yZXZlcnNlKCksYmFja3dhcmQ6dHJ1ZX19cmV0dXJue2NlbGxzOmwsYmFja3dhcmQ6ZmFsc2V9fX1mdW5jdGlvbiBCRSh0LGUpe2lmKHQucm93PmUucm93KXtyZXR1cm4gdHJ1ZX1pZih0LnJvdz09ZS5yb3cmJnQuY29sdW1uPmUuY29sdW1uKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gekUodCxlKXtyZXR1cm4gdC5wYXJlbnQucGFyZW50PT1lLnBhcmVudC5wYXJlbnR9Y2xhc3MgTEUgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlRhYmxlQ2xpcGJvYXJkXCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltNRV19aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmVkaXRpbmcudmlldy5kb2N1bWVudDt0aGlzLmxpc3RlblRvKGUsXCJjb3B5XCIsKHQsZSk9PnRoaXMuX29uQ29weUN1dCh0LGUpKTt0aGlzLmxpc3RlblRvKGUsXCJjdXRcIiwodCxlKT0+dGhpcy5fb25Db3B5Q3V0KHQsZSkpfV9vbkNvcHlDdXQodCxlKXtjb25zdCBpPXRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KFwiVGFibGVTZWxlY3Rpb25cIik7aWYoIWkuZ2V0U2VsZWN0ZWRUYWJsZUNlbGxzKCkpe3JldHVybn1pZih0Lm5hbWU9PVwiY3V0XCImJnRoaXMuZWRpdG9yLmlzUmVhZE9ubHkpe3JldHVybn1lLnByZXZlbnREZWZhdWx0KCk7dC5zdG9wKCk7Y29uc3Qgbj10aGlzLmVkaXRvci5kYXRhO2NvbnN0IG89dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvY3VtZW50O2NvbnN0IHI9bi50b1ZpZXcoaS5nZXRTZWxlY3Rpb25Bc0ZyYWdtZW50KCkpO28uZmlyZShcImNsaXBib2FyZE91dHB1dFwiLHtkYXRhVHJhbnNmZXI6ZS5kYXRhVHJhbnNmZXIsY29udGVudDpyLG1ldGhvZDp0Lm5hbWV9KX19dmFyIEZFPWkoOTgpO2NsYXNzIERFIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVyblt3RSxURSxNRSxMRSxGdl19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJUYWJsZVwifX12YXIgakU9aSgxMDApO2NsYXNzIEhFIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTtjb25zdCBpPWBjay1sYWJlbGVkLXZpZXctJHtpcygpfWA7Y29uc3Qgbj1gY2stbGFiZWxlZC12aWV3LXN0YXR1cy0ke2lzKCl9YDt0aGlzLnZpZXc9ZSh0aGlzLGksbik7dGhpcy5zZXQoXCJsYWJlbFwiKTt0aGlzLnNldChcImlzRW5hYmxlZFwiLHRydWUpO3RoaXMuc2V0KFwiZXJyb3JUZXh0XCIsbnVsbCk7dGhpcy5zZXQoXCJpbmZvVGV4dFwiLG51bGwpO3RoaXMuc2V0KFwiY2xhc3NcIik7dGhpcy5sYWJlbFZpZXc9dGhpcy5fY3JlYXRlTGFiZWxWaWV3KGkpO3RoaXMuc3RhdHVzVmlldz10aGlzLl9jcmVhdGVTdGF0dXNWaWV3KG4pO3RoaXMuYmluZChcIl9zdGF0dXNUZXh0XCIpLnRvKHRoaXMsXCJlcnJvclRleHRcIix0aGlzLFwiaW5mb1RleHRcIiwodCxlKT0+dHx8ZSk7Y29uc3Qgbz10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stbGFiZWxlZC12aWV3XCIsby50byhcImNsYXNzXCIpLG8uaWYoXCJpc0VuYWJsZWRcIixcImNrLWRpc2FibGVkXCIsdD0+IXQpXX0sY2hpbGRyZW46W3RoaXMubGFiZWxWaWV3LHRoaXMudmlldyx0aGlzLnN0YXR1c1ZpZXddfSl9X2NyZWF0ZUxhYmVsVmlldyh0KXtjb25zdCBlPW5ldyBNayh0aGlzLmxvY2FsZSk7ZS5mb3I9dDtlLmJpbmQoXCJ0ZXh0XCIpLnRvKHRoaXMsXCJsYWJlbFwiKTtyZXR1cm4gZX1fY3JlYXRlU3RhdHVzVmlldyh0KXtjb25zdCBlPW5ldyBHcCh0aGlzLmxvY2FsZSk7Y29uc3QgaT10aGlzLmJpbmRUZW1wbGF0ZTtlLnNldFRlbXBsYXRlKHt0YWc6XCJkaXZcIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stbGFiZWxlZC12aWV3X19zdGF0dXNcIixpLmlmKFwiZXJyb3JUZXh0XCIsXCJjay1sYWJlbGVkLXZpZXdfX3N0YXR1c19lcnJvclwiKSxpLmlmKFwiX3N0YXR1c1RleHRcIixcImNrLWhpZGRlblwiLHQ9PiF0KV0saWQ6dCxyb2xlOmkuaWYoXCJlcnJvclRleHRcIixcImFsZXJ0XCIpfSxjaGlsZHJlbjpbe3RleHQ6aS50byhcIl9zdGF0dXNUZXh0XCIpfV19KTtyZXR1cm4gZX1mb2N1cygpe3RoaXMudmlldy5mb2N1cygpfX1mdW5jdGlvbiBXRSh0LGUsaSl7Y29uc3Qgbj1uZXcgWXYodC5sb2NhbGUpO24uc2V0KHtpZDplLGFyaWFEZXNjcmliZWRCeUlkOml9KTtuLmJpbmQoXCJpc1JlYWRPbmx5XCIpLnRvKHQsXCJpc0VuYWJsZWRcIix0PT4hdCk7bi5iaW5kKFwiaGFzRXJyb3JcIikudG8odCxcImVycm9yVGV4dFwiLHQ9PiEhdCk7bi5vbihcImlucHV0XCIsKCk9Pnt0LmVycm9yVGV4dD1udWxsfSk7cmV0dXJuIG59ZnVuY3Rpb24gcUUodCxlLGkpe2NvbnN0IG49V2IodC5sb2NhbGUpO24uc2V0KHtpZDplLGFyaWFEZXNjcmliZWRCeUlkOml9KTtuLmJpbmQoXCJpc0VuYWJsZWRcIikudG8odCk7cmV0dXJuIG59dmFyIFVFPWkoMTAyKTtjbGFzcyAkRSBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7Y29uc3QgaT10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldChcInZhbHVlXCIsXCJcIik7dGhpcy5zZXQoXCJpZFwiKTt0aGlzLnNldChcImlzUmVhZE9ubHlcIixmYWxzZSk7dGhpcy5zZXQoXCJoYXNFcnJvclwiLGZhbHNlKTt0aGlzLnNldChcImFyaWFEZXNjcmliZWRCeUlkXCIpO3RoaXMub3B0aW9ucz1lO3RoaXMuX2Ryb3Bkb3duVmlldz10aGlzLl9jcmVhdGVEcm9wZG93blZpZXcodCk7dGhpcy5faW5wdXRWaWV3PXRoaXMuX2NyZWF0ZUlucHV0VGV4dFZpZXcodCk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWlucHV0LWNvbG9yXCIsaS5pZihcImhhc0Vycm9yXCIsXCJjay1lcnJvclwiKV0saWQ6aS50byhcImlkXCIpLFwiYXJpYS1pbnZhbGlkXCI6aS5pZihcImhhc0Vycm9yXCIsdHJ1ZSksXCJhcmlhLWRlc2NyaWJlZGJ5XCI6aS50byhcImFyaWFEZXNjcmliZWRCeUlkXCIpfSxjaGlsZHJlbjpbdGhpcy5faW5wdXRWaWV3LHRoaXMuX2Ryb3Bkb3duVmlld119KX1mb2N1cygpe3RoaXMuX2lucHV0Vmlldy5mb2N1cygpfV9jcmVhdGVEcm9wZG93blZpZXcoKXtjb25zdCB0PXRoaXMubG9jYWxlO2NvbnN0IGU9dGhpcy5iaW5kVGVtcGxhdGU7Y29uc3QgaT10aGlzLl9jcmVhdGVDb2xvckdyaWQodCk7Y29uc3Qgbj1XYih0KTtjb25zdCBvPW5ldyBHcDtjb25zdCByPXRoaXMuX2NyZWF0ZVJlbW92ZUNvbG9yQnV0dG9uKHQpO28uc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2staW5wdXQtY29sb3JfX2J1dHRvbl9fcHJldmlld1wiXSxzdHlsZTp7YmFja2dyb3VuZENvbG9yOmUudG8oXCJ2YWx1ZVwiKX19LGNoaWxkcmVuOlt7dGFnOlwic3BhblwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1pbnB1dC1jb2xvcl9fYnV0dG9uX19wcmV2aWV3X19uby1jb2xvci1pbmRpY2F0b3JcIixlLmlmKFwidmFsdWVcIixcImNrLWhpZGRlblwiLHQ9PnQhPVwiXCIpXX19XX0pO24uYnV0dG9uVmlldy5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6XCJjay1pbnB1dC1jb2xvcl9fYnV0dG9uXCJ9fSk7bi5idXR0b25WaWV3LmNoaWxkcmVuLmFkZChvKTtuLnBhbmVsUG9zaXRpb249dC51aUxhbmd1YWdlRGlyZWN0aW9uPT09XCJydGxcIj9cInNlXCI6XCJzd1wiO24ucGFuZWxWaWV3LmNoaWxkcmVuLmFkZChyKTtuLnBhbmVsVmlldy5jaGlsZHJlbi5hZGQoaSk7bi5iaW5kKFwiaXNFbmFibGVkXCIpLnRvKHRoaXMsXCJpc1JlYWRPbmx5XCIsdD0+IXQpO3JldHVybiBufV9jcmVhdGVJbnB1dFRleHRWaWV3KCl7Y29uc3QgdD10aGlzLmxvY2FsZTtjb25zdCBlPW5ldyBZdih0KTtlLmJpbmQoXCJ2YWx1ZVwiKS50byh0aGlzKTtlLmJpbmQoXCJpc1JlYWRPbmx5XCIpLnRvKHRoaXMpO2UuYmluZChcImhhc0Vycm9yXCIpLnRvKHRoaXMpO2Uub24oXCJpbnB1dFwiLCgpPT57dGhpcy52YWx1ZT1lLmVsZW1lbnQudmFsdWV9KTtlLmRlbGVnYXRlKFwiaW5wdXRcIikudG8odGhpcyk7cmV0dXJuIGV9X2NyZWF0ZVJlbW92ZUNvbG9yQnV0dG9uKCl7Y29uc3QgdD10aGlzLmxvY2FsZTtjb25zdCBlPXQudDtjb25zdCBpPW5ldyBoYih0KTtpLmNsYXNzPVwiY2staW5wdXQtY29sb3JfX3JlbW92ZS1jb2xvclwiO2kud2l0aFRleHQ9dHJ1ZTtpLmljb249ems7aS5sYWJlbD1lKFwibGlcIik7aS5vbihcImV4ZWN1dGVcIiwoKT0+e3RoaXMudmFsdWU9XCJcIjt0aGlzLl9kcm9wZG93blZpZXcuaXNPcGVuPWZhbHNlO3RoaXMuZmlyZShcImlucHV0XCIpfSk7cmV0dXJuIGl9X2NyZWF0ZUNvbG9yR3JpZCh0KXtjb25zdCBlPW5ldyBWayh0LHtjb2xvckRlZmluaXRpb25zOnRoaXMub3B0aW9ucy5jb2xvckRlZmluaXRpb25zLGNvbHVtbnM6dGhpcy5vcHRpb25zLmNvbHVtbnN9KTtlLm9uKFwiZXhlY3V0ZVwiLCh0LGUpPT57dGhpcy52YWx1ZT1lLnZhbHVlO3RoaXMuX2Ryb3Bkb3duVmlldy5pc09wZW49ZmFsc2U7dGhpcy5maXJlKFwiaW5wdXRcIil9KTtlLmJpbmQoXCJzZWxlY3RlZENvbG9yXCIpLnRvKHRoaXMsXCJ2YWx1ZVwiKTtyZXR1cm4gZX19Y29uc3QgR0U9bmIuZGVmYXVsdFBvc2l0aW9ucztjb25zdCBLRT1bR0Uubm9ydGhBcnJvd1NvdXRoLEdFLm5vcnRoQXJyb3dTb3V0aFdlc3QsR0Uubm9ydGhBcnJvd1NvdXRoRWFzdCxHRS5zb3V0aEFycm93Tm9ydGgsR0Uuc291dGhBcnJvd05vcnRoV2VzdCxHRS5zb3V0aEFycm93Tm9ydGhFYXN0XTtjb25zdCBKRT10PT50PT09XCJcIjtmdW5jdGlvbiBZRSh0LGUpe2NvbnN0IGk9dC5wbHVnaW5zLmdldChcIkNvbnRleHR1YWxCYWxsb29uXCIpO2lmKG5TKHQuZWRpdGluZy52aWV3LmRvY3VtZW50LnNlbGVjdGlvbikpe2xldCBuO2lmKGU9PT1cImNlbGxcIil7bj1YRSh0KX1lbHNle249UUUodCl9aS51cGRhdGVQb3NpdGlvbihuKX19ZnVuY3Rpb24gUUUodCl7Y29uc3QgZT10Lm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCk7Y29uc3QgaT1XUChcInRhYmxlXCIsZSk7Y29uc3Qgbj10LmVkaXRpbmcubWFwcGVyLnRvVmlld0VsZW1lbnQoaSk7cmV0dXJue3RhcmdldDp0LmVkaXRpbmcudmlldy5kb21Db252ZXJ0ZXIudmlld1RvRG9tKG4pLHBvc2l0aW9uczpLRX19ZnVuY3Rpb24gWEUodCl7Y29uc3QgZT11Uih0Lm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCkpO2NvbnN0IGk9dC5lZGl0aW5nLm1hcHBlci50b1ZpZXdFbGVtZW50KGUpO3JldHVybnt0YXJnZXQ6dC5lZGl0aW5nLnZpZXcuZG9tQ29udmVydGVyLnZpZXdUb0RvbShpKSxwb3NpdGlvbnM6S0V9fWZ1bmN0aW9uIFpFKHQpe3JldHVybntub25lOnQoXCJtcVwiKSxzb2xpZDp0KFwibXJcIiksZG90dGVkOnQoXCJtc1wiKSxkYXNoZWQ6dChcIm10XCIpLGRvdWJsZTp0KFwibXVcIiksZ3Jvb3ZlOnQoXCJtdlwiKSxyaWRnZTp0KFwibXdcIiksaW5zZXQ6dChcIm14XCIpLG91dHNldDp0KFwibXlcIil9fWZ1bmN0aW9uIHRSKHQpe3JldHVybiB0KFwibXpcIil9ZnVuY3Rpb24gZVIodCl7cmV0dXJuIHQoXCJuYVwiKX1mdW5jdGlvbiBpUih0KXt0PXQudHJpbSgpO3JldHVybiBKRSh0KXx8dEModCl9ZnVuY3Rpb24gblIodCl7dD10LnRyaW0oKTtyZXR1cm4gSkUodCl8fGxSKHQpfHxvQyh0KXx8c0ModCl9ZnVuY3Rpb24gb1IodCl7dD10LnRyaW0oKTtyZXR1cm4gSkUodCl8fGxSKHQpfHxvQyh0KX1mdW5jdGlvbiByUih0KXtjb25zdCBlPW5ldyB5cztjb25zdCBpPVpFKHQudCk7Zm9yKGNvbnN0IG4gaW4gaSl7Y29uc3Qgbz17dHlwZTpcImJ1dHRvblwiLG1vZGVsOm5ldyBlXyh7X2JvcmRlclN0eWxlVmFsdWU6bj09PVwibm9uZVwiP1wiXCI6bixsYWJlbDppW25dLHdpdGhUZXh0OnRydWV9KX07aWYobj09PVwibm9uZVwiKXtvLm1vZGVsLmJpbmQoXCJpc09uXCIpLnRvKHQsXCJib3JkZXJTdHlsZVwiLHQ9PiF0KX1lbHNle28ubW9kZWwuYmluZChcImlzT25cIikudG8odCxcImJvcmRlclN0eWxlXCIsdD0+dD09PW4pfWUuYWRkKG8pfXJldHVybiBlfWZ1bmN0aW9uIHNSKHt2aWV3OnQsaWNvbnM6ZSx0b29sYmFyOmksbGFiZWxzOm4scHJvcGVydHlOYW1lOm8sbmFtZVRvVmFsdWU6cn0pe2Zvcihjb25zdCBzIGluIG4pe2NvbnN0IGE9bmV3IGhiKHQubG9jYWxlKTthLnNldCh7bGFiZWw6bltzXSxpY29uOmVbc119KTthLmJpbmQoXCJpc09uXCIpLnRvKHQsbyx0PT50PT09cihzKSk7YS5vbihcImV4ZWN1dGVcIiwoKT0+e3Rbb109cihzKX0pO2kuaXRlbXMuYWRkKGEpfX1jb25zdCBhUj1be2NvbG9yOlwiaHNsKDAsIDAlLCAwJSlcIixsYWJlbDpcIkJsYWNrXCJ9LHtjb2xvcjpcImhzbCgwLCAwJSwgMzAlKVwiLGxhYmVsOlwiRGltIGdyZXlcIn0se2NvbG9yOlwiaHNsKDAsIDAlLCA2MCUpXCIsbGFiZWw6XCJHcmV5XCJ9LHtjb2xvcjpcImhzbCgwLCAwJSwgOTAlKVwiLGxhYmVsOlwiTGlnaHQgZ3JleVwifSx7Y29sb3I6XCJoc2woMCwgMCUsIDEwMCUpXCIsbGFiZWw6XCJXaGl0ZVwiLGhhc0JvcmRlcjp0cnVlfSx7Y29sb3I6XCJoc2woMCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJSZWRcIn0se2NvbG9yOlwiaHNsKDMwLCA3NSUsIDYwJSlcIixsYWJlbDpcIk9yYW5nZVwifSx7Y29sb3I6XCJoc2woNjAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiWWVsbG93XCJ9LHtjb2xvcjpcImhzbCg5MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJMaWdodCBncmVlblwifSx7Y29sb3I6XCJoc2woMTIwLCA3NSUsIDYwJSlcIixsYWJlbDpcIkdyZWVuXCJ9LHtjb2xvcjpcImhzbCgxNTAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiQXF1YW1hcmluZVwifSx7Y29sb3I6XCJoc2woMTgwLCA3NSUsIDYwJSlcIixsYWJlbDpcIlR1cnF1b2lzZVwifSx7Y29sb3I6XCJoc2woMjEwLCA3NSUsIDYwJSlcIixsYWJlbDpcIkxpZ2h0IGJsdWVcIn0se2NvbG9yOlwiaHNsKDI0MCwgNzUlLCA2MCUpXCIsbGFiZWw6XCJCbHVlXCJ9LHtjb2xvcjpcImhzbCgyNzAsIDc1JSwgNjAlKVwiLGxhYmVsOlwiUHVycGxlXCJ9XTtmdW5jdGlvbiBjUih0KXtyZXR1cm4oZSxpLG4pPT57Y29uc3Qgbz1uZXcgJEUoZS5sb2NhbGUse2NvbG9yRGVmaW5pdGlvbnM6ZFIodC5jb2xvckNvbmZpZyksY29sdW1uczp0LmNvbHVtbnN9KTtvLnNldCh7aWQ6aSxhcmlhRGVzY3JpYmVkQnlJZDpufSk7by5iaW5kKFwiaXNSZWFkT25seVwiKS50byhlLFwiaXNFbmFibGVkXCIsdD0+IXQpO28uYmluZChcImVycm9yVGV4dFwiKS50byhlKTtvLm9uKFwiaW5wdXRcIiwoKT0+e2UuZXJyb3JUZXh0PW51bGx9KTtyZXR1cm4gb319ZnVuY3Rpb24gbFIodCl7Y29uc3QgZT1wYXJzZUZsb2F0KHQpO3JldHVybiFOdW1iZXIuaXNOYU4oZSkmJnQ9PT1TdHJpbmcoZSl9ZnVuY3Rpb24gZFIodCl7cmV0dXJuIHQubWFwKHQ9Pih7Y29sb3I6dC5tb2RlbCxsYWJlbDp0LmxhYmVsLG9wdGlvbnM6e2hhc0JvcmRlcjp0Lmhhc0JvcmRlcn19KSl9ZnVuY3Rpb24gdVIodCl7Y29uc3QgZT10Lm5vZGVBZnRlciYmdC5ub2RlQWZ0ZXIuaXMoXCJ0YWJsZUNlbGxcIik7cmV0dXJuIGU/dC5ub2RlQWZ0ZXI6V1AoXCJ0YWJsZUNlbGxcIix0KX12YXIgaFI9aSgxMDQpO2NsYXNzIGZSIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCxlPXt9KXtzdXBlcih0KTtjb25zdCBpPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KFwiY2xhc3NcIixlLmNsYXNzfHxudWxsKTt0aGlzLmNoaWxkcmVuPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpO2lmKGUuY2hpbGRyZW4pe2UuY2hpbGRyZW4uZm9yRWFjaCh0PT50aGlzLmNoaWxkcmVuLmFkZCh0KSl9dGhpcy5zZXQoXCJfcm9sZVwiLG51bGwpO3RoaXMuc2V0KFwiX2FyaWFMYWJlbGxlZEJ5XCIsbnVsbCk7aWYoZS5sYWJlbFZpZXcpe3RoaXMuc2V0KHtfcm9sZTpcImdyb3VwXCIsX2FyaWFMYWJlbGxlZEJ5OmUubGFiZWxWaWV3LmlkfSl9dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWZvcm1fX3Jvd1wiLGkudG8oXCJjbGFzc1wiKV0scm9sZTppLnRvKFwiX3JvbGVcIiksXCJhcmlhLWxhYmVsbGVkYnlcIjppLnRvKFwiX2FyaWFMYWJlbGxlZEJ5XCIpfSxjaGlsZHJlbjp0aGlzLmNoaWxkcmVufSl9fXZhciBnUj1pKDEwNik7Y2xhc3MgbVIgZXh0ZW5kcyBHcHtjb25zdHJ1Y3Rvcih0LGU9e30pe3N1cGVyKHQpO2NvbnN0IGk9dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5jaGlsZHJlbj10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKTt0aGlzLnNldChcImNsYXNzXCIsZS5jbGFzc3x8bnVsbCk7dGhpcy5zZXQoXCJsYWJlbFwiLGUubGFiZWx8fFwiXCIpO2NvbnN0IG49bmV3IEdwKHQpO24uc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJja1wiLFwiY2stZm9ybV9faGVhZGVyX19sYWJlbFwiXX0sY2hpbGRyZW46W3t0ZXh0OmkudG8oXCJsYWJlbFwiKX1dfSk7dGhpcy5jaGlsZHJlbi5hZGQobik7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZGl2XCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWZvcm1fX2hlYWRlclwiLGkudG8oXCJjbGFzc1wiKV19LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW59KX19dmFyIHBSPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMC4yNjEgNy4wNjJsMi44OCAxLjY2M2EuNzUuNzUgMCAwIDEtLjc1IDEuM0wxMC41IDguOTMzdjcuMzE3YS43NS43NSAwIDEgMS0xLjUgMFY4LjkzMmwtMS44OSAxLjA5M2EuNzUuNzUgMCAwIDEtLjc1LTEuM2wyLjg3OS0xLjY2M2EuNzUyLjc1MiAwIDAgMSAuNTExLS4xODcuNzUyLjc1MiAwIDAgMSAuNTExLjE4N3pNMTUuMjUgNGEuNzUuNzUgMCAxIDEgMCAxLjVINC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoMTAuNXpcIi8+PC9zdmc+Jzt2YXIgYlI9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTkuNzUgMTEuODc1YS43NTIuNzUyIDAgMCAxIC41MDguMTg0bDIuODgzIDEuNjY2YS43NS43NSAwIDAgMS0uNjU5IDEuMzQ0bC0uMDkxLS4wNDQtMS44OTItMS4wOTMuMDAxIDQuMzE4YS43NS43NSAwIDEgMS0xLjUgMHYtNC4zMTdsLTEuODkgMS4wOTJhLjc1Ljc1IDAgMCAxLS43NS0xLjNsMi44NzktMS42NjNhLjc1Mi43NTIgMCAwIDEgLjUxLS4xODd6TTE1LjI1IDlhLjc1Ljc1IDAgMSAxIDAgMS41SDQuNzVhLjc1Ljc1IDAgMSAxIDAtMS41aDEwLjV6TTkuNzUuMzc1YS43NS43NSAwIDAgMSAuNzUuNzV2NC4zMThsMS44OS0xLjA5My4wOTItLjA0NWEuNzUuNzUgMCAwIDEgLjY1OSAxLjM0NGwtMi44ODMgMS42NjdhLjc1Mi43NTIgMCAwIDEtLjUwOC4xODQuNzUyLjc1MiAwIDAgMS0uNTExLS4xODdMNi4zNTkgNS42NWEuNzUuNzUgMCAwIDEgLjc1LTEuMjk5TDkgNS40NDJWMS4xMjVhLjc1Ljc1IDAgMCAxIC43NS0uNzV6XCIvPjwvc3ZnPic7dmFyIHdSPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk05LjIzOSAxMy45MzhsLTIuODgtMS42NjNhLjc1Ljc1IDAgMCAxIC43NS0xLjNMOSAxMi4wNjdWNC43NWEuNzUuNzUgMCAxIDEgMS41IDB2Ny4zMThsMS44OS0xLjA5M2EuNzUuNzUgMCAwIDEgLjc1IDEuM2wtMi44NzkgMS42NjNhLjc1Mi43NTIgMCAwIDEtLjUxMS4xODcuNzUyLjc1MiAwIDAgMS0uNTExLS4xODd6TTQuMjUgMTdhLjc1Ljc1IDAgMSAxIDAtMS41aDEwLjVhLjc1Ljc1IDAgMCAxIDAgMS41SDQuMjV6XCIvPjwvc3ZnPic7dmFyIGtSPWkoMTIpO3ZhciBfUj1pKDEzKTt2YXIgdlI9aSgxMTApO2NvbnN0IHlSPXtsZWZ0Olp3LGNlbnRlcjplayxyaWdodDp0ayxqdXN0aWZ5OmlrLHRvcDpwUixtaWRkbGU6YlIsYm90dG9tOndSfTtjbGFzcyB4UiBleHRlbmRzIEdwe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCk7dGhpcy5zZXQoe2JvcmRlclN0eWxlOlwiXCIsYm9yZGVyV2lkdGg6XCJcIixib3JkZXJDb2xvcjpcIlwiLHBhZGRpbmc6XCJcIixiYWNrZ3JvdW5kQ29sb3I6XCJcIix3aWR0aDpcIlwiLGhlaWdodDpcIlwiLGhvcml6b250YWxBbGlnbm1lbnQ6XCJcIix2ZXJ0aWNhbEFsaWdubWVudDpcIlwifSk7dGhpcy5vcHRpb25zPWU7Y29uc3R7Ym9yZGVyU3R5bGVEcm9wZG93bjppLGJvcmRlcldpZHRoSW5wdXQ6bixib3JkZXJDb2xvcklucHV0Om8sYm9yZGVyUm93TGFiZWw6cn09dGhpcy5fY3JlYXRlQm9yZGVyRmllbGRzKCk7Y29uc3R7d2lkdGhJbnB1dDpzLG9wZXJhdG9yTGFiZWw6YSxoZWlnaHRJbnB1dDpjLGRpbWVuc2lvbnNMYWJlbDpsfT10aGlzLl9jcmVhdGVEaW1lbnNpb25GaWVsZHMoKTtjb25zdHtob3Jpem9udGFsQWxpZ25tZW50VG9vbGJhcjpkLHZlcnRpY2FsQWxpZ25tZW50VG9vbGJhcjp1LGFsaWdubWVudExhYmVsOmh9PXRoaXMuX2NyZWF0ZUFsaWdubWVudEZpZWxkcygpO3RoaXMuZm9jdXNUcmFja2VyPW5ldyBmYjt0aGlzLmtleXN0cm9rZXM9bmV3IGRwO3RoaXMuY2hpbGRyZW49dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5ib3JkZXJTdHlsZURyb3Bkb3duPWk7dGhpcy5ib3JkZXJXaWR0aElucHV0PW47dGhpcy5ib3JkZXJDb2xvcklucHV0PW87dGhpcy5iYWNrZ3JvdW5kSW5wdXQ9dGhpcy5fY3JlYXRlQmFja2dyb3VuZEZpZWxkKCk7dGhpcy5wYWRkaW5nSW5wdXQ9dGhpcy5fY3JlYXRlUGFkZGluZ0ZpZWxkKCk7dGhpcy53aWR0aElucHV0PXM7dGhpcy5oZWlnaHRJbnB1dD1jO3RoaXMuaG9yaXpvbnRhbEFsaWdubWVudFRvb2xiYXI9ZDt0aGlzLnZlcnRpY2FsQWxpZ25tZW50VG9vbGJhcj11O2NvbnN0e3NhdmVCdXR0b25WaWV3OmYsY2FuY2VsQnV0dG9uVmlldzpnfT10aGlzLl9jcmVhdGVBY3Rpb25CdXR0b25zKCk7dGhpcy5zYXZlQnV0dG9uVmlldz1mO3RoaXMuY2FuY2VsQnV0dG9uVmlldz1nO3RoaXMuX2ZvY3VzYWJsZXM9bmV3IGJwO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLl9mb2N1c2FibGVzLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOlwic2hpZnQgKyB0YWJcIixmb2N1c05leHQ6XCJ0YWJcIn19KTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgbVIodCx7bGFiZWw6dGhpcy50KFwi0KHQstC+0LnRgdGC0LLQsCDRj9GH0LXQudC60LhcIil9KSk7dGhpcy5jaGlsZHJlbi5hZGQobmV3IGZSKHQse2xhYmVsVmlldzpyLGNoaWxkcmVuOltyLGksbyxuXSxjbGFzczpcImNrLXRhYmxlLWZvcm1fX2JvcmRlci1yb3dcIn0pKTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgZlIodCx7Y2hpbGRyZW46W3RoaXMuYmFja2dyb3VuZElucHV0XX0pKTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgZlIodCx7Y2hpbGRyZW46W25ldyBmUih0LHtsYWJlbFZpZXc6bCxjaGlsZHJlbjpbbCxzLGEsY10sY2xhc3M6XCJjay10YWJsZS1mb3JtX19kaW1lbnNpb25zLXJvd1wifSksbmV3IGZSKHQse2NoaWxkcmVuOlt0aGlzLnBhZGRpbmdJbnB1dF0sY2xhc3M6XCJjay10YWJsZS1jZWxsLXByb3BlcnRpZXMtZm9ybV9fcGFkZGluZy1yb3dcIn0pXX0pKTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgZlIodCx7bGFiZWxWaWV3OmgsY2hpbGRyZW46W2gsZCx1XSxjbGFzczpcImNrLXRhYmxlLWNlbGwtcHJvcGVydGllcy1mb3JtX19hbGlnbm1lbnQtcm93XCJ9KSk7dGhpcy5jaGlsZHJlbi5hZGQobmV3IGZSKHQse2NoaWxkcmVuOlt0aGlzLnNhdmVCdXR0b25WaWV3LHRoaXMuY2FuY2VsQnV0dG9uVmlld10sY2xhc3M6XCJjay10YWJsZS1mb3JtX19hY3Rpb24tcm93XCJ9KSk7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOlwiZm9ybVwiLGF0dHJpYnV0ZXM6e2NsYXNzOltcImNrXCIsXCJjay1mb3JtXCIsXCJjay10YWJsZS1mb3JtXCIsXCJjay10YWJsZS1jZWxsLXByb3BlcnRpZXMtZm9ybVwiXSx0YWJpbmRleDpcIi0xXCJ9LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW59KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtRdih7dmlldzp0aGlzfSk7W3RoaXMuYm9yZGVyU3R5bGVEcm9wZG93bix0aGlzLmJvcmRlckNvbG9ySW5wdXQsdGhpcy5ib3JkZXJXaWR0aElucHV0LHRoaXMuYmFja2dyb3VuZElucHV0LHRoaXMud2lkdGhJbnB1dCx0aGlzLmhlaWdodElucHV0LHRoaXMucGFkZGluZ0lucHV0LHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudFRvb2xiYXIsdGhpcy52ZXJ0aWNhbEFsaWdubWVudFRvb2xiYXIsdGhpcy5zYXZlQnV0dG9uVmlldyx0aGlzLmNhbmNlbEJ1dHRvblZpZXddLmZvckVhY2godD0+e3RoaXMuX2ZvY3VzYWJsZXMuYWRkKHQpO3RoaXMuZm9jdXNUcmFja2VyLmFkZCh0LmVsZW1lbnQpfSk7dGhpcy5rZXlzdHJva2VzLmxpc3RlblRvKHRoaXMuZWxlbWVudCl9Zm9jdXMoKXt0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0ZpcnN0KCl9X2NyZWF0ZUJvcmRlckZpZWxkcygpe2NvbnN0IHQ9Y1Ioe2NvbG9yQ29uZmlnOnRoaXMub3B0aW9ucy5ib3JkZXJDb2xvcnMsY29sdW1uczo1fSk7Y29uc3QgZT10aGlzLmxvY2FsZTtjb25zdCBpPXRoaXMudDtjb25zdCBuPW5ldyBNayhlKTtuLnRleHQ9aShcIm5iXCIpO2NvbnN0IG89WkUoaSk7Y29uc3Qgcj1uZXcgSEUoZSxxRSk7ci5zZXQoe2xhYmVsOmkoXCJuY1wiKSxjbGFzczpcImNrLXRhYmxlLWZvcm1fX2JvcmRlci1zdHlsZVwifSk7ci52aWV3LmJ1dHRvblZpZXcuc2V0KHtpc09uOmZhbHNlLHdpdGhUZXh0OnRydWUsdG9vbHRpcDppKFwibmNcIil9KTtyLnZpZXcuYnV0dG9uVmlldy5iaW5kKFwibGFiZWxcIikudG8odGhpcyxcImJvcmRlclN0eWxlXCIsdD0+b1t0P3Q6XCJub25lXCJdKTtyLnZpZXcub24oXCJleGVjdXRlXCIsdD0+e3RoaXMuYm9yZGVyU3R5bGU9dC5zb3VyY2UuX2JvcmRlclN0eWxlVmFsdWV9KTtVYihyLnZpZXcsclIodGhpcykpO2NvbnN0IHM9bmV3IEhFKGUsV0UpO3Muc2V0KHtsYWJlbDppKFwibmRcIiksY2xhc3M6XCJjay10YWJsZS1mb3JtX19ib3JkZXItd2lkdGhcIn0pO3Mudmlldy5iaW5kKFwidmFsdWVcIikudG8odGhpcyxcImJvcmRlcldpZHRoXCIpO3MuYmluZChcImlzRW5hYmxlZFwiKS50byh0aGlzLFwiYm9yZGVyU3R5bGVcIixDUik7cy52aWV3Lm9uKFwiaW5wdXRcIiwoKT0+e3RoaXMuYm9yZGVyV2lkdGg9cy52aWV3LmVsZW1lbnQudmFsdWV9KTtjb25zdCBhPW5ldyBIRShlLHQpO2Euc2V0KHtsYWJlbDppKFwibmVcIiksY2xhc3M6XCJjay10YWJsZS1mb3JtX19ib3JkZXItY29sb3JcIn0pO2Eudmlldy5iaW5kKFwidmFsdWVcIikudG8odGhpcyxcImJvcmRlckNvbG9yXCIpO2EuYmluZChcImlzRW5hYmxlZFwiKS50byh0aGlzLFwiYm9yZGVyU3R5bGVcIixDUik7YS52aWV3Lm9uKFwiaW5wdXRcIiwoKT0+e3RoaXMuYm9yZGVyQ29sb3I9YS52aWV3LnZhbHVlfSk7dGhpcy5vbihcImNoYW5nZTpib3JkZXJTdHlsZVwiLCh0LGUsaSk9PntpZighQ1IoaSkpe3RoaXMuYm9yZGVyQ29sb3I9XCJcIjt0aGlzLmJvcmRlcldpZHRoPVwiXCJ9fSk7cmV0dXJue2JvcmRlclJvd0xhYmVsOm4sYm9yZGVyU3R5bGVEcm9wZG93bjpyLGJvcmRlckNvbG9ySW5wdXQ6YSxib3JkZXJXaWR0aElucHV0OnN9fV9jcmVhdGVCYWNrZ3JvdW5kRmllbGQoKXtjb25zdCB0PXRoaXMubG9jYWxlO2NvbnN0IGU9dGhpcy50O2NvbnN0IGk9Y1Ioe2NvbG9yQ29uZmlnOnRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3JzLGNvbHVtbnM6NX0pO2NvbnN0IG49bmV3IEhFKHQsaSk7bi5zZXQoe2xhYmVsOmUoXCJuZlwiKSxjbGFzczpcImNrLXRhYmxlLWNlbGwtcHJvcGVydGllcy1mb3JtX19iYWNrZ3JvdW5kXCJ9KTtuLnZpZXcuYmluZChcInZhbHVlXCIpLnRvKHRoaXMsXCJiYWNrZ3JvdW5kQ29sb3JcIik7bi52aWV3Lm9uKFwiaW5wdXRcIiwoKT0+e3RoaXMuYmFja2dyb3VuZENvbG9yPW4udmlldy52YWx1ZX0pO3JldHVybiBufV9jcmVhdGVEaW1lbnNpb25GaWVsZHMoKXtjb25zdCB0PXRoaXMubG9jYWxlO2NvbnN0IGU9dGhpcy50O2NvbnN0IGk9bmV3IE1rKHQpO2kudGV4dD1lKFwibmdcIik7Y29uc3Qgbj1uZXcgSEUodCxXRSk7bi5zZXQoe2xhYmVsOmUoXCJuZFwiKSxjbGFzczpcImNrLXRhYmxlLWZvcm1fX2RpbWVuc2lvbnMtcm93X193aWR0aFwifSk7bi52aWV3LmJpbmQoXCJ2YWx1ZVwiKS50byh0aGlzLFwid2lkdGhcIik7bi52aWV3Lm9uKFwiaW5wdXRcIiwoKT0+e3RoaXMud2lkdGg9bi52aWV3LmVsZW1lbnQudmFsdWV9KTtjb25zdCBvPW5ldyBHcCh0KTtvLnNldFRlbXBsYXRlKHt0YWc6XCJzcGFuXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2stdGFibGUtZm9ybV9fZGltZW5zaW9uLW9wZXJhdG9yXCJdfSxjaGlsZHJlbjpbe3RleHQ6XCLDl1wifV19KTtjb25zdCByPW5ldyBIRSh0LFdFKTtyLnNldCh7bGFiZWw6ZShcIm5oXCIpLGNsYXNzOlwiY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3dfX2hlaWdodFwifSk7ci52aWV3LmJpbmQoXCJ2YWx1ZVwiKS50byh0aGlzLFwiaGVpZ2h0XCIpO3Iudmlldy5vbihcImlucHV0XCIsKCk9Pnt0aGlzLmhlaWdodD1yLnZpZXcuZWxlbWVudC52YWx1ZX0pO3JldHVybntkaW1lbnNpb25zTGFiZWw6aSx3aWR0aElucHV0Om4sb3BlcmF0b3JMYWJlbDpvLGhlaWdodElucHV0OnJ9fV9jcmVhdGVQYWRkaW5nRmllbGQoKXtjb25zdCB0PXRoaXMubG9jYWxlO2NvbnN0IGU9dGhpcy50O2NvbnN0IGk9bmV3IEhFKHQsV0UpO2kuc2V0KHtsYWJlbDplKFwibmlcIiksY2xhc3M6XCJjay10YWJsZS1jZWxsLXByb3BlcnRpZXMtZm9ybV9fcGFkZGluZ1wifSk7aS52aWV3LmJpbmQoXCJ2YWx1ZVwiKS50byh0aGlzLFwicGFkZGluZ1wiKTtpLnZpZXcub24oXCJpbnB1dFwiLCgpPT57dGhpcy5wYWRkaW5nPWkudmlldy5lbGVtZW50LnZhbHVlfSk7cmV0dXJuIGl9X2NyZWF0ZUFsaWdubWVudEZpZWxkcygpe2NvbnN0IHQ9dGhpcy5sb2NhbGU7Y29uc3QgZT10aGlzLnQ7Y29uc3QgaT1uZXcgTWsodCk7aS50ZXh0PWUoXCJualwiKTtjb25zdCBuPW5ldyBYYih0KTtjb25zdCBvPXRoaXMubG9jYWxlLmNvbnRlbnRMYW5ndWFnZURpcmVjdGlvbj09PVwicnRsXCI7bi5zZXQoe2lzQ29tcGFjdDp0cnVlLGFyaWFMYWJlbDplKFwibmtcIil9KTtzUih7dmlldzp0aGlzLGljb25zOnlSLHRvb2xiYXI6bixsYWJlbHM6dGhpcy5faG9yaXpvbnRhbEFsaWdubWVudExhYmVscyxwcm9wZXJ0eU5hbWU6XCJob3Jpem9udGFsQWxpZ25tZW50XCIsbmFtZVRvVmFsdWU6dD0+dD09PShvP1wicmlnaHRcIjpcImxlZnRcIik/XCJcIjp0fSk7Y29uc3Qgcj1uZXcgWGIodCk7ci5zZXQoe2lzQ29tcGFjdDp0cnVlLGFyaWFMYWJlbDplKFwibmxcIil9KTtzUih7dmlldzp0aGlzLGljb25zOnlSLHRvb2xiYXI6cixsYWJlbHM6dGhpcy5fdmVydGljYWxBbGlnbm1lbnRMYWJlbHMscHJvcGVydHlOYW1lOlwidmVydGljYWxBbGlnbm1lbnRcIixuYW1lVG9WYWx1ZTp0PT50PT09XCJtaWRkbGVcIj9cIlwiOnR9KTtyZXR1cm57aG9yaXpvbnRhbEFsaWdubWVudFRvb2xiYXI6bix2ZXJ0aWNhbEFsaWdubWVudFRvb2xiYXI6cixhbGlnbm1lbnRMYWJlbDppfX1fY3JlYXRlQWN0aW9uQnV0dG9ucygpe2NvbnN0IHQ9dGhpcy5sb2NhbGU7Y29uc3QgZT10aGlzLnQ7Y29uc3QgaT1uZXcgaGIodCk7Y29uc3Qgbj1uZXcgaGIodCk7Y29uc3Qgbz1bdGhpcy5ib3JkZXJXaWR0aElucHV0LHRoaXMuYm9yZGVyQ29sb3JJbnB1dCx0aGlzLmJhY2tncm91bmRJbnB1dCx0aGlzLnBhZGRpbmdJbnB1dF07aS5zZXQoe2xhYmVsOmUoXCJsb1wiKSxpY29uOlh2LGNsYXNzOlwiY2stYnV0dG9uLXNhdmVcIix0eXBlOlwic3VibWl0XCIsd2l0aFRleHQ6dHJ1ZX0pO2kuYmluZChcImlzRW5hYmxlZFwiKS50b01hbnkobyxcImVycm9yVGV4dFwiLCguLi50KT0+dC5ldmVyeSh0PT4hdCkpO24uc2V0KHtsYWJlbDplKFwibHBcIiksaWNvbjpadixjbGFzczpcImNrLWJ1dHRvbi1jYW5jZWxcIix0eXBlOlwiY2FuY2VsXCIsd2l0aFRleHQ6dHJ1ZX0pO24uZGVsZWdhdGUoXCJleGVjdXRlXCIpLnRvKHRoaXMsXCJjYW5jZWxcIik7cmV0dXJue3NhdmVCdXR0b25WaWV3OmksY2FuY2VsQnV0dG9uVmlldzpufX1nZXQgX2hvcml6b250YWxBbGlnbm1lbnRMYWJlbHMoKXtjb25zdCB0PXRoaXMubG9jYWxlO2NvbnN0IGU9dGhpcy50O2NvbnN0IGk9ZShcIm5tXCIpO2NvbnN0IG49ZShcIm5uXCIpO2NvbnN0IG89ZShcIm5vXCIpO2NvbnN0IHI9ZShcIm5wXCIpO2lmKHQudWlMYW5ndWFnZURpcmVjdGlvbj09PVwicnRsXCIpe3JldHVybntyaWdodDpvLGNlbnRlcjpuLGxlZnQ6aSxqdXN0aWZ5OnJ9fWVsc2V7cmV0dXJue2xlZnQ6aSxjZW50ZXI6bixyaWdodDpvLGp1c3RpZnk6cn19fWdldCBfdmVydGljYWxBbGlnbm1lbnRMYWJlbHMoKXtjb25zdCB0PXRoaXMudDtyZXR1cm57dG9wOnQoXCJucVwiKSxtaWRkbGU6dChcIm5yXCIpLGJvdHRvbTp0KFwibnNcIil9fX1mdW5jdGlvbiBDUih0KXtyZXR1cm4hIXR9dmFyIEFSPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMS4xMDUgMThsLS4xNyAxSDIuNUExLjUgMS41IDAgMCAxIDEgMTcuNXYtMTVBMS41IDEuNSAwIDAgMSAyLjUgMWgxNUExLjUgMS41IDAgMCAxIDE5IDIuNXY5Ljk3NWwtLjg1LS4xMjQtLjE1LS4zMDJWOGgtNXY0aC4wMjFsLS4xNzIuMzUxLTEuOTE2LjI4LS4xNTEuMDI3Yy0uMjg3LjA2My0uNTQuMTgyLS43NTUuMzQxTDggMTN2NWgzLjEwNXpNMiAxMmg1VjhIMnY0em0xMC00SDh2NGg0Vjh6TTIgMnY1aDVWMkgyem0wIDE2aDV2LTVIMnY1ek0xMyA3aDVWMmgtNXY1ek04IDJ2NWg0VjJIOHpcIiBvcGFjaXR5PVwiLjZcIi8+PHBhdGggZD1cIk0xNS41IDExLjVsMS4zMjMgMi42OCAyLjk1Ny40My0yLjE0IDIuMDg1LjUwNSAyLjk0NkwxNS41IDE4LjI1bC0yLjY0NSAxLjM5LjUwNS0yLjk0NS0yLjE0LTIuMDg2IDIuOTU3LS40M0wxNS41IDExLjV6TTEzIDZhMSAxIDAgMCAxIDEgMXYzLjE3MmEyLjA0NyAyLjA0NyAwIDAgMC0uMjkzLjQ0M2wtLjg1OCAxLjczNi0xLjkxNi4yOC0uMTUxLjAyN0ExLjk3NiAxLjk3NiAwIDAgMCA5LjMxNSAxNEg3YTEgMSAwIDAgMS0xLTFWN2ExIDEgMCAwIDEgMS0xaDZ6bS0xIDJIOHY0aDRWOHpcIi8+PC9zdmc+Jztjb25zdCBUUj01MDA7Y2xhc3MgUFIgZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2tiXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlRhYmxlQ2VsbFByb3BlcnRpZXNVSVwifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3QuY29uZmlnLmRlZmluZShcInRhYmxlLnRhYmxlQ2VsbFByb3BlcnRpZXNcIix7Ym9yZGVyQ29sb3JzOmFSLGJhY2tncm91bmRDb2xvcnM6YVJ9KX1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0aGlzLl9iYWxsb29uPXQucGx1Z2lucy5nZXQoa2IpO3RoaXMudmlldz10aGlzLl9jcmVhdGVQcm9wZXJ0aWVzVmlldygpO3RoaXMuX3VuZG9TdGVwQmF0Y2g9bnVsbDt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFwidGFibGVDZWxsUHJvcGVydGllc1wiLHQ9Pntjb25zdCBpPW5ldyBoYih0KTtpLnNldCh7bGFiZWw6ZShcImtoXCIpLGljb246QVIsdG9vbHRpcDp0cnVlfSk7dGhpcy5saXN0ZW5UbyhpLFwiZXhlY3V0ZVwiLCgpPT50aGlzLl9zaG93VmlldygpKTtyZXR1cm4gaX0pfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCk7dGhpcy52aWV3LmRlc3Ryb3koKX1fY3JlYXRlUHJvcGVydGllc1ZpZXcoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5lZGl0aW5nLnZpZXcuZG9jdW1lbnQ7Y29uc3QgaT10LmNvbmZpZy5nZXQoXCJ0YWJsZS50YWJsZUNlbGxQcm9wZXJ0aWVzXCIpO2NvbnN0IG49X18oaS5ib3JkZXJDb2xvcnMpO2NvbnN0IG89a18odC5sb2NhbGUsbik7Y29uc3Qgcj1fXyhpLmJhY2tncm91bmRDb2xvcnMpO2NvbnN0IHM9a18odC5sb2NhbGUscik7Y29uc3QgYT1uZXcgeFIodC5sb2NhbGUse2JvcmRlckNvbG9yczpvLGJhY2tncm91bmRDb2xvcnM6c30pO2NvbnN0IGM9dC50O2EucmVuZGVyKCk7dGhpcy5saXN0ZW5UbyhhLFwic3VibWl0XCIsKCk9Pnt0aGlzLl9oaWRlVmlldygpfSk7dGhpcy5saXN0ZW5UbyhhLFwiY2FuY2VsXCIsKCk9PntpZih0aGlzLl91bmRvU3RlcEJhdGNoLm9wZXJhdGlvbnMubGVuZ3RoKXt0LmV4ZWN1dGUoXCJ1bmRvXCIsdGhpcy5fdW5kb1N0ZXBCYXRjaCl9dGhpcy5faGlkZVZpZXcoKX0pO2Eua2V5c3Ryb2tlcy5zZXQoXCJFc2NcIiwodCxlKT0+e3RoaXMuX2hpZGVWaWV3KCk7ZSgpfSk7dGhpcy5saXN0ZW5Ubyh0LnVpLFwidXBkYXRlXCIsKCk9PntpZighblMoZS5zZWxlY3Rpb24pKXt0aGlzLl9oaWRlVmlldygpfWVsc2UgaWYodGhpcy5faXNWaWV3VmlzaWJsZSl7WUUodCxcImNlbGxcIil9fSk7RGIoe2VtaXR0ZXI6YSxhY3RpdmF0b3I6KCk9PnRoaXMuX2lzVmlld0luQmFsbG9vbixjb250ZXh0RWxlbWVudHM6W3RoaXMuX2JhbGxvb24udmlldy5lbGVtZW50XSxjYWxsYmFjazooKT0+dGhpcy5faGlkZVZpZXcoKX0pO2NvbnN0IGw9dFIoYyk7Y29uc3QgZD1lUihjKTthLm9uKFwiY2hhbmdlOmJvcmRlclN0eWxlXCIsdGhpcy5fZ2V0UHJvcGVydHlDaGFuZ2VDYWxsYmFjayhcInRhYmxlQ2VsbEJvcmRlclN0eWxlXCIpKTthLm9uKFwiY2hhbmdlOmJvcmRlckNvbG9yXCIsdGhpcy5fZ2V0VmFsaWRhdGVkUHJvcGVydHlDaGFuZ2VDYWxsYmFjayh7dmlld0ZpZWxkOmEuYm9yZGVyQ29sb3JJbnB1dCxjb21tYW5kTmFtZTpcInRhYmxlQ2VsbEJvcmRlckNvbG9yXCIsZXJyb3JUZXh0OmwsdmFsaWRhdG9yOmlSfSkpO2Eub24oXCJjaGFuZ2U6Ym9yZGVyV2lkdGhcIix0aGlzLl9nZXRWYWxpZGF0ZWRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKHt2aWV3RmllbGQ6YS5ib3JkZXJXaWR0aElucHV0LGNvbW1hbmROYW1lOlwidGFibGVDZWxsQm9yZGVyV2lkdGhcIixlcnJvclRleHQ6ZCx2YWxpZGF0b3I6b1J9KSk7YS5vbihcImNoYW5nZTpwYWRkaW5nXCIsdGhpcy5fZ2V0VmFsaWRhdGVkUHJvcGVydHlDaGFuZ2VDYWxsYmFjayh7dmlld0ZpZWxkOmEucGFkZGluZ0lucHV0LGNvbW1hbmROYW1lOlwidGFibGVDZWxsUGFkZGluZ1wiLGVycm9yVGV4dDpkLHZhbGlkYXRvcjpuUn0pKTthLm9uKFwiY2hhbmdlOndpZHRoXCIsdGhpcy5fZ2V0VmFsaWRhdGVkUHJvcGVydHlDaGFuZ2VDYWxsYmFjayh7dmlld0ZpZWxkOmEud2lkdGhJbnB1dCxjb21tYW5kTmFtZTpcInRhYmxlQ2VsbFdpZHRoXCIsZXJyb3JUZXh0OmQsdmFsaWRhdG9yOm5SfSkpO2Eub24oXCJjaGFuZ2U6aGVpZ2h0XCIsdGhpcy5fZ2V0VmFsaWRhdGVkUHJvcGVydHlDaGFuZ2VDYWxsYmFjayh7dmlld0ZpZWxkOmEuaGVpZ2h0SW5wdXQsY29tbWFuZE5hbWU6XCJ0YWJsZUNlbGxIZWlnaHRcIixlcnJvclRleHQ6ZCx2YWxpZGF0b3I6blJ9KSk7YS5vbihcImNoYW5nZTpiYWNrZ3JvdW5kQ29sb3JcIix0aGlzLl9nZXRWYWxpZGF0ZWRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKHt2aWV3RmllbGQ6YS5iYWNrZ3JvdW5kSW5wdXQsY29tbWFuZE5hbWU6XCJ0YWJsZUNlbGxCYWNrZ3JvdW5kQ29sb3JcIixlcnJvclRleHQ6bCx2YWxpZGF0b3I6aVJ9KSk7YS5vbihcImNoYW5nZTpob3Jpem9udGFsQWxpZ25tZW50XCIsdGhpcy5fZ2V0UHJvcGVydHlDaGFuZ2VDYWxsYmFjayhcInRhYmxlQ2VsbEhvcml6b250YWxBbGlnbm1lbnRcIikpO2Eub24oXCJjaGFuZ2U6dmVydGljYWxBbGlnbm1lbnRcIix0aGlzLl9nZXRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKFwidGFibGVDZWxsVmVydGljYWxBbGlnbm1lbnRcIikpO3JldHVybiBhfV9maWxsVmlld0Zvcm1Gcm9tQ29tbWFuZFZhbHVlcygpe2NvbnN0IHQ9dGhpcy5lZGl0b3IuY29tbWFuZHM7dGhpcy52aWV3LnNldCh7Ym9yZGVyU3R5bGU6dC5nZXQoXCJ0YWJsZUNlbGxCb3JkZXJTdHlsZVwiKS52YWx1ZXx8XCJcIixib3JkZXJDb2xvcjp0LmdldChcInRhYmxlQ2VsbEJvcmRlckNvbG9yXCIpLnZhbHVlfHxcIlwiLGJvcmRlcldpZHRoOnQuZ2V0KFwidGFibGVDZWxsQm9yZGVyV2lkdGhcIikudmFsdWV8fFwiXCIsd2lkdGg6dC5nZXQoXCJ0YWJsZUNlbGxXaWR0aFwiKS52YWx1ZXx8XCJcIixoZWlnaHQ6dC5nZXQoXCJ0YWJsZUNlbGxIZWlnaHRcIikudmFsdWV8fFwiXCIscGFkZGluZzp0LmdldChcInRhYmxlQ2VsbFBhZGRpbmdcIikudmFsdWV8fFwiXCIsYmFja2dyb3VuZENvbG9yOnQuZ2V0KFwidGFibGVDZWxsQmFja2dyb3VuZENvbG9yXCIpLnZhbHVlfHxcIlwiLGhvcml6b250YWxBbGlnbm1lbnQ6dC5nZXQoXCJ0YWJsZUNlbGxIb3Jpem9udGFsQWxpZ25tZW50XCIpLnZhbHVlfHxcIlwiLHZlcnRpY2FsQWxpZ25tZW50OnQuZ2V0KFwidGFibGVDZWxsVmVydGljYWxBbGlnbm1lbnRcIikudmFsdWV8fFwiXCJ9KX1fc2hvd1ZpZXcoKXtjb25zdCB0PXRoaXMuZWRpdG9yO3RoaXMuX2JhbGxvb24uYWRkKHt2aWV3OnRoaXMudmlldyxwb3NpdGlvbjpYRSh0KX0pO3RoaXMuX3VuZG9TdGVwQmF0Y2g9dC5tb2RlbC5jcmVhdGVCYXRjaCgpO3RoaXMuX2ZpbGxWaWV3Rm9ybUZyb21Db21tYW5kVmFsdWVzKCk7dGhpcy52aWV3LmZvY3VzKCl9X2hpZGVWaWV3KCl7aWYoIXRoaXMuX2lzVmlld0luQmFsbG9vbil7cmV0dXJufWNvbnN0IHQ9dGhpcy5lZGl0b3I7dGhpcy5zdG9wTGlzdGVuaW5nKHQudWksXCJ1cGRhdGVcIik7dGhpcy52aWV3LnNhdmVCdXR0b25WaWV3LmZvY3VzKCk7dGhpcy5fYmFsbG9vbi5yZW1vdmUodGhpcy52aWV3KTt0aGlzLmVkaXRvci5lZGl0aW5nLnZpZXcuZm9jdXMoKX1nZXQgX2lzVmlld1Zpc2libGUoKXtyZXR1cm4gdGhpcy5fYmFsbG9vbi52aXNpYmxlVmlldz09PXRoaXMudmlld31nZXQgX2lzVmlld0luQmFsbG9vbigpe3JldHVybiB0aGlzLl9iYWxsb29uLmhhc1ZpZXcodGhpcy52aWV3KX1fZ2V0UHJvcGVydHlDaGFuZ2VDYWxsYmFjayh0KXtyZXR1cm4oZSxpLG4pPT57dGhpcy5lZGl0b3IuZXhlY3V0ZSh0LHt2YWx1ZTpuLGJhdGNoOnRoaXMuX3VuZG9TdGVwQmF0Y2h9KX19X2dldFZhbGlkYXRlZFByb3BlcnR5Q2hhbmdlQ2FsbGJhY2soe2NvbW1hbmROYW1lOnQsdmlld0ZpZWxkOmUsdmFsaWRhdG9yOmksZXJyb3JUZXh0Om59KXtjb25zdCBvPXVoKCgpPT57ZS5lcnJvclRleHQ9bn0sVFIpO3JldHVybihuLHIscyk9PntvLmNhbmNlbCgpO2lmKGkocykpe3RoaXMuZWRpdG9yLmV4ZWN1dGUodCx7dmFsdWU6cyxiYXRjaDp0aGlzLl91bmRvU3RlcEJhdGNofSk7ZS5lcnJvclRleHQ9bnVsbH1lbHNle28oKX19fX1mdW5jdGlvbiBTUih0KXt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXJcIixFUik7dC5zZXROb3JtYWxpemVyKFwiYm9yZGVyLXRvcFwiLFJSKFwidG9wXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItcmlnaHRcIixSUihcInJpZ2h0XCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItYm90dG9tXCIsUlIoXCJib3R0b21cIikpO3Quc2V0Tm9ybWFsaXplcihcImJvcmRlci1sZWZ0XCIsUlIoXCJsZWZ0XCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItY29sb3JcIixPUihcImNvbG9yXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItd2lkdGhcIixPUihcIndpZHRoXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItc3R5bGVcIixPUihcInN0eWxlXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItdG9wLWNvbG9yXCIsVlIoXCJjb2xvclwiLFwidG9wXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItdG9wLXN0eWxlXCIsVlIoXCJzdHlsZVwiLFwidG9wXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItdG9wLXdpZHRoXCIsVlIoXCJ3aWR0aFwiLFwidG9wXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItcmlnaHQtY29sb3JcIixWUihcImNvbG9yXCIsXCJyaWdodFwiKSk7dC5zZXROb3JtYWxpemVyKFwiYm9yZGVyLXJpZ2h0LXN0eWxlXCIsVlIoXCJzdHlsZVwiLFwicmlnaHRcIikpO3Quc2V0Tm9ybWFsaXplcihcImJvcmRlci1yaWdodC13aWR0aFwiLFZSKFwid2lkdGhcIixcInJpZ2h0XCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItYm90dG9tLWNvbG9yXCIsVlIoXCJjb2xvclwiLFwiYm90dG9tXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItYm90dG9tLXN0eWxlXCIsVlIoXCJzdHlsZVwiLFwiYm90dG9tXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItYm90dG9tLXdpZHRoXCIsVlIoXCJ3aWR0aFwiLFwiYm90dG9tXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJib3JkZXItbGVmdC1jb2xvclwiLFZSKFwiY29sb3JcIixcImxlZnRcIikpO3Quc2V0Tm9ybWFsaXplcihcImJvcmRlci1sZWZ0LXN0eWxlXCIsVlIoXCJzdHlsZVwiLFwibGVmdFwiKSk7dC5zZXROb3JtYWxpemVyKFwiYm9yZGVyLWxlZnQtd2lkdGhcIixWUihcIndpZHRoXCIsXCJsZWZ0XCIpKTt0LnNldEV4dHJhY3RvcihcImJvcmRlci10b3BcIixOUihcInRvcFwiKSk7dC5zZXRFeHRyYWN0b3IoXCJib3JkZXItcmlnaHRcIixOUihcInJpZ2h0XCIpKTt0LnNldEV4dHJhY3RvcihcImJvcmRlci1ib3R0b21cIixOUihcImJvdHRvbVwiKSk7dC5zZXRFeHRyYWN0b3IoXCJib3JkZXItbGVmdFwiLE5SKFwibGVmdFwiKSk7dC5zZXRFeHRyYWN0b3IoXCJib3JkZXItdG9wLWNvbG9yXCIsXCJib3JkZXIuY29sb3IudG9wXCIpO3Quc2V0RXh0cmFjdG9yKFwiYm9yZGVyLXJpZ2h0LWNvbG9yXCIsXCJib3JkZXIuY29sb3IucmlnaHRcIik7dC5zZXRFeHRyYWN0b3IoXCJib3JkZXItYm90dG9tLWNvbG9yXCIsXCJib3JkZXIuY29sb3IuYm90dG9tXCIpO3Quc2V0RXh0cmFjdG9yKFwiYm9yZGVyLWxlZnQtY29sb3JcIixcImJvcmRlci5jb2xvci5sZWZ0XCIpO3Quc2V0RXh0cmFjdG9yKFwiYm9yZGVyLXRvcC13aWR0aFwiLFwiYm9yZGVyLndpZHRoLnRvcFwiKTt0LnNldEV4dHJhY3RvcihcImJvcmRlci1yaWdodC13aWR0aFwiLFwiYm9yZGVyLndpZHRoLnJpZ2h0XCIpO3Quc2V0RXh0cmFjdG9yKFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiLFwiYm9yZGVyLndpZHRoLmJvdHRvbVwiKTt0LnNldEV4dHJhY3RvcihcImJvcmRlci1sZWZ0LXdpZHRoXCIsXCJib3JkZXIud2lkdGgubGVmdFwiKTt0LnNldEV4dHJhY3RvcihcImJvcmRlci10b3Atc3R5bGVcIixcImJvcmRlci5zdHlsZS50b3BcIik7dC5zZXRFeHRyYWN0b3IoXCJib3JkZXItcmlnaHQtc3R5bGVcIixcImJvcmRlci5zdHlsZS5yaWdodFwiKTt0LnNldEV4dHJhY3RvcihcImJvcmRlci1ib3R0b20tc3R5bGVcIixcImJvcmRlci5zdHlsZS5ib3R0b21cIik7dC5zZXRFeHRyYWN0b3IoXCJib3JkZXItbGVmdC1zdHlsZVwiLFwiYm9yZGVyLnN0eWxlLmxlZnRcIik7dC5zZXRSZWR1Y2VyKFwiYm9yZGVyLWNvbG9yXCIscEMoXCJib3JkZXItY29sb3JcIikpO3Quc2V0UmVkdWNlcihcImJvcmRlci1zdHlsZVwiLHBDKFwiYm9yZGVyLXN0eWxlXCIpKTt0LnNldFJlZHVjZXIoXCJib3JkZXItd2lkdGhcIixwQyhcImJvcmRlci13aWR0aFwiKSk7dC5zZXRSZWR1Y2VyKFwiYm9yZGVyLXRvcFwiLExSKFwidG9wXCIpKTt0LnNldFJlZHVjZXIoXCJib3JkZXItcmlnaHRcIixMUihcInJpZ2h0XCIpKTt0LnNldFJlZHVjZXIoXCJib3JkZXItYm90dG9tXCIsTFIoXCJib3R0b21cIikpO3Quc2V0UmVkdWNlcihcImJvcmRlci1sZWZ0XCIsTFIoXCJsZWZ0XCIpKTt0LnNldFJlZHVjZXIoXCJib3JkZXJcIix6Uik7dC5zZXRTdHlsZVJlbGF0aW9uKFwiYm9yZGVyXCIsW1wiYm9yZGVyLWNvbG9yXCIsXCJib3JkZXItc3R5bGVcIixcImJvcmRlci13aWR0aFwiLFwiYm9yZGVyLXRvcFwiLFwiYm9yZGVyLXJpZ2h0XCIsXCJib3JkZXItYm90dG9tXCIsXCJib3JkZXItbGVmdFwiLFwiYm9yZGVyLXRvcC1jb2xvclwiLFwiYm9yZGVyLXJpZ2h0LWNvbG9yXCIsXCJib3JkZXItYm90dG9tLWNvbG9yXCIsXCJib3JkZXItbGVmdC1jb2xvclwiLFwiYm9yZGVyLXRvcC1zdHlsZVwiLFwiYm9yZGVyLXJpZ2h0LXN0eWxlXCIsXCJib3JkZXItYm90dG9tLXN0eWxlXCIsXCJib3JkZXItbGVmdC1zdHlsZVwiLFwiYm9yZGVyLXRvcC13aWR0aFwiLFwiYm9yZGVyLXJpZ2h0LXdpZHRoXCIsXCJib3JkZXItYm90dG9tLXdpZHRoXCIsXCJib3JkZXItbGVmdC13aWR0aFwiXSk7dC5zZXRTdHlsZVJlbGF0aW9uKFwiYm9yZGVyLWNvbG9yXCIsW1wiYm9yZGVyLXRvcC1jb2xvclwiLFwiYm9yZGVyLXJpZ2h0LWNvbG9yXCIsXCJib3JkZXItYm90dG9tLWNvbG9yXCIsXCJib3JkZXItbGVmdC1jb2xvclwiXSk7dC5zZXRTdHlsZVJlbGF0aW9uKFwiYm9yZGVyLXN0eWxlXCIsW1wiYm9yZGVyLXRvcC1zdHlsZVwiLFwiYm9yZGVyLXJpZ2h0LXN0eWxlXCIsXCJib3JkZXItYm90dG9tLXN0eWxlXCIsXCJib3JkZXItbGVmdC1zdHlsZVwiXSk7dC5zZXRTdHlsZVJlbGF0aW9uKFwiYm9yZGVyLXdpZHRoXCIsW1wiYm9yZGVyLXRvcC13aWR0aFwiLFwiYm9yZGVyLXJpZ2h0LXdpZHRoXCIsXCJib3JkZXItYm90dG9tLXdpZHRoXCIsXCJib3JkZXItbGVmdC13aWR0aFwiXSk7dC5zZXRTdHlsZVJlbGF0aW9uKFwiYm9yZGVyLXRvcFwiLFtcImJvcmRlci10b3AtY29sb3JcIixcImJvcmRlci10b3Atc3R5bGVcIixcImJvcmRlci10b3Atd2lkdGhcIl0pO3Quc2V0U3R5bGVSZWxhdGlvbihcImJvcmRlci1yaWdodFwiLFtcImJvcmRlci1yaWdodC1jb2xvclwiLFwiYm9yZGVyLXJpZ2h0LXN0eWxlXCIsXCJib3JkZXItcmlnaHQtd2lkdGhcIl0pO3Quc2V0U3R5bGVSZWxhdGlvbihcImJvcmRlci1ib3R0b21cIixbXCJib3JkZXItYm90dG9tLWNvbG9yXCIsXCJib3JkZXItYm90dG9tLXN0eWxlXCIsXCJib3JkZXItYm90dG9tLXdpZHRoXCJdKTt0LnNldFN0eWxlUmVsYXRpb24oXCJib3JkZXItbGVmdFwiLFtcImJvcmRlci1sZWZ0LWNvbG9yXCIsXCJib3JkZXItbGVmdC1zdHlsZVwiLFwiYm9yZGVyLWxlZnQtd2lkdGhcIl0pfWZ1bmN0aW9uIEVSKHQpe2NvbnN0e2NvbG9yOmUsc3R5bGU6aSx3aWR0aDpufT1CUih0KTtyZXR1cm57cGF0aDpcImJvcmRlclwiLHZhbHVlOntjb2xvcjptQyhlKSxzdHlsZTptQyhpKSx3aWR0aDptQyhuKX19fWZ1bmN0aW9uIFJSKHQpe3JldHVybiBlPT57Y29uc3R7Y29sb3I6aSxzdHlsZTpuLHdpZHRoOm99PUJSKGUpO2NvbnN0IHI9e307aWYoaSE9PXVuZGVmaW5lZCl7ci5jb2xvcj17W3RdOml9fWlmKG4hPT11bmRlZmluZWQpe3Iuc3R5bGU9e1t0XTpufX1pZihvIT09dW5kZWZpbmVkKXtyLndpZHRoPXtbdF06b319cmV0dXJue3BhdGg6XCJib3JkZXJcIix2YWx1ZTpyfX19ZnVuY3Rpb24gT1IodCl7cmV0dXJuIGU9Pih7cGF0aDpcImJvcmRlclwiLHZhbHVlOklSKGUsdCl9KX1mdW5jdGlvbiBJUih0LGUpe3JldHVybntbZV06bUModCl9fWZ1bmN0aW9uIFZSKHQsZSl7cmV0dXJuIGk9Pih7cGF0aDpcImJvcmRlclwiLHZhbHVlOntbdF06e1tlXTppfX19KX1mdW5jdGlvbiBOUih0KXtyZXR1cm4oZSxpKT0+e2lmKGkuYm9yZGVyKXtyZXR1cm4gTVIoaS5ib3JkZXIsdCl9fX1mdW5jdGlvbiBNUih0LGUpe2NvbnN0IGk9e307aWYodC53aWR0aCYmdC53aWR0aFtlXSl7aS53aWR0aD10LndpZHRoW2VdfWlmKHQuc3R5bGUmJnQuc3R5bGVbZV0pe2kuc3R5bGU9dC5zdHlsZVtlXX1pZih0LmNvbG9yJiZ0LmNvbG9yW2VdKXtpLmNvbG9yPXQuY29sb3JbZV19cmV0dXJuIGl9ZnVuY3Rpb24gQlIodCl7Y29uc3QgZT17fTtjb25zdCBpPWtDKHQpO2Zvcihjb25zdCB0IG9mIGkpe2lmKG9DKHQpfHwvdGhpbnxtZWRpdW18dGhpY2svLnRlc3QodCkpe2Uud2lkdGg9dH1lbHNlIGlmKGlDKHQpKXtlLnN0eWxlPXR9ZWxzZXtlLmNvbG9yPXR9fXJldHVybiBlfWZ1bmN0aW9uIHpSKHQpe2NvbnN0IGU9W107ZS5wdXNoKC4uLkZSKE1SKHQsXCJ0b3BcIiksXCJ0b3BcIikpO2UucHVzaCguLi5GUihNUih0LFwicmlnaHRcIiksXCJyaWdodFwiKSk7ZS5wdXNoKC4uLkZSKE1SKHQsXCJib3R0b21cIiksXCJib3R0b21cIikpO2UucHVzaCguLi5GUihNUih0LFwibGVmdFwiKSxcImxlZnRcIikpO3JldHVybiBlfWZ1bmN0aW9uIExSKHQpe3JldHVybiBlPT5GUihlLHQpfWZ1bmN0aW9uIEZSKHQsZSl7Y29uc3QgaT1bXTtpZih0JiZ0LndpZHRoIT09dW5kZWZpbmVkKXtpLnB1c2godC53aWR0aCl9aWYodCYmdC5zdHlsZSE9PXVuZGVmaW5lZCl7aS5wdXNoKHQuc3R5bGUpfWlmKHQmJnQuY29sb3IhPT11bmRlZmluZWQpe2kucHVzaCh0LmNvbG9yKX1pZihpLmxlbmd0aCl7cmV0dXJuW1tgYm9yZGVyLSR7ZX1gLGkuam9pbihcIiBcIildXX1yZXR1cm5bXX1mdW5jdGlvbiBEUih0KXt0LnNldE5vcm1hbGl6ZXIoXCJwYWRkaW5nXCIsd0MoXCJwYWRkaW5nXCIpKTt0LnNldE5vcm1hbGl6ZXIoXCJwYWRkaW5nLXRvcFwiLHQ9Pih7cGF0aDpcInBhZGRpbmcudG9wXCIsdmFsdWU6dH0pKTt0LnNldE5vcm1hbGl6ZXIoXCJwYWRkaW5nLXJpZ2h0XCIsdD0+KHtwYXRoOlwicGFkZGluZy5yaWdodFwiLHZhbHVlOnR9KSk7dC5zZXROb3JtYWxpemVyKFwicGFkZGluZy1ib3R0b21cIix0PT4oe3BhdGg6XCJwYWRkaW5nLmJvdHRvbVwiLHZhbHVlOnR9KSk7dC5zZXROb3JtYWxpemVyKFwicGFkZGluZy1sZWZ0XCIsdD0+KHtwYXRoOlwicGFkZGluZy5sZWZ0XCIsdmFsdWU6dH0pKTt0LnNldFJlZHVjZXIoXCJwYWRkaW5nXCIscEMoXCJwYWRkaW5nXCIpKTt0LnNldFN0eWxlUmVsYXRpb24oXCJwYWRkaW5nXCIsW1wicGFkZGluZy10b3BcIixcInBhZGRpbmctcmlnaHRcIixcInBhZGRpbmctYm90dG9tXCIsXCJwYWRkaW5nLWxlZnRcIl0pfWZ1bmN0aW9uIGpSKHQpe3Quc2V0Tm9ybWFsaXplcihcImJhY2tncm91bmRcIixIUik7dC5zZXROb3JtYWxpemVyKFwiYmFja2dyb3VuZC1jb2xvclwiLHQ9Pih7cGF0aDpcImJhY2tncm91bmQuY29sb3JcIix2YWx1ZTp0fSkpO3Quc2V0UmVkdWNlcihcImJhY2tncm91bmRcIix0PT57Y29uc3QgZT1bXTtlLnB1c2goW1wiYmFja2dyb3VuZC1jb2xvclwiLHQuY29sb3JdKTtyZXR1cm4gZX0pfWZ1bmN0aW9uIEhSKHQpe2NvbnN0IGU9e307Y29uc3QgaT1rQyh0KTtmb3IoY29uc3QgdCBvZiBpKXtpZihjQyh0KSl7ZS5yZXBlYXQ9ZS5yZXBlYXR8fFtdO2UucmVwZWF0LnB1c2godCl9ZWxzZSBpZihkQyh0KSl7ZS5wb3NpdGlvbj1lLnBvc2l0aW9ufHxbXTtlLnBvc2l0aW9uLnB1c2godCl9ZWxzZSBpZihoQyh0KSl7ZS5hdHRhY2htZW50PXR9ZWxzZSBpZih0Qyh0KSl7ZS5jb2xvcj10fWVsc2UgaWYoZ0ModCkpe2UuaW1hZ2U9dH19cmV0dXJue3BhdGg6XCJiYWNrZ3JvdW5kXCIsdmFsdWU6ZX19ZnVuY3Rpb24gV1IodCxlLGksbil7dC5mb3IoXCJ1cGNhc3RcIikuYXR0cmlidXRlVG9BdHRyaWJ1dGUoe3ZpZXc6e3N0eWxlczp7W25dOi9bXFxzXFxTXSsvfX0sbW9kZWw6e25hbWU6ZSxrZXk6aSx2YWx1ZTp0PT50LmdldE5vcm1hbGl6ZWRTdHlsZShuKX19KX1mdW5jdGlvbiBxUih0LGUpe3QuZm9yKFwidXBjYXN0XCIpLmFkZCh0PT50Lm9uKFwiZWxlbWVudDpcIitlLCh0LGUsaSk9Pntjb25zdCBuPVtcImJvcmRlci10b3BcIixcImJvcmRlci1yaWdodFwiLFwiYm9yZGVyLWJvdHRvbVwiLFwiYm9yZGVyLWxlZnRcIl0uZmlsdGVyKHQ9PmUudmlld0l0ZW0uaGFzU3R5bGUodCkpO2lmKCFuLmxlbmd0aCl7cmV0dXJufWNvbnN0IG89e3N0eWxlczpufTtpZighaS5jb25zdW1hYmxlLnRlc3QoZS52aWV3SXRlbSxvKSl7cmV0dXJufWlmKCFlLm1vZGVsUmFuZ2Upe2U9T2JqZWN0LmFzc2lnbihlLGkuY29udmVydENoaWxkcmVuKGUudmlld0l0ZW0sZS5tb2RlbEN1cnNvcikpfWNvbnN0IHI9Wy4uLmUubW9kZWxSYW5nZS5nZXRJdGVtcyh7c2hhbGxvdzp0cnVlfSldLnBvcCgpO2kuY29uc3VtYWJsZS5jb25zdW1lKGUudmlld0l0ZW0sbyk7aS53cml0ZXIuc2V0QXR0cmlidXRlKFwiYm9yZGVyU3R5bGVcIixlLnZpZXdJdGVtLmdldE5vcm1hbGl6ZWRTdHlsZShcImJvcmRlci1zdHlsZVwiKSxyKTtpLndyaXRlci5zZXRBdHRyaWJ1dGUoXCJib3JkZXJDb2xvclwiLGUudmlld0l0ZW0uZ2V0Tm9ybWFsaXplZFN0eWxlKFwiYm9yZGVyLWNvbG9yXCIpLHIpO2kud3JpdGVyLnNldEF0dHJpYnV0ZShcImJvcmRlcldpZHRoXCIsZS52aWV3SXRlbS5nZXROb3JtYWxpemVkU3R5bGUoXCJib3JkZXItd2lkdGhcIikscil9KSl9ZnVuY3Rpb24gVVIodCxlLGksbil7dC5mb3IoXCJkb3duY2FzdFwiKS5hdHRyaWJ1dGVUb0F0dHJpYnV0ZSh7bW9kZWw6e25hbWU6ZSxrZXk6aX0sdmlldzp0PT4oe2tleTpcInN0eWxlXCIsdmFsdWU6e1tuXTp0fX0pfSl9ZnVuY3Rpb24gJFIodCxlLGkpe3QuZm9yKFwiZG93bmNhc3RcIikuYWRkKHQ9PnQub24oYGF0dHJpYnV0ZToke2V9OnRhYmxlYCwodCxlLG4pPT57Y29uc3R7aXRlbTpvLGF0dHJpYnV0ZU5ld1ZhbHVlOnJ9PWU7Y29uc3R7bWFwcGVyOnMsd3JpdGVyOmF9PW47aWYoIW4uY29uc3VtYWJsZS5jb25zdW1lKGUuaXRlbSx0Lm5hbWUpKXtyZXR1cm59Y29uc3QgYz1bLi4ucy50b1ZpZXdFbGVtZW50KG8pLmdldENoaWxkcmVuKCldLmZpbmQodD0+dC5pcyhcInRhYmxlXCIpKTtpZihyKXthLnNldFN0eWxlKGkscixjKX1lbHNle2EucmVtb3ZlU3R5bGUoaSxjKX19KSl9Y2xhc3MgR1IgZXh0ZW5kcyBqd3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpO3RoaXMuYXR0cmlidXRlTmFtZT1lfXJlZnJlc2goKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9c1ModC5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24pO3RoaXMuaXNFbmFibGVkPSEhZS5sZW5ndGg7dGhpcy52YWx1ZT10aGlzLl9nZXRTaW5nbGVWYWx1ZShlKX1leGVjdXRlKHQ9e30pe2NvbnN0e3ZhbHVlOmUsYmF0Y2g6aX09dDtjb25zdCBuPXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IG89c1Mobi5kb2N1bWVudC5zZWxlY3Rpb24pO2NvbnN0IHI9dGhpcy5fZ2V0VmFsdWVUb1NldChlKTtuLmVucXVldWVDaGFuZ2UoaXx8XCJkZWZhdWx0XCIsdD0+e2lmKHIpe28uZm9yRWFjaChlPT50LnNldEF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZU5hbWUscixlKSl9ZWxzZXtvLmZvckVhY2goZT0+dC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVOYW1lLGUpKX19KX1fZ2V0QXR0cmlidXRlKHQpe2lmKCF0KXtyZXR1cm59cmV0dXJuIHQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSl9X2dldFZhbHVlVG9TZXQodCl7cmV0dXJuIHR9X2dldFNpbmdsZVZhbHVlKHQpe2NvbnN0IGU9dGhpcy5fZ2V0QXR0cmlidXRlKHRbMF0pO2NvbnN0IGk9dC5ldmVyeSh0PT50aGlzLl9nZXRBdHRyaWJ1dGUodCk9PT1lKTtyZXR1cm4gaT9lOnVuZGVmaW5lZH19Y2xhc3MgS1IgZXh0ZW5kcyBHUntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LFwicGFkZGluZ1wiKX1fZ2V0QXR0cmlidXRlKHQpe2lmKCF0KXtyZXR1cm59cmV0dXJuICRQKHQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSkpfV9nZXRWYWx1ZVRvU2V0KHQpe3JldHVybiBHUCh0LFwicHhcIil9fWNsYXNzIEpSIGV4dGVuZHMgR1J7Y29uc3RydWN0b3IodCl7c3VwZXIodCxcIndpZHRoXCIpfV9nZXRWYWx1ZVRvU2V0KHQpe3JldHVybiBHUCh0LFwicHhcIil9fWNsYXNzIFlSIGV4dGVuZHMgR1J7Y29uc3RydWN0b3IodCl7c3VwZXIodCxcImhlaWdodFwiKX1fZ2V0VmFsdWVUb1NldCh0KXtyZXR1cm4gR1AodCxcInB4XCIpfX1jbGFzcyBRUiBleHRlbmRzIEdSe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJiYWNrZ3JvdW5kQ29sb3JcIil9fWNsYXNzIFhSIGV4dGVuZHMgR1J7Y29uc3RydWN0b3IodCl7c3VwZXIodCxcInZlcnRpY2FsQWxpZ25tZW50XCIpfX1jbGFzcyBaUiBleHRlbmRzIEdSe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJob3Jpem9udGFsQWxpZ25tZW50XCIpfX1jbGFzcyB0TyBleHRlbmRzIEdSe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJib3JkZXJTdHlsZVwiKX1fZ2V0QXR0cmlidXRlKHQpe2lmKCF0KXtyZXR1cm59cmV0dXJuICRQKHQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSkpfX1jbGFzcyBlTyBleHRlbmRzIEdSe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJib3JkZXJDb2xvclwiKX1fZ2V0QXR0cmlidXRlKHQpe2lmKCF0KXtyZXR1cm59cmV0dXJuICRQKHQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSkpfX1jbGFzcyBpTyBleHRlbmRzIEdSe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJib3JkZXJXaWR0aFwiKX1fZ2V0QXR0cmlidXRlKHQpe2lmKCF0KXtyZXR1cm59cmV0dXJuICRQKHQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSkpfV9nZXRWYWx1ZVRvU2V0KHQpe3JldHVybiBHUCh0LFwicHhcIil9fWNvbnN0IG5PPS9eKHRvcHxib3R0b20pJC87Y2xhc3Mgb08gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlRhYmxlQ2VsbFByb3BlcnRpZXNFZGl0aW5nXCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVyblt3RV19aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10Lm1vZGVsLnNjaGVtYTtjb25zdCBpPXQuY29udmVyc2lvbjt0LmRhdGEuYWRkU3R5bGVQcm9jZXNzb3JSdWxlcyhTUik7ck8oZSxpKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlQ2VsbEJvcmRlclN0eWxlXCIsbmV3IHRPKHQpKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlQ2VsbEJvcmRlckNvbG9yXCIsbmV3IGVPKHQpKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlQ2VsbEJvcmRlcldpZHRoXCIsbmV3IGlPKHQpKTtzTyhlLGkpO3QuY29tbWFuZHMuYWRkKFwidGFibGVDZWxsSG9yaXpvbnRhbEFsaWdubWVudFwiLG5ldyBaUih0KSk7Y08oZSxpLFwid2lkdGhcIixcIndpZHRoXCIpO3QuY29tbWFuZHMuYWRkKFwidGFibGVDZWxsV2lkdGhcIixuZXcgSlIodCkpO2NPKGUsaSxcImhlaWdodFwiLFwiaGVpZ2h0XCIpO3QuY29tbWFuZHMuYWRkKFwidGFibGVDZWxsSGVpZ2h0XCIsbmV3IFlSKHQpKTt0LmRhdGEuYWRkU3R5bGVQcm9jZXNzb3JSdWxlcyhEUik7Y08oZSxpLFwicGFkZGluZ1wiLFwicGFkZGluZ1wiKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlQ2VsbFBhZGRpbmdcIixuZXcgS1IodCkpO3QuZGF0YS5hZGRTdHlsZVByb2Nlc3NvclJ1bGVzKGpSKTtjTyhlLGksXCJiYWNrZ3JvdW5kQ29sb3JcIixcImJhY2tncm91bmQtY29sb3JcIik7dC5jb21tYW5kcy5hZGQoXCJ0YWJsZUNlbGxCYWNrZ3JvdW5kQ29sb3JcIixuZXcgUVIodCkpO2FPKGUsaSk7dC5jb21tYW5kcy5hZGQoXCJ0YWJsZUNlbGxWZXJ0aWNhbEFsaWdubWVudFwiLG5ldyBYUih0KSl9fWZ1bmN0aW9uIHJPKHQsZSl7dC5leHRlbmQoXCJ0YWJsZUNlbGxcIix7YWxsb3dBdHRyaWJ1dGVzOltcImJvcmRlcldpZHRoXCIsXCJib3JkZXJDb2xvclwiLFwiYm9yZGVyU3R5bGVcIl19KTtxUihlLFwidGRcIik7cVIoZSxcInRoXCIpO1VSKGUsXCJ0YWJsZUNlbGxcIixcImJvcmRlclN0eWxlXCIsXCJib3JkZXItc3R5bGVcIik7VVIoZSxcInRhYmxlQ2VsbFwiLFwiYm9yZGVyQ29sb3JcIixcImJvcmRlci1jb2xvclwiKTtVUihlLFwidGFibGVDZWxsXCIsXCJib3JkZXJXaWR0aFwiLFwiYm9yZGVyLXdpZHRoXCIpfWZ1bmN0aW9uIHNPKHQsZSl7dC5leHRlbmQoXCJ0YWJsZUNlbGxcIix7YWxsb3dBdHRyaWJ1dGVzOltcImhvcml6b250YWxBbGlnbm1lbnRcIl19KTtlLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHttb2RlbDp7bmFtZTpcInRhYmxlQ2VsbFwiLGtleTpcImhvcml6b250YWxBbGlnbm1lbnRcIix2YWx1ZXM6W1wicmlnaHRcIixcImNlbnRlclwiLFwianVzdGlmeVwiXX0sdmlldzp7cmlnaHQ6e2tleTpcInN0eWxlXCIsdmFsdWU6e1widGV4dC1hbGlnblwiOlwicmlnaHRcIn19LGNlbnRlcjp7a2V5Olwic3R5bGVcIix2YWx1ZTp7XCJ0ZXh0LWFsaWduXCI6XCJjZW50ZXJcIn19LGp1c3RpZnk6e2tleTpcInN0eWxlXCIsdmFsdWU6e1widGV4dC1hbGlnblwiOlwianVzdGlmeVwifX19fSl9ZnVuY3Rpb24gYU8odCxlKXt0LmV4dGVuZChcInRhYmxlQ2VsbFwiLHthbGxvd0F0dHJpYnV0ZXM6W1widmVydGljYWxBbGlnbm1lbnRcIl19KTtlLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHttb2RlbDp7bmFtZTpcInRhYmxlQ2VsbFwiLGtleTpcInZlcnRpY2FsQWxpZ25tZW50XCIsdmFsdWVzOltcInRvcFwiLFwiYm90dG9tXCJdfSx2aWV3Ont0b3A6e2tleTpcInN0eWxlXCIsdmFsdWU6e1widmVydGljYWwtYWxpZ25cIjpcInRvcFwifX0sYm90dG9tOntrZXk6XCJzdHlsZVwiLHZhbHVlOntcInZlcnRpY2FsLWFsaWduXCI6XCJib3R0b21cIn19fX0pO2UuZm9yKFwidXBjYXN0XCIpLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHt2aWV3OnthdHRyaWJ1dGVzOnt2YWxpZ246bk99fSxtb2RlbDp7bmFtZTpcInRhYmxlQ2VsbFwiLGtleTpcInZlcnRpY2FsQWxpZ25tZW50XCIsdmFsdWU6dD0+dC5nZXRBdHRyaWJ1dGUoXCJ2YWxpZ25cIil9fSl9ZnVuY3Rpb24gY08odCxlLGksbil7dC5leHRlbmQoXCJ0YWJsZUNlbGxcIix7YWxsb3dBdHRyaWJ1dGVzOltpXX0pO1dSKGUsXCJ0YWJsZUNlbGxcIixpLG4pO1VSKGUsXCJ0YWJsZUNlbGxcIixpLG4pfWNsYXNzIGxPIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJUYWJsZUNlbGxQcm9wZXJ0aWVzXCJ9c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltvTyxQUl19fWNsYXNzIGRPIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltseV19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJUYWJsZVRvb2xiYXJcIn1hZnRlckluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC50O2NvbnN0IGk9dC5wbHVnaW5zLmdldChseSk7Y29uc3Qgbj10LmNvbmZpZy5nZXQoXCJ0YWJsZS5jb250ZW50VG9vbGJhclwiKTtjb25zdCBvPXQuY29uZmlnLmdldChcInRhYmxlLnRhYmxlVG9vbGJhclwiKTtpZihuKXtpLnJlZ2lzdGVyKFwidGFibGVDb250ZW50XCIse2FyaWFMYWJlbDplKFwiaXZcIiksaXRlbXM6bixnZXRSZWxhdGVkRWxlbWVudDpuU30pfWlmKG8pe2kucmVnaXN0ZXIoXCJ0YWJsZVwiLHthcmlhTGFiZWw6ZShcIml2XCIpLGl0ZW1zOm8sZ2V0UmVsYXRlZEVsZW1lbnQ6aVN9KX19fWNsYXNzIHVPIGV4dGVuZHMgand7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLmF0dHJpYnV0ZU5hbWU9ZX1yZWZyZXNoKCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IGk9V1AoXCJ0YWJsZVwiLGUuZ2V0Rmlyc3RQb3NpdGlvbigpKTt0aGlzLmlzRW5hYmxlZD0hIWk7dGhpcy52YWx1ZT10aGlzLl9nZXRWYWx1ZShpKX1leGVjdXRlKHQ9e30pe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgaT1lLmRvY3VtZW50LnNlbGVjdGlvbjtjb25zdHt2YWx1ZTpuLGJhdGNoOm99PXQ7Y29uc3Qgcj1XUChcInRhYmxlXCIsaS5nZXRGaXJzdFBvc2l0aW9uKCkpO2NvbnN0IHM9dGhpcy5fZ2V0VmFsdWVUb1NldChuKTtlLmVucXVldWVDaGFuZ2Uob3x8XCJkZWZhdWx0XCIsdD0+e2lmKHMpe3Quc2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSxzLHIpfWVsc2V7dC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVOYW1lLHIpfX0pfV9nZXRWYWx1ZSh0KXtpZighdCl7cmV0dXJufXJldHVybiB0LmdldEF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZU5hbWUpfV9nZXRWYWx1ZVRvU2V0KHQpe3JldHVybiB0fX1jbGFzcyBoTyBleHRlbmRzIHVPe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJiYWNrZ3JvdW5kQ29sb3JcIil9fWNsYXNzIGZPIGV4dGVuZHMgdU97Y29uc3RydWN0b3IodCl7c3VwZXIodCxcImJvcmRlckNvbG9yXCIpfV9nZXRWYWx1ZSh0KXtpZighdCl7cmV0dXJufXJldHVybiAkUCh0LmdldEF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZU5hbWUpKX19Y2xhc3MgZ08gZXh0ZW5kcyB1T3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LFwiYm9yZGVyU3R5bGVcIil9X2dldFZhbHVlKHQpe2lmKCF0KXtyZXR1cm59cmV0dXJuICRQKHQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlTmFtZSkpfX1jbGFzcyBtTyBleHRlbmRzIHVPe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsXCJib3JkZXJXaWR0aFwiKX1fZ2V0VmFsdWUodCl7aWYoIXQpe3JldHVybn1yZXR1cm4gJFAodC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVOYW1lKSl9X2dldFZhbHVlVG9TZXQodCl7cmV0dXJuIEdQKHQsXCJweFwiKX19Y2xhc3MgcE8gZXh0ZW5kcyB1T3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LFwid2lkdGhcIil9X2dldFZhbHVlVG9TZXQodCl7cmV0dXJuIEdQKHQsXCJweFwiKX19Y2xhc3MgYk8gZXh0ZW5kcyB1T3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LFwiaGVpZ2h0XCIpfV9nZXRWYWx1ZVRvU2V0KHQpe3JldHVybiBHUCh0LFwicHhcIil9fWNsYXNzIHdPIGV4dGVuZHMgdU97Y29uc3RydWN0b3IodCl7c3VwZXIodCxcImFsaWdubWVudFwiKX19Y29uc3Qga089L14obGVmdHxyaWdodCkkLztjbGFzcyBfTyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiVGFibGVQcm9wZXJ0aWVzRWRpdGluZ1wifXN0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bd0VdfWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5tb2RlbC5zY2hlbWE7Y29uc3QgaT10LmNvbnZlcnNpb247dC5kYXRhLmFkZFN0eWxlUHJvY2Vzc29yUnVsZXMoU1IpO3ZPKGUsaSk7dC5jb21tYW5kcy5hZGQoXCJ0YWJsZUJvcmRlckNvbG9yXCIsbmV3IGZPKHQpKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlQm9yZGVyU3R5bGVcIixuZXcgZ08odCkpO3QuY29tbWFuZHMuYWRkKFwidGFibGVCb3JkZXJXaWR0aFwiLG5ldyBtTyh0KSk7eU8oZSxpKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlQWxpZ25tZW50XCIsbmV3IHdPKHQpKTtDTyhlLGksXCJ3aWR0aFwiLFwid2lkdGhcIik7dC5jb21tYW5kcy5hZGQoXCJ0YWJsZVdpZHRoXCIsbmV3IHBPKHQpKTtDTyhlLGksXCJoZWlnaHRcIixcImhlaWdodFwiKTt0LmNvbW1hbmRzLmFkZChcInRhYmxlSGVpZ2h0XCIsbmV3IGJPKHQpKTt0LmRhdGEuYWRkU3R5bGVQcm9jZXNzb3JSdWxlcyhqUik7eE8oZSxpLFwiYmFja2dyb3VuZENvbG9yXCIsXCJiYWNrZ3JvdW5kLWNvbG9yXCIpO3QuY29tbWFuZHMuYWRkKFwidGFibGVCYWNrZ3JvdW5kQ29sb3JcIixuZXcgaE8odCkpfX1mdW5jdGlvbiB2Tyh0LGUpe3QuZXh0ZW5kKFwidGFibGVcIix7YWxsb3dBdHRyaWJ1dGVzOltcImJvcmRlcldpZHRoXCIsXCJib3JkZXJDb2xvclwiLFwiYm9yZGVyU3R5bGVcIl19KTtxUihlLFwidGFibGVcIik7JFIoZSxcImJvcmRlckNvbG9yXCIsXCJib3JkZXItY29sb3JcIik7JFIoZSxcImJvcmRlclN0eWxlXCIsXCJib3JkZXItc3R5bGVcIik7JFIoZSxcImJvcmRlcldpZHRoXCIsXCJib3JkZXItd2lkdGhcIil9ZnVuY3Rpb24geU8odCxlKXt0LmV4dGVuZChcInRhYmxlXCIse2FsbG93QXR0cmlidXRlczpbXCJhbGlnbm1lbnRcIl19KTtlLmF0dHJpYnV0ZVRvQXR0cmlidXRlKHttb2RlbDp7bmFtZTpcInRhYmxlXCIsa2V5OlwiYWxpZ25tZW50XCIsdmFsdWVzOltcImxlZnRcIixcInJpZ2h0XCJdfSx2aWV3OntsZWZ0OntrZXk6XCJzdHlsZVwiLHZhbHVlOntmbG9hdDpcImxlZnRcIn19LHJpZ2h0OntrZXk6XCJzdHlsZVwiLHZhbHVlOntmbG9hdDpcInJpZ2h0XCJ9fX0sY29udmVydGVyUHJpb3JpdHk6XCJoaWdoXCJ9KTtlLmZvcihcInVwY2FzdFwiKS5hdHRyaWJ1dGVUb0F0dHJpYnV0ZSh7dmlldzp7YXR0cmlidXRlczp7YWxpZ246a099fSxtb2RlbDp7bmFtZTpcInRhYmxlXCIsa2V5OlwiYWxpZ25tZW50XCIsdmFsdWU6dD0+dC5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKX19KX1mdW5jdGlvbiB4Tyh0LGUsaSxuKXt0LmV4dGVuZChcInRhYmxlXCIse2FsbG93QXR0cmlidXRlczpbaV19KTtXUihlLFwidGFibGVcIixpLG4pOyRSKGUsaSxuKX1mdW5jdGlvbiBDTyh0LGUsaSxuKXt0LmV4dGVuZChcInRhYmxlXCIse2FsbG93QXR0cmlidXRlczpbaV19KTtXUihlLFwidGFibGVcIixpLG4pO1VSKGUsXCJ0YWJsZVwiLGksbil9dmFyIEFPPWkoMTEyKTtjb25zdCBUTz17bGVmdDpreSxjZW50ZXI6X3kscmlnaHQ6dnl9O2NsYXNzIFBPIGV4dGVuZHMgR3B7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0KTt0aGlzLnNldCh7Ym9yZGVyU3R5bGU6XCJcIixib3JkZXJXaWR0aDpcIlwiLGJvcmRlckNvbG9yOlwiXCIsYmFja2dyb3VuZENvbG9yOlwiXCIsd2lkdGg6XCJcIixoZWlnaHQ6XCJcIixhbGlnbm1lbnQ6XCJcIn0pO3RoaXMub3B0aW9ucz1lO2NvbnN0e2JvcmRlclN0eWxlRHJvcGRvd246aSxib3JkZXJXaWR0aElucHV0Om4sYm9yZGVyQ29sb3JJbnB1dDpvLGJvcmRlclJvd0xhYmVsOnJ9PXRoaXMuX2NyZWF0ZUJvcmRlckZpZWxkcygpO2NvbnN0e3dpZHRoSW5wdXQ6cyxvcGVyYXRvckxhYmVsOmEsaGVpZ2h0SW5wdXQ6YyxkaW1lbnNpb25zTGFiZWw6bH09dGhpcy5fY3JlYXRlRGltZW5zaW9uRmllbGRzKCk7Y29uc3R7YWxpZ25tZW50VG9vbGJhcjpkLGFsaWdubWVudExhYmVsOnV9PXRoaXMuX2NyZWF0ZUFsaWdubWVudEZpZWxkcygpO3RoaXMuZm9jdXNUcmFja2VyPW5ldyBmYjt0aGlzLmtleXN0cm9rZXM9bmV3IGRwO3RoaXMuY2hpbGRyZW49dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCk7dGhpcy5ib3JkZXJTdHlsZURyb3Bkb3duPWk7dGhpcy5ib3JkZXJXaWR0aElucHV0PW47dGhpcy5ib3JkZXJDb2xvcklucHV0PW87dGhpcy5iYWNrZ3JvdW5kSW5wdXQ9dGhpcy5fY3JlYXRlQmFja2dyb3VuZEZpZWxkKCk7dGhpcy53aWR0aElucHV0PXM7dGhpcy5oZWlnaHRJbnB1dD1jO3RoaXMuYWxpZ25tZW50VG9vbGJhcj1kO2NvbnN0e3NhdmVCdXR0b25WaWV3OmgsY2FuY2VsQnV0dG9uVmlldzpmfT10aGlzLl9jcmVhdGVBY3Rpb25CdXR0b25zKCk7dGhpcy5zYXZlQnV0dG9uVmlldz1oO3RoaXMuY2FuY2VsQnV0dG9uVmlldz1mO3RoaXMuX2ZvY3VzYWJsZXM9bmV3IGJwO3RoaXMuX2ZvY3VzQ3ljbGVyPW5ldyB5Yih7Zm9jdXNhYmxlczp0aGlzLl9mb2N1c2FibGVzLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOlwic2hpZnQgKyB0YWJcIixmb2N1c05leHQ6XCJ0YWJcIn19KTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgbVIodCx7bGFiZWw6dGhpcy50KFwi0KHQstC+0LnRgdGC0LLQsCDRgtCw0LHQu9C40YbRi1wiKX0pKTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgZlIodCx7bGFiZWxWaWV3OnIsY2hpbGRyZW46W3IsaSxvLG5dLGNsYXNzOlwiY2stdGFibGUtZm9ybV9fYm9yZGVyLXJvd1wifSkpO3RoaXMuY2hpbGRyZW4uYWRkKG5ldyBmUih0LHtjaGlsZHJlbjpbdGhpcy5iYWNrZ3JvdW5kSW5wdXRdfSkpO3RoaXMuY2hpbGRyZW4uYWRkKG5ldyBmUih0LHtjaGlsZHJlbjpbbmV3IGZSKHQse2xhYmVsVmlldzpsLGNoaWxkcmVuOltsLHMsYSxjXSxjbGFzczpcImNrLXRhYmxlLWZvcm1fX2RpbWVuc2lvbnMtcm93XCJ9KSxuZXcgZlIodCx7bGFiZWxWaWV3OnUsY2hpbGRyZW46W3UsZF0sY2xhc3M6XCJjay10YWJsZS1wcm9wZXJ0aWVzLWZvcm1fX2FsaWdubWVudC1yb3dcIn0pXX0pKTt0aGlzLmNoaWxkcmVuLmFkZChuZXcgZlIodCx7Y2hpbGRyZW46W3RoaXMuc2F2ZUJ1dHRvblZpZXcsdGhpcy5jYW5jZWxCdXR0b25WaWV3XSxjbGFzczpcImNrLXRhYmxlLWZvcm1fX2FjdGlvbi1yb3dcIn0pKTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6XCJmb3JtXCIsYXR0cmlidXRlczp7Y2xhc3M6W1wiY2tcIixcImNrLWZvcm1cIixcImNrLXRhYmxlLWZvcm1cIixcImNrLXRhYmxlLXByb3BlcnRpZXMtZm9ybVwiXSx0YWJpbmRleDpcIi0xXCJ9LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW59KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtRdih7dmlldzp0aGlzfSk7W3RoaXMuYm9yZGVyU3R5bGVEcm9wZG93bix0aGlzLmJvcmRlckNvbG9ySW5wdXQsdGhpcy5ib3JkZXJXaWR0aElucHV0LHRoaXMuYmFja2dyb3VuZElucHV0LHRoaXMud2lkdGhJbnB1dCx0aGlzLmhlaWdodElucHV0LHRoaXMuYWxpZ25tZW50VG9vbGJhcix0aGlzLnNhdmVCdXR0b25WaWV3LHRoaXMuY2FuY2VsQnV0dG9uVmlld10uZm9yRWFjaCh0PT57dGhpcy5fZm9jdXNhYmxlcy5hZGQodCk7dGhpcy5mb2N1c1RyYWNrZXIuYWRkKHQuZWxlbWVudCl9KTt0aGlzLmtleXN0cm9rZXMubGlzdGVuVG8odGhpcy5lbGVtZW50KX1mb2N1cygpe3RoaXMuX2ZvY3VzQ3ljbGVyLmZvY3VzRmlyc3QoKX1fY3JlYXRlQm9yZGVyRmllbGRzKCl7Y29uc3QgdD1jUih7Y29sb3JDb25maWc6dGhpcy5vcHRpb25zLmJvcmRlckNvbG9ycyxjb2x1bW5zOjV9KTtjb25zdCBlPXRoaXMubG9jYWxlO2NvbnN0IGk9dGhpcy50O2NvbnN0IG49bmV3IE1rKGUpO24udGV4dD1pKFwibmJcIik7Y29uc3Qgbz1aRSh0aGlzLnQpO2NvbnN0IHI9bmV3IEhFKGUscUUpO3Iuc2V0KHtsYWJlbDppKFwibmNcIiksY2xhc3M6XCJjay10YWJsZS1mb3JtX19ib3JkZXItc3R5bGVcIn0pO3Iudmlldy5idXR0b25WaWV3LnNldCh7aXNPbjpmYWxzZSx3aXRoVGV4dDp0cnVlLHRvb2x0aXA6aShcIm5jXCIpfSk7ci52aWV3LmJ1dHRvblZpZXcuYmluZChcImxhYmVsXCIpLnRvKHRoaXMsXCJib3JkZXJTdHlsZVwiLHQ9Pm9bdD90Olwibm9uZVwiXSk7ci52aWV3Lm9uKFwiZXhlY3V0ZVwiLHQ9Pnt0aGlzLmJvcmRlclN0eWxlPXQuc291cmNlLl9ib3JkZXJTdHlsZVZhbHVlfSk7VWIoci52aWV3LHJSKHRoaXMpKTtjb25zdCBzPW5ldyBIRShlLFdFKTtzLnNldCh7bGFiZWw6aShcIm5kXCIpLGNsYXNzOlwiY2stdGFibGUtZm9ybV9fYm9yZGVyLXdpZHRoXCJ9KTtzLnZpZXcuYmluZChcInZhbHVlXCIpLnRvKHRoaXMsXCJib3JkZXJXaWR0aFwiKTtzLmJpbmQoXCJpc0VuYWJsZWRcIikudG8odGhpcyxcImJvcmRlclN0eWxlXCIsU08pO3Mudmlldy5vbihcImlucHV0XCIsKCk9Pnt0aGlzLmJvcmRlcldpZHRoPXMudmlldy5lbGVtZW50LnZhbHVlfSk7Y29uc3QgYT1uZXcgSEUoZSx0KTthLnNldCh7bGFiZWw6aShcIm5lXCIpLGNsYXNzOlwiY2stdGFibGUtZm9ybV9fYm9yZGVyLWNvbG9yXCJ9KTthLnZpZXcuYmluZChcInZhbHVlXCIpLnRvKHRoaXMsXCJib3JkZXJDb2xvclwiKTthLmJpbmQoXCJpc0VuYWJsZWRcIikudG8odGhpcyxcImJvcmRlclN0eWxlXCIsU08pO2Eudmlldy5vbihcImlucHV0XCIsKCk9Pnt0aGlzLmJvcmRlckNvbG9yPWEudmlldy52YWx1ZX0pO3RoaXMub24oXCJjaGFuZ2U6Ym9yZGVyU3R5bGVcIiwodCxlLGkpPT57aWYoIVNPKGkpKXt0aGlzLmJvcmRlckNvbG9yPVwiXCI7dGhpcy5ib3JkZXJXaWR0aD1cIlwifX0pO3JldHVybntib3JkZXJSb3dMYWJlbDpuLGJvcmRlclN0eWxlRHJvcGRvd246cixib3JkZXJDb2xvcklucHV0OmEsYm9yZGVyV2lkdGhJbnB1dDpzfX1fY3JlYXRlQmFja2dyb3VuZEZpZWxkKCl7Y29uc3QgdD1jUih7Y29sb3JDb25maWc6dGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvcnMsY29sdW1uczo1fSk7Y29uc3QgZT10aGlzLmxvY2FsZTtjb25zdCBpPXRoaXMudDtjb25zdCBuPW5ldyBIRShlLHQpO24uc2V0KHtsYWJlbDppKFwibmZcIiksY2xhc3M6XCJjay10YWJsZS1wcm9wZXJ0aWVzLWZvcm1fX2JhY2tncm91bmRcIn0pO24udmlldy5iaW5kKFwidmFsdWVcIikudG8odGhpcyxcImJhY2tncm91bmRDb2xvclwiKTtuLnZpZXcub24oXCJpbnB1dFwiLCgpPT57dGhpcy5iYWNrZ3JvdW5kQ29sb3I9bi52aWV3LnZhbHVlfSk7cmV0dXJuIG59X2NyZWF0ZURpbWVuc2lvbkZpZWxkcygpe2NvbnN0IHQ9dGhpcy5sb2NhbGU7Y29uc3QgZT10aGlzLnQ7Y29uc3QgaT1uZXcgTWsodCk7aS50ZXh0PWUoXCJuZ1wiKTtjb25zdCBuPW5ldyBIRSh0LFdFKTtuLnNldCh7bGFiZWw6ZShcIm5kXCIpLGNsYXNzOlwiY2stdGFibGUtZm9ybV9fZGltZW5zaW9ucy1yb3dfX3dpZHRoXCJ9KTtuLnZpZXcuYmluZChcInZhbHVlXCIpLnRvKHRoaXMsXCJ3aWR0aFwiKTtuLnZpZXcub24oXCJpbnB1dFwiLCgpPT57dGhpcy53aWR0aD1uLnZpZXcuZWxlbWVudC52YWx1ZX0pO2NvbnN0IG89bmV3IEdwKHQpO28uc2V0VGVtcGxhdGUoe3RhZzpcInNwYW5cIixhdHRyaWJ1dGVzOntjbGFzczpbXCJjay10YWJsZS1mb3JtX19kaW1lbnNpb24tb3BlcmF0b3JcIl19LGNoaWxkcmVuOlt7dGV4dDpcIsOXXCJ9XX0pO2NvbnN0IHI9bmV3IEhFKHQsV0UpO3Iuc2V0KHtsYWJlbDplKFwibmhcIiksY2xhc3M6XCJjay10YWJsZS1mb3JtX19kaW1lbnNpb25zLXJvd19faGVpZ2h0XCJ9KTtyLnZpZXcuYmluZChcInZhbHVlXCIpLnRvKHRoaXMsXCJoZWlnaHRcIik7ci52aWV3Lm9uKFwiaW5wdXRcIiwoKT0+e3RoaXMuaGVpZ2h0PXIudmlldy5lbGVtZW50LnZhbHVlfSk7cmV0dXJue2RpbWVuc2lvbnNMYWJlbDppLHdpZHRoSW5wdXQ6bixvcGVyYXRvckxhYmVsOm8saGVpZ2h0SW5wdXQ6cn19X2NyZWF0ZUFsaWdubWVudEZpZWxkcygpe2NvbnN0IHQ9dGhpcy5sb2NhbGU7Y29uc3QgZT10aGlzLnQ7Y29uc3QgaT1uZXcgTWsodCk7aS50ZXh0PWUoXCJudFwiKTtjb25zdCBuPW5ldyBYYih0KTtuLnNldCh7aXNDb21wYWN0OnRydWUsYXJpYUxhYmVsOmUoXCJudVwiKX0pO3NSKHt2aWV3OnRoaXMsaWNvbnM6VE8sdG9vbGJhcjpuLGxhYmVsczp0aGlzLl9hbGlnbm1lbnRMYWJlbHMscHJvcGVydHlOYW1lOlwiYWxpZ25tZW50XCIsbmFtZVRvVmFsdWU6dD0+dD09PVwiY2VudGVyXCI/XCJcIjp0fSk7cmV0dXJue2FsaWdubWVudExhYmVsOmksYWxpZ25tZW50VG9vbGJhcjpufX1fY3JlYXRlQWN0aW9uQnV0dG9ucygpe2NvbnN0IHQ9dGhpcy5sb2NhbGU7Y29uc3QgZT10aGlzLnQ7Y29uc3QgaT1uZXcgaGIodCk7Y29uc3Qgbj1uZXcgaGIodCk7Y29uc3Qgbz1bdGhpcy5ib3JkZXJXaWR0aElucHV0LHRoaXMuYm9yZGVyQ29sb3JJbnB1dCx0aGlzLmJhY2tncm91bmRJbnB1dCx0aGlzLndpZHRoSW5wdXQsdGhpcy5oZWlnaHRJbnB1dF07aS5zZXQoe2xhYmVsOmUoXCJsb1wiKSxpY29uOlh2LGNsYXNzOlwiY2stYnV0dG9uLXNhdmVcIix0eXBlOlwic3VibWl0XCIsd2l0aFRleHQ6dHJ1ZX0pO2kuYmluZChcImlzRW5hYmxlZFwiKS50b01hbnkobyxcImVycm9yVGV4dFwiLCguLi50KT0+dC5ldmVyeSh0PT4hdCkpO24uc2V0KHtsYWJlbDplKFwibHBcIiksaWNvbjpadixjbGFzczpcImNrLWJ1dHRvbi1jYW5jZWxcIix0eXBlOlwiY2FuY2VsXCIsd2l0aFRleHQ6dHJ1ZX0pO24uZGVsZWdhdGUoXCJleGVjdXRlXCIpLnRvKHRoaXMsXCJjYW5jZWxcIik7cmV0dXJue3NhdmVCdXR0b25WaWV3OmksY2FuY2VsQnV0dG9uVmlldzpufX1nZXQgX2FsaWdubWVudExhYmVscygpe2NvbnN0IHQ9dGhpcy5sb2NhbGU7Y29uc3QgZT10aGlzLnQ7Y29uc3QgaT1lKFwibnZcIik7Y29uc3Qgbj1lKFwibndcIik7Y29uc3Qgbz1lKFwibnhcIik7aWYodC51aUxhbmd1YWdlRGlyZWN0aW9uPT09XCJydGxcIil7cmV0dXJue3JpZ2h0Om8sY2VudGVyOm4sbGVmdDppfX1lbHNle3JldHVybntsZWZ0OmksY2VudGVyOm4scmlnaHQ6b319fX1mdW5jdGlvbiBTTyh0KXtyZXR1cm4hIXR9dmFyIEVPPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk04IDJ2NWg0VjJoMXY1aDV2MWgtNXY0aC4wMjFsLS4xNzIuMzUxLTEuOTE2LjI4LS4xNTEuMDI3Yy0uMjg3LjA2My0uNTQuMTgyLS43NTUuMzQxTDggMTN2NUg3di01SDJ2LTFoNVY4SDJWN2g1VjJoMXptNCA2SDh2NGg0Vjh6XCIgb3BhY2l0eT1cIi42XCIvPjxwYXRoIGQ9XCJNMTUuNSAxMS41bDEuMzIzIDIuNjggMi45NTcuNDMtMi4xNCAyLjA4NS41MDUgMi45NDZMMTUuNSAxOC4yNWwtMi42NDUgMS4zOS41MDUtMi45NDUtMi4xNC0yLjA4NiAyLjk1Ny0uNDNMMTUuNSAxMS41ek0xNyAxYTIgMiAwIDAgMSAyIDJ2OS40NzVsLS44NS0uMTI0LS44NTctMS43MzZhMi4wNDggMi4wNDggMCAwIDAtLjI5Mi0uNDRMMTcgM0gzdjE0aDcuODA4bC40MDIuMzkyTDEwLjkzNSAxOUgzYTIgMiAwIDAgMS0yLTJWM2EyIDIgMCAwIDEgMi0yaDE0elwiLz48L3N2Zz4nO2NvbnN0IFJPPTUwMDtjbGFzcyBPTyBleHRlbmRzIG1we3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5ba2JdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVyblwiVGFibGVQcm9wZXJ0aWVzVUlcIn1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTt0LmNvbmZpZy5kZWZpbmUoXCJ0YWJsZS50YWJsZVByb3BlcnRpZXNcIix7Ym9yZGVyQ29sb3JzOmFSLGJhY2tncm91bmRDb2xvcnM6YVJ9KX1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQudDt0aGlzLl9iYWxsb29uPXQucGx1Z2lucy5nZXQoa2IpO3RoaXMudmlldz10aGlzLl9jcmVhdGVQcm9wZXJ0aWVzVmlldygpO3RoaXMuX3VuZG9TdGVwQmF0Y2g9bnVsbDt0LnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKFwidGFibGVQcm9wZXJ0aWVzXCIsdD0+e2NvbnN0IGk9bmV3IGhiKHQpO2kuc2V0KHtsYWJlbDplKFwia2dcIiksaWNvbjpFTyx0b29sdGlwOnRydWV9KTt0aGlzLmxpc3RlblRvKGksXCJleGVjdXRlXCIsKCk9PnRoaXMuX3Nob3dWaWV3KCkpO3JldHVybiBpfSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKTt0aGlzLnZpZXcuZGVzdHJveSgpfV9jcmVhdGVQcm9wZXJ0aWVzVmlldygpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7Y29uc3QgZT10LmVkaXRpbmcudmlldy5kb2N1bWVudDtjb25zdCBpPXQuY29uZmlnLmdldChcInRhYmxlLnRhYmxlUHJvcGVydGllc1wiKTtjb25zdCBuPV9fKGkuYm9yZGVyQ29sb3JzKTtjb25zdCBvPWtfKHQubG9jYWxlLG4pO2NvbnN0IHI9X18oaS5iYWNrZ3JvdW5kQ29sb3JzKTtjb25zdCBzPWtfKHQubG9jYWxlLHIpO2NvbnN0IGE9bmV3IFBPKHQubG9jYWxlLHtib3JkZXJDb2xvcnM6byxiYWNrZ3JvdW5kQ29sb3JzOnN9KTtjb25zdCBjPXQudDthLnJlbmRlcigpO3RoaXMubGlzdGVuVG8oYSxcInN1Ym1pdFwiLCgpPT57dGhpcy5faGlkZVZpZXcoKX0pO3RoaXMubGlzdGVuVG8oYSxcImNhbmNlbFwiLCgpPT57aWYodGhpcy5fdW5kb1N0ZXBCYXRjaC5vcGVyYXRpb25zLmxlbmd0aCl7dC5leGVjdXRlKFwidW5kb1wiLHRoaXMuX3VuZG9TdGVwQmF0Y2gpfXRoaXMuX2hpZGVWaWV3KCl9KTthLmtleXN0cm9rZXMuc2V0KFwiRXNjXCIsKHQsZSk9Pnt0aGlzLl9oaWRlVmlldygpO2UoKX0pO3RoaXMubGlzdGVuVG8odC51aSxcInVwZGF0ZVwiLCgpPT57aWYoIW5TKGUuc2VsZWN0aW9uKSl7dGhpcy5faGlkZVZpZXcoKX1lbHNlIGlmKHRoaXMuX2lzVmlld1Zpc2libGUpe1lFKHQsXCJ0YWJsZVwiKX19KTtEYih7ZW1pdHRlcjphLGFjdGl2YXRvcjooKT0+dGhpcy5faXNWaWV3SW5CYWxsb29uLGNvbnRleHRFbGVtZW50czpbdGhpcy5fYmFsbG9vbi52aWV3LmVsZW1lbnRdLGNhbGxiYWNrOigpPT50aGlzLl9oaWRlVmlldygpfSk7Y29uc3QgbD10UihjKTtjb25zdCBkPWVSKGMpO2Eub24oXCJjaGFuZ2U6Ym9yZGVyU3R5bGVcIix0aGlzLl9nZXRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKFwidGFibGVCb3JkZXJTdHlsZVwiKSk7YS5vbihcImNoYW5nZTpib3JkZXJDb2xvclwiLHRoaXMuX2dldFZhbGlkYXRlZFByb3BlcnR5Q2hhbmdlQ2FsbGJhY2soe3ZpZXdGaWVsZDphLmJvcmRlckNvbG9ySW5wdXQsY29tbWFuZE5hbWU6XCJ0YWJsZUJvcmRlckNvbG9yXCIsZXJyb3JUZXh0OmwsdmFsaWRhdG9yOmlSfSkpO2Eub24oXCJjaGFuZ2U6Ym9yZGVyV2lkdGhcIix0aGlzLl9nZXRWYWxpZGF0ZWRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKHt2aWV3RmllbGQ6YS5ib3JkZXJXaWR0aElucHV0LGNvbW1hbmROYW1lOlwidGFibGVCb3JkZXJXaWR0aFwiLGVycm9yVGV4dDpkLHZhbGlkYXRvcjpvUn0pKTthLm9uKFwiY2hhbmdlOmJhY2tncm91bmRDb2xvclwiLHRoaXMuX2dldFZhbGlkYXRlZFByb3BlcnR5Q2hhbmdlQ2FsbGJhY2soe3ZpZXdGaWVsZDphLmJhY2tncm91bmRJbnB1dCxjb21tYW5kTmFtZTpcInRhYmxlQmFja2dyb3VuZENvbG9yXCIsZXJyb3JUZXh0OmwsdmFsaWRhdG9yOmlSfSkpO2Eub24oXCJjaGFuZ2U6d2lkdGhcIix0aGlzLl9nZXRWYWxpZGF0ZWRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKHt2aWV3RmllbGQ6YS53aWR0aElucHV0LGNvbW1hbmROYW1lOlwidGFibGVXaWR0aFwiLGVycm9yVGV4dDpkLHZhbGlkYXRvcjpuUn0pKTthLm9uKFwiY2hhbmdlOmhlaWdodFwiLHRoaXMuX2dldFZhbGlkYXRlZFByb3BlcnR5Q2hhbmdlQ2FsbGJhY2soe3ZpZXdGaWVsZDphLmhlaWdodElucHV0LGNvbW1hbmROYW1lOlwidGFibGVIZWlnaHRcIixlcnJvclRleHQ6ZCx2YWxpZGF0b3I6blJ9KSk7YS5vbihcImNoYW5nZTphbGlnbm1lbnRcIix0aGlzLl9nZXRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKFwidGFibGVBbGlnbm1lbnRcIikpO3JldHVybiBhfV9maWxsVmlld0Zvcm1Gcm9tQ29tbWFuZFZhbHVlcygpe2NvbnN0IHQ9dGhpcy5lZGl0b3IuY29tbWFuZHM7dGhpcy52aWV3LnNldCh7Ym9yZGVyU3R5bGU6dC5nZXQoXCJ0YWJsZUJvcmRlclN0eWxlXCIpLnZhbHVlfHxcIlwiLGJvcmRlckNvbG9yOnQuZ2V0KFwidGFibGVCb3JkZXJDb2xvclwiKS52YWx1ZXx8XCJcIixib3JkZXJXaWR0aDp0LmdldChcInRhYmxlQm9yZGVyV2lkdGhcIikudmFsdWV8fFwiXCIsYmFja2dyb3VuZENvbG9yOnQuZ2V0KFwidGFibGVCYWNrZ3JvdW5kQ29sb3JcIikudmFsdWV8fFwiXCIsd2lkdGg6dC5nZXQoXCJ0YWJsZVdpZHRoXCIpLnZhbHVlfHxcIlwiLGhlaWdodDp0LmdldChcInRhYmxlSGVpZ2h0XCIpLnZhbHVlfHxcIlwiLGFsaWdubWVudDp0LmdldChcInRhYmxlQWxpZ25tZW50XCIpLnZhbHVlfHxcIlwifSl9X3Nob3dWaWV3KCl7Y29uc3QgdD10aGlzLmVkaXRvcjt0aGlzLl9iYWxsb29uLmFkZCh7dmlldzp0aGlzLnZpZXcscG9zaXRpb246UUUodCl9KTt0aGlzLl91bmRvU3RlcEJhdGNoPXQubW9kZWwuY3JlYXRlQmF0Y2goKTt0aGlzLl9maWxsVmlld0Zvcm1Gcm9tQ29tbWFuZFZhbHVlcygpO3RoaXMudmlldy5mb2N1cygpfV9oaWRlVmlldygpe2lmKCF0aGlzLl9pc1ZpZXdJbkJhbGxvb24pe3JldHVybn1jb25zdCB0PXRoaXMuZWRpdG9yO3RoaXMuc3RvcExpc3RlbmluZyh0LnVpLFwidXBkYXRlXCIpO3RoaXMudmlldy5zYXZlQnV0dG9uVmlldy5mb2N1cygpO3RoaXMuX2JhbGxvb24ucmVtb3ZlKHRoaXMudmlldyk7dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmZvY3VzKCl9Z2V0IF9pc1ZpZXdWaXNpYmxlKCl7cmV0dXJuIHRoaXMuX2JhbGxvb24udmlzaWJsZVZpZXc9PT10aGlzLnZpZXd9Z2V0IF9pc1ZpZXdJbkJhbGxvb24oKXtyZXR1cm4gdGhpcy5fYmFsbG9vbi5oYXNWaWV3KHRoaXMudmlldyl9X2dldFByb3BlcnR5Q2hhbmdlQ2FsbGJhY2sodCl7cmV0dXJuKGUsaSxuKT0+e3RoaXMuZWRpdG9yLmV4ZWN1dGUodCx7dmFsdWU6bixiYXRjaDp0aGlzLl91bmRvU3RlcEJhdGNofSl9fV9nZXRWYWxpZGF0ZWRQcm9wZXJ0eUNoYW5nZUNhbGxiYWNrKHtjb21tYW5kTmFtZTp0LHZpZXdGaWVsZDplLHZhbGlkYXRvcjppLGVycm9yVGV4dDpufSl7Y29uc3Qgbz11aCgoKT0+e2UuZXJyb3JUZXh0PW59LFJPKTtyZXR1cm4obixyLHMpPT57by5jYW5jZWwoKTtpZihpKHMpKXt0aGlzLmVkaXRvci5leGVjdXRlKHQse3ZhbHVlOnMsYmF0Y2g6dGhpcy5fdW5kb1N0ZXBCYXRjaH0pO2UuZXJyb3JUZXh0PW51bGx9ZWxzZXtvKCl9fX19Y2xhc3MgSU8gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlRhYmxlUHJvcGVydGllc1wifXN0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bX08sT09dfX1jb25zdCBWTz1cInVuZGVybGluZVwiO2NsYXNzIE5PIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJVbmRlcmxpbmVFZGl0aW5nXCJ9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dC5tb2RlbC5zY2hlbWEuZXh0ZW5kKFwiJHRleHRcIix7YWxsb3dBdHRyaWJ1dGVzOlZPfSk7dC5tb2RlbC5zY2hlbWEuc2V0QXR0cmlidXRlUHJvcGVydGllcyhWTyx7aXNGb3JtYXR0aW5nOnRydWUsY29weU9uRW50ZXI6dHJ1ZX0pO3QuY29udmVyc2lvbi5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOlZPLHZpZXc6XCJ1XCIsdXBjYXN0QWxzbzp7c3R5bGVzOntcInRleHQtZGVjb3JhdGlvblwiOlwidW5kZXJsaW5lXCJ9fX0pO3QuY29tbWFuZHMuYWRkKFZPLG5ldyB5ayh0LFZPKSk7dC5rZXlzdHJva2VzLnNldChcIkNUUkwrVVwiLFwidW5kZXJsaW5lXCIpfX12YXIgTU89Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTMgMTh2LTEuNWgxNFYxOHptMi4yLThWMy42YzAtLjQuNC0uNi44LS42LjMgMCAuNy4yLjcuNnY2LjJjMCAyIDEuMyAyLjggMy4yIDIuOCAxLjkgMCAzLjQtLjkgMy40LTIuOVYzLjZjMC0uMy40LS41LjgtLjUuMyAwIC43LjIuNy41VjEwYzAgMi43LTIuMiA0LTQuOSA0LTIuNiAwLTQuNy0xLjItNC43LTR6XCIvPjwvc3ZnPic7Y29uc3QgQk89XCJ1bmRlcmxpbmVcIjtjbGFzcyB6TyBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC50O3QudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoQk8saT0+e2NvbnN0IG49dC5jb21tYW5kcy5nZXQoQk8pO2NvbnN0IG89bmV3IGhiKGkpO28uc2V0KHtsYWJlbDplKFwiam5cIiksaWNvbjpNTyxrZXlzdHJva2U6XCJDVFJMK1VcIix0b29sdGlwOnRydWUsaXNUb2dnbGVhYmxlOnRydWV9KTtvLmJpbmQoXCJpc09uXCIsXCJpc0VuYWJsZWRcIikudG8obixcInZhbHVlXCIsXCJpc0VuYWJsZWRcIik7dGhpcy5saXN0ZW5UbyhvLFwiZXhlY3V0ZVwiLCgpPT57dC5leGVjdXRlKEJPKTt0LmVkaXRpbmcudmlldy5mb2N1cygpfSk7cmV0dXJuIG99KX19Y2xhc3MgTE8gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW05PLHpPXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlVuZGVybGluZVwifX1mdW5jdGlvbipGTyh0LGUpe2Zvcihjb25zdCBpIG9mIGUpe2lmKGkmJnQuZ2V0QXR0cmlidXRlUHJvcGVydGllcyhpWzBdKS5jb3B5T25FbnRlcil7eWllbGQgaX19fWNsYXNzIERPIGV4dGVuZHMgand7ZXhlY3V0ZSgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50O3QuY2hhbmdlKGk9PntqTyh0aGlzLmVkaXRvci5tb2RlbCxpLGUuc2VsZWN0aW9uLHQuc2NoZW1hKTt0aGlzLmZpcmUoXCJhZnRlckV4ZWN1dGVcIix7d3JpdGVyOml9KX0pfX1mdW5jdGlvbiBqTyh0LGUsaSxuKXtjb25zdCBvPWkuaXNDb2xsYXBzZWQ7Y29uc3Qgcj1pLmdldEZpcnN0UmFuZ2UoKTtjb25zdCBzPXIuc3RhcnQucGFyZW50O2NvbnN0IGE9ci5lbmQucGFyZW50O2lmKG4uaXNMaW1pdChzKXx8bi5pc0xpbWl0KGEpKXtpZighbyYmcz09YSl7dC5kZWxldGVDb250ZW50KGkpfXJldHVybn1pZihvKXtjb25zdCB0PUZPKGUubW9kZWwuc2NoZW1hLGkuZ2V0QXR0cmlidXRlcygpKTtITyhlLHIuc3RhcnQpO2Uuc2V0U2VsZWN0aW9uQXR0cmlidXRlKHQpfWVsc2V7Y29uc3Qgbj0hKHIuc3RhcnQuaXNBdFN0YXJ0JiZyLmVuZC5pc0F0RW5kKTtjb25zdCBvPXM9PWE7dC5kZWxldGVDb250ZW50KGkse2xlYXZlVW5tZXJnZWQ6bn0pO2lmKG4pe2lmKG8pe0hPKGUsaS5mb2N1cyl9ZWxzZXtlLnNldFNlbGVjdGlvbihhLDApfX19fWZ1bmN0aW9uIEhPKHQsZSl7dC5zcGxpdChlKTt0LnNldFNlbGVjdGlvbihlLnBhcmVudC5uZXh0U2libGluZywwKX1jbGFzcyBXTyBleHRlbmRzIEdke2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO2NvbnN0IGU9dGhpcy5kb2N1bWVudDtlLm9uKFwia2V5ZG93blwiLCh0LGkpPT57aWYodGhpcy5pc0VuYWJsZWQmJmkua2V5Q29kZT09TmwuZW50ZXIpe2xldCBuO2Uub25jZShcImVudGVyXCIsdD0+bj10LHtwcmlvcml0eTpcImhpZ2hlc3RcIn0pO2UuZmlyZShcImVudGVyXCIsbmV3IEt1KGUsaS5kb21FdmVudCx7aXNTb2Z0Omkuc2hpZnRLZXl9KSk7aWYobiYmbi5zdG9wLmNhbGxlZCl7dC5zdG9wKCl9fX0pfW9ic2VydmUoKXt9fWNsYXNzIHFPIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJFbnRlclwifWluaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5lZGl0aW5nLnZpZXc7Y29uc3QgaT1lLmRvY3VtZW50O2UuYWRkT2JzZXJ2ZXIoV08pO3QuY29tbWFuZHMuYWRkKFwiZW50ZXJcIixuZXcgRE8odCkpO3RoaXMubGlzdGVuVG8oaSxcImVudGVyXCIsKGksbik9PntuLnByZXZlbnREZWZhdWx0KCk7aWYobi5pc1NvZnQpe3JldHVybn10LmV4ZWN1dGUoXCJlbnRlclwiKTtlLnNjcm9sbFRvVGhlU2VsZWN0aW9uKCl9LHtwcmlvcml0eTpcImxvd1wifSl9fWNsYXNzIFVPIGV4dGVuZHMgand7ZXhlY3V0ZSgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50O3QuY2hhbmdlKGk9PntHTyh0LGksZS5zZWxlY3Rpb24pO3RoaXMuZmlyZShcImFmdGVyRXhlY3V0ZVwiLHt3cml0ZXI6aX0pfSl9cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Y29uc3QgZT10LmRvY3VtZW50O3RoaXMuaXNFbmFibGVkPSRPKHQuc2NoZW1hLGUuc2VsZWN0aW9uKX19ZnVuY3Rpb24gJE8odCxlKXtpZihlLnJhbmdlQ291bnQ+MSl7cmV0dXJuIGZhbHNlfWNvbnN0IGk9ZS5hbmNob3I7aWYoIWl8fCF0LmNoZWNrQ2hpbGQoaSxcInNvZnRCcmVha1wiKSl7cmV0dXJuIGZhbHNlfWNvbnN0IG49ZS5nZXRGaXJzdFJhbmdlKCk7Y29uc3Qgbz1uLnN0YXJ0LnBhcmVudDtjb25zdCByPW4uZW5kLnBhcmVudDtpZigoSk8obyx0KXx8Sk8ocix0KSkmJm8hPT1yKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9ZnVuY3Rpb24gR08odCxlLGkpe2NvbnN0IG49aS5pc0NvbGxhcHNlZDtjb25zdCBvPWkuZ2V0Rmlyc3RSYW5nZSgpO2NvbnN0IHI9by5zdGFydC5wYXJlbnQ7Y29uc3Qgcz1vLmVuZC5wYXJlbnQ7Y29uc3QgYT1yPT1zO2lmKG4pe2NvbnN0IG49Rk8odC5zY2hlbWEsaS5nZXRBdHRyaWJ1dGVzKCkpO0tPKHQsZSxvLmVuZCk7ZS5yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUoaS5nZXRBdHRyaWJ1dGVLZXlzKCkpO2Uuc2V0U2VsZWN0aW9uQXR0cmlidXRlKG4pfWVsc2V7Y29uc3Qgbj0hKG8uc3RhcnQuaXNBdFN0YXJ0JiZvLmVuZC5pc0F0RW5kKTt0LmRlbGV0ZUNvbnRlbnQoaSx7bGVhdmVVbm1lcmdlZDpufSk7aWYoYSl7S08odCxlLGkuZm9jdXMpfWVsc2V7aWYobil7ZS5zZXRTZWxlY3Rpb24ocywwKX19fX1mdW5jdGlvbiBLTyh0LGUsaSl7Y29uc3Qgbj1lLmNyZWF0ZUVsZW1lbnQoXCJzb2Z0QnJlYWtcIik7dC5pbnNlcnRDb250ZW50KG4saSk7ZS5zZXRTZWxlY3Rpb24obixcImFmdGVyXCIpfWZ1bmN0aW9uIEpPKHQsZSl7aWYodC5pcyhcInJvb3RFbGVtZW50XCIpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGUuaXNMaW1pdCh0KXx8Sk8odC5wYXJlbnQsZSl9Y2xhc3MgWU8gZXh0ZW5kcyBtcHtzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm5cIlNoaWZ0RW50ZXJcIn1pbml0KCl7Y29uc3QgdD10aGlzLmVkaXRvcjtjb25zdCBlPXQubW9kZWwuc2NoZW1hO2NvbnN0IGk9dC5jb252ZXJzaW9uO2NvbnN0IG49dC5lZGl0aW5nLnZpZXc7Y29uc3Qgbz1uLmRvY3VtZW50O2UucmVnaXN0ZXIoXCJzb2Z0QnJlYWtcIix7YWxsb3dXaGVyZTpcIiR0ZXh0XCIsaXNJbmxpbmU6dHJ1ZX0pO2kuZm9yKFwidXBjYXN0XCIpLmVsZW1lbnRUb0VsZW1lbnQoe21vZGVsOlwic29mdEJyZWFrXCIsdmlldzpcImJyXCJ9KTtpLmZvcihcImRvd25jYXN0XCIpLmVsZW1lbnRUb0VsZW1lbnQoe21vZGVsOlwic29mdEJyZWFrXCIsdmlldzoodCxlKT0+ZS5jcmVhdGVFbXB0eUVsZW1lbnQoXCJiclwiKX0pO24uYWRkT2JzZXJ2ZXIoV08pO3QuY29tbWFuZHMuYWRkKFwic2hpZnRFbnRlclwiLG5ldyBVTyh0KSk7dGhpcy5saXN0ZW5UbyhvLFwiZW50ZXJcIiwoZSxpKT0+e2kucHJldmVudERlZmF1bHQoKTtpZighaS5pc1NvZnQpe3JldHVybn10LmV4ZWN1dGUoXCJzaGlmdEVudGVyXCIpO24uc2Nyb2xsVG9UaGVTZWxlY3Rpb24oKX0se3ByaW9yaXR5OlwibG93XCJ9KX19Y29uc3QgUU89bmV3IE1hcDtmdW5jdGlvbiBYTyh0LGUsaSl7bGV0IG49UU8uZ2V0KHQpO2lmKCFuKXtuPW5ldyBNYXA7UU8uc2V0KHQsbil9bi5zZXQoZSxpKX1mdW5jdGlvbiBaTyh0LGUpe2NvbnN0IGk9UU8uZ2V0KHQpO2lmKGkmJmkuaGFzKGUpKXtyZXR1cm4gaS5nZXQoZSl9cmV0dXJuIHRJfWZ1bmN0aW9uIHRJKHQpe3JldHVyblt0XX1mdW5jdGlvbiBlSSh0LGUsaT17fSl7Y29uc3Qgbj1aTyh0LmNvbnN0cnVjdG9yLGUuY29uc3RydWN0b3IpO3RyeXt0PXQuY2xvbmUoKTtyZXR1cm4gbih0LGUsaSl9Y2F0Y2godCl7dGhyb3cgdH19ZnVuY3Rpb24gaUkodCxlLGkpe3Q9dC5zbGljZSgpO2U9ZS5zbGljZSgpO2NvbnN0IG49bmV3IG5JKGkuZG9jdW1lbnQsaS51c2VSZWxhdGlvbnMsaS5mb3JjZVdlYWtSZW1vdmUpO24uc2V0T3JpZ2luYWxPcGVyYXRpb25zKHQpO24uc2V0T3JpZ2luYWxPcGVyYXRpb25zKGUpO2NvbnN0IG89bi5vcmlnaW5hbE9wZXJhdGlvbnM7aWYodC5sZW5ndGg9PTB8fGUubGVuZ3RoPT0wKXtyZXR1cm57b3BlcmF0aW9uc0E6dCxvcGVyYXRpb25zQjplLG9yaWdpbmFsT3BlcmF0aW9uczpvfX1jb25zdCByPW5ldyBXZWFrTWFwO2Zvcihjb25zdCBlIG9mIHQpe3Iuc2V0KGUsMCl9Y29uc3Qgcz17bmV4dEJhc2VWZXJzaW9uQTp0W3QubGVuZ3RoLTFdLmJhc2VWZXJzaW9uKzEsbmV4dEJhc2VWZXJzaW9uQjplW2UubGVuZ3RoLTFdLmJhc2VWZXJzaW9uKzEsb3JpZ2luYWxPcGVyYXRpb25zQUNvdW50OnQubGVuZ3RoLG9yaWdpbmFsT3BlcmF0aW9uc0JDb3VudDplLmxlbmd0aH07bGV0IGE9MDt3aGlsZShhPHQubGVuZ3RoKXtjb25zdCBpPXRbYV07Y29uc3Qgbz1yLmdldChpKTtpZihvPT1lLmxlbmd0aCl7YSsrO2NvbnRpbnVlfWNvbnN0IHM9ZVtvXTtjb25zdCBjPWVJKGkscyxuLmdldENvbnRleHQoaSxzLHRydWUpKTtjb25zdCBsPWVJKHMsaSxuLmdldENvbnRleHQocyxpLGZhbHNlKSk7bi51cGRhdGVSZWxhdGlvbihpLHMpO24uc2V0T3JpZ2luYWxPcGVyYXRpb25zKGMsaSk7bi5zZXRPcmlnaW5hbE9wZXJhdGlvbnMobCxzKTtmb3IoY29uc3QgdCBvZiBjKXtyLnNldCh0LG8rbC5sZW5ndGgpfXQuc3BsaWNlKGEsMSwuLi5jKTtlLnNwbGljZShvLDEsLi4ubCl9aWYoaS5wYWRXaXRoTm9PcHMpe2NvbnN0IGk9dC5sZW5ndGgtcy5vcmlnaW5hbE9wZXJhdGlvbnNBQ291bnQ7Y29uc3Qgbj1lLmxlbmd0aC1zLm9yaWdpbmFsT3BlcmF0aW9uc0JDb3VudDtySSh0LG4taSk7ckkoZSxpLW4pfW9JKHQscy5uZXh0QmFzZVZlcnNpb25CKTtvSShlLHMubmV4dEJhc2VWZXJzaW9uQSk7cmV0dXJue29wZXJhdGlvbnNBOnQsb3BlcmF0aW9uc0I6ZSxvcmlnaW5hbE9wZXJhdGlvbnM6b319Y2xhc3Mgbkl7Y29uc3RydWN0b3IodCxlLGk9ZmFsc2Upe3RoaXMub3JpZ2luYWxPcGVyYXRpb25zPW5ldyBNYXA7dGhpcy5faGlzdG9yeT10Lmhpc3Rvcnk7dGhpcy5fdXNlUmVsYXRpb25zPWU7dGhpcy5fZm9yY2VXZWFrUmVtb3ZlPSEhaTt0aGlzLl9yZWxhdGlvbnM9bmV3IE1hcH1zZXRPcmlnaW5hbE9wZXJhdGlvbnModCxlPW51bGwpe2NvbnN0IGk9ZT90aGlzLm9yaWdpbmFsT3BlcmF0aW9ucy5nZXQoZSk6bnVsbDtmb3IoY29uc3QgZSBvZiB0KXt0aGlzLm9yaWdpbmFsT3BlcmF0aW9ucy5zZXQoZSxpfHxlKX19dXBkYXRlUmVsYXRpb24odCxlKXtzd2l0Y2godC5jb25zdHJ1Y3Rvcil7Y2FzZSBaZzp7c3dpdGNoKGUuY29uc3RydWN0b3Ipe2Nhc2Ugb206e2lmKHQudGFyZ2V0UG9zaXRpb24uaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKXx8ZS5tb3ZlZFJhbmdlLmNvbnRhaW5zUG9zaXRpb24odC50YXJnZXRQb3NpdGlvbikpe3RoaXMuX3NldFJlbGF0aW9uKHQsZSxcImluc2VydEF0U291cmNlXCIpfWVsc2UgaWYodC50YXJnZXRQb3NpdGlvbi5pc0VxdWFsKGUuZGVsZXRpb25Qb3NpdGlvbikpe3RoaXMuX3NldFJlbGF0aW9uKHQsZSxcImluc2VydEJldHdlZW5cIil9ZWxzZSBpZih0LnRhcmdldFBvc2l0aW9uLmlzQWZ0ZXIoZS5zb3VyY2VQb3NpdGlvbikpe3RoaXMuX3NldFJlbGF0aW9uKHQsZSxcIm1vdmVUYXJnZXRBZnRlclwiKX1icmVha31jYXNlIFpnOntpZih0LnRhcmdldFBvc2l0aW9uLmlzRXF1YWwoZS5zb3VyY2VQb3NpdGlvbil8fHQudGFyZ2V0UG9zaXRpb24uaXNCZWZvcmUoZS5zb3VyY2VQb3NpdGlvbikpe3RoaXMuX3NldFJlbGF0aW9uKHQsZSxcImluc2VydEJlZm9yZVwiKX1lbHNle3RoaXMuX3NldFJlbGF0aW9uKHQsZSxcImluc2VydEFmdGVyXCIpfWJyZWFrfX1icmVha31jYXNlIHJtOntzd2l0Y2goZS5jb25zdHJ1Y3Rvcil7Y2FzZSBvbTp7aWYodC5zcGxpdFBvc2l0aW9uLmlzQmVmb3JlKGUuc291cmNlUG9zaXRpb24pKXt0aGlzLl9zZXRSZWxhdGlvbih0LGUsXCJzcGxpdEJlZm9yZVwiKX1icmVha31jYXNlIFpnOntpZih0LnNwbGl0UG9zaXRpb24uaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKXx8dC5zcGxpdFBvc2l0aW9uLmlzQmVmb3JlKGUuc291cmNlUG9zaXRpb24pKXt0aGlzLl9zZXRSZWxhdGlvbih0LGUsXCJzcGxpdEJlZm9yZVwiKX1icmVha319YnJlYWt9Y2FzZSBvbTp7c3dpdGNoKGUuY29uc3RydWN0b3Ipe2Nhc2Ugb206e2lmKCF0LnRhcmdldFBvc2l0aW9uLmlzRXF1YWwoZS5zb3VyY2VQb3NpdGlvbikpe3RoaXMuX3NldFJlbGF0aW9uKHQsZSxcIm1lcmdlVGFyZ2V0Tm90TW92ZWRcIil9aWYodC5zb3VyY2VQb3NpdGlvbi5pc0VxdWFsKGUudGFyZ2V0UG9zaXRpb24pKXt0aGlzLl9zZXRSZWxhdGlvbih0LGUsXCJtZXJnZVNvdXJjZU5vdE1vdmVkXCIpfWlmKHQuc291cmNlUG9zaXRpb24uaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKSl7dGhpcy5fc2V0UmVsYXRpb24odCxlLFwibWVyZ2VTYW1lRWxlbWVudFwiKX1icmVha31jYXNlIHJtOntpZih0LnNvdXJjZVBvc2l0aW9uLmlzRXF1YWwoZS5zcGxpdFBvc2l0aW9uKSl7dGhpcy5fc2V0UmVsYXRpb24odCxlLFwic3BsaXRBdFNvdXJjZVwiKX19fWJyZWFrfWNhc2UgZW06e2NvbnN0IGk9dC5uZXdSYW5nZTtpZighaSl7cmV0dXJufXN3aXRjaChlLmNvbnN0cnVjdG9yKXtjYXNlIFpnOntjb25zdCBuPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLnNvdXJjZVBvc2l0aW9uLGUuaG93TWFueSk7Y29uc3Qgbz1uLmNvbnRhaW5zUG9zaXRpb24oaS5zdGFydCl8fG4uc3RhcnQuaXNFcXVhbChpLnN0YXJ0KTtjb25zdCByPW4uY29udGFpbnNQb3NpdGlvbihpLmVuZCl8fG4uZW5kLmlzRXF1YWwoaS5lbmQpO2lmKChvfHxyKSYmIW4uY29udGFpbnNSYW5nZShpKSl7dGhpcy5fc2V0UmVsYXRpb24odCxlLHtzaWRlOm8/XCJsZWZ0XCI6XCJyaWdodFwiLHBhdGg6bz9pLnN0YXJ0LnBhdGguc2xpY2UoKTppLmVuZC5wYXRoLnNsaWNlKCl9KX1icmVha31jYXNlIG9tOntjb25zdCBuPWkuc3RhcnQuaXNFcXVhbChlLnRhcmdldFBvc2l0aW9uKTtjb25zdCBvPWkuc3RhcnQuaXNFcXVhbChlLmRlbGV0aW9uUG9zaXRpb24pO2NvbnN0IHI9aS5lbmQuaXNFcXVhbChlLmRlbGV0aW9uUG9zaXRpb24pO2NvbnN0IHM9aS5lbmQuaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKTtpZihufHxvfHxyfHxzKXt0aGlzLl9zZXRSZWxhdGlvbih0LGUse3dhc0luTGVmdEVsZW1lbnQ6bix3YXNTdGFydEJlZm9yZU1lcmdlZEVsZW1lbnQ6byx3YXNFbmRCZWZvcmVNZXJnZWRFbGVtZW50OnIsd2FzSW5SaWdodEVsZW1lbnQ6c30pfWJyZWFrfX1icmVha319fWdldENvbnRleHQodCxlLGkpe3JldHVybnthSXNTdHJvbmc6aSxhV2FzVW5kb25lOnRoaXMuX3dhc1VuZG9uZSh0KSxiV2FzVW5kb25lOnRoaXMuX3dhc1VuZG9uZShlKSxhYlJlbGF0aW9uOnRoaXMuX3VzZVJlbGF0aW9ucz90aGlzLl9nZXRSZWxhdGlvbih0LGUpOm51bGwsYmFSZWxhdGlvbjp0aGlzLl91c2VSZWxhdGlvbnM/dGhpcy5fZ2V0UmVsYXRpb24oZSx0KTpudWxsLGZvcmNlV2Vha1JlbW92ZTp0aGlzLl9mb3JjZVdlYWtSZW1vdmV9fV93YXNVbmRvbmUodCl7Y29uc3QgZT10aGlzLm9yaWdpbmFsT3BlcmF0aW9ucy5nZXQodCk7cmV0dXJuIGUud2FzVW5kb25lfHx0aGlzLl9oaXN0b3J5LmlzVW5kb25lT3BlcmF0aW9uKGUpfV9nZXRSZWxhdGlvbih0LGUpe2NvbnN0IGk9dGhpcy5vcmlnaW5hbE9wZXJhdGlvbnMuZ2V0KGUpO2NvbnN0IG49dGhpcy5faGlzdG9yeS5nZXRVbmRvbmVPcGVyYXRpb24oaSk7aWYoIW4pe3JldHVybiBudWxsfWNvbnN0IG89dGhpcy5vcmlnaW5hbE9wZXJhdGlvbnMuZ2V0KHQpO2NvbnN0IHI9dGhpcy5fcmVsYXRpb25zLmdldChvKTtpZihyKXtyZXR1cm4gci5nZXQobil8fG51bGx9cmV0dXJuIG51bGx9X3NldFJlbGF0aW9uKHQsZSxpKXtjb25zdCBuPXRoaXMub3JpZ2luYWxPcGVyYXRpb25zLmdldCh0KTtjb25zdCBvPXRoaXMub3JpZ2luYWxPcGVyYXRpb25zLmdldChlKTtsZXQgcj10aGlzLl9yZWxhdGlvbnMuZ2V0KG4pO2lmKCFyKXtyPW5ldyBNYXA7dGhpcy5fcmVsYXRpb25zLnNldChuLHIpfXIuc2V0KG8saSl9fWZ1bmN0aW9uIG9JKHQsZSl7Zm9yKGNvbnN0IGkgb2YgdCl7aS5iYXNlVmVyc2lvbj1lKyt9fWZ1bmN0aW9uIHJJKHQsZSl7Zm9yKGxldCBpPTA7aTxlO2krKyl7dC5wdXNoKG5ldyBTbSgwKSl9fVhPKFFnLFFnLCh0LGUsaSk9PntpZih0LmtleT09PWUua2V5KXtjb25zdCBuPXQucmFuZ2UuZ2V0RGlmZmVyZW5jZShlLnJhbmdlKS5tYXAoZT0+bmV3IFFnKGUsdC5rZXksdC5vbGRWYWx1ZSx0Lm5ld1ZhbHVlLDApKTtjb25zdCBvPXQucmFuZ2UuZ2V0SW50ZXJzZWN0aW9uKGUucmFuZ2UpO2lmKG8pe2lmKGkuYUlzU3Ryb25nKXtuLnB1c2gobmV3IFFnKG8sZS5rZXksZS5uZXdWYWx1ZSx0Lm5ld1ZhbHVlLDApKX19aWYobi5sZW5ndGg9PTApe3JldHVybltuZXcgU20oMCldfXJldHVybiBufWVsc2V7cmV0dXJuW3RdfX0pO1hPKFFnLHRtLCh0LGUpPT57aWYodC5yYW5nZS5zdGFydC5oYXNTYW1lUGFyZW50QXMoZS5wb3NpdGlvbikmJnQucmFuZ2UuY29udGFpbnNQb3NpdGlvbihlLnBvc2l0aW9uKSl7Y29uc3QgaT10LnJhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKGUucG9zaXRpb24sZS5ob3dNYW55LCFlLnNob3VsZFJlY2VpdmVBdHRyaWJ1dGVzKTtjb25zdCBuPWkubWFwKGU9Pm5ldyBRZyhlLHQua2V5LHQub2xkVmFsdWUsdC5uZXdWYWx1ZSx0LmJhc2VWZXJzaW9uKSk7aWYoZS5zaG91bGRSZWNlaXZlQXR0cmlidXRlcyl7Y29uc3QgaT1zSShlLHQua2V5LHQub2xkVmFsdWUpO2lmKGkpe24udW5zaGlmdChpKX19cmV0dXJuIG59dC5yYW5nZT10LnJhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKGUucG9zaXRpb24sZS5ob3dNYW55LGZhbHNlKVswXTtyZXR1cm5bdF19KTtmdW5jdGlvbiBzSSh0LGUsaSl7Y29uc3Qgbj10Lm5vZGVzO2NvbnN0IG89bi5nZXROb2RlKDApLmdldEF0dHJpYnV0ZShlKTtpZihvPT1pKXtyZXR1cm4gbnVsbH1jb25zdCByPW5ldyAkaCh0LnBvc2l0aW9uLHQucG9zaXRpb24uZ2V0U2hpZnRlZEJ5KHQuaG93TWFueSkpO3JldHVybiBuZXcgUWcocixlLG8saSwwKX1YTyhRZyxvbSwodCxlKT0+e2NvbnN0IGk9W107aWYodC5yYW5nZS5zdGFydC5oYXNTYW1lUGFyZW50QXMoZS5kZWxldGlvblBvc2l0aW9uKSl7aWYodC5yYW5nZS5jb250YWluc1Bvc2l0aW9uKGUuZGVsZXRpb25Qb3NpdGlvbil8fHQucmFuZ2Uuc3RhcnQuaXNFcXVhbChlLmRlbGV0aW9uUG9zaXRpb24pKXtpLnB1c2goJGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUuZ3JhdmV5YXJkUG9zaXRpb24sMSkpfX1jb25zdCBuPXQucmFuZ2UuX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbihlKTtpZighbi5pc0NvbGxhcHNlZCl7aS5wdXNoKG4pfXJldHVybiBpLm1hcChlPT5uZXcgUWcoZSx0LmtleSx0Lm9sZFZhbHVlLHQubmV3VmFsdWUsdC5iYXNlVmVyc2lvbikpfSk7WE8oUWcsWmcsKHQsZSk9Pntjb25zdCBpPWFJKHQucmFuZ2UsZSk7cmV0dXJuIGkubWFwKGU9Pm5ldyBRZyhlLHQua2V5LHQub2xkVmFsdWUsdC5uZXdWYWx1ZSx0LmJhc2VWZXJzaW9uKSl9KTtmdW5jdGlvbiBhSSh0LGUpe2NvbnN0IGk9JGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KTtsZXQgbj1udWxsO2xldCBvPVtdO2lmKGkuY29udGFpbnNSYW5nZSh0LHRydWUpKXtuPXR9ZWxzZSBpZih0LnN0YXJ0Lmhhc1NhbWVQYXJlbnRBcyhpLnN0YXJ0KSl7bz10LmdldERpZmZlcmVuY2UoaSk7bj10LmdldEludGVyc2VjdGlvbihpKX1lbHNle289W3RdfWNvbnN0IHI9W107Zm9yKGxldCB0IG9mIG8pe3Q9dC5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KTtjb25zdCBpPWUuZ2V0TW92ZWRSYW5nZVN0YXJ0KCk7Y29uc3Qgbj10LnN0YXJ0Lmhhc1NhbWVQYXJlbnRBcyhpKTt0PXQuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24oaSxlLmhvd01hbnksbik7ci5wdXNoKC4uLnQpfWlmKG4pe3IucHVzaChuLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShlLnNvdXJjZVBvc2l0aW9uLGUudGFyZ2V0UG9zaXRpb24sZS5ob3dNYW55LGZhbHNlKVswXSl9cmV0dXJuIHJ9WE8oUWcscm0sKHQsZSk9PntpZih0LnJhbmdlLmVuZC5pc0VxdWFsKGUuaW5zZXJ0aW9uUG9zaXRpb24pKXtpZighZS5ncmF2ZXlhcmRQb3NpdGlvbil7dC5yYW5nZS5lbmQub2Zmc2V0Kyt9cmV0dXJuW3RdfWlmKHQucmFuZ2Uuc3RhcnQuaGFzU2FtZVBhcmVudEFzKGUuc3BsaXRQb3NpdGlvbikmJnQucmFuZ2UuY29udGFpbnNQb3NpdGlvbihlLnNwbGl0UG9zaXRpb24pKXtjb25zdCBpPXQuY2xvbmUoKTtpLnJhbmdlPW5ldyAkaChlLm1vdmVUYXJnZXRQb3NpdGlvbi5jbG9uZSgpLHQucmFuZ2UuZW5kLl9nZXRDb21iaW5lZChlLnNwbGl0UG9zaXRpb24sZS5tb3ZlVGFyZ2V0UG9zaXRpb24pKTt0LnJhbmdlLmVuZD1lLnNwbGl0UG9zaXRpb24uY2xvbmUoKTt0LnJhbmdlLmVuZC5zdGlja2luZXNzPVwidG9QcmV2aW91c1wiO3JldHVyblt0LGldfXQucmFuZ2U9dC5yYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKGUpO3JldHVyblt0XX0pO1hPKHRtLFFnLCh0LGUpPT57Y29uc3QgaT1bdF07aWYodC5zaG91bGRSZWNlaXZlQXR0cmlidXRlcyYmdC5wb3NpdGlvbi5oYXNTYW1lUGFyZW50QXMoZS5yYW5nZS5zdGFydCkmJmUucmFuZ2UuY29udGFpbnNQb3NpdGlvbih0LnBvc2l0aW9uKSl7Y29uc3Qgbj1zSSh0LGUua2V5LGUubmV3VmFsdWUpO2lmKG4pe2kucHVzaChuKX19cmV0dXJuIGl9KTtYTyh0bSx0bSwodCxlLGkpPT57aWYodC5wb3NpdGlvbi5pc0VxdWFsKGUucG9zaXRpb24pJiZpLmFJc1N0cm9uZyl7cmV0dXJuW3RdfXQucG9zaXRpb249dC5wb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydE9wZXJhdGlvbihlKTtyZXR1cm5bdF19KTtYTyh0bSxaZywodCxlKT0+e3QucG9zaXRpb249dC5wb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmVPcGVyYXRpb24oZSk7cmV0dXJuW3RdfSk7WE8odG0scm0sKHQsZSk9Pnt0LnBvc2l0aW9uPXQucG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlTcGxpdE9wZXJhdGlvbihlKTtyZXR1cm5bdF19KTtYTyh0bSxvbSwodCxlKT0+e3QucG9zaXRpb249dC5wb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1lcmdlT3BlcmF0aW9uKGUpO3JldHVyblt0XX0pO1hPKGVtLHRtLCh0LGUpPT57aWYodC5vbGRSYW5nZSl7dC5vbGRSYW5nZT10Lm9sZFJhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0T3BlcmF0aW9uKGUpWzBdfWlmKHQubmV3UmFuZ2Upe3QubmV3UmFuZ2U9dC5uZXdSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydE9wZXJhdGlvbihlKVswXX1yZXR1cm5bdF19KTtYTyhlbSxlbSwodCxlLGkpPT57aWYodC5uYW1lPT1lLm5hbWUpe2lmKGkuYUlzU3Ryb25nKXt0Lm9sZFJhbmdlPWUubmV3UmFuZ2U/ZS5uZXdSYW5nZS5jbG9uZSgpOm51bGx9ZWxzZXtyZXR1cm5bbmV3IFNtKDApXX19cmV0dXJuW3RdfSk7WE8oZW0sb20sKHQsZSk9PntpZih0Lm9sZFJhbmdlKXt0Lm9sZFJhbmdlPXQub2xkUmFuZ2UuX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbihlKX1pZih0Lm5ld1JhbmdlKXt0Lm5ld1JhbmdlPXQubmV3UmFuZ2UuX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbihlKX1yZXR1cm5bdF19KTtYTyhlbSxaZywodCxlLGkpPT57aWYodC5vbGRSYW5nZSl7dC5vbGRSYW5nZT0kaC5fY3JlYXRlRnJvbVJhbmdlcyh0Lm9sZFJhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKSl9aWYodC5uZXdSYW5nZSl7aWYoaS5hYlJlbGF0aW9uKXtjb25zdCBuPSRoLl9jcmVhdGVGcm9tUmFuZ2VzKHQubmV3UmFuZ2UuX2dldFRyYW5zZm9ybWVkQnlNb3ZlT3BlcmF0aW9uKGUpKTtpZihpLmFiUmVsYXRpb24uc2lkZT09XCJsZWZ0XCImJmUudGFyZ2V0UG9zaXRpb24uaXNFcXVhbCh0Lm5ld1JhbmdlLnN0YXJ0KSl7dC5uZXdSYW5nZS5zdGFydC5wYXRoPWkuYWJSZWxhdGlvbi5wYXRoO3QubmV3UmFuZ2UuZW5kPW4uZW5kO3JldHVyblt0XX1lbHNlIGlmKGkuYWJSZWxhdGlvbi5zaWRlPT1cInJpZ2h0XCImJmUudGFyZ2V0UG9zaXRpb24uaXNFcXVhbCh0Lm5ld1JhbmdlLmVuZCkpe3QubmV3UmFuZ2Uuc3RhcnQ9bi5zdGFydDt0Lm5ld1JhbmdlLmVuZC5wYXRoPWkuYWJSZWxhdGlvbi5wYXRoO3JldHVyblt0XX19dC5uZXdSYW5nZT0kaC5fY3JlYXRlRnJvbVJhbmdlcyh0Lm5ld1JhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKSl9cmV0dXJuW3RdfSk7WE8oZW0scm0sKHQsZSxpKT0+e2lmKHQub2xkUmFuZ2Upe3Qub2xkUmFuZ2U9dC5vbGRSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKGUpfWlmKHQubmV3UmFuZ2Upe2lmKGkuYWJSZWxhdGlvbil7Y29uc3Qgbj10Lm5ld1JhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24oZSk7aWYodC5uZXdSYW5nZS5zdGFydC5pc0VxdWFsKGUuc3BsaXRQb3NpdGlvbikmJmkuYWJSZWxhdGlvbi53YXNTdGFydEJlZm9yZU1lcmdlZEVsZW1lbnQpe3QubmV3UmFuZ2Uuc3RhcnQ9VWguX2NyZWF0ZUF0KGUuaW5zZXJ0aW9uUG9zaXRpb24pfWVsc2UgaWYodC5uZXdSYW5nZS5zdGFydC5pc0VxdWFsKGUuc3BsaXRQb3NpdGlvbikmJiFpLmFiUmVsYXRpb24ud2FzSW5MZWZ0RWxlbWVudCl7dC5uZXdSYW5nZS5zdGFydD1VaC5fY3JlYXRlQXQoZS5tb3ZlVGFyZ2V0UG9zaXRpb24pfWlmKHQubmV3UmFuZ2UuZW5kLmlzRXF1YWwoZS5zcGxpdFBvc2l0aW9uKSYmaS5hYlJlbGF0aW9uLndhc0luUmlnaHRFbGVtZW50KXt0Lm5ld1JhbmdlLmVuZD1VaC5fY3JlYXRlQXQoZS5tb3ZlVGFyZ2V0UG9zaXRpb24pfWVsc2UgaWYodC5uZXdSYW5nZS5lbmQuaXNFcXVhbChlLnNwbGl0UG9zaXRpb24pJiZpLmFiUmVsYXRpb24ud2FzRW5kQmVmb3JlTWVyZ2VkRWxlbWVudCl7dC5uZXdSYW5nZS5lbmQ9VWguX2NyZWF0ZUF0KGUuaW5zZXJ0aW9uUG9zaXRpb24pfWVsc2V7dC5uZXdSYW5nZS5lbmQ9bi5lbmR9cmV0dXJuW3RdfXQubmV3UmFuZ2U9dC5uZXdSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKGUpfXJldHVyblt0XX0pO1hPKG9tLHRtLCh0LGUpPT57aWYodC5zb3VyY2VQb3NpdGlvbi5oYXNTYW1lUGFyZW50QXMoZS5wb3NpdGlvbikpe3QuaG93TWFueSs9ZS5ob3dNYW55fXQuc291cmNlUG9zaXRpb249dC5zb3VyY2VQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydE9wZXJhdGlvbihlKTt0LnRhcmdldFBvc2l0aW9uPXQudGFyZ2V0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRPcGVyYXRpb24oZSk7cmV0dXJuW3RdfSk7WE8ob20sb20sKHQsZSxpKT0+e2lmKHQuc291cmNlUG9zaXRpb24uaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKSYmdC50YXJnZXRQb3NpdGlvbi5pc0VxdWFsKGUudGFyZ2V0UG9zaXRpb24pKXtpZighaS5iV2FzVW5kb25lKXtyZXR1cm5bbmV3IFNtKDApXX1lbHNle2NvbnN0IGk9ZS5ncmF2ZXlhcmRQb3NpdGlvbi5wYXRoLnNsaWNlKCk7aS5wdXNoKDApO3Quc291cmNlUG9zaXRpb249bmV3IFVoKGUuZ3JhdmV5YXJkUG9zaXRpb24ucm9vdCxpKTt0Lmhvd01hbnk9MDtyZXR1cm5bdF19fWlmKHQuc291cmNlUG9zaXRpb24uaXNFcXVhbChlLnNvdXJjZVBvc2l0aW9uKSYmIXQudGFyZ2V0UG9zaXRpb24uaXNFcXVhbChlLnRhcmdldFBvc2l0aW9uKSYmIWkuYldhc1VuZG9uZSYmaS5hYlJlbGF0aW9uIT1cInNwbGl0QXRTb3VyY2VcIil7Y29uc3Qgbj10LnRhcmdldFBvc2l0aW9uLnJvb3Qucm9vdE5hbWU9PVwiJGdyYXZleWFyZFwiO2NvbnN0IG89ZS50YXJnZXRQb3NpdGlvbi5yb290LnJvb3ROYW1lPT1cIiRncmF2ZXlhcmRcIjtjb25zdCByPW4mJiFvO2NvbnN0IHM9byYmIW47Y29uc3QgYT1zfHwhciYmaS5hSXNTdHJvbmc7aWYoYSl7Y29uc3QgaT1lLnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7Y29uc3Qgbj10LnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7cmV0dXJuW25ldyBaZyhpLHQuaG93TWFueSxuLDApXX1lbHNle3JldHVybltuZXcgU20oMCldfX1pZih0LnNvdXJjZVBvc2l0aW9uLmhhc1NhbWVQYXJlbnRBcyhlLnRhcmdldFBvc2l0aW9uKSl7dC5ob3dNYW55Kz1lLmhvd01hbnl9dC5zb3VyY2VQb3NpdGlvbj10LnNvdXJjZVBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7dC50YXJnZXRQb3NpdGlvbj10LnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7aWYoIXQuZ3JhdmV5YXJkUG9zaXRpb24uaXNFcXVhbChlLmdyYXZleWFyZFBvc2l0aW9uKXx8IWkuYUlzU3Ryb25nKXt0LmdyYXZleWFyZFBvc2l0aW9uPXQuZ3JhdmV5YXJkUG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlNZXJnZU9wZXJhdGlvbihlKX1yZXR1cm5bdF19KTtYTyhvbSxaZywodCxlLGkpPT57Y29uc3Qgbj0kaC5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZS5zb3VyY2VQb3NpdGlvbixlLmhvd01hbnkpO2lmKGUudHlwZT09XCJyZW1vdmVcIiYmIWkuYldhc1VuZG9uZSYmIWkuZm9yY2VXZWFrUmVtb3ZlKXtpZih0LmRlbGV0aW9uUG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUuc291cmNlUG9zaXRpb24pJiZuLmNvbnRhaW5zUG9zaXRpb24odC5zb3VyY2VQb3NpdGlvbikpe3JldHVybltuZXcgU20oMCldfX1pZih0LnNvdXJjZVBvc2l0aW9uLmhhc1NhbWVQYXJlbnRBcyhlLnRhcmdldFBvc2l0aW9uKSl7dC5ob3dNYW55Kz1lLmhvd01hbnl9aWYodC5zb3VyY2VQb3NpdGlvbi5oYXNTYW1lUGFyZW50QXMoZS5zb3VyY2VQb3NpdGlvbikpe3QuaG93TWFueS09ZS5ob3dNYW55fXQuc291cmNlUG9zaXRpb249dC5zb3VyY2VQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmVPcGVyYXRpb24oZSk7dC50YXJnZXRQb3NpdGlvbj10LnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKTtpZighdC5ncmF2ZXlhcmRQb3NpdGlvbi5pc0VxdWFsKGUudGFyZ2V0UG9zaXRpb24pKXt0LmdyYXZleWFyZFBvc2l0aW9uPXQuZ3JhdmV5YXJkUG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlNb3ZlT3BlcmF0aW9uKGUpfXJldHVyblt0XX0pO1hPKG9tLHJtLCh0LGUsaSk9PntpZihlLmdyYXZleWFyZFBvc2l0aW9uKXt0LmdyYXZleWFyZFBvc2l0aW9uPXQuZ3JhdmV5YXJkUG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlEZWxldGlvbihlLmdyYXZleWFyZFBvc2l0aW9uLDEpO2lmKHQuZGVsZXRpb25Qb3NpdGlvbi5pc0VxdWFsKGUuZ3JhdmV5YXJkUG9zaXRpb24pKXt0Lmhvd01hbnk9ZS5ob3dNYW55fX1pZih0LnRhcmdldFBvc2l0aW9uLmlzRXF1YWwoZS5zcGxpdFBvc2l0aW9uKSl7Y29uc3Qgbj1lLmhvd01hbnkhPTA7Y29uc3Qgbz1lLmdyYXZleWFyZFBvc2l0aW9uJiZ0LmRlbGV0aW9uUG9zaXRpb24uaXNFcXVhbChlLmdyYXZleWFyZFBvc2l0aW9uKTtpZihufHxvfHxpLmFiUmVsYXRpb249PVwibWVyZ2VUYXJnZXROb3RNb3ZlZFwiKXt0LnNvdXJjZVBvc2l0aW9uPXQuc291cmNlUG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlTcGxpdE9wZXJhdGlvbihlKTtyZXR1cm5bdF19fWlmKHQuc291cmNlUG9zaXRpb24uaXNFcXVhbChlLnNwbGl0UG9zaXRpb24pKXtpZihpLmFiUmVsYXRpb249PVwibWVyZ2VTb3VyY2VOb3RNb3ZlZFwiKXt0Lmhvd01hbnk9MDt0LnRhcmdldFBvc2l0aW9uPXQudGFyZ2V0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlTcGxpdE9wZXJhdGlvbihlKTtyZXR1cm5bdF19aWYoaS5hYlJlbGF0aW9uPT1cIm1lcmdlU2FtZUVsZW1lbnRcInx8dC5zb3VyY2VQb3NpdGlvbi5vZmZzZXQ+MCl7dC5zb3VyY2VQb3NpdGlvbj1lLm1vdmVUYXJnZXRQb3NpdGlvbi5jbG9uZSgpO3QudGFyZ2V0UG9zaXRpb249dC50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKGUpO3JldHVyblt0XX19aWYodC5zb3VyY2VQb3NpdGlvbi5oYXNTYW1lUGFyZW50QXMoZS5zcGxpdFBvc2l0aW9uKSl7dC5ob3dNYW55PWUuc3BsaXRQb3NpdGlvbi5vZmZzZXR9dC5zb3VyY2VQb3NpdGlvbj10LnNvdXJjZVBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24oZSk7dC50YXJnZXRQb3NpdGlvbj10LnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24oZSk7cmV0dXJuW3RdfSk7WE8oWmcsdG0sKHQsZSk9Pntjb25zdCBpPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0LnNvdXJjZVBvc2l0aW9uLHQuaG93TWFueSk7Y29uc3Qgbj1pLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0T3BlcmF0aW9uKGUsZmFsc2UpWzBdO3Quc291cmNlUG9zaXRpb249bi5zdGFydDt0Lmhvd01hbnk9bi5lbmQub2Zmc2V0LW4uc3RhcnQub2Zmc2V0O2lmKCF0LnRhcmdldFBvc2l0aW9uLmlzRXF1YWwoZS5wb3NpdGlvbikpe3QudGFyZ2V0UG9zaXRpb249dC50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydE9wZXJhdGlvbihlKX1yZXR1cm5bdF19KTtYTyhaZyxaZywodCxlLGkpPT57Y29uc3Qgbj0kaC5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnkpO2NvbnN0IG89JGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KTtsZXQgcj1pLmFJc1N0cm9uZztsZXQgcz0haS5hSXNTdHJvbmc7aWYoaS5hYlJlbGF0aW9uPT1cImluc2VydEJlZm9yZVwifHxpLmJhUmVsYXRpb249PVwiaW5zZXJ0QWZ0ZXJcIil7cz10cnVlfWVsc2UgaWYoaS5hYlJlbGF0aW9uPT1cImluc2VydEFmdGVyXCJ8fGkuYmFSZWxhdGlvbj09XCJpbnNlcnRCZWZvcmVcIil7cz1mYWxzZX1sZXQgYTtpZih0LnRhcmdldFBvc2l0aW9uLmlzRXF1YWwoZS50YXJnZXRQb3NpdGlvbikmJnMpe2E9dC50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KX1lbHNle2E9dC50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoZS5zb3VyY2VQb3NpdGlvbixlLnRhcmdldFBvc2l0aW9uLGUuaG93TWFueSl9aWYoY0kodCxlKSYmY0koZSx0KSl7cmV0dXJuW2UuZ2V0UmV2ZXJzZWQoKV19Y29uc3QgYz1uLmNvbnRhaW5zUG9zaXRpb24oZS50YXJnZXRQb3NpdGlvbik7aWYoYyYmbi5jb250YWluc1JhbmdlKG8sdHJ1ZSkpe24uc3RhcnQ9bi5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoZS5zb3VyY2VQb3NpdGlvbixlLnRhcmdldFBvc2l0aW9uLGUuaG93TWFueSk7bi5lbmQ9bi5lbmQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKGUuc291cmNlUG9zaXRpb24sZS50YXJnZXRQb3NpdGlvbixlLmhvd01hbnkpO3JldHVybiBsSShbbl0sYSl9Y29uc3QgbD1vLmNvbnRhaW5zUG9zaXRpb24odC50YXJnZXRQb3NpdGlvbik7aWYobCYmby5jb250YWluc1JhbmdlKG4sdHJ1ZSkpe24uc3RhcnQ9bi5zdGFydC5fZ2V0Q29tYmluZWQoZS5zb3VyY2VQb3NpdGlvbixlLmdldE1vdmVkUmFuZ2VTdGFydCgpKTtuLmVuZD1uLmVuZC5fZ2V0Q29tYmluZWQoZS5zb3VyY2VQb3NpdGlvbixlLmdldE1vdmVkUmFuZ2VTdGFydCgpKTtyZXR1cm4gbEkoW25dLGEpfWNvbnN0IGQ9VnModC5zb3VyY2VQb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCksZS5zb3VyY2VQb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCkpO2lmKGQ9PVwicHJlZml4XCJ8fGQ9PVwiZXh0ZW5zaW9uXCIpe24uc3RhcnQ9bi5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoZS5zb3VyY2VQb3NpdGlvbixlLnRhcmdldFBvc2l0aW9uLGUuaG93TWFueSk7bi5lbmQ9bi5lbmQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKGUuc291cmNlUG9zaXRpb24sZS50YXJnZXRQb3NpdGlvbixlLmhvd01hbnkpO3JldHVybiBsSShbbl0sYSl9aWYodC50eXBlPT1cInJlbW92ZVwiJiZlLnR5cGUhPVwicmVtb3ZlXCImJiFpLmFXYXNVbmRvbmUmJiFpLmZvcmNlV2Vha1JlbW92ZSl7cj10cnVlfWVsc2UgaWYodC50eXBlIT1cInJlbW92ZVwiJiZlLnR5cGU9PVwicmVtb3ZlXCImJiFpLmJXYXNVbmRvbmUmJiFpLmZvcmNlV2Vha1JlbW92ZSl7cj1mYWxzZX1jb25zdCB1PVtdO2NvbnN0IGg9bi5nZXREaWZmZXJlbmNlKG8pO2Zvcihjb25zdCB0IG9mIGgpe3Quc3RhcnQ9dC5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KTt0LmVuZD10LmVuZC5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KTtjb25zdCBpPVZzKHQuc3RhcnQuZ2V0UGFyZW50UGF0aCgpLGUuZ2V0TW92ZWRSYW5nZVN0YXJ0KCkuZ2V0UGFyZW50UGF0aCgpKT09XCJzYW1lXCI7Y29uc3Qgbj10Ll9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKGUuZ2V0TW92ZWRSYW5nZVN0YXJ0KCksZS5ob3dNYW55LGkpO3UucHVzaCguLi5uKX1jb25zdCBmPW4uZ2V0SW50ZXJzZWN0aW9uKG8pO2lmKGYhPT1udWxsJiZyKXtmLnN0YXJ0PWYuc3RhcnQuX2dldENvbWJpbmVkKGUuc291cmNlUG9zaXRpb24sZS5nZXRNb3ZlZFJhbmdlU3RhcnQoKSk7Zi5lbmQ9Zi5lbmQuX2dldENvbWJpbmVkKGUuc291cmNlUG9zaXRpb24sZS5nZXRNb3ZlZFJhbmdlU3RhcnQoKSk7aWYodS5sZW5ndGg9PT0wKXt1LnB1c2goZil9ZWxzZSBpZih1Lmxlbmd0aD09MSl7aWYoby5zdGFydC5pc0JlZm9yZShuLnN0YXJ0KXx8by5zdGFydC5pc0VxdWFsKG4uc3RhcnQpKXt1LnVuc2hpZnQoZil9ZWxzZXt1LnB1c2goZil9fWVsc2V7dS5zcGxpY2UoMSwwLGYpfX1pZih1Lmxlbmd0aD09PTApe3JldHVybltuZXcgU20odC5iYXNlVmVyc2lvbildfXJldHVybiBsSSh1LGEpfSk7WE8oWmcscm0sKHQsZSxpKT0+e2xldCBuPXQudGFyZ2V0UG9zaXRpb24uY2xvbmUoKTtpZighdC50YXJnZXRQb3NpdGlvbi5pc0VxdWFsKGUuaW5zZXJ0aW9uUG9zaXRpb24pfHwhZS5ncmF2ZXlhcmRQb3NpdGlvbnx8aS5hYlJlbGF0aW9uPT1cIm1vdmVUYXJnZXRBZnRlclwiKXtuPXQudGFyZ2V0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlTcGxpdE9wZXJhdGlvbihlKX1jb25zdCBvPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0LnNvdXJjZVBvc2l0aW9uLHQuaG93TWFueSk7aWYoby5lbmQuaXNFcXVhbChlLmluc2VydGlvblBvc2l0aW9uKSl7aWYoIWUuZ3JhdmV5YXJkUG9zaXRpb24pe3QuaG93TWFueSsrfXQudGFyZ2V0UG9zaXRpb249bjtyZXR1cm5bdF19aWYoby5zdGFydC5oYXNTYW1lUGFyZW50QXMoZS5zcGxpdFBvc2l0aW9uKSYmby5jb250YWluc1Bvc2l0aW9uKGUuc3BsaXRQb3NpdGlvbikpe2xldCB0PW5ldyAkaChlLnNwbGl0UG9zaXRpb24sby5lbmQpO3Q9dC5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKGUpO2NvbnN0IGk9W25ldyAkaChvLnN0YXJ0LGUuc3BsaXRQb3NpdGlvbiksdF07cmV0dXJuIGxJKGksbil9aWYodC50YXJnZXRQb3NpdGlvbi5pc0VxdWFsKGUuc3BsaXRQb3NpdGlvbikmJmkuYWJSZWxhdGlvbj09XCJpbnNlcnRBdFNvdXJjZVwiKXtuPWUubW92ZVRhcmdldFBvc2l0aW9ufWlmKHQudGFyZ2V0UG9zaXRpb24uaXNFcXVhbChlLmluc2VydGlvblBvc2l0aW9uKSYmaS5hYlJlbGF0aW9uPT1cImluc2VydEJldHdlZW5cIil7bj10LnRhcmdldFBvc2l0aW9ufWNvbnN0IHI9by5fZ2V0VHJhbnNmb3JtZWRCeVNwbGl0T3BlcmF0aW9uKGUpO2NvbnN0IHM9W3JdO2lmKGUuZ3JhdmV5YXJkUG9zaXRpb24pe2NvbnN0IG49by5zdGFydC5pc0VxdWFsKGUuZ3JhdmV5YXJkUG9zaXRpb24pfHxvLmNvbnRhaW5zUG9zaXRpb24oZS5ncmF2ZXlhcmRQb3NpdGlvbik7aWYodC5ob3dNYW55PjEmJm4mJiFpLmFXYXNVbmRvbmUpe3MucHVzaCgkaC5fY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZS5pbnNlcnRpb25Qb3NpdGlvbiwxKSl9fXJldHVybiBsSShzLG4pfSk7WE8oWmcsb20sKHQsZSxpKT0+e2NvbnN0IG49JGguX2NyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KHQuc291cmNlUG9zaXRpb24sdC5ob3dNYW55KTtpZihlLmRlbGV0aW9uUG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKHQuc291cmNlUG9zaXRpb24pJiZuLmNvbnRhaW5zUG9zaXRpb24oZS5zb3VyY2VQb3NpdGlvbikpe2lmKHQudHlwZT09XCJyZW1vdmVcIiYmIWkuZm9yY2VXZWFrUmVtb3ZlKXtpZighaS5hV2FzVW5kb25lKXtjb25zdCBpPVtdO2xldCBuPWUuZ3JhdmV5YXJkUG9zaXRpb24uY2xvbmUoKTtsZXQgbz1lLnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7aWYodC5ob3dNYW55PjEpe2kucHVzaChuZXcgWmcodC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnktMSx0LnRhcmdldFBvc2l0aW9uLDApKTtuPW4uX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQuc291cmNlUG9zaXRpb24sdC50YXJnZXRQb3NpdGlvbix0Lmhvd01hbnktMSk7bz1vLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZSh0LnNvdXJjZVBvc2l0aW9uLHQudGFyZ2V0UG9zaXRpb24sdC5ob3dNYW55LTEpfWNvbnN0IHI9ZS5kZWxldGlvblBvc2l0aW9uLl9nZXRDb21iaW5lZCh0LnNvdXJjZVBvc2l0aW9uLHQudGFyZ2V0UG9zaXRpb24pO2NvbnN0IHM9bmV3IFpnKG4sMSxyLDApO2NvbnN0IGE9cy5nZXRNb3ZlZFJhbmdlU3RhcnQoKS5wYXRoLnNsaWNlKCk7YS5wdXNoKDApO2NvbnN0IGM9bmV3IFVoKHMudGFyZ2V0UG9zaXRpb24ucm9vdCxhKTtvPW8uX2dldFRyYW5zZm9ybWVkQnlNb3ZlKG4sciwxKTtjb25zdCBsPW5ldyBaZyhvLGUuaG93TWFueSxjLDApO2kucHVzaChzKTtpLnB1c2gobCk7cmV0dXJuIGl9fWVsc2V7aWYodC5ob3dNYW55PT0xKXtpZighaS5iV2FzVW5kb25lKXtyZXR1cm5bbmV3IFNtKDApXX1lbHNle3Quc291cmNlUG9zaXRpb249ZS5ncmF2ZXlhcmRQb3NpdGlvbi5jbG9uZSgpO3QudGFyZ2V0UG9zaXRpb249dC50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1lcmdlT3BlcmF0aW9uKGUpO3JldHVyblt0XX19fX1jb25zdCBvPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0LnNvdXJjZVBvc2l0aW9uLHQuaG93TWFueSk7Y29uc3Qgcj1vLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7dC5zb3VyY2VQb3NpdGlvbj1yLnN0YXJ0O3QuaG93TWFueT1yLmVuZC5vZmZzZXQtci5zdGFydC5vZmZzZXQ7dC50YXJnZXRQb3NpdGlvbj10LnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7cmV0dXJuW3RdfSk7WE8oaW0sdG0sKHQsZSk9Pnt0LnBvc2l0aW9uPXQucG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRPcGVyYXRpb24oZSk7cmV0dXJuW3RdfSk7WE8oaW0sb20sKHQsZSk9PntpZih0LnBvc2l0aW9uLmlzRXF1YWwoZS5kZWxldGlvblBvc2l0aW9uKSl7dC5wb3NpdGlvbj1lLmdyYXZleWFyZFBvc2l0aW9uLmNsb25lKCk7dC5wb3NpdGlvbi5zdGlja2luZXNzPVwidG9OZXh0XCI7cmV0dXJuW3RdfXQucG9zaXRpb249dC5wb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1lcmdlT3BlcmF0aW9uKGUpO3JldHVyblt0XX0pO1hPKGltLFpnLCh0LGUpPT57dC5wb3NpdGlvbj10LnBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKTtyZXR1cm5bdF19KTtYTyhpbSxpbSwodCxlLGkpPT57aWYodC5wb3NpdGlvbi5pc0VxdWFsKGUucG9zaXRpb24pKXtpZihpLmFJc1N0cm9uZyl7dC5vbGROYW1lPWUubmV3TmFtZX1lbHNle3JldHVybltuZXcgU20oMCldfX1yZXR1cm5bdF19KTtYTyhpbSxybSwodCxlKT0+e2NvbnN0IGk9dC5wb3NpdGlvbi5wYXRoO2NvbnN0IG49ZS5zcGxpdFBvc2l0aW9uLmdldFBhcmVudFBhdGgoKTtpZihWcyhpLG4pPT1cInNhbWVcIiYmIWUuZ3JhdmV5YXJkUG9zaXRpb24pe2NvbnN0IGU9bmV3IGltKHQucG9zaXRpb24uZ2V0U2hpZnRlZEJ5KDEpLHQub2xkTmFtZSx0Lm5ld05hbWUsMCk7cmV0dXJuW3QsZV19dC5wb3NpdGlvbj10LnBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24oZSk7cmV0dXJuW3RdfSk7WE8obm0sbm0sKHQsZSxpKT0+e2lmKHQucm9vdD09PWUucm9vdCYmdC5rZXk9PT1lLmtleSl7aWYoIWkuYUlzU3Ryb25nfHx0Lm5ld1ZhbHVlPT09ZS5uZXdWYWx1ZSl7cmV0dXJuW25ldyBTbSgwKV19ZWxzZXt0Lm9sZFZhbHVlPWUubmV3VmFsdWV9fXJldHVyblt0XX0pO1hPKHJtLHRtLCh0LGUpPT57aWYodC5zcGxpdFBvc2l0aW9uLmhhc1NhbWVQYXJlbnRBcyhlLnBvc2l0aW9uKSYmdC5zcGxpdFBvc2l0aW9uLm9mZnNldDxlLnBvc2l0aW9uLm9mZnNldCl7dC5ob3dNYW55Kz1lLmhvd01hbnl9dC5zcGxpdFBvc2l0aW9uPXQuc3BsaXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydE9wZXJhdGlvbihlKTt0Lmluc2VydGlvblBvc2l0aW9uPXJtLmdldEluc2VydGlvblBvc2l0aW9uKHQuc3BsaXRQb3NpdGlvbik7cmV0dXJuW3RdfSk7WE8ocm0sb20sKHQsZSxpKT0+e2lmKCF0LmdyYXZleWFyZFBvc2l0aW9uJiYhaS5iV2FzVW5kb25lJiZ0LnNwbGl0UG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUuc291cmNlUG9zaXRpb24pKXtjb25zdCBpPWUuZ3JhdmV5YXJkUG9zaXRpb24ucGF0aC5zbGljZSgpO2kucHVzaCgwKTtjb25zdCBuPW5ldyBVaChlLmdyYXZleWFyZFBvc2l0aW9uLnJvb3QsaSk7Y29uc3Qgbz1ybS5nZXRJbnNlcnRpb25Qb3NpdGlvbihuZXcgVWgoZS5ncmF2ZXlhcmRQb3NpdGlvbi5yb290LGkpKTtjb25zdCByPW5ldyBybShuLDAsbnVsbCwwKTtyLmluc2VydGlvblBvc2l0aW9uPW87dC5zcGxpdFBvc2l0aW9uPXQuc3BsaXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1lcmdlT3BlcmF0aW9uKGUpO3QuaW5zZXJ0aW9uUG9zaXRpb249cm0uZ2V0SW5zZXJ0aW9uUG9zaXRpb24odC5zcGxpdFBvc2l0aW9uKTt0LmdyYXZleWFyZFBvc2l0aW9uPXIuaW5zZXJ0aW9uUG9zaXRpb24uY2xvbmUoKTt0LmdyYXZleWFyZFBvc2l0aW9uLnN0aWNraW5lc3M9XCJ0b05leHRcIjtyZXR1cm5bcix0XX1pZih0LnNwbGl0UG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUuZGVsZXRpb25Qb3NpdGlvbikmJiF0LnNwbGl0UG9zaXRpb24uaXNBZnRlcihlLmRlbGV0aW9uUG9zaXRpb24pKXt0Lmhvd01hbnktLX1pZih0LnNwbGl0UG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUudGFyZ2V0UG9zaXRpb24pKXt0Lmhvd01hbnkrPWUuaG93TWFueX10LnNwbGl0UG9zaXRpb249dC5zcGxpdFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TWVyZ2VPcGVyYXRpb24oZSk7dC5pbnNlcnRpb25Qb3NpdGlvbj1ybS5nZXRJbnNlcnRpb25Qb3NpdGlvbih0LnNwbGl0UG9zaXRpb24pO2lmKHQuZ3JhdmV5YXJkUG9zaXRpb24pe3QuZ3JhdmV5YXJkUG9zaXRpb249dC5ncmF2ZXlhcmRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1lcmdlT3BlcmF0aW9uKGUpfXJldHVyblt0XX0pO1hPKHJtLFpnLCh0LGUsaSk9Pntjb25zdCBuPSRoLl9jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLnNvdXJjZVBvc2l0aW9uLGUuaG93TWFueSk7aWYodC5ncmF2ZXlhcmRQb3NpdGlvbil7Y29uc3Qgbz1uLnN0YXJ0LmlzRXF1YWwodC5ncmF2ZXlhcmRQb3NpdGlvbil8fG4uY29udGFpbnNQb3NpdGlvbih0LmdyYXZleWFyZFBvc2l0aW9uKTtpZighaS5iV2FzVW5kb25lJiZvKXtjb25zdCBpPXQuc3BsaXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmVPcGVyYXRpb24oZSk7Y29uc3Qgbj10LmdyYXZleWFyZFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKTtjb25zdCBvPW4ucGF0aC5zbGljZSgpO28ucHVzaCgwKTtjb25zdCByPW5ldyBVaChuLnJvb3Qsbyk7Y29uc3Qgcz1uZXcgWmcoaSx0Lmhvd01hbnksciwwKTtyZXR1cm5bc119dC5ncmF2ZXlhcmRQb3NpdGlvbj10LmdyYXZleWFyZFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKX1pZih0LnNwbGl0UG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUuc291cmNlUG9zaXRpb24pJiZuLmNvbnRhaW5zUG9zaXRpb24odC5zcGxpdFBvc2l0aW9uKSl7Y29uc3QgaT1lLmhvd01hbnktKHQuc3BsaXRQb3NpdGlvbi5vZmZzZXQtZS5zb3VyY2VQb3NpdGlvbi5vZmZzZXQpO3QuaG93TWFueS09aTtpZih0LnNwbGl0UG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUudGFyZ2V0UG9zaXRpb24pJiZ0LnNwbGl0UG9zaXRpb24ub2Zmc2V0PGUudGFyZ2V0UG9zaXRpb24ub2Zmc2V0KXt0Lmhvd01hbnkrPWUuaG93TWFueX10LnNwbGl0UG9zaXRpb249ZS5zb3VyY2VQb3NpdGlvbi5jbG9uZSgpO3QuaW5zZXJ0aW9uUG9zaXRpb249cm0uZ2V0SW5zZXJ0aW9uUG9zaXRpb24odC5zcGxpdFBvc2l0aW9uKTtyZXR1cm5bdF19Y29uc3Qgbz10LnNwbGl0UG9zaXRpb24uaXNFcXVhbChlLnRhcmdldFBvc2l0aW9uKTtpZihvJiYoaS5iYVJlbGF0aW9uPT1cImluc2VydEF0U291cmNlXCJ8fGkuYWJSZWxhdGlvbj09XCJzcGxpdEJlZm9yZVwiKSl7dC5ob3dNYW55Kz1lLmhvd01hbnk7dC5zcGxpdFBvc2l0aW9uPXQuc3BsaXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KTt0Lmluc2VydGlvblBvc2l0aW9uPXJtLmdldEluc2VydGlvblBvc2l0aW9uKHQuc3BsaXRQb3NpdGlvbik7cmV0dXJuW3RdfWlmKCFlLnNvdXJjZVBvc2l0aW9uLmlzRXF1YWwoZS50YXJnZXRQb3NpdGlvbikpe2lmKHQuc3BsaXRQb3NpdGlvbi5oYXNTYW1lUGFyZW50QXMoZS5zb3VyY2VQb3NpdGlvbikmJnQuc3BsaXRQb3NpdGlvbi5vZmZzZXQ8PWUuc291cmNlUG9zaXRpb24ub2Zmc2V0KXt0Lmhvd01hbnktPWUuaG93TWFueX1pZih0LnNwbGl0UG9zaXRpb24uaGFzU2FtZVBhcmVudEFzKGUudGFyZ2V0UG9zaXRpb24pJiZ0LnNwbGl0UG9zaXRpb24ub2Zmc2V0PGUudGFyZ2V0UG9zaXRpb24ub2Zmc2V0KXt0Lmhvd01hbnkrPWUuaG93TWFueX19dC5zcGxpdFBvc2l0aW9uLnN0aWNraW5lc3M9XCJ0b05vbmVcIjt0LnNwbGl0UG9zaXRpb249dC5zcGxpdFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZU9wZXJhdGlvbihlKTt0LnNwbGl0UG9zaXRpb24uc3RpY2tpbmVzcz1cInRvTmV4dFwiO2lmKHQuZ3JhdmV5YXJkUG9zaXRpb24pe3QuaW5zZXJ0aW9uUG9zaXRpb249dC5pbnNlcnRpb25Qb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmVPcGVyYXRpb24oZSl9ZWxzZXt0Lmluc2VydGlvblBvc2l0aW9uPXJtLmdldEluc2VydGlvblBvc2l0aW9uKHQuc3BsaXRQb3NpdGlvbil9cmV0dXJuW3RdfSk7WE8ocm0scm0sKHQsZSxpKT0+e2lmKHQuc3BsaXRQb3NpdGlvbi5pc0VxdWFsKGUuc3BsaXRQb3NpdGlvbikpe2lmKCF0LmdyYXZleWFyZFBvc2l0aW9uJiYhZS5ncmF2ZXlhcmRQb3NpdGlvbil7cmV0dXJuW25ldyBTbSgwKV19aWYodC5ncmF2ZXlhcmRQb3NpdGlvbiYmZS5ncmF2ZXlhcmRQb3NpdGlvbiYmdC5ncmF2ZXlhcmRQb3NpdGlvbi5pc0VxdWFsKGUuZ3JhdmV5YXJkUG9zaXRpb24pKXtyZXR1cm5bbmV3IFNtKDApXX1pZihpLmFiUmVsYXRpb249PVwic3BsaXRCZWZvcmVcIil7dC5ob3dNYW55PTA7dC5ncmF2ZXlhcmRQb3NpdGlvbj10LmdyYXZleWFyZFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24oZSk7cmV0dXJuW3RdfX1pZih0LmdyYXZleWFyZFBvc2l0aW9uJiZlLmdyYXZleWFyZFBvc2l0aW9uJiZ0LmdyYXZleWFyZFBvc2l0aW9uLmlzRXF1YWwoZS5ncmF2ZXlhcmRQb3NpdGlvbikpe2NvbnN0IG49dC5zcGxpdFBvc2l0aW9uLnJvb3Qucm9vdE5hbWU9PVwiJGdyYXZleWFyZFwiO2NvbnN0IG89ZS5zcGxpdFBvc2l0aW9uLnJvb3Qucm9vdE5hbWU9PVwiJGdyYXZleWFyZFwiO2NvbnN0IHI9biYmIW87Y29uc3Qgcz1vJiYhbjtjb25zdCBhPXN8fCFyJiZpLmFJc1N0cm9uZztpZihhKXtjb25zdCBpPVtdO2lmKGUuaG93TWFueSl7aS5wdXNoKG5ldyBaZyhlLm1vdmVUYXJnZXRQb3NpdGlvbixlLmhvd01hbnksZS5zcGxpdFBvc2l0aW9uLDApKX1pZih0Lmhvd01hbnkpe2kucHVzaChuZXcgWmcodC5zcGxpdFBvc2l0aW9uLHQuaG93TWFueSx0Lm1vdmVUYXJnZXRQb3NpdGlvbiwwKSl9cmV0dXJuIGl9ZWxzZXtyZXR1cm5bbmV3IFNtKDApXX19aWYodC5ncmF2ZXlhcmRQb3NpdGlvbil7dC5ncmF2ZXlhcmRQb3NpdGlvbj10LmdyYXZleWFyZFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5U3BsaXRPcGVyYXRpb24oZSl9aWYodC5zcGxpdFBvc2l0aW9uLmlzRXF1YWwoZS5pbnNlcnRpb25Qb3NpdGlvbikmJmkuYWJSZWxhdGlvbj09XCJzcGxpdEJlZm9yZVwiKXt0Lmhvd01hbnkrKztyZXR1cm5bdF19aWYoZS5zcGxpdFBvc2l0aW9uLmlzRXF1YWwodC5pbnNlcnRpb25Qb3NpdGlvbikmJmkuYmFSZWxhdGlvbj09XCJzcGxpdEJlZm9yZVwiKXtjb25zdCBpPWUuaW5zZXJ0aW9uUG9zaXRpb24ucGF0aC5zbGljZSgpO2kucHVzaCgwKTtjb25zdCBuPW5ldyBVaChlLmluc2VydGlvblBvc2l0aW9uLnJvb3QsaSk7Y29uc3Qgbz1uZXcgWmcodC5pbnNlcnRpb25Qb3NpdGlvbiwxLG4sMCk7cmV0dXJuW3Qsb119aWYodC5zcGxpdFBvc2l0aW9uLmhhc1NhbWVQYXJlbnRBcyhlLnNwbGl0UG9zaXRpb24pJiZ0LnNwbGl0UG9zaXRpb24ub2Zmc2V0PGUuc3BsaXRQb3NpdGlvbi5vZmZzZXQpe3QuaG93TWFueS09ZS5ob3dNYW55fXQuc3BsaXRQb3NpdGlvbj10LnNwbGl0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlTcGxpdE9wZXJhdGlvbihlKTt0Lmluc2VydGlvblBvc2l0aW9uPXJtLmdldEluc2VydGlvblBvc2l0aW9uKHQuc3BsaXRQb3NpdGlvbik7cmV0dXJuW3RdfSk7ZnVuY3Rpb24gY0kodCxlKXtyZXR1cm4gdC50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KT09PW51bGx9ZnVuY3Rpb24gbEkodCxlKXtjb25zdCBpPVtdO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCBvPXRbbl07Y29uc3Qgcj1uZXcgWmcoby5zdGFydCxvLmVuZC5vZmZzZXQtby5zdGFydC5vZmZzZXQsZSwwKTtpLnB1c2gocik7Zm9yKGxldCBlPW4rMTtlPHQubGVuZ3RoO2UrKyl7dFtlXT10W2VdLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShyLnNvdXJjZVBvc2l0aW9uLHIudGFyZ2V0UG9zaXRpb24sci5ob3dNYW55KVswXX1lPWUuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHIuc291cmNlUG9zaXRpb24sci50YXJnZXRQb3NpdGlvbixyLmhvd01hbnkpfXJldHVybiBpfWNsYXNzIGRJIGV4dGVuZHMgand7Y29uc3RydWN0b3IodCl7c3VwZXIodCk7dGhpcy5fc3RhY2s9W107dGhpcy5fY3JlYXRlZEJhdGNoZXM9bmV3IFdlYWtTZXQ7dGhpcy5yZWZyZXNoKCl9cmVmcmVzaCgpe3RoaXMuaXNFbmFibGVkPXRoaXMuX3N0YWNrLmxlbmd0aD4wfWFkZEJhdGNoKHQpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2NvbnN0IGk9e3JhbmdlczplLmhhc093blJhbmdlP0FycmF5LmZyb20oZS5nZXRSYW5nZXMoKSk6W10saXNCYWNrd2FyZDplLmlzQmFja3dhcmR9O3RoaXMuX3N0YWNrLnB1c2goe2JhdGNoOnQsc2VsZWN0aW9uOml9KTt0aGlzLnJlZnJlc2goKX1jbGVhclN0YWNrKCl7dGhpcy5fc3RhY2s9W107dGhpcy5yZWZyZXNoKCl9X3Jlc3RvcmVTZWxlY3Rpb24odCxlLGkpe2NvbnN0IG49dGhpcy5lZGl0b3IubW9kZWw7Y29uc3Qgbz1uLmRvY3VtZW50O2NvbnN0IHI9W107Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD11SShlLGkpO2NvbnN0IG49dC5maW5kKHQ9PnQuc3RhcnQucm9vdCE9by5ncmF2ZXlhcmQpO2lmKG4pe3IucHVzaChuKX19aWYoci5sZW5ndGgpe24uY2hhbmdlKHQ9Pnt0LnNldFNlbGVjdGlvbihyLHtiYWNrd2FyZDplfSl9KX19X3VuZG8odCxlKXtjb25zdCBpPXRoaXMuZWRpdG9yLm1vZGVsO2NvbnN0IG49aS5kb2N1bWVudDt0aGlzLl9jcmVhdGVkQmF0Y2hlcy5hZGQoZSk7Y29uc3Qgbz10Lm9wZXJhdGlvbnMuc2xpY2UoKS5maWx0ZXIodD0+dC5pc0RvY3VtZW50T3BlcmF0aW9uKTtvLnJldmVyc2UoKTtmb3IoY29uc3QgdCBvZiBvKXtjb25zdCBvPXQuYmFzZVZlcnNpb24rMTtjb25zdCByPUFycmF5LmZyb20obi5oaXN0b3J5LmdldE9wZXJhdGlvbnMobykpO2NvbnN0IHM9aUkoW3QuZ2V0UmV2ZXJzZWQoKV0scix7dXNlUmVsYXRpb25zOnRydWUsZG9jdW1lbnQ6dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQscGFkV2l0aE5vT3BzOmZhbHNlLGZvcmNlV2Vha1JlbW92ZTp0cnVlfSk7Y29uc3QgYT1zLm9wZXJhdGlvbnNBO2Zvcihjb25zdCBvIG9mIGEpe2UuYWRkT3BlcmF0aW9uKG8pO2kuYXBwbHlPcGVyYXRpb24obyk7bi5oaXN0b3J5LnNldE9wZXJhdGlvbkFzVW5kb25lKHQsbyl9fX19ZnVuY3Rpb24gdUkodCxlKXtjb25zdCBpPXQuZ2V0VHJhbnNmb3JtZWRCeU9wZXJhdGlvbnMoZSk7aS5zb3J0KCh0LGUpPT50LnN0YXJ0LmlzQmVmb3JlKGUuc3RhcnQpPy0xOjEpO2ZvcihsZXQgdD0xO3Q8aS5sZW5ndGg7dCsrKXtjb25zdCBlPWlbdC0xXTtjb25zdCBuPWlbdF07aWYoZS5lbmQuaXNUb3VjaGluZyhuLnN0YXJ0KSl7ZS5lbmQ9bi5lbmQ7aS5zcGxpY2UodCwxKTt0LS19fXJldHVybiBpfWNsYXNzIGhJIGV4dGVuZHMgZEl7ZXhlY3V0ZSh0PW51bGwpe2NvbnN0IGU9dD90aGlzLl9zdGFjay5maW5kSW5kZXgoZT0+ZS5iYXRjaD09dCk6dGhpcy5fc3RhY2subGVuZ3RoLTE7Y29uc3QgaT10aGlzLl9zdGFjay5zcGxpY2UoZSwxKVswXTtjb25zdCBuPXRoaXMuZWRpdG9yLm1vZGVsLmNyZWF0ZUJhdGNoKFwidHJhbnNwYXJlbnRcIik7dGhpcy5lZGl0b3IubW9kZWwuZW5xdWV1ZUNoYW5nZShuLCgpPT57dGhpcy5fdW5kbyhpLmJhdGNoLG4pO2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuaGlzdG9yeS5nZXRPcGVyYXRpb25zKGkuYmF0Y2guYmFzZVZlcnNpb24pO3RoaXMuX3Jlc3RvcmVTZWxlY3Rpb24oaS5zZWxlY3Rpb24ucmFuZ2VzLGkuc2VsZWN0aW9uLmlzQmFja3dhcmQsdCk7dGhpcy5maXJlKFwicmV2ZXJ0XCIsaS5iYXRjaCxuKX0pO3RoaXMucmVmcmVzaCgpfX1jbGFzcyBmSSBleHRlbmRzIGRJe2V4ZWN1dGUoKXtjb25zdCB0PXRoaXMuX3N0YWNrLnBvcCgpO2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwuY3JlYXRlQmF0Y2goXCJ0cmFuc3BhcmVudFwiKTt0aGlzLmVkaXRvci5tb2RlbC5lbnF1ZXVlQ2hhbmdlKGUsKCk9Pntjb25zdCBpPXQuYmF0Y2gub3BlcmF0aW9uc1t0LmJhdGNoLm9wZXJhdGlvbnMubGVuZ3RoLTFdO2NvbnN0IG49aS5iYXNlVmVyc2lvbisxO2NvbnN0IG89dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuaGlzdG9yeS5nZXRPcGVyYXRpb25zKG4pO3RoaXMuX3Jlc3RvcmVTZWxlY3Rpb24odC5zZWxlY3Rpb24ucmFuZ2VzLHQuc2VsZWN0aW9uLmlzQmFja3dhcmQsbyk7dGhpcy5fdW5kbyh0LmJhdGNoLGUpfSk7dGhpcy5yZWZyZXNoKCl9fWNsYXNzIGdJIGV4dGVuZHMgbXB7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJVbmRvRWRpdGluZ1wifWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuX2JhdGNoUmVnaXN0cnk9bmV3IFdlYWtTZXR9aW5pdCgpe2NvbnN0IHQ9dGhpcy5lZGl0b3I7dGhpcy5fdW5kb0NvbW1hbmQ9bmV3IGhJKHQpO3RoaXMuX3JlZG9Db21tYW5kPW5ldyBmSSh0KTt0LmNvbW1hbmRzLmFkZChcInVuZG9cIix0aGlzLl91bmRvQ29tbWFuZCk7dC5jb21tYW5kcy5hZGQoXCJyZWRvXCIsdGhpcy5fcmVkb0NvbW1hbmQpO3RoaXMubGlzdGVuVG8odC5tb2RlbCxcImFwcGx5T3BlcmF0aW9uXCIsKHQsZSk9Pntjb25zdCBpPWVbMF07aWYoIWkuaXNEb2N1bWVudE9wZXJhdGlvbil7cmV0dXJufWNvbnN0IG49aS5iYXRjaDtjb25zdCBvPXRoaXMuX3JlZG9Db21tYW5kLl9jcmVhdGVkQmF0Y2hlcy5oYXMobik7Y29uc3Qgcj10aGlzLl91bmRvQ29tbWFuZC5fY3JlYXRlZEJhdGNoZXMuaGFzKG4pO2NvbnN0IHM9dGhpcy5fYmF0Y2hSZWdpc3RyeS5oYXMobik7aWYoc3x8bi50eXBlPT1cInRyYW5zcGFyZW50XCImJiFvJiYhcil7cmV0dXJufWVsc2V7aWYobyl7dGhpcy5fdW5kb0NvbW1hbmQuYWRkQmF0Y2gobil9ZWxzZSBpZighcil7dGhpcy5fdW5kb0NvbW1hbmQuYWRkQmF0Y2gobik7dGhpcy5fcmVkb0NvbW1hbmQuY2xlYXJTdGFjaygpfX10aGlzLl9iYXRjaFJlZ2lzdHJ5LmFkZChuKX0se3ByaW9yaXR5OlwiaGlnaGVzdFwifSk7dGhpcy5saXN0ZW5Ubyh0aGlzLl91bmRvQ29tbWFuZCxcInJldmVydFwiLCh0LGUsaSk9Pnt0aGlzLl9yZWRvQ29tbWFuZC5hZGRCYXRjaChpKX0pO3Qua2V5c3Ryb2tlcy5zZXQoXCJDVFJMK1pcIixcInVuZG9cIik7dC5rZXlzdHJva2VzLnNldChcIkNUUkwrWVwiLFwicmVkb1wiKTt0LmtleXN0cm9rZXMuc2V0KFwiQ1RSTCtTSElGVCtaXCIsXCJyZWRvXCIpfX12YXIgbUk9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTUuMDQyIDkuMzY3bDIuMTg5IDEuODM3YS43NS43NSAwIDAgMS0uOTY1IDEuMTQ5bC0zLjc4OC0zLjE4YS43NDcuNzQ3IDAgMCAxLS4yMS0uMjg0Ljc1Ljc1IDAgMCAxIC4xNy0uOTQ1TDYuMjMgNC43NjJhLjc1Ljc1IDAgMSAxIC45NjQgMS4xNUw0Ljg2MyA3Ljg2Nmg4LjkxN0EuNzUuNzUgMCAwIDEgMTQgNy45YTQgNCAwIDEgMS0xLjQ3NyA3LjcxOGwuMzQ0LTEuNDg5YTIuNSAyLjUgMCAxIDAgMS4wOTQtNC43M2wuMDA4LS4wMzJINS4wNDJ6XCIvPjwvc3ZnPic7dmFyIHBJPSc8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xNC45NTggOS4zNjdsLTIuMTg5IDEuODM3YS43NS43NSAwIDAgMCAuOTY1IDEuMTQ5bDMuNzg4LTMuMThhLjc0Ny43NDcgMCAwIDAgLjIxLS4yODQuNzUuNzUgMCAwIDAtLjE3LS45NDVMMTMuNzcgNC43NjJhLjc1Ljc1IDAgMSAwLS45NjQgMS4xNWwyLjMzMSAxLjk1NUg2LjIyQS43NS43NSAwIDAgMCA2IDcuOWE0IDQgMCAxIDAgMS40NzcgNy43MThsLS4zNDQtMS40ODlBMi41IDIuNSAwIDEgMSA2LjAzOSA5LjRsLS4wMDgtLjAzMmg4LjkyN3pcIi8+PC9zdmc+JztjbGFzcyBiSSBleHRlbmRzIG1we2luaXQoKXtjb25zdCB0PXRoaXMuZWRpdG9yO2NvbnN0IGU9dC5sb2NhbGU7Y29uc3QgaT10LnQ7Y29uc3Qgbj1lLnVpTGFuZ3VhZ2VEaXJlY3Rpb249PVwibHRyXCI/bUk6cEk7Y29uc3Qgbz1lLnVpTGFuZ3VhZ2VEaXJlY3Rpb249PVwibHRyXCI/cEk6bUk7dGhpcy5fYWRkQnV0dG9uKFwidW5kb1wiLGkoXCJtb1wiKSxcIkNUUkwrWlwiLG4pO3RoaXMuX2FkZEJ1dHRvbihcInJlZG9cIixpKFwibXBcIiksXCJDVFJMK1lcIixvKX1fYWRkQnV0dG9uKHQsZSxpLG4pe2NvbnN0IG89dGhpcy5lZGl0b3I7by51aS5jb21wb25lbnRGYWN0b3J5LmFkZCh0LHI9Pntjb25zdCBzPW8uY29tbWFuZHMuZ2V0KHQpO2NvbnN0IGE9bmV3IGhiKHIpO2Euc2V0KHtsYWJlbDplLGljb246bixrZXlzdHJva2U6aSx0b29sdGlwOnRydWV9KTthLmJpbmQoXCJpc0VuYWJsZWRcIikudG8ocyxcImlzRW5hYmxlZFwiKTt0aGlzLmxpc3RlblRvKGEsXCJleGVjdXRlXCIsKCk9PntvLmV4ZWN1dGUodCk7by5lZGl0aW5nLnZpZXcuZm9jdXMoKX0pO3JldHVybiBhfSl9fWNsYXNzIHdJIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltnSSxiSV19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJVbmRvXCJ9fWNsYXNzIGtJIGV4dGVuZHMgbXB7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltSeCxxTyxZTyxjUCx3SV19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuXCJFc3NlbnRpYWxzXCJ9fWNsYXNzIF9JIGV4dGVuZHMgRnd7fV9JLmJ1aWx0aW5QbHVnaW5zPVtyayx1ayx2ayxTayxyXyxwXyxBXyxSXyxXXyxidixjeSxmeSxSeSxLeSx6eCxXeCx2QyxQQyx0VCx6VCxXVCx3UCxDUCx2UCxrUCx5UCxfUCx4UCxSUCxCUCxIUCxERSxsTyxkTyxJTyxMTyxrSSxWX119XSlbXCJkZWZhdWx0XCJdfSkpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9ICB7XHJcbiAgICBhOiBcIkltYWdlIHRvb2xiYXJcIixcclxuICAgIGI6IFwi0KHQv9C10YbRgdC40LzQstC+0LvRi1wiLFxyXG4gICAgYzogXCJsZWZ0d2FyZHMgZG91YmxlIGFycm93XCIsXHJcbiAgICBkOiBcInJpZ2h0d2FyZHMgZG91YmxlIGFycm93XCIsXHJcbiAgICBlOiBcInVwd2FyZHMgZG91YmxlIGFycm93XCIsXHJcbiAgICBmOiBcImRvd253YXJkcyBkb3VibGUgYXJyb3dcIixcclxuICAgIGc6IFwibGVmdHdhcmRzIGRhc2hlZCBhcnJvd1wiLFxyXG4gICAgaDogXCJyaWdodHdhcmRzIGRhc2hlZCBhcnJvd1wiLFxyXG4gICAgaTogXCJ1cHdhcmRzIGRhc2hlZCBhcnJvd1wiLFxyXG4gICAgajogXCJkb3dud2FyZHMgZGFzaGVkIGFycm93XCIsXHJcbiAgICBrOiBcImxlZnR3YXJkcyBhcnJvdyB0byBiYXJcIixcclxuICAgIGw6IFwicmlnaHR3YXJkcyBhcnJvdyB0byBiYXJcIixcclxuICAgIG06IFwidXB3YXJkcyBhcnJvdyB0byBiYXJcIixcclxuICAgIG46IFwiZG93bndhcmRzIGFycm93IHRvIGJhclwiLFxyXG4gICAgbzogXCJ1cCBkb3duIGFycm93IHdpdGggYmFzZVwiLFxyXG4gICAgcDogXCJiYWNrIHdpdGggbGVmdHdhcmRzIGFycm93IGFib3ZlXCIsXHJcbiAgICBxOiBcImVuZCB3aXRoIGxlZnR3YXJkcyBhcnJvdyBhYm92ZVwiLFxyXG4gICAgcjogXCJvbiB3aXRoIGV4Y2xhbWF0aW9uIG1hcmsgd2l0aCBsZWZ0IHJpZ2h0IGFycm93IGFib3ZlXCIsXHJcbiAgICBzOiBcInNvb24gd2l0aCByaWdodHdhcmRzIGFycm93IGFib3ZlXCIsXHJcbiAgICB0OiBcInRvcCB3aXRoIHVwd2FyZHMgYXJyb3cgYWJvdmVcIixcclxuICAgIHU6IFwiRG9sbGFyIHNpZ25cIixcclxuICAgIHY6IFwiRXVybyBzaWduXCIsXHJcbiAgICB3OiBcIlllbiBzaWduXCIsXHJcbiAgICB4OiBcIlBvdW5kIHNpZ25cIixcclxuICAgIHk6IFwiQ2VudCBzaWduXCIsXHJcbiAgICB6OiBcIkV1cm8tY3VycmVuY3kgc2lnblwiLFxyXG4gICAgYWE6IFwiQ29sb24gc2lnblwiLFxyXG4gICAgYWI6IFwiQ3J1emVpcm8gc2lnblwiLFxyXG4gICAgYWM6IFwiRnJlbmNoIGZyYW5jIHNpZ25cIixcclxuICAgIGFkOiBcIkxpcmEgc2lnblwiLFxyXG4gICAgYWU6IFwiQ3VycmVuY3kgc2lnblwiLFxyXG4gICAgYWY6IFwiQml0Y29pbiBzaWduXCIsXHJcbiAgICBhZzogXCJNaWxsIHNpZ25cIixcclxuICAgIGFoOiBcIk5haXJhIHNpZ25cIixcclxuICAgIGFpOiBcIlBlc2V0YSBzaWduXCIsXHJcbiAgICBhajogXCJSdXBlZSBzaWduXCIsXHJcbiAgICBhazogXCJXb24gc2lnblwiLFxyXG4gICAgYWw6IFwiTmV3IHNoZXFlbCBzaWduXCIsXHJcbiAgICBhbTogXCJEb25nIHNpZ25cIixcclxuICAgIGFuOiBcIktpcCBzaWduXCIsXHJcbiAgICBhbzogXCJUdWdyaWsgc2lnblwiLFxyXG4gICAgYXA6IFwiRHJhY2htYSBzaWduXCIsXHJcbiAgICBhcTogXCJHZXJtYW4gcGVubnkgc2lnblwiLFxyXG4gICAgYXI6IFwiUGVzbyBzaWduXCIsXHJcbiAgICBhczogXCJHdWFyYW5pIHNpZ25cIixcclxuICAgIGF0OiBcIkF1c3RyYWwgc2lnblwiLFxyXG4gICAgYXU6IFwiSHJ5dm5pYSBzaWduXCIsXHJcbiAgICBhdjogXCJDZWRpIHNpZ25cIixcclxuICAgIGF3OiBcIkxpdnJlIHRvdXJub2lzIHNpZ25cIixcclxuICAgIGF4OiBcIlNwZXNtaWxvIHNpZ25cIixcclxuICAgIGF5OiBcIlRlbmdlIHNpZ25cIixcclxuICAgIGF6OiBcIkluZGlhbiBydXBlZSBzaWduXCIsXHJcbiAgICBiYTogXCJUdXJraXNoIGxpcmEgc2lnblwiLFxyXG4gICAgYmI6IFwiTm9yZGljIG1hcmsgc2lnblwiLFxyXG4gICAgYmM6IFwiTWFuYXQgc2lnblwiLFxyXG4gICAgYmQ6IFwiUnVibGUgc2lnblwiLFxyXG4gICAgYmU6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgYSB3aXRoIG1hY3JvblwiLFxyXG4gICAgYmY6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGEgd2l0aCBtYWNyb25cIixcclxuICAgIGJnOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGEgd2l0aCBicmV2ZVwiLFxyXG4gICAgYmg6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGEgd2l0aCBicmV2ZVwiLFxyXG4gICAgYmk6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgYSB3aXRoIG9nb25la1wiLFxyXG4gICAgYmo6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGEgd2l0aCBvZ29uZWtcIixcclxuICAgIGJrOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGMgd2l0aCBhY3V0ZVwiLFxyXG4gICAgYmw6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGMgd2l0aCBhY3V0ZVwiLFxyXG4gICAgYm06IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgYyB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGJuOiBcIkxhdGluIHNtYWxsIGxldHRlciBjIHdpdGggY2lyY3VtZmxleFwiLFxyXG4gICAgYm86IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgYyB3aXRoIGRvdCBhYm92ZVwiLFxyXG4gICAgYnA6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGMgd2l0aCBkb3QgYWJvdmVcIixcclxuICAgIGJxOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGMgd2l0aCBjYXJvblwiLFxyXG4gICAgYnI6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGMgd2l0aCBjYXJvblwiLFxyXG4gICAgYnM6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgZCB3aXRoIGNhcm9uXCIsXHJcbiAgICBidDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgZCB3aXRoIGNhcm9uXCIsXHJcbiAgICBidTogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBkIHdpdGggc3Ryb2tlXCIsXHJcbiAgICBidjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgZCB3aXRoIHN0cm9rZVwiLFxyXG4gICAgYnc6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgZSB3aXRoIG1hY3JvblwiLFxyXG4gICAgYng6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGUgd2l0aCBtYWNyb25cIixcclxuICAgIGJ5OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGUgd2l0aCBicmV2ZVwiLFxyXG4gICAgYno6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGUgd2l0aCBicmV2ZVwiLFxyXG4gICAgY2E6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgZSB3aXRoIGRvdCBhYm92ZVwiLFxyXG4gICAgY2I6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGUgd2l0aCBkb3QgYWJvdmVcIixcclxuICAgIGNjOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGUgd2l0aCBvZ29uZWtcIixcclxuICAgIGNkOiBcIkxhdGluIHNtYWxsIGxldHRlciBlIHdpdGggb2dvbmVrXCIsXHJcbiAgICBjZTogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBlIHdpdGggY2Fyb25cIixcclxuICAgIGNmOiBcIkxhdGluIHNtYWxsIGxldHRlciBlIHdpdGggY2Fyb25cIixcclxuICAgIGNnOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGcgd2l0aCBjaXJjdW1mbGV4XCIsXHJcbiAgICBjaDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgZyB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGNpOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGcgd2l0aCBicmV2ZVwiLFxyXG4gICAgY2o6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGcgd2l0aCBicmV2ZVwiLFxyXG4gICAgY2s6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgZyB3aXRoIGRvdCBhYm92ZVwiLFxyXG4gICAgY2w6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGcgd2l0aCBkb3QgYWJvdmVcIixcclxuICAgIGNtOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGcgd2l0aCBjZWRpbGxhXCIsXHJcbiAgICBjbjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgZyB3aXRoIGNlZGlsbGFcIixcclxuICAgIGNvOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGggd2l0aCBjaXJjdW1mbGV4XCIsXHJcbiAgICBjcDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgaCB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGNxOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGggd2l0aCBzdHJva2VcIixcclxuICAgIGNyOiBcIkxhdGluIHNtYWxsIGxldHRlciBoIHdpdGggc3Ryb2tlXCIsXHJcbiAgICBjczogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBpIHdpdGggdGlsZGVcIixcclxuICAgIGN0OiBcIkxhdGluIHNtYWxsIGxldHRlciBpIHdpdGggdGlsZGVcIixcclxuICAgIGN1OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGkgd2l0aCBtYWNyb25cIixcclxuICAgIGN2OiBcIkxhdGluIHNtYWxsIGxldHRlciBpIHdpdGggbWFjcm9uXCIsXHJcbiAgICBjdzogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBpIHdpdGggYnJldmVcIixcclxuICAgIGN4OiBcIkxhdGluIHNtYWxsIGxldHRlciBpIHdpdGggYnJldmVcIixcclxuICAgIGN5OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGkgd2l0aCBvZ29uZWtcIixcclxuICAgIGN6OiBcIkxhdGluIHNtYWxsIGxldHRlciBpIHdpdGggb2dvbmVrXCIsXHJcbiAgICBkYTogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBpIHdpdGggZG90IGFib3ZlXCIsXHJcbiAgICBkYjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgZG90bGVzcyBpXCIsXHJcbiAgICBkYzogXCJMYXRpbiBjYXBpdGFsIGxpZ2F0dXJlIGlqXCIsXHJcbiAgICBkZDogXCJMYXRpbiBzbWFsbCBsaWdhdHVyZSBpalwiLFxyXG4gICAgZGU6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgaiB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGRmOiBcIkxhdGluIHNtYWxsIGxldHRlciBqIHdpdGggY2lyY3VtZmxleFwiLFxyXG4gICAgZGc6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgayB3aXRoIGNlZGlsbGFcIixcclxuICAgIGRoOiBcIkxhdGluIHNtYWxsIGxldHRlciBrIHdpdGggY2VkaWxsYVwiLFxyXG4gICAgZGk6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGtyYVwiLFxyXG4gICAgZGo6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgbCB3aXRoIGFjdXRlXCIsXHJcbiAgICBkazogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgbCB3aXRoIGFjdXRlXCIsXHJcbiAgICBkbDogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBsIHdpdGggY2VkaWxsYVwiLFxyXG4gICAgZG06IFwiTGF0aW4gc21hbGwgbGV0dGVyIGwgd2l0aCBjZWRpbGxhXCIsXHJcbiAgICBkbjogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBsIHdpdGggY2Fyb25cIixcclxuICAgIGRvOiBcIkxhdGluIHNtYWxsIGxldHRlciBsIHdpdGggY2Fyb25cIixcclxuICAgIGRwOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGwgd2l0aCBtaWRkbGUgZG90XCIsXHJcbiAgICBkcTogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgbCB3aXRoIG1pZGRsZSBkb3RcIixcclxuICAgIGRyOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIGwgd2l0aCBzdHJva2VcIixcclxuICAgIGRzOiBcIkxhdGluIHNtYWxsIGxldHRlciBsIHdpdGggc3Ryb2tlXCIsXHJcbiAgICBkdDogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBuIHdpdGggYWN1dGVcIixcclxuICAgIGR1OiBcIkxhdGluIHNtYWxsIGxldHRlciBuIHdpdGggYWN1dGVcIixcclxuICAgIGR2OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIG4gd2l0aCBjZWRpbGxhXCIsXHJcbiAgICBkdzogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgbiB3aXRoIGNlZGlsbGFcIixcclxuICAgIGR4OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIG4gd2l0aCBjYXJvblwiLFxyXG4gICAgZHk6IFwiTGF0aW4gc21hbGwgbGV0dGVyIG4gd2l0aCBjYXJvblwiLFxyXG4gICAgZHo6IFwiTGF0aW4gc21hbGwgbGV0dGVyIG4gcHJlY2VkZWQgYnkgYXBvc3Ryb3BoZVwiLFxyXG4gICAgZWE6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgZW5nXCIsXHJcbiAgICBlYjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgZW5nXCIsXHJcbiAgICBlYzogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBvIHdpdGggbWFjcm9uXCIsXHJcbiAgICBlZDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIG1hY3JvblwiLFxyXG4gICAgZWU6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgbyB3aXRoIGJyZXZlXCIsXHJcbiAgICBlZjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIGJyZXZlXCIsXHJcbiAgICBlZzogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBvIHdpdGggZG91YmxlIGFjdXRlXCIsXHJcbiAgICBlaDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgbyB3aXRoIGRvdWJsZSBhY3V0ZVwiLFxyXG4gICAgZWk6IFwiTGF0aW4gY2FwaXRhbCBsaWdhdHVyZSBvZVwiLFxyXG4gICAgZWo6IFwiTGF0aW4gc21hbGwgbGlnYXR1cmUgb2VcIixcclxuICAgIGVrOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHIgd2l0aCBhY3V0ZVwiLFxyXG4gICAgZWw6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHIgd2l0aCBhY3V0ZVwiLFxyXG4gICAgZW06IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgciB3aXRoIGNlZGlsbGFcIixcclxuICAgIGVuOiBcIkxhdGluIHNtYWxsIGxldHRlciByIHdpdGggY2VkaWxsYVwiLFxyXG4gICAgZW86IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgciB3aXRoIGNhcm9uXCIsXHJcbiAgICBlcDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgciB3aXRoIGNhcm9uXCIsXHJcbiAgICBlcTogXCJMYXRpbiBjYXBpdGFsIGxldHRlciBzIHdpdGggYWN1dGVcIixcclxuICAgIGVyOiBcIkxhdGluIHNtYWxsIGxldHRlciBzIHdpdGggYWN1dGVcIixcclxuICAgIGVzOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHMgd2l0aCBjaXJjdW1mbGV4XCIsXHJcbiAgICBldDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgcyB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGV1OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHMgd2l0aCBjZWRpbGxhXCIsXHJcbiAgICBldjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgcyB3aXRoIGNlZGlsbGFcIixcclxuICAgIGV3OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHMgd2l0aCBjYXJvblwiLFxyXG4gICAgZXg6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHMgd2l0aCBjYXJvblwiLFxyXG4gICAgZXk6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgdCB3aXRoIGNlZGlsbGFcIixcclxuICAgIGV6OiBcIkxhdGluIHNtYWxsIGxldHRlciB0IHdpdGggY2VkaWxsYVwiLFxyXG4gICAgZmE6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgdCB3aXRoIGNhcm9uXCIsXHJcbiAgICBmYjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdCB3aXRoIGNhcm9uXCIsXHJcbiAgICBmYzogXCJMYXRpbiBjYXBpdGFsIGxldHRlciB0IHdpdGggc3Ryb2tlXCIsXHJcbiAgICBmZDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdCB3aXRoIHN0cm9rZVwiLFxyXG4gICAgZmU6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgdSB3aXRoIHRpbGRlXCIsXHJcbiAgICBmZjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdSB3aXRoIHRpbGRlXCIsXHJcbiAgICBmZzogXCJMYXRpbiBjYXBpdGFsIGxldHRlciB1IHdpdGggbWFjcm9uXCIsXHJcbiAgICBmaDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdSB3aXRoIG1hY3JvblwiLFxyXG4gICAgZmk6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgdSB3aXRoIGJyZXZlXCIsXHJcbiAgICBmajogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdSB3aXRoIGJyZXZlXCIsXHJcbiAgICBmazogXCJMYXRpbiBjYXBpdGFsIGxldHRlciB1IHdpdGggcmluZyBhYm92ZVwiLFxyXG4gICAgZmw6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHUgd2l0aCByaW5nIGFib3ZlXCIsXHJcbiAgICBmbTogXCJMYXRpbiBjYXBpdGFsIGxldHRlciB1IHdpdGggZG91YmxlIGFjdXRlXCIsXHJcbiAgICBmbjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdSB3aXRoIGRvdWJsZSBhY3V0ZVwiLFxyXG4gICAgZm86IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgdSB3aXRoIG9nb25la1wiLFxyXG4gICAgZnA6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHUgd2l0aCBvZ29uZWtcIixcclxuICAgIGZxOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHcgd2l0aCBjaXJjdW1mbGV4XCIsXHJcbiAgICBmcjogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgdyB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGZzOiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHkgd2l0aCBjaXJjdW1mbGV4XCIsXHJcbiAgICBmdDogXCJMYXRpbiBzbWFsbCBsZXR0ZXIgeSB3aXRoIGNpcmN1bWZsZXhcIixcclxuICAgIGZ1OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHkgd2l0aCBkaWFlcmVzaXNcIixcclxuICAgIGZ2OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHogd2l0aCBhY3V0ZVwiLFxyXG4gICAgZnc6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHogd2l0aCBhY3V0ZVwiLFxyXG4gICAgZng6IFwiTGF0aW4gY2FwaXRhbCBsZXR0ZXIgeiB3aXRoIGRvdCBhYm92ZVwiLFxyXG4gICAgZnk6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHogd2l0aCBkb3QgYWJvdmVcIixcclxuICAgIGZ6OiBcIkxhdGluIGNhcGl0YWwgbGV0dGVyIHogd2l0aCBjYXJvblwiLFxyXG4gICAgZ2E6IFwiTGF0aW4gc21hbGwgbGV0dGVyIHogd2l0aCBjYXJvblwiLFxyXG4gICAgZ2I6IFwiTGF0aW4gc21hbGwgbGV0dGVyIGxvbmcgc1wiLFxyXG4gICAgZ2M6IFwiTGVzcy10aGFuIHNpZ25cIixcclxuICAgIGdkOiBcIkdyZWF0ZXItdGhhbiBzaWduXCIsXHJcbiAgICBnZTogXCJMZXNzLXRoYW4gb3IgZXF1YWwgdG9cIixcclxuICAgIGdmOiBcIkdyZWF0ZXItdGhhbiBvciBlcXVhbCB0b1wiLFxyXG4gICAgZ2c6IFwiRW4gZGFzaFwiLFxyXG4gICAgZ2g6IFwiRW0gZGFzaFwiLFxyXG4gICAgZ2k6IFwiTWFjcm9uXCIsXHJcbiAgICBnajogXCJPdmVybGluZVwiLFxyXG4gICAgZ2s6IFwiRGVncmVlIHNpZ25cIixcclxuICAgIGdsOiBcIk1pbnVzIHNpZ25cIixcclxuICAgIGdtOiBcIlBsdXMtbWludXMgc2lnblwiLFxyXG4gICAgZ246IFwiRGl2aXNpb24gc2lnblwiLFxyXG4gICAgZ286IFwiRnJhY3Rpb24gc2xhc2hcIixcclxuICAgIGdwOiBcIk11bHRpcGxpY2F0aW9uIHNpZ25cIixcclxuICAgIGdxOiBcIkxhdGluIHNtYWxsIGxldHRlciBmIHdpdGggaG9va1wiLFxyXG4gICAgZ3I6IFwiSW50ZWdyYWxcIixcclxuICAgIGdzOiBcIk4tYXJ5IHN1bW1hdGlvblwiLFxyXG4gICAgZ3Q6IFwiSW5maW5pdHlcIixcclxuICAgIGd1OiBcIlNxdWFyZSByb290XCIsXHJcbiAgICBndjogXCJUaWxkZSBvcGVyYXRvclwiLFxyXG4gICAgZ3c6IFwiQXBwcm94aW1hdGVseSBlcXVhbCB0b1wiLFxyXG4gICAgZ3g6IFwiQWxtb3N0IGVxdWFsIHRvXCIsXHJcbiAgICBneTogXCJOb3QgZXF1YWwgdG9cIixcclxuICAgIGd6OiBcIklkZW50aWNhbCB0b1wiLFxyXG4gICAgaGE6IFwiRWxlbWVudCBvZlwiLFxyXG4gICAgaGI6IFwiTm90IGFuIGVsZW1lbnQgb2ZcIixcclxuICAgIGhjOiBcIkNvbnRhaW5zIGFzIG1lbWJlclwiLFxyXG4gICAgaGQ6IFwiTi1hcnkgcHJvZHVjdFwiLFxyXG4gICAgaGU6IFwiTG9naWNhbCBhbmRcIixcclxuICAgIGhmOiBcIkxvZ2ljYWwgb3JcIixcclxuICAgIGhnOiBcIk5vdCBzaWduXCIsXHJcbiAgICBoaDogXCJJbnRlcnNlY3Rpb25cIixcclxuICAgIGhpOiBcIlVuaW9uXCIsXHJcbiAgICBoajogXCJQYXJ0aWFsIGRpZmZlcmVudGlhbFwiLFxyXG4gICAgaGs6IFwiRm9yIGFsbFwiLFxyXG4gICAgaGw6IFwiVGhlcmUgZXhpc3RzXCIsXHJcbiAgICBobTogXCJFbXB0eSBzZXRcIixcclxuICAgIGhuOiBcIk5hYmxhXCIsXHJcbiAgICBobzogXCJBc3RlcmlzayBvcGVyYXRvclwiLFxyXG4gICAgaHA6IFwiUHJvcG9ydGlvbmFsIHRvXCIsXHJcbiAgICBocTogXCJBbmdsZVwiLFxyXG4gICAgaHI6IFwiVnVsZ2FyIGZyYWN0aW9uIG9uZSBxdWFydGVyXCIsXHJcbiAgICBoczogXCJWdWxnYXIgZnJhY3Rpb24gb25lIGhhbGZcIixcclxuICAgIGh0OiBcIlZ1bGdhciBmcmFjdGlvbiB0aHJlZSBxdWFydGVyc1wiLFxyXG4gICAgaHU6IFwiU2luZ2xlIGxlZnQtcG9pbnRpbmcgYW5nbGUgcXVvdGF0aW9uIG1hcmtcIixcclxuICAgIGh2OiBcIlNpbmdsZSByaWdodC1wb2ludGluZyBhbmdsZSBxdW90YXRpb24gbWFya1wiLFxyXG4gICAgaHc6IFwiTGVmdC1wb2ludGluZyBkb3VibGUgYW5nbGUgcXVvdGF0aW9uIG1hcmtcIixcclxuICAgIGh4OiBcIlJpZ2h0LXBvaW50aW5nIGRvdWJsZSBhbmdsZSBxdW90YXRpb24gbWFya1wiLFxyXG4gICAgaHk6IFwiTGVmdCBzaW5nbGUgcXVvdGF0aW9uIG1hcmtcIixcclxuICAgIGh6OiBcIlJpZ2h0IHNpbmdsZSBxdW90YXRpb24gbWFya1wiLFxyXG4gICAgaWE6IFwiTGVmdCBkb3VibGUgcXVvdGF0aW9uIG1hcmtcIixcclxuICAgIGliOiBcIlJpZ2h0IGRvdWJsZSBxdW90YXRpb24gbWFya1wiLFxyXG4gICAgaWM6IFwiU2luZ2xlIGxvdy05IHF1b3RhdGlvbiBtYXJrXCIsXHJcbiAgICBpZDogXCJEb3VibGUgbG93LTkgcXVvdGF0aW9uIG1hcmtcIixcclxuICAgIGllOiBcIkludmVydGVkIGV4Y2xhbWF0aW9uIG1hcmtcIixcclxuICAgIGlmOiBcIkludmVydGVkIHF1ZXN0aW9uIG1hcmtcIixcclxuICAgIGlnOiBcIlR3byBkb3QgbGVhZGVyXCIsXHJcbiAgICBpaDogXCJIb3Jpem9udGFsIGVsbGlwc2lzXCIsXHJcbiAgICBpaTogXCJEb3VibGUgZGFnZ2VyXCIsXHJcbiAgICBpajogXCJQZXIgbWlsbGUgc2lnblwiLFxyXG4gICAgaWs6IFwiUGVyIHRlbiB0aG91c2FuZCBzaWduXCIsXHJcbiAgICBpbDogXCJEb3VibGUgZXhjbGFtYXRpb24gbWFya1wiLFxyXG4gICAgaW06IFwiUXVlc3Rpb24gZXhjbGFtYXRpb24gbWFya1wiLFxyXG4gICAgaW46IFwiRXhjbGFtYXRpb24gcXVlc3Rpb24gbWFya1wiLFxyXG4gICAgaW86IFwiRG91YmxlIHF1ZXN0aW9uIG1hcmtcIixcclxuICAgIGlwOiBcIkNvcHlyaWdodCBzaWduXCIsXHJcbiAgICBpcTogXCJSZWdpc3RlcmVkIHNpZ25cIixcclxuICAgIGlyOiBcIlRyYWRlIG1hcmsgc2lnblwiLFxyXG4gICAgaXM6IFwiU2VjdGlvbiBzaWduXCIsXHJcbiAgICBpdDogXCJQYXJhZ3JhcGggc2lnblwiLFxyXG4gICAgaXU6IFwiUmV2ZXJzZWQgcGFyYWdyYXBoIHNpZ25cIixcclxuICAgIGl2OiBcIlRhYmxlIHRvb2xiYXJcIixcclxuICAgIGl3OiBcItCS0YvRgNCw0LLQvdC40LLQsNC90LjQtSDQv9C+INC70LXQstC+0LzRgyDQutGA0LDRjlwiLFxyXG4gICAgaXg6IFwi0JLRi9GA0LDQstC90LjQstCw0L3QuNC1INC/0L4g0L/RgNCw0LLQvtC80YMg0LrRgNCw0Y5cIixcclxuICAgIGl5OiBcItCS0YvRgNCw0LLQvdC40LLQsNC90LjQtSDQv9C+INGG0LXQvdGC0YDRg1wiLFxyXG4gICAgaXo6IFwi0JLRi9GA0LDQstC90LjQstCw0L3QuNC1INC/0L4g0YjQuNGA0LjQvdC1XCIsXHJcbiAgICBqYTogXCLQktGL0YDQsNCy0L3QuNCy0LDQvdC40LUg0YLQtdC60YHRgtCwXCIsXHJcbiAgICBqYjogXCLQktGL0YDQsNCy0L3QuNCy0LDQvdC40LVcIixcclxuICAgIGpjOiBcItCm0LjRgtCw0YLQsFwiLFxyXG4gICAgamQ6IFwi0JLRi9Cx0YDQsNGC0Ywg0LfQsNCz0L7Qu9C+0LLQvtC6XCIsXHJcbiAgICBqZTogXCLQl9Cw0LPQvtC70L7QstC+0LpcIixcclxuICAgIGpmOiBcItCT0L7RgNC40LfQvtC90YLQsNC70YzQvdCw0Y8g0LvQuNC90LjRj1wiLFxyXG4gICAgamc6IFwi0KPQstC10LvQuNGH0LjRgtGMINC+0YLRgdGC0YPQv1wiLFxyXG4gICAgamg6IFwi0KPQvNC10L3RjNGI0LjRgtGMINC+0YLRgdGC0YPQv1wiLFxyXG4gICAgamk6IFwi0JbQuNGA0L3Ri9C5XCIsXHJcbiAgICBqajogXCLQmtGD0YDRgdC40LJcIixcclxuICAgIGprOiBcItCX0LDRh9C10YDQutC90YPRgtGL0LlcIixcclxuICAgIGpsOiBcItCf0L7QtNGB0YLRgNC+0YfQvdGL0LlcIixcclxuICAgIGptOiBcItCd0LDQtNGB0YLRgNC+0YfQvdGL0LlcIixcclxuICAgIGpuOiBcItCf0L7QtNGH0LXRgNC60L3Rg9GC0YvQuVwiLFxyXG4gICAgam86IFwi0KHQtdC80LXQudGB0YLQstC+INGI0YDQuNGE0YLQvtCyXCIsXHJcbiAgICBqcDogXCLQn9C+INGD0LzQvtC70YfQsNC90LjRjlwiLFxyXG4gICAganE6IFwi0KDQsNC30LzQtdGAINGI0YDQuNGE0YLQsFwiLFxyXG4gICAganI6IFwi0J7Rh9C10L3RjCDQvNC10LvQutC40LlcIixcclxuICAgIGpzOiBcItCc0LXQu9C60LjQuVwiLFxyXG4gICAganQ6IFwi0JrRgNGD0L/QvdGL0LlcIixcclxuICAgIGp1OiBcItCe0YfQtdC90Ywg0LrRgNGD0L/QvdGL0LlcIixcclxuICAgIGp2OiBcItCm0LLQtdGCINGI0YDQuNGE0YLQsFwiLFxyXG4gICAganc6IFwi0KbQstC10YIg0YTQvtC90LBcIixcclxuICAgIGp4OiBcItCS0LjQtNC20LXRgiDQuNC30L7QsdGA0LDQttC10L3QuNC5XCIsXHJcbiAgICBqeTogXCLQntGA0LjQs9C40L3QsNC70YzQvdGL0Lkg0YDQsNC30LzQtdGAINC40LfQvtCx0YDQsNC20LXQvdC40Y9cIixcclxuICAgIGp6OiBcItCR0L7QutC+0LLQvtC1INC40LfQvtCx0YDQsNC20LXQvdC40LVcIixcclxuICAgIGthOiBcItCS0YvRgNCw0LLQvdC40LLQsNC90LjQtSDQv9C+INC70LXQstC+0LzRgyDQutGA0LDRjlwiLFxyXG4gICAga2I6IFwi0JLRi9GA0LDQstC90LjQstCw0L3QuNC1INC/0L4g0YbQtdC90YLRgNGDXCIsXHJcbiAgICBrYzogXCLQktGL0YDQsNCy0L3QuNCy0LDQvdC40LUg0L/QviDQv9GA0LDQstC+0LzRgyDQutGA0LDRjlwiLFxyXG4gICAga2Q6IFwi0JLRgdGC0LDQstC40YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNC1XCIsXHJcbiAgICBrZTogXCLQl9Cw0LPRgNGD0LfQutCwINC90LUg0LLRi9C/0L7Qu9C90LXQvdCwXCIsXHJcbiAgICBrZjogXCJXaWRnZXQgdG9vbGJhclwiLFxyXG4gICAga2c6IFwi0KHQstC+0LnRgdGC0LLQsCDRgtCw0LHQu9C40YbRi1wiLFxyXG4gICAga2g6IFwi0KHQstC+0LnRgdGC0LLQsCDRj9GH0LXQudC60LhcIixcclxuICAgIGtpOiBcItCS0YHRgtCw0LLQuNGC0Ywg0YLQsNCx0LvQuNGG0YNcIixcclxuICAgIGtqOiBcItCh0YLQvtC70LHQtdGGINC30LDQs9C+0LvQvtCy0LrQvtCyXCIsXHJcbiAgICBrazogXCLQktGB0YLQsNCy0LjRgtGMINGB0YLQvtC70LHQtdGGINGB0LvQtdCy0LBcIixcclxuICAgIGtsOiBcItCS0YHRgtCw0LLQuNGC0Ywg0YHRgtC+0LvQsdC10YYg0YHQv9GA0LDQstCwXCIsXHJcbiAgICBrbTogXCLQo9C00LDQu9C40YLRjCDRgdGC0L7Qu9Cx0LXRhlwiLFxyXG4gICAga246IFwi0KHRgtC+0LvQsdC10YZcIixcclxuICAgIGtvOiBcItCh0YLRgNC+0LrQsCDQt9Cw0LPQvtC70L7QstC60L7QslwiLFxyXG4gICAga3A6IFwi0JLRgdGC0LDQstC40YLRjCDRgdGC0YDQvtC60YMg0L3QuNC20LVcIixcclxuICAgIGtxOiBcItCS0YHRgtCw0LLQuNGC0Ywg0YHRgtGA0L7QutGDINCy0YvRiNC1XCIsXHJcbiAgICBrcjogXCLQo9C00LDQu9C40YLRjCDRgdGC0YDQvtC60YNcIixcclxuICAgIGtzOiBcItCh0YLRgNC+0LrQsFwiLFxyXG4gICAga3Q6IFwi0J7QsdGK0LXQtNC40L3QuNGC0Ywg0YEg0Y/Rh9C10LnQutC+0Lkg0YHQstC10YDRhdGDXCIsXHJcbiAgICBrdTogXCLQntCx0YrQtdC00LjQvdC40YLRjCDRgSDRj9GH0LXQudC60L7QuSDRgdC/0YDQsNCy0LBcIixcclxuICAgIGt2OiBcItCe0LHRitC10LTQuNC90LjRgtGMINGBINGP0YfQtdC50LrQvtC5INGB0L3QuNC30YNcIixcclxuICAgIGt3OiBcItCe0LHRitC10LTQuNC90LjRgtGMINGBINGP0YfQtdC50LrQvtC5INGB0LvQtdCy0LBcIixcclxuICAgIGt4OiBcItCg0LDQt9C00LXQu9C40YLRjCDRj9GH0LXQudC60YMg0LLQtdGA0YLQuNC60LDQu9GM0L3QvlwiLFxyXG4gICAga3k6IFwi0KDQsNC30LTQtdC70LjRgtGMINGP0YfQtdC50LrRgyDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3QvlwiLFxyXG4gICAga3o6IFwi0J7QsdGK0LXQtNC40L3QuNGC0Ywg0Y/Rh9C10LnQutC4XCIsXHJcbiAgICBsYTogXCLQo9Cx0YDQsNGC0Ywg0YTQvtGA0LzQsNGC0LjRgNC+0LLQsNC90LjQtVwiLFxyXG4gICAgbGI6IFwi0JjQtNGR0YIg0LfQsNCz0YDRg9C30LrQsFwiLFxyXG4gICAgbGM6IFwi0J3Rg9C80LXRgNC+0LLQsNC90L3Ri9C5INGB0L/QuNGB0L7QulwiLFxyXG4gICAgbGQ6IFwi0JzQsNGA0LrQuNGA0L7QstCw0L3QvdGL0Lkg0YHQv9C40YHQvtC6XCIsXHJcbiAgICBsZTogXCJDaGFyYWN0ZXIgY2F0ZWdvcmllc1wiLFxyXG4gICAgbGY6IFwi0KHRgdGL0LvQutCwXCIsXHJcbiAgICBsZzogXCJEcm9wZG93biB0b29sYmFyXCIsXHJcbiAgICBsaDogXCLQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQsNC70YzRgtC10YDQvdCw0YLQuNCy0L3Ri9C5INGC0LXQutGB0YJcIixcclxuICAgIGxpOiBcItCj0LHRgNCw0YLRjCDRhtCy0LXRglwiLFxyXG4gICAgbGo6IFwi0KbQstC10YIg0YHRgtGA0LDQvdC40YbRi1wiLFxyXG4gICAgbGs6IFwi0KPQsdGA0LDRgtGMINGB0YHRi9C70LrRg1wiLFxyXG4gICAgbGw6IFwi0KDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0YHRgdGL0LvQutGDXCIsXHJcbiAgICBsbTogXCLQntGC0LrRgNGL0YLRjCDRgdGB0YvQu9C60YMg0LIg0L3QvtCy0L7QuSDQstC60LvQsNC00LrQtVwiLFxyXG4gICAgbG46IFwi0JTQu9GPINGN0YLQvtC5INGB0YHRi9C70LrQuCDQvdC1INGD0YHRgtCw0L3QvtCy0LvQtdC9INCw0LTRgNC10YEgVVJMXCIsXHJcbiAgICBsbzogXCLQodC+0YXRgNCw0L3QuNGC0YxcIixcclxuICAgIGxwOiBcItCe0YLQvNC10L3QsFwiLFxyXG4gICAgbHE6IFwi0KHRgdGL0LvQutCwIFVSTFwiLFxyXG4gICAgbHI6IFwiRWRpdG9yIHRvb2xiYXJcIixcclxuICAgIGxzOiBcItCU0YDRg9Cz0LjQtSDQuNC90YHRgtGA0YPQvNC10L3RgtGLXCIsXHJcbiAgICBsdDogXCLQkNC70YzRgtC10YDQvdCw0YLQuNCy0L3Ri9C5INGC0LXQutGB0YJcIixcclxuICAgIGx1OiBcIiUwIG9mICUxXCIsXHJcbiAgICBsdjogXCJQcmV2aW91c1wiLFxyXG4gICAgbHc6IFwiTmV4dFwiLFxyXG4gICAgbHg6IFwi0KfRkdGA0L3Ri9C5XCIsXHJcbiAgICBseTogXCLQotGR0LzQvdC+LdGB0LXRgNGL0LlcIixcclxuICAgIGx6OiBcItCh0LXRgNGL0LlcIixcclxuICAgIG1hOiBcItCh0LLQtdGC0LvQvi3RgdC10YDRi9C5XCIsXHJcbiAgICBtYjogXCLQkdC10LvRi9C5XCIsXHJcbiAgICBtYzogXCLQmtGA0LDRgdC90YvQuVwiLFxyXG4gICAgbWQ6IFwi0J7RgNCw0L3QttC10LLRi9C5XCIsXHJcbiAgICBtZTogXCLQltGR0LvRgtGL0LlcIixcclxuICAgIG1mOiBcItCh0LDQu9Cw0YLQvtCy0YvQuVwiLFxyXG4gICAgbWc6IFwi0JfQtdC70ZHQvdGL0LlcIixcclxuICAgIG1oOiBcItCQ0LrQstCw0LzQsNGA0LjQvdC+0LLRi9C5XCIsXHJcbiAgICBtaTogXCLQkdC40YDRjtC30L7QstGL0LlcIixcclxuICAgIG1qOiBcItCT0L7Qu9GD0LHQvtC5XCIsXHJcbiAgICBtazogXCLQodC40L3QuNC5XCIsXHJcbiAgICBtbDogXCLQpNC40L7Qu9C10YLQvtCy0YvQuVwiLFxyXG4gICAgbW06IFwiT3BlbiBpbiBhIG5ldyB0YWJcIixcclxuICAgIG1uOiBcIkRvd25sb2FkYWJsZVwiLFxyXG4gICAgbW86IFwi0J7RgtC80LXQvdC40YLRjFwiLFxyXG4gICAgbXA6IFwi0J/QvtCy0YLQvtGA0LjRgtGMXCIsXHJcbiAgICBtcTogXCLQndC10YJcIixcclxuICAgIG1yOiBcItCh0L/Qu9C+0YjQvdCw0Y9cIixcclxuICAgIG1zOiBcItCi0L7Rh9C60LhcIixcclxuICAgIG10OiBcItCf0YPQvdC60YLQuNGAXCIsXHJcbiAgICBtdTogXCLQlNCy0L7QudC90LDRj1wiLFxyXG4gICAgbXY6IFwiR3Jvb3ZlXCIsXHJcbiAgICBtdzogXCJSaWRnZVwiLFxyXG4gICAgbXg6IFwiSW5zZXRcIixcclxuICAgIG15OiBcIk91dHNldFwiLFxyXG4gICAgbXo6ICdUaGUgY29sb3IgaXMgaW52YWxpZC4gVHJ5IFwiI0ZGMDAwMFwiIG9yIFwicmdiKDI1NSwwLDApXCIgb3IgXCJyZWRcIi4nLFxyXG4gICAgbmE6ICdUaGUgdmFsdWUgaXMgaW52YWxpZC4gVHJ5IFwiMTBweFwiIG9yIFwiMmVtXCIgb3Igc2ltcGx5IFwiMlwiLicsXHJcbiAgICBuYjogXCLQk9GA0LDQvdC40YbQsFwiLFxyXG4gICAgbmM6IFwi0KHRgtC40LvRjFwiLFxyXG4gICAgbmQ6IFwi0KjQuNGA0LjQvdCwXCIsXHJcbiAgICBuZTogXCLQptCy0LXRglwiLFxyXG4gICAgbmY6IFwi0KbQstC10YIg0YTQvtC90LBcIixcclxuICAgIG5nOiBcItCT0LDQsdCw0YDQuNGC0YtcIixcclxuICAgIG5oOiBcItCS0YvRgdC+0YLQsFwiLFxyXG4gICAgbmk6IFwi0J7RgtGB0YLRg9C/0YtcIixcclxuICAgIG5qOiBcItCS0YvRgNCw0LLQvdC40LLQsNC90LjQtSDQsiDRj9GH0LXQudC60LVcIixcclxuICAgIG5rOiBcIkhvcml6b250YWwgdGV4dCBhbGlnbm1lbnQgdG9vbGJhclwiLFxyXG4gICAgbmw6IFwiVmVydGljYWwgdGV4dCBhbGlnbm1lbnQgdG9vbGJhclwiLFxyXG4gICAgbm06IFwiQWxpZ24gY2VsbCB0ZXh0IHRvIHRoZSBsZWZ0XCIsXHJcbiAgICBubjogXCJBbGlnbiBjZWxsIHRleHQgdG8gdGhlIGNlbnRlclwiLFxyXG4gICAgbm86IFwiQWxpZ24gY2VsbCB0ZXh0IHRvIHRoZSByaWdodFwiLFxyXG4gICAgbnA6IFwiSnVzdGlmeSBjZWxsIHRleHRcIixcclxuICAgIG5xOiBcIkFsaWduIGNlbGwgdGV4dCB0byB0aGUgdG9wXCIsXHJcbiAgICBucjogXCJBbGlnbiBjZWxsIHRleHQgdG8gdGhlIG1pZGRsZVwiLFxyXG4gICAgbnM6IFwiQWxpZ24gY2VsbCB0ZXh0IHRvIHRoZSBib3R0b21cIixcclxuICAgIG50OiBcItCS0YvRgNCw0LLQvdC40LLQsNC90LjQtVwiLFxyXG4gICAgbnU6IFwi0JLRi9GA0LDQstC90LjQstCw0L3QuNC1XCIsXHJcbiAgICBudjogXCLQn9C+INC70LXQstC+0LzRgyDQutGA0LDRjlwiLFxyXG4gICAgbnc6IFwi0J/QviDRhtC10L3RgtGA0YNcIixcclxuICAgIG54OiBcItCf0L4g0L/RgNCw0LLQvtC80YMg0LrRgNCw0Y5cIixcclxuICAgIG55OiBcItCf0LDRgNCw0LPRgNCw0YRcIixcclxuICAgIG56OiBcItCX0LDQs9C+0LvQvtCy0L7QuiAxXCIsXHJcbiAgICBvYTogXCLQl9Cw0LPQvtC70L7QstC+0LogMlwiLFxyXG4gICAgb2I6IFwi0JfQsNCz0L7Qu9C+0LLQvtC6IDNcIixcclxuICAgIG9jOiBcItCX0LDQs9C+0LvQvtCy0L7QuiA0XCIsXHJcbiAgICBvZDogXCLQl9Cw0LPQvtC70L7QstC+0LogNVwiLFxyXG4gICAgb2U6IFwi0JfQsNCz0L7Qu9C+0LLQvtC6IDZcIixcclxuICAgIG9mOiBcItCg0LXQtNCw0LrRgtC+0YAsICUwXCJcclxufTsiLCJ2YXIgY3NzID0gXCIuY29udGFpbmVyLFxcbi5jb250YWluZXItZmx1aWQge1xcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XFxufVxcbi5jb250YWluZXItZmx1aWQge1xcbiAgcGFkZGluZy1yaWdodDogMnJlbTtcXG4gIHBhZGRpbmctbGVmdDogMnJlbTtcXG59XFxuLnJvdyB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XFxuICBkaXNwbGF5OiAtbXMtZmxleGJveDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICAtd2Via2l0LWJveC1mbGV4OiAwO1xcbiAgLW1zLWZsZXg6IDAgMSBhdXRvO1xcbiAgZmxleDogMCAxIGF1dG87XFxuICAtd2Via2l0LWJveC1vcmllbnQ6IGhvcml6b250YWw7XFxuICAtd2Via2l0LWJveC1kaXJlY3Rpb246IG5vcm1hbDtcXG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gIC1tcy1mbGV4LXdyYXA6IHdyYXA7XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuICBtYXJnaW4tcmlnaHQ6IC0uNXJlbTtcXG4gIG1hcmdpbi1sZWZ0OiAtLjVyZW07XFxufVxcbi5yb3cucmV2ZXJzZSB7XFxuICAtd2Via2l0LWJveC1vcmllbnQ6IGhvcml6b250YWw7XFxuICAtd2Via2l0LWJveC1kaXJlY3Rpb246IHJldmVyc2U7XFxuICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xcbn1cXG4uY29sLnJldmVyc2Uge1xcbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcXG4gIC13ZWJraXQtYm94LWRpcmVjdGlvbjogcmV2ZXJzZTtcXG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XFxufVxcbi5jb2wteHMsXFxuLmNvbC14cy0xLFxcbi5jb2wteHMtMTAsXFxuLmNvbC14cy0xMSxcXG4uY29sLXhzLTEyLFxcbi5jb2wteHMtMixcXG4uY29sLXhzLTMsXFxuLmNvbC14cy00LFxcbi5jb2wteHMtNSxcXG4uY29sLXhzLTYsXFxuLmNvbC14cy03LFxcbi5jb2wteHMtOCxcXG4uY29sLXhzLTksXFxuLmNvbC14cy1vZmZzZXQtMCxcXG4uY29sLXhzLW9mZnNldC0xLFxcbi5jb2wteHMtb2Zmc2V0LTEwLFxcbi5jb2wteHMtb2Zmc2V0LTExLFxcbi5jb2wteHMtb2Zmc2V0LTEyLFxcbi5jb2wteHMtb2Zmc2V0LTIsXFxuLmNvbC14cy1vZmZzZXQtMyxcXG4uY29sLXhzLW9mZnNldC00LFxcbi5jb2wteHMtb2Zmc2V0LTUsXFxuLmNvbC14cy1vZmZzZXQtNixcXG4uY29sLXhzLW9mZnNldC03LFxcbi5jb2wteHMtb2Zmc2V0LTgsXFxuLmNvbC14cy1vZmZzZXQtOSB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgLXdlYmtpdC1ib3gtZmxleDogMDtcXG4gIC1tcy1mbGV4OiAwIDAgYXV0bztcXG4gIGZsZXg6IDAgMCBhdXRvO1xcbiAgcGFkZGluZy1yaWdodDogLjVyZW07XFxuICBwYWRkaW5nLWxlZnQ6IC41cmVtO1xcbn1cXG4uY29sLXhzIHtcXG4gIC13ZWJraXQtYm94LWZsZXg6IDE7XFxuICAtbXMtZmxleC1wb3NpdGl2ZTogMTtcXG4gIGZsZXgtZ3JvdzogMTtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAwO1xcbiAgZmxleC1iYXNpczogMDtcXG4gIG1heC13aWR0aDogMTAwJTtcXG59XFxuLmNvbC14cy0xIHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA4LjMzMzMzMzMzJTtcXG4gIGZsZXgtYmFzaXM6IDguMzMzMzMzMzMlO1xcbiAgbWF4LXdpZHRoOiA4LjMzMzMzMzMzJTtcXG59XFxuLmNvbC14cy0yIHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxNi42NjY2NjY2NyU7XFxuICBmbGV4LWJhc2lzOiAxNi42NjY2NjY2NyU7XFxuICBtYXgtd2lkdGg6IDE2LjY2NjY2NjY3JTtcXG59XFxuLmNvbC14cy0zIHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7XFxuICBmbGV4LWJhc2lzOiAyNSU7XFxuICBtYXgtd2lkdGg6IDI1JTtcXG59XFxuLmNvbC14cy00IHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAzMy4zMzMzMzMzMyU7XFxuICBmbGV4LWJhc2lzOiAzMy4zMzMzMzMzMyU7XFxuICBtYXgtd2lkdGg6IDMzLjMzMzMzMzMzJTtcXG59XFxuLmNvbC14cy01IHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA0MS42NjY2NjY2NyU7XFxuICBmbGV4LWJhc2lzOiA0MS42NjY2NjY2NyU7XFxuICBtYXgtd2lkdGg6IDQxLjY2NjY2NjY3JTtcXG59XFxuLmNvbC14cy02IHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7XFxuICBmbGV4LWJhc2lzOiA1MCU7XFxuICBtYXgtd2lkdGg6IDUwJTtcXG59XFxuLmNvbC14cy03IHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1OC4zMzMzMzMzMyU7XFxuICBmbGV4LWJhc2lzOiA1OC4zMzMzMzMzMyU7XFxuICBtYXgtd2lkdGg6IDU4LjMzMzMzMzMzJTtcXG59XFxuLmNvbC14cy04IHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA2Ni42NjY2NjY2NyU7XFxuICBmbGV4LWJhc2lzOiA2Ni42NjY2NjY2NyU7XFxuICBtYXgtd2lkdGg6IDY2LjY2NjY2NjY3JTtcXG59XFxuLmNvbC14cy05IHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7XFxuICBmbGV4LWJhc2lzOiA3NSU7XFxuICBtYXgtd2lkdGg6IDc1JTtcXG59XFxuLmNvbC14cy0xMCB7XFxuICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogODMuMzMzMzMzMzMlO1xcbiAgZmxleC1iYXNpczogODMuMzMzMzMzMzMlO1xcbiAgbWF4LXdpZHRoOiA4My4zMzMzMzMzMyU7XFxufVxcbi5jb2wteHMtMTEge1xcbiAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDkxLjY2NjY2NjY3JTtcXG4gIGZsZXgtYmFzaXM6IDkxLjY2NjY2NjY3JTtcXG4gIG1heC13aWR0aDogOTEuNjY2NjY2NjclO1xcbn1cXG4uY29sLXhzLTEyIHtcXG4gIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlO1xcbiAgZmxleC1iYXNpczogMTAwJTtcXG4gIG1heC13aWR0aDogMTAwJTtcXG59XFxuLmNvbC14cy1vZmZzZXQtMCB7XFxuICBtYXJnaW4tbGVmdDogMDtcXG59XFxuLmNvbC14cy1vZmZzZXQtMSB7XFxuICBtYXJnaW4tbGVmdDogOC4zMzMzMzMzMyU7XFxufVxcbi5jb2wteHMtb2Zmc2V0LTIge1xcbiAgbWFyZ2luLWxlZnQ6IDE2LjY2NjY2NjY3JTtcXG59XFxuLmNvbC14cy1vZmZzZXQtMyB7XFxuICBtYXJnaW4tbGVmdDogMjUlO1xcbn1cXG4uY29sLXhzLW9mZnNldC00IHtcXG4gIG1hcmdpbi1sZWZ0OiAzMy4zMzMzMzMzMyU7XFxufVxcbi5jb2wteHMtb2Zmc2V0LTUge1xcbiAgbWFyZ2luLWxlZnQ6IDQxLjY2NjY2NjY3JTtcXG59XFxuLmNvbC14cy1vZmZzZXQtNiB7XFxuICBtYXJnaW4tbGVmdDogNTAlO1xcbn1cXG4uY29sLXhzLW9mZnNldC03IHtcXG4gIG1hcmdpbi1sZWZ0OiA1OC4zMzMzMzMzMyU7XFxufVxcbi5jb2wteHMtb2Zmc2V0LTgge1xcbiAgbWFyZ2luLWxlZnQ6IDY2LjY2NjY2NjY3JTtcXG59XFxuLmNvbC14cy1vZmZzZXQtOSB7XFxuICBtYXJnaW4tbGVmdDogNzUlO1xcbn1cXG4uY29sLXhzLW9mZnNldC0xMCB7XFxuICBtYXJnaW4tbGVmdDogODMuMzMzMzMzMzMlO1xcbn1cXG4uY29sLXhzLW9mZnNldC0xMSB7XFxuICBtYXJnaW4tbGVmdDogOTEuNjY2NjY2NjclO1xcbn1cXG4uc3RhcnQteHMge1xcbiAgLXdlYmtpdC1ib3gtcGFjazogc3RhcnQ7XFxuICAtbXMtZmxleC1wYWNrOiBzdGFydDtcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcXG4gIHRleHQtYWxpZ246IHN0YXJ0O1xcbn1cXG4uY2VudGVyLXhzIHtcXG4gIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjtcXG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG4uZW5kLXhzIHtcXG4gIC13ZWJraXQtYm94LXBhY2s6IGVuZDtcXG4gIC1tcy1mbGV4LXBhY2s6IGVuZDtcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XFxuICB0ZXh0LWFsaWduOiBlbmQ7XFxufVxcbi50b3AteHMge1xcbiAgLXdlYmtpdC1ib3gtYWxpZ246IHN0YXJ0O1xcbiAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0O1xcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XFxufVxcbi5taWRkbGUteHMge1xcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcXG4gIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbn1cXG4uYm90dG9tLXhzIHtcXG4gIC13ZWJraXQtYm94LWFsaWduOiBlbmQ7XFxuICAtbXMtZmxleC1hbGlnbjogZW5kO1xcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xcbn1cXG4uYXJvdW5kLXhzIHtcXG4gIC1tcy1mbGV4LXBhY2s6IGRpc3RyaWJ1dGU7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcXG59XFxuLmJldHdlZW4teHMge1xcbiAgLXdlYmtpdC1ib3gtcGFjazoganVzdGlmeTtcXG4gIC1tcy1mbGV4LXBhY2s6IGp1c3RpZnk7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxufVxcbi5maXJzdC14cyB7XFxuICAtd2Via2l0LWJveC1vcmRpbmFsLWdyb3VwOiAwO1xcbiAgLW1zLWZsZXgtb3JkZXI6IC0xO1xcbiAgb3JkZXI6IC0xO1xcbn1cXG4ubGFzdC14cyB7XFxuICAtd2Via2l0LWJveC1vcmRpbmFsLWdyb3VwOiAyO1xcbiAgLW1zLWZsZXgtb3JkZXI6IDE7XFxuICBvcmRlcjogMTtcXG59XFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOjQ4ZW0pIHtcXG4gIC5jb250YWluZXIge1xcbiAgICB3aWR0aDogNDlyZW07XFxuICB9XFxuXFxuICAuY29sLXNtLFxcbiAgLmNvbC1zbS0xLFxcbiAgLmNvbC1zbS0xMCxcXG4gIC5jb2wtc20tMTEsXFxuICAuY29sLXNtLTEyLFxcbiAgLmNvbC1zbS0yLFxcbiAgLmNvbC1zbS0zLFxcbiAgLmNvbC1zbS00LFxcbiAgLmNvbC1zbS01LFxcbiAgLmNvbC1zbS02LFxcbiAgLmNvbC1zbS03LFxcbiAgLmNvbC1zbS04LFxcbiAgLmNvbC1zbS05LFxcbiAgLmNvbC1zbS1vZmZzZXQtMCxcXG4gIC5jb2wtc20tb2Zmc2V0LTEsXFxuICAuY29sLXNtLW9mZnNldC0xMCxcXG4gIC5jb2wtc20tb2Zmc2V0LTExLFxcbiAgLmNvbC1zbS1vZmZzZXQtMTIsXFxuICAuY29sLXNtLW9mZnNldC0yLFxcbiAgLmNvbC1zbS1vZmZzZXQtMyxcXG4gIC5jb2wtc20tb2Zmc2V0LTQsXFxuICAuY29sLXNtLW9mZnNldC01LFxcbiAgLmNvbC1zbS1vZmZzZXQtNixcXG4gIC5jb2wtc20tb2Zmc2V0LTcsXFxuICAuY29sLXNtLW9mZnNldC04LFxcbiAgLmNvbC1zbS1vZmZzZXQtOSB7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIC13ZWJraXQtYm94LWZsZXg6IDA7XFxuICAgIC1tcy1mbGV4OiAwIDAgYXV0bztcXG4gICAgZmxleDogMCAwIGF1dG87XFxuICAgIHBhZGRpbmctcmlnaHQ6IC41cmVtO1xcbiAgICBwYWRkaW5nLWxlZnQ6IC41cmVtO1xcbiAgfVxcblxcbiAgLmNvbC1zbSB7XFxuICAgIC13ZWJraXQtYm94LWZsZXg6IDE7XFxuICAgIC1tcy1mbGV4LXBvc2l0aXZlOiAxO1xcbiAgICBmbGV4LWdyb3c6IDE7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAwO1xcbiAgICBmbGV4LWJhc2lzOiAwO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICB9XFxuXFxuICAuY29sLXNtLTEge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOC4zMzMzMzMzMyU7XFxuICAgIGZsZXgtYmFzaXM6IDguMzMzMzMzMzMlO1xcbiAgICBtYXgtd2lkdGg6IDguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1zbS0yIHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDE2LjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogMTYuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDE2LjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tMyB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7XFxuICAgIGZsZXgtYmFzaXM6IDI1JTtcXG4gICAgbWF4LXdpZHRoOiAyNSU7XFxuICB9XFxuXFxuICAuY29sLXNtLTQge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMzMuMzMzMzMzMzMlO1xcbiAgICBmbGV4LWJhc2lzOiAzMy4zMzMzMzMzMyU7XFxuICAgIG1heC13aWR0aDogMzMuMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1zbS01IHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDQxLjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogNDEuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDQxLjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tNiB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7XFxuICAgIGZsZXgtYmFzaXM6IDUwJTtcXG4gICAgbWF4LXdpZHRoOiA1MCU7XFxuICB9XFxuXFxuICAuY29sLXNtLTcge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNTguMzMzMzMzMzMlO1xcbiAgICBmbGV4LWJhc2lzOiA1OC4zMzMzMzMzMyU7XFxuICAgIG1heC13aWR0aDogNTguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1zbS04IHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDY2LjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogNjYuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDY2LjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tOSB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7XFxuICAgIGZsZXgtYmFzaXM6IDc1JTtcXG4gICAgbWF4LXdpZHRoOiA3NSU7XFxuICB9XFxuXFxuICAuY29sLXNtLTEwIHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDgzLjMzMzMzMzMzJTtcXG4gICAgZmxleC1iYXNpczogODMuMzMzMzMzMzMlO1xcbiAgICBtYXgtd2lkdGg6IDgzLjMzMzMzMzMzJTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tMTEge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOTEuNjY2NjY2NjclO1xcbiAgICBmbGV4LWJhc2lzOiA5MS42NjY2NjY2NyU7XFxuICAgIG1heC13aWR0aDogOTEuNjY2NjY2NjclO1xcbiAgfVxcblxcbiAgLmNvbC1zbS0xMiB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlO1xcbiAgICBmbGV4LWJhc2lzOiAxMDAlO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICB9XFxuXFxuICAuY29sLXNtLW9mZnNldC0wIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDA7XFxuICB9XFxuXFxuICAuY29sLXNtLW9mZnNldC0xIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1zbS1vZmZzZXQtMiB7XFxuICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLXNtLW9mZnNldC0zIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDI1JTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tb2Zmc2V0LTQge1xcbiAgICBtYXJnaW4tbGVmdDogMzMuMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1zbS1vZmZzZXQtNSB7XFxuICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLXNtLW9mZnNldC02IHtcXG4gICAgbWFyZ2luLWxlZnQ6IDUwJTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tb2Zmc2V0LTcge1xcbiAgICBtYXJnaW4tbGVmdDogNTguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1zbS1vZmZzZXQtOCB7XFxuICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLXNtLW9mZnNldC05IHtcXG4gICAgbWFyZ2luLWxlZnQ6IDc1JTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tb2Zmc2V0LTEwIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDgzLjMzMzMzMzMzJTtcXG4gIH1cXG5cXG4gIC5jb2wtc20tb2Zmc2V0LTExIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDkxLjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5zdGFydC1zbSB7XFxuICAgIC13ZWJraXQtYm94LXBhY2s6IHN0YXJ0O1xcbiAgICAtbXMtZmxleC1wYWNrOiBzdGFydDtcXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xcbiAgICB0ZXh0LWFsaWduOiBzdGFydDtcXG4gIH1cXG5cXG4gIC5jZW50ZXItc20ge1xcbiAgICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XFxuICAgIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIH1cXG5cXG4gIC5lbmQtc20ge1xcbiAgICAtd2Via2l0LWJveC1wYWNrOiBlbmQ7XFxuICAgIC1tcy1mbGV4LXBhY2s6IGVuZDtcXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG4gICAgdGV4dC1hbGlnbjogZW5kO1xcbiAgfVxcblxcbiAgLnRvcC1zbSB7XFxuICAgIC13ZWJraXQtYm94LWFsaWduOiBzdGFydDtcXG4gICAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0O1xcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXG4gIH1cXG5cXG4gIC5taWRkbGUtc20ge1xcbiAgICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyO1xcbiAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgfVxcblxcbiAgLmJvdHRvbS1zbSB7XFxuICAgIC13ZWJraXQtYm94LWFsaWduOiBlbmQ7XFxuICAgIC1tcy1mbGV4LWFsaWduOiBlbmQ7XFxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcXG4gIH1cXG5cXG4gIC5hcm91bmQtc20ge1xcbiAgICAtbXMtZmxleC1wYWNrOiBkaXN0cmlidXRlO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcXG4gIH1cXG5cXG4gIC5iZXR3ZWVuLXNtIHtcXG4gICAgLXdlYmtpdC1ib3gtcGFjazoganVzdGlmeTtcXG4gICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgfVxcblxcbiAgLmZpcnN0LXNtIHtcXG4gICAgLXdlYmtpdC1ib3gtb3JkaW5hbC1ncm91cDogMDtcXG4gICAgLW1zLWZsZXgtb3JkZXI6IC0xO1xcbiAgICBvcmRlcjogLTE7XFxuICB9XFxuXFxuICAubGFzdC1zbSB7XFxuICAgIC13ZWJraXQtYm94LW9yZGluYWwtZ3JvdXA6IDI7XFxuICAgIC1tcy1mbGV4LW9yZGVyOiAxO1xcbiAgICBvcmRlcjogMTtcXG4gIH1cXG59XFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOjY0ZW0pIHtcXG4gIC5jb250YWluZXIge1xcbiAgICB3aWR0aDogNjVyZW07XFxuICB9XFxuXFxuICAuY29sLW1kLFxcbiAgLmNvbC1tZC0xLFxcbiAgLmNvbC1tZC0xMCxcXG4gIC5jb2wtbWQtMTEsXFxuICAuY29sLW1kLTEyLFxcbiAgLmNvbC1tZC0yLFxcbiAgLmNvbC1tZC0zLFxcbiAgLmNvbC1tZC00LFxcbiAgLmNvbC1tZC01LFxcbiAgLmNvbC1tZC02LFxcbiAgLmNvbC1tZC03LFxcbiAgLmNvbC1tZC04LFxcbiAgLmNvbC1tZC05LFxcbiAgLmNvbC1tZC1vZmZzZXQtMCxcXG4gIC5jb2wtbWQtb2Zmc2V0LTEsXFxuICAuY29sLW1kLW9mZnNldC0xMCxcXG4gIC5jb2wtbWQtb2Zmc2V0LTExLFxcbiAgLmNvbC1tZC1vZmZzZXQtMTIsXFxuICAuY29sLW1kLW9mZnNldC0yLFxcbiAgLmNvbC1tZC1vZmZzZXQtMyxcXG4gIC5jb2wtbWQtb2Zmc2V0LTQsXFxuICAuY29sLW1kLW9mZnNldC01LFxcbiAgLmNvbC1tZC1vZmZzZXQtNixcXG4gIC5jb2wtbWQtb2Zmc2V0LTcsXFxuICAuY29sLW1kLW9mZnNldC04LFxcbiAgLmNvbC1tZC1vZmZzZXQtOSB7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIC13ZWJraXQtYm94LWZsZXg6IDA7XFxuICAgIC1tcy1mbGV4OiAwIDAgYXV0bztcXG4gICAgZmxleDogMCAwIGF1dG87XFxuICAgIHBhZGRpbmctcmlnaHQ6IC41cmVtO1xcbiAgICBwYWRkaW5nLWxlZnQ6IC41cmVtO1xcbiAgfVxcblxcbiAgLmNvbC1tZCB7XFxuICAgIC13ZWJraXQtYm94LWZsZXg6IDE7XFxuICAgIC1tcy1mbGV4LXBvc2l0aXZlOiAxO1xcbiAgICBmbGV4LWdyb3c6IDE7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAwO1xcbiAgICBmbGV4LWJhc2lzOiAwO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICB9XFxuXFxuICAuY29sLW1kLTEge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOC4zMzMzMzMzMyU7XFxuICAgIGZsZXgtYmFzaXM6IDguMzMzMzMzMzMlO1xcbiAgICBtYXgtd2lkdGg6IDguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1tZC0yIHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDE2LjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogMTYuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDE2LjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtMyB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7XFxuICAgIGZsZXgtYmFzaXM6IDI1JTtcXG4gICAgbWF4LXdpZHRoOiAyNSU7XFxuICB9XFxuXFxuICAuY29sLW1kLTQge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMzMuMzMzMzMzMzMlO1xcbiAgICBmbGV4LWJhc2lzOiAzMy4zMzMzMzMzMyU7XFxuICAgIG1heC13aWR0aDogMzMuMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1tZC01IHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDQxLjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogNDEuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDQxLjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtNiB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7XFxuICAgIGZsZXgtYmFzaXM6IDUwJTtcXG4gICAgbWF4LXdpZHRoOiA1MCU7XFxuICB9XFxuXFxuICAuY29sLW1kLTcge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNTguMzMzMzMzMzMlO1xcbiAgICBmbGV4LWJhc2lzOiA1OC4zMzMzMzMzMyU7XFxuICAgIG1heC13aWR0aDogNTguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1tZC04IHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDY2LjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogNjYuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDY2LjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtOSB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7XFxuICAgIGZsZXgtYmFzaXM6IDc1JTtcXG4gICAgbWF4LXdpZHRoOiA3NSU7XFxuICB9XFxuXFxuICAuY29sLW1kLTEwIHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDgzLjMzMzMzMzMzJTtcXG4gICAgZmxleC1iYXNpczogODMuMzMzMzMzMzMlO1xcbiAgICBtYXgtd2lkdGg6IDgzLjMzMzMzMzMzJTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtMTEge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOTEuNjY2NjY2NjclO1xcbiAgICBmbGV4LWJhc2lzOiA5MS42NjY2NjY2NyU7XFxuICAgIG1heC13aWR0aDogOTEuNjY2NjY2NjclO1xcbiAgfVxcblxcbiAgLmNvbC1tZC0xMiB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlO1xcbiAgICBmbGV4LWJhc2lzOiAxMDAlO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICB9XFxuXFxuICAuY29sLW1kLW9mZnNldC0wIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDA7XFxuICB9XFxuXFxuICAuY29sLW1kLW9mZnNldC0xIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1tZC1vZmZzZXQtMiB7XFxuICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLW1kLW9mZnNldC0zIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDI1JTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtb2Zmc2V0LTQge1xcbiAgICBtYXJnaW4tbGVmdDogMzMuMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1tZC1vZmZzZXQtNSB7XFxuICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLW1kLW9mZnNldC02IHtcXG4gICAgbWFyZ2luLWxlZnQ6IDUwJTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtb2Zmc2V0LTcge1xcbiAgICBtYXJnaW4tbGVmdDogNTguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1tZC1vZmZzZXQtOCB7XFxuICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLW1kLW9mZnNldC05IHtcXG4gICAgbWFyZ2luLWxlZnQ6IDc1JTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtb2Zmc2V0LTEwIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDgzLjMzMzMzMzMzJTtcXG4gIH1cXG5cXG4gIC5jb2wtbWQtb2Zmc2V0LTExIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDkxLjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5zdGFydC1tZCB7XFxuICAgIC13ZWJraXQtYm94LXBhY2s6IHN0YXJ0O1xcbiAgICAtbXMtZmxleC1wYWNrOiBzdGFydDtcXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xcbiAgICB0ZXh0LWFsaWduOiBzdGFydDtcXG4gIH1cXG5cXG4gIC5jZW50ZXItbWQge1xcbiAgICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XFxuICAgIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIH1cXG5cXG4gIC5lbmQtbWQge1xcbiAgICAtd2Via2l0LWJveC1wYWNrOiBlbmQ7XFxuICAgIC1tcy1mbGV4LXBhY2s6IGVuZDtcXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG4gICAgdGV4dC1hbGlnbjogZW5kO1xcbiAgfVxcblxcbiAgLnRvcC1tZCB7XFxuICAgIC13ZWJraXQtYm94LWFsaWduOiBzdGFydDtcXG4gICAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0O1xcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXG4gIH1cXG5cXG4gIC5taWRkbGUtbWQge1xcbiAgICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyO1xcbiAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgfVxcblxcbiAgLmJvdHRvbS1tZCB7XFxuICAgIC13ZWJraXQtYm94LWFsaWduOiBlbmQ7XFxuICAgIC1tcy1mbGV4LWFsaWduOiBlbmQ7XFxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcXG4gIH1cXG5cXG4gIC5hcm91bmQtbWQge1xcbiAgICAtbXMtZmxleC1wYWNrOiBkaXN0cmlidXRlO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcXG4gIH1cXG5cXG4gIC5iZXR3ZWVuLW1kIHtcXG4gICAgLXdlYmtpdC1ib3gtcGFjazoganVzdGlmeTtcXG4gICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgfVxcblxcbiAgLmZpcnN0LW1kIHtcXG4gICAgLXdlYmtpdC1ib3gtb3JkaW5hbC1ncm91cDogMDtcXG4gICAgLW1zLWZsZXgtb3JkZXI6IC0xO1xcbiAgICBvcmRlcjogLTE7XFxuICB9XFxuXFxuICAubGFzdC1tZCB7XFxuICAgIC13ZWJraXQtYm94LW9yZGluYWwtZ3JvdXA6IDI7XFxuICAgIC1tcy1mbGV4LW9yZGVyOiAxO1xcbiAgICBvcmRlcjogMTtcXG4gIH1cXG59XFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOjc1ZW0pIHtcXG4gIC5jb250YWluZXIge1xcbiAgICB3aWR0aDogNzZyZW07XFxuICB9XFxuXFxuICAuY29sLWxnLFxcbiAgLmNvbC1sZy0xLFxcbiAgLmNvbC1sZy0xMCxcXG4gIC5jb2wtbGctMTEsXFxuICAuY29sLWxnLTEyLFxcbiAgLmNvbC1sZy0yLFxcbiAgLmNvbC1sZy0zLFxcbiAgLmNvbC1sZy00LFxcbiAgLmNvbC1sZy01LFxcbiAgLmNvbC1sZy02LFxcbiAgLmNvbC1sZy03LFxcbiAgLmNvbC1sZy04LFxcbiAgLmNvbC1sZy05LFxcbiAgLmNvbC1sZy1vZmZzZXQtMCxcXG4gIC5jb2wtbGctb2Zmc2V0LTEsXFxuICAuY29sLWxnLW9mZnNldC0xMCxcXG4gIC5jb2wtbGctb2Zmc2V0LTExLFxcbiAgLmNvbC1sZy1vZmZzZXQtMTIsXFxuICAuY29sLWxnLW9mZnNldC0yLFxcbiAgLmNvbC1sZy1vZmZzZXQtMyxcXG4gIC5jb2wtbGctb2Zmc2V0LTQsXFxuICAuY29sLWxnLW9mZnNldC01LFxcbiAgLmNvbC1sZy1vZmZzZXQtNixcXG4gIC5jb2wtbGctb2Zmc2V0LTcsXFxuICAuY29sLWxnLW9mZnNldC04LFxcbiAgLmNvbC1sZy1vZmZzZXQtOSB7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIC13ZWJraXQtYm94LWZsZXg6IDA7XFxuICAgIC1tcy1mbGV4OiAwIDAgYXV0bztcXG4gICAgZmxleDogMCAwIGF1dG87XFxuICAgIHBhZGRpbmctcmlnaHQ6IC41cmVtO1xcbiAgICBwYWRkaW5nLWxlZnQ6IC41cmVtO1xcbiAgfVxcblxcbiAgLmNvbC1sZyB7XFxuICAgIC13ZWJraXQtYm94LWZsZXg6IDE7XFxuICAgIC1tcy1mbGV4LXBvc2l0aXZlOiAxO1xcbiAgICBmbGV4LWdyb3c6IDE7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAwO1xcbiAgICBmbGV4LWJhc2lzOiAwO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICB9XFxuXFxuICAuY29sLWxnLTEge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOC4zMzMzMzMzMyU7XFxuICAgIGZsZXgtYmFzaXM6IDguMzMzMzMzMzMlO1xcbiAgICBtYXgtd2lkdGg6IDguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1sZy0yIHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDE2LjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogMTYuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDE2LjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctMyB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7XFxuICAgIGZsZXgtYmFzaXM6IDI1JTtcXG4gICAgbWF4LXdpZHRoOiAyNSU7XFxuICB9XFxuXFxuICAuY29sLWxnLTQge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMzMuMzMzMzMzMzMlO1xcbiAgICBmbGV4LWJhc2lzOiAzMy4zMzMzMzMzMyU7XFxuICAgIG1heC13aWR0aDogMzMuMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1sZy01IHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDQxLjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogNDEuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDQxLjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctNiB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7XFxuICAgIGZsZXgtYmFzaXM6IDUwJTtcXG4gICAgbWF4LXdpZHRoOiA1MCU7XFxuICB9XFxuXFxuICAuY29sLWxnLTcge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNTguMzMzMzMzMzMlO1xcbiAgICBmbGV4LWJhc2lzOiA1OC4zMzMzMzMzMyU7XFxuICAgIG1heC13aWR0aDogNTguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1sZy04IHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDY2LjY2NjY2NjY3JTtcXG4gICAgZmxleC1iYXNpczogNjYuNjY2NjY2NjclO1xcbiAgICBtYXgtd2lkdGg6IDY2LjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctOSB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7XFxuICAgIGZsZXgtYmFzaXM6IDc1JTtcXG4gICAgbWF4LXdpZHRoOiA3NSU7XFxuICB9XFxuXFxuICAuY29sLWxnLTEwIHtcXG4gICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDgzLjMzMzMzMzMzJTtcXG4gICAgZmxleC1iYXNpczogODMuMzMzMzMzMzMlO1xcbiAgICBtYXgtd2lkdGg6IDgzLjMzMzMzMzMzJTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctMTEge1xcbiAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOTEuNjY2NjY2NjclO1xcbiAgICBmbGV4LWJhc2lzOiA5MS42NjY2NjY2NyU7XFxuICAgIG1heC13aWR0aDogOTEuNjY2NjY2NjclO1xcbiAgfVxcblxcbiAgLmNvbC1sZy0xMiB7XFxuICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlO1xcbiAgICBmbGV4LWJhc2lzOiAxMDAlO1xcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxuICB9XFxuXFxuICAuY29sLWxnLW9mZnNldC0wIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDA7XFxuICB9XFxuXFxuICAuY29sLWxnLW9mZnNldC0xIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1sZy1vZmZzZXQtMiB7XFxuICAgIG1hcmdpbi1sZWZ0OiAxNi42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLWxnLW9mZnNldC0zIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDI1JTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctb2Zmc2V0LTQge1xcbiAgICBtYXJnaW4tbGVmdDogMzMuMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1sZy1vZmZzZXQtNSB7XFxuICAgIG1hcmdpbi1sZWZ0OiA0MS42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLWxnLW9mZnNldC02IHtcXG4gICAgbWFyZ2luLWxlZnQ6IDUwJTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctb2Zmc2V0LTcge1xcbiAgICBtYXJnaW4tbGVmdDogNTguMzMzMzMzMzMlO1xcbiAgfVxcblxcbiAgLmNvbC1sZy1vZmZzZXQtOCB7XFxuICAgIG1hcmdpbi1sZWZ0OiA2Ni42NjY2NjY2NyU7XFxuICB9XFxuXFxuICAuY29sLWxnLW9mZnNldC05IHtcXG4gICAgbWFyZ2luLWxlZnQ6IDc1JTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctb2Zmc2V0LTEwIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDgzLjMzMzMzMzMzJTtcXG4gIH1cXG5cXG4gIC5jb2wtbGctb2Zmc2V0LTExIHtcXG4gICAgbWFyZ2luLWxlZnQ6IDkxLjY2NjY2NjY3JTtcXG4gIH1cXG5cXG4gIC5zdGFydC1sZyB7XFxuICAgIC13ZWJraXQtYm94LXBhY2s6IHN0YXJ0O1xcbiAgICAtbXMtZmxleC1wYWNrOiBzdGFydDtcXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xcbiAgICB0ZXh0LWFsaWduOiBzdGFydDtcXG4gIH1cXG5cXG4gIC5jZW50ZXItbGcge1xcbiAgICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XFxuICAgIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIH1cXG5cXG4gIC5lbmQtbGcge1xcbiAgICAtd2Via2l0LWJveC1wYWNrOiBlbmQ7XFxuICAgIC1tcy1mbGV4LXBhY2s6IGVuZDtcXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG4gICAgdGV4dC1hbGlnbjogZW5kO1xcbiAgfVxcblxcbiAgLnRvcC1sZyB7XFxuICAgIC13ZWJraXQtYm94LWFsaWduOiBzdGFydDtcXG4gICAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0O1xcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXG4gIH1cXG5cXG4gIC5taWRkbGUtbGcge1xcbiAgICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyO1xcbiAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgfVxcblxcbiAgLmJvdHRvbS1sZyB7XFxuICAgIC13ZWJraXQtYm94LWFsaWduOiBlbmQ7XFxuICAgIC1tcy1mbGV4LWFsaWduOiBlbmQ7XFxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcXG4gIH1cXG5cXG4gIC5hcm91bmQtbGcge1xcbiAgICAtbXMtZmxleC1wYWNrOiBkaXN0cmlidXRlO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcXG4gIH1cXG5cXG4gIC5iZXR3ZWVuLWxnIHtcXG4gICAgLXdlYmtpdC1ib3gtcGFjazoganVzdGlmeTtcXG4gICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgfVxcblxcbiAgLmZpcnN0LWxnIHtcXG4gICAgLXdlYmtpdC1ib3gtb3JkaW5hbC1ncm91cDogMDtcXG4gICAgLW1zLWZsZXgtb3JkZXI6IC0xO1xcbiAgICBvcmRlcjogLTE7XFxuICB9XFxuXFxuICAubGFzdC1sZyB7XFxuICAgIC13ZWJraXQtYm94LW9yZGluYWwtZ3JvdXA6IDI7XFxuICAgIC1tcy1mbGV4LW9yZGVyOiAxO1xcbiAgICBvcmRlcjogMTtcXG4gIH1cXG59XFxuXCI7IChyZXF1aXJlKFwiYnJvd3NlcmlmeS1jc3NcIikuY3JlYXRlU3R5bGUoY3NzLCB7IFwiaHJlZlwiOiBcImRlcGVuZGVuY2llc1xcXFxmbGV4Ym94Z3JpZFxcXFxmbGV4Ym94Z3JpZC5taW4uY3NzXCIgfSwgeyBcImluc2VydEF0XCI6IFwiYm90dG9tXCIgfSkpOyBtb2R1bGUuZXhwb3J0cyA9IGNzczsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGF0b2EgKGEsIG4pIHsgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsIG4pOyB9XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBicm93c2VyIGZpZWxkLCBjaGVjayBvdXQgdGhlIGJyb3dzZXIgZmllbGQgYXQgaHR0cHM6Ly9naXRodWIuY29tL3N1YnN0YWNrL2Jyb3dzZXJpZnktaGFuZGJvb2sjYnJvd3Nlci1maWVsZC5cblxudmFyIHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhciBpbnNlcnRTdHlsZUVsZW1lbnQgPSBmdW5jdGlvbihzdHlsZUVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICB2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMuaW5zZXJ0QXQgPSBvcHRpb25zLmluc2VydEF0IHx8ICdib3R0b20nO1xuXG4gICAgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09ICd0b3AnKSB7XG4gICAgICAgIGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcbiAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuICAgICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFxcJ2luc2VydEF0XFwnLiBNdXN0IGJlIFxcJ3RvcFxcJyBvciBcXCdib3R0b21cXCcuJyk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgLy8gQ3JlYXRlIGEgPGxpbms+IHRhZyB3aXRoIG9wdGlvbmFsIGRhdGEgYXR0cmlidXRlc1xuICAgIGNyZWF0ZUxpbms6IGZ1bmN0aW9uKGhyZWYsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuXG4gICAgICAgIGxpbmsuaHJlZiA9IGhyZWY7XG4gICAgICAgIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnO1xuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpZiAoICEgYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnZGF0YS0nICsga2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKGxpbmspO1xuICAgIH0sXG4gICAgLy8gQ3JlYXRlIGEgPHN0eWxlPiB0YWcgd2l0aCBvcHRpb25hbCBkYXRhIGF0dHJpYnV0ZXNcbiAgICBjcmVhdGVTdHlsZTogZnVuY3Rpb24oY3NzVGV4dCwgYXR0cmlidXRlcywgZXh0cmFPcHRpb25zKSB7XG4gICAgICAgIGV4dHJhT3B0aW9ucyA9IGV4dHJhT3B0aW9ucyB8fCB7fTtcblxuICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYgKCAhIGF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKCdkYXRhLScgKyBrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZS5zaGVldCkgeyAvLyBmb3IganNkb20gYW5kIElFOStcbiAgICAgICAgICAgIHN0eWxlLmlubmVySFRNTCA9IGNzc1RleHQ7XG4gICAgICAgICAgICBzdHlsZS5zaGVldC5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICAgICAgICAgIGluc2VydFN0eWxlRWxlbWVudChzdHlsZSwgeyBpbnNlcnRBdDogZXh0cmFPcHRpb25zLmluc2VydEF0IH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHsgLy8gZm9yIElFOCBhbmQgYmVsb3dcbiAgICAgICAgICAgIGluc2VydFN0eWxlRWxlbWVudChzdHlsZSwgeyBpbnNlcnRBdDogZXh0cmFPcHRpb25zLmluc2VydEF0IH0pO1xuICAgICAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICAgICAgfSBlbHNlIHsgLy8gZm9yIENocm9tZSwgRmlyZWZveCwgYW5kIFNhZmFyaVxuICAgICAgICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzVGV4dCkpO1xuICAgICAgICAgICAgaW5zZXJ0U3R5bGVFbGVtZW50KHN0eWxlLCB7IGluc2VydEF0OiBleHRyYU9wdGlvbnMuaW5zZXJ0QXQgfSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdGlja3kgPSByZXF1aXJlKCd0aWNreScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhdG9hID0gcmVxdWlyZSgnYXRvYScpO1xudmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtaXR0ZXIgKHRoaW5nLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGV2dCA9IHt9O1xuICBpZiAodGhpbmcgPT09IHVuZGVmaW5lZCkgeyB0aGluZyA9IHt9OyB9XG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgaWYgKCFldnRbdHlwZV0pIHtcbiAgICAgIGV2dFt0eXBlXSA9IFtmbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2dFt0eXBlXS5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxuICAgIHRoaW5nLm9uKHR5cGUsIGZuKTtcbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoYyA9PT0gMSkge1xuICAgICAgZGVsZXRlIGV2dFt0eXBlXTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDApIHtcbiAgICAgIGV2dCA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXQgPSBldnRbdHlwZV07XG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxuICAgICAgZXQuc3BsaWNlKGV0LmluZGV4T2YoZm4pLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5lbWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGluZy5lbWl0dGVyU25hcHNob3QoYXJncy5zaGlmdCgpKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZXQgPSAoZXZ0W3R5cGVdIHx8IFtdKS5zbGljZSgwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgICB2YXIgY3R4ID0gdGhpcyB8fCB0aGluZztcbiAgICAgIGlmICh0eXBlID09PSAnZXJyb3InICYmIG9wdHMudGhyb3dzICE9PSBmYWxzZSAmJiAhZXQubGVuZ3RoKSB7IHRocm93IGFyZ3MubGVuZ3RoID09PSAxID8gYXJnc1swXSA6IGFyZ3M7IH1cbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XG4gICAgICAgIGlmIChvcHRzLmFzeW5jKSB7IGRlYm91bmNlKGxpc3RlbiwgYXJncywgY3R4KTsgfSBlbHNlIHsgbGlzdGVuLmFwcGx5KGN0eCwgYXJncyk7IH1cbiAgICAgICAgaWYgKGxpc3Rlbi5fb25jZSkgeyB0aGluZy5vZmYodHlwZSwgbGlzdGVuKTsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpbmc7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHRoaW5nO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnY3VzdG9tLWV2ZW50Jyk7XG52YXIgZXZlbnRtYXAgPSByZXF1aXJlKCcuL2V2ZW50bWFwJyk7XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGxpc3RlbmVyID0gdW53cmFwKGVsLCB0eXBlLCBmbik7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuIiwiXG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGUgPSB7fTtcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG52YXIgZW5kID0gJyg/OlxcXFxzfCQpJztcblxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xuICB2YXIgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBjYWNoZWQgPSBuZXcgUmVnRXhwKHN0YXJ0ICsgY2xhc3NOYW1lICsgZW5kLCAnZycpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIHZhciBjdXJyZW50ID0gZWwuY2xhc3NOYW1lO1xuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9IGVsc2UgaWYgKCFsb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJtQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobG9va3VwQ2xhc3MoY2xhc3NOYW1lKSwgJyAnKS50cmltKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZENsYXNzLFxuICBybTogcm1DbGFzc1xufTtcbiIsInZhciBjc3MgPSBcIi5ndS1taXJyb3Ige1xcbiAgcG9zaXRpb246IGZpeGVkIWltcG9ydGFudDtcXG4gIG1hcmdpbjogMCFpbXBvcnRhbnQ7XFxuICB6LWluZGV4OiA5OTk5IWltcG9ydGFudDtcXG4gIG9wYWNpdHk6IC44O1xcbiAgLW1zLWZpbHRlcjogXFxcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShPcGFjaXR5PTgwKVxcXCI7XFxuICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9ODApO1xcbn1cXG4uZ3UtaGlkZSB7XFxuICBkaXNwbGF5OiBub25lIWltcG9ydGFudDtcXG59XFxuLmd1LXVuc2VsZWN0YWJsZSB7XFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lIWltcG9ydGFudDtcXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmUhaW1wb3J0YW50O1xcbiAgLW1zLXVzZXItc2VsZWN0OiBub25lIWltcG9ydGFudDtcXG4gIHVzZXItc2VsZWN0OiBub25lIWltcG9ydGFudDtcXG59XFxuLmd1LXRyYW5zaXQge1xcbiAgb3BhY2l0eTogLjI7XFxuICAtbXMtZmlsdGVyOiBcXFwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKE9wYWNpdHk9MjApXFxcIjtcXG4gIGZpbHRlcjogYWxwaGEob3BhY2l0eT0yMCk7XFxufVxcblwiOyAocmVxdWlyZShcImJyb3dzZXJpZnktY3NzXCIpLmNyZWF0ZVN0eWxlKGNzcywgeyBcImhyZWZcIjogXCJub2RlX21vZHVsZXNcXFxcZHJhZ3VsYVxcXFxkaXN0XFxcXGRyYWd1bGEubWluLmNzc1wiIH0sIHsgXCJpbnNlcnRBdFwiOiBcImJvdHRvbVwiIH0pKTsgbW9kdWxlLmV4cG9ydHMgPSBjc3M7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJ2NvbnRyYS9lbWl0dGVyJyk7XG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XG52YXIgY2xhc3NlcyA9IHJlcXVpcmUoJy4vY2xhc3NlcycpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XG5pZiAoc2kpIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9O1xufSBlbHNlIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRUaW1lb3V0KGZuLCAwKTsgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aWNrOyIsInZhciBuZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MvYnJvd3Nlci5qcycpLm5leHRUaWNrO1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xudmFyIG5leHRJbW1lZGlhdGVJZCA9IDA7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBUaGF0J3Mgbm90IGhvdyBub2RlLmpzIGltcGxlbWVudHMgaXQgYnV0IHRoZSBleHBvc2VkIGFwaSBpcyB0aGUgc2FtZS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gc2V0SW1tZWRpYXRlIDogZnVuY3Rpb24oZm4pIHtcbiAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBmYWxzZSA6IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblxuICBuZXh0VGljayhmdW5jdGlvbiBvbk5leHRUaWNrKCkge1xuICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG4gICAgICAvLyBmbi5jYWxsKCkgaXMgZmFzdGVyIHNvIHdlIG9wdGltaXplIGZvciB0aGUgY29tbW9uIHVzZS1jYXNlXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2NhbGwtYXBwbHktc2VndVxuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbi5jYWxsKG51bGwpO1xuICAgICAgfVxuICAgICAgLy8gUHJldmVudCBpZHMgZnJvbSBsZWFraW5nXG4gICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpZDtcbn07XG5cbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSB0eXBlb2YgY2xlYXJJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGNsZWFySW1tZWRpYXRlIDogZnVuY3Rpb24oaWQpIHtcbiAgZGVsZXRlIGltbWVkaWF0ZUlkc1tpZF07XG59OyIsIm1vZHVsZS5leHBvcnRzPXtcclxuICBcIm5hbWVcIjogXCJwZGYtYnVpbGRlci0yMDIwXCIsXHJcbiAgXCJ2ZXJzaW9uXCI6IFwiMC4wLjEwLXNuYXBzaG90XCIsXHJcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxyXG4gIFwibWFpblwiOiBcImluZGV4LmpzXCIsXHJcbiAgXCJzY3JpcHRzXCI6IHtcclxuICAgIFwiYnVpbGQtYWxsXCI6IFwibnBtIHJ1biBidWlsZC1wZGYtZWRpdG9yICYmIG5wbSBydW4gYnVpbGQtbWFuYWdlciAmIG5wbSBydW4gZGVwbG95XCIsXHJcbiAgICBcImJ1aWxkLXBkZi1lZGl0b3JcIjogXCJicm93c2VyaWZ5IC1kIHNyYy9wZGYtZWRpdG9yL1BkZkVkaXRvci5qcyA+IHB1YmxpYy9wZGYtZWRpdG9yL3BkZi1lZGl0b3IuanNcIixcclxuICAgIFwiYnVpbGQtbWFuYWdlclwiOiBcImJyb3dzZXJpZnkgLWQgc3JjL21hbmFnZS1hcHBsaWNhdGlvbi9NYW5hZ2VBcHBsaWNhdGlvbi5qcyA+IHB1YmxpYy9tYW5hZ2UtYXBwbGljYXRpb24vbWFuYWdlci5qc1wiLFxyXG4gICAgXCJkZXBsb3lcIjogXCJ4Y29weSAvUyAvWSAgXFxcIi4vcHVibGljXFxcIiBcXFwiQzovVXNlcnMvU3RyYW5nZXJfaW5fdGhlX1EvSWRlYVByb2plY3RzL2l0ZXh0LXNlcnZlci9zdGF0aWNcXFwiXCJcclxuICB9LFxyXG4gIFwiZGV2RGVwZW5kZW5jaWVzXCI6IHtcclxuICAgIFwiYmFiZWwtcHJlc2V0LWVzMjAxNVwiOiBcIl42LjI0LjFcIixcclxuICAgIFwiYnJvd3NlcmlmeVwiOiBcIl4xNi4yLjNcIixcclxuICAgIFwiYnJvd3NlcmlmeS1jc3NcIjogXCJeMC4xNC4wXCIsXHJcbiAgICBcImV4cG9ydHMtbG9hZGVyXCI6IFwiXjAuNy4wXCIsXHJcbiAgICBcImdyYWNlZnVsLWZzXCI6IFwiXjQuMS4xM1wiLFxyXG4gICAgXCJpbXBvcnRzLWxvYWRlclwiOiBcIl4wLjguMFwiLFxyXG4gICAgXCJzdHJpcGlmeVwiOiBcIl42LjAuMFwiXHJcbiAgfSxcclxuICBcImJyb3dzZXJpZnlcIjoge1xyXG4gICAgXCJ0cmFuc2Zvcm1cIjogW1xyXG4gICAgICBcImJyb3dzZXJpZnktY3NzXCJcclxuICAgIF1cclxuICB9LFxyXG4gIFwiYXV0aG9yXCI6IFwiXCIsXHJcbiAgXCJsaWNlbnNlXCI6IFwiSVNDXCIsXHJcbiAgXCJkZXBlbmRlbmNpZXNcIjoge1xyXG4gICAgXCJkMy1zZWxlY3Rpb25cIjogXCJeMS40LjBcIixcclxuICAgIFwiZHJhZ3VsYVwiOiBcIl4zLjcuMlwiXHJcbiAgfVxyXG59XHJcbiIsIi8vIHZhciBJbmxpbmVFZGl0b3IgPSByZXF1aXJlKCcuLi8uLi9kZXBlbmRlbmNpZXMvY2tlZGl0b3IvY2tlZGl0b3I1LWlubGluZS1mdWxsL2J1aWxkL2NrZWRpdG9yJylcclxudmFyIEJhbGxvb25FZGl0b3IgPSByZXF1aXJlKCcuLi8uLi9kZXBlbmRlbmNpZXMvY2tlZGl0b3IvY2tlZGl0b3ItYmFsb29uL2J1aWxkL2NrZWRpdG9yJylcclxuLy8gcmVxdWlyZSgnLi4vLi4vZGVwZW5kZW5jaWVzL2NrZWRpdG9yL2NrZWRpdG9yNS1pbmxpbmUtZnVsbC9idWlsZC90cmFuc2xhdGlvbnMvcnUnKVxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgICByZW1vdmVUZXh0RWRpdG9yOiBmdW5jdGlvbiByZW1vdmUoZWwpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRUZXh0RWRpdG9yOiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAvLyAhZWwuZ2V0QXR0cmlidXRlKCdpZCcpICYmXHJcbiAgICAgICAgLy9lbC5zZXRBdHRyaWJ1dGUoJ2lkJywgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpKTtcclxuICAgICAgICAvLyBlbC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsIHRydWUpXHJcblxyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT5cclxuICAgICAgICAgICAgY2tFZGl0b3IoZWwpXHJcbiAgICAgICAgICAgIC8vICwgMTAwMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gY2tFZGl0b3IoZWwpIHtcclxuXHJcbiAgICBpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYWxpemVkJykpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdpbml0aWFsaXplZCcpO1xyXG4gICAgLy8gSW5saW5lRWRpdG9yXHJcbiAgICBCYWxsb29uRWRpdG9yXHJcbiAgICAgICAgLmNyZWF0ZShlbCwge1xyXG5cclxuICAgICAgICAgICAgdG9vbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAndW5kbycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3JlZG8nLFxyXG4gICAgICAgICAgICAgICAgICAgICd8JyxcclxuICAgICAgICAgICAgICAgICAgICAnYm9sZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2l0YWxpYycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VuZGVybGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N0cmlrZXRocm91Z2gnLFxyXG4gICAgICAgICAgICAgICAgICAgICdzdWJzY3JpcHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdzdXBlcnNjcmlwdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJ2Jsb2NrUXVvdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICdidWxsZXRlZExpc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICdudW1iZXJlZExpc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICd8JyxcclxuICAgICAgICAgICAgICAgICAgICAnYWxpZ25tZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAnaW5kZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAnb3V0ZGVudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnRGYW1pbHknLFxyXG4gICAgICAgICAgICAgICAgICAgICdmb250U2l6ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnRCYWNrZ3JvdW5kQ29sb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICdmb250Q29sb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICd8JyxcclxuICAgICAgICAgICAgICAgICAgICAvLyAnaW1hZ2VVcGxvYWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICdpbnNlcnRUYWJsZScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NwZWNpYWxDaGFyYWN0ZXJzJyxcclxuICAgICAgICAgICAgICAgICAgICAnaG9yaXpvbnRhbExpbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICdsaW5rJ1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsYW5ndWFnZTogJ3J1JyxcclxuICAgICAgICAgICAgaW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgIC8vIFlvdSBuZWVkIHRvIGNvbmZpZ3VyZSB0aGUgaW1hZ2UgdG9vbGJhciwgdG9vLCBzbyBpdCB1c2VzIHRoZSBuZXcgc3R5bGUgYnV0dG9ucy5cclxuICAgICAgICAgICAgICAgIHRvb2xiYXI6IFtcclxuICAgICAgICAgICAgICAgICAgICAnaW1hZ2VVcGxvYWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICdpbWFnZVRleHRBbHRlcm5hdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJ3wnLFxyXG4gICAgICAgICAgICAgICAgICAgICdpbWFnZVN0eWxlOmFsaWduTGVmdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ltYWdlU3R5bGU6ZnVsbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ltYWdlU3R5bGU6YWxpZ25SaWdodCdcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAnZnVsbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FsaWduTGVmdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FsaWduUmlnaHQnXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRhYmxlOiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VG9vbGJhcjogW1xyXG4gICAgICAgICAgICAgICAgICAgICd0YWJsZUNvbHVtbicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RhYmxlUm93JyxcclxuICAgICAgICAgICAgICAgICAgICAnbWVyZ2VUYWJsZUNlbGxzJyxcclxuICAgICAgICAgICAgICAgICAgICAndGFibGVDZWxsUHJvcGVydGllcycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RhYmxlUHJvcGVydGllcydcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGljZW5zZUtleTogJycsXHJcblxyXG4gICAgICAgIH0pLnRoZW4oZWRpdG9yID0+IHtcclxuICAgICAgICAgICAgZWwuZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgICAgIH0pXHJcbn1cclxuIiwiXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgIGxldCB0bXAgPSB0bXBFbGVtZW50KGh0bWwpO1xyXG4gICAgZml4RmxleCh0bXApO1xyXG4gICAgZml4SW1hZ2VzQWxpZ24odG1wKTtcclxuICAgIGZpeFRhYmxlc0FsaWduKHRtcCk7XHJcbiAgICBwYWdlQnJlYWtzKHRtcCk7XHJcbiAgICByZXR1cm4gcGFnZSh0bXApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdlKGVsKSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgICA8aGVhZD4ke3N0eWxlKGVsKX08L2hlYWQ+XHJcbiAgICAgICAgICAgIDxib2R5PiR7ZWwuaW5uZXJIVE1MfTwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICBgO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHlsZSh0bXApIHtcclxuICAgIGxldCBzdHlsZXMgPSB0bXAucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcclxuICAgIHN0eWxlcy5yZW1vdmUoKTtcclxuICAgIHJldHVybiBgXHJcbiAgICAgICAgPHN0eWxlPlxyXG4gICAgICAgICAgICAke3N0eWxlcy50ZXh0Q29udGVudH1cclxuICAgICAgICAgICAgZmlndXJlID4gaW1nIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDUwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmlndXJlLmltYWdlLmltYWdlX3Jlc2l6ZWQgaW1nIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgLmltYWdlLXN0eWxlLWFsaWduLWxlZnQge1xyXG4gICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAuaW1hZ2Utc3R5bGUtYWxpZ24tcmlnaHQge1xyXG4gICAgICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgPC9zdHlsZT5cclxuICAgIGA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2VCcmVha3ModG1wKSB7XHJcbiAgICB0bXAucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UtYnJlYWsnKS5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICBlbC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdwYWdlLWJyZWFrJylcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpeEZsZXgoZWwpIHtcclxuICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb3cnKS5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgbGV0IGNvbHVtbnMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgnLmNvbC14cycpXHJcbiAgICAgICAgY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzID0gY29sLnN0eWxlO1xyXG4gICAgICAgICAgICBzLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJ1xyXG4gICAgICAgICAgICBzLm1pbldpZHRoID0gcy53aWR0aCA9IDEwMCAvIGNvbHVtbnMubGVuZ3RoICsgJyUnXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpeEltYWdlc0FsaWduKGVsKSB7XHJcbiAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCdmaWd1cmUuaW1hZ2UnKS5mb3JFYWNoKGltZ0Jsb2NrID0+IHtcclxuICAgICAgICBsZXQgY2VudGVyQWxpZ24gPSAhaW1nQmxvY2suY2xhc3NMaXN0LmNvbnRhaW5zKCdpbWFnZS1zdHlsZS1hbGlnbi1sZWZ0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIWltZ0Jsb2NrLmNsYXNzTGlzdC5jb250YWlucygnaW1hZ2Utc3R5bGUtYWxpZ24tcmlnaHQnKTtcclxuICAgICAgICBpZiAoY2VudGVyQWxpZ24pXHJcbiAgICAgICAgICAgIGltZ0Jsb2NrLnBhcmVudE5vZGUuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIlxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZml4VGFibGVzQWxpZ24oZWwpIHtcclxuICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpZ3VyZS50YWJsZScpLmZvckVhY2godGFibGVCbG9jayA9PiB7XHJcbiAgICAgICAgbGV0IGNlbnRlckFsaWduID0gIXRhYmxlQmxvY2suc3R5bGUuZmxvYXQ7XHJcbiAgICAgICAgaWYgKCFjZW50ZXJBbGlnbikgcmV0dXJuXHJcbiAgICAgICAgdGFibGVCbG9jay5wYXJlbnROb2RlLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCJcclxuICAgICAgICB0YWJsZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiXHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiB0bXBFbGVtZW50KGh0bWwpIHtcclxuICAgIGxldCB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRtcC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgcmV0dXJuIHRtcDtcclxufSIsImxldCBmaWxsID0gJyM0MzJjMTInXHJcblxyXG5sZXQgbW92ZSA9IGBcclxuICAgIDxwYXRoIGQ9XCJNMzUyLjIwMSA0MjUuNzc1bC03OS4xOTYgNzkuMTk2Yy05LjM3MyA5LjM3My0yNC41NjggOS4zNzMtMzMuOTQxIFxyXG4gICAgICAgIDBsLTc5LjE5Ni03OS4xOTZjLTE1LjExOS0xNS4xMTktNC40MTEtNDAuOTcxIDE2Ljk3MS00MC45N2g1MS4xNjJMMjI4IDI4NEgxMjcuMTk2djUxLjE2MmMwIFxyXG4gICAgICAgIDIxLjM4Mi0yNS44NTEgMzIuMDktNDAuOTcxIDE2Ljk3MUw3LjAyOSAyNzIuOTM3Yy05LjM3My05LjM3My05LjM3My0yNC41NjkgMC0zMy45NDFMODYuMjI1IFxyXG4gICAgICAgIDE1OS44YzE1LjExOS0xNS4xMTkgNDAuOTcxLTQuNDExIDQwLjk3MSAxNi45NzFWMjI4SDIyOFYxMjcuMTk2aC01MS4yM2MtMjEuMzgyIFxyXG4gICAgICAgIDAtMzIuMDktMjUuODUxLTE2Ljk3MS00MC45NzFsNzkuMTk2LTc5LjE5NmM5LjM3My05LjM3MyAyNC41NjgtOS4zNzMgMzMuOTQxIDBsNzkuMTk2IDc5LjE5NmMxNS4xMTkgXHJcbiAgICAgICAgMTUuMTE5IDQuNDExIDQwLjk3MS0xNi45NzEgNDAuOTcxaC01MS4xNjJWMjI4aDEwMC44MDR2LTUxLjE2MmMwLTIxLjM4MiAyNS44NTEtMzIuMDkgXHJcbiAgICAgICAgNDAuOTctMTYuOTcxbDc5LjE5NiA3OS4xOTZjOS4zNzMgOS4zNzMgOS4zNzMgMjQuNTY5IDAgMzMuOTQxTDQyNS43NzMgMzUyLjJjLTE1LjExOSAxNS4xMTktNDAuOTcxIFxyXG4gICAgICAgIDQuNDExLTQwLjk3LTE2Ljk3MVYyODRIMjg0djEwMC44MDRoNTEuMjNjMjEuMzgyIDAgMzIuMDkgMjUuODUxIDE2Ljk3MSA0MC45NzF6XCIvPlxyXG5gO1xyXG5cclxubGV0IGNvcHkgPSBgXHJcbiAgICA8cGF0aCBmaWxsPVwiJHtmaWxsfVwiIGQ9XCJNMzIwIDQ0OHY0MGMwIDEzLjI1NS0xMC43NDUgMjQtMjQgMjRIMjRjLTEzLjI1NSBcclxuICAgICAgICAwLTI0LTEwLjc0NS0yNC0yNFYxMjBjMC0xMy4yNTUgMTAuNzQ1LTI0IDI0LTI0aDcydjI5NmMwIFxyXG4gICAgICAgIDMwLjg3OSAyNS4xMjEgNTYgNTYgNTZoMTY4em0wLTM0NFYwSDE1MmMtMTMuMjU1IDAtMjQgMTAuNzQ1LTI0IDI0djM2OGMwIFxyXG4gICAgICAgIDEzLjI1NSAxMC43NDUgMjQgMjQgMjRoMjcyYzEzLjI1NSAwIDI0LTEwLjc0NSAyNC0yNFYxMjhIMzQ0Yy0xMy4yIFxyXG4gICAgICAgIDAtMjQtMTAuOC0yNC0yNHptMTIwLjk3MS0zMS4wMjlMMzc1LjAyOSA3LjAyOUEyNCAyNCAwIDAgMCAzNTguMDU5IFxyXG4gICAgICAgIDBIMzUydjk2aDk2di02LjA1OWEyNCAyNCAwIDAgMC03LjAyOS0xNi45N3pcIi8+XHJcbmA7XHJcblxyXG5sZXQgZGVsID0gYFxyXG4gICAgPHBhdGggZmlsbD1cIiR7ZmlsbH1cIiBkPVwiTTgxICA4MSBsMzUwICAzNTAgbC00MCA0MCBsLTM1MCAtMzUwelwiLz5cclxuICAgIDxwYXRoIGZpbGw9XCIke2ZpbGx9XCIgZD1cIk00MTEgODEgbC0zNTAgMzUwIGw0MCAgNDAgbDM1MCAgLTM1MHpcIi8+XHJcbmA7XHJcblxyXG5sZXQgZG93biA9IGBcclxuICAgIDxwYXRoIGZpbGw9XCIke2ZpbGx9XCIgZD1cIk01MCAxNTAgbDIwMCAyMDAgbDIwMCAtMjAwelwiLz5cclxuYDtcclxuXHJcbmxldCB1cCA9IGBcclxuICAgIDxwYXRoIGZpbGw9XCIke2ZpbGx9XCIgZD1cIk01MCAzNTAgbDIwMCAtMjAwIGwyMDAgMjAwelwiLz5cclxuYDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgbW92ZTogKHcsIGgpID0+IHN2Zyh3LCBoLCBtb3ZlLCBbLTUwLCAtNTAsIDYxMiwgNjEyXSksXHJcbiAgICBjb3B5OiAodywgaCkgPT4gc3ZnKHcsIGgsIGNvcHkpLFxyXG4gICAgZGVsOiAodywgaCkgPT4gc3ZnKHcsIGgsIGRlbCksXHJcbiAgICB1cDogKHcsIGgpID0+IHN2Zyh3LCBoLCB1cCksXHJcbiAgICBkb3duOiAodywgaCkgPT4gc3ZnKHcsIGgsZG93bilcclxufTtcclxuXHJcbmZ1bmN0aW9uIHN2Zyh3LCBoLCBodG1sLCB2Yikge1xyXG4gICAgdmIgPSB2YiB8fCBbLTUwLCAtNTAsIDU0OCwgNjEyXTtcclxuICAgIHJldHVybiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgXHJcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiJHt2Yn1cIiBcclxuICAgICAgICAgICAgICAgIHdpZHRoPVwiJHt3fXB4XCIgIFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiJHtofXB4XCI+XHJcbiAgICAgICAgICAgICR7aHRtbH1cclxuICAgICAgICA8L3N2Zz5gXHJcbn0iLCJyZXF1aXJlKCcuL3BkZi1lZGl0b3IuY3NzJyk7XHJcbnJlcXVpcmUoJy4uLy4uL2RlcGVuZGVuY2llcy9mbGV4Ym94Z3JpZC9mbGV4Ym94Z3JpZC5taW4uY3NzJyk7XHJcbmxldCB2ZXIgPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uXHJcblxyXG5sZXQgZG5kID0gcmVxdWlyZSgnLi9kbmQnKVxyXG5cclxubGV0IGh0bWxUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vaHRtbC10ZW1wbGF0ZScpO1xyXG5sZXQgVGVtcGxhdGVzRmFjdG9yeSA9IHJlcXVpcmUoJy4vVGVtcGxhdGVzRmFjdG9yeScpO1xyXG5cclxubGV0IFRleHRFZGl0b3IgPSByZXF1aXJlKCcuL0NrRWRpdG9yNScpO1xyXG5sZXQgYmxvY2tzID0gcmVxdWlyZSgnLi9ibG9ja3MnKTtcclxubGV0IHN2Z092ZXJsYXkgPSByZXF1aXJlKCcuL3N2Z092ZXJsYXkvc3ZnT3ZlcmxheScpO1xyXG5sZXQgZG9jdW1lbnRDbGVhbmVyID0gcmVxdWlyZSgnLi9kb2N1bWVudENsZWFuZXInKTtcclxubGV0IGZvckl0ZXh0Rm9ybWF0dGVyID0gcmVxdWlyZSgnLi9Gb3JJdGV4dEZvcm1hdHRlcicpO1xyXG5sZXQgbW91c2VvdmVyQnV0dG9ucyA9IHJlcXVpcmUoJy4vbW91c2VvdmVyQnV0dG9ucycpO1xyXG5cclxubGV0IHRlbXBsYXRlc0ZhY3RvcnkgPSBuZXcgVGVtcGxhdGVzRmFjdG9yeSgpO1xyXG5cclxuY2xhc3MgUGRmRWRpdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCB7fTtcclxuICAgICAgICB0aGlzLnByb3BlcnRpZXMuYmxvY2tQcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzLmJsb2NrUHJvcGVydGllcyB8fCB7fVxyXG4gICAgICAgIHRoaXMucHJvcGVydGllcy5idXR0b25zU2l6ZSA9IHRoaXMucHJvcGVydGllcy5idXR0b25zU2l6ZSB8fCAyNTtcclxuICAgICAgICB0aGlzLmluaXRQZGZFZGl0b3IoKTtcclxuICAgICAgICB0aGlzLndyaXRlVmVyc2lvbigpO1xyXG4gICAgICAgIGRuZC5pbml0RG5EKHRoaXMpXHJcblxyXG4gICAgICAgIHRoaXMuaW5pdENvbGxhcHNlUGFuZWxzKClcclxuICAgICAgICB0aGlzLmluaXRDbGVhckJsb2NrU2VsZWN0aW9uT25DbGlja0luTWlsa0xpc3RlbmVyKCk7XHJcblxyXG4gICAgICAgIGJsb2Nrcy5pbml0QmxvY2tzKHRoaXMpO1xyXG4gICAgICAgIHN2Z092ZXJsYXkuaW5pdFN2Z092ZXJsYXkodGhpcyk7XHJcblxyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlSG92ZXJTdGF0ZSgpXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRW1wdHlSb3dzKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwZGYtZWRpdG9yOiAnICsgdmVyKVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUVtcHR5Um93cygpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGFsbEJsb2NrcyA9IHRoaXMudGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGRmLWVkaXRvciAucGFnZSA+IC50ZW1wbGF0ZScpO1xyXG4gICAgICAgICAgICBhbGxCbG9ja3MuZm9yRWFjaChiID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghYi5maXJzdENoaWxkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck5vdE5lZWRlZFJvd3MoYi5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgIGlmIChiLmNoaWxkRWxlbWVudENvdW50ID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIGIuZmlyc3RDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKCdlbXB0eS1kcm9wLXpvbmUnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFBkZkVkaXRvcigpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IHRoaXMucHJvcGVydGllcy50YXJnZXQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXRFbGVtZW50ID09PSBcInN0cmluZ1wiKVxyXG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRFbGVtZW50KTtcclxuICAgICAgICB0YXJnZXRFbGVtZW50LmlubmVySFRNTCA9IGh0bWxUZW1wbGF0ZSh0aGlzLnByb3BlcnRpZXMpO1xyXG4gICAgICAgIHRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGVQYW5lbCAjYmxvY2tzJylcclxuICAgICAgICAgICAgLmlubmVySFRNTCA9IHRlbXBsYXRlc0ZhY3RvcnkuY3JlYXRlQmxvY2tzKCk7XHJcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZVBhbmVsICNlbGVtZW50cycpXHJcbiAgICAgICAgICAgIC5pbm5lckhUTUwgPSB0ZW1wbGF0ZXNGYWN0b3J5LmNyZWF0ZUVsZW1lbnRzKCk7XHJcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLFxyXG4gICAgICAgICAgICBlID0+IG1vdXNlb3ZlckJ1dHRvbnMubWFuYWdlKGUsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgdGhpcy50YXJnZXRFbGVtZW50ID0gdGFyZ2V0RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICB3cml0ZVZlcnNpb24oKXtcclxuICAgICAgICBsZXQgcGFnZSA9IHRoaXMudGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xyXG4gICAgICAgIGlmICghcGFnZS5nZXRBdHRyaWJ1dGUoJ2NyZWF0ZWQtdmVyJykpXHJcbiAgICAgICAgICAgIHBhZ2Uuc2V0QXR0cmlidXRlKCdjcmVhdGVkLXZlcicsIHZlcik7XHJcbiAgICAgICAgcGFnZS5zZXRBdHRyaWJ1dGUoJ2xhc3QtZWRpdGVkLXZlcicsIHZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdENsZWFyQmxvY2tTZWxlY3Rpb25PbkNsaWNrSW5NaWxrTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgbGV0IGNsZWFyID0gWydjb250ZW50JywgJ3BhZ2UnXS5maW5kKGMgPT4gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGMpKVxyXG4gICAgICAgICAgICBjbGVhciB8PSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCcucGFnZS1icmVhaycpO1xyXG4gICAgICAgICAgICBpZiAoY2xlYXIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrT25CbG9jayhudWxsKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRDb2xsYXBzZVBhbmVscygpIHtcclxuICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdyb3VwTmFtZScpLmZvckVhY2goZ3JvdXBOYW1lID0+IHtcclxuICAgICAgICAgICAgZ3JvdXBOYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBOYW1lLmNsYXNzTGlzdC50b2dnbGUoJ2NvbGxhcHNlZCcpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1hbmFnZUhvdmVyU3RhdGUodGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdGhpcy5sYXN0SG92ZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmxhc3RIb3ZlciA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UuY29udGFpbmVyID4gLnRlbXBsYXRlJylcclxuICAgICAgICAgICAgLmZvckVhY2godHBsID0+IHRwbC5jbGFzc0xpc3QucmVtb3ZlKCdob3Zlci1zdGF0ZScpKVxyXG4gICAgICAgIGlmICghdGFyZ2V0KVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnaG92ZXItc3RhdGUnKVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtYXJrRW1wdHlSb3dzKHRhcmdldCkge1xyXG4gICAgICAgIHRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wem9uZScpLmZvckVhY2goZHogPT4ge1xyXG4gICAgICAgICAgICBsZXQgZW1wdHkgPSBkei5pbm5lckhUTUwudHJpbSgpID09PSAnJztcclxuICAgICAgICAgICAgZHouY2xhc3NMaXN0LnRvZ2dsZSgnZW1wdHktZHJvcC16b25lJywgZW1wdHkpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFuYWdlRXh0cmFSb3dzKHRhcmdldCkge1xyXG4gICAgICAgIGxldCBmaXJzdCA9IFsuLi50YXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcHpvbmUnKV0uc2hpZnQoKVxyXG4gICAgICAgIGlmIChmaXJzdC5pbm5lckhUTUwudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgICAgICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5uZXdEcm9wWm9uZSgpLCBmaXJzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsYXN0ID0gWy4uLnRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wem9uZScpXS5wb3AoKVxyXG4gICAgICAgIGlmIChsYXN0LmlubmVySFRNTC50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZCh0aGlzLm5ld0Ryb3Bab25lKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhck5vdE5lZWRlZFJvd3ModGFyZ2V0KSB7XHJcbiAgICAgICAgbGV0IGRyb3Bab25lcyA9IHRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wem9uZScpO1xyXG4gICAgICAgIGxldCBwcmV2Um93SXNFbXB0eTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRyb3Bab25lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZW1wdHkgPSBkcm9wWm9uZXNbaV0uaW5uZXJIVE1MLnRyaW0oKSA9PT0gJyc7XHJcbiAgICAgICAgICAgIGlmIChlbXB0eSAmJiBwcmV2Um93SXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgZHJvcFpvbmVzW2ldLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgZG5kLnJlbW92ZUVsZW1lbnQoZHJvcFpvbmVzW2ldKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJldlJvd0lzRW1wdHkgPSBlbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZXdEcm9wWm9uZSgpIHtcclxuICAgICAgICBsZXQgZHogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkei5jbGFzc05hbWUgPSAnZHJvcHpvbmUgcm93JztcclxuICAgICAgICB0aGlzLmluaXREeihkeik7XHJcbiAgICAgICAgcmV0dXJuIGR6XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdEVkaXRvcihlbCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQnlTZWwoJy5kei1idXR0b25zLCAudGVtcGxhdGUtYnV0dG9ucycpO1xyXG4gICAgICAgIFRleHRFZGl0b3IuaW5pdFRleHRFZGl0b3IoZWwpXHJcbiAgICB9XHJcblxyXG4gICAgaW5pdER6KGRyb3Bab25lKSB7XHJcbiAgICAgICAgZG5kLnB1c2hFbGVtZW50KGRyb3Bab25lKTtcclxuICAgICAgICBkcm9wWm9uZS5jbGFzc0xpc3QucmVtb3ZlKCdvcmlnaW4nKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVCeVNlbChzZWwpIHtcclxuICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWwpXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKGUgPT4gZS5yZW1vdmUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xpY2tPbkJsb2NrKGVsKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEJsb2NrID0gZWw7XHJcbiAgICAgICAgYmxvY2tzLmhhbmRsZUNsaWNrKGVsKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgYXBpXHJcblxyXG4gICAgZ2V0RG9jdW1lbnQoKSB7XHJcbiAgICAgICAgbGV0IHBhZ2VDb250ZW50ID0gdGhpcy50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJykub3V0ZXJIVE1MO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudENsZWFuZXIocGFnZUNvbnRlbnQpLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcbiAgICBmb3JJdGV4dCgpe1xyXG4gICAgICAgIHJldHVybiBmb3JJdGV4dEZvcm1hdHRlcih0aGlzLmdldERvY3VtZW50KCkpXHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERvY3VtZW50KGRhdGEpIHtcclxuICAgICAgICBpZiAoIWRhdGEpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBsZXQgY29udGVudCA9IHRoaXMudGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gZGF0YTtcclxuICAgICAgICBsZXQgdGVtcGxhdGVzID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVtcGxhdGUnKTtcclxuICAgICAgICB0ZW1wbGF0ZXMuZm9yRWFjaCh0cGwgPT4gYmxvY2tzLmluaXRUZW1wbGF0ZSh0cGwsICcuZHJvcHpvbmUnKSk7XHJcbiAgICAgICAgZG5kLnB1c2hFbGVtZW50KGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5QZGZFZGl0b3IgPSBQZGZFZGl0b3I7IiwiY2xhc3MgVGVtcGxhdGVzRmFjdG9yeSB7XHJcblxyXG4gICAgY3JlYXRlQmxvY2tzKCkge1xyXG4gICAgICAgIGxldCByb3cgPSBgPGRpdiBjbGFzcz0nZHJvcHpvbmUgb3JpZ2luIHJvdyc+PC9kaXY+YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUZW1wbGF0ZShyb3cpICsgdGhpcy5jcmVhdGVUZW1wbGF0ZSh0aGlzLnBhZ2VCcmVha0Jsb2NrKCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAgY3JlYXRlVGVtcGxhdGUoY29udGVudCwgY29sKSB7XHJcbiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSd0ZW1wbGF0ZSAke2NvbD8nY29sLXhzJzonJ30nPiR7Y29udGVudH08L2Rpdj5gO1xyXG4gICAgfVxyXG5cclxuICAgICBpbWdCbG9jaygpIHtcclxuICAgICAgICBsZXQgc3ZnID0gYDxzdmcgcHJlc2VydmVBc3BlY3RSYXRpbz0neE1pZFlNaWQgbWVldCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPScxMDBweCcgaGVpZ2h0PScxMDBweCcgdmlld2JveD0nMCAwIDEwMCAxMDAnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0nYmxhY2snIGZpbGw9J25vbmUnIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9J00xMCw5MHYtMjBsMzAsLTMwbDE1LDE1bDM1LC0zNXY3MHogTTUsNWg5MHY5MGgtOTB6IE0zMCwxMGExMCwxMCwwLDEsMCwwLjAwMSwweic+PC9wYXRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5gO1xyXG4gICAgICAgIHJldHVybiBgPGltZyBkcmFnZ2FibGU9XCJmYWxzZVwiIGNsYXNzPVwiaW1nXCIgd2lkdGg9XCIxMDBweFwiIGhlaWdodD1cIjEwMHB4XCIgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsJHtidG9hKHN2Zyl9XCIgPmA7XHJcbiAgICB9XHJcblxyXG4gICAgIHRleHRCbG9jaygpIHtcclxuICAgICAgICByZXR1cm4gYDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgINCV0YHQu9C4INGDINC80LXQvdGPINC80L3QvtCz0L4g0JrQpiDQtdGB0YLRjCwg0Y8g0LjQvNC10Y4g0L/RgNCw0LLQviDQvdC+0YHQuNGC0Ywg0LzQsNC70LjQvdC+0LLRi9C1INGI0YLQsNC90YssIFxyXG4gICAgICAgICAgICAgICAgICAgINC4INC/0LXRgNC10LTQviDQvNC90L7QuSDQuCDQv9Cw0YbQsNC6INC00L7Qu9C20LXQvSAyINGA0LDQt9CwINC/0YDQuNGB0LXQtNCw0YLRjCwg0Lgg0YfQsNGC0LvQsNC90LjQvSDQutGDINC00LXQu9Cw0YLRjCwgXHJcbiAgICAgICAgICAgICAgICAgICAg0Lgg0Y3RhtC40LvQvtC/INC80LXQvdGPINC90LUg0LjQvNC10LXRgiDQv9GA0LDQstCwINCx0LjRgtGMINC/0L4g0L3QvtGH0LDQvCwg0L3QuNC60L7Qs9C00LAhXHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+YFxyXG4gICAgfVxyXG5cclxuICAgICB0YWJsZUJsb2NrKCkge1xyXG4gICAgICAgIGxldCB0ID0gdGhpcy50ZCgpO1xyXG4gICAgICAgIHQgKz0gdCArIHQgKyB0O1xyXG4gICAgICAgIHQgPSBgPHRyPiR7dH08L3RyPmA7XHJcbiAgICAgICAgdCArPSB0ICsgdDtcclxuICAgICAgICByZXR1cm4gYDx0YWJsZT48dGJvZHk+JHt0fTwvdGJvZHk+PC90YWJsZT5gXHJcbiAgICB9XHJcblxyXG4gICAgdGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGA8dGQgc3R5bGU9XCJib3JkZXI6IHNvbGlkXCI+Jm5ic3A7PC90ZD5gXHJcbiAgICB9XHJcblxyXG4gICAgIGhlYWRlckJsb2NrKCkge1xyXG4gICAgICAgIHJldHVybiBgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjtcIj48c3BhbiBjbGFzcz1cInRleHQtaHVnZVwiPjxzdHJvbmc+0JfQsNCz0L7Qu9C+0LLQvtC6PC9zdHJvbmc+PC9zcGFuPjwvcD5gO1xyXG4gICAgfVxyXG5cclxuICAgICBwYWdlQnJlYWtCbG9jaygpIHtcclxuICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJwYWdlLWJyZWFrXCIgc3R5bGU9XCJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXNcIj7RgNCw0LfRgNGL0LIg0YHRgtGA0LDQvdC40YbRizwvZGl2PmA7XHJcbiAgICB9XHJcblxyXG4gICAgIGNyZWF0ZUVsZW1lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiAgW1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckJsb2NrLFxyXG4gICAgICAgICAgICB0aGlzLnRleHRCbG9jayxcclxuICAgICAgICAgICAgdGhpcy5pbWdCbG9jayxcclxuICAgICAgICAgICAgdGhpcy50YWJsZUJsb2NrXHJcbiAgICAgICAgXS5tYXAoZm4gPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGA8ZGl2IGNsYXNzPVwiJHtmbi5uYW1lfSBhZGRfZWRpdG9yX2hlcmVcIj4ke2ZuLmNhbGwodGhpcyl9PC9kaXY+YDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGVtcGxhdGUoY29udGVudCwgdHJ1ZSlcclxuICAgICAgICB9KS5qb2luKCcnKVxyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRlbXBsYXRlc0ZhY3Rvcnk7IiwibGV0IHRlbXBsYXRlcyA9IHtcclxuXHJcbiAgICBibG9ja19uYW1lIDogYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdWItbGFiZWxcIj7QndCw0LfQstCw0L3QuNC1INCx0LvQvtC60LA8L2Rpdj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImJsb2NrX25hbWVcIj5cclxuICAgIGAsXHJcblxyXG4gICAgYmxvY2tfZGVzY3IgOiBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInN1Yi1sYWJlbFwiPtCe0L/QuNGB0LDQvdC40LUg0LHQu9C+0LrQsDwvZGl2PlxyXG4gICAgICAgIDx0ZXh0YXJlYSBpZD1cImJsb2NrX2Rlc2NyXCI+PC90ZXh0YXJlYT5cclxuICAgIGAsXHJcblxyXG4gICAgYmxvY2tfbm9fZWRpdDogYFxyXG4gICAgICAgIDxicj5cclxuICAgICAgICA8aW5wdXQgaWQ9XCJibG9ja19ub19lZGl0XCIgdHlwZT1cImNoZWNrYm94XCI+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cImJsb2NrX25vX2VkaXRcIiBjbGFzcz1cInN1Yi1sYWJlbFwiPtCg0LDQt9GA0LXRiNC40YLRjCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1PC9sYWJlbD5cclxuICAgIGAsXHJcbiAgICBibG9ja19ub19tb3ZlOiBgXHJcbiAgICAgICAgPGJyPlxyXG4gICAgICAgIDxpbnB1dCBpZD1cImJsb2NrX25vX21vdmVcIiB0eXBlPVwiY2hlY2tib3hcIj5cclxuICAgICAgICA8bGFiZWwgZm9yPVwiYmxvY2tfbm9fbW92ZVwiIGNsYXNzPVwic3ViLWxhYmVsXCI+0KDQsNC30YDQtdGI0LjRgtGMINC/0LXRgNC10LzQtdGJ0LXQvdC40LU8L2xhYmVsPiAgICAgXHJcbiAgICBgLFxyXG5cclxuICAgIGJsb2NrX25vX2NvcHk6IGBcclxuICAgICAgICA8YnI+XHJcbiAgICAgICAgPGlucHV0IGlkPVwiYmxvY2tfbm9fY29weVwiIHR5cGU9XCJjaGVja2JveFwiPlxyXG4gICAgICAgIDxsYWJlbCBmb3I9XCJibG9ja19ub19jb3B5XCIgIGNsYXNzPVwic3ViLWxhYmVsXCI+0KDQsNC30YDQtdGI0LjRgtGMINC60L7Qv9C40YDQvtCy0LDQvdC40LU8L2xhYmVsPlxyXG4gICAgYCxcclxuICAgIGJsb2NrX2F0dGFjaF9idXR0b246YFxyXG4gICAgICAgIDxicj5cclxuICAgICAgICA8YnI+XHJcbiAgICAgICAgPGJ1dHRvbj7Qn9GA0LjQutGA0LXQv9C40YLRjCDQuNC3INCx0LDQt9GLPC9idXR0b24+XHJcbiAgICBgXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cclxuICAgIGh0bWxUZW1wbGF0ZTogcHJvcGVydGllcyA9PiBgXHJcbiAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAgMCAxMHB4OyBjb2xvcjp3aGl0ZTsgd2lkdGg6MTAwJVwiPlxyXG4gICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMuYmxvY2tQcm9wZXJ0aWVzKS5tYXAocHJvcGVydHlCbG9jaykuam9pbignJyl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgLFxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIHByb3BlcnR5QmxvY2soZW50cnkpIHtcclxuICAgIHJldHVybiBlbnRyeVsxXSAhPT0gZmFsc2UgPyB0ZW1wbGF0ZXNbZW50cnlbMF1dIDogJyc7XHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgICBwZGZFZGl0b3I6IG51bGwsXHJcblxyXG4gICAgbmV3QmxvY2tOYW1lVGV4dDogJ9Cd0L7QstGL0Lkg0LHQu9C+0LogJyxcclxuXHJcbiAgICBwcm9wZXJ0eUtleXM6IHtcclxuICAgICAgICBibG9ja19uYW1lOiAnYmxvY2tfbmFtZScsXHJcbiAgICAgICAgYmxvY2tfZGVzY3I6ICdibG9ja19kZXNjcicsXHJcbiAgICAgICAgYmxvY2tfbm9fZWRpdDogJ2Jsb2NrX25vX2VkaXQnLFxyXG4gICAgICAgIGJsb2NrX25vX21vdmU6ICdibG9ja19ub19tb3ZlJyxcclxuICAgICAgICBibG9ja19ub19jb3B5OiAnYmxvY2tfbm9fY29weScsXHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRCbG9ja3MocGRmRWRpdG9yKXtcclxuICAgICAgICB0aGlzLnBkZkVkaXRvciA9IHBkZkVkaXRvcjtcclxuICAgICAgICB0aGlzLmluaXRCbG9ja0VkaXRvcnMoKVxyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVDbGljayhlbCkge1xyXG4gICAgICAgIGxldCBwZGZFZGl0b3IgPSB0aGlzLnBkZkVkaXRvcjtcclxuXHJcbiAgICAgICAgaWYgKCFwZGZFZGl0b3IucHJvcGVydGllcy5wcm9wZXJ0aWVzUGFnZSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmICghZWwpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGtleXMgPSB0aGlzLnByb3BlcnR5S2V5cztcclxuXHJcbiAgICAgICAgW2tleXMuIGJsb2NrX25hbWUsIGtleXMuIGJsb2NrX2Rlc2NyXS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZGZFZGl0b3IucHJvcGVydGllcy5ibG9ja1Byb3BlcnRpZXNba2V5XSlcclxuICAgICAgICAgICAgICAgIHBkZkVkaXRvci50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnK2tleSkudmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoa2V5KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBba2V5cy4gYmxvY2tfbm9fZWRpdCwga2V5cy4gYmxvY2tfbm9fbW92ZSwga2V5cy5ibG9ja19ub19jb3B5XS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZGZFZGl0b3IucHJvcGVydGllcy5ibG9ja1Byb3BlcnRpZXNba2V5XSlcclxuICAgICAgICAgICAgICAgIHBkZkVkaXRvci50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnK2tleSkuY2hlY2tlZCA9IFwidHJ1ZVwiICE9PSBlbC5nZXRBdHRyaWJ1dGUoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY29weUJsb2NrKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGxldCB0cGwgPSBlLnRhcmdldC5jbG9zZXN0KCcudGVtcGxhdGUnKTtcclxuICAgICAgICBsZXQgY2xvbmVkID0gdHBsLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICBjbG9uZWQucXVlcnlTZWxlY3RvcignLmluaXRpYWxpemVkJykuY2xhc3NMaXN0LnJlbW92ZSgnaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICB0cGwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoY2xvbmVkLCB0cGwpO1xyXG4gICAgICAgIHRwbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZSh0cGwsIGNsb25lZCk7IC8vIHN0dXBpZCBoYWNrXHJcbiAgICAgICAgY2xvbmVkLmlkID0gXCJcIjtcclxuICAgICAgICBsZXQgbmFtZSA9IHRoaXMucHJvcGVydHlLZXlzLmJsb2NrX25hbWU7XHJcbiAgICAgICAgY2xvbmVkLnNldEF0dHJpYnV0ZShuYW1lLCBjbG9uZWQuZ2V0QXR0cmlidXRlKG5hbWUpICsgJyDQutC+0L/QuNGPJylcclxuICAgICAgICB0aGlzLmluaXRUZW1wbGF0ZShjbG9uZWQsICcuZHJvcHpvbmUnKTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdFRlbXBsYXRlKGVsLCBkcm9wWm9uZVNlbGVjdG9yKSB7XHJcbiAgICAgICAgaWYgKGVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wem9uZScpKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWVsLmlkKVxyXG4gICAgICAgICAgICAgICAgZWwuaWQgPSAnYmxvY2tfJyArIHRoaXMucm5kKCkgKyB0aGlzLnJuZCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IG5hbWUgPSB0aGlzLnByb3BlcnR5S2V5cy5ibG9ja19uYW1lO1xyXG4gICAgICAgICAgICBpZiAoIWVsLmdldEF0dHJpYnV0ZShuYW1lKSlcclxuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShuYW1lLCB0aGlzLmZpbmROZXh0TnVtYmVyKCkpO1xyXG5cclxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnBkZkVkaXRvci5jbGlja09uQmxvY2soZWwpKTtcclxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbChkcm9wWm9uZVNlbGVjdG9yKS5mb3JFYWNoKGR6ID0+IHRoaXMucGRmRWRpdG9yLmluaXREeihkeikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsID0gZWwucXVlcnlTZWxlY3RvcignZGl2LmFkZF9lZGl0b3JfaGVyZScpXHJcbiAgICAgICAgICAgIGlmIChlbCAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWFsaXplZCcpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBkZkVkaXRvci5pbml0RWRpdG9yKGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcm5kKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XHJcbiAgICB9LFxyXG5cclxuICAgIGZpbmROZXh0TnVtYmVyKCkge1xyXG4gICAgICAgIGxldCBudW1iZXJzID0gWy4uLnRoaXMucGRmRWRpdG9yLnRhcmdldEVsZW1lbnQgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWdlID4gLnRlbXBsYXRlJyldLm1hcChlbCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHlLZXlzLmJsb2NrX25hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmFtZSAmJiBwYXJzZUludChuYW1lLnNwbGl0KHRoaXMubmV3QmxvY2tOYW1lVGV4dCkucG9wKCkpO1xyXG4gICAgICAgIH0pLmZpbHRlcihuID0+IG4pO1xyXG4gICAgICAgIGxldCBpID0gMTtcclxuICAgICAgICBmb3IgKDsgaSA8IDFlNTsgaSsrKVxyXG4gICAgICAgICAgICBpZiAobnVtYmVycy5pbmRleE9mKGkpID09PSAtMSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5ld0Jsb2NrTmFtZVRleHQgKyBpO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0QmxvY2tFZGl0b3JzKCkge1xyXG4gICAgICAgIGxldCAgcGRmRWRpdG9yID0gdGhpcy5wZGZFZGl0b3I7XHJcbiAgICAgICAgaWYgKCFwZGZFZGl0b3IucHJvcGVydGllcy5wcm9wZXJ0aWVzUGFnZSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wcm9wZXJ0eUtleXMpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIGlmIChwZGZFZGl0b3IucHJvcGVydGllcy5ibG9ja1Byb3BlcnRpZXNbaWRdKVxyXG4gICAgICAgICAgICAgICAgcGRmRWRpdG9yLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignIycraWQpLm9uaW5wdXQgPSBvbklucHV0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBvbklucHV0KCkge1xyXG4gICAgICAgICAgICBpZiAoIXBkZkVkaXRvci5zZWxlY3RlZEJsb2NrIHx8ICFwZGZFZGl0b3IucHJvcGVydGllcy5ibG9ja1Byb3BlcnRpZXNbdGhpcy5pZF0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZi5zZWxlY3RlZERyb3B6b25lKVxyXG4gICAgICAgICAgICBwZGZFZGl0b3Iuc2VsZWN0ZWRCbG9jay5zZXRBdHRyaWJ1dGUodGhpcy5pZCxcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9PT0gJ2NoZWNrYm94JyA/ICF0aGlzLmNoZWNrZWQgOiB0aGlzLnZhbHVlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlkICE9PSAnYmxvY2tfbm9fZWRpdCcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHBkZkVkaXRvci5zZWxlY3RlZEJsb2NrXHJcbiAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgnLmFkZF9lZGl0b3JfaGVyZScpXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsInJlcXVpcmUoJy4uLy4uL25vZGVfbW9kdWxlcy9kcmFndWxhL2Rpc3QvZHJhZ3VsYS5taW4uY3NzJyk7XHJcbmxldCBkcmFndWxhID0gcmVxdWlyZSgnZHJhZ3VsYScpO1xyXG5sZXQgYmxvY2tzID0gcmVxdWlyZSgnLi9ibG9ja3MnKTtcclxuXHJcbmxldCBkcmFrZTtcclxubGV0IHBkZkVkaXRvcjtcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBpbml0RG5EKHBkZkVkaXRvckluc3RhbmNlKSB7XHJcbiAgICAgICAgcGRmRWRpdG9yID0gcGRmRWRpdG9ySW5zdGFuY2U7XHJcbiAgICAgICAgZHJha2UgPSBkcmFndWxhKFtcclxuICAgICAgICAgICAgcGRmRWRpdG9yLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignI2Jsb2NrcycpLFxyXG4gICAgICAgICAgICBwZGZFZGl0b3IudGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZWxlbWVudHMnKSxcclxuICAgICAgICAgICAgcGRmRWRpdG9yLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKVxyXG4gICAgICAgIF0sIHtcclxuICAgICAgICAgICAgcmVtb3ZlT25TcGlsbDogdHJ1ZSxcclxuICAgICAgICAgICAgY29weTogZnVuY3Rpb24gKGVsLCBzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2UuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZW1wbGF0ZXMnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWNjZXB0czogKGVsLCB0YXJnZXQpID0+IGRyb3BBY2NlcHRzKGVsLCB0YXJnZXQpLFxyXG4gICAgICAgICAgICBtb3ZlczogZnVuY3Rpb24gKGVsLCBjb250YWluZXIsIGhhbmRsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2hhbmRsZScpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygndGVtcGxhdGVzJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZHJha2Uub24oJ2RyYWcnLCBlID0+IGRyYWdTdGFydChlKSk7XHJcbiAgICAgICAgZHJha2Uub24oJ2Ryb3AnLCAoZWwsIHRhcmdldCkgPT4gaGFuZGxlRHJvcChlbCwgdGFyZ2V0KSk7XHJcbiAgICB9LFxyXG4gICAgcHVzaEVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIGRyYWtlLmNvbnRhaW5lcnMucHVzaChlbGVtZW50KVxyXG4gICAgfSxcclxuICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIGRyYWtlLmNvbnRhaW5lcnMuc3BsaWNlKCBkcmFrZS5jb250YWluZXJzLmluZGV4T2YoZWxlbWVudCksIDEgKTtcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGRyYWdTdGFydChlKXtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyb3BBY2NlcHRzKGVsLCB0YXJnZXQpIHtcclxuICAgIGxldCB0ID0gdGFyZ2V0LmNsYXNzTGlzdDtcclxuICAgIGlmICh0LmNvbnRhaW5zKCd0ZW1wbGF0ZXMnKSlcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAoZWwucXVlcnlTZWxlY3RvcignLmRyb3B6b25lJykgfHwgZWwucXVlcnlTZWxlY3RvcignLnBhZ2UtYnJlYWsnKSkge1xyXG4gICAgICAgIHJldHVybiB0LmNvbnRhaW5zKCdwYWdlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBjYW5FZGl0ID0gdC5jb250YWlucygnZHJvcHpvbmUnKSAmJlxyXG4gICAgICAgICAgICB0YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2Jsb2NrX25vX2VkaXQnKSAhPT0gJ3RydWUnO1xyXG4gICAgICAgIGNhbkVkaXQgJiYgcGRmRWRpdG9yLm1hbmFnZUhvdmVyU3RhdGUodGFyZ2V0LnBhcmVudE5vZGUsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjYW5FZGl0O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRHJvcChlbCwgdGFyZ2V0KSB7XHJcbiAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BhZ2UnKSl7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHBkZkVkaXRvci5tYW5hZ2VFeHRyYVJvd3ModGFyZ2V0KTtcclxuICAgICAgICAgICAgcGRmRWRpdG9yLmNsZWFyTm90TmVlZGVkUm93cyh0YXJnZXQpO1xyXG4gICAgICAgICAgICBwZGZFZGl0b3IubWFya0VtcHR5Um93cyh0YXJnZXQpO1xyXG4gICAgICAgIH0sIDEwKTtcclxuICAgIH1cclxuICAgIHBkZkVkaXRvci5jbGlja09uQmxvY2socGRmRWRpdG9yLnNlbGVjdGVkQmxvY2spXHJcbiAgICBibG9ja3MuaW5pdFRlbXBsYXRlKGVsLCAnLm9yaWdpbicpO1xyXG59XHJcblxyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwYWdlQ29udGVudCkge1xyXG4gICAgbGV0IHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdG1wLmlubmVySFRNTCA9IHBhZ2VDb250ZW50O1xyXG4gICAgcmVtb3ZlRWxlbWVudHModG1wKTtcclxuICAgIGNsZWFuQ2xhc3Nlcyh0bXApO1xyXG4gICAgY2xlYW5BdHRyaWJ1dGVzKHRtcCk7XHJcbiAgICByZW1vdmVFbXB0eUNsYXNzQXR0cih0bXApO1xyXG4gICAgcmVtb3ZlSW1hZ2VXaWRnZXRUZXh0KHRtcCk7XHJcbiAgICAvLyBwdWxsVXBGaWd1cmVUYWdDaGlsZHJlbih0bXApXHJcbiAgICAvLyBjb25zb2xlLmxvZyh0bXAuaW5uZXJIVE1MKVxyXG4gICAgcmV0dXJuIHRtcDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRW1wdHlDbGFzc0F0dHIodG1wKSB7XHJcbiAgICB0bXAucXVlcnlTZWxlY3RvckFsbChgW2NsYXNzPVwiXCJdYClcclxuICAgICAgICAuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVFbGVtZW50cyh0bXApIHtcclxuICAgIHRtcC5xdWVyeVNlbGVjdG9yQWxsKFtcclxuICAgICAgICAnLmNrLXdpZGdldF9fc2VsZWN0aW9uLWhhbmRsZScsXHJcbiAgICAgICAgJy5jay13aWRnZXRfX3Jlc2l6ZXInLFxyXG4gICAgICAgICcuZHotYnV0dG9ucycsXHJcbiAgICAgICAgJy50ZW1wbGF0ZS1idXR0b25zJyxcclxuICAgICAgICAnLmVtcHR5LWRyb3Atem9uZTpmaXJzdC1jaGlsZCcsXHJcbiAgICAgICAgJy5lbXB0eS1kcm9wLXpvbmU6bGFzdC1jaGlsZCdcclxuICAgIF0uam9pbignLCAnKSkuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFuQ2xhc3Nlcyh0bXApIHtcclxuICAgIFtcclxuICAgICAgICAnaW5pdGlhbGl6ZWQnLFxyXG4gICAgICAgICdjay1ibHVycmVkJyxcclxuICAgICAgICAnY2snLFxyXG4gICAgICAgICdjay1jb250ZW50JyxcclxuICAgICAgICAnY2stZWRpdG9yX19lZGl0YWJsZScsXHJcbiAgICAgICAgJ2NrLXJvdW5kZWQtY29ybmVycycsXHJcbiAgICAgICAgLy8gJ2NrLWVkaXRvcl9fZWRpdGFibGVfaW5saW5lJyxcclxuICAgICAgICAnY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGUnXHJcbiAgICBdLmZvckVhY2goYyA9PiB0bXAucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjKVxyXG4gICAgICAgIC5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoYykpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYW5BdHRyaWJ1dGVzKHRtcCkge1xyXG4gICAgW1xyXG4gICAgICAgICdhcmlhLWxhYmVsJyxcclxuICAgICAgICAnY29udGVudGVkaXRhYmxlJyxcclxuICAgICAgICAncm9sZScsXHJcbiAgICAgICAgJ2xhbmcnLFxyXG4gICAgICAgICdkaXInLFxyXG4gICAgICAgICdkYXRhLWNrZS1maWxsZXInXHJcbiAgICBdLmZvckVhY2goYXR0ciA9PiB0bXAucXVlcnlTZWxlY3RvckFsbChgWyR7YXR0cn1dYClcclxuICAgICAgICAuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cikpKVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVJbWFnZVdpZGdldFRleHQodG1wKSB7XHJcbiAgICB0bXAucXVlcnlTZWxlY3RvckFsbCgncCwgZGl2JylcclxuICAgICAgICAuZm9yRWFjaChlbCA9PiBlbC5pbm5lckhUTUwgPT09ICfQktC40LTQttC10YIg0LjQt9C+0LHRgNCw0LbQtdC90LjQuScgJiYgZWwucmVtb3ZlKCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwdWxsVXBGaWd1cmVUYWdDaGlsZHJlbih0bXApIHtcclxuICAgIHRtcC5xdWVyeVNlbGVjdG9yQWxsKCdmaWd1cmUnKVxyXG4gICAgICAgIC5mb3JFYWNoKGYgPT4ge1xyXG4gICAgICAgICAgICBmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYuZmlyc3RDaGlsZCwgZik7XHJcbiAgICAgICAgICAgIGYucmVtb3ZlKClcclxuICAgICAgICB9KVxyXG5cclxufSIsIlxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBwcm9wZXJ0aWVzID0+IGBcclxuICAgICR7cmVxdWlyZSgnLi9tb3VzZW92ZXJCdXR0b25zJykuc3R5bGVzKHByb3BlcnRpZXMpfVxyXG4gICAgPGRpdiBjbGFzcz1cInBkZi1lZGl0b3Igd3JhcHBlclwiPlxyXG4gICAgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNpZGVQYW5lbCBiZzFcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyb3VwTmFtZVwiPtCR0LvQvtC60Lg8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cImJsb2Nrc1wiIGNsYXNzPVwidGVtcGxhdGVzXCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncm91cE5hbWVcIj7QrdC70LXQvNC10L3RgtGLPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJlbGVtZW50c1wiIGNsYXNzPVwidGVtcGxhdGVzXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICR7cHJvcGVydGllcy5wcm9wZXJ0aWVzUGFnZSA/IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncm91cE5hbWVcIj7QodCy0L7QudGB0YLQstCwPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAke3JlcXVpcmUoJy4vYmxvY2tQcm9wZXJ0aWVzJykuaHRtbFRlbXBsYXRlKHByb3BlcnRpZXMpfVxyXG4gICAgICAgICAgICBgIDogJyd9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2UgY29udGFpbmVyXCI+JHtyZXF1aXJlKCcuL3BhZ2Utc3R5bGVzJyl9PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICR7cmVxdWlyZSgnLi9zdmdPdmVybGF5L3N2Z092ZXJsYXknKS5odG1sVGVtcGxhdGUocHJvcGVydGllcyl9XHJcblxyXG4gICAgPC9kaXY+XHJcbmA7XHJcbiIsImxldCBJY29ucyA9IHJlcXVpcmUoJy4vSWNvbnMnKTtcclxubGV0IGJsb2NrcyA9IHJlcXVpcmUoJy4vYmxvY2tzJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIG1hbmFnZTogZnVuY3Rpb24oZSwgcGRmRWRpdG9yKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGFuZGxlJykpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBlbGVtZW50QnV0dG9ucyhlLCBwZGZFZGl0b3IsIGJsb2NrQnV0dG9ucyhlLCBwZGZFZGl0b3IpKTtcclxuICAgIH0sXHJcbiAgICBzdHlsZXM6IHByb3BzID0+IGBcclxuICAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgICAgIC5wZGYtZWRpdG9yIC5wYWdlIC50ZW1wbGF0ZTpob3ZlciAgLmR6LWJ1dHRvbnMsXHJcbiAgICAgICAgICAgIC5wZGYtZWRpdG9yIC5wYWdlIC50ZW1wbGF0ZTpob3ZlciAgLnRlbXBsYXRlLWJ1dHRvbnMge1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC5kei1idXR0b25zLCAudGVtcGxhdGUtYnV0dG9ucyB7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxMTE7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIC5kei1idXR0b25zID4gZGl2IHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKCR7NjArcHJvcHMuYnV0dG9uc1NpemV9cHgsMCk7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNTBweDtcclxuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5kei1idXR0b25zIHN2ZywgLnRlbXBsYXRlLWJ1dHRvbnMgc3Zne1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGl2LmR6LWJ1dHRvbnMge1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDcwMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5kei1idXR0b25zLCAudGVtcGxhdGUtYnV0dG9ucyB7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMHB4O1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwcHg7XHJcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC50ZW1wbGF0ZS1idXR0b25zIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKCR7LTE4LXByb3BzLmJ1dHRvbnNTaXplfXB4LCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAudGVtcGxhdGUtYnV0dG9ucyA+IGRpdiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDBweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNjBweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIDwvc3R5bGU+XHJcbiAgICBgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJsb2NrQnV0dG9ucyhlLCBwZGZFZGl0b3IpIHtcclxuICAgIGxldCBzaXplID0gcGRmRWRpdG9yLnByb3BlcnRpZXMuYnV0dG9uc1NpemVcclxuICAgIGxldCBjbG9zZXN0RHogPSBlLnRhcmdldC5jbG9zZXN0KCcucGFnZSAudGVtcGxhdGU6bm90KC5jb2wteHMpJyk7XHJcbiAgICBjbG9zZXN0RHogPSBjbG9zZXN0RHogfHwgZS50YXJnZXQuY2xcclxuICAgIGlmIChjbG9zZXN0RHogIT09IHBkZkVkaXRvci5tb3VzZU92ZXJEeikge1xyXG4gICAgICAgIHBkZkVkaXRvci5yZW1vdmVCeVNlbCgnLmR6LWJ1dHRvbnMnKTtcclxuICAgICAgICBwZGZFZGl0b3IubW91c2VPdmVyRHogPSBjbG9zZXN0RHo7XHJcbiAgICAgICAgaWYgKGNsb3Nlc3REeikge1xyXG4gICAgICAgICAgICBsZXQgdGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGIuY2xhc3NMaXN0LmFkZCgnZHotYnV0dG9ucycpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhbk1vdmUgPSBjbG9zZXN0RHouZ2V0QXR0cmlidXRlKCdibG9ja19ub19tb3ZlJykgIT09ICd0cnVlJztcclxuICAgICAgICAgICAgbGV0IGNhbkNvcHkgPSBjbG9zZXN0RHouZ2V0QXR0cmlidXRlKCdibG9ja19ub19jb3B5JykgIT09ICd0cnVlJztcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlLWJyZWFrJykpXHJcbiAgICAgICAgICAgICAgICBjYW5Db3B5ID0gMDtcclxuICAgICAgICAgICAgdGIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7Y2FuTW92ZSA/IGA8c3BhbiBjbGFzcz0naGFuZGxlJz4ke0ljb25zLm1vdmUoc2l6ZSwgc2l6ZSl9PC9zcGFuPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtjYW5Db3B5ID8gYDxzcGFuIGNsYXNzPSdjb3B5Jz4ke0ljb25zLmNvcHkoc2l6ZSwgc2l6ZSl9PC9zcGFuPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtjYW5Db3B5ID8gYDxzcGFuIGNsYXNzPSdkZWwnPiR7SWNvbnMuZGVsKHNpemUsIHNpemUpfTwvc3Bhbj5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7Y2FuQ29weSA/IGA8c3BhbiBjbGFzcz0ndXAnPiR7SWNvbnMudXAoc2l6ZSwgc2l6ZSl9PC9zcGFuPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtjYW5Db3B5ID8gYDxzcGFuIGNsYXNzPSdkb3duJz4ke0ljb25zLmRvd24oc2l6ZSwgc2l6ZSl9PC9zcGFuPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIGNsb3Nlc3REei5pbnNlcnRCZWZvcmUodGIsIGNsb3Nlc3REei5maXJzdENoaWxkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb3B5ID0gdGIucXVlcnlTZWxlY3RvcignLmNvcHknKVxyXG4gICAgICAgICAgICBjb3B5ICYmIChjb3B5Lm9uY2xpY2sgPSBlID0+IGJsb2Nrcy5jb3B5QmxvY2soZSkpXHJcblxyXG4gICAgICAgICAgICBsZXQgZGVsID0gdGIucXVlcnlTZWxlY3RvcignLmRlbCcpXHJcbiAgICAgICAgICAgIGRlbCAmJiAoZGVsLm9uY2xpY2sgPSBlID0+IHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHBsID0gZS50YXJnZXQuY2xvc2VzdCgnLnRlbXBsYXRlJyk7XHJcbiAgICAgICAgICAgICAgICB0cGwucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IHVwID0gdGIucXVlcnlTZWxlY3RvcignLnVwJylcclxuICAgICAgICAgICAgdXAgJiYgKHVwLm9uY2xpY2sgPSBlID0+IHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHBsID0gZS50YXJnZXQuY2xvc2VzdCgnLnRlbXBsYXRlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHBsLnByZXZpb3VzU2libGluZyAmJiB0cGwucHJldmlvdXNTaWJsaW5nLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiZGl2XCIpXHJcbiAgICAgICAgICAgICAgICAgICB0cGwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHBsLCB0cGwucHJldmlvdXNTaWJsaW5nKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBkb3duID0gdGIucXVlcnlTZWxlY3RvcignLmRvd24nKVxyXG4gICAgICAgICAgICBkb3duICYmIChkb3duLm9uY2xpY2sgPSBlID0+IHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHBsID0gZS50YXJnZXQuY2xvc2VzdCgnLnRlbXBsYXRlJyk7XHJcbiAgICAgICAgICAgICAgICB0cGwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHBsLCB0cGwubmV4dFNpYmxpbmcubmV4dFNpYmxpbmcpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjbG9zZXN0RHo7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVsZW1lbnRCdXR0b25zKGUsIHBkZkVkaXRvciwgY2xvc2VzdER6KSB7XHJcbiAgICBsZXQgc2l6ZSA9IHBkZkVkaXRvci5wcm9wZXJ0aWVzLmJ1dHRvbnNTaXplXHJcbiAgICBsZXQgY2xvc2VzdFRwbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5wYWdlIC50ZW1wbGF0ZS5jb2wteHMnKTtcclxuICAgIGlmIChjbG9zZXN0VHBsICE9PSBwZGZFZGl0b3IubW91c2VPdmVyVHBsKSB7XHJcbiAgICAgICAgcGRmRWRpdG9yLnJlbW92ZUJ5U2VsKCcudGVtcGxhdGUtYnV0dG9ucycpO1xyXG4gICAgICAgIHBkZkVkaXRvci5tb3VzZU92ZXJUcGwgPSBjbG9zZXN0VHBsO1xyXG4gICAgICAgIGxldCBjYW5FZGl0ID0gY2xvc2VzdER6ICYmIGNsb3Nlc3REei5nZXRBdHRyaWJ1dGUoJ2Jsb2NrX25vX2VkaXQnKSAhPT0gJ3RydWUnO1xyXG4gICAgICAgIGlmIChjbG9zZXN0VHBsICYmIGNhbkVkaXQpIHtcclxuICAgICAgICAgICAgbGV0IGNsb3Nlc3RUcGwxID0gZS50YXJnZXQuY2xvc2VzdCgnLnBhZ2UgLnRlbXBsYXRlLmNvbC14czpub3QoLm1jZS1lZGl0LWZvY3VzKScpO1xyXG4gICAgICAgICAgICBsZXQgdGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGIuY2xhc3NMaXN0LmFkZCgndGVtcGxhdGUtYnV0dG9ucycpO1xyXG4gICAgICAgICAgICB0Yi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0naGFuZGxlJz4ke0ljb25zLm1vdmUoc2l6ZSwgc2l6ZSl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICBjbG9zZXN0VHBsMS5pbnNlcnRCZWZvcmUodGIsIGNsb3Nlc3RUcGwxLmZpcnN0Q2hpbGQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBgXHJcbjxzdHlsZT5cclxucCB7XHJcbiAgICBtYXJnaW4tYmxvY2stc3RhcnQ6IDAhaW1wb3J0YW50O1xyXG4gICAgbWFyZ2luLWJsb2NrLWVuZDogMCAhaW1wb3J0YW50O1xyXG59XHJcbi5wYWdlIHtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIG1pbi1oZWlnaHQ6IDExMTBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG59XHJcbi50ZW1wbGF0ZSB7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG4ucGFnZSA+IC50ZW1wbGF0ZTpub3QoOmxhc3QtY2hpbGQpIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxufVxyXG5kaXYuZHJvcHpvbmUucm93IHtcclxuICAgIG1pbi1oZWlnaHQ6IDM1cHg7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICB0cmFuc2l0aW9uOiAzMDBtcztcclxufVxyXG5kaXYuZHJvcHpvbmUucm93LmVtcHR5LWRyb3Atem9uZSB7XHJcbiAgICAgbWluLWhlaWdodDogMHB4O1xyXG4gICAgIG9wYWNpdHk6IDA7XHJcbn1cclxuZGl2LnRlbXBsYXRlLmhvdmVyLXN0YXRlIGRpdi5kcm9wem9uZS5yb3cuZW1wdHktZHJvcC16b25lIHtcclxuICAgICBtaW4taGVpZ2h0OiAyNXB4O1xyXG4gICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDI7XHJcbn1cclxuLnBhZ2UgLnBhZ2UtYnJlYWsge1xyXG4gICAgbWFyZ2luLWxlZnQ6IC0yMHB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAtMjBweDtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWNvbCk7XHJcbiAgICBjb2xvcjogb3JhbmdlO1xyXG59XHJcbi5wYWdlLWJyZWFrIHtcclxuICAgIGJhY2tncm91bmQ6ICNlZWU7XHJcbiAgICBoZWlnaHQ6IDM1cHg7XHJcbiAgICBwb2ludGVyLWV2ZW50czpub25lO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbGluZS1oZWlnaHQ6IDM1cHg7XHJcbn1cclxuIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGUge1xyXG4gICAgaGVpZ2h0OiAwO1xyXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAsMCk7XHJcbiB9XHJcbiAuY2std2lkZ2V0X3dpdGgtc2VsZWN0aW9uLWhhbmRsZXtcclxuICAgIG1hcmdpbi10b3A6IDE1cHggIWltcG9ydGFudDtcclxuIH1cclxuIC5jay13aWRnZXRfX3NlbGVjdGlvbi1oYW5kbGUgLmNrLmNrLWljb24ge1xyXG4gICAgb3BhY2l0eTogMDtcclxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gfVxyXG4gLyoudGVtcGxhdGUuY29sLXhzIHsqL1xyXG4gLyogICBwYWRkaW5nOiAycHghaW1wb3J0YW50OyovXHJcbiAvKn0qL1xyXG4gLyouZHJvcHpvbmUgPiAudGVtcGxhdGUgeyovXHJcbiAvKiAgIGhlaWdodDogMTAwJTsqL1xyXG4gLyp9Ki9cclxuIC5wYWdlIHRhYmxlIHtcclxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiB9XHJcbiAucGFnZSB0YWJsZSB0ZCB7XHJcbiAgICBtaW4td2lkdGg6IDQwcHg7XHJcbiB9XHJcbiBcclxuQHBhZ2Uge1xyXG4gICAgbWFyZ2luOiAwcHg7XHJcbn1cclxuPC9zdHlsZT5cclxuYC5zcGxpdCgnXFxuJykuam9pbignJykuc3BsaXQoJyAgICAnKS5qb2luKCcnKTsiLCJ2YXIgY3NzID0gXCIucGRmLWVkaXRvci53cmFwcGVyIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgLS1iZy1jb2w6ICM0NDQ7XFxufVxcbi5wZGYtZWRpdG9yIC5jb250ZW50IHtcXG4gIGZsZXgtZ3JvdzogMTtcXG4gIGJhY2tncm91bmQ6IHZhcigtLWJnLWNvbCk7XFxuICBvdmVyZmxvdy15OiBzY3JvbGw7XFxuICBwYWRkaW5nOiA1MHB4IDIwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbi5wZGYtZWRpdG9yIC5wYWdlIHtcXG4gIGJveC1zaGFkb3c6IDFweCAxcHggNHB4IDFweCAjMjIyNjtcXG59XFxuLnBkZi1lZGl0b3IgLnNpZGVQYW5lbCxcXG4ucGRmLWVkaXRvciAucHJvcHNQYW5lbCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgd2lkdGg6IDM2MHB4O1xcbiAgLypiYWNrZ3JvdW5kOiAjNDQ0OyovXFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBncmF5O1xcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgZ3JheTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxufVxcbi5wZGYtZWRpdG9yIC50ZW1wbGF0ZXMge1xcbiAgLypmbGV4LWdyb3c6IDE7Ki9cXG4gIC8qb3ZlcmZsb3cteTogYXV0bzsqL1xcbiAgLypvdmVyZmxvdy14OiBoaWRkZW47Ki9cXG4gIHBhZGRpbmc6IDEwcHggMjVweDtcXG59XFxuLnBkZi1lZGl0b3IgLnRlbXBsYXRlcyAudGVtcGxhdGUge1xcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xcbiAgLypwYWRkaW5nOiAgNXB4IDA7Ki9cXG59XFxuLnBkZi1lZGl0b3IgLmJ1dHRvbnMge1xcbiAgcGFkZGluZzogNXB4IDVweCAwIDVweDtcXG59XFxuLnBkZi1lZGl0b3IgLmJ1dHRvbnMgYnV0dG9uIHtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgYm9yZGVyLXJhZGl1czogMTFweDtcXG59XFxuLnBkZi1lZGl0b3IgLnRlbXBsYXRlIHtcXG4gIHRyYW5zaXRpb246IDAuMnM7XFxufVxcbi5wZGYtZWRpdG9yICNlbGVtZW50cyAudGVtcGxhdGUge1xcbiAgdHJhbnNpdGlvbjogMC4ycztcXG4gIGJhY2tncm91bmQ6ICNlZWU7XFxufVxcbi5wZGYtZWRpdG9yIC5zaWRlUGFuZWwgLmRyb3B6b25lIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxuICBtaW4taGVpZ2h0OiAzNXB4O1xcbn1cXG4ucGRmLWVkaXRvciAuc2lkZVBhbmVsIC50ZW1wbGF0ZTpob3ZlciB7XFxuICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XFxuICBjdXJzb3I6IG1vdmU7XFxufVxcbi5kcm9wem9uZSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMTtcXG4gIC8qYm9yZGVyOiAxcHggc29saWQgIzAwMDM7Ki9cXG59XFxuLypkaXYuZHJvcHpvbmUucm93OmZpcnN0LWNoaWxkLCovXFxuLypkaXYuZHJvcHpvbmUucm93Omxhc3QtY2hpbGQgeyovXFxuLyogICAgbWluLWhlaWdodDogMDsqL1xcbi8qfSovXFxuLmhhbmRsZSB7XFxuICBjdXJzb3I6IG1vdmU7XFxufVxcbi5jb3B5IHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG59XFxuLmhhbmRsZSxcXG4uY29weSxcXG4uZGVsLFxcbi51cCxcXG4uZG93biB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NCwgMTc3LCA2MiwgMC40KTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGJvcmRlci1yYWRpdXM6IDE1JTtcXG4gIHRyYW5zaXRpb246IDAuMnM7XFxuICBtYXJnaW46IDJweDtcXG59XFxuLmhhbmRsZTpob3ZlcixcXG4uY29weTpob3ZlcixcXG4uZGVsOmhvdmVyLFxcbi51cDpob3ZlcixcXG4uZG93bjpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NCwgMTc3LCA2MiwgMC44KTtcXG4gIC8qYmFja2dyb3VuZC1jb2xvcjogcmdiKDE4NywgMTM1LCA2NCk7Ki9cXG59XFxuLmR6LWJ1dHRvbnMsXFxuLnRlbXBsYXRlLWJ1dHRvbnMge1xcbiAgb3BhY2l0eTogMDtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xcbiAgd2lkdGg6IDBweDtcXG4gIGhlaWdodDogMHB4O1xcbiAgbGluZS1oZWlnaHQ6IDA7XFxufVxcbi50ZW1wbGF0ZS1idXR0b25zIHtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC00MHB4LCAwKTtcXG59XFxuLnRlbXBsYXRlLWJ1dHRvbnMgPiBkaXYge1xcbiAgd2lkdGg6IDQwcHg7XFxuICBoZWlnaHQ6IDYwcHg7XFxuICAvKmJhY2tncm91bmQ6IHJlYmVjY2FwdXJwbGU7Ki9cXG59XFxuZGl2LmR6LWJ1dHRvbnMge1xcbiAgbWFyZ2luLWxlZnQ6IDcwMHB4O1xcbn1cXG4uc3ZnLW92ZXJsYXkge1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgdG9wOiAwO1xcbiAgbGVmdDogMDtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG50YWJsZSB0ZCB7XFxuICBtaW4td2lkdGg6IDUwcHg7XFxuICBtaW4taGVpZ2h0OiAzMHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XFxufVxcbi5zdWItbGFiZWwge1xcbiAgZm9udC1zaXplOiAxNnB4O1xcbiAgY29sb3I6ICM5OTk7XFxuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XFxufVxcbi5zdWItbGFiZWw6Zmlyc3QtY2hpbGQge1xcbiAgcGFkZGluZy10b3A6IDVweDtcXG59XFxuLnNpZGVQYW5lbCAjZWxlbWVudHMgPiBkaXYudGVtcGxhdGUge1xcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IGdyYXk7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbi5zaWRlUGFuZWwgI2VsZW1lbnRzICA+IGRpdi50ZW1wbGF0ZSB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbi5zaWRlUGFuZWwgI2VsZW1lbnRzICB0YWJsZSB7XFxuICBtYXJnaW4tdG9wOiA1cHg7XFxuICBtYXJnaW4tYm90dG9tOiA1cHg7XFxufVxcbi5zaWRlUGFuZWwgI2VsZW1lbnRzICBpbWcge1xcbiAgbWFyZ2luLWJvdHRvbTogLTRweDtcXG59XFxuZGl2LnRlbXBsYXRlICB0YWJsZSB7XFxuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcbn1cXG4uc2lkZVBhbmVsIHRleHRhcmVhIHtcXG4gIHdpZHRoOiAzMzNweDtcXG4gIGhlaWdodDogODRweDtcXG59XFxuLnNpZGVQYW5lbCBidXR0b24sXFxuLnNpZGVQYW5lbCBpbnB1dFt0eXBlPVxcXCJ0ZXh0XFxcIl0ge1xcbiAgaGVpZ2h0OiAyOHB4O1xcbiAgd2lkdGg6IDMzN3B4O1xcbn1cXG4vKi5zaWRlUGFuZWwgYnV0dG9uIHsqL1xcbi8qICAgIG91dGxpbmU6IG5vbmU7Ki9cXG4vKiAgICBwYWRkaW5nLXRvcDogNXB4OyovXFxuLyogICAgYm9yZGVyLXJhZGl1czogNXB4OyovXFxuLyogICAgYm9yZGVyOiAxcHggc29saWQgb3JhbmdlOyovXFxuLyogICAgYmFja2dyb3VuZDogIzQ0NDsqL1xcbi8qICAgIGNvbG9yOiB3aGl0ZTsqL1xcbi8qfSovXFxuLnNpZGVQYW5lbCB0ZXh0YXJlYSxcXG4uc2lkZVBhbmVsIGlucHV0W3R5cGU9XFxcInRleHRcXFwiXSB7XFxuICBib3JkZXItcmFkaXVzOiA0cHg7XFxuICBiYWNrZ3JvdW5kOiAjNDQ0O1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyOiAxcHggc29saWQgIzk5OTtcXG4gIG1hcmdpbi1ib3R0b206IDVweDtcXG59XFxuLmdyb3VwTmFtZSB7XFxuICB3aWR0aDogMzYwcHg7XFxuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XFxuICBib3JkZXItdG9wOiAxcHggc29saWQgZ3JheTtcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xcbiAgLyp0ZXh0LWFsaWduOiBjZW50ZXI7Ki9cXG4gIGZvbnQtc2l6ZTogMjBweDtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xcbiAgY29sb3I6ICM5OTk7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG4uZ3JvdXBOYW1lICsgZGl2IHtcXG4gIHRyYW5zaXRpb246IDMwMG1zO1xcbiAgbWF4LWhlaWdodDogMTAwdmg7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbn1cXG4uZ3JvdXBOYW1lLmNvbGxhcHNlZCArIGRpdiB7XFxuICBtYXgtaGVpZ2h0OiAwO1xcbiAgbWluLWhlaWdodDogMCAhaW1wb3J0YW50O1xcbiAgcGFkZGluZy10b3A6IDA7XFxuICBwYWRkaW5nLWJvdHRvbTogMDtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxufVxcbi5ncm91cE5hbWU6YWZ0ZXIge1xcbiAgY29udGVudDogdXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzMwJyBoZWlnaHQ9JzMwJz48Y2lyY2xlIGZpbGw9JyUyMzc3NycgY3g9JzE1JyBjeT0nMTUnIHI9JzEwJyAvPjxwb2x5bGluZSBzdHJva2Utd2lkdGg9JzMnIHBvaW50cz0nMTAgMTMgMTUgMTggMjAgMTMnIGZpbGw9J25vbmUnIHN0cm9rZT0nJTIzNDQ0Jy8+PC9zdmc+XFxcIik7XFxuICB0cmFuc2l0aW9uOiAzMDBtcztcXG4gIGZsb2F0OiByaWdodDtcXG4gIG1hcmdpbi1yaWdodDogMTBweDtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGxpbmUtaGVpZ2h0OiAwcHg7XFxufVxcbi5ncm91cE5hbWUuY29sbGFwc2VkOmFmdGVyIHtcXG4gIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSBzY2FsZSgtMSwtMSk7XFxufVxcbi5zaWRlUGFuZWwgdGFibGUge1xcbiAgLypwYWRkaW5nOiA1cHg7Ki9cXG4gIG1hcmdpbi1sZWZ0OiA0MHB4O1xcbn1cXG4uc2lkZVBhbmVsIHRyOm50aC1jaGlsZCgyKSB0ZDpudGgtY2hpbGQoMykge1xcbiAgYmFja2dyb3VuZDogbGlnaHRncmF5O1xcbn1cXG4ucGRmLWVkaXRvciAucGFnZSB7XFxuICB3aWR0aDogODAwcHg7XFxufVxcblwiOyAocmVxdWlyZShcImJyb3dzZXJpZnktY3NzXCIpLmNyZWF0ZVN0eWxlKGNzcywgeyBcImhyZWZcIjogXCJzcmNcXFxccGRmLWVkaXRvclxcXFxwZGYtZWRpdG9yLmNzc1wiIH0sIHsgXCJpbnNlcnRBdFwiOiBcImJvdHRvbVwiIH0pKTsgbW9kdWxlLmV4cG9ydHMgPSBjc3M7IiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcblxyXG4gICAgaHRtbFRlbXBsYXRlOiBwcm9wZXJ0aWVzID0+IGBcclxuICAgICAgICAgPHBhdGggZmlsbD1cIm5vbmVcIiBzdHJva2U9XCIjZmY2ZTFiXCI+PC9wYXRoPlxyXG4gICAgYCxcclxuXHJcbiAgICBpbml0Q29tcG9uZW50KHBhcmVudENvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuYmxvY2tTZWxlY3Rpb25GcmFtZSA9IHBhcmVudENvbXBvbmVudC5xdWVyeVNlbGVjdG9yKCdwYXRoJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZUNvbXBvbmVudChwZGZFZGl0b3IpIHtcclxuICAgICAgICBpZiAoIXBkZkVkaXRvci5zZWxlY3RlZEJsb2NrKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9ja1NlbGVjdGlvbkZyYW1lLnJlbW92ZUF0dHJpYnV0ZSgnZCcpO1xyXG4gICAgICAgIGxldCByID0gcGRmRWRpdG9yLnNlbGVjdGVkQmxvY2suZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NlbGVjdGlvbkZyYW1lLnNldEF0dHJpYnV0ZSgnZCcsYE0ke3IueH0sJHtyLnl9aCR7ci53aWR0aH12JHtyLmhlaWdodH1oLSR7ci53aWR0aH16YClcclxuICAgIH1cclxufSIsImxldCBibG9ja3MgPSByZXF1aXJlKCcuLi9ibG9ja3MnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cclxuICAgIGh0bWxUZW1wbGF0ZShwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmVuYWJsZWQgPSBwcm9wZXJ0aWVzLmZsb2F0aW5nQmxvY2tOYW1lKSA/IGBcclxuICAgICAgICAgICAgPGc+XHJcbiAgICAgICAgICAgICAgICA8cmVjdCB5PVwiLTMwXCIgcng9XCI1XCIgaGVpZ2h0PVwiMjVcIiBmaWxsPVwicmdiKDE4NywgMTM1LCA2NClcIj48L3JlY3Q+XHJcbiAgICAgICAgICAgICAgICA8dGV4dCB5PVwiLTEwXCIgeD1cIjEwXCI+PC90ZXh0PlxyXG4gICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgYCA6ICcnO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0Q29tcG9uZW50KHBhcmVudENvbXBvbmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB0aGlzLmJsb2NrTmFtZUdyb3VwID0gcGFyZW50Q29tcG9uZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdmctb3ZlcmxheSBnIGcnKTtcclxuICAgICAgICB0aGlzLmJsb2NrTmFtZUJnID0gcGFyZW50Q29tcG9uZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdmctb3ZlcmxheSBnIGcgcmVjdCcpO1xyXG4gICAgICAgIHRoaXMuYmxvY2tOYW1lVGV4dCA9IHBhcmVudENvbXBvbmVudC5xdWVyeVNlbGVjdG9yKCcuc3ZnLW92ZXJsYXkgZyBnIHRleHQnKTtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlQ29tcG9uZW50KHBkZkVkaXRvcikge1xyXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBsZXQgc2VsZWN0ZWRCbG9jayA9IHBkZkVkaXRvci5zZWxlY3RlZEJsb2NrO1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWRCbG9jaylcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tOYW1lR3JvdXAuc2V0QXR0cmlidXRlKGB0cmFuc2Zvcm1gLCBgdHJhbnNsYXRlKDAsLTEwMDApYCk7XHJcbiAgICAgICAgbGV0IHIgPSBzZWxlY3RlZEJsb2NrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHRoaXMuYmxvY2tOYW1lR3JvdXAuc2V0QXR0cmlidXRlKGB0cmFuc2Zvcm1gLCBgdHJhbnNsYXRlKCR7ci54fSwke3IueX0pYCk7XHJcbiAgICAgICAgdGhpcy5ibG9ja05hbWVUZXh0LnRleHRDb250ZW50ID0gc2VsZWN0ZWRCbG9jay5nZXRBdHRyaWJ1dGUoYmxvY2tzLnByb3BlcnR5S2V5cy5ibG9ja19uYW1lKTtcclxuICAgICAgICByID0gdGhpcy5ibG9ja05hbWVUZXh0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHRoaXMuYmxvY2tOYW1lQmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHIud2lkdGggKyAyMCk7XHJcbiAgICB9XHJcbn0iLCJsZXQgZmxvYXRpbmdCbG9ja05hbWUgPSByZXF1aXJlKCcuL2Zsb2F0aW5nQmxvY2tOYW1lJyk7XHJcbmxldCBibG9ja1NlbGVjdGlvbiA9IHJlcXVpcmUoJy4vYmxvY2tTZWxlY3Rpb24nKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cclxuICAgIGh0bWxUZW1wbGF0ZTogcHJvcGVydGllcyA9PiBgXHJcbiAgICAgICAgPHN2ZyBjbGFzcz1cInN2Zy1vdmVybGF5XCI+XHJcbiAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgPGNsaXBQYXRoIGlkPVwiZWRpdG9yX2NsaXBfcmVjdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uPjwvcG9seWdvbj5cclxuICAgICAgICAgICAgICAgIDwvY2xpcFBhdGg+XHJcbiAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgPGcgY2xpcC1wYXRoPVwidXJsKCNlZGl0b3JfY2xpcF9yZWN0KVwiPlxyXG4gICAgICAgICAgICAgICAgJHtibG9ja1NlbGVjdGlvbi5odG1sVGVtcGxhdGUocHJvcGVydGllcyl9XHJcbiAgICAgICAgICAgICAgICAke2Zsb2F0aW5nQmxvY2tOYW1lLmh0bWxUZW1wbGF0ZShwcm9wZXJ0aWVzKX1cclxuICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgIDwvc3ZnPlxyXG4gICAgYCxcclxuXHJcbiAgICBpbml0U3ZnT3ZlcmxheTogZnVuY3Rpb24gKHBkZkVkaXRvcikge1xyXG4gICAgICAgIHRoaXMucGRmRWRpdG9yID0gcGRmRWRpdG9yO1xyXG4gICAgICAgIHRoaXMub3ZlcmxheSA9IHBkZkVkaXRvci50YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdmctb3ZlcmxheScpO1xyXG4gICAgICAgIHRoaXMub3ZlcmxheUNsaXBQb2x5Z29uID0gdGhpcy5vdmVybGF5LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0b3JfY2xpcF9yZWN0IHBvbHlnb24nKTtcclxuICAgICAgICBibG9ja1NlbGVjdGlvbi5pbml0Q29tcG9uZW50KHRoaXMub3ZlcmxheSk7XHJcbiAgICAgICAgZmxvYXRpbmdCbG9ja05hbWUuaW5pdENvbXBvbmVudCh0aGlzLm92ZXJsYXkpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRoaXMucGRmRWRpdG9yKTtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlQ29tcG9uZW50KHBkZkVkaXRvcikge1xyXG5cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy51cGRhdGVDb21wb25lbnQocGRmRWRpdG9yKSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wZGZFZGl0b3IgLnRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBkZi1lZGl0b3IgLmNvbnRlbnQnKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKCd2aWV3Qm94JyxgMCAwICR7aW5uZXJXaWR0aH0gJHtpbm5lckhlaWdodH1gKTtcclxuICAgICAgICB0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGlubmVyV2lkdGgpO1xyXG4gICAgICAgIHRoaXMub3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGlubmVySGVpZ2h0KTtcclxuXHJcbiAgICAgICAgbGV0IHIgPSB0aGlzLnBkZkVkaXRvci50YXJnZXRFbGVtZW50IC5xdWVyeVNlbGVjdG9yKCcucGRmLWVkaXRvciAuY29udGVudCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGxldCBzY3JvbGxXaWR0aCA9IDE3O1xyXG4gICAgICAgIGxldCBwdHMgPSBbXHJcbiAgICAgICAgICAgIHIueCwgci55LFxyXG4gICAgICAgICAgICByLnggKyByLndpZHRoIC0gc2Nyb2xsV2lkdGgsIHIueSxcclxuICAgICAgICAgICAgci54ICsgci53aWR0aCAtIHNjcm9sbFdpZHRoLCByLnkgKyByLmhlaWdodCxcclxuICAgICAgICAgICAgci54LCByLnkgKyByLmhlaWdodFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdGhpcy5vdmVybGF5Q2xpcFBvbHlnb24uc2V0QXR0cmlidXRlKCdwb2ludHMnLCBwdHMuam9pbignICcpKTtcclxuXHJcbiAgICAgICAgYmxvY2tTZWxlY3Rpb24udXBkYXRlQ29tcG9uZW50KHRoaXMucGRmRWRpdG9yKVxyXG4gICAgICAgIGZsb2F0aW5nQmxvY2tOYW1lLnVwZGF0ZUNvbXBvbmVudCh0aGlzLnBkZkVkaXRvcilcclxuICAgIH1cclxuXHJcbn0iXX0=
